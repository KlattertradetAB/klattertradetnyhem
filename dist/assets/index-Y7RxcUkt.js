function WX(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Cw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Nk={exports:{}},dy={};var A2;function KX(){if(A2)return dy;A2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:a}}return dy.Fragment=e,dy.jsx=n,dy.jsxs=n,dy}var k2;function XX(){return k2||(k2=1,Nk.exports=KX()),Nk.exports}var d=XX(),Ck={exports:{}},fn={};var M2;function YX(){if(M2)return fn;M2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),v=Symbol.iterator;function x(W){return W===null||typeof W!="object"?null:(W=v&&W[v]||W["@@iterator"],typeof W=="function"?W:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,w={};function E(W,ae,me){this.props=W,this.context=ae,this.refs=w,this.updater=me||_}E.prototype.isReactComponent={},E.prototype.setState=function(W,ae){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,ae,"setState")},E.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function N(){}N.prototype=E.prototype;function C(W,ae,me){this.props=W,this.context=ae,this.refs=w,this.updater=me||_}var P=C.prototype=new N;P.constructor=C,T(P,E.prototype),P.isPureReactComponent=!0;var I=Array.isArray;function j(){}var O={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function L(W,ae,me){var Ie=me.ref;return{$$typeof:t,type:W,key:ae,ref:Ie!==void 0?Ie:null,props:me}}function z(W,ae){return L(W.type,ae,W.props)}function V(W){return typeof W=="object"&&W!==null&&W.$$typeof===t}function G(W){var ae={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(me){return ae[me]})}var $=/\/+/g;function ee(W,ae){return typeof W=="object"&&W!==null&&W.key!=null?G(""+W.key):ae.toString(36)}function te(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(j,j):(W.status="pending",W.then(function(ae){W.status==="pending"&&(W.status="fulfilled",W.value=ae)},function(ae){W.status==="pending"&&(W.status="rejected",W.reason=ae)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function K(W,ae,me,Ie,Xe){var ve=typeof W;(ve==="undefined"||ve==="boolean")&&(W=null);var _e=!1;if(W===null)_e=!0;else switch(ve){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(W.$$typeof){case t:case e:_e=!0;break;case h:return _e=W._init,K(_e(W._payload),ae,me,Ie,Xe)}}if(_e)return Xe=Xe(W),_e=Ie===""?"."+ee(W,0):Ie,I(Xe)?(me="",_e!=null&&(me=_e.replace($,"$&/")+"/"),K(Xe,ae,me,"",function(qe){return qe})):Xe!=null&&(V(Xe)&&(Xe=z(Xe,me+(Xe.key==null||W&&W.key===Xe.key?"":(""+Xe.key).replace($,"$&/")+"/")+_e)),ae.push(Xe)),1;_e=0;var Ye=Ie===""?".":Ie+":";if(I(W))for(var ke=0;ke<W.length;ke++)Ie=W[ke],ve=Ye+ee(Ie,ke),_e+=K(Ie,ae,me,ve,Xe);else if(ke=x(W),typeof ke=="function")for(W=ke.call(W),ke=0;!(Ie=W.next()).done;)Ie=Ie.value,ve=Ye+ee(Ie,ke++),_e+=K(Ie,ae,me,ve,Xe);else if(ve==="object"){if(typeof W.then=="function")return K(te(W),ae,me,Ie,Xe);throw ae=String(W),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return _e}function X(W,ae,me){if(W==null)return W;var Ie=[],Xe=0;return K(W,Ie,"","",function(ve){return ae.call(me,ve,Xe++)}),Ie}function re(W){if(W._status===-1){var ae=W._result;ae=ae(),ae.then(function(me){(W._status===0||W._status===-1)&&(W._status=1,W._result=me)},function(me){(W._status===0||W._status===-1)&&(W._status=2,W._result=me)}),W._status===-1&&(W._status=0,W._result=ae)}if(W._status===1)return W._result.default;throw W._result}var ce=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)},de={map:X,forEach:function(W,ae,me){X(W,function(){ae.apply(this,arguments)},me)},count:function(W){var ae=0;return X(W,function(){ae++}),ae},toArray:function(W){return X(W,function(ae){return ae})||[]},only:function(W){if(!V(W))throw Error("React.Children.only expected to receive a single React element child.");return W}};return fn.Activity=m,fn.Children=de,fn.Component=E,fn.Fragment=n,fn.Profiler=i,fn.PureComponent=C,fn.StrictMode=r,fn.Suspense=c,fn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,fn.__COMPILER_RUNTIME={__proto__:null,c:function(W){return O.H.useMemoCache(W)}},fn.cache=function(W){return function(){return W.apply(null,arguments)}},fn.cacheSignal=function(){return null},fn.cloneElement=function(W,ae,me){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var Ie=T({},W.props),Xe=W.key;if(ae!=null)for(ve in ae.key!==void 0&&(Xe=""+ae.key),ae)!F.call(ae,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&ae.ref===void 0||(Ie[ve]=ae[ve]);var ve=arguments.length-2;if(ve===1)Ie.children=me;else if(1<ve){for(var _e=Array(ve),Ye=0;Ye<ve;Ye++)_e[Ye]=arguments[Ye+2];Ie.children=_e}return L(W.type,Xe,Ie)},fn.createContext=function(W){return W={$$typeof:s,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:a,_context:W},W},fn.createElement=function(W,ae,me){var Ie,Xe={},ve=null;if(ae!=null)for(Ie in ae.key!==void 0&&(ve=""+ae.key),ae)F.call(ae,Ie)&&Ie!=="key"&&Ie!=="__self"&&Ie!=="__source"&&(Xe[Ie]=ae[Ie]);var _e=arguments.length-2;if(_e===1)Xe.children=me;else if(1<_e){for(var Ye=Array(_e),ke=0;ke<_e;ke++)Ye[ke]=arguments[ke+2];Xe.children=Ye}if(W&&W.defaultProps)for(Ie in _e=W.defaultProps,_e)Xe[Ie]===void 0&&(Xe[Ie]=_e[Ie]);return L(W,ve,Xe)},fn.createRef=function(){return{current:null}},fn.forwardRef=function(W){return{$$typeof:o,render:W}},fn.isValidElement=V,fn.lazy=function(W){return{$$typeof:h,_payload:{_status:-1,_result:W},_init:re}},fn.memo=function(W,ae){return{$$typeof:u,type:W,compare:ae===void 0?null:ae}},fn.startTransition=function(W){var ae=O.T,me={};O.T=me;try{var Ie=W(),Xe=O.S;Xe!==null&&Xe(me,Ie),typeof Ie=="object"&&Ie!==null&&typeof Ie.then=="function"&&Ie.then(j,ce)}catch(ve){ce(ve)}finally{ae!==null&&me.types!==null&&(ae.types=me.types),O.T=ae}},fn.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},fn.use=function(W){return O.H.use(W)},fn.useActionState=function(W,ae,me){return O.H.useActionState(W,ae,me)},fn.useCallback=function(W,ae){return O.H.useCallback(W,ae)},fn.useContext=function(W){return O.H.useContext(W)},fn.useDebugValue=function(){},fn.useDeferredValue=function(W,ae){return O.H.useDeferredValue(W,ae)},fn.useEffect=function(W,ae){return O.H.useEffect(W,ae)},fn.useEffectEvent=function(W){return O.H.useEffectEvent(W)},fn.useId=function(){return O.H.useId()},fn.useImperativeHandle=function(W,ae,me){return O.H.useImperativeHandle(W,ae,me)},fn.useInsertionEffect=function(W,ae){return O.H.useInsertionEffect(W,ae)},fn.useLayoutEffect=function(W,ae){return O.H.useLayoutEffect(W,ae)},fn.useMemo=function(W,ae){return O.H.useMemo(W,ae)},fn.useOptimistic=function(W,ae){return O.H.useOptimistic(W,ae)},fn.useReducer=function(W,ae,me){return O.H.useReducer(W,ae,me)},fn.useRef=function(W){return O.H.useRef(W)},fn.useState=function(W){return O.H.useState(W)},fn.useSyncExternalStore=function(W,ae,me){return O.H.useSyncExternalStore(W,ae,me)},fn.useTransition=function(){return O.H.useTransition()},fn.version="19.2.3",fn}var N2;function Ab(){return N2||(N2=1,Ck.exports=YX()),Ck.exports}var J=Ab();const ue=Zn(J),JX=WX({__proto__:null,default:ue},[J]);var Rk={exports:{}},fy={},Ik={exports:{}},Pk={};var C2;function ZX(){return C2||(C2=1,(function(t){function e(K,X){var re=K.length;K.push(X);e:for(;0<re;){var ce=re-1>>>1,de=K[ce];if(0<i(de,X))K[ce]=X,K[re]=de,re=ce;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var X=K[0],re=K.pop();if(re!==X){K[0]=re;e:for(var ce=0,de=K.length,W=de>>>1;ce<W;){var ae=2*(ce+1)-1,me=K[ae],Ie=ae+1,Xe=K[Ie];if(0>i(me,re))Ie<de&&0>i(Xe,me)?(K[ce]=Xe,K[Ie]=re,ce=Ie):(K[ce]=me,K[ae]=re,ce=ae);else if(Ie<de&&0>i(Xe,re))K[ce]=Xe,K[Ie]=re,ce=Ie;else break e}}return X}function i(K,X){var re=K.sortIndex-X.sortIndex;return re!==0?re:K.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],u=[],h=1,m=null,v=3,x=!1,_=!1,T=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function P(K){for(var X=n(u);X!==null;){if(X.callback===null)r(u);else if(X.startTime<=K)r(u),X.sortIndex=X.expirationTime,e(c,X);else break;X=n(u)}}function I(K){if(T=!1,P(K),!_)if(n(c)!==null)_=!0,j||(j=!0,G());else{var X=n(u);X!==null&&te(I,X.startTime-K)}}var j=!1,O=-1,F=5,L=-1;function z(){return w?!0:!(t.unstable_now()-L<F)}function V(){if(w=!1,j){var K=t.unstable_now();L=K;var X=!0;try{e:{_=!1,T&&(T=!1,N(O),O=-1),x=!0;var re=v;try{t:{for(P(K),m=n(c);m!==null&&!(m.expirationTime>K&&z());){var ce=m.callback;if(typeof ce=="function"){m.callback=null,v=m.priorityLevel;var de=ce(m.expirationTime<=K);if(K=t.unstable_now(),typeof de=="function"){m.callback=de,P(K),X=!0;break t}m===n(c)&&r(c),P(K)}else r(c);m=n(c)}if(m!==null)X=!0;else{var W=n(u);W!==null&&te(I,W.startTime-K),X=!1}}break e}finally{m=null,v=re,x=!1}X=void 0}}finally{X?G():j=!1}}}var G;if(typeof C=="function")G=function(){C(V)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,ee=$.port2;$.port1.onmessage=V,G=function(){ee.postMessage(null)}}else G=function(){E(V,0)};function te(K,X){O=E(function(){K(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(K){switch(v){case 1:case 2:case 3:var X=3;break;default:X=v}var re=v;v=X;try{return K()}finally{v=re}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(K,X){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var re=v;v=K;try{return X()}finally{v=re}},t.unstable_scheduleCallback=function(K,X,re){var ce=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ce+re:ce):re=ce,K){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=re+de,K={id:h++,callback:X,priorityLevel:K,startTime:re,expirationTime:de,sortIndex:-1},re>ce?(K.sortIndex=re,e(u,K),n(c)===null&&K===n(u)&&(T?(N(O),O=-1):T=!0,te(I,re-ce))):(K.sortIndex=de,e(c,K),_||x||(_=!0,j||(j=!0,G()))),K},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(K){var X=v;return function(){var re=v;v=X;try{return K.apply(this,arguments)}finally{v=re}}}})(Pk)),Pk}var R2;function FH(){return R2||(R2=1,Ik.exports=ZX()),Ik.exports}var Ok={exports:{}},ja={};var I2;function QX(){if(I2)return ja;I2=1;var t=Ab();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,u,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:c,containerInfo:u,implementation:h}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ja.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ja.createPortal=function(c,u){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(c,u,null,h)},ja.flushSync=function(c){var u=s.T,h=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=u,r.p=h,r.d.f()}},ja.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(c,u))},ja.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},ja.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var h=u.as,m=o(h,u.crossOrigin),v=typeof u.integrity=="string"?u.integrity:void 0,x=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;h==="style"?r.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:x}):h==="script"&&r.d.X(c,{crossOrigin:m,integrity:v,fetchPriority:x,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ja.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var h=o(u.as,u.crossOrigin);r.d.M(c,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(c)},ja.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var h=u.as,m=o(h,u.crossOrigin);r.d.L(c,h,{crossOrigin:m,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ja.preloadModule=function(c,u){if(typeof c=="string")if(u){var h=o(u.as,u.crossOrigin);r.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(c)},ja.requestFormReset=function(c){r.d.r(c)},ja.unstable_batchedUpdates=function(c,u){return c(u)},ja.useFormState=function(c,u,h){return s.H.useFormState(c,u,h)},ja.useFormStatus=function(){return s.H.useHostTransitionStatus()},ja.version="19.2.3",ja}var P2;function eY(){if(P2)return Ok.exports;P2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ok.exports=QX(),Ok.exports}var O2;function tY(){if(O2)return fy;O2=1;var t=FH(),e=Ab(),n=eY();function r(l){var f="https://react.dev/errors/"+l;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+l+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var f=l,y=l;if(l.alternate)for(;f.return;)f=f.return;else{l=f;do f=l,(f.flags&4098)!==0&&(y=f.return),l=f.return;while(l)}return f.tag===3?y:null}function s(l){if(l.tag===13){var f=l.memoizedState;if(f===null&&(l=l.alternate,l!==null&&(f=l.memoizedState)),f!==null)return f.dehydrated}return null}function o(l){if(l.tag===31){var f=l.memoizedState;if(f===null&&(l=l.alternate,l!==null&&(f=l.memoizedState)),f!==null)return f.dehydrated}return null}function c(l){if(a(l)!==l)throw Error(r(188))}function u(l){var f=l.alternate;if(!f){if(f=a(l),f===null)throw Error(r(188));return f!==l?null:l}for(var y=l,b=f;;){var R=y.return;if(R===null)break;var D=R.alternate;if(D===null){if(b=R.return,b!==null){y=b;continue}break}if(R.child===D.child){for(D=R.child;D;){if(D===y)return c(R),l;if(D===b)return c(R),f;D=D.sibling}throw Error(r(188))}if(y.return!==b.return)y=R,b=D;else{for(var H=!1,Q=R.child;Q;){if(Q===y){H=!0,y=R,b=D;break}if(Q===b){H=!0,b=R,y=D;break}Q=Q.sibling}if(!H){for(Q=D.child;Q;){if(Q===y){H=!0,y=D,b=R;break}if(Q===b){H=!0,b=D,y=R;break}Q=Q.sibling}if(!H)throw Error(r(189))}}if(y.alternate!==b)throw Error(r(190))}if(y.tag!==3)throw Error(r(188));return y.stateNode.current===y?l:f}function h(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l;for(l=l.child;l!==null;){if(f=h(l),f!==null)return f;l=l.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),C=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function G(l){return l===null||typeof l!="object"?null:(l=V&&l[V]||l["@@iterator"],typeof l=="function"?l:null)}var $=Symbol.for("react.client.reference");function ee(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===$?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case T:return"Fragment";case E:return"Profiler";case w:return"StrictMode";case I:return"Suspense";case j:return"SuspenseList";case L:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case _:return"Portal";case C:return l.displayName||"Context";case N:return(l._context.displayName||"Context")+".Consumer";case P:var f=l.render;return l=l.displayName,l||(l=f.displayName||f.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case O:return f=l.displayName||null,f!==null?f:ee(l.type)||"Memo";case F:f=l._payload,l=l._init;try{return ee(l(f))}catch{}}return null}var te=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},ce=[],de=-1;function W(l){return{current:l}}function ae(l){0>de||(l.current=ce[de],ce[de]=null,de--)}function me(l,f){de++,ce[de]=l.current,l.current=f}var Ie=W(null),Xe=W(null),ve=W(null),_e=W(null);function Ye(l,f){switch(me(ve,f),me(Xe,l),me(Ie,null),f.nodeType){case 9:case 11:l=(l=f.documentElement)&&(l=l.namespaceURI)?XD(l):0;break;default:if(l=f.tagName,f=f.namespaceURI)f=XD(f),l=YD(f,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ae(Ie),me(Ie,l)}function ke(){ae(Ie),ae(Xe),ae(ve)}function qe(l){l.memoizedState!==null&&me(_e,l);var f=Ie.current,y=YD(f,l.type);f!==y&&(me(Xe,l),me(Ie,y))}function pt(l){Xe.current===l&&(ae(Ie),ae(Xe)),_e.current===l&&(ae(_e),oy._currentValue=re)}var Ue,xt;function Me(l){if(Ue===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);Ue=f&&f[1]||"",xt=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ue+l+xt}var Fe=!1;function Le(l,f){if(!l||Fe)return"";Fe=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(f){var $e=function(){throw Error()};if(Object.defineProperty($e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($e,[])}catch(De){var Ne=De}Reflect.construct(l,[],$e)}else{try{$e.call()}catch(De){Ne=De}l.call($e.prototype)}}else{try{throw Error()}catch(De){Ne=De}($e=l())&&typeof $e.catch=="function"&&$e.catch(function(){})}}catch(De){if(De&&Ne&&typeof De.stack=="string")return[De.stack,Ne.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=b.DetermineComponentFrameRoot(),H=D[0],Q=D[1];if(H&&Q){var oe=H.split(`
`),Se=Q.split(`
`);for(R=b=0;b<oe.length&&!oe[b].includes("DetermineComponentFrameRoot");)b++;for(;R<Se.length&&!Se[R].includes("DetermineComponentFrameRoot");)R++;if(b===oe.length||R===Se.length)for(b=oe.length-1,R=Se.length-1;1<=b&&0<=R&&oe[b]!==Se[R];)R--;for(;1<=b&&0<=R;b--,R--)if(oe[b]!==Se[R]){if(b!==1||R!==1)do if(b--,R--,0>R||oe[b]!==Se[R]){var ze=`
`+oe[b].replace(" at new "," at ");return l.displayName&&ze.includes("<anonymous>")&&(ze=ze.replace("<anonymous>",l.displayName)),ze}while(1<=b&&0<=R);break}}}finally{Fe=!1,Error.prepareStackTrace=y}return(y=l?l.displayName||l.name:"")?Me(y):""}function Qe(l,f){switch(l.tag){case 26:case 27:case 5:return Me(l.type);case 16:return Me("Lazy");case 13:return l.child!==f&&f!==null?Me("Suspense Fallback"):Me("Suspense");case 19:return Me("SuspenseList");case 0:case 15:return Le(l.type,!1);case 11:return Le(l.type.render,!1);case 1:return Le(l.type,!0);case 31:return Me("Activity");default:return""}}function ie(l){try{var f="",y=null;do f+=Qe(l,y),y=l,l=l.return;while(l);return f}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}var Nt=Object.prototype.hasOwnProperty,ft=t.unstable_scheduleCallback,Ct=t.unstable_cancelCallback,et=t.unstable_shouldYield,ne=t.unstable_requestPaint,q=t.unstable_now,he=t.unstable_getCurrentPriorityLevel,Oe=t.unstable_ImmediatePriority,Ge=t.unstable_UserBlockingPriority,je=t.unstable_NormalPriority,wt=t.unstable_LowPriority,ot=t.unstable_IdlePriority,Rt=t.log,Vt=t.unstable_setDisableYieldValue,Je=null,it=null;function St(l){if(typeof Rt=="function"&&Vt(l),it&&typeof it.setStrictMode=="function")try{it.setStrictMode(Je,l)}catch{}}var _t=Math.clz32?Math.clz32:pe,ht=Math.log,pn=Math.LN2;function pe(l){return l>>>=0,l===0?32:31-(ht(l)/pn|0)|0}var mt=256,rt=262144,vt=4194304;function Ze(l){var f=l&42;if(f!==0)return f;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function He(l,f,y){var b=l.pendingLanes;if(b===0)return 0;var R=0,D=l.suspendedLanes,H=l.pingedLanes;l=l.warmLanes;var Q=b&134217727;return Q!==0?(b=Q&~D,b!==0?R=Ze(b):(H&=Q,H!==0?R=Ze(H):y||(y=Q&~l,y!==0&&(R=Ze(y))))):(Q=b&~D,Q!==0?R=Ze(Q):H!==0?R=Ze(H):y||(y=b&~l,y!==0&&(R=Ze(y)))),R===0?0:f!==0&&f!==R&&(f&D)===0&&(D=R&-R,y=f&-f,D>=y||D===32&&(y&4194048)!==0)?f:R}function ct(l,f){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&f)===0}function en(l,f){switch(l){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function On(){var l=vt;return vt<<=1,(vt&62914560)===0&&(vt=4194304),l}function Ln(l){for(var f=[],y=0;31>y;y++)f.push(l);return f}function Pi(l,f){l.pendingLanes|=f,f!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Ta(l,f,y,b,R,D){var H=l.pendingLanes;l.pendingLanes=y,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=y,l.entangledLanes&=y,l.errorRecoveryDisabledLanes&=y,l.shellSuspendCounter=0;var Q=l.entanglements,oe=l.expirationTimes,Se=l.hiddenUpdates;for(y=H&~y;0<y;){var ze=31-_t(y),$e=1<<ze;Q[ze]=0,oe[ze]=-1;var Ne=Se[ze];if(Ne!==null)for(Se[ze]=null,ze=0;ze<Ne.length;ze++){var De=Ne[ze];De!==null&&(De.lane&=-536870913)}y&=~$e}b!==0&&ql(l,b,0),D!==0&&R===0&&l.tag!==0&&(l.suspendedLanes|=D&~(H&~f))}function ql(l,f,y){l.pendingLanes|=f,l.suspendedLanes&=~f;var b=31-_t(f);l.entangledLanes|=f,l.entanglements[b]=l.entanglements[b]|1073741824|y&261930}function $l(l,f){var y=l.entangledLanes|=f;for(l=l.entanglements;y;){var b=31-_t(y),R=1<<b;R&f|l[b]&f&&(l[b]|=f),y&=~R}}function qc(l,f){var y=f&-f;return y=(y&42)!==0?1:Wl(y),(y&(l.suspendedLanes|f))!==0?0:y}function Wl(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function il(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function $c(){var l=X.p;return l!==0?l:(l=window.event,l===void 0?32:x2(l.type))}function Ki(l,f){var y=X.p;try{return X.p=l,f()}finally{X.p=y}}var $a=Math.random().toString(36).slice(2),Rr="__reactFiber$"+$a,fi="__reactProps$"+$a,Wa="__reactContainer$"+$a,Ka="__reactEvents$"+$a,Xa="__reactListeners$"+$a,Kl="__reactHandles$"+$a,Wc="__reactResources$"+$a,Ws="__reactMarker$"+$a;function al(l){delete l[Rr],delete l[fi],delete l[Ka],delete l[Xa],delete l[Kl]}function sl(l){var f=l[Rr];if(f)return f;for(var y=l.parentNode;y;){if(f=y[Wa]||y[Rr]){if(y=f.alternate,f.child!==null||y!==null&&y.child!==null)for(l=r2(l);l!==null;){if(y=l[Rr])return y;l=r2(l)}return f}l=y,y=l.parentNode}return null}function ol(l){if(l=l[Rr]||l[Wa]){var f=l.tag;if(f===5||f===6||f===13||f===31||f===26||f===27||f===3)return l}return null}function Xl(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l.stateNode;throw Error(r(33))}function mo(l){var f=l[Wc];return f||(f=l[Wc]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Z(l){l[Ws]=!0}var ge=new Set,Ce={};function Ee(l,f){xe(l,f),xe(l+"Capture",f)}function xe(l,f){for(Ce[l]=f,l=0;l<f.length;l++)ge.add(f[l])}var at=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Tt={},nt={};function Mt(l){return Nt.call(nt,l)?!0:Nt.call(Tt,l)?!1:at.test(l)?nt[l]=!0:(Tt[l]=!0,!1)}function It(l,f,y){if(Mt(f))if(y===null)l.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":l.removeAttribute(f);return;case"boolean":var b=f.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){l.removeAttribute(f);return}}l.setAttribute(f,""+y)}}function Ft(l,f,y){if(y===null)l.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttribute(f,""+y)}}function jt(l,f,y,b){if(b===null)l.removeAttribute(y);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(y);return}l.setAttributeNS(f,y,""+b)}}function $t(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Vn(l){var f=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function cr(l,f,y){var b=Object.getOwnPropertyDescriptor(l.constructor.prototype,f);if(!l.hasOwnProperty(f)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var R=b.get,D=b.set;return Object.defineProperty(l,f,{configurable:!0,get:function(){return R.call(this)},set:function(H){y=""+H,D.call(this,H)}}),Object.defineProperty(l,f,{enumerable:b.enumerable}),{getValue:function(){return y},setValue:function(H){y=""+H},stopTracking:function(){l._valueTracker=null,delete l[f]}}}}function nr(l){if(!l._valueTracker){var f=Vn(l)?"checked":"value";l._valueTracker=cr(l,f,""+l[f])}}function sn(l){if(!l)return!1;var f=l._valueTracker;if(!f)return!0;var y=f.getValue(),b="";return l&&(b=Vn(l)?l.checked?"true":"false":l.value),l=b,l!==y?(f.setValue(l),!0):!1}function gt(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Un=/[\n"\\]/g;function Kt(l){return l.replace(Un,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function ni(l,f,y,b,R,D,H,Q){l.name="",H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?l.type=H:l.removeAttribute("type"),f!=null?H==="number"?(f===0&&l.value===""||l.value!=f)&&(l.value=""+$t(f)):l.value!==""+$t(f)&&(l.value=""+$t(f)):H!=="submit"&&H!=="reset"||l.removeAttribute("value"),f!=null?vr(l,H,$t(f)):y!=null?vr(l,H,$t(y)):b!=null&&l.removeAttribute("value"),R==null&&D!=null&&(l.defaultChecked=!!D),R!=null&&(l.checked=R&&typeof R!="function"&&typeof R!="symbol"),Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?l.name=""+$t(Q):l.removeAttribute("name")}function Ks(l,f,y,b,R,D,H,Q){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(l.type=D),f!=null||y!=null){if(!(D!=="submit"&&D!=="reset"||f!=null)){nr(l);return}y=y!=null?""+$t(y):"",f=f!=null?""+$t(f):y,Q||f===l.value||(l.value=f),l.defaultValue=f}b=b??R,b=typeof b!="function"&&typeof b!="symbol"&&!!b,l.checked=Q?l.checked:!!b,l.defaultChecked=!!b,H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(l.name=H),nr(l)}function vr(l,f,y){f==="number"&&gt(l.ownerDocument)===l||l.defaultValue===""+y||(l.defaultValue=""+y)}function oa(l,f,y,b){if(l=l.options,f){f={};for(var R=0;R<y.length;R++)f["$"+y[R]]=!0;for(y=0;y<l.length;y++)R=f.hasOwnProperty("$"+l[y].value),l[y].selected!==R&&(l[y].selected=R),R&&b&&(l[y].defaultSelected=!0)}else{for(y=""+$t(y),f=null,R=0;R<l.length;R++){if(l[R].value===y){l[R].selected=!0,b&&(l[R].defaultSelected=!0);return}f!==null||l[R].disabled||(f=l[R])}f!==null&&(f.selected=!0)}}function qn(l,f,y){if(f!=null&&(f=""+$t(f),f!==l.value&&(l.value=f),y==null)){l.defaultValue!==f&&(l.defaultValue=f);return}l.defaultValue=y!=null?""+$t(y):""}function hi(l,f,y,b){if(f==null){if(b!=null){if(y!=null)throw Error(r(92));if(te(b)){if(1<b.length)throw Error(r(93));b=b[0]}y=b}y==null&&(y=""),f=y}y=$t(f),l.defaultValue=y,b=l.textContent,b===y&&b!==""&&b!==null&&(l.value=b),nr(l)}function ri(l,f){if(f){var y=l.firstChild;if(y&&y===l.lastChild&&y.nodeType===3){y.nodeValue=f;return}}l.textContent=f}var bi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _i(l,f,y){var b=f.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?b?l.setProperty(f,""):f==="float"?l.cssFloat="":l[f]="":b?l.setProperty(f,y):typeof y!="number"||y===0||bi.has(f)?f==="float"?l.cssFloat=y:l[f]=(""+y).trim():l[f]=y+"px"}function Kc(l,f,y){if(f!=null&&typeof f!="object")throw Error(r(62));if(l=l.style,y!=null){for(var b in y)!y.hasOwnProperty(b)||f!=null&&f.hasOwnProperty(b)||(b.indexOf("--")===0?l.setProperty(b,""):b==="float"?l.cssFloat="":l[b]="");for(var R in f)b=f[R],f.hasOwnProperty(R)&&y[R]!==b&&_i(l,R,b)}else for(var D in f)f.hasOwnProperty(D)&&_i(l,D,f[D])}function vs(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pf(l){return Fv.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function ll(){}var Rp=null;function Ip(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Xc=null,Yl=null;function Vv(l){var f=ol(l);if(f&&(l=f.stateNode)){var y=l[fi]||null;e:switch(l=f.stateNode,f.type){case"input":if(ni(l,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),f=y.name,y.type==="radio"&&f!=null){for(y=l;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+Kt(""+f)+'"][type="radio"]'),f=0;f<y.length;f++){var b=y[f];if(b!==l&&b.form===l.form){var R=b[fi]||null;if(!R)throw Error(r(90));ni(b,R.value,R.defaultValue,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name)}}for(f=0;f<y.length;f++)b=y[f],b.form===l.form&&sn(b)}break e;case"textarea":qn(l,y.value,y.defaultValue);break e;case"select":f=y.value,f!=null&&oa(l,!!y.multiple,f,!1)}}}var Pp=!1;function Hv(l,f,y){if(Pp)return l(f,y);Pp=!0;try{var b=l(f);return b}finally{if(Pp=!1,(Xc!==null||Yl!==null)&&(Qs(),Xc&&(f=Xc,l=Yl,Yl=Xc=null,Vv(f),l)))for(f=0;f<l.length;f++)Vv(l[f])}}function ad(l,f){var y=l.stateNode;if(y===null)return null;var b=y[fi]||null;if(b===null)return null;y=b[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(l=l.type,b=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!b;break e;default:l=!1}if(l)return null;if(y&&typeof y!="function")throw Error(r(231,f,typeof y));return y}var go=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gv=!1;if(go)try{var sd={};Object.defineProperty(sd,"passive",{get:function(){Gv=!0}}),window.addEventListener("test",sd,sd),window.removeEventListener("test",sd,sd)}catch{Gv=!1}var Ya=null,Op=null,Yc=null;function Of(){if(Yc)return Yc;var l,f=Op,y=f.length,b,R="value"in Ya?Ya.value:Ya.textContent,D=R.length;for(l=0;l<y&&f[l]===R[l];l++);var H=y-l;for(b=1;b<=H&&f[y-b]===R[D-b];b++);return Yc=R.slice(l,1<b?1-b:void 0)}function jf(l){var f=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&f===13&&(l=13)):l=f,l===10&&(l=13),32<=l||l===13?l:0}function od(){return!0}function Kb(){return!1}function la(l){function f(y,b,R,D,H){this._reactName=y,this._targetInst=R,this.type=b,this.nativeEvent=D,this.target=H,this.currentTarget=null;for(var Q in l)l.hasOwnProperty(Q)&&(y=l[Q],this[Q]=y?y(D):D[Q]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?od:Kb,this.isPropagationStopped=Kb,this}return m(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=od)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=od)},persist:function(){},isPersistent:od}),f}var Jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Df=la(Jl),ld=m({},Jl,{view:0,detail:0}),Xb=la(ld),Lf,jp,cd,ud=m({},ld,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zp,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==cd&&(cd&&l.type==="mousemove"?(Lf=l.screenX-cd.screenX,jp=l.screenY-cd.screenY):jp=Lf=0,cd=l),Lf)},movementY:function(l){return"movementY"in l?l.movementY:jp}}),qv=la(ud),Yb=m({},ud,{dataTransfer:0}),Jb=la(Yb),$v=m({},ld,{relatedTarget:0}),Dp=la($v),Zb=m({},Jl,{animationName:0,elapsedTime:0,pseudoElement:0}),XA=la(Zb),YA=m({},Jl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Qb=la(YA),Uf=m({},Jl,{data:0}),Lp=la(Uf),Up={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},e_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wv(l){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(l):(l=t_[l])?!!f[l]:!1}function zp(){return Wv}var n_=m({},ld,{key:function(l){if(l.key){var f=Up[l.key]||l.key;if(f!=="Unidentified")return f}return l.type==="keypress"?(l=jf(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?e_[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zp,charCode:function(l){return l.type==="keypress"?jf(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?jf(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Jc=la(n_),Bp=m({},ud,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kv=la(Bp),Xv=m({},ld,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zp}),r_=la(Xv),i_=m({},Jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),JA=la(i_),Oi=m({},ud,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),a_=la(Oi),s_=m({},Jl,{newState:0,oldState:0}),o_=la(s_),l_=[9,13,27,32],Zc=go&&"CompositionEvent"in window,dd=null;go&&"documentMode"in document&&(dd=document.documentMode);var Fp=go&&"TextEvent"in window&&!dd,Yv=go&&(!Zc||dd&&8<dd&&11>=dd),c_=" ",zf=!1;function Vp(l,f){switch(l){case"keyup":return l_.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jv(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Qc=!1;function u_(l,f){switch(l){case"compositionend":return Jv(f);case"keypress":return f.which!==32?null:(zf=!0,c_);case"textInput":return l=f.data,l===c_&&zf?null:l;default:return null}}function Zv(l,f){if(Qc)return l==="compositionend"||!Zc&&Vp(l,f)?(l=Of(),Yc=Op=Ya=null,Qc=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return Yv&&f.locale!=="ko"?null:f.data;default:return null}}var Qv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function e0(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f==="input"?!!Qv[l.type]:f==="textarea"}function Hp(l,f,y,b){Xc?Yl?Yl.push(b):Yl=[b]:Xc=b,f=mw(f,"onChange"),0<f.length&&(y=new Df("onChange","change",null,y,b),l.push({event:y,listeners:f}))}var Zl=null,eu=null;function d_(l){HD(l,0)}function fd(l){var f=Xl(l);if(sn(f))return l}function t0(l,f){if(l==="change")return f}var vo=!1;if(go){var Bf;if(go){var n0="oninput"in document;if(!n0){var r0=document.createElement("div");r0.setAttribute("oninput","return;"),n0=typeof r0.oninput=="function"}Bf=n0}else Bf=!1;vo=Bf&&(!document.documentMode||9<document.documentMode)}function ys(){Zl&&(Zl.detachEvent("onpropertychange",Ff),eu=Zl=null)}function Ff(l){if(l.propertyName==="value"&&fd(eu)){var f=[];Hp(f,eu,l,Ip(l)),Hv(d_,f)}}function f_(l,f,y){l==="focusin"?(ys(),Zl=f,eu=y,Zl.attachEvent("onpropertychange",Ff)):l==="focusout"&&ys()}function i0(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return fd(eu)}function h_(l,f){if(l==="click")return fd(f)}function p_(l,f){if(l==="input"||l==="change")return fd(f)}function a0(l,f){return l===f&&(l!==0||1/l===1/f)||l!==l&&f!==f}var ca=typeof Object.is=="function"?Object.is:a0;function hd(l,f){if(ca(l,f))return!0;if(typeof l!="object"||l===null||typeof f!="object"||f===null)return!1;var y=Object.keys(l),b=Object.keys(f);if(y.length!==b.length)return!1;for(b=0;b<y.length;b++){var R=y[b];if(!Nt.call(f,R)||!ca(l[R],f[R]))return!1}return!0}function Vf(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function pd(l,f){var y=Vf(l);l=0;for(var b;y;){if(y.nodeType===3){if(b=l+y.textContent.length,l<=f&&b>=f)return{node:y,offset:f-l};l=b}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=Vf(y)}}function ur(l,f){return l&&f?l===f?!0:l&&l.nodeType===3?!1:f&&f.nodeType===3?ur(l,f.parentNode):"contains"in l?l.contains(f):l.compareDocumentPosition?!!(l.compareDocumentPosition(f)&16):!1:!1}function m_(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var f=gt(l.document);f instanceof l.HTMLIFrameElement;){try{var y=typeof f.contentWindow.location.href=="string"}catch{y=!1}if(y)l=f.contentWindow;else break;f=gt(l.document)}return f}function s0(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f&&(f==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||f==="textarea"||l.contentEditable==="true")}var g_=go&&"documentMode"in document&&11>=document.documentMode,yo=null,xo=null,md=null,Gp=!1;function gd(l,f,y){var b=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;Gp||yo==null||yo!==gt(b)||(b=yo,"selectionStart"in b&&s0(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),md&&hd(md,b)||(md=b,b=mw(xo,"onSelect"),0<b.length&&(f=new Df("onSelect","select",null,f,y),l.push({event:f,listeners:b}),f.target=yo)))}function Xi(l,f){var y={};return y[l.toLowerCase()]=f.toLowerCase(),y["Webkit"+l]="webkit"+f,y["Moz"+l]="moz"+f,y}var tu={animationend:Xi("Animation","AnimationEnd"),animationiteration:Xi("Animation","AnimationIteration"),animationstart:Xi("Animation","AnimationStart"),transitionrun:Xi("Transition","TransitionRun"),transitionstart:Xi("Transition","TransitionStart"),transitioncancel:Xi("Transition","TransitionCancel"),transitionend:Xi("Transition","TransitionEnd")},Hf={},o0={};go&&(o0=document.createElement("div").style,"AnimationEvent"in window||(delete tu.animationend.animation,delete tu.animationiteration.animation,delete tu.animationstart.animation),"TransitionEvent"in window||delete tu.transitionend.transition);function cl(l){if(Hf[l])return Hf[l];if(!tu[l])return l;var f=tu[l],y;for(y in f)if(f.hasOwnProperty(y)&&y in o0)return Hf[l]=f[y];return l}var qp=cl("animationend"),Gf=cl("animationiteration"),l0=cl("animationstart"),v_=cl("transitionrun"),ZA=cl("transitionstart"),y_=cl("transitioncancel"),c0=cl("transitionend"),xs=new Map,qf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qf.push("scrollEnd");function bs(l,f){xs.set(l,f),Ee(f,[l])}var $f=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},_s=[],ul=0,wi=0;function Wf(){for(var l=ul,f=wi=ul=0;f<l;){var y=_s[f];_s[f++]=null;var b=_s[f];_s[f++]=null;var R=_s[f];_s[f++]=null;var D=_s[f];if(_s[f++]=null,b!==null&&R!==null){var H=b.pending;H===null?R.next=R:(R.next=H.next,H.next=R),b.pending=R}D!==0&&Ql(y,R,D)}}function Si(l,f,y,b){_s[ul++]=l,_s[ul++]=f,_s[ul++]=y,_s[ul++]=b,wi|=b,l.lanes|=b,l=l.alternate,l!==null&&(l.lanes|=b)}function $p(l,f,y,b){return Si(l,f,y,b),ws(l)}function ua(l,f){return Si(l,null,null,f),ws(l)}function Ql(l,f,y){l.lanes|=y;var b=l.alternate;b!==null&&(b.lanes|=y);for(var R=!1,D=l.return;D!==null;)D.childLanes|=y,b=D.alternate,b!==null&&(b.childLanes|=y),D.tag===22&&(l=D.stateNode,l===null||l._visibility&1||(R=!0)),l=D,D=D.return;return l.tag===3?(D=l.stateNode,R&&f!==null&&(R=31-_t(y),l=D.hiddenUpdates,b=l[R],b===null?l[R]=[f]:b.push(f),f.lane=y|536870912),D):null}function ws(l){if(50<yc)throw yc=0,bu=null,Error(r(185));for(var f=l.return;f!==null;)l=f,f=l.return;return l.tag===3?l.stateNode:null}var ec={};function u0(l,f,y,b){this.tag=l,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ir(l,f,y,b){return new u0(l,f,y,b)}function Wp(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Ea(l,f){var y=l.alternate;return y===null?(y=Ir(l.tag,f,l.key,l.mode),y.elementType=l.elementType,y.type=l.type,y.stateNode=l.stateNode,y.alternate=l,l.alternate=y):(y.pendingProps=f,y.type=l.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=l.flags&65011712,y.childLanes=l.childLanes,y.lanes=l.lanes,y.child=l.child,y.memoizedProps=l.memoizedProps,y.memoizedState=l.memoizedState,y.updateQueue=l.updateQueue,f=l.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=l.sibling,y.index=l.index,y.ref=l.ref,y.refCleanup=l.refCleanup,y}function vd(l,f){l.flags&=65011714;var y=l.alternate;return y===null?(l.childLanes=0,l.lanes=f,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=y.childLanes,l.lanes=y.lanes,l.child=y.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=y.memoizedProps,l.memoizedState=y.memoizedState,l.updateQueue=y.updateQueue,l.type=y.type,f=y.dependencies,l.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),l}function bo(l,f,y,b,R,D){var H=0;if(b=l,typeof l=="function")Wp(l)&&(H=1);else if(typeof l=="string")H=jX(l,y,Ie.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case L:return l=Ir(31,y,f,R),l.elementType=L,l.lanes=D,l;case T:return tc(y.children,R,D,f);case w:H=8,R|=24;break;case E:return l=Ir(12,y,f,R|2),l.elementType=E,l.lanes=D,l;case I:return l=Ir(13,y,f,R),l.elementType=I,l.lanes=D,l;case j:return l=Ir(19,y,f,R),l.elementType=j,l.lanes=D,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case C:H=10;break e;case N:H=9;break e;case P:H=11;break e;case O:H=14;break e;case F:H=16,b=null;break e}H=29,y=Error(r(130,l===null?"null":typeof l,"")),b=null}return f=Ir(H,y,f,R),f.elementType=l,f.type=b,f.lanes=D,f}function tc(l,f,y,b){return l=Ir(7,l,b,f),l.lanes=y,l}function Kp(l,f,y){return l=Ir(6,l,null,f),l.lanes=y,l}function yd(l){var f=Ir(18,null,null,0);return f.stateNode=l,f}function Xp(l,f,y){return f=Ir(4,l.children!==null?l.children:[],l.key,f),f.lanes=y,f.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},f}var Kf=new WeakMap;function Ja(l,f){if(typeof l=="object"&&l!==null){var y=Kf.get(l);return y!==void 0?y:(f={value:l,source:f,stack:ie(f)},Kf.set(l,f),f)}return{value:l,source:f,stack:ie(f)}}var nc=[],rc=0,xd=null,bd=0,Aa=[],Sr=0,dl=null,Pr=1,Xs="";function _o(l,f){nc[rc++]=bd,nc[rc++]=xd,xd=l,bd=f}function x_(l,f,y){Aa[Sr++]=Pr,Aa[Sr++]=Xs,Aa[Sr++]=dl,dl=l;var b=Pr;l=Xs;var R=32-_t(b)-1;b&=~(1<<R),y+=1;var D=32-_t(f)+R;if(30<D){var H=R-R%5;D=(b&(1<<H)-1).toString(32),b>>=H,R-=H,Pr=1<<32-_t(f)+R|y<<R|b,Xs=D+l}else Pr=1<<D|y<<R|b,Xs=l}function wo(l){l.return!==null&&(_o(l,1),x_(l,1,0))}function Yp(l){for(;l===xd;)xd=nc[--rc],nc[rc]=null,bd=nc[--rc],nc[rc]=null;for(;l===dl;)dl=Aa[--Sr],Aa[Sr]=null,Xs=Aa[--Sr],Aa[Sr]=null,Pr=Aa[--Sr],Aa[Sr]=null}function Jp(l,f){Aa[Sr++]=Pr,Aa[Sr++]=Xs,Aa[Sr++]=dl,Pr=f.id,Xs=f.overflow,dl=l}var Fr=null,dr=null,Rn=!1,fl=null,Za=!1,_d=Error(r(519));function So(l){var f=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw To(Ja(f,l)),_d}function b_(l){var f=l.stateNode,y=l.type,b=l.memoizedProps;switch(f[Rr]=l,f[fi]=b,y){case"dialog":Dn("cancel",f),Dn("close",f);break;case"iframe":case"object":case"embed":Dn("load",f);break;case"video":case"audio":for(y=0;y<js.length;y++)Dn(js[y],f);break;case"source":Dn("error",f);break;case"img":case"image":case"link":Dn("error",f),Dn("load",f);break;case"details":Dn("toggle",f);break;case"input":Dn("invalid",f),Ks(f,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0);break;case"select":Dn("invalid",f);break;case"textarea":Dn("invalid",f),hi(f,b.value,b.defaultValue,b.children)}y=b.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||f.textContent===""+y||b.suppressHydrationWarning===!0||WD(f.textContent,y)?(b.popover!=null&&(Dn("beforetoggle",f),Dn("toggle",f)),b.onScroll!=null&&Dn("scroll",f),b.onScrollEnd!=null&&Dn("scrollend",f),b.onClick!=null&&(f.onclick=ll),f=!0):f=!1,f||So(l,!0)}function __(l){for(Fr=l.return;Fr;)switch(Fr.tag){case 5:case 31:case 13:Za=!1;return;case 27:case 3:Za=!0;return;default:Fr=Fr.return}}function wd(l){if(l!==Fr)return!1;if(!Rn)return __(l),Rn=!0,!1;var f=l.tag,y;if((y=f!==3&&f!==27)&&((y=f===5)&&(y=l.type,y=!(y!=="form"&&y!=="button")||pk(l.type,l.memoizedProps)),y=!y),y&&dr&&So(l),__(l),f===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));dr=n2(l)}else if(f===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));dr=n2(l)}else f===27?(f=dr,Vd(l.type)?(l=xk,xk=null,dr=l):dr=f):dr=Fr?Uo(l.stateNode.nextSibling):null;return!0}function ic(){dr=Fr=null,Rn=!1}function Zp(){var l=fl;return l!==null&&(Hr===null?Hr=l:Hr.push.apply(Hr,l),fl=null),l}function To(l){fl===null?fl=[l]:fl.push(l)}var Sd=W(null),ac=null,Eo=null;function hl(l,f,y){me(Sd,f._currentValue),f._currentValue=y}function Ao(l){l._currentValue=Sd.current,ae(Sd)}function Qp(l,f,y){for(;l!==null;){var b=l.alternate;if((l.childLanes&f)!==f?(l.childLanes|=f,b!==null&&(b.childLanes|=f)):b!==null&&(b.childLanes&f)!==f&&(b.childLanes|=f),l===y)break;l=l.return}}function em(l,f,y,b){var R=l.child;for(R!==null&&(R.return=l);R!==null;){var D=R.dependencies;if(D!==null){var H=R.child;D=D.firstContext;e:for(;D!==null;){var Q=D;D=R;for(var oe=0;oe<f.length;oe++)if(Q.context===f[oe]){D.lanes|=y,Q=D.alternate,Q!==null&&(Q.lanes|=y),Qp(D.return,y,l),b||(H=null);break e}D=Q.next}}else if(R.tag===18){if(H=R.return,H===null)throw Error(r(341));H.lanes|=y,D=H.alternate,D!==null&&(D.lanes|=y),Qp(H,y,l),H=null}else H=R.child;if(H!==null)H.return=R;else for(H=R;H!==null;){if(H===l){H=null;break}if(R=H.sibling,R!==null){R.return=H.return,H=R;break}H=H.return}R=H}}function ko(l,f,y,b){l=null;for(var R=f,D=!1;R!==null;){if(!D){if((R.flags&524288)!==0)D=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var H=R.alternate;if(H===null)throw Error(r(387));if(H=H.memoizedProps,H!==null){var Q=R.type;ca(R.pendingProps.value,H.value)||(l!==null?l.push(Q):l=[Q])}}else if(R===_e.current){if(H=R.alternate,H===null)throw Error(r(387));H.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(l!==null?l.push(oy):l=[oy])}R=R.return}l!==null&&em(f,l,y,b),f.flags|=262144}function Xf(l){for(l=l.firstContext;l!==null;){if(!ca(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function sc(l){ac=l,Eo=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Yt(l){return w_(ac,l)}function Td(l,f){return ac===null&&sc(l),w_(l,f)}function w_(l,f){var y=f._currentValue;if(f={context:f,memoizedValue:y,next:null},Eo===null){if(l===null)throw Error(r(308));Eo=f,l.dependencies={lanes:0,firstContext:f},l.flags|=524288}else Eo=Eo.next=f;return y}var S_=typeof AbortController<"u"?AbortController:function(){var l=[],f=this.signal={aborted:!1,addEventListener:function(y,b){l.push(b)}};this.abort=function(){f.aborted=!0,l.forEach(function(y){return y()})}},QA=t.unstable_scheduleCallback,ek=t.unstable_NormalPriority,ii={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function d0(){return{controller:new S_,data:new Map,refCount:0}}function nu(l){l.refCount--,l.refCount===0&&QA(ek,function(){l.controller.abort()})}var Qa=null,tm=0,pl=0,Ss=null;function f0(l,f){if(Qa===null){var y=Qa=[];tm=0,pl=Re(),Ss={status:"pending",value:void 0,then:function(b){y.push(b)}}}return tm++,f.then(h0,h0),f}function h0(){if(--tm===0&&Qa!==null){Ss!==null&&(Ss.status="fulfilled");var l=Qa;Qa=null,pl=0,Ss=null;for(var f=0;f<l.length;f++)(0,l[f])()}}function p0(l,f){var y=[],b={status:"pending",value:null,reason:null,then:function(R){y.push(R)}};return l.then(function(){b.status="fulfilled",b.value=f;for(var R=0;R<y.length;R++)(0,y[R])(f)},function(R){for(b.status="rejected",b.reason=R,R=0;R<y.length;R++)(0,y[R])(void 0)}),b}var T_=K.S;K.S=function(l,f){ty=q(),typeof f=="object"&&f!==null&&typeof f.then=="function"&&f0(l,f),T_!==null&&T_(l,f)};var oc=W(null);function nm(){var l=oc.current;return l!==null?l:nn.pooledCache}function Yf(l,f){f===null?me(oc,oc.current):me(oc,f.pool)}function m0(){var l=nm();return l===null?null:{parent:ii._currentValue,pool:l}}var ru=Error(r(460)),Jf=Error(r(474)),vn=Error(r(542)),rm={then:function(){}};function ka(l){return l=l.status,l==="fulfilled"||l==="rejected"}function im(l,f,y){switch(y=l[y],y===void 0?l.push(f):y!==f&&(f.then(ll,ll),f=y),f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,su(l),l;default:if(typeof f.status=="string")f.then(ll,ll);else{if(l=nn,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=f,l.status="pending",l.then(function(b){if(f.status==="pending"){var R=f;R.status="fulfilled",R.value=b}},function(b){if(f.status==="pending"){var R=f;R.status="rejected",R.reason=b}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,su(l),l}throw Mo=f,ru}}function iu(l){try{var f=l._init;return f(l._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(Mo=y,ru):y}}var Mo=null;function au(){if(Mo===null)throw Error(r(459));var l=Mo;return Mo=null,l}function su(l){if(l===ru||l===vn)throw Error(r(483))}var ou=null,lu=0;function Zf(l){var f=lu;return lu+=1,ou===null&&(ou=[]),im(ou,l,f)}function Ts(l,f){f=f.props.ref,l.ref=f!==void 0?f:null}function Ed(l,f){throw f.$$typeof===v?Error(r(525)):(l=Object.prototype.toString.call(f),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":l)))}function am(l){function f(ye,fe){if(l){var we=ye.deletions;we===null?(ye.deletions=[fe],ye.flags|=16):we.push(fe)}}function y(ye,fe){if(!l)return null;for(;fe!==null;)f(ye,fe),fe=fe.sibling;return null}function b(ye){for(var fe=new Map;ye!==null;)ye.key!==null?fe.set(ye.key,ye):fe.set(ye.index,ye),ye=ye.sibling;return fe}function R(ye,fe){return ye=Ea(ye,fe),ye.index=0,ye.sibling=null,ye}function D(ye,fe,we){return ye.index=we,l?(we=ye.alternate,we!==null?(we=we.index,we<fe?(ye.flags|=67108866,fe):we):(ye.flags|=67108866,fe)):(ye.flags|=1048576,fe)}function H(ye){return l&&ye.alternate===null&&(ye.flags|=67108866),ye}function Q(ye,fe,we,Ve){return fe===null||fe.tag!==6?(fe=Kp(we,ye.mode,Ve),fe.return=ye,fe):(fe=R(fe,we),fe.return=ye,fe)}function oe(ye,fe,we,Ve){var Gt=we.type;return Gt===T?ze(ye,fe,we.props.children,Ve,we.key):fe!==null&&(fe.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===F&&iu(Gt)===fe.type)?(fe=R(fe,we.props),Ts(fe,we),fe.return=ye,fe):(fe=bo(we.type,we.key,we.props,null,ye.mode,Ve),Ts(fe,we),fe.return=ye,fe)}function Se(ye,fe,we,Ve){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==we.containerInfo||fe.stateNode.implementation!==we.implementation?(fe=Xp(we,ye.mode,Ve),fe.return=ye,fe):(fe=R(fe,we.children||[]),fe.return=ye,fe)}function ze(ye,fe,we,Ve,Gt){return fe===null||fe.tag!==7?(fe=tc(we,ye.mode,Ve,Gt),fe.return=ye,fe):(fe=R(fe,we),fe.return=ye,fe)}function $e(ye,fe,we){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return fe=Kp(""+fe,ye.mode,we),fe.return=ye,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case x:return we=bo(fe.type,fe.key,fe.props,null,ye.mode,we),Ts(we,fe),we.return=ye,we;case _:return fe=Xp(fe,ye.mode,we),fe.return=ye,fe;case F:return fe=iu(fe),$e(ye,fe,we)}if(te(fe)||G(fe))return fe=tc(fe,ye.mode,we,null),fe.return=ye,fe;if(typeof fe.then=="function")return $e(ye,Zf(fe),we);if(fe.$$typeof===C)return $e(ye,Td(ye,fe),we);Ed(ye,fe)}return null}function Ne(ye,fe,we,Ve){var Gt=fe!==null?fe.key:null;if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return Gt!==null?null:Q(ye,fe,""+we,Ve);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case x:return we.key===Gt?oe(ye,fe,we,Ve):null;case _:return we.key===Gt?Se(ye,fe,we,Ve):null;case F:return we=iu(we),Ne(ye,fe,we,Ve)}if(te(we)||G(we))return Gt!==null?null:ze(ye,fe,we,Ve,null);if(typeof we.then=="function")return Ne(ye,fe,Zf(we),Ve);if(we.$$typeof===C)return Ne(ye,fe,Td(ye,we),Ve);Ed(ye,we)}return null}function De(ye,fe,we,Ve,Gt){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint")return ye=ye.get(we)||null,Q(fe,ye,""+Ve,Gt);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case x:return ye=ye.get(Ve.key===null?we:Ve.key)||null,oe(fe,ye,Ve,Gt);case _:return ye=ye.get(Ve.key===null?we:Ve.key)||null,Se(fe,ye,Ve,Gt);case F:return Ve=iu(Ve),De(ye,fe,we,Ve,Gt)}if(te(Ve)||G(Ve))return ye=ye.get(we)||null,ze(fe,ye,Ve,Gt,null);if(typeof Ve.then=="function")return De(ye,fe,we,Zf(Ve),Gt);if(Ve.$$typeof===C)return De(ye,fe,we,Td(fe,Ve),Gt);Ed(fe,Ve)}return null}function Dt(ye,fe,we,Ve){for(var Gt=null,Kn=null,Lt=fe,_n=fe=0,Bn=null;Lt!==null&&_n<we.length;_n++){Lt.index>_n?(Bn=Lt,Lt=null):Bn=Lt.sibling;var Xn=Ne(ye,Lt,we[_n],Ve);if(Xn===null){Lt===null&&(Lt=Bn);break}l&&Lt&&Xn.alternate===null&&f(ye,Lt),fe=D(Xn,fe,_n),Kn===null?Gt=Xn:Kn.sibling=Xn,Kn=Xn,Lt=Bn}if(_n===we.length)return y(ye,Lt),Rn&&_o(ye,_n),Gt;if(Lt===null){for(;_n<we.length;_n++)Lt=$e(ye,we[_n],Ve),Lt!==null&&(fe=D(Lt,fe,_n),Kn===null?Gt=Lt:Kn.sibling=Lt,Kn=Lt);return Rn&&_o(ye,_n),Gt}for(Lt=b(Lt);_n<we.length;_n++)Bn=De(Lt,ye,_n,we[_n],Ve),Bn!==null&&(l&&Bn.alternate!==null&&Lt.delete(Bn.key===null?_n:Bn.key),fe=D(Bn,fe,_n),Kn===null?Gt=Bn:Kn.sibling=Bn,Kn=Bn);return l&&Lt.forEach(function(Wd){return f(ye,Wd)}),Rn&&_o(ye,_n),Gt}function Xt(ye,fe,we,Ve){if(we==null)throw Error(r(151));for(var Gt=null,Kn=null,Lt=fe,_n=fe=0,Bn=null,Xn=we.next();Lt!==null&&!Xn.done;_n++,Xn=we.next()){Lt.index>_n?(Bn=Lt,Lt=null):Bn=Lt.sibling;var Wd=Ne(ye,Lt,Xn.value,Ve);if(Wd===null){Lt===null&&(Lt=Bn);break}l&&Lt&&Wd.alternate===null&&f(ye,Lt),fe=D(Wd,fe,_n),Kn===null?Gt=Wd:Kn.sibling=Wd,Kn=Wd,Lt=Bn}if(Xn.done)return y(ye,Lt),Rn&&_o(ye,_n),Gt;if(Lt===null){for(;!Xn.done;_n++,Xn=we.next())Xn=$e(ye,Xn.value,Ve),Xn!==null&&(fe=D(Xn,fe,_n),Kn===null?Gt=Xn:Kn.sibling=Xn,Kn=Xn);return Rn&&_o(ye,_n),Gt}for(Lt=b(Lt);!Xn.done;_n++,Xn=we.next())Xn=De(Lt,ye,_n,Xn.value,Ve),Xn!==null&&(l&&Xn.alternate!==null&&Lt.delete(Xn.key===null?_n:Xn.key),fe=D(Xn,fe,_n),Kn===null?Gt=Xn:Kn.sibling=Xn,Kn=Xn);return l&&Lt.forEach(function($X){return f(ye,$X)}),Rn&&_o(ye,_n),Gt}function pr(ye,fe,we,Ve){if(typeof we=="object"&&we!==null&&we.type===T&&we.key===null&&(we=we.props.children),typeof we=="object"&&we!==null){switch(we.$$typeof){case x:e:{for(var Gt=we.key;fe!==null;){if(fe.key===Gt){if(Gt=we.type,Gt===T){if(fe.tag===7){y(ye,fe.sibling),Ve=R(fe,we.props.children),Ve.return=ye,ye=Ve;break e}}else if(fe.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===F&&iu(Gt)===fe.type){y(ye,fe.sibling),Ve=R(fe,we.props),Ts(Ve,we),Ve.return=ye,ye=Ve;break e}y(ye,fe);break}else f(ye,fe);fe=fe.sibling}we.type===T?(Ve=tc(we.props.children,ye.mode,Ve,we.key),Ve.return=ye,ye=Ve):(Ve=bo(we.type,we.key,we.props,null,ye.mode,Ve),Ts(Ve,we),Ve.return=ye,ye=Ve)}return H(ye);case _:e:{for(Gt=we.key;fe!==null;){if(fe.key===Gt)if(fe.tag===4&&fe.stateNode.containerInfo===we.containerInfo&&fe.stateNode.implementation===we.implementation){y(ye,fe.sibling),Ve=R(fe,we.children||[]),Ve.return=ye,ye=Ve;break e}else{y(ye,fe);break}else f(ye,fe);fe=fe.sibling}Ve=Xp(we,ye.mode,Ve),Ve.return=ye,ye=Ve}return H(ye);case F:return we=iu(we),pr(ye,fe,we,Ve)}if(te(we))return Dt(ye,fe,we,Ve);if(G(we)){if(Gt=G(we),typeof Gt!="function")throw Error(r(150));return we=Gt.call(we),Xt(ye,fe,we,Ve)}if(typeof we.then=="function")return pr(ye,fe,Zf(we),Ve);if(we.$$typeof===C)return pr(ye,fe,Td(ye,we),Ve);Ed(ye,we)}return typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint"?(we=""+we,fe!==null&&fe.tag===6?(y(ye,fe.sibling),Ve=R(fe,we),Ve.return=ye,ye=Ve):(y(ye,fe),Ve=Kp(we,ye.mode,Ve),Ve.return=ye,ye=Ve),H(ye)):y(ye,fe)}return function(ye,fe,we,Ve){try{lu=0;var Gt=pr(ye,fe,we,Ve);return ou=null,Gt}catch(Lt){if(Lt===ru||Lt===vn)throw Lt;var Kn=Ir(29,Lt,null,ye.mode);return Kn.lanes=Ve,Kn.return=ye,Kn}}}var ml=am(!0),sm=am(!1),da=!1;function Qf(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function g0(l,f){l=l.updateQueue,f.updateQueue===l&&(f.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function gl(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function lc(l,f,y){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(Ut&2)!==0){var R=b.pending;return R===null?f.next=f:(f.next=R.next,R.next=f),b.pending=f,f=ws(l),Ql(l,null,y),f}return Si(l,b,f,y),ws(l)}function cc(l,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194048)!==0)){var b=f.lanes;b&=l.pendingLanes,y|=b,f.lanes=y,$l(l,y)}}function Ht(l,f){var y=l.updateQueue,b=l.alternate;if(b!==null&&(b=b.updateQueue,y===b)){var R=null,D=null;if(y=y.firstBaseUpdate,y!==null){do{var H={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};D===null?R=D=H:D=D.next=H,y=y.next}while(y!==null);D===null?R=D=f:D=D.next=f}else R=D=f;y={baseState:b.baseState,firstBaseUpdate:R,lastBaseUpdate:D,shared:b.shared,callbacks:b.callbacks},l.updateQueue=y;return}l=y.lastBaseUpdate,l===null?y.firstBaseUpdate=f:l.next=f,y.lastBaseUpdate=f}var v0=!1;function eh(){if(v0){var l=Ss;if(l!==null)throw l}}function Ad(l,f,y,b){v0=!1;var R=l.updateQueue;da=!1;var D=R.firstBaseUpdate,H=R.lastBaseUpdate,Q=R.shared.pending;if(Q!==null){R.shared.pending=null;var oe=Q,Se=oe.next;oe.next=null,H===null?D=Se:H.next=Se,H=oe;var ze=l.alternate;ze!==null&&(ze=ze.updateQueue,Q=ze.lastBaseUpdate,Q!==H&&(Q===null?ze.firstBaseUpdate=Se:Q.next=Se,ze.lastBaseUpdate=oe))}if(D!==null){var $e=R.baseState;H=0,ze=Se=oe=null,Q=D;do{var Ne=Q.lane&-536870913,De=Ne!==Q.lane;if(De?(mn&Ne)===Ne:(b&Ne)===Ne){Ne!==0&&Ne===pl&&(v0=!0),ze!==null&&(ze=ze.next={lane:0,tag:Q.tag,payload:Q.payload,callback:null,next:null});e:{var Dt=l,Xt=Q;Ne=f;var pr=y;switch(Xt.tag){case 1:if(Dt=Xt.payload,typeof Dt=="function"){$e=Dt.call(pr,$e,Ne);break e}$e=Dt;break e;case 3:Dt.flags=Dt.flags&-65537|128;case 0:if(Dt=Xt.payload,Ne=typeof Dt=="function"?Dt.call(pr,$e,Ne):Dt,Ne==null)break e;$e=m({},$e,Ne);break e;case 2:da=!0}}Ne=Q.callback,Ne!==null&&(l.flags|=64,De&&(l.flags|=8192),De=R.callbacks,De===null?R.callbacks=[Ne]:De.push(Ne))}else De={lane:Ne,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},ze===null?(Se=ze=De,oe=$e):ze=ze.next=De,H|=Ne;if(Q=Q.next,Q===null){if(Q=R.shared.pending,Q===null)break;De=Q,Q=De.next,De.next=null,R.lastBaseUpdate=De,R.shared.pending=null}}while(!0);ze===null&&(oe=$e),R.baseState=oe,R.firstBaseUpdate=Se,R.lastBaseUpdate=ze,D===null&&(R.shared.lanes=0),jo|=H,l.lanes=H,l.memoizedState=$e}}function kd(l,f){if(typeof l!="function")throw Error(r(191,l));l.call(f)}function E_(l,f){var y=l.callbacks;if(y!==null)for(l.callbacks=null,l=0;l<y.length;l++)kd(y[l],f)}var Md=W(null),om=W(0);function A_(l,f){l=rs,me(om,l),me(Md,f),rs=l|f.baseLanes}function y0(){me(om,rs),me(Md,Md.current)}function th(){rs=om.current,ae(Md),ae(om)}var Ma=W(null),fa=null;function vl(l){var f=l.alternate;me(In,In.current&1),me(Ma,l),fa===null&&(f===null||Md.current!==null||f.memoizedState!==null)&&(fa=l)}function x0(l){me(In,In.current),me(Ma,l),fa===null&&(fa=l)}function k_(l){l.tag===22?(me(In,In.current),me(Ma,l),fa===null&&(fa=l)):Na()}function Na(){me(In,In.current),me(Ma,Ma.current)}function $r(l){ae(Ma),fa===l&&(fa=null),ae(In)}var In=W(0);function es(l){for(var f=l;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||vk(y)||yk(y)))return f}else if(f.tag===19&&(f.memoizedProps.revealOrder==="forwards"||f.memoizedProps.revealOrder==="backwards"||f.memoizedProps.revealOrder==="unstable_legacy-backwards"||f.memoizedProps.revealOrder==="together")){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var Tr=0,un=null,rr=null,Mn=null,Es=!1,Nd=!1,cu=!1,lm=0,nh=0,Cd=null,b0=0;function Or(){throw Error(r(321))}function _0(l,f){if(f===null)return!1;for(var y=0;y<f.length&&y<l.length;y++)if(!ca(l[y],f[y]))return!1;return!0}function cm(l,f,y,b,R,D){return Tr=D,un=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,K.H=l===null||l.memoizedState===null?aw:F0,cu=!1,D=y(b,R),cu=!1,Nd&&(D=uu(f,y,b,R)),M_(l),D}function M_(l){K.H=Rd;var f=rr!==null&&rr.next!==null;if(Tr=0,Mn=rr=un=null,Es=!1,nh=0,Cd=null,f)throw Error(r(300));l===null||ai||(l=l.dependencies,l!==null&&Xf(l)&&(ai=!0))}function uu(l,f,y,b){un=l;var R=0;do{if(Nd&&(Cd=null),nh=0,Nd=!1,25<=R)throw Error(r(301));if(R+=1,Mn=rr=null,l.updateQueue!=null){var D=l.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}K.H=As,D=f(y,b)}while(Nd);return D}function du(){var l=K.H,f=l.useState()[0];return f=typeof f.then=="function"?rh(f):f,l=l.useState()[0],(rr!==null?rr.memoizedState:null)!==l&&(un.flags|=1024),f}function w0(){var l=lm!==0;return lm=0,l}function S0(l,f,y){f.updateQueue=l.updateQueue,f.flags&=-2053,l.lanes&=~y}function T0(l){if(Es){for(l=l.memoizedState;l!==null;){var f=l.queue;f!==null&&(f.pending=null),l=l.next}Es=!1}Tr=0,Mn=rr=un=null,Nd=!1,nh=lm=0,Cd=null}function pi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?un.memoizedState=Mn=l:Mn=Mn.next=l,Mn}function Wr(){if(rr===null){var l=un.alternate;l=l!==null?l.memoizedState:null}else l=rr.next;var f=Mn===null?un.memoizedState:Mn.next;if(f!==null)Mn=f,rr=l;else{if(l===null)throw un.alternate===null?Error(r(467)):Error(r(310));rr=l,l={memoizedState:rr.memoizedState,baseState:rr.baseState,baseQueue:rr.baseQueue,queue:rr.queue,next:null},Mn===null?un.memoizedState=Mn=l:Mn=Mn.next=l}return Mn}function um(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rh(l){var f=nh;return nh+=1,Cd===null&&(Cd=[]),l=im(Cd,l,f),f=un,(Mn===null?f.memoizedState:Mn.next)===null&&(f=f.alternate,K.H=f===null||f.memoizedState===null?aw:F0),l}function uc(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return rh(l);if(l.$$typeof===C)return Yt(l)}throw Error(r(438,String(l)))}function E0(l){var f=null,y=un.updateQueue;if(y!==null&&(f=y.memoCache),f==null){var b=un.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(f={data:b.data.map(function(R){return R.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),y===null&&(y=um(),un.updateQueue=y),y.memoCache=f,y=f.data[f.index],y===void 0)for(y=f.data[f.index]=Array(l),b=0;b<l;b++)y[b]=z;return f.index++,y}function yl(l,f){return typeof f=="function"?f(l):f}function dm(l){var f=Wr();return A0(f,rr,l)}function A0(l,f,y){var b=l.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=y;var R=l.baseQueue,D=b.pending;if(D!==null){if(R!==null){var H=R.next;R.next=D.next,D.next=H}f.baseQueue=R=D,b.pending=null}if(D=l.baseState,R===null)l.memoizedState=D;else{f=R.next;var Q=H=null,oe=null,Se=f,ze=!1;do{var $e=Se.lane&-536870913;if($e!==Se.lane?(mn&$e)===$e:(Tr&$e)===$e){var Ne=Se.revertLane;if(Ne===0)oe!==null&&(oe=oe.next={lane:0,revertLane:0,gesture:null,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null}),$e===pl&&(ze=!0);else if((Tr&Ne)===Ne){Se=Se.next,Ne===pl&&(ze=!0);continue}else $e={lane:0,revertLane:Se.revertLane,gesture:null,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null},oe===null?(Q=oe=$e,H=D):oe=oe.next=$e,un.lanes|=Ne,jo|=Ne;$e=Se.action,cu&&y(D,$e),D=Se.hasEagerState?Se.eagerState:y(D,$e)}else Ne={lane:$e,revertLane:Se.revertLane,gesture:Se.gesture,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null},oe===null?(Q=oe=Ne,H=D):oe=oe.next=Ne,un.lanes|=$e,jo|=$e;Se=Se.next}while(Se!==null&&Se!==f);if(oe===null?H=D:oe.next=Q,!ca(D,l.memoizedState)&&(ai=!0,ze&&(y=Ss,y!==null)))throw y;l.memoizedState=D,l.baseState=H,l.baseQueue=oe,b.lastRenderedState=D}return R===null&&(b.lanes=0),[l.memoizedState,b.dispatch]}function k0(l){var f=Wr(),y=f.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=l;var b=y.dispatch,R=y.pending,D=f.memoizedState;if(R!==null){y.pending=null;var H=R=R.next;do D=l(D,H.action),H=H.next;while(H!==R);ca(D,f.memoizedState)||(ai=!0),f.memoizedState=D,f.baseQueue===null&&(f.baseState=D),y.lastRenderedState=D}return[D,b]}function N_(l,f,y){var b=un,R=Wr(),D=Rn;if(D){if(y===void 0)throw Error(r(407));y=y()}else y=f();var H=!ca((rr||R).memoizedState,y);if(H&&(R.memoizedState=y,ai=!0),R=R.queue,j0(I_.bind(null,b,R,l),[l]),R.getSnapshot!==f||H||Mn!==null&&Mn.memoizedState.tag&1){if(b.flags|=2048,dc(9,{destroy:void 0},R_.bind(null,b,R,y,f),null),nn===null)throw Error(r(349));D||(Tr&127)!==0||C_(b,f,y)}return y}function C_(l,f,y){l.flags|=16384,l={getSnapshot:f,value:y},f=un.updateQueue,f===null?(f=um(),un.updateQueue=f,f.stores=[l]):(y=f.stores,y===null?f.stores=[l]:y.push(l))}function R_(l,f,y,b){f.value=y,f.getSnapshot=b,P_(f)&&O_(l)}function I_(l,f,y){return y(function(){P_(f)&&O_(l)})}function P_(l){var f=l.getSnapshot;l=l.value;try{var y=f();return!ca(l,y)}catch{return!0}}function O_(l){var f=ua(l,2);f!==null&&xn(f,l,2)}function M0(l){var f=pi();if(typeof l=="function"){var y=l;if(l=y(),cu){St(!0);try{y()}finally{St(!1)}}}return f.memoizedState=f.baseState=l,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:l},f}function N0(l,f,y,b){return l.baseState=y,A0(l,rr,typeof b=="function"?b:yl)}function tk(l,f,y,b,R){if(mm(l))throw Error(r(485));if(l=f.action,l!==null){var D={payload:R,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(H){D.listeners.push(H)}};K.T!==null?y(!0):D.isTransition=!1,b(D),y=f.pending,y===null?(D.next=f.pending=D,j_(f,D)):(D.next=y.next,f.pending=y.next=D)}}function j_(l,f){var y=f.action,b=f.payload,R=l.state;if(f.isTransition){var D=K.T,H={};K.T=H;try{var Q=y(R,b),oe=K.S;oe!==null&&oe(H,Q),D_(l,f,Q)}catch(Se){C0(l,f,Se)}finally{D!==null&&H.types!==null&&(D.types=H.types),K.T=D}}else try{D=y(R,b),D_(l,f,D)}catch(Se){C0(l,f,Se)}}function D_(l,f,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(b){L_(l,f,b)},function(b){return C0(l,f,b)}):L_(l,f,y)}function L_(l,f,y){f.status="fulfilled",f.value=y,U_(f),l.state=y,f=l.pending,f!==null&&(y=f.next,y===f?l.pending=null:(y=y.next,f.next=y,j_(l,y)))}function C0(l,f,y){var b=l.pending;if(l.pending=null,b!==null){b=b.next;do f.status="rejected",f.reason=y,U_(f),f=f.next;while(f!==b)}l.action=null}function U_(l){l=l.listeners;for(var f=0;f<l.length;f++)(0,l[f])()}function R0(l,f){return f}function I0(l,f){if(Rn){var y=nn.formState;if(y!==null){e:{var b=un;if(Rn){if(dr){t:{for(var R=dr,D=Za;R.nodeType!==8;){if(!D){R=null;break t}if(R=Uo(R.nextSibling),R===null){R=null;break t}}D=R.data,R=D==="F!"||D==="F"?R:null}if(R){dr=Uo(R.nextSibling),b=R.data==="F!";break e}}So(b)}b=!1}b&&(f=y[0])}}return y=pi(),y.memoizedState=y.baseState=f,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:R0,lastRenderedState:f},y.queue=b,y=nw.bind(null,un,b),b.dispatch=y,b=M0(!1),D=B0.bind(null,un,!1,b.queue),b=pi(),R={state:f,dispatch:null,action:l,pending:null},b.queue=R,y=tk.bind(null,un,R,D,y),R.dispatch=y,b.memoizedState=l,[f,y,!1]}function z_(l){var f=Wr();return P0(f,rr,l)}function P0(l,f,y){if(f=A0(l,f,R0)[0],l=dm(yl)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var b=rh(f)}catch(H){throw H===ru?vn:H}else b=f;f=Wr();var R=f.queue,D=R.dispatch;return y!==f.memoizedState&&(un.flags|=2048,dc(9,{destroy:void 0},B_.bind(null,R,y),null)),[b,D,l]}function B_(l,f){l.action=f}function O0(l){var f=Wr(),y=rr;if(y!==null)return P0(f,y,l);Wr(),f=f.memoizedState,y=Wr();var b=y.queue.dispatch;return y.memoizedState=l,[f,b,!1]}function dc(l,f,y,b){return l={tag:l,create:y,deps:b,inst:f,next:null},f=un.updateQueue,f===null&&(f=um(),un.updateQueue=f),y=f.lastEffect,y===null?f.lastEffect=l.next=l:(b=y.next,y.next=l,l.next=b,f.lastEffect=l),l}function fm(){return Wr().memoizedState}function hm(l,f,y,b){var R=pi();un.flags|=l,R.memoizedState=dc(1|f,{destroy:void 0},y,b===void 0?null:b)}function pm(l,f,y,b){var R=Wr();b=b===void 0?null:b;var D=R.memoizedState.inst;rr!==null&&b!==null&&_0(b,rr.memoizedState.deps)?R.memoizedState=dc(f,D,y,b):(un.flags|=l,R.memoizedState=dc(1|f,D,y,b))}function F_(l,f){hm(8390656,8,l,f)}function j0(l,f){pm(2048,8,l,f)}function V_(l){un.flags|=4;var f=un.updateQueue;if(f===null)f=um(),un.updateQueue=f,f.events=[l];else{var y=f.events;y===null?f.events=[l]:y.push(l)}}function H_(l){var f=Wr().memoizedState;return V_({ref:f,nextImpl:l}),function(){if((Ut&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}function G_(l,f){return pm(4,2,l,f)}function q_(l,f){return pm(4,4,l,f)}function $_(l,f){if(typeof f=="function"){l=l();var y=f(l);return function(){typeof y=="function"?y():f(null)}}if(f!=null)return l=l(),f.current=l,function(){f.current=null}}function W_(l,f,y){y=y!=null?y.concat([l]):null,pm(4,4,$_.bind(null,f,l),y)}function D0(){}function K_(l,f){var y=Wr();f=f===void 0?null:f;var b=y.memoizedState;return f!==null&&_0(f,b[1])?b[0]:(y.memoizedState=[l,f],l)}function X_(l,f){var y=Wr();f=f===void 0?null:f;var b=y.memoizedState;if(f!==null&&_0(f,b[1]))return b[0];if(b=l(),cu){St(!0);try{l()}finally{St(!1)}}return y.memoizedState=[b,f],b}function L0(l,f,y){return y===void 0||(Tr&1073741824)!==0&&(mn&261930)===0?l.memoizedState=f:(l.memoizedState=y,l=An(),un.lanes|=l,jo|=l,y)}function Y_(l,f,y,b){return ca(y,f)?y:Md.current!==null?(l=L0(l,y,b),ca(l,f)||(ai=!0),l):(Tr&42)===0||(Tr&1073741824)!==0&&(mn&261930)===0?(ai=!0,l.memoizedState=y):(l=An(),un.lanes|=l,jo|=l,f)}function J_(l,f,y,b,R){var D=X.p;X.p=D!==0&&8>D?D:8;var H=K.T,Q={};K.T=Q,B0(l,!1,f,y);try{var oe=R(),Se=K.S;if(Se!==null&&Se(Q,oe),oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var ze=p0(oe,b);ih(l,f,ze,as(l))}else ih(l,f,b,as(l))}catch($e){ih(l,f,{then:function(){},status:"rejected",reason:$e},as())}finally{X.p=D,H!==null&&Q.types!==null&&(H.types=Q.types),K.T=H}}function nk(){}function U0(l,f,y,b){if(l.tag!==5)throw Error(r(476));var R=Z_(l).queue;J_(l,R,f,re,y===null?nk:function(){return Q_(l),y(b)})}function Z_(l){var f=l.memoizedState;if(f!==null)return f;f={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:re},next:null};var y={};return f.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:y},next:null},l.memoizedState=f,l=l.alternate,l!==null&&(l.memoizedState=f),f}function Q_(l){var f=Z_(l);f.next===null&&(f=l.alternate.memoizedState),ih(l,f.next.queue,{},as())}function z0(){return Yt(oy)}function ew(){return Wr().memoizedState}function tw(){return Wr().memoizedState}function rk(l){for(var f=l.return;f!==null;){switch(f.tag){case 24:case 3:var y=as();l=gl(y);var b=lc(f,l,y);b!==null&&(xn(b,f,y),cc(b,f,y)),f={cache:d0()},l.payload=f;return}f=f.return}}function ik(l,f,y){var b=as();y={lane:b,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},mm(l)?rw(f,y):(y=$p(l,f,y,b),y!==null&&(xn(y,l,b),iw(y,f,b)))}function nw(l,f,y){var b=as();ih(l,f,y,b)}function ih(l,f,y,b){var R={lane:b,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(mm(l))rw(f,R);else{var D=l.alternate;if(l.lanes===0&&(D===null||D.lanes===0)&&(D=f.lastRenderedReducer,D!==null))try{var H=f.lastRenderedState,Q=D(H,y);if(R.hasEagerState=!0,R.eagerState=Q,ca(Q,H))return Si(l,f,R,0),nn===null&&Wf(),!1}catch{}if(y=$p(l,f,R,b),y!==null)return xn(y,l,b),iw(y,f,b),!0}return!1}function B0(l,f,y,b){if(b={lane:2,revertLane:Re(),gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},mm(l)){if(f)throw Error(r(479))}else f=$p(l,y,b,2),f!==null&&xn(f,l,2)}function mm(l){var f=l.alternate;return l===un||f!==null&&f===un}function rw(l,f){Nd=Es=!0;var y=l.pending;y===null?f.next=f:(f.next=y.next,y.next=f),l.pending=f}function iw(l,f,y){if((y&4194048)!==0){var b=f.lanes;b&=l.pendingLanes,y|=b,f.lanes=y,$l(l,y)}}var Rd={readContext:Yt,use:uc,useCallback:Or,useContext:Or,useEffect:Or,useImperativeHandle:Or,useLayoutEffect:Or,useInsertionEffect:Or,useMemo:Or,useReducer:Or,useRef:Or,useState:Or,useDebugValue:Or,useDeferredValue:Or,useTransition:Or,useSyncExternalStore:Or,useId:Or,useHostTransitionStatus:Or,useFormState:Or,useActionState:Or,useOptimistic:Or,useMemoCache:Or,useCacheRefresh:Or};Rd.useEffectEvent=Or;var aw={readContext:Yt,use:uc,useCallback:function(l,f){return pi().memoizedState=[l,f===void 0?null:f],l},useContext:Yt,useEffect:F_,useImperativeHandle:function(l,f,y){y=y!=null?y.concat([l]):null,hm(4194308,4,$_.bind(null,f,l),y)},useLayoutEffect:function(l,f){return hm(4194308,4,l,f)},useInsertionEffect:function(l,f){hm(4,2,l,f)},useMemo:function(l,f){var y=pi();f=f===void 0?null:f;var b=l();if(cu){St(!0);try{l()}finally{St(!1)}}return y.memoizedState=[b,f],b},useReducer:function(l,f,y){var b=pi();if(y!==void 0){var R=y(f);if(cu){St(!0);try{y(f)}finally{St(!1)}}}else R=f;return b.memoizedState=b.baseState=R,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:R},b.queue=l,l=l.dispatch=ik.bind(null,un,l),[b.memoizedState,l]},useRef:function(l){var f=pi();return l={current:l},f.memoizedState=l},useState:function(l){l=M0(l);var f=l.queue,y=nw.bind(null,un,f);return f.dispatch=y,[l.memoizedState,y]},useDebugValue:D0,useDeferredValue:function(l,f){var y=pi();return L0(y,l,f)},useTransition:function(){var l=M0(!1);return l=J_.bind(null,un,l.queue,!0,!1),pi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,f,y){var b=un,R=pi();if(Rn){if(y===void 0)throw Error(r(407));y=y()}else{if(y=f(),nn===null)throw Error(r(349));(mn&127)!==0||C_(b,f,y)}R.memoizedState=y;var D={value:y,getSnapshot:f};return R.queue=D,F_(I_.bind(null,b,D,l),[l]),b.flags|=2048,dc(9,{destroy:void 0},R_.bind(null,b,D,y,f),null),y},useId:function(){var l=pi(),f=nn.identifierPrefix;if(Rn){var y=Xs,b=Pr;y=(b&~(1<<32-_t(b)-1)).toString(32)+y,f="_"+f+"R_"+y,y=lm++,0<y&&(f+="H"+y.toString(32)),f+="_"}else y=b0++,f="_"+f+"r_"+y.toString(32)+"_";return l.memoizedState=f},useHostTransitionStatus:z0,useFormState:I0,useActionState:I0,useOptimistic:function(l){var f=pi();f.memoizedState=f.baseState=l;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=y,f=B0.bind(null,un,!0,y),y.dispatch=f,[l,f]},useMemoCache:E0,useCacheRefresh:function(){return pi().memoizedState=rk.bind(null,un)},useEffectEvent:function(l){var f=pi(),y={impl:l};return f.memoizedState=y,function(){if((Ut&2)!==0)throw Error(r(440));return y.impl.apply(void 0,arguments)}}},F0={readContext:Yt,use:uc,useCallback:K_,useContext:Yt,useEffect:j0,useImperativeHandle:W_,useInsertionEffect:G_,useLayoutEffect:q_,useMemo:X_,useReducer:dm,useRef:fm,useState:function(){return dm(yl)},useDebugValue:D0,useDeferredValue:function(l,f){var y=Wr();return Y_(y,rr.memoizedState,l,f)},useTransition:function(){var l=dm(yl)[0],f=Wr().memoizedState;return[typeof l=="boolean"?l:rh(l),f]},useSyncExternalStore:N_,useId:ew,useHostTransitionStatus:z0,useFormState:z_,useActionState:z_,useOptimistic:function(l,f){var y=Wr();return N0(y,rr,l,f)},useMemoCache:E0,useCacheRefresh:tw};F0.useEffectEvent=H_;var As={readContext:Yt,use:uc,useCallback:K_,useContext:Yt,useEffect:j0,useImperativeHandle:W_,useInsertionEffect:G_,useLayoutEffect:q_,useMemo:X_,useReducer:k0,useRef:fm,useState:function(){return k0(yl)},useDebugValue:D0,useDeferredValue:function(l,f){var y=Wr();return rr===null?L0(y,l,f):Y_(y,rr.memoizedState,l,f)},useTransition:function(){var l=k0(yl)[0],f=Wr().memoizedState;return[typeof l=="boolean"?l:rh(l),f]},useSyncExternalStore:N_,useId:ew,useHostTransitionStatus:z0,useFormState:O0,useActionState:O0,useOptimistic:function(l,f){var y=Wr();return rr!==null?N0(y,rr,l,f):(y.baseState=l,[l,y.queue.dispatch])},useMemoCache:E0,useCacheRefresh:tw};As.useEffectEvent=H_;function gm(l,f,y,b){f=l.memoizedState,y=y(b,f),y=y==null?f:m({},f,y),l.memoizedState=y,l.lanes===0&&(l.updateQueue.baseState=y)}var ah={enqueueSetState:function(l,f,y){l=l._reactInternals;var b=as(),R=gl(b);R.payload=f,y!=null&&(R.callback=y),f=lc(l,R,b),f!==null&&(xn(f,l,b),cc(f,l,b))},enqueueReplaceState:function(l,f,y){l=l._reactInternals;var b=as(),R=gl(b);R.tag=1,R.payload=f,y!=null&&(R.callback=y),f=lc(l,R,b),f!==null&&(xn(f,l,b),cc(f,l,b))},enqueueForceUpdate:function(l,f){l=l._reactInternals;var y=as(),b=gl(y);b.tag=2,f!=null&&(b.callback=f),f=lc(l,b,y),f!==null&&(xn(f,l,y),cc(f,l,y))}};function V0(l,f,y,b,R,D,H){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,D,H):f.prototype&&f.prototype.isPureReactComponent?!hd(y,b)||!hd(R,D):!0}function H0(l,f,y,b){l=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,b),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,b),f.state!==l&&ah.enqueueReplaceState(f,f.state,null)}function fc(l,f){var y=f;if("ref"in f){y={};for(var b in f)b!=="ref"&&(y[b]=f[b])}if(l=l.defaultProps){y===f&&(y=m({},y));for(var R in l)y[R]===void 0&&(y[R]=l[R])}return y}function sw(l){$f(l)}function G0(l){console.error(l)}function q0(l){$f(l)}function vm(l,f){try{var y=l.onUncaughtError;y(f.value,{componentStack:f.stack})}catch(b){setTimeout(function(){throw b})}}function ow(l,f,y){try{var b=l.onCaughtError;b(y.value,{componentStack:y.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function $0(l,f,y){return y=gl(y),y.tag=3,y.payload={element:null},y.callback=function(){vm(l,f)},y}function W0(l){return l=gl(l),l.tag=3,l}function lw(l,f,y,b){var R=y.type.getDerivedStateFromError;if(typeof R=="function"){var D=b.value;l.payload=function(){return R(D)},l.callback=function(){ow(f,y,b)}}var H=y.stateNode;H!==null&&typeof H.componentDidCatch=="function"&&(l.callback=function(){ow(f,y,b),typeof R!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var Q=b.stack;this.componentDidCatch(b.value,{componentStack:Q!==null?Q:""})})}function mi(l,f,y,b,R){if(y.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(f=y.alternate,f!==null&&ko(f,y,R,!0),y=Ma.current,y!==null){switch(y.tag){case 31:case 13:return fa===null?Ud():y.alternate===null&&jr===0&&(jr=3),y.flags&=-257,y.flags|=65536,y.lanes=R,b===rm?y.flags|=16384:(f=y.updateQueue,f===null?y.updateQueue=new Set([b]):f.add(b),vh(l,b,R)),!1;case 22:return y.flags|=65536,b===rm?y.flags|=16384:(f=y.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([b])},y.updateQueue=f):(y=f.retryQueue,y===null?f.retryQueue=new Set([b]):y.add(b)),vh(l,b,R)),!1}throw Error(r(435,y.tag))}return vh(l,b,R),Ud(),!1}if(Rn)return f=Ma.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=R,b!==_d&&(l=Error(r(422),{cause:b}),To(Ja(l,y)))):(b!==_d&&(f=Error(r(423),{cause:b}),To(Ja(f,y))),l=l.current.alternate,l.flags|=65536,R&=-R,l.lanes|=R,b=Ja(b,y),R=$0(l.stateNode,b,R),Ht(l,R),jr!==4&&(jr=2)),!1;var D=Error(r(520),{cause:b});if(D=Ja(D,y),xu===null?xu=[D]:xu.push(D),jr!==4&&(jr=2),f===null)return!0;b=Ja(b,y),y=f;do{switch(y.tag){case 3:return y.flags|=65536,l=R&-R,y.lanes|=l,l=$0(y.stateNode,b,l),Ht(y,l),!1;case 1:if(f=y.type,D=y.stateNode,(y.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Yr===null||!Yr.has(D))))return y.flags|=65536,R&=-R,y.lanes|=R,R=W0(R),lw(R,l,y,b),Ht(y,R),!1}y=y.return}while(y!==null);return!1}var ym=Error(r(461)),ai=!1;function Ti(l,f,y,b){f.child=l===null?sm(f,null,y,b):ml(f,l.child,y,b)}function K0(l,f,y,b,R){y=y.render;var D=f.ref;if("ref"in b){var H={};for(var Q in b)Q!=="ref"&&(H[Q]=b[Q])}else H=b;return sc(f),b=cm(l,f,y,H,D,R),Q=w0(),l!==null&&!ai?(S0(l,f,R),Kr(l,f,R)):(Rn&&Q&&wo(f),f.flags|=1,Ti(l,f,b,R),f.child)}function fu(l,f,y,b,R){if(l===null){var D=y.type;return typeof D=="function"&&!Wp(D)&&D.defaultProps===void 0&&y.compare===null?(f.tag=15,f.type=D,xm(l,f,D,b,R)):(l=bo(y.type,null,b,f,f.mode,R),l.ref=f.ref,l.return=f,f.child=l)}if(D=l.child,!Em(l,R)){var H=D.memoizedProps;if(y=y.compare,y=y!==null?y:hd,y(H,b)&&l.ref===f.ref)return Kr(l,f,R)}return f.flags|=1,l=Ea(D,b),l.ref=f.ref,l.return=f,f.child=l}function xm(l,f,y,b,R){if(l!==null){var D=l.memoizedProps;if(hd(D,b)&&l.ref===f.ref)if(ai=!1,f.pendingProps=b=D,Em(l,R))(l.flags&131072)!==0&&(ai=!0);else return f.lanes=l.lanes,Kr(l,f,R)}return Id(l,f,y,b,R)}function hu(l,f,y,b){var R=b.children,D=l!==null?l.memoizedState:null;if(l===null&&f.stateNode===null&&(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),b.mode==="hidden"){if((f.flags&128)!==0){if(D=D!==null?D.baseLanes|y:y,l!==null){for(b=f.child=l.child,R=0;b!==null;)R=R|b.lanes|b.childLanes,b=b.sibling;b=R&~D}else b=0,f.child=null;return Ca(l,f,D,y,b)}if((y&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},l!==null&&Yf(f,D!==null?D.cachePool:null),D!==null?A_(f,D):y0(),k_(f);else return b=f.lanes=536870912,Ca(l,f,D!==null?D.baseLanes|y:y,y,b)}else D!==null?(Yf(f,D.cachePool),A_(f,D),Na(),f.memoizedState=null):(l!==null&&Yf(f,null),y0(),Na());return Ti(l,f,R,y),f.child}function No(l,f){return l!==null&&l.tag===22||f.stateNode!==null||(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.sibling}function Ca(l,f,y,b,R){var D=nm();return D=D===null?null:{parent:ii._currentValue,pool:D},f.memoizedState={baseLanes:y,cachePool:D},l!==null&&Yf(f,null),y0(),k_(f),l!==null&&ko(l,f,b,!0),f.childLanes=R,null}function bm(l,f){return f=Tm({mode:f.mode,children:f.children},l.mode),f.ref=l.ref,l.child=f,f.return=l,f}function cw(l,f,y){return ml(f,l.child,null,y),l=bm(f,f.pendingProps),l.flags|=2,$r(f),f.memoizedState=null,l}function _m(l,f,y){var b=f.pendingProps,R=(f.flags&128)!==0;if(f.flags&=-129,l===null){if(Rn){if(b.mode==="hidden")return l=bm(f,b),f.lanes=536870912,No(null,l);if(x0(f),(l=dr)?(l=t2(l,Za),l=l!==null&&l.data==="&"?l:null,l!==null&&(f.memoizedState={dehydrated:l,treeContext:dl!==null?{id:Pr,overflow:Xs}:null,retryLane:536870912,hydrationErrors:null},y=yd(l),y.return=f,f.child=y,Fr=f,dr=null)):l=null,l===null)throw So(f);return f.lanes=536870912,null}return bm(f,b)}var D=l.memoizedState;if(D!==null){var H=D.dehydrated;if(x0(f),R)if(f.flags&256)f.flags&=-257,f=cw(l,f,y);else if(f.memoizedState!==null)f.child=l.child,f.flags|=128,f=null;else throw Error(r(558));else if(ai||ko(l,f,y,!1),R=(y&l.childLanes)!==0,ai||R){if(b=nn,b!==null&&(H=qc(b,y),H!==0&&H!==D.retryLane))throw D.retryLane=H,ua(l,H),xn(b,l,H),ym;Ud(),f=cw(l,f,y)}else l=D.treeContext,dr=Uo(H.nextSibling),Fr=f,Rn=!0,fl=null,Za=!1,l!==null&&Jp(f,l),f=bm(f,b),f.flags|=4096;return f}return l=Ea(l.child,{mode:b.mode,children:b.children}),l.ref=f.ref,f.child=l,l.return=f,l}function pu(l,f){var y=f.ref;if(y===null)l!==null&&l.ref!==null&&(f.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(r(284));(l===null||l.ref!==y)&&(f.flags|=4194816)}}function Id(l,f,y,b,R){return sc(f),y=cm(l,f,y,b,void 0,R),b=w0(),l!==null&&!ai?(S0(l,f,R),Kr(l,f,R)):(Rn&&b&&wo(f),f.flags|=1,Ti(l,f,y,R),f.child)}function sh(l,f,y,b,R,D){return sc(f),f.updateQueue=null,y=uu(f,b,y,R),M_(l),b=w0(),l!==null&&!ai?(S0(l,f,D),Kr(l,f,D)):(Rn&&b&&wo(f),f.flags|=1,Ti(l,f,y,D),f.child)}function wm(l,f,y,b,R){if(sc(f),f.stateNode===null){var D=ec,H=y.contextType;typeof H=="object"&&H!==null&&(D=Yt(H)),D=new y(b,D),f.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=ah,f.stateNode=D,D._reactInternals=f,D=f.stateNode,D.props=b,D.state=f.memoizedState,D.refs={},Qf(f),H=y.contextType,D.context=typeof H=="object"&&H!==null?Yt(H):ec,D.state=f.memoizedState,H=y.getDerivedStateFromProps,typeof H=="function"&&(gm(f,y,H,b),D.state=f.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(H=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),H!==D.state&&ah.enqueueReplaceState(D,D.state,null),Ad(f,b,D,R),eh(),D.state=f.memoizedState),typeof D.componentDidMount=="function"&&(f.flags|=4194308),b=!0}else if(l===null){D=f.stateNode;var Q=f.memoizedProps,oe=fc(y,Q);D.props=oe;var Se=D.context,ze=y.contextType;H=ec,typeof ze=="object"&&ze!==null&&(H=Yt(ze));var $e=y.getDerivedStateFromProps;ze=typeof $e=="function"||typeof D.getSnapshotBeforeUpdate=="function",Q=f.pendingProps!==Q,ze||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(Q||Se!==H)&&H0(f,D,b,H),da=!1;var Ne=f.memoizedState;D.state=Ne,Ad(f,b,D,R),eh(),Se=f.memoizedState,Q||Ne!==Se||da?(typeof $e=="function"&&(gm(f,y,$e,b),Se=f.memoizedState),(oe=da||V0(f,y,oe,b,Ne,Se,H))?(ze||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(f.flags|=4194308)):(typeof D.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=b,f.memoizedState=Se),D.props=b,D.state=Se,D.context=H,b=oe):(typeof D.componentDidMount=="function"&&(f.flags|=4194308),b=!1)}else{D=f.stateNode,g0(l,f),H=f.memoizedProps,ze=fc(y,H),D.props=ze,$e=f.pendingProps,Ne=D.context,Se=y.contextType,oe=ec,typeof Se=="object"&&Se!==null&&(oe=Yt(Se)),Q=y.getDerivedStateFromProps,(Se=typeof Q=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(H!==$e||Ne!==oe)&&H0(f,D,b,oe),da=!1,Ne=f.memoizedState,D.state=Ne,Ad(f,b,D,R),eh();var De=f.memoizedState;H!==$e||Ne!==De||da||l!==null&&l.dependencies!==null&&Xf(l.dependencies)?(typeof Q=="function"&&(gm(f,y,Q,b),De=f.memoizedState),(ze=da||V0(f,y,ze,b,Ne,De,oe)||l!==null&&l.dependencies!==null&&Xf(l.dependencies))?(Se||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(b,De,oe),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(b,De,oe)),typeof D.componentDidUpdate=="function"&&(f.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof D.componentDidUpdate!="function"||H===l.memoizedProps&&Ne===l.memoizedState||(f.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||H===l.memoizedProps&&Ne===l.memoizedState||(f.flags|=1024),f.memoizedProps=b,f.memoizedState=De),D.props=b,D.state=De,D.context=oe,b=ze):(typeof D.componentDidUpdate!="function"||H===l.memoizedProps&&Ne===l.memoizedState||(f.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||H===l.memoizedProps&&Ne===l.memoizedState||(f.flags|=1024),b=!1)}return D=b,pu(l,f),b=(f.flags&128)!==0,D||b?(D=f.stateNode,y=b&&typeof y.getDerivedStateFromError!="function"?null:D.render(),f.flags|=1,l!==null&&b?(f.child=ml(f,l.child,null,R),f.child=ml(f,null,y,R)):Ti(l,f,y,R),f.memoizedState=D.state,l=f.child):l=Kr(l,f,R),l}function uw(l,f,y,b){return ic(),f.flags|=256,Ti(l,f,y,b),f.child}var X0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yi(l){return{baseLanes:l,cachePool:m0()}}function Sm(l,f,y){return l=l!==null?l.childLanes&~y:0,f&&(l|=ma),l}function dw(l,f,y){var b=f.pendingProps,R=!1,D=(f.flags&128)!==0,H;if((H=D)||(H=l!==null&&l.memoizedState===null?!1:(In.current&2)!==0),H&&(R=!0,f.flags&=-129),H=(f.flags&32)!==0,f.flags&=-33,l===null){if(Rn){if(R?vl(f):Na(),(l=dr)?(l=t2(l,Za),l=l!==null&&l.data!=="&"?l:null,l!==null&&(f.memoizedState={dehydrated:l,treeContext:dl!==null?{id:Pr,overflow:Xs}:null,retryLane:536870912,hydrationErrors:null},y=yd(l),y.return=f,f.child=y,Fr=f,dr=null)):l=null,l===null)throw So(f);return yk(l)?f.lanes=32:f.lanes=536870912,null}var Q=b.children;return b=b.fallback,R?(Na(),R=f.mode,Q=Tm({mode:"hidden",children:Q},R),b=tc(b,R,y,null),Q.return=f,b.return=f,Q.sibling=b,f.child=Q,b=f.child,b.memoizedState=Yi(y),b.childLanes=Sm(l,H,y),f.memoizedState=X0,No(null,b)):(vl(f),oh(f,Q))}var oe=l.memoizedState;if(oe!==null&&(Q=oe.dehydrated,Q!==null)){if(D)f.flags&256?(vl(f),f.flags&=-257,f=Y0(l,f,y)):f.memoizedState!==null?(Na(),f.child=l.child,f.flags|=128,f=null):(Na(),Q=b.fallback,R=f.mode,b=Tm({mode:"visible",children:b.children},R),Q=tc(Q,R,y,null),Q.flags|=2,b.return=f,Q.return=f,b.sibling=Q,f.child=b,ml(f,l.child,null,y),b=f.child,b.memoizedState=Yi(y),b.childLanes=Sm(l,H,y),f.memoizedState=X0,f=No(null,b));else if(vl(f),yk(Q)){if(H=Q.nextSibling&&Q.nextSibling.dataset,H)var Se=H.dgst;H=Se,b=Error(r(419)),b.stack="",b.digest=H,To({value:b,source:null,stack:null}),f=Y0(l,f,y)}else if(ai||ko(l,f,y,!1),H=(y&l.childLanes)!==0,ai||H){if(H=nn,H!==null&&(b=qc(H,y),b!==0&&b!==oe.retryLane))throw oe.retryLane=b,ua(l,b),xn(H,l,b),ym;vk(Q)||Ud(),f=Y0(l,f,y)}else vk(Q)?(f.flags|=192,f.child=l.child,f=null):(l=oe.treeContext,dr=Uo(Q.nextSibling),Fr=f,Rn=!0,fl=null,Za=!1,l!==null&&Jp(f,l),f=oh(f,b.children),f.flags|=4096);return f}return R?(Na(),Q=b.fallback,R=f.mode,oe=l.child,Se=oe.sibling,b=Ea(oe,{mode:"hidden",children:b.children}),b.subtreeFlags=oe.subtreeFlags&65011712,Se!==null?Q=Ea(Se,Q):(Q=tc(Q,R,y,null),Q.flags|=2),Q.return=f,b.return=f,b.sibling=Q,f.child=b,No(null,b),b=f.child,Q=l.child.memoizedState,Q===null?Q=Yi(y):(R=Q.cachePool,R!==null?(oe=ii._currentValue,R=R.parent!==oe?{parent:oe,pool:oe}:R):R=m0(),Q={baseLanes:Q.baseLanes|y,cachePool:R}),b.memoizedState=Q,b.childLanes=Sm(l,H,y),f.memoizedState=X0,No(l.child,b)):(vl(f),y=l.child,l=y.sibling,y=Ea(y,{mode:"visible",children:b.children}),y.return=f,y.sibling=null,l!==null&&(H=f.deletions,H===null?(f.deletions=[l],f.flags|=16):H.push(l)),f.child=y,f.memoizedState=null,y)}function oh(l,f){return f=Tm({mode:"visible",children:f},l.mode),f.return=l,l.child=f}function Tm(l,f){return l=Ir(22,l,null,f),l.lanes=0,l}function Y0(l,f,y){return ml(f,l.child,null,y),l=oh(f,f.pendingProps.children),l.flags|=2,f.memoizedState=null,l}function fw(l,f,y){l.lanes|=f;var b=l.alternate;b!==null&&(b.lanes|=f),Qp(l.return,f,y)}function mu(l,f,y,b,R,D){var H=l.memoizedState;H===null?l.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:b,tail:y,tailMode:R,treeForkCount:D}:(H.isBackwards=f,H.rendering=null,H.renderingStartTime=0,H.last=b,H.tail=y,H.tailMode=R,H.treeForkCount=D)}function Ra(l,f,y){var b=f.pendingProps,R=b.revealOrder,D=b.tail;b=b.children;var H=In.current,Q=(H&2)!==0;if(Q?(H=H&1|2,f.flags|=128):H&=1,me(In,H),Ti(l,f,b,y),b=Rn?bd:0,!Q&&l!==null&&(l.flags&128)!==0)e:for(l=f.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&fw(l,y,f);else if(l.tag===19)fw(l,y,f);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===f)break e;for(;l.sibling===null;){if(l.return===null||l.return===f)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(R){case"forwards":for(y=f.child,R=null;y!==null;)l=y.alternate,l!==null&&es(l)===null&&(R=y),y=y.sibling;y=R,y===null?(R=f.child,f.child=null):(R=y.sibling,y.sibling=null),mu(f,!1,R,y,D,b);break;case"backwards":case"unstable_legacy-backwards":for(y=null,R=f.child,f.child=null;R!==null;){if(l=R.alternate,l!==null&&es(l)===null){f.child=R;break}l=R.sibling,R.sibling=y,y=R,R=l}mu(f,!0,y,null,D,b);break;case"together":mu(f,!1,null,null,void 0,b);break;default:f.memoizedState=null}return f.child}function Kr(l,f,y){if(l!==null&&(f.dependencies=l.dependencies),jo|=f.lanes,(y&f.childLanes)===0)if(l!==null){if(ko(l,f,y,!1),(y&f.childLanes)===0)return null}else return null;if(l!==null&&f.child!==l.child)throw Error(r(153));if(f.child!==null){for(l=f.child,y=Ea(l,l.pendingProps),f.child=y,y.return=f;l.sibling!==null;)l=l.sibling,y=y.sibling=Ea(l,l.pendingProps),y.return=f;y.sibling=null}return f.child}function Em(l,f){return(l.lanes&f)!==0?!0:(l=l.dependencies,!!(l!==null&&Xf(l)))}function ak(l,f,y){switch(f.tag){case 3:Ye(f,f.stateNode.containerInfo),hl(f,ii,l.memoizedState.cache),ic();break;case 27:case 5:qe(f);break;case 4:Ye(f,f.stateNode.containerInfo);break;case 10:hl(f,f.type,f.memoizedProps.value);break;case 31:if(f.memoizedState!==null)return f.flags|=128,x0(f),null;break;case 13:var b=f.memoizedState;if(b!==null)return b.dehydrated!==null?(vl(f),f.flags|=128,null):(y&f.child.childLanes)!==0?dw(l,f,y):(vl(f),l=Kr(l,f,y),l!==null?l.sibling:null);vl(f);break;case 19:var R=(l.flags&128)!==0;if(b=(y&f.childLanes)!==0,b||(ko(l,f,y,!1),b=(y&f.childLanes)!==0),R){if(b)return Ra(l,f,y);f.flags|=128}if(R=f.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),me(In,In.current),b)break;return null;case 22:return f.lanes=0,hu(l,f,y,f.pendingProps);case 24:hl(f,ii,l.memoizedState.cache)}return Kr(l,f,y)}function Am(l,f,y){if(l!==null)if(l.memoizedProps!==f.pendingProps)ai=!0;else{if(!Em(l,y)&&(f.flags&128)===0)return ai=!1,ak(l,f,y);ai=(l.flags&131072)!==0}else ai=!1,Rn&&(f.flags&1048576)!==0&&x_(f,bd,f.index);switch(f.lanes=0,f.tag){case 16:e:{var b=f.pendingProps;if(l=iu(f.elementType),f.type=l,typeof l=="function")Wp(l)?(b=fc(l,b),f.tag=1,f=wm(null,f,l,b,y)):(f.tag=0,f=Id(null,f,l,b,y));else{if(l!=null){var R=l.$$typeof;if(R===P){f.tag=11,f=K0(null,f,l,b,y);break e}else if(R===O){f.tag=14,f=fu(null,f,l,b,y);break e}}throw f=ee(l)||l,Error(r(306,f,""))}}return f;case 0:return Id(l,f,f.type,f.pendingProps,y);case 1:return b=f.type,R=fc(b,f.pendingProps),wm(l,f,b,R,y);case 3:e:{if(Ye(f,f.stateNode.containerInfo),l===null)throw Error(r(387));b=f.pendingProps;var D=f.memoizedState;R=D.element,g0(l,f),Ad(f,b,null,y);var H=f.memoizedState;if(b=H.cache,hl(f,ii,b),b!==D.cache&&em(f,[ii],y,!0),eh(),b=H.element,D.isDehydrated)if(D={element:b,isDehydrated:!1,cache:H.cache},f.updateQueue.baseState=D,f.memoizedState=D,f.flags&256){f=uw(l,f,b,y);break e}else if(b!==R){R=Ja(Error(r(424)),f),To(R),f=uw(l,f,b,y);break e}else for(l=f.stateNode.containerInfo,l.nodeType===9?l=l.body:l=l.nodeName==="HTML"?l.ownerDocument.body:l,dr=Uo(l.firstChild),Fr=f,Rn=!0,fl=null,Za=!0,y=sm(f,null,b,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(ic(),b===R){f=Kr(l,f,y);break e}Ti(l,f,b,y)}f=f.child}return f;case 26:return pu(l,f),l===null?(y=o2(f.type,null,f.pendingProps,null))?f.memoizedState=y:Rn||(y=f.type,l=f.pendingProps,b=gw(ve.current).createElement(y),b[Rr]=f,b[fi]=l,va(b,y,l),Z(b),f.stateNode=b):f.memoizedState=o2(f.type,l.memoizedProps,f.pendingProps,l.memoizedState),null;case 27:return qe(f),l===null&&Rn&&(b=f.stateNode=i2(f.type,f.pendingProps,ve.current),Fr=f,Za=!0,R=dr,Vd(f.type)?(xk=R,dr=Uo(b.firstChild)):dr=R),Ti(l,f,f.pendingProps.children,y),pu(l,f),l===null&&(f.flags|=4194304),f.child;case 5:return l===null&&Rn&&((R=b=dr)&&(b=wX(b,f.type,f.pendingProps,Za),b!==null?(f.stateNode=b,Fr=f,dr=Uo(b.firstChild),Za=!1,R=!0):R=!1),R||So(f)),qe(f),R=f.type,D=f.pendingProps,H=l!==null?l.memoizedProps:null,b=D.children,pk(R,D)?b=null:H!==null&&pk(R,H)&&(f.flags|=32),f.memoizedState!==null&&(R=cm(l,f,du,null,null,y),oy._currentValue=R),pu(l,f),Ti(l,f,b,y),f.child;case 6:return l===null&&Rn&&((l=y=dr)&&(y=SX(y,f.pendingProps,Za),y!==null?(f.stateNode=y,Fr=f,dr=null,l=!0):l=!1),l||So(f)),null;case 13:return dw(l,f,y);case 4:return Ye(f,f.stateNode.containerInfo),b=f.pendingProps,l===null?f.child=ml(f,null,b,y):Ti(l,f,b,y),f.child;case 11:return K0(l,f,f.type,f.pendingProps,y);case 7:return Ti(l,f,f.pendingProps,y),f.child;case 8:return Ti(l,f,f.pendingProps.children,y),f.child;case 12:return Ti(l,f,f.pendingProps.children,y),f.child;case 10:return b=f.pendingProps,hl(f,f.type,b.value),Ti(l,f,b.children,y),f.child;case 9:return R=f.type._context,b=f.pendingProps.children,sc(f),R=Yt(R),b=b(R),f.flags|=1,Ti(l,f,b,y),f.child;case 14:return fu(l,f,f.type,f.pendingProps,y);case 15:return xm(l,f,f.type,f.pendingProps,y);case 19:return Ra(l,f,y);case 31:return _m(l,f,y);case 22:return hu(l,f,y,f.pendingProps);case 24:return sc(f),b=Yt(ii),l===null?(R=nm(),R===null&&(R=nn,D=d0(),R.pooledCache=D,D.refCount++,D!==null&&(R.pooledCacheLanes|=y),R=D),f.memoizedState={parent:b,cache:R},Qf(f),hl(f,ii,R)):((l.lanes&y)!==0&&(g0(l,f),Ad(f,null,null,y),eh()),R=l.memoizedState,D=f.memoizedState,R.parent!==b?(R={parent:b,cache:b},f.memoizedState=R,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=R),hl(f,ii,b)):(b=D.cache,hl(f,ii,b),b!==R.cache&&em(f,[ii],y,!0))),Ti(l,f,f.pendingProps.children,y),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function Co(l){l.flags|=4}function lh(l,f,y,b,R){if((f=(l.mode&32)!==0)&&(f=!1),f){if(l.flags|=16777216,(R&335544128)===R)if(l.stateNode.complete)l.flags|=8192;else if(Lr())l.flags|=8192;else throw Mo=rm,Jf}else l.flags&=-16777217}function J0(l,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!f2(f))if(Lr())l.flags|=8192;else throw Mo=rm,Jf}function xl(l,f){f!==null&&(l.flags|=4),l.flags&16384&&(f=l.tag!==22?On():536870912,l.lanes|=f,yr|=f)}function Ro(l,f){if(!Rn)switch(l.tailMode){case"hidden":f=l.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?l.tail=null:y.sibling=null;break;case"collapsed":y=l.tail;for(var b=null;y!==null;)y.alternate!==null&&(b=y),y=y.sibling;b===null?f||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function ir(l){var f=l.alternate!==null&&l.alternate.child===l.child,y=0,b=0;if(f)for(var R=l.child;R!==null;)y|=R.lanes|R.childLanes,b|=R.subtreeFlags&65011712,b|=R.flags&65011712,R.return=l,R=R.sibling;else for(R=l.child;R!==null;)y|=R.lanes|R.childLanes,b|=R.subtreeFlags,b|=R.flags,R.return=l,R=R.sibling;return l.subtreeFlags|=b,l.childLanes=y,f}function ch(l,f,y){var b=f.pendingProps;switch(Yp(f),f.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ir(f),null;case 1:return ir(f),null;case 3:return y=f.stateNode,b=null,l!==null&&(b=l.memoizedState.cache),f.memoizedState.cache!==b&&(f.flags|=2048),Ao(ii),ke(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(l===null||l.child===null)&&(wd(f)?Co(f):l===null||l.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,Zp())),ir(f),null;case 26:var R=f.type,D=f.memoizedState;return l===null?(Co(f),D!==null?(ir(f),J0(f,D)):(ir(f),lh(f,R,null,b,y))):D?D!==l.memoizedState?(Co(f),ir(f),J0(f,D)):(ir(f),f.flags&=-16777217):(l=l.memoizedProps,l!==b&&Co(f),ir(f),lh(f,R,l,b,y)),null;case 27:if(pt(f),y=ve.current,R=f.type,l!==null&&f.stateNode!=null)l.memoizedProps!==b&&Co(f);else{if(!b){if(f.stateNode===null)throw Error(r(166));return ir(f),null}l=Ie.current,wd(f)?b_(f):(l=i2(R,b,y),f.stateNode=l,Co(f))}return ir(f),null;case 5:if(pt(f),R=f.type,l!==null&&f.stateNode!=null)l.memoizedProps!==b&&Co(f);else{if(!b){if(f.stateNode===null)throw Error(r(166));return ir(f),null}if(D=Ie.current,wd(f))b_(f);else{var H=gw(ve.current);switch(D){case 1:D=H.createElementNS("http://www.w3.org/2000/svg",R);break;case 2:D=H.createElementNS("http://www.w3.org/1998/Math/MathML",R);break;default:switch(R){case"svg":D=H.createElementNS("http://www.w3.org/2000/svg",R);break;case"math":D=H.createElementNS("http://www.w3.org/1998/Math/MathML",R);break;case"script":D=H.createElement("div"),D.innerHTML="<script><\/script>",D=D.removeChild(D.firstChild);break;case"select":D=typeof b.is=="string"?H.createElement("select",{is:b.is}):H.createElement("select"),b.multiple?D.multiple=!0:b.size&&(D.size=b.size);break;default:D=typeof b.is=="string"?H.createElement(R,{is:b.is}):H.createElement(R)}}D[Rr]=f,D[fi]=b;e:for(H=f.child;H!==null;){if(H.tag===5||H.tag===6)D.appendChild(H.stateNode);else if(H.tag!==4&&H.tag!==27&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===f)break e;for(;H.sibling===null;){if(H.return===null||H.return===f)break e;H=H.return}H.sibling.return=H.return,H=H.sibling}f.stateNode=D;e:switch(va(D,R,b),R){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}b&&Co(f)}}return ir(f),lh(f,f.type,l===null?null:l.memoizedProps,f.pendingProps,y),null;case 6:if(l&&f.stateNode!=null)l.memoizedProps!==b&&Co(f);else{if(typeof b!="string"&&f.stateNode===null)throw Error(r(166));if(l=ve.current,wd(f)){if(l=f.stateNode,y=f.memoizedProps,b=null,R=Fr,R!==null)switch(R.tag){case 27:case 5:b=R.memoizedProps}l[Rr]=f,l=!!(l.nodeValue===y||b!==null&&b.suppressHydrationWarning===!0||WD(l.nodeValue,y)),l||So(f,!0)}else l=gw(l).createTextNode(b),l[Rr]=f,f.stateNode=l}return ir(f),null;case 31:if(y=f.memoizedState,l===null||l.memoizedState!==null){if(b=wd(f),y!==null){if(l===null){if(!b)throw Error(r(318));if(l=f.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(557));l[Rr]=f}else ic(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;ir(f),l=!1}else y=Zp(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=y),l=!0;if(!l)return f.flags&256?($r(f),f):($r(f),null);if((f.flags&128)!==0)throw Error(r(558))}return ir(f),null;case 13:if(b=f.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(R=wd(f),b!==null&&b.dehydrated!==null){if(l===null){if(!R)throw Error(r(318));if(R=f.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(r(317));R[Rr]=f}else ic(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;ir(f),R=!1}else R=Zp(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=R),R=!0;if(!R)return f.flags&256?($r(f),f):($r(f),null)}return $r(f),(f.flags&128)!==0?(f.lanes=y,f):(y=b!==null,l=l!==null&&l.memoizedState!==null,y&&(b=f.child,R=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(R=b.alternate.memoizedState.cachePool.pool),D=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(D=b.memoizedState.cachePool.pool),D!==R&&(b.flags|=2048)),y!==l&&y&&(f.child.flags|=8192),xl(f,f.updateQueue),ir(f),null);case 4:return ke(),l===null&&ck(f.stateNode.containerInfo),ir(f),null;case 10:return Ao(f.type),ir(f),null;case 19:if(ae(In),b=f.memoizedState,b===null)return ir(f),null;if(R=(f.flags&128)!==0,D=b.rendering,D===null)if(R)Ro(b,!1);else{if(jr!==0||l!==null&&(l.flags&128)!==0)for(l=f.child;l!==null;){if(D=es(l),D!==null){for(f.flags|=128,Ro(b,!1),l=D.updateQueue,f.updateQueue=l,xl(f,l),f.subtreeFlags=0,l=y,y=f.child;y!==null;)vd(y,l),y=y.sibling;return me(In,In.current&1|2),Rn&&_o(f,b.treeForkCount),f.child}l=l.sibling}b.tail!==null&&q()>Xr&&(f.flags|=128,R=!0,Ro(b,!1),f.lanes=4194304)}else{if(!R)if(l=es(D),l!==null){if(f.flags|=128,R=!0,l=l.updateQueue,f.updateQueue=l,xl(f,l),Ro(b,!0),b.tail===null&&b.tailMode==="hidden"&&!D.alternate&&!Rn)return ir(f),null}else 2*q()-b.renderingStartTime>Xr&&y!==536870912&&(f.flags|=128,R=!0,Ro(b,!1),f.lanes=4194304);b.isBackwards?(D.sibling=f.child,f.child=D):(l=b.last,l!==null?l.sibling=D:f.child=D,b.last=D)}return b.tail!==null?(l=b.tail,b.rendering=l,b.tail=l.sibling,b.renderingStartTime=q(),l.sibling=null,y=In.current,me(In,R?y&1|2:y&1),Rn&&_o(f,b.treeForkCount),l):(ir(f),null);case 22:case 23:return $r(f),th(),b=f.memoizedState!==null,l!==null?l.memoizedState!==null!==b&&(f.flags|=8192):b&&(f.flags|=8192),b?(y&536870912)!==0&&(f.flags&128)===0&&(ir(f),f.subtreeFlags&6&&(f.flags|=8192)):ir(f),y=f.updateQueue,y!==null&&xl(f,y.retryQueue),y=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),b=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==y&&(f.flags|=2048),l!==null&&ae(oc),null;case 24:return y=null,l!==null&&(y=l.memoizedState.cache),f.memoizedState.cache!==y&&(f.flags|=2048),Ao(ii),ir(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function ks(l,f){switch(Yp(f),f.tag){case 1:return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 3:return Ao(ii),ke(),l=f.flags,(l&65536)!==0&&(l&128)===0?(f.flags=l&-65537|128,f):null;case 26:case 27:case 5:return pt(f),null;case 31:if(f.memoizedState!==null){if($r(f),f.alternate===null)throw Error(r(340));ic()}return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 13:if($r(f),l=f.memoizedState,l!==null&&l.dehydrated!==null){if(f.alternate===null)throw Error(r(340));ic()}return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 19:return ae(In),null;case 4:return ke(),null;case 10:return Ao(f.type),null;case 22:case 23:return $r(f),th(),l!==null&&ae(oc),l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 24:return Ao(ii),null;case 25:return null;default:return null}}function ts(l,f){switch(Yp(f),f.tag){case 3:Ao(ii),ke();break;case 26:case 27:case 5:pt(f);break;case 4:ke();break;case 31:f.memoizedState!==null&&$r(f);break;case 13:$r(f);break;case 19:ae(In);break;case 10:Ao(f.type);break;case 22:case 23:$r(f),th(),l!==null&&ae(oc);break;case 24:Ao(ii)}}function Ms(l,f){try{var y=f.updateQueue,b=y!==null?y.lastEffect:null;if(b!==null){var R=b.next;y=R;do{if((y.tag&l)===l){b=void 0;var D=y.create,H=y.inst;b=D(),H.destroy=b}y=y.next}while(y!==R)}}catch(Q){Hn(f,f.return,Q)}}function ji(l,f,y){try{var b=f.updateQueue,R=b!==null?b.lastEffect:null;if(R!==null){var D=R.next;b=D;do{if((b.tag&l)===l){var H=b.inst,Q=H.destroy;if(Q!==void 0){H.destroy=void 0,R=f;var oe=y,Se=Q;try{Se()}catch(ze){Hn(R,oe,ze)}}}b=b.next}while(b!==D)}}catch(ze){Hn(f,f.return,ze)}}function Ys(l){var f=l.updateQueue;if(f!==null){var y=l.stateNode;try{E_(f,y)}catch(b){Hn(l,l.return,b)}}}function Ei(l,f,y){y.props=fc(l.type,l.memoizedProps),y.state=l.memoizedState;try{y.componentWillUnmount()}catch(b){Hn(l,f,b)}}function bl(l,f){try{var y=l.ref;if(y!==null){switch(l.tag){case 26:case 27:case 5:var b=l.stateNode;break;case 30:b=l.stateNode;break;default:b=l.stateNode}typeof y=="function"?l.refCleanup=y(b):y.current=b}}catch(R){Hn(l,f,R)}}function Di(l,f){var y=l.ref,b=l.refCleanup;if(y!==null)if(typeof b=="function")try{b()}catch(R){Hn(l,f,R)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(R){Hn(l,f,R)}else y.current=null}function uh(l){var f=l.type,y=l.memoizedProps,b=l.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":y.autoFocus&&b.focus();break e;case"img":y.src?b.src=y.src:y.srcSet&&(b.srcset=y.srcSet)}}catch(R){Hn(l,l.return,R)}}function gi(l,f,y){try{var b=l.stateNode;gX(b,l.type,y,f),b[fi]=f}catch(R){Hn(l,l.return,R)}}function Er(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Vd(l.type)||l.tag===4}function Nn(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Er(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Vd(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Io(l,f,y){var b=l.tag;if(b===5||b===6)l=l.stateNode,f?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(l,f):(f=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,f.appendChild(l),y=y._reactRootContainer,y!=null||f.onclick!==null||(f.onclick=ll));else if(b!==4&&(b===27&&Vd(l.type)&&(y=l.stateNode,f=null),l=l.child,l!==null))for(Io(l,f,y),l=l.sibling;l!==null;)Io(l,f,y),l=l.sibling}function ha(l,f,y){var b=l.tag;if(b===5||b===6)l=l.stateNode,f?y.insertBefore(l,f):y.appendChild(l);else if(b!==4&&(b===27&&Vd(l.type)&&(y=l.stateNode),l=l.child,l!==null))for(ha(l,f,y),l=l.sibling;l!==null;)ha(l,f,y),l=l.sibling}function km(l){var f=l.stateNode,y=l.memoizedProps;try{for(var b=l.type,R=f.attributes;R.length;)f.removeAttributeNode(R[0]);va(f,b,y),f[Rr]=l,f[fi]=y}catch(D){Hn(l,l.return,D)}}var Ns=!1,fr=!1,Js=!1,hw=typeof WeakSet=="function"?WeakSet:Set,Ai=null;function sk(l,f){if(l=l.containerInfo,fk=Sw,l=m_(l),s0(l)){if("selectionStart"in l)var y={start:l.selectionStart,end:l.selectionEnd};else e:{y=(y=l.ownerDocument)&&y.defaultView||window;var b=y.getSelection&&y.getSelection();if(b&&b.rangeCount!==0){y=b.anchorNode;var R=b.anchorOffset,D=b.focusNode;b=b.focusOffset;try{y.nodeType,D.nodeType}catch{y=null;break e}var H=0,Q=-1,oe=-1,Se=0,ze=0,$e=l,Ne=null;t:for(;;){for(var De;$e!==y||R!==0&&$e.nodeType!==3||(Q=H+R),$e!==D||b!==0&&$e.nodeType!==3||(oe=H+b),$e.nodeType===3&&(H+=$e.nodeValue.length),(De=$e.firstChild)!==null;)Ne=$e,$e=De;for(;;){if($e===l)break t;if(Ne===y&&++Se===R&&(Q=H),Ne===D&&++ze===b&&(oe=H),(De=$e.nextSibling)!==null)break;$e=Ne,Ne=$e.parentNode}$e=De}y=Q===-1||oe===-1?null:{start:Q,end:oe}}else y=null}y=y||{start:0,end:0}}else y=null;for(hk={focusedElem:l,selectionRange:y},Sw=!1,Ai=f;Ai!==null;)if(f=Ai,l=f.child,(f.subtreeFlags&1028)!==0&&l!==null)l.return=f,Ai=l;else for(;Ai!==null;){switch(f=Ai,D=f.alternate,l=f.flags,f.tag){case 0:if((l&4)!==0&&(l=f.updateQueue,l=l!==null?l.events:null,l!==null))for(y=0;y<l.length;y++)R=l[y],R.ref.impl=R.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&D!==null){l=void 0,y=f,R=D.memoizedProps,D=D.memoizedState,b=y.stateNode;try{var Dt=fc(y.type,R);l=b.getSnapshotBeforeUpdate(Dt,D),b.__reactInternalSnapshotBeforeUpdate=l}catch(Xt){Hn(y,y.return,Xt)}}break;case 3:if((l&1024)!==0){if(l=f.stateNode.containerInfo,y=l.nodeType,y===9)gk(l);else if(y===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":gk(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=f.sibling,l!==null){l.return=f.return,Ai=l;break}Ai=f.return}}function Ar(l,f,y){var b=y.flags;switch(y.tag){case 0:case 11:case 15:Is(l,y),b&4&&Ms(5,y);break;case 1:if(Is(l,y),b&4)if(l=y.stateNode,f===null)try{l.componentDidMount()}catch(H){Hn(y,y.return,H)}else{var R=fc(y.type,f.memoizedProps);f=f.memoizedState;try{l.componentDidUpdate(R,f,l.__reactInternalSnapshotBeforeUpdate)}catch(H){Hn(y,y.return,H)}}b&64&&Ys(y),b&512&&bl(y,y.return);break;case 3:if(Is(l,y),b&64&&(l=y.updateQueue,l!==null)){if(f=null,y.child!==null)switch(y.child.tag){case 27:case 5:f=y.child.stateNode;break;case 1:f=y.child.stateNode}try{E_(l,f)}catch(H){Hn(y,y.return,H)}}break;case 27:f===null&&b&4&&km(y);case 26:case 5:Is(l,y),f===null&&b&4&&uh(y),b&512&&bl(y,y.return);break;case 12:Is(l,y);break;case 31:Is(l,y),b&4&&hc(l,y);break;case 13:Is(l,y),b&4&&Pd(l,y),b&64&&(l=y.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(y=S.bind(null,y),TX(l,y))));break;case 22:if(b=y.memoizedState!==null||Ns,!b){f=f!==null&&f.memoizedState!==null||fr,R=Ns;var D=fr;Ns=b,(fr=f)&&!D?pa(l,y,(y.subtreeFlags&8772)!==0):Is(l,y),Ns=R,fr=D}break;case 30:break;default:Is(l,y)}}function dh(l){var f=l.alternate;f!==null&&(l.alternate=null,dh(f)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(f=l.stateNode,f!==null&&al(f)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Qn=null,Ji=!1;function Cs(l,f,y){for(y=y.child;y!==null;)Mm(l,f,y),y=y.sibling}function Mm(l,f,y){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(Je,y)}catch{}switch(y.tag){case 26:fr||Di(y,f),Cs(l,f,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:fr||Di(y,f);var b=Qn,R=Ji;Vd(y.type)&&(Qn=y.stateNode,Ji=!1),Cs(l,f,y),iy(y.stateNode),Qn=b,Ji=R;break;case 5:fr||Di(y,f);case 6:if(b=Qn,R=Ji,Qn=null,Cs(l,f,y),Qn=b,Ji=R,Qn!==null)if(Ji)try{(Qn.nodeType===9?Qn.body:Qn.nodeName==="HTML"?Qn.ownerDocument.body:Qn).removeChild(y.stateNode)}catch(D){Hn(y,f,D)}else try{Qn.removeChild(y.stateNode)}catch(D){Hn(y,f,D)}break;case 18:Qn!==null&&(Ji?(l=Qn,QD(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,y.stateNode),Dm(l)):QD(Qn,y.stateNode));break;case 4:b=Qn,R=Ji,Qn=y.stateNode.containerInfo,Ji=!0,Cs(l,f,y),Qn=b,Ji=R;break;case 0:case 11:case 14:case 15:ji(2,y,f),fr||ji(4,y,f),Cs(l,f,y);break;case 1:fr||(Di(y,f),b=y.stateNode,typeof b.componentWillUnmount=="function"&&Ei(y,f,b)),Cs(l,f,y);break;case 21:Cs(l,f,y);break;case 22:fr=(b=fr)||y.memoizedState!==null,Cs(l,f,y),fr=b;break;default:Cs(l,f,y)}}function hc(l,f){if(f.memoizedState===null&&(l=f.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{Dm(l)}catch(y){Hn(f,f.return,y)}}}function Pd(l,f){if(f.memoizedState===null&&(l=f.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Dm(l)}catch(y){Hn(f,f.return,y)}}function Z0(l){switch(l.tag){case 31:case 13:case 19:var f=l.stateNode;return f===null&&(f=l.stateNode=new hw),f;case 22:return l=l.stateNode,f=l._retryCache,f===null&&(f=l._retryCache=new hw),f;default:throw Error(r(435,l.tag))}}function _l(l,f){var y=Z0(l);f.forEach(function(b){if(!y.has(b)){y.add(b);var R=M.bind(null,l,b);b.then(R,R)}})}function vi(l,f){var y=f.deletions;if(y!==null)for(var b=0;b<y.length;b++){var R=y[b],D=l,H=f,Q=H;e:for(;Q!==null;){switch(Q.tag){case 27:if(Vd(Q.type)){Qn=Q.stateNode,Ji=!1;break e}break;case 5:Qn=Q.stateNode,Ji=!1;break e;case 3:case 4:Qn=Q.stateNode.containerInfo,Ji=!0;break e}Q=Q.return}if(Qn===null)throw Error(r(160));Mm(D,H,R),Qn=null,Ji=!1,D=R.alternate,D!==null&&(D.return=null),R.return=null}if(f.subtreeFlags&13886)for(f=f.child;f!==null;)pc(f,l),f=f.sibling}var Rs=null;function pc(l,f){var y=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:vi(f,l),yi(l),b&4&&(ji(3,l,l.return),Ms(3,l),ji(5,l,l.return));break;case 1:vi(f,l),yi(l),b&512&&(fr||y===null||Di(y,y.return)),b&64&&Ns&&(l=l.updateQueue,l!==null&&(b=l.callbacks,b!==null&&(y=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=y===null?b:y.concat(b))));break;case 26:var R=Rs;if(vi(f,l),yi(l),b&512&&(fr||y===null||Di(y,y.return)),b&4){var D=y!==null?y.memoizedState:null;if(b=l.memoizedState,y===null)if(b===null)if(l.stateNode===null){e:{b=l.type,y=l.memoizedProps,R=R.ownerDocument||R;t:switch(b){case"title":D=R.getElementsByTagName("title")[0],(!D||D[Ws]||D[Rr]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=R.createElement(b),R.head.insertBefore(D,R.querySelector("head > title"))),va(D,b,y),D[Rr]=l,Z(D),b=D;break e;case"link":var H=u2("link","href",R).get(b+(y.href||""));if(H){for(var Q=0;Q<H.length;Q++)if(D=H[Q],D.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&D.getAttribute("rel")===(y.rel==null?null:y.rel)&&D.getAttribute("title")===(y.title==null?null:y.title)&&D.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){H.splice(Q,1);break t}}D=R.createElement(b),va(D,b,y),R.head.appendChild(D);break;case"meta":if(H=u2("meta","content",R).get(b+(y.content||""))){for(Q=0;Q<H.length;Q++)if(D=H[Q],D.getAttribute("content")===(y.content==null?null:""+y.content)&&D.getAttribute("name")===(y.name==null?null:y.name)&&D.getAttribute("property")===(y.property==null?null:y.property)&&D.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&D.getAttribute("charset")===(y.charSet==null?null:y.charSet)){H.splice(Q,1);break t}}D=R.createElement(b),va(D,b,y),R.head.appendChild(D);break;default:throw Error(r(468,b))}D[Rr]=l,Z(D),b=D}l.stateNode=b}else d2(R,l.type,l.stateNode);else l.stateNode=c2(R,b,l.memoizedProps);else D!==b?(D===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):D.count--,b===null?d2(R,l.type,l.stateNode):c2(R,b,l.memoizedProps)):b===null&&l.stateNode!==null&&gi(l,l.memoizedProps,y.memoizedProps)}break;case 27:vi(f,l),yi(l),b&512&&(fr||y===null||Di(y,y.return)),y!==null&&b&4&&gi(l,l.memoizedProps,y.memoizedProps);break;case 5:if(vi(f,l),yi(l),b&512&&(fr||y===null||Di(y,y.return)),l.flags&32){R=l.stateNode;try{ri(R,"")}catch(Dt){Hn(l,l.return,Dt)}}b&4&&l.stateNode!=null&&(R=l.memoizedProps,gi(l,R,y!==null?y.memoizedProps:R)),b&1024&&(Js=!0);break;case 6:if(vi(f,l),yi(l),b&4){if(l.stateNode===null)throw Error(r(162));b=l.memoizedProps,y=l.stateNode;try{y.nodeValue=b}catch(Dt){Hn(l,l.return,Dt)}}break;case 3:if(xw=null,R=Rs,Rs=vw(f.containerInfo),vi(f,l),Rs=R,yi(l),b&4&&y!==null&&y.memoizedState.isDehydrated)try{Dm(f.containerInfo)}catch(Dt){Hn(l,l.return,Dt)}Js&&(Js=!1,Nm(l));break;case 4:b=Rs,Rs=vw(l.stateNode.containerInfo),vi(f,l),yi(l),Rs=b;break;case 12:vi(f,l),yi(l);break;case 31:vi(f,l),yi(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,_l(l,b)));break;case 13:vi(f,l),yi(l),l.child.flags&8192&&l.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(Od=q()),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,_l(l,b)));break;case 22:R=l.memoizedState!==null;var oe=y!==null&&y.memoizedState!==null,Se=Ns,ze=fr;if(Ns=Se||R,fr=ze||oe,vi(f,l),fr=ze,Ns=Se,yi(l),b&8192)e:for(f=l.stateNode,f._visibility=R?f._visibility&-2:f._visibility|1,R&&(y===null||oe||Ns||fr||Po(l)),y=null,f=l;;){if(f.tag===5||f.tag===26){if(y===null){oe=y=f;try{if(D=oe.stateNode,R)H=D.style,typeof H.setProperty=="function"?H.setProperty("display","none","important"):H.display="none";else{Q=oe.stateNode;var $e=oe.memoizedProps.style,Ne=$e!=null&&$e.hasOwnProperty("display")?$e.display:null;Q.style.display=Ne==null||typeof Ne=="boolean"?"":(""+Ne).trim()}}catch(Dt){Hn(oe,oe.return,Dt)}}}else if(f.tag===6){if(y===null){oe=f;try{oe.stateNode.nodeValue=R?"":oe.memoizedProps}catch(Dt){Hn(oe,oe.return,Dt)}}}else if(f.tag===18){if(y===null){oe=f;try{var De=oe.stateNode;R?e2(De,!0):e2(oe.stateNode,!1)}catch(Dt){Hn(oe,oe.return,Dt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===l)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break e;for(;f.sibling===null;){if(f.return===null||f.return===l)break e;y===f&&(y=null),f=f.return}y===f&&(y=null),f.sibling.return=f.return,f=f.sibling}b&4&&(b=l.updateQueue,b!==null&&(y=b.retryQueue,y!==null&&(b.retryQueue=null,_l(l,y))));break;case 19:vi(f,l),yi(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,_l(l,b)));break;case 30:break;case 21:break;default:vi(f,l),yi(l)}}function yi(l){var f=l.flags;if(f&2){try{for(var y,b=l.return;b!==null;){if(Er(b)){y=b;break}b=b.return}if(y==null)throw Error(r(160));switch(y.tag){case 27:var R=y.stateNode,D=Nn(l);ha(l,D,R);break;case 5:var H=y.stateNode;y.flags&32&&(ri(H,""),y.flags&=-33);var Q=Nn(l);ha(l,Q,H);break;case 3:case 4:var oe=y.stateNode.containerInfo,Se=Nn(l);Io(l,Se,oe);break;default:throw Error(r(161))}}catch(ze){Hn(l,l.return,ze)}l.flags&=-3}f&4096&&(l.flags&=-4097)}function Nm(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var f=l;Nm(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),l=l.sibling}}function Is(l,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)Ar(l,f.alternate,f),f=f.sibling}function Po(l){for(l=l.child;l!==null;){var f=l;switch(f.tag){case 0:case 11:case 14:case 15:ji(4,f,f.return),Po(f);break;case 1:Di(f,f.return);var y=f.stateNode;typeof y.componentWillUnmount=="function"&&Ei(f,f.return,y),Po(f);break;case 27:iy(f.stateNode);case 26:case 5:Di(f,f.return),Po(f);break;case 22:f.memoizedState===null&&Po(f);break;case 30:Po(f);break;default:Po(f)}l=l.sibling}}function pa(l,f,y){for(y=y&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var b=f.alternate,R=l,D=f,H=D.flags;switch(D.tag){case 0:case 11:case 15:pa(R,D,y),Ms(4,D);break;case 1:if(pa(R,D,y),b=D,R=b.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(Se){Hn(b,b.return,Se)}if(b=D,R=b.updateQueue,R!==null){var Q=b.stateNode;try{var oe=R.shared.hiddenCallbacks;if(oe!==null)for(R.shared.hiddenCallbacks=null,R=0;R<oe.length;R++)kd(oe[R],Q)}catch(Se){Hn(b,b.return,Se)}}y&&H&64&&Ys(D),bl(D,D.return);break;case 27:km(D);case 26:case 5:pa(R,D,y),y&&b===null&&H&4&&uh(D),bl(D,D.return);break;case 12:pa(R,D,y);break;case 31:pa(R,D,y),y&&H&4&&hc(R,D);break;case 13:pa(R,D,y),y&&H&4&&Pd(R,D);break;case 22:D.memoizedState===null&&pa(R,D,y),bl(D,D.return);break;case 30:break;default:pa(R,D,y)}f=f.sibling}}function mc(l,f){var y=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),l=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(l=f.memoizedState.cachePool.pool),l!==y&&(l!=null&&l.refCount++,y!=null&&nu(y))}function gu(l,f){l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&nu(l))}function Li(l,f,y,b){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)Q0(l,f,y,b),f=f.sibling}function Q0(l,f,y,b){var R=f.flags;switch(f.tag){case 0:case 11:case 15:Li(l,f,y,b),R&2048&&Ms(9,f);break;case 1:Li(l,f,y,b);break;case 3:Li(l,f,y,b),R&2048&&(l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&nu(l)));break;case 12:if(R&2048){Li(l,f,y,b),l=f.stateNode;try{var D=f.memoizedProps,H=D.id,Q=D.onPostCommit;typeof Q=="function"&&Q(H,f.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(oe){Hn(f,f.return,oe)}}else Li(l,f,y,b);break;case 31:Li(l,f,y,b);break;case 13:Li(l,f,y,b);break;case 23:break;case 22:D=f.stateNode,H=f.alternate,f.memoizedState!==null?D._visibility&2?Li(l,f,y,b):Oo(l,f):D._visibility&2?Li(l,f,y,b):(D._visibility|=2,Ui(l,f,y,b,(f.subtreeFlags&10256)!==0||!1)),R&2048&&mc(H,f);break;case 24:Li(l,f,y,b),R&2048&&gu(f.alternate,f);break;default:Li(l,f,y,b)}}function Ui(l,f,y,b,R){for(R=R&&((f.subtreeFlags&10256)!==0||!1),f=f.child;f!==null;){var D=l,H=f,Q=y,oe=b,Se=H.flags;switch(H.tag){case 0:case 11:case 15:Ui(D,H,Q,oe,R),Ms(8,H);break;case 23:break;case 22:var ze=H.stateNode;H.memoizedState!==null?ze._visibility&2?Ui(D,H,Q,oe,R):Oo(D,H):(ze._visibility|=2,Ui(D,H,Q,oe,R)),R&&Se&2048&&mc(H.alternate,H);break;case 24:Ui(D,H,Q,oe,R),R&&Se&2048&&gu(H.alternate,H);break;default:Ui(D,H,Q,oe,R)}f=f.sibling}}function Oo(l,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var y=l,b=f,R=b.flags;switch(b.tag){case 22:Oo(y,b),R&2048&&mc(b.alternate,b);break;case 24:Oo(y,b),R&2048&&gu(b.alternate,b);break;default:Oo(y,b)}f=f.sibling}}var vu=8192;function ns(l,f,y){if(l.subtreeFlags&vu)for(l=l.child;l!==null;)Cm(l,f,y),l=l.sibling}function Cm(l,f,y){switch(l.tag){case 26:ns(l,f,y),l.flags&vu&&l.memoizedState!==null&&DX(y,Rs,l.memoizedState,l.memoizedProps);break;case 5:ns(l,f,y);break;case 3:case 4:var b=Rs;Rs=vw(l.stateNode.containerInfo),ns(l,f,y),Rs=b;break;case 22:l.memoizedState===null&&(b=l.alternate,b!==null&&b.memoizedState!==null?(b=vu,vu=16777216,ns(l,f,y),vu=b):ns(l,f,y));break;default:ns(l,f,y)}}function yu(l){var f=l.alternate;if(f!==null&&(l=f.child,l!==null)){f.child=null;do f=l.sibling,l.sibling=null,l=f;while(l!==null)}}function gc(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var b=f[y];Ai=b,Vr(b,l)}yu(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Ia(l),l=l.sibling}function Ia(l){switch(l.tag){case 0:case 11:case 15:gc(l),l.flags&2048&&ji(9,l,l.return);break;case 3:gc(l);break;case 12:gc(l);break;case 22:var f=l.stateNode;l.memoizedState!==null&&f._visibility&2&&(l.return===null||l.return.tag!==13)?(f._visibility&=-3,Pa(l)):gc(l);break;default:gc(l)}}function Pa(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var b=f[y];Ai=b,Vr(b,l)}yu(l)}for(l=l.child;l!==null;){switch(f=l,f.tag){case 0:case 11:case 15:ji(8,f,f.return),Pa(f);break;case 22:y=f.stateNode,y._visibility&2&&(y._visibility&=-3,Pa(f));break;default:Pa(f)}l=l.sibling}}function Vr(l,f){for(;Ai!==null;){var y=Ai;switch(y.tag){case 0:case 11:case 15:ji(8,y,f);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var b=y.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:nu(y.memoizedState.cache)}if(b=y.child,b!==null)b.return=y,Ai=b;else e:for(y=l;Ai!==null;){b=Ai;var R=b.sibling,D=b.return;if(dh(b),b===y){Ai=null;break e}if(R!==null){R.return=D,Ai=R;break e}Ai=D}}}var wl={getCacheForType:function(l){var f=Yt(ii),y=f.data.get(l);return y===void 0&&(y=l(),f.data.set(l,y)),y},cacheSignal:function(){return Yt(ii).controller.signal}},dn=typeof WeakMap=="function"?WeakMap:Map,Ut=0,nn=null,yn=null,mn=0,jn=0,Zi=null,Ps=!1,Zs=!1,ey=!1,rs=0,jr=0,jo=0,vc=0,fh=0,ma=0,yr=0,xu=null,Hr=null,Gr=!1,Od=0,ty=0,Xr=1/0,Dr=null,Yr=null,er=0,is=null,jd=null,Os=0,Dd=0,Ld=null,hh=null,yc=0,bu=null;function as(){return(Ut&2)!==0&&mn!==0?mn&-mn:K.T!==null?Re():$c()}function An(){if(ma===0)if((mn&536870912)===0||Rn){var l=rt;rt<<=1,(rt&3932160)===0&&(rt=262144),ma=l}else ma=536870912;return l=Ma.current,l!==null&&(l.flags|=32),ma}function xn(l,f,y){(l===nn&&(jn===2||jn===9)||l.cancelPendingCommit!==null)&&(bc(l,0),si(l,mn,ma,!1)),Pi(l,y),((Ut&2)===0||l!==nn)&&(l===nn&&((Ut&2)===0&&(vc|=y),jr===4&&si(l,mn,ma,!1)),tt(l))}function kn(l,f,y){if((Ut&6)!==0)throw Error(r(327));var b=!y&&(f&127)===0&&(f&l.expiredLanes)===0||ct(l,f),R=b?ph(l,f):ga(l,f,!0),D=b;do{if(R===0){Zs&&!b&&si(l,f,0,!1);break}else{if(y=l.current.alternate,D&&!tr(y)){R=ga(l,f,!1),D=!1;continue}if(R===2){if(D=f,l.errorRecoveryDisabledLanes&D)var H=0;else H=l.pendingLanes&-536870913,H=H!==0?H:H&536870912?536870912:0;if(H!==0){f=H;e:{var Q=l;R=xu;var oe=Q.current.memoizedState.isDehydrated;if(oe&&(bc(Q,H).flags|=256),H=ga(Q,H,!1),H!==2){if(ey&&!oe){Q.errorRecoveryDisabledLanes|=D,vc|=D,R=4;break e}D=Hr,Hr=R,D!==null&&(Hr===null?Hr=D:Hr.push.apply(Hr,D))}R=H}if(D=!1,R!==2)continue}}if(R===1){bc(l,0),si(l,f,0,!0);break}e:{switch(b=l,D=R,D){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:si(b,f,ma,!Ps);break e;case 2:Hr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(R=Od+300-q(),10<R)){if(si(b,f,ma,!Ps),He(b,0,!0)!==0)break e;Os=f,b.timeoutHandle=JD(Cn.bind(null,b,y,Hr,Dr,Gr,f,ma,vc,yr,Ps,D,"Throttled",-0,0),R);break e}Cn(b,y,Hr,Dr,Gr,f,ma,vc,yr,Ps,D,null,-0,0)}}break}while(!0);tt(l)}function Cn(l,f,y,b,R,D,H,Q,oe,Se,ze,$e,Ne,De){if(l.timeoutHandle=-1,$e=f.subtreeFlags,$e&8192||($e&16785408)===16785408){$e={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ll},Cm(f,D,$e);var Dt=(D&62914560)===D?Od-q():(D&4194048)===D?ty-q():0;if(Dt=LX($e,Dt),Dt!==null){Os=D,l.cancelPendingCommit=Dt(Tl.bind(null,l,f,D,y,b,R,H,Q,oe,ze,$e,null,Ne,De)),si(l,D,H,!Se);return}}Tl(l,f,D,y,b,R,H,Q,oe)}function tr(l){for(var f=l;;){var y=f.tag;if((y===0||y===11||y===15)&&f.flags&16384&&(y=f.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var b=0;b<y.length;b++){var R=y[b],D=R.getSnapshot;R=R.value;try{if(!ca(D(),R))return!1}catch{return!1}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function si(l,f,y,b){f&=~fh,f&=~vc,l.suspendedLanes|=f,l.pingedLanes&=~f,b&&(l.warmLanes|=f),b=l.expirationTimes;for(var R=f;0<R;){var D=31-_t(R),H=1<<D;b[D]=-1,R&=~H}y!==0&&ql(l,y,f)}function Qs(){return(Ut&6)===0?(Et(0),!1):!0}function xc(){if(yn!==null){if(jn===0)var l=yn.return;else l=yn,Eo=ac=null,T0(l),ou=null,lu=0,l=yn;for(;l!==null;)ts(l.alternate,l),l=l.return;yn=null}}function bc(l,f){var y=l.timeoutHandle;y!==-1&&(l.timeoutHandle=-1,xX(y)),y=l.cancelPendingCommit,y!==null&&(l.cancelPendingCommit=null,y()),Os=0,xc(),nn=l,yn=y=Ea(l.current,null),mn=f,jn=0,Zi=null,Ps=!1,Zs=ct(l,f),ey=!1,yr=ma=fh=vc=jo=jr=0,Hr=xu=null,Gr=!1,(f&8)!==0&&(f|=f&32);var b=l.entangledLanes;if(b!==0)for(l=l.entanglements,b&=f;0<b;){var R=31-_t(b),D=1<<R;f|=l[R],b&=~D}return rs=f,Wf(),y}function Do(l,f){un=null,K.H=Rd,f===ru||f===vn?(f=au(),jn=3):f===Jf?(f=au(),jn=4):jn=f===ym?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Zi=f,yn===null&&(jr=1,vm(l,Ja(f,l.current)))}function Lr(){var l=Ma.current;return l===null?!0:(mn&4194048)===mn?fa===null:(mn&62914560)===mn||(mn&536870912)!==0?l===fa:!1}function Sl(){var l=K.H;return K.H=Rd,l===null?Rd:l}function _c(){var l=K.A;return K.A=wl,l}function Ud(){jr=4,Ps||(mn&4194048)!==mn&&Ma.current!==null||(Zs=!0),(jo&134217727)===0&&(vc&134217727)===0||nn===null||si(nn,mn,ma,!1)}function ga(l,f,y){var b=Ut;Ut|=2;var R=Sl(),D=_c();(nn!==l||mn!==f)&&(Dr=null,bc(l,f)),f=!1;var H=jr;e:do try{if(jn!==0&&yn!==null){var Q=yn,oe=Zi;switch(jn){case 8:xc(),H=6;break e;case 3:case 2:case 9:case 6:Ma.current===null&&(f=!0);var Se=jn;if(jn=0,Zi=null,_u(l,Q,oe,Se),y&&Zs){H=0;break e}break;default:Se=jn,jn=0,Zi=null,_u(l,Q,oe,Se)}}zd(),H=jr;break}catch(ze){Do(l,ze)}while(!0);return f&&l.shellSuspendCounter++,Eo=ac=null,Ut=b,K.H=R,K.A=D,yn===null&&(nn=null,mn=0,Wf()),H}function zd(){for(;yn!==null;)Rm(yn)}function ph(l,f){var y=Ut;Ut|=2;var b=Sl(),R=_c();nn!==l||mn!==f?(Dr=null,Xr=q()+500,bc(l,f)):Zs=ct(l,f);e:do try{if(jn!==0&&yn!==null){f=yn;var D=Zi;t:switch(jn){case 1:jn=0,Zi=null,_u(l,f,D,1);break;case 2:case 9:if(ka(D)){jn=0,Zi=null,mh(f);break}f=function(){jn!==2&&jn!==9||nn!==l||(jn=7),tt(l)},D.then(f,f);break e;case 3:jn=7;break e;case 4:jn=5;break e;case 7:ka(D)?(jn=0,Zi=null,mh(f)):(jn=0,Zi=null,_u(l,f,D,7));break;case 5:var H=null;switch(yn.tag){case 26:H=yn.memoizedState;case 5:case 27:var Q=yn;if(H?f2(H):Q.stateNode.complete){jn=0,Zi=null;var oe=Q.sibling;if(oe!==null)yn=oe;else{var Se=Q.return;Se!==null?(yn=Se,wc(Se)):yn=null}break t}}jn=0,Zi=null,_u(l,f,D,5);break;case 6:jn=0,Zi=null,_u(l,f,D,6);break;case 8:xc(),jr=6;break e;default:throw Error(r(462))}}Oa();break}catch(ze){Do(l,ze)}while(!0);return Eo=ac=null,K.H=b,K.A=R,Ut=y,yn!==null?0:(nn=null,mn=0,Wf(),jr)}function Oa(){for(;yn!==null&&!et();)Rm(yn)}function Rm(l){var f=Am(l.alternate,l,rs);l.memoizedProps=l.pendingProps,f===null?wc(l):yn=f}function mh(l){var f=l,y=f.alternate;switch(f.tag){case 15:case 0:f=sh(y,f,f.pendingProps,f.type,void 0,mn);break;case 11:f=sh(y,f,f.pendingProps,f.type.render,f.ref,mn);break;case 5:T0(f);default:ts(y,f),f=yn=vd(f,rs),f=Am(y,f,rs)}l.memoizedProps=l.pendingProps,f===null?wc(l):yn=f}function _u(l,f,y,b){Eo=ac=null,T0(f),ou=null,lu=0;var R=f.return;try{if(mi(l,R,f,y,mn)){jr=1,vm(l,Ja(y,l.current)),yn=null;return}}catch(D){if(R!==null)throw yn=R,D;jr=1,vm(l,Ja(y,l.current)),yn=null;return}f.flags&32768?(Rn||b===1?l=!0:Zs||(mn&536870912)!==0?l=!1:(Ps=l=!0,(b===2||b===9||b===3||b===6)&&(b=Ma.current,b!==null&&b.tag===13&&(b.flags|=16384))),gh(f,l)):wc(f)}function wc(l){var f=l;do{if((f.flags&32768)!==0){gh(f,Ps);return}l=f.return;var y=ch(f.alternate,f,rs);if(y!==null){yn=y;return}if(f=f.sibling,f!==null){yn=f;return}yn=f=l}while(f!==null);jr===0&&(jr=5)}function gh(l,f){do{var y=ks(l.alternate,l);if(y!==null){y.flags&=32767,yn=y;return}if(y=l.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!f&&(l=l.sibling,l!==null)){yn=l;return}yn=l=y}while(l!==null);jr=6,yn=null}function Tl(l,f,y,b,R,D,H,Q,oe){l.cancelPendingCommit=null;do Bd();while(er!==0);if((Ut&6)!==0)throw Error(r(327));if(f!==null){if(f===l.current)throw Error(r(177));if(D=f.lanes|f.childLanes,D|=wi,Ta(l,y,D,H,Q,oe),l===nn&&(yn=nn=null,mn=0),jd=f,is=l,Os=y,Dd=D,Ld=R,hh=b,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,U(je,function(){return Im(),null})):(l.callbackNode=null,l.callbackPriority=0),b=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||b){b=K.T,K.T=null,R=X.p,X.p=2,H=Ut,Ut|=4;try{sk(l,f,y)}finally{Ut=H,X.p=R,K.T=b}}er=1,oi(),El(),wu()}}function oi(){if(er===1){er=0;var l=is,f=jd,y=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||y){y=K.T,K.T=null;var b=X.p;X.p=2;var R=Ut;Ut|=4;try{pc(f,l);var D=hk,H=m_(l.containerInfo),Q=D.focusedElem,oe=D.selectionRange;if(H!==Q&&Q&&Q.ownerDocument&&ur(Q.ownerDocument.documentElement,Q)){if(oe!==null&&s0(Q)){var Se=oe.start,ze=oe.end;if(ze===void 0&&(ze=Se),"selectionStart"in Q)Q.selectionStart=Se,Q.selectionEnd=Math.min(ze,Q.value.length);else{var $e=Q.ownerDocument||document,Ne=$e&&$e.defaultView||window;if(Ne.getSelection){var De=Ne.getSelection(),Dt=Q.textContent.length,Xt=Math.min(oe.start,Dt),pr=oe.end===void 0?Xt:Math.min(oe.end,Dt);!De.extend&&Xt>pr&&(H=pr,pr=Xt,Xt=H);var ye=pd(Q,Xt),fe=pd(Q,pr);if(ye&&fe&&(De.rangeCount!==1||De.anchorNode!==ye.node||De.anchorOffset!==ye.offset||De.focusNode!==fe.node||De.focusOffset!==fe.offset)){var we=$e.createRange();we.setStart(ye.node,ye.offset),De.removeAllRanges(),Xt>pr?(De.addRange(we),De.extend(fe.node,fe.offset)):(we.setEnd(fe.node,fe.offset),De.addRange(we))}}}}for($e=[],De=Q;De=De.parentNode;)De.nodeType===1&&$e.push({element:De,left:De.scrollLeft,top:De.scrollTop});for(typeof Q.focus=="function"&&Q.focus(),Q=0;Q<$e.length;Q++){var Ve=$e[Q];Ve.element.scrollLeft=Ve.left,Ve.element.scrollTop=Ve.top}}Sw=!!fk,hk=fk=null}finally{Ut=R,X.p=b,K.T=y}}l.current=f,er=2}}function El(){if(er===2){er=0;var l=is,f=jd,y=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||y){y=K.T,K.T=null;var b=X.p;X.p=2;var R=Ut;Ut|=4;try{Ar(l,f.alternate,f)}finally{Ut=R,X.p=b,K.T=y}}er=3}}function wu(){if(er===4||er===3){er=0,ne();var l=is,f=jd,y=Os,b=hh;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?er=5:(er=0,jd=is=null,Lo(l,l.pendingLanes));var R=l.pendingLanes;if(R===0&&(Yr=null),il(y),f=f.stateNode,it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(Je,f,void 0,(f.current.flags&128)===128)}catch{}if(b!==null){f=K.T,R=X.p,X.p=2,K.T=null;try{for(var D=l.onRecoverableError,H=0;H<b.length;H++){var Q=b[H];D(Q.value,{componentStack:Q.stack})}}finally{K.T=f,X.p=R}}(Os&3)!==0&&Bd(),tt(l),R=l.pendingLanes,(y&261930)!==0&&(R&42)!==0?l===bu?yc++:(yc=0,bu=l):yc=0,Et(0)}}function Lo(l,f){(l.pooledCacheLanes&=f)===0&&(f=l.pooledCache,f!=null&&(l.pooledCache=null,nu(f)))}function Bd(){return oi(),El(),wu(),Im()}function Im(){if(er!==5)return!1;var l=is,f=Dd;Dd=0;var y=il(Os),b=K.T,R=X.p;try{X.p=32>y?32:y,K.T=null,y=Ld,Ld=null;var D=is,H=Os;if(er=0,jd=is=null,Os=0,(Ut&6)!==0)throw Error(r(331));var Q=Ut;if(Ut|=4,Ia(D.current),Q0(D,D.current,H,y),Ut=Q,Et(0,!1),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(Je,D)}catch{}return!0}finally{X.p=R,K.T=b,Lo(l,f)}}function ny(l,f,y){f=Ja(y,f),f=$0(l.stateNode,f,2),l=lc(l,f,2),l!==null&&(Pi(l,2),tt(l))}function Hn(l,f,y){if(l.tag===3)ny(l,l,y);else for(;f!==null;){if(f.tag===3){ny(f,l,y);break}else if(f.tag===1){var b=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Yr===null||!Yr.has(b))){l=Ja(y,l),y=W0(2),b=lc(f,y,2),b!==null&&(lw(y,b,f,l),Pi(b,2),tt(b));break}}f=f.return}}function vh(l,f,y){var b=l.pingCache;if(b===null){b=l.pingCache=new dn;var R=new Set;b.set(f,R)}else R=b.get(f),R===void 0&&(R=new Set,b.set(f,R));R.has(y)||(ey=!0,R.add(y),l=p.bind(null,l,f,y),f.then(l,l))}function p(l,f,y){var b=l.pingCache;b!==null&&b.delete(f),l.pingedLanes|=l.suspendedLanes&y,l.warmLanes&=~y,nn===l&&(mn&y)===y&&(jr===4||jr===3&&(mn&62914560)===mn&&300>q()-Od?(Ut&2)===0&&bc(l,0):fh|=y,yr===mn&&(yr=0)),tt(l)}function g(l,f){f===0&&(f=On()),l=ua(l,f),l!==null&&(Pi(l,f),tt(l))}function S(l){var f=l.memoizedState,y=0;f!==null&&(y=f.retryLane),g(l,y)}function M(l,f){var y=0;switch(l.tag){case 31:case 13:var b=l.stateNode,R=l.memoizedState;R!==null&&(y=R.retryLane);break;case 19:b=l.stateNode;break;case 22:b=l.stateNode._retryCache;break;default:throw Error(r(314))}b!==null&&b.delete(f),g(l,y)}function U(l,f){return ft(l,f)}var B=null,Y=null,le=!1,Pe=!1,Ke=!1,ut=0;function tt(l){l!==Y&&l.next===null&&(Y===null?B=Y=l:Y=Y.next=l),Pe=!0,le||(le=!0,be())}function Et(l,f){if(!Ke&&Pe){Ke=!0;do for(var y=!1,b=B;b!==null;){if(l!==0){var R=b.pendingLanes;if(R===0)var D=0;else{var H=b.suspendedLanes,Q=b.pingedLanes;D=(1<<31-_t(42|l)+1)-1,D&=R&~(H&~Q),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(y=!0,Ae(b,D))}else D=mn,D=He(b,b===nn?D:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(D&3)===0||ct(b,D)||(y=!0,Ae(b,D));b=b.next}while(y);Ke=!1}}function ln(){Jr()}function Jr(){Pe=le=!1;var l=0;ut!==0&&yX()&&(l=ut);for(var f=q(),y=null,b=B;b!==null;){var R=b.next,D=Fd(b,f);D===0?(b.next=null,y===null?B=R:y.next=R,R===null&&(Y=y)):(y=b,(l!==0||(D&3)!==0)&&(Pe=!0)),b=R}er!==0&&er!==5||Et(l),ut!==0&&(ut=0)}function Fd(l,f){for(var y=l.suspendedLanes,b=l.pingedLanes,R=l.expirationTimes,D=l.pendingLanes&-62914561;0<D;){var H=31-_t(D),Q=1<<H,oe=R[H];oe===-1?((Q&y)===0||(Q&b)!==0)&&(R[H]=en(Q,f)):oe<=f&&(l.expiredLanes|=Q),D&=~Q}if(f=nn,y=mn,y=He(l,l===f?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b=l.callbackNode,y===0||l===f&&(jn===2||jn===9)||l.cancelPendingCommit!==null)return b!==null&&b!==null&&Ct(b),l.callbackNode=null,l.callbackPriority=0;if((y&3)===0||ct(l,y)){if(f=y&-y,f===l.callbackPriority)return f;switch(b!==null&&Ct(b),il(y)){case 2:case 8:y=Ge;break;case 32:y=je;break;case 268435456:y=ot;break;default:y=je}return b=Sc.bind(null,l),y=ft(y,b),l.callbackPriority=f,l.callbackNode=y,f}return b!==null&&b!==null&&Ct(b),l.callbackPriority=2,l.callbackNode=null,2}function Sc(l,f){if(er!==0&&er!==5)return l.callbackNode=null,l.callbackPriority=0,null;var y=l.callbackNode;if(Bd()&&l.callbackNode!==y)return null;var b=mn;return b=He(l,l===nn?b:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b===0?null:(kn(l,b,f),Fd(l,q()),l.callbackNode!=null&&l.callbackNode===y?Sc.bind(null,l):null)}function Ae(l,f){if(Bd())return null;kn(l,f,!0)}function be(){bX(function(){(Ut&6)!==0?ft(Oe,ln):Jr()})}function Re(){if(ut===0){var l=pl;l===0&&(l=mt,mt<<=1,(mt&261888)===0&&(mt=256)),ut=l}return ut}function st(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Pf(""+l)}function qt(l,f){var y=f.ownerDocument.createElement("input");return y.name=f.name,y.value=f.value,l.id&&y.setAttribute("form",l.id),f.parentNode.insertBefore(y,f),l=new FormData(l),y.parentNode.removeChild(y),l}function Ur(l,f,y,b,R){if(f==="submit"&&y&&y.stateNode===R){var D=st((R[fi]||null).action),H=b.submitter;H&&(f=(f=H[fi]||null)?st(f.formAction):H.getAttribute("formAction"),f!==null&&(D=f,H=null));var Q=new Df("action","action",null,b,R);l.push({event:Q,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(ut!==0){var oe=H?qt(R,H):new FormData(R);U0(y,{pending:!0,data:oe,method:R.method,action:D},null,oe)}}else typeof D=="function"&&(Q.preventDefault(),oe=H?qt(R,H):new FormData(R),U0(y,{pending:!0,data:oe,method:R.method,action:D},D,oe))},currentTarget:R}]})}}for(var Wt=0;Wt<qf.length;Wt++){var zn=qf[Wt],ki=zn.toLowerCase(),Gn=zn[0].toUpperCase()+zn.slice(1);bs(ki,"on"+Gn)}bs(qp,"onAnimationEnd"),bs(Gf,"onAnimationIteration"),bs(l0,"onAnimationStart"),bs("dblclick","onDoubleClick"),bs("focusin","onFocus"),bs("focusout","onBlur"),bs(v_,"onTransitionRun"),bs(ZA,"onTransitionStart"),bs(y_,"onTransitionCancel"),bs(c0,"onTransitionEnd"),xe("onMouseEnter",["mouseout","mouseover"]),xe("onMouseLeave",["mouseout","mouseover"]),xe("onPointerEnter",["pointerout","pointerover"]),xe("onPointerLeave",["pointerout","pointerover"]),Ee("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ee("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ee("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ee("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ee("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ee("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var js="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ok=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(js));function HD(l,f){f=(f&4)!==0;for(var y=0;y<l.length;y++){var b=l[y],R=b.event;b=b.listeners;e:{var D=void 0;if(f)for(var H=b.length-1;0<=H;H--){var Q=b[H],oe=Q.instance,Se=Q.currentTarget;if(Q=Q.listener,oe!==D&&R.isPropagationStopped())break e;D=Q,R.currentTarget=Se;try{D(R)}catch(ze){$f(ze)}R.currentTarget=null,D=oe}else for(H=0;H<b.length;H++){if(Q=b[H],oe=Q.instance,Se=Q.currentTarget,Q=Q.listener,oe!==D&&R.isPropagationStopped())break e;D=Q,R.currentTarget=Se;try{D(R)}catch(ze){$f(ze)}R.currentTarget=null,D=oe}}}}function Dn(l,f){var y=f[Ka];y===void 0&&(y=f[Ka]=new Set);var b=l+"__bubble";y.has(b)||(GD(f,l,2,!1),y.add(b))}function lk(l,f,y){var b=0;f&&(b|=4),GD(y,l,b,f)}var pw="_reactListening"+Math.random().toString(36).slice(2);function ck(l){if(!l[pw]){l[pw]=!0,ge.forEach(function(y){y!=="selectionchange"&&(ok.has(y)||lk(y,!1,l),lk(y,!0,l))});var f=l.nodeType===9?l:l.ownerDocument;f===null||f[pw]||(f[pw]=!0,lk("selectionchange",!1,f))}}function GD(l,f,y,b){switch(x2(f)){case 2:var R=BX;break;case 8:R=FX;break;default:R=Tk}y=R.bind(null,f,y,l),R=void 0,!Gv||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(R=!0),b?R!==void 0?l.addEventListener(f,y,{capture:!0,passive:R}):l.addEventListener(f,y,!0):R!==void 0?l.addEventListener(f,y,{passive:R}):l.addEventListener(f,y,!1)}function uk(l,f,y,b,R){var D=b;if((f&1)===0&&(f&2)===0&&b!==null)e:for(;;){if(b===null)return;var H=b.tag;if(H===3||H===4){var Q=b.stateNode.containerInfo;if(Q===R)break;if(H===4)for(H=b.return;H!==null;){var oe=H.tag;if((oe===3||oe===4)&&H.stateNode.containerInfo===R)return;H=H.return}for(;Q!==null;){if(H=sl(Q),H===null)return;if(oe=H.tag,oe===5||oe===6||oe===26||oe===27){b=D=H;continue e}Q=Q.parentNode}}b=b.return}Hv(function(){var Se=D,ze=Ip(y),$e=[];e:{var Ne=xs.get(l);if(Ne!==void 0){var De=Df,Dt=l;switch(l){case"keypress":if(jf(y)===0)break e;case"keydown":case"keyup":De=Jc;break;case"focusin":Dt="focus",De=Dp;break;case"focusout":Dt="blur",De=Dp;break;case"beforeblur":case"afterblur":De=Dp;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=qv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=Jb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=r_;break;case qp:case Gf:case l0:De=XA;break;case c0:De=JA;break;case"scroll":case"scrollend":De=Xb;break;case"wheel":De=a_;break;case"copy":case"cut":case"paste":De=Qb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=Kv;break;case"toggle":case"beforetoggle":De=o_}var Xt=(f&4)!==0,pr=!Xt&&(l==="scroll"||l==="scrollend"),ye=Xt?Ne!==null?Ne+"Capture":null:Ne;Xt=[];for(var fe=Se,we;fe!==null;){var Ve=fe;if(we=Ve.stateNode,Ve=Ve.tag,Ve!==5&&Ve!==26&&Ve!==27||we===null||ye===null||(Ve=ad(fe,ye),Ve!=null&&Xt.push(ry(fe,Ve,we))),pr)break;fe=fe.return}0<Xt.length&&(Ne=new De(Ne,Dt,null,y,ze),$e.push({event:Ne,listeners:Xt}))}}if((f&7)===0){e:{if(Ne=l==="mouseover"||l==="pointerover",De=l==="mouseout"||l==="pointerout",Ne&&y!==Rp&&(Dt=y.relatedTarget||y.fromElement)&&(sl(Dt)||Dt[Wa]))break e;if((De||Ne)&&(Ne=ze.window===ze?ze:(Ne=ze.ownerDocument)?Ne.defaultView||Ne.parentWindow:window,De?(Dt=y.relatedTarget||y.toElement,De=Se,Dt=Dt?sl(Dt):null,Dt!==null&&(pr=a(Dt),Xt=Dt.tag,Dt!==pr||Xt!==5&&Xt!==27&&Xt!==6)&&(Dt=null)):(De=null,Dt=Se),De!==Dt)){if(Xt=qv,Ve="onMouseLeave",ye="onMouseEnter",fe="mouse",(l==="pointerout"||l==="pointerover")&&(Xt=Kv,Ve="onPointerLeave",ye="onPointerEnter",fe="pointer"),pr=De==null?Ne:Xl(De),we=Dt==null?Ne:Xl(Dt),Ne=new Xt(Ve,fe+"leave",De,y,ze),Ne.target=pr,Ne.relatedTarget=we,Ve=null,sl(ze)===Se&&(Xt=new Xt(ye,fe+"enter",Dt,y,ze),Xt.target=we,Xt.relatedTarget=pr,Ve=Xt),pr=Ve,De&&Dt)t:{for(Xt=hX,ye=De,fe=Dt,we=0,Ve=ye;Ve;Ve=Xt(Ve))we++;Ve=0;for(var Gt=fe;Gt;Gt=Xt(Gt))Ve++;for(;0<we-Ve;)ye=Xt(ye),we--;for(;0<Ve-we;)fe=Xt(fe),Ve--;for(;we--;){if(ye===fe||fe!==null&&ye===fe.alternate){Xt=ye;break t}ye=Xt(ye),fe=Xt(fe)}Xt=null}else Xt=null;De!==null&&qD($e,Ne,De,Xt,!1),Dt!==null&&pr!==null&&qD($e,pr,Dt,Xt,!0)}}e:{if(Ne=Se?Xl(Se):window,De=Ne.nodeName&&Ne.nodeName.toLowerCase(),De==="select"||De==="input"&&Ne.type==="file")var Kn=t0;else if(e0(Ne))if(vo)Kn=p_;else{Kn=i0;var Lt=f_}else De=Ne.nodeName,!De||De.toLowerCase()!=="input"||Ne.type!=="checkbox"&&Ne.type!=="radio"?Se&&vs(Se.elementType)&&(Kn=t0):Kn=h_;if(Kn&&(Kn=Kn(l,Se))){Hp($e,Kn,y,ze);break e}Lt&&Lt(l,Ne,Se),l==="focusout"&&Se&&Ne.type==="number"&&Se.memoizedProps.value!=null&&vr(Ne,"number",Ne.value)}switch(Lt=Se?Xl(Se):window,l){case"focusin":(e0(Lt)||Lt.contentEditable==="true")&&(yo=Lt,xo=Se,md=null);break;case"focusout":md=xo=yo=null;break;case"mousedown":Gp=!0;break;case"contextmenu":case"mouseup":case"dragend":Gp=!1,gd($e,y,ze);break;case"selectionchange":if(g_)break;case"keydown":case"keyup":gd($e,y,ze)}var _n;if(Zc)e:{switch(l){case"compositionstart":var Bn="onCompositionStart";break e;case"compositionend":Bn="onCompositionEnd";break e;case"compositionupdate":Bn="onCompositionUpdate";break e}Bn=void 0}else Qc?Vp(l,y)&&(Bn="onCompositionEnd"):l==="keydown"&&y.keyCode===229&&(Bn="onCompositionStart");Bn&&(Yv&&y.locale!=="ko"&&(Qc||Bn!=="onCompositionStart"?Bn==="onCompositionEnd"&&Qc&&(_n=Of()):(Ya=ze,Op="value"in Ya?Ya.value:Ya.textContent,Qc=!0)),Lt=mw(Se,Bn),0<Lt.length&&(Bn=new Lp(Bn,l,null,y,ze),$e.push({event:Bn,listeners:Lt}),_n?Bn.data=_n:(_n=Jv(y),_n!==null&&(Bn.data=_n)))),(_n=Fp?u_(l,y):Zv(l,y))&&(Bn=mw(Se,"onBeforeInput"),0<Bn.length&&(Lt=new Lp("onBeforeInput","beforeinput",null,y,ze),$e.push({event:Lt,listeners:Bn}),Lt.data=_n)),Ur($e,l,Se,y,ze)}HD($e,f)})}function ry(l,f,y){return{instance:l,listener:f,currentTarget:y}}function mw(l,f){for(var y=f+"Capture",b=[];l!==null;){var R=l,D=R.stateNode;if(R=R.tag,R!==5&&R!==26&&R!==27||D===null||(R=ad(l,y),R!=null&&b.unshift(ry(l,R,D)),R=ad(l,f),R!=null&&b.push(ry(l,R,D))),l.tag===3)return b;l=l.return}return[]}function hX(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function qD(l,f,y,b,R){for(var D=f._reactName,H=[];y!==null&&y!==b;){var Q=y,oe=Q.alternate,Se=Q.stateNode;if(Q=Q.tag,oe!==null&&oe===b)break;Q!==5&&Q!==26&&Q!==27||Se===null||(oe=Se,R?(Se=ad(y,D),Se!=null&&H.unshift(ry(y,Se,oe))):R||(Se=ad(y,D),Se!=null&&H.push(ry(y,Se,oe)))),y=y.return}H.length!==0&&l.push({event:f,listeners:H})}var pX=/\r\n?/g,mX=/\u0000|\uFFFD/g;function $D(l){return(typeof l=="string"?l:""+l).replace(pX,`
`).replace(mX,"")}function WD(l,f){return f=$D(f),$D(l)===f}function hr(l,f,y,b,R,D){switch(y){case"children":typeof b=="string"?f==="body"||f==="textarea"&&b===""||ri(l,b):(typeof b=="number"||typeof b=="bigint")&&f!=="body"&&ri(l,""+b);break;case"className":Ft(l,"class",b);break;case"tabIndex":Ft(l,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":Ft(l,y,b);break;case"style":Kc(l,b,D);break;case"data":if(f!=="object"){Ft(l,"data",b);break}case"src":case"href":if(b===""&&(f!=="a"||y!=="href")){l.removeAttribute(y);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(y);break}b=Pf(""+b),l.setAttribute(y,b);break;case"action":case"formAction":if(typeof b=="function"){l.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(y==="formAction"?(f!=="input"&&hr(l,f,"name",R.name,R,null),hr(l,f,"formEncType",R.formEncType,R,null),hr(l,f,"formMethod",R.formMethod,R,null),hr(l,f,"formTarget",R.formTarget,R,null)):(hr(l,f,"encType",R.encType,R,null),hr(l,f,"method",R.method,R,null),hr(l,f,"target",R.target,R,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(y);break}b=Pf(""+b),l.setAttribute(y,b);break;case"onClick":b!=null&&(l.onclick=ll);break;case"onScroll":b!=null&&Dn("scroll",l);break;case"onScrollEnd":b!=null&&Dn("scrollend",l);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(y=b.__html,y!=null){if(R.children!=null)throw Error(r(60));l.innerHTML=y}}break;case"multiple":l.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":l.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){l.removeAttribute("xlink:href");break}y=Pf(""+b),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(y,""+b):l.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(y,""):l.removeAttribute(y);break;case"capture":case"download":b===!0?l.setAttribute(y,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(y,b):l.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?l.setAttribute(y,b):l.removeAttribute(y);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?l.removeAttribute(y):l.setAttribute(y,b);break;case"popover":Dn("beforetoggle",l),Dn("toggle",l),It(l,"popover",b);break;case"xlinkActuate":jt(l,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":jt(l,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":jt(l,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":jt(l,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":jt(l,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":jt(l,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":jt(l,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":jt(l,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":jt(l,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":It(l,"is",b);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=Wb.get(y)||y,It(l,y,b))}}function dk(l,f,y,b,R,D){switch(y){case"style":Kc(l,b,D);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(y=b.__html,y!=null){if(R.children!=null)throw Error(r(60));l.innerHTML=y}}break;case"children":typeof b=="string"?ri(l,b):(typeof b=="number"||typeof b=="bigint")&&ri(l,""+b);break;case"onScroll":b!=null&&Dn("scroll",l);break;case"onScrollEnd":b!=null&&Dn("scrollend",l);break;case"onClick":b!=null&&(l.onclick=ll);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ce.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(R=y.endsWith("Capture"),f=y.slice(2,R?y.length-7:void 0),D=l[fi]||null,D=D!=null?D[y]:null,typeof D=="function"&&l.removeEventListener(f,D,R),typeof b=="function")){typeof D!="function"&&D!==null&&(y in l?l[y]=null:l.hasAttribute(y)&&l.removeAttribute(y)),l.addEventListener(f,b,R);break e}y in l?l[y]=b:b===!0?l.setAttribute(y,""):It(l,y,b)}}}function va(l,f,y){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Dn("error",l),Dn("load",l);var b=!1,R=!1,D;for(D in y)if(y.hasOwnProperty(D)){var H=y[D];if(H!=null)switch(D){case"src":b=!0;break;case"srcSet":R=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:hr(l,f,D,H,y,null)}}R&&hr(l,f,"srcSet",y.srcSet,y,null),b&&hr(l,f,"src",y.src,y,null);return;case"input":Dn("invalid",l);var Q=D=H=R=null,oe=null,Se=null;for(b in y)if(y.hasOwnProperty(b)){var ze=y[b];if(ze!=null)switch(b){case"name":R=ze;break;case"type":H=ze;break;case"checked":oe=ze;break;case"defaultChecked":Se=ze;break;case"value":D=ze;break;case"defaultValue":Q=ze;break;case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(r(137,f));break;default:hr(l,f,b,ze,y,null)}}Ks(l,D,Q,oe,Se,H,R,!1);return;case"select":Dn("invalid",l),b=H=D=null;for(R in y)if(y.hasOwnProperty(R)&&(Q=y[R],Q!=null))switch(R){case"value":D=Q;break;case"defaultValue":H=Q;break;case"multiple":b=Q;default:hr(l,f,R,Q,y,null)}f=D,y=H,l.multiple=!!b,f!=null?oa(l,!!b,f,!1):y!=null&&oa(l,!!b,y,!0);return;case"textarea":Dn("invalid",l),D=R=b=null;for(H in y)if(y.hasOwnProperty(H)&&(Q=y[H],Q!=null))switch(H){case"value":b=Q;break;case"defaultValue":R=Q;break;case"children":D=Q;break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(91));break;default:hr(l,f,H,Q,y,null)}hi(l,b,R,D);return;case"option":for(oe in y)y.hasOwnProperty(oe)&&(b=y[oe],b!=null)&&(oe==="selected"?l.selected=b&&typeof b!="function"&&typeof b!="symbol":hr(l,f,oe,b,y,null));return;case"dialog":Dn("beforetoggle",l),Dn("toggle",l),Dn("cancel",l),Dn("close",l);break;case"iframe":case"object":Dn("load",l);break;case"video":case"audio":for(b=0;b<js.length;b++)Dn(js[b],l);break;case"image":Dn("error",l),Dn("load",l);break;case"details":Dn("toggle",l);break;case"embed":case"source":case"link":Dn("error",l),Dn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Se in y)if(y.hasOwnProperty(Se)&&(b=y[Se],b!=null))switch(Se){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:hr(l,f,Se,b,y,null)}return;default:if(vs(f)){for(ze in y)y.hasOwnProperty(ze)&&(b=y[ze],b!==void 0&&dk(l,f,ze,b,y,void 0));return}}for(Q in y)y.hasOwnProperty(Q)&&(b=y[Q],b!=null&&hr(l,f,Q,b,y,null))}function gX(l,f,y,b){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var R=null,D=null,H=null,Q=null,oe=null,Se=null,ze=null;for(De in y){var $e=y[De];if(y.hasOwnProperty(De)&&$e!=null)switch(De){case"checked":break;case"value":break;case"defaultValue":oe=$e;default:b.hasOwnProperty(De)||hr(l,f,De,null,b,$e)}}for(var Ne in b){var De=b[Ne];if($e=y[Ne],b.hasOwnProperty(Ne)&&(De!=null||$e!=null))switch(Ne){case"type":D=De;break;case"name":R=De;break;case"checked":Se=De;break;case"defaultChecked":ze=De;break;case"value":H=De;break;case"defaultValue":Q=De;break;case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(r(137,f));break;default:De!==$e&&hr(l,f,Ne,De,b,$e)}}ni(l,H,Q,oe,Se,ze,D,R);return;case"select":De=H=Q=Ne=null;for(D in y)if(oe=y[D],y.hasOwnProperty(D)&&oe!=null)switch(D){case"value":break;case"multiple":De=oe;default:b.hasOwnProperty(D)||hr(l,f,D,null,b,oe)}for(R in b)if(D=b[R],oe=y[R],b.hasOwnProperty(R)&&(D!=null||oe!=null))switch(R){case"value":Ne=D;break;case"defaultValue":Q=D;break;case"multiple":H=D;default:D!==oe&&hr(l,f,R,D,b,oe)}f=Q,y=H,b=De,Ne!=null?oa(l,!!y,Ne,!1):!!b!=!!y&&(f!=null?oa(l,!!y,f,!0):oa(l,!!y,y?[]:"",!1));return;case"textarea":De=Ne=null;for(Q in y)if(R=y[Q],y.hasOwnProperty(Q)&&R!=null&&!b.hasOwnProperty(Q))switch(Q){case"value":break;case"children":break;default:hr(l,f,Q,null,b,R)}for(H in b)if(R=b[H],D=y[H],b.hasOwnProperty(H)&&(R!=null||D!=null))switch(H){case"value":Ne=R;break;case"defaultValue":De=R;break;case"children":break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:R!==D&&hr(l,f,H,R,b,D)}qn(l,Ne,De);return;case"option":for(var Dt in y)Ne=y[Dt],y.hasOwnProperty(Dt)&&Ne!=null&&!b.hasOwnProperty(Dt)&&(Dt==="selected"?l.selected=!1:hr(l,f,Dt,null,b,Ne));for(oe in b)Ne=b[oe],De=y[oe],b.hasOwnProperty(oe)&&Ne!==De&&(Ne!=null||De!=null)&&(oe==="selected"?l.selected=Ne&&typeof Ne!="function"&&typeof Ne!="symbol":hr(l,f,oe,Ne,b,De));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xt in y)Ne=y[Xt],y.hasOwnProperty(Xt)&&Ne!=null&&!b.hasOwnProperty(Xt)&&hr(l,f,Xt,null,b,Ne);for(Se in b)if(Ne=b[Se],De=y[Se],b.hasOwnProperty(Se)&&Ne!==De&&(Ne!=null||De!=null))switch(Se){case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(r(137,f));break;default:hr(l,f,Se,Ne,b,De)}return;default:if(vs(f)){for(var pr in y)Ne=y[pr],y.hasOwnProperty(pr)&&Ne!==void 0&&!b.hasOwnProperty(pr)&&dk(l,f,pr,void 0,b,Ne);for(ze in b)Ne=b[ze],De=y[ze],!b.hasOwnProperty(ze)||Ne===De||Ne===void 0&&De===void 0||dk(l,f,ze,Ne,b,De);return}}for(var ye in y)Ne=y[ye],y.hasOwnProperty(ye)&&Ne!=null&&!b.hasOwnProperty(ye)&&hr(l,f,ye,null,b,Ne);for($e in b)Ne=b[$e],De=y[$e],!b.hasOwnProperty($e)||Ne===De||Ne==null&&De==null||hr(l,f,$e,Ne,b,De)}function KD(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vX(){if(typeof performance.getEntriesByType=="function"){for(var l=0,f=0,y=performance.getEntriesByType("resource"),b=0;b<y.length;b++){var R=y[b],D=R.transferSize,H=R.initiatorType,Q=R.duration;if(D&&Q&&KD(H)){for(H=0,Q=R.responseEnd,b+=1;b<y.length;b++){var oe=y[b],Se=oe.startTime;if(Se>Q)break;var ze=oe.transferSize,$e=oe.initiatorType;ze&&KD($e)&&(oe=oe.responseEnd,H+=ze*(oe<Q?1:(Q-Se)/(oe-Se)))}if(--b,f+=8*(D+H)/(R.duration/1e3),l++,10<l)break}}if(0<l)return f/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var fk=null,hk=null;function gw(l){return l.nodeType===9?l:l.ownerDocument}function XD(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function YD(l,f){if(l===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&f==="foreignObject"?0:l}function pk(l,f){return l==="textarea"||l==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var mk=null;function yX(){var l=window.event;return l&&l.type==="popstate"?l===mk?!1:(mk=l,!0):(mk=null,!1)}var JD=typeof setTimeout=="function"?setTimeout:void 0,xX=typeof clearTimeout=="function"?clearTimeout:void 0,ZD=typeof Promise=="function"?Promise:void 0,bX=typeof queueMicrotask=="function"?queueMicrotask:typeof ZD<"u"?function(l){return ZD.resolve(null).then(l).catch(_X)}:JD;function _X(l){setTimeout(function(){throw l})}function Vd(l){return l==="head"}function QD(l,f){var y=f,b=0;do{var R=y.nextSibling;if(l.removeChild(y),R&&R.nodeType===8)if(y=R.data,y==="/$"||y==="/&"){if(b===0){l.removeChild(R),Dm(f);return}b--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")b++;else if(y==="html")iy(l.ownerDocument.documentElement);else if(y==="head"){y=l.ownerDocument.head,iy(y);for(var D=y.firstChild;D;){var H=D.nextSibling,Q=D.nodeName;D[Ws]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&D.rel.toLowerCase()==="stylesheet"||y.removeChild(D),D=H}}else y==="body"&&iy(l.ownerDocument.body);y=R}while(y);Dm(f)}function e2(l,f){var y=l;l=0;do{var b=y.nextSibling;if(y.nodeType===1?f?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(f?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),b&&b.nodeType===8)if(y=b.data,y==="/$"){if(l===0)break;l--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||l++;y=b}while(y)}function gk(l){var f=l.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var y=f;switch(f=f.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":gk(y),al(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}l.removeChild(y)}}function wX(l,f,y,b){for(;l.nodeType===1;){var R=y;if(l.nodeName.toLowerCase()!==f.toLowerCase()){if(!b&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(b){if(!l[Ws])switch(f){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(D=l.getAttribute("rel"),D==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(D!==R.rel||l.getAttribute("href")!==(R.href==null||R.href===""?null:R.href)||l.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin)||l.getAttribute("title")!==(R.title==null?null:R.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(D=l.getAttribute("src"),(D!==(R.src==null?null:R.src)||l.getAttribute("type")!==(R.type==null?null:R.type)||l.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin))&&D&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(f==="input"&&l.type==="hidden"){var D=R.name==null?null:""+R.name;if(R.type==="hidden"&&l.getAttribute("name")===D)return l}else return l;if(l=Uo(l.nextSibling),l===null)break}return null}function SX(l,f,y){if(f==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!y||(l=Uo(l.nextSibling),l===null))return null;return l}function t2(l,f){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=Uo(l.nextSibling),l===null))return null;return l}function vk(l){return l.data==="$?"||l.data==="$~"}function yk(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function TX(l,f){var y=l.ownerDocument;if(l.data==="$~")l._reactRetry=f;else if(l.data!=="$?"||y.readyState!=="loading")f();else{var b=function(){f(),y.removeEventListener("DOMContentLoaded",b)};y.addEventListener("DOMContentLoaded",b),l._reactRetry=b}}function Uo(l){for(;l!=null;l=l.nextSibling){var f=l.nodeType;if(f===1||f===3)break;if(f===8){if(f=l.data,f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"||f==="F!"||f==="F")break;if(f==="/$"||f==="/&")return null}}return l}var xk=null;function n2(l){l=l.nextSibling;for(var f=0;l;){if(l.nodeType===8){var y=l.data;if(y==="/$"||y==="/&"){if(f===0)return Uo(l.nextSibling);f--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||f++}l=l.nextSibling}return null}function r2(l){l=l.previousSibling;for(var f=0;l;){if(l.nodeType===8){var y=l.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(f===0)return l;f--}else y!=="/$"&&y!=="/&"||f++}l=l.previousSibling}return null}function i2(l,f,y){switch(f=gw(y),l){case"html":if(l=f.documentElement,!l)throw Error(r(452));return l;case"head":if(l=f.head,!l)throw Error(r(453));return l;case"body":if(l=f.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function iy(l){for(var f=l.attributes;f.length;)l.removeAttributeNode(f[0]);al(l)}var zo=new Map,a2=new Set;function vw(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Su=X.d;X.d={f:EX,r:AX,D:kX,C:MX,L:NX,m:CX,X:IX,S:RX,M:PX};function EX(){var l=Su.f(),f=Qs();return l||f}function AX(l){var f=ol(l);f!==null&&f.tag===5&&f.type==="form"?Q_(f):Su.r(l)}var Pm=typeof document>"u"?null:document;function s2(l,f,y){var b=Pm;if(b&&typeof f=="string"&&f){var R=Kt(f);R='link[rel="'+l+'"][href="'+R+'"]',typeof y=="string"&&(R+='[crossorigin="'+y+'"]'),a2.has(R)||(a2.add(R),l={rel:l,crossOrigin:y,href:f},b.querySelector(R)===null&&(f=b.createElement("link"),va(f,"link",l),Z(f),b.head.appendChild(f)))}}function kX(l){Su.D(l),s2("dns-prefetch",l,null)}function MX(l,f){Su.C(l,f),s2("preconnect",l,f)}function NX(l,f,y){Su.L(l,f,y);var b=Pm;if(b&&l&&f){var R='link[rel="preload"][as="'+Kt(f)+'"]';f==="image"&&y&&y.imageSrcSet?(R+='[imagesrcset="'+Kt(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(R+='[imagesizes="'+Kt(y.imageSizes)+'"]')):R+='[href="'+Kt(l)+'"]';var D=R;switch(f){case"style":D=Om(l);break;case"script":D=jm(l)}zo.has(D)||(l=m({rel:"preload",href:f==="image"&&y&&y.imageSrcSet?void 0:l,as:f},y),zo.set(D,l),b.querySelector(R)!==null||f==="style"&&b.querySelector(ay(D))||f==="script"&&b.querySelector(sy(D))||(f=b.createElement("link"),va(f,"link",l),Z(f),b.head.appendChild(f)))}}function CX(l,f){Su.m(l,f);var y=Pm;if(y&&l){var b=f&&typeof f.as=="string"?f.as:"script",R='link[rel="modulepreload"][as="'+Kt(b)+'"][href="'+Kt(l)+'"]',D=R;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=jm(l)}if(!zo.has(D)&&(l=m({rel:"modulepreload",href:l},f),zo.set(D,l),y.querySelector(R)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(sy(D)))return}b=y.createElement("link"),va(b,"link",l),Z(b),y.head.appendChild(b)}}}function RX(l,f,y){Su.S(l,f,y);var b=Pm;if(b&&l){var R=mo(b).hoistableStyles,D=Om(l);f=f||"default";var H=R.get(D);if(!H){var Q={loading:0,preload:null};if(H=b.querySelector(ay(D)))Q.loading=5;else{l=m({rel:"stylesheet",href:l,"data-precedence":f},y),(y=zo.get(D))&&bk(l,y);var oe=H=b.createElement("link");Z(oe),va(oe,"link",l),oe._p=new Promise(function(Se,ze){oe.onload=Se,oe.onerror=ze}),oe.addEventListener("load",function(){Q.loading|=1}),oe.addEventListener("error",function(){Q.loading|=2}),Q.loading|=4,yw(H,f,b)}H={type:"stylesheet",instance:H,count:1,state:Q},R.set(D,H)}}}function IX(l,f){Su.X(l,f);var y=Pm;if(y&&l){var b=mo(y).hoistableScripts,R=jm(l),D=b.get(R);D||(D=y.querySelector(sy(R)),D||(l=m({src:l,async:!0},f),(f=zo.get(R))&&_k(l,f),D=y.createElement("script"),Z(D),va(D,"link",l),y.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},b.set(R,D))}}function PX(l,f){Su.M(l,f);var y=Pm;if(y&&l){var b=mo(y).hoistableScripts,R=jm(l),D=b.get(R);D||(D=y.querySelector(sy(R)),D||(l=m({src:l,async:!0,type:"module"},f),(f=zo.get(R))&&_k(l,f),D=y.createElement("script"),Z(D),va(D,"link",l),y.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},b.set(R,D))}}function o2(l,f,y,b){var R=(R=ve.current)?vw(R):null;if(!R)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(f=Om(y.href),y=mo(R).hoistableStyles,b=y.get(f),b||(b={type:"style",instance:null,count:0,state:null},y.set(f,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){l=Om(y.href);var D=mo(R).hoistableStyles,H=D.get(l);if(H||(R=R.ownerDocument||R,H={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(l,H),(D=R.querySelector(ay(l)))&&!D._p&&(H.instance=D,H.state.loading=5),zo.has(l)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},zo.set(l,y),D||OX(R,l,y,H.state))),f&&b===null)throw Error(r(528,""));return H}if(f&&b!==null)throw Error(r(529,""));return null;case"script":return f=y.async,y=y.src,typeof y=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=jm(y),y=mo(R).hoistableScripts,b=y.get(f),b||(b={type:"script",instance:null,count:0,state:null},y.set(f,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Om(l){return'href="'+Kt(l)+'"'}function ay(l){return'link[rel="stylesheet"]['+l+"]"}function l2(l){return m({},l,{"data-precedence":l.precedence,precedence:null})}function OX(l,f,y,b){l.querySelector('link[rel="preload"][as="style"]['+f+"]")?b.loading=1:(f=l.createElement("link"),b.preload=f,f.addEventListener("load",function(){return b.loading|=1}),f.addEventListener("error",function(){return b.loading|=2}),va(f,"link",y),Z(f),l.head.appendChild(f))}function jm(l){return'[src="'+Kt(l)+'"]'}function sy(l){return"script[async]"+l}function c2(l,f,y){if(f.count++,f.instance===null)switch(f.type){case"style":var b=l.querySelector('style[data-href~="'+Kt(y.href)+'"]');if(b)return f.instance=b,Z(b),b;var R=m({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return b=(l.ownerDocument||l).createElement("style"),Z(b),va(b,"style",R),yw(b,y.precedence,l),f.instance=b;case"stylesheet":R=Om(y.href);var D=l.querySelector(ay(R));if(D)return f.state.loading|=4,f.instance=D,Z(D),D;b=l2(y),(R=zo.get(R))&&bk(b,R),D=(l.ownerDocument||l).createElement("link"),Z(D);var H=D;return H._p=new Promise(function(Q,oe){H.onload=Q,H.onerror=oe}),va(D,"link",b),f.state.loading|=4,yw(D,y.precedence,l),f.instance=D;case"script":return D=jm(y.src),(R=l.querySelector(sy(D)))?(f.instance=R,Z(R),R):(b=y,(R=zo.get(D))&&(b=m({},y),_k(b,R)),l=l.ownerDocument||l,R=l.createElement("script"),Z(R),va(R,"link",b),l.head.appendChild(R),f.instance=R);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(b=f.instance,f.state.loading|=4,yw(b,y.precedence,l));return f.instance}function yw(l,f,y){for(var b=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),R=b.length?b[b.length-1]:null,D=R,H=0;H<b.length;H++){var Q=b[H];if(Q.dataset.precedence===f)D=Q;else if(D!==R)break}D?D.parentNode.insertBefore(l,D.nextSibling):(f=y.nodeType===9?y.head:y,f.insertBefore(l,f.firstChild))}function bk(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.title==null&&(l.title=f.title)}function _k(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.integrity==null&&(l.integrity=f.integrity)}var xw=null;function u2(l,f,y){if(xw===null){var b=new Map,R=xw=new Map;R.set(y,b)}else R=xw,b=R.get(y),b||(b=new Map,R.set(y,b));if(b.has(l))return b;for(b.set(l,null),y=y.getElementsByTagName(l),R=0;R<y.length;R++){var D=y[R];if(!(D[Ws]||D[Rr]||l==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var H=D.getAttribute(f)||"";H=l+H;var Q=b.get(H);Q?Q.push(D):b.set(H,[D])}}return b}function d2(l,f,y){l=l.ownerDocument||l,l.head.insertBefore(y,f==="title"?l.querySelector("head > title"):null)}function jX(l,f,y){if(y===1||f.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;return f.rel==="stylesheet"?(l=f.disabled,typeof f.precedence=="string"&&l==null):!0;case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function f2(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function DX(l,f,y,b){if(y.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var R=Om(b.href),D=f.querySelector(ay(R));if(D){f=D._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(l.count++,l=bw.bind(l),f.then(l,l)),y.state.loading|=4,y.instance=D,Z(D);return}D=f.ownerDocument||f,b=l2(b),(R=zo.get(R))&&bk(b,R),D=D.createElement("link"),Z(D);var H=D;H._p=new Promise(function(Q,oe){H.onload=Q,H.onerror=oe}),va(D,"link",b),y.instance=D}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(y,f),(f=y.state.preload)&&(y.state.loading&3)===0&&(l.count++,y=bw.bind(l),f.addEventListener("load",y),f.addEventListener("error",y))}}var wk=0;function LX(l,f){return l.stylesheets&&l.count===0&&ww(l,l.stylesheets),0<l.count||0<l.imgCount?function(y){var b=setTimeout(function(){if(l.stylesheets&&ww(l,l.stylesheets),l.unsuspend){var D=l.unsuspend;l.unsuspend=null,D()}},6e4+f);0<l.imgBytes&&wk===0&&(wk=62500*vX());var R=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&ww(l,l.stylesheets),l.unsuspend)){var D=l.unsuspend;l.unsuspend=null,D()}},(l.imgBytes>wk?50:800)+f);return l.unsuspend=y,function(){l.unsuspend=null,clearTimeout(b),clearTimeout(R)}}:null}function bw(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ww(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var _w=null;function ww(l,f){l.stylesheets=null,l.unsuspend!==null&&(l.count++,_w=new Map,f.forEach(UX,l),_w=null,bw.call(l))}function UX(l,f){if(!(f.state.loading&4)){var y=_w.get(l);if(y)var b=y.get(null);else{y=new Map,_w.set(l,y);for(var R=l.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<R.length;D++){var H=R[D];(H.nodeName==="LINK"||H.getAttribute("media")!=="not all")&&(y.set(H.dataset.precedence,H),b=H)}b&&y.set(null,b)}R=f.instance,H=R.getAttribute("data-precedence"),D=y.get(H)||b,D===b&&y.set(null,R),y.set(H,R),this.count++,b=bw.bind(this),R.addEventListener("load",b),R.addEventListener("error",b),D?D.parentNode.insertBefore(R,D.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(R,l.firstChild)),f.state.loading|=4}}var oy={$$typeof:C,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function zX(l,f,y,b,R,D,H,Q,oe){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ln(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ln(0),this.hiddenUpdates=Ln(null),this.identifierPrefix=b,this.onUncaughtError=R,this.onCaughtError=D,this.onRecoverableError=H,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=oe,this.incompleteTransitions=new Map}function h2(l,f,y,b,R,D,H,Q,oe,Se,ze,$e){return l=new zX(l,f,y,H,oe,Se,ze,$e,Q),f=1,D===!0&&(f|=24),D=Ir(3,null,null,f),l.current=D,D.stateNode=l,f=d0(),f.refCount++,l.pooledCache=f,f.refCount++,D.memoizedState={element:b,isDehydrated:y,cache:f},Qf(D),l}function p2(l){return l?(l=ec,l):ec}function m2(l,f,y,b,R,D){R=p2(R),b.context===null?b.context=R:b.pendingContext=R,b=gl(f),b.payload={element:y},D=D===void 0?null:D,D!==null&&(b.callback=D),y=lc(l,b,f),y!==null&&(xn(y,l,f),cc(y,l,f))}function g2(l,f){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var y=l.retryLane;l.retryLane=y!==0&&y<f?y:f}}function Sk(l,f){g2(l,f),(l=l.alternate)&&g2(l,f)}function v2(l){if(l.tag===13||l.tag===31){var f=ua(l,67108864);f!==null&&xn(f,l,67108864),Sk(l,67108864)}}function y2(l){if(l.tag===13||l.tag===31){var f=as();f=Wl(f);var y=ua(l,f);y!==null&&xn(y,l,f),Sk(l,f)}}var Sw=!0;function BX(l,f,y,b){var R=K.T;K.T=null;var D=X.p;try{X.p=2,Tk(l,f,y,b)}finally{X.p=D,K.T=R}}function FX(l,f,y,b){var R=K.T;K.T=null;var D=X.p;try{X.p=8,Tk(l,f,y,b)}finally{X.p=D,K.T=R}}function Tk(l,f,y,b){if(Sw){var R=Ek(b);if(R===null)uk(l,f,b,Tw,y),b2(l,b);else if(HX(R,l,f,y,b))b.stopPropagation();else if(b2(l,b),f&4&&-1<VX.indexOf(l)){for(;R!==null;){var D=ol(R);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var H=Ze(D.pendingLanes);if(H!==0){var Q=D;for(Q.pendingLanes|=2,Q.entangledLanes|=2;H;){var oe=1<<31-_t(H);Q.entanglements[1]|=oe,H&=~oe}tt(D),(Ut&6)===0&&(Xr=q()+500,Et(0))}}break;case 31:case 13:Q=ua(D,2),Q!==null&&xn(Q,D,2),Qs(),Sk(D,2)}if(D=Ek(b),D===null&&uk(l,f,b,Tw,y),D===R)break;R=D}R!==null&&b.stopPropagation()}else uk(l,f,b,null,y)}}function Ek(l){return l=Ip(l),Ak(l)}var Tw=null;function Ak(l){if(Tw=null,l=sl(l),l!==null){var f=a(l);if(f===null)l=null;else{var y=f.tag;if(y===13){if(l=s(f),l!==null)return l;l=null}else if(y===31){if(l=o(f),l!==null)return l;l=null}else if(y===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;l=null}else f!==l&&(l=null)}}return Tw=l,null}function x2(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(he()){case Oe:return 2;case Ge:return 8;case je:case wt:return 32;case ot:return 268435456;default:return 32}default:return 32}}var kk=!1,Hd=null,Gd=null,qd=null,ly=new Map,cy=new Map,$d=[],VX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function b2(l,f){switch(l){case"focusin":case"focusout":Hd=null;break;case"dragenter":case"dragleave":Gd=null;break;case"mouseover":case"mouseout":qd=null;break;case"pointerover":case"pointerout":ly.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":cy.delete(f.pointerId)}}function uy(l,f,y,b,R,D){return l===null||l.nativeEvent!==D?(l={blockedOn:f,domEventName:y,eventSystemFlags:b,nativeEvent:D,targetContainers:[R]},f!==null&&(f=ol(f),f!==null&&v2(f)),l):(l.eventSystemFlags|=b,f=l.targetContainers,R!==null&&f.indexOf(R)===-1&&f.push(R),l)}function HX(l,f,y,b,R){switch(f){case"focusin":return Hd=uy(Hd,l,f,y,b,R),!0;case"dragenter":return Gd=uy(Gd,l,f,y,b,R),!0;case"mouseover":return qd=uy(qd,l,f,y,b,R),!0;case"pointerover":var D=R.pointerId;return ly.set(D,uy(ly.get(D)||null,l,f,y,b,R)),!0;case"gotpointercapture":return D=R.pointerId,cy.set(D,uy(cy.get(D)||null,l,f,y,b,R)),!0}return!1}function _2(l){var f=sl(l.target);if(f!==null){var y=a(f);if(y!==null){if(f=y.tag,f===13){if(f=s(y),f!==null){l.blockedOn=f,Ki(l.priority,function(){y2(y)});return}}else if(f===31){if(f=o(y),f!==null){l.blockedOn=f,Ki(l.priority,function(){y2(y)});return}}else if(f===3&&y.stateNode.current.memoizedState.isDehydrated){l.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Ew(l){if(l.blockedOn!==null)return!1;for(var f=l.targetContainers;0<f.length;){var y=Ek(l.nativeEvent);if(y===null){y=l.nativeEvent;var b=new y.constructor(y.type,y);Rp=b,y.target.dispatchEvent(b),Rp=null}else return f=ol(y),f!==null&&v2(f),l.blockedOn=y,!1;f.shift()}return!0}function w2(l,f,y){Ew(l)&&y.delete(f)}function GX(){kk=!1,Hd!==null&&Ew(Hd)&&(Hd=null),Gd!==null&&Ew(Gd)&&(Gd=null),qd!==null&&Ew(qd)&&(qd=null),ly.forEach(w2),cy.forEach(w2)}function Aw(l,f){l.blockedOn===f&&(l.blockedOn=null,kk||(kk=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,GX)))}var kw=null;function S2(l){kw!==l&&(kw=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){kw===l&&(kw=null);for(var f=0;f<l.length;f+=3){var y=l[f],b=l[f+1],R=l[f+2];if(typeof b!="function"){if(Ak(b||y)===null)continue;break}var D=ol(y);D!==null&&(l.splice(f,3),f-=3,U0(D,{pending:!0,data:R,method:y.method,action:b},b,R))}}))}function Dm(l){function f(oe){return Aw(oe,l)}Hd!==null&&Aw(Hd,l),Gd!==null&&Aw(Gd,l),qd!==null&&Aw(qd,l),ly.forEach(f),cy.forEach(f);for(var y=0;y<$d.length;y++){var b=$d[y];b.blockedOn===l&&(b.blockedOn=null)}for(;0<$d.length&&(y=$d[0],y.blockedOn===null);)_2(y),y.blockedOn===null&&$d.shift();if(y=(l.ownerDocument||l).$$reactFormReplay,y!=null)for(b=0;b<y.length;b+=3){var R=y[b],D=y[b+1],H=R[fi]||null;if(typeof D=="function")H||S2(y);else if(H){var Q=null;if(D&&D.hasAttribute("formAction")){if(R=D,H=D[fi]||null)Q=H.formAction;else if(Ak(R)!==null)continue}else Q=H.action;typeof Q=="function"?y[b+1]=Q:(y.splice(b,3),b-=3),S2(y)}}}function T2(){function l(D){D.canIntercept&&D.info==="react-transition"&&D.intercept({handler:function(){return new Promise(function(H){return R=H})},focusReset:"manual",scroll:"manual"})}function f(){R!==null&&(R(),R=null),b||setTimeout(y,20)}function y(){if(!b&&!navigation.transition){var D=navigation.currentEntry;D&&D.url!=null&&navigation.navigate(D.url,{state:D.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var b=!1,R=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",f),navigation.addEventListener("navigateerror",f),setTimeout(y,100),function(){b=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",f),navigation.removeEventListener("navigateerror",f),R!==null&&(R(),R=null)}}}function Mk(l){this._internalRoot=l}Mw.prototype.render=Mk.prototype.render=function(l){var f=this._internalRoot;if(f===null)throw Error(r(409));var y=f.current,b=as();m2(y,b,l,f,null,null)},Mw.prototype.unmount=Mk.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var f=l.containerInfo;m2(l.current,2,null,l,null,null),Qs(),f[Wa]=null}};function Mw(l){this._internalRoot=l}Mw.prototype.unstable_scheduleHydration=function(l){if(l){var f=$c();l={blockedOn:null,target:l,priority:f};for(var y=0;y<$d.length&&f!==0&&f<$d[y].priority;y++);$d.splice(y,0,l),y===0&&_2(l)}};var E2=e.version;if(E2!=="19.2.3")throw Error(r(527,E2,"19.2.3"));X.findDOMNode=function(l){var f=l._reactInternals;if(f===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(f),l=l!==null?h(l):null,l=l===null?null:l.stateNode,l};var qX={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nw.isDisabled&&Nw.supportsFiber)try{Je=Nw.inject(qX),it=Nw}catch{}}return fy.createRoot=function(l,f){if(!i(l))throw Error(r(299));var y=!1,b="",R=sw,D=G0,H=q0;return f!=null&&(f.unstable_strictMode===!0&&(y=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(R=f.onUncaughtError),f.onCaughtError!==void 0&&(D=f.onCaughtError),f.onRecoverableError!==void 0&&(H=f.onRecoverableError)),f=h2(l,1,!1,null,null,y,b,null,R,D,H,T2),l[Wa]=f.current,ck(l),new Mk(f)},fy.hydrateRoot=function(l,f,y){if(!i(l))throw Error(r(299));var b=!1,R="",D=sw,H=G0,Q=q0,oe=null;return y!=null&&(y.unstable_strictMode===!0&&(b=!0),y.identifierPrefix!==void 0&&(R=y.identifierPrefix),y.onUncaughtError!==void 0&&(D=y.onUncaughtError),y.onCaughtError!==void 0&&(H=y.onCaughtError),y.onRecoverableError!==void 0&&(Q=y.onRecoverableError),y.formState!==void 0&&(oe=y.formState)),f=h2(l,1,!0,f,y??null,b,R,oe,D,H,Q,T2),f.context=p2(null),y=f.current,b=as(),b=Wl(b),R=gl(b),R.callback=null,lc(y,R,b),y=b,f.current.lanes=y,Pi(f,y),tt(f),l[Wa]=f.current,ck(l),new Mw(f)},fy.version="19.2.3",fy}var j2;function nY(){if(j2)return Rk.exports;j2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Rk.exports=tY(),Rk.exports}var rY=nY();const iY=Zn(rY);var Te=(t=>(t.HOME="HOME",t.ABOUT="ABOUT",t.CHAT="CHAT",t.THERAPY="THERAPY",t.GROUP_THERAPY="GROUP_THERAPY",t.GESTALT_TRAINING="GESTALT_TRAINING",t.BEHANDLINGS_PEDAGOG="BEHANDLINGS_PEDAGOG",t.BLOG="BLOG",t.COMMUNITY="COMMUNITY",t.CONTACT="CONTACT",t.SURVEY="SURVEY",t.DOWNLOADS="DOWNLOADS",t.LOGIN="LOGIN",t.GEMENSKAP_APP="GEMENSKAP_APP",t.BOOK="BOOK",t.CHECKOUT="CHECKOUT",t.PRIVACY="PRIVACY",t.TERMS="TERMS",t.COOKIE_POLICY="COOKIE_POLICY",t.PREMIUM_APPLICATION="PREMIUM_APPLICATION",t.FREE_REGISTRATION="FREE_REGISTRATION",t.GESTALT_WORKSHEET="GESTALT_WORKSHEET",t.MIT_EBOOK="MIT_EBOOK",t))(Te||{});const aY=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),VH=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();var sY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const oY=J.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},c)=>J.createElement("svg",{ref:c,...sY,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:VH("lucide",i),...o},[...s.map(([u,h])=>J.createElement(u,h)),...Array.isArray(a)?a:[a]]));const lt=(t,e)=>{const n=J.forwardRef(({className:r,...i},a)=>J.createElement(oY,{ref:a,iconNode:e,className:VH(`lucide-${aY(t)}`,r),...i}));return n.displayName=`${t}`,n};const lY=lt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);const HH=lt("Anchor",[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]]);const Jo=lt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const Vi=lt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const D2=lt("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);const _g=lt("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);const gg=lt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const hx=lt("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const jk=lt("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);const cY=lt("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);const GH=lt("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);const Dl=lt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const qH=lt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const uY=lt("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);const dY=lt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const n1=lt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const px=lt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const op=lt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const $H=lt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const fY=lt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const xf=lt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const mx=lt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const hY=lt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const pY=lt("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);const mY=lt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);const WH=lt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const Dk=lt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const gY=lt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const KH=lt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const vY=lt("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);const XH=lt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const yY=lt("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);const gx=lt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const xY=lt("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);const bY=lt("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);const _Y=lt("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);const Zo=lt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const L2=lt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const uE=lt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const wY=lt("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);const r1=lt("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);const SY=lt("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);const TY=lt("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);const xO=lt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const lp=lt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const U2=lt("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);const Lk=lt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const wv=lt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const dE=lt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const EY=lt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const i1=lt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const vx=lt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const bO=lt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const AY=lt("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);const kY=lt("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);const a1=lt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const MY=lt("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);const YH=lt("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const NY=lt("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);const CY=lt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const eP=lt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const RY=lt("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);const IY=lt("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);const PY=lt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const OY=lt("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);const z2=lt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const zc=lt("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const jY=lt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const B2=lt("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);const jc=lt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const uo=lt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const fE=lt("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);const DY=lt("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);const wa=lt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const Uk=lt("SquarePlus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);const yx=lt("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);const tP=lt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const hE=lt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const JH=lt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const LY=lt("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);const UY=lt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);const nP=lt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const ZH=lt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const zY=lt("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);const Gi=lt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const F2=lt("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const V2=lt("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);const Bc=lt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const BY=lt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),FY=({currentPage:t,setPage:e,isDarkMode:n,toggleTheme:r})=>{const[i,a]=J.useState(!1),[s,o]=J.useState(!1),[c,u]=J.useState(!1),h=J.useRef(null),m=J.useRef(null),v=T=>{e(T),a(!1),o(!1),u(!1)};J.useEffect(()=>{const T=w=>{h.current&&!h.current.contains(w.target)&&o(!1),m.current&&!m.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]);const x=[Te.CHAT,Te.THERAPY,Te.GROUP_THERAPY,Te.GESTALT_TRAINING,Te.BEHANDLINGS_PEDAGOG].includes(t),_=[Te.COMMUNITY,Te.SURVEY,Te.DOWNLOADS,Te.MIT_EBOOK].includes(t);return d.jsx("header",{className:"p-4 md:p-5",children:d.jsx("div",{className:"max-w-[1600px] mx-auto",children:d.jsxs("nav",{className:"glass bg-white/15 backdrop-blur-xl border border-white/20 rounded-2xl shadow-lg flex justify-between items-center px-8 py-4 relative z-50",children:[d.jsxs("button",{className:"flex items-center gap-4 cursor-pointer group rounded-lg focus:outline-none",onClick:()=>v(Te.HOME),children:[d.jsx("div",{className:"w-16 h-16 flex items-center justify-center transition-all duration-500 group-hover:scale-110 group-hover:rotate-3",children:d.jsx("img",{src:"/assets/logo2.png",alt:"Logo",className:"w-full h-full object-contain opacity-90 group-hover:opacity-100"})}),d.jsxs("span",{className:"text-xl md:text-2xl font-bold text-white drop-shadow-md hidden sm:block tracking-tight",children:["Klttertrdet ",d.jsx("span",{className:"text-orange-400 font-light mx-1",children:"&"})," Horizonten"]})]}),d.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[d.jsx("button",{onClick:()=>v(Te.HOME),className:`px-4 py-2 rounded-xl transition-all font-medium ${t===Te.HOME?"bg-white/20 text-white shadow-sm":"text-white/80 hover:bg-white/10 hover:text-white"}`,children:"Hem"}),d.jsx("button",{onClick:()=>v(Te.ABOUT),className:`px-4 py-2 rounded-xl transition-all font-medium ${t===Te.ABOUT?"bg-white/20 text-white shadow-sm":"text-white/80 hover:bg-white/10 hover:text-white"}`,children:"Om oss"}),d.jsxs("div",{className:"relative",ref:h,children:[d.jsxs("button",{onMouseEnter:()=>{o(!0),u(!1)},onClick:()=>o(!s),className:`flex items-center gap-1 px-4 py-2 rounded-xl transition-all font-medium ${x?"bg-white/20 text-white shadow-sm":"text-white/80 hover:bg-white/10 hover:text-white"}`,children:["Tjnster ",d.jsx(n1,{size:16,className:`transition-transform duration-300 ${s?"rotate-180":""}`})]}),s&&d.jsxs("div",{className:"absolute top-full left-0 mt-3 w-80 glass bg-black/90 backdrop-blur-2xl border border-white/20 rounded-2xl shadow-2xl p-4 animate-fade-in flex flex-col gap-4",onMouseLeave:()=>o(!1),children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 px-3 mb-2 text-white/40 text-[10px] uppercase tracking-widest font-bold",children:[d.jsx(hx,{size:12})," Utbildningar"]}),d.jsxs("div",{className:"space-y-1",children:[d.jsxs("button",{onClick:()=>v(Te.BEHANDLINGS_PEDAGOG),className:`w-full text-left px-3 py-2 rounded-xl transition-colors flex flex-col ${t===Te.BEHANDLINGS_PEDAGOG?"bg-orange-600/20 text-orange-400":"hover:bg-white/5 text-white/90"}`,children:[d.jsx("span",{className:"font-bold text-sm",children:"Behandlingspedagog"}),d.jsx("span",{className:"text-[10px] opacity-60",children:"Yrkesutbildning"})]}),d.jsxs("button",{onClick:()=>v(Te.CHAT),className:`w-full text-left px-3 py-2 rounded-xl transition-colors flex flex-col ${t===Te.CHAT?"bg-orange-600/20 text-orange-400":"hover:bg-white/5 text-white/90"}`,children:[d.jsx("span",{className:"font-bold text-sm",children:"Myndighetsinducerat trauma"}),d.jsx("span",{className:"text-[10px] opacity-60",children:"Specialistutbildning (MiT)"})]}),d.jsxs("button",{onClick:()=>v(Te.GESTALT_TRAINING),className:`w-full text-left px-3 py-2 rounded-xl transition-colors flex flex-col ${t===Te.GESTALT_TRAINING?"bg-orange-600/20 text-orange-400":"hover:bg-white/5 text-white/90"}`,children:[d.jsx("span",{className:"font-bold text-sm",children:"Gestaltterapi"}),d.jsx("span",{className:"text-[10px] opacity-60",children:"Grundutbildning & metodik"})]})]})]}),d.jsx("div",{className:"h-px bg-white/10 mx-2"}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 px-3 mb-2 text-white/40 text-[10px] uppercase tracking-widest font-bold",children:[d.jsx(Zo,{size:12})," Terapi"]}),d.jsxs("div",{className:"space-y-1",children:[d.jsxs("button",{onClick:()=>v(Te.THERAPY),className:`w-full text-left px-3 py-2 rounded-xl transition-colors flex flex-col ${t===Te.THERAPY?"bg-orange-600/20 text-orange-400":"hover:bg-white/5 text-white/90"}`,children:[d.jsx("span",{className:"font-bold text-sm",children:"Enskild Terapi"}),d.jsx("span",{className:"text-[10px] opacity-60",children:"Std & utveckling"})]}),d.jsxs("button",{onClick:()=>v(Te.GROUP_THERAPY),className:`w-full text-left px-3 py-2 rounded-xl transition-colors flex flex-col ${t===Te.GROUP_THERAPY?"bg-orange-600/20 text-orange-400":"hover:bg-white/5 text-white/90"}`,children:[d.jsx("span",{className:"font-bold text-sm",children:"Grupp- och parterapi"}),d.jsx("span",{className:"text-[10px] opacity-60",children:"Gemensam lkning"})]})]})]})]})]}),d.jsxs("div",{className:"relative",ref:m,children:[d.jsxs("button",{onMouseEnter:()=>{u(!0),o(!1)},onClick:()=>u(!c),className:`flex items-center gap-1 px-4 py-2 rounded-xl transition-all font-medium ${_?"bg-white/20 text-white shadow-sm":"text-white/80 hover:bg-white/10 hover:text-white"}`,children:["Resurser ",d.jsx(n1,{size:16,className:`transition-transform duration-300 ${c?"rotate-180":""}`})]}),c&&d.jsxs("div",{className:"absolute top-full left-0 mt-3 w-72 glass bg-black/90 backdrop-blur-2xl border border-white/20 rounded-2xl shadow-2xl p-4 animate-fade-in flex flex-col gap-2",onMouseLeave:()=>u(!1),children:[d.jsxs("div",{className:"flex items-center gap-2 px-3 mb-1 text-white/40 text-[10px] uppercase tracking-widest font-bold",children:[d.jsx(TY,{size:12})," Bibliotek & Verktyg"]}),d.jsxs("button",{onClick:()=>v(Te.COMMUNITY),className:`w-full text-left px-3 py-3 rounded-xl transition-colors flex items-center gap-3 ${t===Te.COMMUNITY?"bg-amber-600/20 text-amber-400":"hover:bg-white/5 text-white/90"}`,children:[d.jsx("div",{className:"p-2 bg-white/5 rounded-lg",children:d.jsx(Gi,{size:18})}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-bold text-sm",children:"Gemenskap"}),d.jsx("span",{className:"text-[10px] opacity-60",children:"Appen & community"})]})]}),d.jsxs("button",{onClick:()=>v(Te.SURVEY),className:`w-full text-left px-3 py-3 rounded-xl transition-colors flex items-center gap-3 ${t===Te.SURVEY?"bg-blue-600/20 text-blue-400":"hover:bg-white/5 text-white/90"}`,children:[d.jsx("div",{className:"p-2 bg-white/5 rounded-lg",children:d.jsx(mY,{size:18})}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-bold text-sm",children:"Enkt och utredning"}),d.jsx("span",{className:"text-[10px] opacity-60",children:"Sjlvreflektion & Grundsr"})]})]}),d.jsxs("button",{onClick:()=>v(Te.DOWNLOADS),className:`w-full text-left px-3 py-3 rounded-xl transition-colors flex items-center gap-3 ${t===Te.DOWNLOADS?"bg-emerald-600/20 text-emerald-400":"hover:bg-white/5 text-white/90"}`,children:[d.jsx("div",{className:"p-2 bg-white/5 rounded-lg",children:d.jsx(KH,{size:18})}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-bold text-sm",children:"Nedladdningar"}),d.jsx("span",{className:"text-[10px] opacity-60",children:"E-bcker & material"})]})]}),d.jsxs("button",{onClick:()=>v(Te.MIT_EBOOK),className:`w-full text-left px-3 py-3 rounded-xl transition-colors flex items-center gap-3 ${t===Te.MIT_EBOOK?"bg-amber-600/20 text-amber-400":"hover:bg-white/5 text-white/90"}`,children:[d.jsx("div",{className:"p-2 bg-white/5 rounded-lg",children:d.jsx(hx,{size:18})}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-bold text-sm",children:"MiT E-bok"}),d.jsx("span",{className:"text-[10px] opacity-60",children:"Introduktion till MiT"})]})]})]})]}),d.jsx("button",{onClick:()=>v(Te.BLOG),className:`px-4 py-2 rounded-xl transition-all font-medium ${t===Te.BLOG?"bg-white/20 text-white shadow-sm":"text-white/80 hover:bg-white/10 hover:text-white"}`,children:"Blogg"}),d.jsx("button",{onClick:()=>v(Te.CONTACT),className:`px-4 py-2 rounded-xl transition-all font-medium ${t===Te.CONTACT?"bg-white/20 text-white shadow-sm":"text-white/80 hover:bg-white/10 hover:text-white"}`,children:"Kontakt & bokning"}),d.jsxs("div",{className:"relative group/badge",children:[d.jsxs("button",{onClick:()=>v(Te.LOGIN),className:`px-4 py-2 rounded-xl transition-all font-medium flex items-center gap-2 ${t===Te.LOGIN?"bg-orange-600/20 text-orange-400 shadow-sm":"text-white/80 hover:bg-white/10 hover:text-white"}`,children:[d.jsx(U2,{size:18})," Logga in"]}),d.jsx("div",{className:"absolute -top-3 -right-3 pointer-events-none",children:d.jsx("div",{className:"bg-red-600 text-[7px] font-black text-white px-2 py-1 rounded-lg shadow-[0_4px_12px_rgba(220,38,38,0.5)] animate-pulse whitespace-nowrap uppercase tracking-widest border border-white/20 -rotate-6 group-hover/badge:rotate-0 transition-transform duration-500",children:"Nytt frn oss"})})]}),d.jsx("div",{className:"w-px h-6 bg-white/20 mx-2"}),d.jsx("button",{onClick:r,className:"p-3 rounded-xl text-white/80 hover:bg-white/10 hover:text-white transition-all hover:scale-105",children:n?d.jsx(tP,{size:20}):d.jsx(a1,{size:20})})]}),d.jsxs("div",{className:"md:hidden flex items-center gap-4",children:[d.jsx("button",{onClick:r,className:"p-2 text-white/80",children:n?d.jsx(tP,{size:24}):d.jsx(a1,{size:24})}),d.jsx("button",{onClick:()=>a(!i),className:"text-white p-2",children:i?d.jsx(Bc,{size:28}):d.jsx(i1,{size:28})})]}),i&&d.jsx("div",{className:"absolute top-full left-0 w-full mt-4 p-4 md:hidden",children:d.jsxs("div",{className:"glass bg-black/95 backdrop-blur-3xl border border-white/20 rounded-2xl p-6 flex flex-col gap-4 shadow-2xl max-h-[80vh] overflow-y-auto no-scrollbar",children:[d.jsxs("div",{className:"flex flex-col gap-1",children:[d.jsx("button",{onClick:()=>v(Te.HOME),className:`w-full py-3 rounded-xl font-bold text-left px-4 transition-colors ${t===Te.HOME?"text-orange-400 bg-white/10":"text-white/80 hover:bg-white/5"}`,children:"Hem"}),d.jsx("button",{onClick:()=>v(Te.ABOUT),className:`w-full py-3 rounded-xl font-bold text-left px-4 transition-colors ${t===Te.ABOUT?"text-orange-400 bg-white/10":"text-white/80 hover:bg-white/5"}`,children:"Om oss"})]}),d.jsxs("div",{className:"bg-white/5 rounded-2xl p-4 space-y-3",children:[d.jsx("div",{className:"px-1 text-[10px] font-black text-white/30 uppercase tracking-[0.2em]",children:"Tjnster & Utbildning"}),d.jsxs("div",{className:"grid grid-cols-1 gap-1",children:[d.jsx("button",{onClick:()=>v(Te.BEHANDLINGS_PEDAGOG),className:`w-full py-3 rounded-xl font-medium text-left px-4 text-sm transition-colors ${t===Te.BEHANDLINGS_PEDAGOG?"text-orange-400 bg-white/10":"text-white/70 hover:bg-white/5"}`,children:"Behandlingspedagog"}),d.jsx("button",{onClick:()=>v(Te.CHAT),className:`w-full py-3 rounded-xl font-medium text-left px-4 text-sm transition-colors ${t===Te.CHAT?"text-orange-400 bg-white/10":"text-white/70 hover:bg-white/5"}`,children:"Myndighetsinducerat trauma"}),d.jsx("button",{onClick:()=>v(Te.GESTALT_TRAINING),className:`w-full py-3 rounded-xl font-medium text-left px-4 text-sm transition-colors ${t===Te.GESTALT_TRAINING?"text-orange-400 bg-white/10":"text-white/70 hover:bg-white/5"}`,children:"Gestaltterapi"}),d.jsx("button",{onClick:()=>v(Te.THERAPY),className:`w-full py-3 rounded-xl font-medium text-left px-4 text-sm transition-colors ${t===Te.THERAPY?"text-orange-400 bg-white/10":"text-white/70 hover:bg-white/5"}`,children:"Enskild Terapi"}),d.jsx("button",{onClick:()=>v(Te.GROUP_THERAPY),className:`w-full py-3 rounded-xl font-medium text-left px-4 text-sm transition-colors ${t===Te.GROUP_THERAPY?"text-orange-400 bg-white/10":"text-white/70 hover:bg-white/5"}`,children:"Grupp- och parterapi"})]})]}),d.jsxs("div",{className:"bg-white/5 rounded-2xl p-4 space-y-3",children:[d.jsx("div",{className:"px-1 text-[10px] font-black text-white/30 uppercase tracking-[0.2em]",children:"Resurser"}),d.jsxs("div",{className:"grid grid-cols-1 gap-1",children:[d.jsx("button",{onClick:()=>v(Te.COMMUNITY),className:`w-full py-3 rounded-xl font-medium text-left px-4 text-sm transition-colors ${t===Te.COMMUNITY?"text-amber-400 bg-white/10":"text-white/70 hover:bg-white/5"}`,children:"Gemenskap"}),d.jsx("button",{onClick:()=>v(Te.SURVEY),className:`w-full py-3 rounded-xl font-medium text-left px-4 text-sm transition-colors ${t===Te.SURVEY?"text-blue-400 bg-white/10":"text-white/70 hover:bg-white/5"}`,children:"Enkt och utredning"}),d.jsx("button",{onClick:()=>v(Te.DOWNLOADS),className:`w-full py-3 rounded-xl font-medium text-left px-4 text-sm transition-colors ${t===Te.DOWNLOADS?"text-emerald-400 bg-white/10":"text-white/70 hover:bg-white/5"}`,children:"Nedladdningar"}),d.jsx("button",{onClick:()=>v(Te.MIT_EBOOK),className:`w-full py-3 rounded-xl font-medium text-left px-4 text-sm transition-colors ${t===Te.MIT_EBOOK?"text-amber-400 bg-white/10":"text-white/70 hover:bg-white/5"}`,children:"MiT E-bok (Introduktion)"})]})]}),d.jsxs("div",{className:"flex flex-col gap-1",children:[d.jsx("button",{onClick:()=>v(Te.BLOG),className:`w-full py-3 rounded-xl font-bold text-left px-4 transition-colors ${t===Te.BLOG?"text-orange-400 bg-white/10":"text-white/80 hover:bg-white/5"}`,children:"Blogg"}),d.jsx("button",{onClick:()=>v(Te.CONTACT),className:`w-full py-3 rounded-xl font-bold text-left px-4 transition-colors ${t===Te.CONTACT?"text-orange-400 bg-white/10":"text-white/80 hover:bg-white/5"}`,children:"Kontakt & bokning"})]}),d.jsx("div",{className:"mt-2",children:d.jsxs("button",{onClick:()=>v(Te.LOGIN),className:`w-full py-4 rounded-2xl font-black text-center px-4 flex items-center justify-center gap-3 transition-all ${t===Te.LOGIN?"bg-orange-500 text-black shadow-lg shadow-orange-500/20":"bg-white/10 text-white hover:bg-white/20"}`,children:[d.jsx(U2,{size:20})," LOGGA IN"]})})]})})]})})})},VY=()=>d.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden pointer-events-none",children:[d.jsx("div",{className:"absolute bg-white/10 rounded-2xl shadow-[0_8px_32px_rgba(255,255,255,0.1)] animate-float",style:{width:"120px",height:"80px",top:"20%",left:"10%",transform:"rotate(15deg)",animationDelay:"0s"}}),d.jsx("div",{className:"absolute bg-white/10 rounded-xl shadow-[0_8px_32px_rgba(255,255,255,0.1)] animate-float",style:{width:"90px",height:"140px",top:"60%",right:"15%",transform:"rotate(-20deg)",animationDelay:"2s"}}),d.jsx("div",{className:"absolute bg-white/10 rounded-lg shadow-[0_8px_32px_rgba(255,255,255,0.1)] animate-float",style:{width:"100px",height:"60px",bottom:"20%",left:"20%",transform:"rotate(25deg)",animationDelay:"4s"}}),d.jsx("div",{className:"absolute bg-white/10 rounded-lg shadow-[0_8px_32px_rgba(255,255,255,0.1)] animate-float",style:{width:"80px",height:"120px",top:"10%",right:"30%",transform:"rotate(-10deg)",animationDelay:"1s"}}),d.jsx("div",{className:"absolute bg-white/10 rounded-2xl shadow-[0_8px_32px_rgba(255,255,255,0.1)] animate-float",style:{width:"110px",height:"70px",bottom:"40%",right:"20%",transform:"rotate(30deg)",animationDelay:"3s"}}),d.jsx("div",{className:"absolute bg-white/10 rounded-[20px] shadow-[0_8px_32px_rgba(255,255,255,0.1)] animate-float",style:{width:"95px",height:"95px",top:"40%",left:"5%",transform:"rotate(-15deg)",animationDelay:"5s"}})]});function pE(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function HY(t,e,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(h){try{u(r.next(h))}catch(m){s(m)}}function c(h){try{u(r.throw(h))}catch(m){s(m)}}function u(h){h.done?a(h.value):i(h.value).then(o,c)}u((r=r.apply(t,e||[])).next())})}const GY=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class _O extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class qY extends _O{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class H2 extends _O{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class G2 extends _O{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var rP;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(rP||(rP={}));class $Y{constructor(e,{headers:n={},customFetch:r,region:i=rP.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=GY(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return HY(this,arguments,void 0,function*(n,r={}){var i;let a,s;try{const{headers:o,method:c,body:u,signal:h,timeout:m}=r;let v={},{region:x}=r;x||(x=this.region);const _=new URL(`${this.url}/${n}`);x&&x!=="any"&&(v["x-region"]=x,_.searchParams.set("forceFunctionRegion",x));let T;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",T=u):typeof u=="string"?(v["Content-Type"]="text/plain",T=u):typeof FormData<"u"&&u instanceof FormData?T=u:(v["Content-Type"]="application/json",T=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?T=JSON.stringify(u):T=u;let w=h;m&&(s=new AbortController,a=setTimeout(()=>s.abort(),m),h?(w=s.signal,h.addEventListener("abort",()=>s.abort())):w=s.signal);const E=yield this.fetch(_.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),o),body:T,signal:w}).catch(I=>{throw new qY(I)}),N=E.headers.get("x-relay-error");if(N&&N==="true")throw new H2(E);if(!E.ok)throw new G2(E);let C=((i=E.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),P;return C==="application/json"?P=yield E.json():C==="application/octet-stream"||C==="application/pdf"?P=yield E.blob():C==="text/event-stream"?P=E:C==="multipart/form-data"?P=yield E.formData():P=yield E.text(),{data:P,error:null,response:E}}catch(o){return{data:null,error:o,response:o instanceof G2||o instanceof H2?o.context:void 0}}finally{a&&clearTimeout(a)}})}}var WY=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},KY=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let s=null,o=null,c=null,u=a.status,h=a.statusText;if(a.ok){var m,v;if(n.method!=="HEAD"){var x;const E=await a.text();E===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((x=n.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?o=E:o=JSON.parse(E))}const T=(m=n.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),w=(v=a.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");T&&w&&w.length>1&&(c=parseInt(w[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(o)&&(o.length>1?(s={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,c=null,u=406,h="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var _;const T=await a.text();try{s=JSON.parse(T),Array.isArray(s)&&a.status===404&&(o=[],s=null,u=200,h="OK")}catch{a.status===404&&T===""?(u=204,h="No Content"):s={message:T}}if(s&&n.isMaybeSingle&&(!(s==null||(_=s.details)===null||_===void 0)&&_.includes("0 rows"))&&(s=null,u=200,h="OK"),s&&n.shouldThrowOnError)throw new WY(s)}return{error:s,data:o,count:c,status:u,statusText:h}});return this.shouldThrowOnError||(i=i.catch(a=>{var s;let o="";const c=a?.cause;if(c){var u,h,m,v;const _=(u=c?.message)!==null&&u!==void 0?u:"",T=(h=c?.code)!==null&&h!==void 0?h:"";o=`${(m=a?.name)!==null&&m!==void 0?m:"FetchError"}: ${a?.message}`,o+=`

Caused by: ${(v=c?.name)!==null&&v!==void 0?v:"Error"}: ${_}`,T&&(o+=` (${T})`),c?.stack&&(o+=`
${c.stack}`)}else{var x;o=(x=a?.stack)!==null&&x!==void 0?x:""}return{error:{message:`${(s=a?.name)!==null&&s!==void 0?s:"FetchError"}: ${a?.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},XY=class extends KY{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const a=i?`${i}.order`:"order",s=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${s?`${s},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:a="text"}={}){var s;const o=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(s=this.headers.get("Accept"))!==null&&s!==void 0?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${c}"; options=${o};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const q2=new RegExp("[,()]");var vg=class extends XY{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&q2.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&q2.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${a}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},YY=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let a=!1;const s=(t??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join(""),{url:o,headers:c}=this.cloneRequestState();return o.searchParams.set("select",s),r&&c.append("Prefer",`count=${r}`),new vg({method:i,url:o,headers:c,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST",{url:a,headers:s}=this.cloneRequestState();if(e&&s.append("Prefer",`count=${e}`),n||s.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(o.length>0){const c=[...new Set(o)].map(u=>`"${u}"`);a.searchParams.set("columns",c.join(","))}}return new vg({method:i,url:a,headers:s,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var a;const s="POST",{url:o,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&o.searchParams.set("on_conflict",e),r&&c.append("Prefer",`count=${r}`),i||c.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(u.length>0){const h=[...new Set(u)].map(m=>`"${m}"`);o.searchParams.set("columns",h.join(","))}}return new vg({method:s,url:o,headers:c,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(t,{count:e}={}){var n;const r="PATCH",{url:i,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new vg({method:r,url:i,headers:a,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE",{url:r,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new vg({method:n,url:r,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},JY=class QH{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new YY(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new QH(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:a}={}){var s;let o;const c=new URL(`${this.url}/rpc/${e}`);let u;const h=x=>x!==null&&typeof x=="object"&&(!Array.isArray(x)||x.some(h)),m=r&&Object.values(n).some(h);m?(o="POST",u=n):r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([x,_])=>_!==void 0).map(([x,_])=>[x,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([x,_])=>{c.searchParams.append(x,_)})):(o="POST",u=n);const v=new Headers(this.headers);return m?v.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&v.set("Prefer",`count=${a}`),new vg({method:o,url:c,headers:v,schema:this.schemaName,body:u,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};class ZY{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const i=r.node,a=parseInt(i.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const QY="2.91.0",eJ=`realtime-js/${QY}`,tJ="1.0.0",eG="2.0.0",$2=eG,iP=1e4,nJ=1e3,rJ=100;var sf;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(sf||(sf={}));var Fi;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Fi||(Fi={}));var Il;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Il||(Il={}));var aP;(function(t){t.websocket="websocket"})(aP||(aP={}));var Vh;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Vh||(Vh={}));class iJ{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},s=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(e,n,r){var i,a;const s=e.topic,o=(i=e.ref)!==null&&i!==void 0?i:"",c=(a=e.join_ref)!==null&&a!==void 0?a:"",u=e.payload.event,h=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},m=Object.keys(h).length===0?"":JSON.stringify(h);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`metadata length ${m.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+o.length+s.length+u.length+m.length,x=new ArrayBuffer(this.HEADER_LENGTH+v);let _=new DataView(x),T=0;_.setUint8(T++,this.KINDS.userBroadcastPush),_.setUint8(T++,c.length),_.setUint8(T++,o.length),_.setUint8(T++,s.length),_.setUint8(T++,u.length),_.setUint8(T++,m.length),_.setUint8(T++,n),Array.from(c,E=>_.setUint8(T++,E.charCodeAt(0))),Array.from(o,E=>_.setUint8(T++,E.charCodeAt(0))),Array.from(s,E=>_.setUint8(T++,E.charCodeAt(0))),Array.from(u,E=>_.setUint8(T++,E.charCodeAt(0))),Array.from(m,E=>_.setUint8(T++,E.charCodeAt(0)));var w=new Uint8Array(x.byteLength+r.byteLength);return w.set(new Uint8Array(x),0),w.set(new Uint8Array(r),x.byteLength),w.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,a,s,o,c]=r;return n({join_ref:i,ref:a,topic:s,event:o,payload:c})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,n,i)}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),a=n.getUint8(2),s=n.getUint8(3),o=n.getUint8(4);let c=this.HEADER_LENGTH+4;const u=r.decode(e.slice(c,c+i));c=c+i;const h=r.decode(e.slice(c,c+a));c=c+a;const m=r.decode(e.slice(c,c+s));c=c+s;const v=e.slice(c,e.byteLength),x=o===this.JSON_ENCODING?JSON.parse(r.decode(v)):v,_={type:this.BROADCAST_EVENT,event:h,payload:x};return s>0&&(_.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:_}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}let tG=class{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var kr;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(kr||(kr={}));const W2=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((a,s)=>(a[s]=aJ(s,t,e,i),a),{}):{}},aJ=(t,e,n,r)=>{const i=e.find(o=>o.name===t),a=i?.type,s=n[t];return a&&!r.includes(a)?nG(a,s):sP(s)},nG=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return cJ(e,n)}switch(t){case kr.bool:return sJ(e);case kr.float4:case kr.float8:case kr.int2:case kr.int4:case kr.int8:case kr.numeric:case kr.oid:return oJ(e);case kr.json:case kr.jsonb:return lJ(e);case kr.timestamp:return uJ(e);case kr.abstime:case kr.date:case kr.daterange:case kr.int4range:case kr.int8range:case kr.money:case kr.reltime:case kr.text:case kr.time:case kr.timestamptz:case kr.timetz:case kr.tsrange:case kr.tstzrange:return sP(e);default:return sP(e)}},sP=t=>t,sJ=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},oJ=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},lJ=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},cJ=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const s=t.slice(1,n);try{a=JSON.parse("["+s+"]")}catch{a=s?s.split(","):[]}return a.map(o=>nG(e,o))}return t},uJ=t=>typeof t=="string"?t.replace(" ","T"):t,rG=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class zk{constructor(e,n,r={},i=iP){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var K2;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(K2||(K2={}));class Xy{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:s,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Xy.syncState(this.state,i,a,s),this.pendingDiffs.forEach(c=>{this.state=Xy.syncDiff(this.state,c,a,s)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:s,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Xy.syncDiff(this.state,i,a,s),o())}),this.onJoin((i,a,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:s})}),this.onLeave((i,a,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const a=this.cloneDeep(e),s=this.transformState(n),o={},c={};return this.map(a,(u,h)=>{s[u]||(c[u]=h)}),this.map(s,(u,h)=>{const m=a[u];if(m){const v=h.map(w=>w.presence_ref),x=m.map(w=>w.presence_ref),_=h.filter(w=>x.indexOf(w.presence_ref)<0),T=m.filter(w=>v.indexOf(w.presence_ref)<0);_.length>0&&(o[u]=_),T.length>0&&(c[u]=T)}else o[u]=h}),this.syncDiff(a,{joins:o,leaves:c},r,i)}static syncDiff(e,n,r,i){const{joins:a,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(o,c)=>{var u;const h=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(c),h.length>0){const m=e[o].map(x=>x.presence_ref),v=h.filter(x=>m.indexOf(x.presence_ref)<0);e[o].unshift(...v)}r(o,h,c)}),this.map(s,(o,c)=>{let u=e[o];if(!u)return;const h=c.map(m=>m.presence_ref);u=u.filter(m=>h.indexOf(m.presence_ref)<0),e[o]=u,i(o,u,c),u.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var X2;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(X2||(X2={}));var Yy;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Yy||(Yy={}));var Pu;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Pu||(Pu={}));class wg{constructor(e,n={config:{}},r){var i,a;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Fi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new zk(this,Il.join,this.params,this.timeout),this.rejoinTimer=new tG(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Fi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fi.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Fi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Fi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Il.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Xy(this),this.broadcastEndpointURL=rG(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Fi.closed){const{config:{broadcast:s,presence:o,private:c}}=this.params,u=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(x=>x.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[Yy.PRESENCE]&&this.bindings[Yy.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,m={},v={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:h}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(x=>e?.(Pu.CHANNEL_ERROR,x)),this._onClose(()=>e?.(Pu.CLOSED)),this.updateJoinPayload(Object.assign({config:v},m)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:x})=>{var _;if(this.socket._isManualToken()||this.socket.setAuth(),x===void 0){e?.(Pu.SUBSCRIBED);return}else{const T=this.bindings.postgres_changes,w=(_=T?.length)!==null&&_!==void 0?_:0,E=[];for(let N=0;N<w;N++){const C=T[N],{filter:{event:P,schema:I,table:j,filter:O}}=C,F=x&&x[N];if(F&&F.event===P&&wg.isFilterValueEqual(F.schema,I)&&wg.isFilterValueEqual(F.table,j)&&wg.isFilterValueEqual(F.filter,O))E.push(Object.assign(Object.assign({},C),{id:F.id}));else{this.unsubscribe(),this.state=Fi.errored,e?.(Pu.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,e&&e(Pu.SUBSCRIBED);return}}).receive("error",x=>{this.state=Fi.errored,e?.(Pu.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e?.(Pu.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Fi.joined&&e===Yy.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const s={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(o.status===202)return{success:!0};let c=o.statusText;try{const u=await o.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:s}=e,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var s,o,c;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(s=this.params)===null||s===void 0?void 0:s.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Fi.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Il.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new zk(this,Il.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Fi.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),s}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new zk(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>rJ){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,a;const s=e.toLocaleLowerCase(),{close:o,error:c,leave:u,join:h}=Il;if(r&&[o,c,u,h].indexOf(s)>=0&&r!==this._joinRef())return;let v=this._onMessage(s,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(x=>{var _,T,w;return((_=x.filter)===null||_===void 0?void 0:_.event)==="*"||((w=(T=x.filter)===null||T===void 0?void 0:T.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===s}).map(x=>x.callback(v,r)):(a=this.bindings[s])===null||a===void 0||a.filter(x=>{var _,T,w,E,N,C,P,I;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in x){const j=x.id,O=(_=x.filter)===null||_===void 0?void 0:_.event;return j&&((T=n.ids)===null||T===void 0?void 0:T.includes(j))&&(O==="*"||O?.toLocaleLowerCase()===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))&&(!(!((E=x.filter)===null||E===void 0)&&E.table)||x.filter.table===((N=n.data)===null||N===void 0?void 0:N.table))}else{const j=(P=(C=x?.filter)===null||C===void 0?void 0:C.event)===null||P===void 0?void 0:P.toLocaleLowerCase();return j==="*"||j===((I=n?.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===s}).map(x=>{if(typeof v=="object"&&"ids"in v){const _=v.data,{schema:T,table:w,commit_timestamp:E,type:N,errors:C}=_;v=Object.assign(Object.assign({},{schema:T,table:w,commit_timestamp:E,eventType:N,new:{},old:{},errors:C}),this._getPayloadRecords(_))}x.callback(v,r)})}_isClosed(){return this.state===Fi.closed}_isJoined(){return this.state===Fi.joined}_isJoining(){return this.state===Fi.joining}_isLeaving(){return this.state===Fi.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),a={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&wg.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Il.close,{},e)}_onError(e){this._on(Il.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fi.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=W2(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=W2(e.columns,e.old_record)),n}}const Bk=()=>{},Rw={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},dJ=[1e3,2e3,5e3,1e4],fJ=1e4,hJ=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class pJ{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=iP,this.transport=null,this.heartbeatIntervalMs=Rw.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bk,this.ref=0,this.reconnectTimer=null,this.vsn=$2,this.logger=Bk,this.conn=null,this.sendBuffer=[],this.serializer=new iJ,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${aP.websocket}`,this.httpEndpoint=rG(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ZY.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case sf.connecting:return Vh.Connecting;case sf.open:return Vh.Open;case sf.closing:return Vh.Closing;default:return Vh.Closed}}isConnected(){return this.connectionState()===Vh.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new wg(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:r,payload:i,ref:a}=e,s=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${n} ${r} (${a})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(nJ,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Rw.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",u)}catch(h){this.log("error","error in heartbeat callback",h)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:i,payload:a,ref:s}=n,o=s?`(${s})`:"",c=a.status||"";this.log("receive",`${c} ${r} ${i} ${o}`.trim(),a),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,a,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===sf.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===sf.open||this.conn.readyState===sf.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Il.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([hJ],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const a={access_token:n,version:eJ};n&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(Il.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new tG(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Rw.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,a,s,o,c,u,h,m,v,x;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:iP,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:Rw.HEARTBEAT_INTERVAL,this.worker=(a=e?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(s=e?.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(o=e?.heartbeatCallback)!==null&&o!==void 0?o:Bk,this.vsn=(c=e?.vsn)!==null&&c!==void 0?c:$2,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e?.reconnectAfterMs)!==null&&u!==void 0?u:(_=>dJ[_-1]||fJ),this.vsn){case tJ:this.encode=(h=e?.encode)!==null&&h!==void 0?h:((_,T)=>T(JSON.stringify(_))),this.decode=(m=e?.decode)!==null&&m!==void 0?m:((_,T)=>T(JSON.parse(_)));break;case eG:this.encode=(v=e?.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(x=e?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var xx=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function mJ(t,e,n){const r=new URL(e,t);if(n)for(const[i,a]of Object.entries(n))a!==void 0&&r.searchParams.set(i,a);return r.toString()}async function gJ(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function vJ(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:a,headers:s}){const o=mJ(t.baseUrl,r,i),c=await gJ(t.auth),u=await e(o,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...c,...s},body:a?JSON.stringify(a):void 0}),h=await u.text(),m=(u.headers.get("content-type")||"").includes("application/json"),v=m&&h?JSON.parse(h):h;if(!u.ok){const x=m?v:void 0,_=x?.error;throw new xx(_?.message??`Request failed with status ${u.status}`,{status:u.status,icebergType:_?.type,icebergCode:_?.code,details:x})}return{status:u.status,headers:u.headers,data:v}}}}function Iw(t){return t.join("")}var yJ=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Iw(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Iw(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Iw(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Iw(t.namespace)}`}),!0}catch(e){if(e instanceof xx&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof xx&&n.status===409)return;throw n}}};function Lm(t){return t.join("")}var xJ=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Lm(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Lm(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Lm(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Lm(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Lm(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Lm(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof xx&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof xx&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},bJ=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=vJ({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new yJ(this.client,e),this.tableOps=new xJ(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},mE=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Zr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var _J=class extends mE{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},oP=class extends mE{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const wO=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),wJ=()=>Response,lP=t=>{if(Array.isArray(t))return t.map(n=>lP(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=lP(r)}),e},SJ=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},TJ=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function bx(t){"@babel/helpers - typeof";return bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bx(t)}function EJ(t,e){if(bx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AJ(t){var e=EJ(t,"string");return bx(e)=="symbol"?e:e+""}function kJ(t,e,n){return(e=AJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y2(Object(n),!0).forEach(function(r){kJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Fk=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},MJ=async(t,e,n)=>{t instanceof await wJ()&&!n?.noResolveJson?t.json().then(r=>{const i=t.status||500,a=r?.statusCode||i+"";e(new _J(Fk(r),i,a))}).catch(r=>{e(new oP(Fk(r),r))}):e(new oP(Fk(t),t))},NJ=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"||!r?i:(SJ(r)?(i.headers=Qt({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),Qt(Qt({},i),n))};async function kb(t,e,n,r,i,a){return new Promise((s,o)=>{t(n,NJ(e,r,i,a)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>MJ(c,o,r))})}async function _x(t,e,n,r){return kb(t,"GET",e,n,r)}async function Rl(t,e,n,r,i){return kb(t,"POST",e,r,i,n)}async function cP(t,e,n,r,i){return kb(t,"PUT",e,r,i,n)}async function CJ(t,e,n,r){return kb(t,"HEAD",e,Qt(Qt({},n),{},{noResolveJson:!0}),r)}async function SO(t,e,n,r,i){return kb(t,"DELETE",e,r,i,n)}var RJ=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Zr(e))return{data:null,error:e};throw e}}};let iG;iG=Symbol.toStringTag;var IJ=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[iG]="BlobDownloadBuilder",this.promise=null}asStream(){return new RJ(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Zr(e))return{data:null,error:e};throw e}}};const PJ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},J2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var OJ=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=wO(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var i=this;try{let a;const s=Qt(Qt({},J2),r);let o=Qt(Qt({},i.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),c&&a.append("metadata",i.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",s.cacheControl),c&&!a.has("metadata")&&a.append("metadata",i.encodeMetadata(c))):(a=n,o["cache-control"]=`max-age=${s.cacheControl}`,o["content-type"]=s.contentType,c&&(o["x-metadata"]=i.toBase64(i.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!s.duplex&&(s.duplex="half")),r?.headers&&(o=Qt(Qt({},o),r.headers));const u=i._removeEmptyFolders(e),h=i._getFinalPath(u),m=await(t=="PUT"?cP:Rl)(i.fetch,`${i.url}/object/${h}`,a,Qt({headers:o},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:m.Id,fullPath:m.Key},error:null}}catch(a){if(i.shouldThrowOnError)throw a;if(Zr(a))return{data:null,error:a};throw a}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const a=i._removeEmptyFolders(t),s=i._getFinalPath(a),o=new URL(i.url+`/object/upload/sign/${s}`);o.searchParams.set("token",e);try{let c;const u=Qt({upsert:J2.upsert},r),h=Qt(Qt({},i.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType),{data:{path:a,fullPath:(await cP(i.fetch,o.toString(),c,{headers:h})).Key},error:null}}catch(c){if(i.shouldThrowOnError)throw c;if(Zr(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const i=Qt({},n.headers);e?.upsert&&(i["x-upsert"]="true");const a=await Rl(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(n.url+a.url),o=s.searchParams.get("token");if(!o)throw new mE("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:o},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Zr(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await Rl(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Zr(i))return{data:null,error:i};throw i}}async copy(t,e,n){var r=this;try{return{data:{path:(await Rl(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Zr(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,n){var r=this;try{let i=r._getFinalPath(t),a=await Rl(r.fetch,`${r.url}/object/sign/${i}`,Qt({expiresIn:e},n?.transform?{transform:n.transform}:{}),{headers:r.headers});const s=n?.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${r.url}${a.signedURL}${s}`)},{data:a,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Zr(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,n){var r=this;try{const i=await Rl(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),a=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(s=>Qt(Qt({},s),{},{signedUrl:s.signedURL?encodeURI(`${r.url}${s.signedURL}${a}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Zr(i))return{data:null,error:i};throw i}}download(t,e){const n=typeof e?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(e?.transform||{}),i=r?`?${r}`:"",a=this._getFinalPath(t),s=()=>_x(this.fetch,`${this.url}/${n}/${a}${i}`,{headers:this.headers,noResolveJson:!0});return new IJ(s,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:lP(await _x(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Zr(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await CJ(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Zr(r)&&r instanceof oP){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e?.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const a=typeof e?.transform<"u"?"render/image":"object",s=this.transformOptsToQueryString(e?.transform||{});s!==""&&r.push(s);let o=r.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${o}`)}}}async remove(t){var e=this;try{return{data:await SO(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zr(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const i=Qt(Qt(Qt({},PJ),e),{},{prefix:t||""});return{data:await Rl(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Zr(i))return{data:null,error:i};throw i}}async listV2(t,e){var n=this;try{const r=Qt({},t);return{data:await Rl(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Zr(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const aG="2.91.0",sG={"X-Client-Info":`storage-js/${aG}`};var jJ=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const i=new URL(t);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Qt(Qt({},sG),e),this.fetch=wO(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await _x(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zr(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await _x(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zr(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await Rl(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Zr(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await cP(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Zr(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await Rl(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zr(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await SO(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zr(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},DJ=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Qt(Qt({},sG),e),this.fetch=wO(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Rl(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zr(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await _x(e.fetch,i,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zr(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await SO(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zr(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!TJ(t))throw new mE("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new bJ({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,a){const s=i[a];return typeof s!="function"?s:async(...o)=>{try{return{data:await s.apply(i,o),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}};const TO={"X-Client-Info":`storage-js/${aG}`,"Content-Type":"application/json"};var oG=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function so(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Vk=class extends oG{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},LJ=class extends oG{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const EO=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),UJ=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Z2=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),zJ=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const r=t.status||500,i=t;if(typeof i.json=="function")i.json().then(a=>{const s=a?.statusCode||a?.code||r+"";e(new Vk(Z2(a),r,s))}).catch(()=>{const a=r+"";e(new Vk(i.statusText||`HTTP ${r} error`,r,a))});else{const a=r+"";e(new Vk(i.statusText||`HTTP ${r} error`,r,a))}}else e(new LJ(Z2(t),t))},BJ=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return r?(UJ(r)?(i.headers=Qt({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,Qt(Qt({},i),n)):i};async function FJ(t,e,n,r,i,a){return new Promise((s,o)=>{t(n,BJ(e,r,i,a)).then(c=>{if(!c.ok)throw c;if(r?.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>s(c)).catch(c=>zJ(c,o,r))})}async function oo(t,e,n,r,i){return FJ(t,"POST",e,r,i,n)}var VJ=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Qt(Qt({},TO),e),this.fetch=EO(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await oo(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(so(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await oo(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(so(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await oo(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(so(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await oo(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(so(r))return{data:null,error:r};throw r}}},HJ=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Qt(Qt({},TO),e),this.fetch=EO(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await oo(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(so(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await oo(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(so(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await oo(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(so(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await oo(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(so(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await oo(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(so(n))return{data:null,error:n};throw n}}},GJ=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Qt(Qt({},TO),e),this.fetch=EO(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await oo(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(so(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await oo(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(so(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await oo(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(so(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await oo(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(so(n))return{data:null,error:n};throw n}}},qJ=class extends GJ{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new $J(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},$J=class extends VJ{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,Qt(Qt({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,Qt(Qt({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new WJ(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},WJ=class extends HJ{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,Qt(Qt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,Qt(Qt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,Qt(Qt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,Qt(Qt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,Qt(Qt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},KJ=class extends jJ{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new OJ(this.url,this.headers,t,this.fetch)}get vectors(){return new qJ(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new DJ(this.url+"/iceberg",this.headers,this.fetch)}};const lG="2.91.0",yg=30*1e3,uP=3,Hk=uP*yg,XJ="http://localhost:9999",YJ="supabase.auth.token",JJ={"X-Client-Info":`gotrue-js/${lG}`},dP="X-Supabase-Api-Version",cG={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ZJ=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,QJ=600*1e3;class wx extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function zt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class eZ extends wx{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function tZ(t){return zt(t)&&t.name==="AuthApiError"}class Hh extends wx{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Zu extends wx{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class no extends Zu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function nZ(t){return zt(t)&&t.name==="AuthSessionMissingError"}class Um extends Zu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Pw extends Zu{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ow extends Zu{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function rZ(t){return zt(t)&&t.name==="AuthImplicitGrantRedirectError"}class Q2 extends Zu{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class iZ extends Zu{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class fP extends Zu{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Gk(t){return zt(t)&&t.name==="AuthRetryableFetchError"}class eL extends Zu{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class hP extends Zu{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const s1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tL=` 	
\r=`.split(""),aZ=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<tL.length;e+=1)t[tL[e].charCodeAt(0)]=-2;for(let e=0;e<s1.length;e+=1)t[s1[e].charCodeAt(0)]=e;return t})();function nL(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(s1[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(s1[r]),e.queuedBits-=6}}function uG(t,e,n){const r=aZ[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function rL(t){const e=[],n=s=>{e.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=s=>{lZ(s,r,n)};for(let s=0;s<t.length;s+=1)uG(t.charCodeAt(s),i,a);return e.join("")}function sZ(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function oZ(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}sZ(r,e)}}function lZ(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Pg(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)uG(t.charCodeAt(i),n,r);return new Uint8Array(e)}function cZ(t){const e=[];return oZ(t,n=>e.push(n)),new Uint8Array(e)}function $h(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>nL(i,n,r)),nL(null,n,r),e.join("")}function uZ(t){return Math.round(Date.now()/1e3)+t}function dZ(){return Symbol("auth-callback")}const xa=()=>typeof window<"u"&&typeof document<"u",yh={tested:!1,writable:!1},dG=()=>{if(!xa())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(yh.tested)return yh.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),yh.tested=!0,yh.writable=!0}catch{yh.tested=!0,yh.writable=!1}return yh.writable};function fZ(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const fG=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),hZ=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",xg=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},xh=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ya=async(t,e)=>{await t.removeItem(e)};class gE{constructor(){this.promise=new gE.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}gE.promiseConstructor=Promise;function qk(t){const e=t.split(".");if(e.length!==3)throw new hP("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!ZJ.test(e[r]))throw new hP("JWT not in base64url format");return{header:JSON.parse(rL(e[0])),payload:JSON.parse(rL(e[1])),signature:Pg(e[2]),raw:{header:e[0],payload:e[1]}}}async function pZ(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function mZ(t,e){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const s=await t(a);if(!e(a,null,s)){r(s);return}}catch(s){if(!e(a,s)){i(s);return}}})()})}function gZ(t){return("0"+t.toString(16)).substr(-2)}function vZ(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,gZ).join("")}async function yZ(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function xZ(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await yZ(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zm(t,e,n=!1){const r=vZ();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await xg(t,`${e}-code-verifier`,i);const a=await xZ(r);return[a,r===a?"plain":"s256"]}const bZ=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _Z(t){const e=t.headers.get(dP);if(!e||!e.match(bZ))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function wZ(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function SZ(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const TZ=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Bm(t){if(!TZ.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function $k(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function EZ(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function iL(t){return JSON.parse(JSON.stringify(t))}const Lh=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),AZ=[502,503,504];async function aL(t){var e;if(!hZ(t))throw new fP(Lh(t),0);if(AZ.includes(t.status))throw new fP(Lh(t),t.status);let n;try{n=await t.json()}catch(a){throw new Hh(Lh(a),a)}let r;const i=_Z(t);if(i&&i.getTime()>=cG["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new eL(Lh(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new no}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0))throw new eL(Lh(n),t.status,n.weak_password.reasons);throw new eZ(Lh(n),t.status||500,r)}const kZ=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Zt(t,e,n,r){var i;const a=Object.assign({},r?.headers);a[dP]||(a[dP]=cG["2024-01-01"].name),r?.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);const o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await MZ(t,e,n+o,{headers:a,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}async function MZ(t,e,n,r,i,a){const s=kZ(e,r,i,a);let o;try{o=await t(n,Object.assign({},s))}catch(c){throw console.error(c),new fP(Lh(c),0)}if(o.ok||await aL(o),r?.noResolveJson)return o;try{return await o.json()}catch(c){await aL(c)}}function Cl(t){var e;let n=null;RZ(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=uZ(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function sL(t){const e=Cl(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function uf(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function NZ(t){return{data:t,error:null}}function CZ(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=t,s=pE(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},c=Object.assign({},s);return{data:{properties:o,user:c},error:null}}function oL(t){return t}function RZ(t){return t.access_token&&t.refresh_token&&t.expires_in}const Wk=["global","local","others"];class IZ{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=fG(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Wk[0]){if(Wk.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Wk.join(", ")}`);try{return await Zt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(zt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Zt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:uf})}catch(r){if(zt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=pE(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await Zt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:CZ,redirectTo:n?.redirectTo})}catch(n){if(zt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Zt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:uf})}catch(n){if(zt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,a,s,o,c;try{const u={nextPage:null,lastPage:0,total:0},h=await Zt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:oL});if(h.error)throw h.error;const m=await h.json(),v=(s=h.headers.get("x-total-count"))!==null&&s!==void 0?s:0,x=(c=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(_=>{const T=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(_.split(";")[1].split("=")[1]);u[`${w}Page`]=T}),u.total=parseInt(v)),{data:Object.assign(Object.assign({},m),u),error:null}}catch(u){if(zt(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Bm(e);try{return await Zt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:uf})}catch(n){if(zt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Bm(e);try{return await Zt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:uf})}catch(r){if(zt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Bm(e);try{return await Zt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:uf})}catch(r){if(zt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Bm(e.userId);try{const{data:n,error:r}=await Zt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(zt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Bm(e.userId),Bm(e.id);try{return{data:await Zt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(zt(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,a,s,o,c;try{const u={nextPage:null,lastPage:0,total:0},h=await Zt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:oL});if(h.error)throw h.error;const m=await h.json(),v=(s=h.headers.get("x-total-count"))!==null&&s!==void 0?s:0,x=(c=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(_=>{const T=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(_.split(";")[1].split("=")[1]);u[`${w}Page`]=T}),u.total=parseInt(v)),{data:Object.assign(Object.assign({},m),u),error:null}}catch(u){if(zt(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await Zt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(zt(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Zt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(zt(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Zt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(zt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Zt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(zt(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Zt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(zt(n))return{data:null,error:n};throw n}}}function lL(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Fm={debug:!!(globalThis&&dG()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class hG extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class PZ extends hG{}async function OZ(t,e,n){Fm.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Fm.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Fm.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Fm.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Fm.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new PZ(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Fm.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function jZ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function pG(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function DZ(t){return parseInt(t,16)}function LZ(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function UZ(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:a=new Date,nonce:s,notBefore:o,requestId:c,resources:u,scheme:h,uri:m,version:v}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const x=pG(t.address),_=h?`${h}://${r}`:r,T=t.statement?`${t.statement}
`:"",w=`${_} wants you to sign in with your Ethereum account:
${x}

${T}`;let E=`URI: ${m}
Version: ${v}
Chain ID: ${n}${s?`
Nonce: ${s}`:""}
Issued At: ${a.toISOString()}`;if(i&&(E+=`
Expiration Time: ${i.toISOString()}`),o&&(E+=`
Not Before: ${o.toISOString()}`),c&&(E+=`
Request ID: ${c}`),u){let N=`
Resources:`;for(const C of u){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);N+=`
- ${C}`}E+=N}return`${w}
${E}`}class Ci extends Error{constructor({message:e,code:n,cause:r,name:i}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=i??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class o1 extends Ci{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function zZ({error:t,options:e}){var n,r,i;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ci({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Ci({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ci({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ci({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Ci({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Ci({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new Ci({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Ci({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(mG(s)){if(a.rp.id!==s)return new Ci({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ci({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Ci({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Ci({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ci({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function BZ({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ci({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Ci({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(mG(r)){if(n.rpId!==r)return new Ci({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ci({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Ci({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ci({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class FZ{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const VZ=new FZ;function HZ(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=pE(t,["challenge","user","excludeCredentials"]),a=Pg(e).buffer,s=Object.assign(Object.assign({},n),{id:Pg(n.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:a,user:s});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];o.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Pg(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function GZ(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=pE(t,["challenge","allowCredentials"]),i=Pg(e).buffer,a=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let s=0;s<n.length;s++){const o=n[s];a.allowCredentials[s]=Object.assign(Object.assign({},o),{id:Pg(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return a}function qZ(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:$h(new Uint8Array(t.response.attestationObject)),clientDataJSON:$h(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function $Z(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:$h(new Uint8Array(i.authenticatorData)),clientDataJSON:$h(new Uint8Array(i.clientDataJSON)),signature:$h(new Uint8Array(i.signature)),userHandle:i.userHandle?$h(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function mG(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function cL(){var t,e;return!!(xa()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function WZ(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new o1("Browser returned unexpected credential type",e)}:{data:null,error:new o1("Empty credential response",e)}}catch(e){return{data:null,error:zZ({error:e,options:t})}}}async function KZ(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new o1("Browser returned unexpected credential type",e)}:{data:null,error:new o1("Empty credential response",e)}}catch(e){return{data:null,error:BZ({error:e,options:t})}}}const XZ={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},YZ={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function l1(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const a in i){const s=i[a];if(s!==void 0)if(Array.isArray(s))r[a]=s;else if(n(s))r[a]=s;else if(e(s)){const o=r[a];e(o)?r[a]=l1(o,s):r[a]=l1(s)}else r[a]=s}return r}function JZ(t,e){return l1(XZ,t,e||{})}function ZZ(t,e){return l1(YZ,t,e||{})}class QZ{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},a){try{const{data:s,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!s)return{data:null,error:o};const c=i??VZ.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=JZ(s.webauthn.credential_options.publicKey,a?.create),{data:h,error:m}=await WZ({publicKey:u,signal:c});return h?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:h}},error:null}:{data:null,error:m}}case"request":{const u=ZZ(s.webauthn.credential_options.publicKey,a?.request),{data:h,error:m}=await KZ(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:c}));return h?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:h}},error:null}:{data:null,error:m}}}}catch(s){return zt(s)?{data:null,error:s}:{data:null,error:new Hh("Unexpected error in challenge",s)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new wx("rpId is required for WebAuthn authentication")};try{if(!cL())return{data:null,error:new Hh("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:a});if(!s)return{data:null,error:o};const{webauthn:c}=s;return this._verify({factorId:e,challengeId:s.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(s){return zt(s)?{data:null,error:s}:{data:null,error:new Hh("Unexpected error in authenticate",s)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new wx("rpId is required for WebAuthn registration")};try{if(!cL())return{data:null,error:new Hh("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this._enroll({friendlyName:e});if(!s)return await this.client.mfa.listFactors().then(h=>{var m;return(m=h.data)===null||m===void 0?void 0:m.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h?.id}):void 0),{data:null,error:o};const{data:c,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:a});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(s){return zt(s)?{data:null,error:s}:{data:null,error:new Hh("Unexpected error in register",s)}}}}jZ();const eQ={url:XJ,storageKey:YJ,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:JJ,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function uL(t,e,n){return await n()}const Vm={};class Sx{get jwks(){var e,n;return(n=(e=Vm[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Vm[this.storageKey]=Object.assign(Object.assign({},Vm[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Vm[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Vm[this.storageKey]=Object.assign(Object.assign({},Vm[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},eQ),e);if(this.storageKey=a.storageKey,this.instanceID=(n=Sx.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Sx.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&xa()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new IZ({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=fG(a.fetch),this.lock=a.lock||uL,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&xa()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=OZ:this.lock=uL,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new QZ(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:dG()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=lL(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=lL(this.memoryStorage)),xa()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${lG}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(xa()&&(n=fZ(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),xa()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),rZ(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:s,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),await this._saveSession(s),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return zt(n)?this._returnResult({error:n}):this._returnResult({error:new Hh("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const a=await Zt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Cl}),{data:s,error:o}=a;if(o||!s)return this._returnResult({data:{user:null,session:null},error:o});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(zt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var n,r,i;try{let a;if("email"in e){const{email:h,password:m,options:v}=e;let x=null,_=null;this.flowType==="pkce"&&([x,_]=await zm(this.storage,this.storageKey)),a=await Zt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:h,password:m,data:(n=v?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:x,code_challenge_method:_},xform:Cl})}else if("phone"in e){const{phone:h,password:m,options:v}=e;a=await Zt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:m,data:(r=v?.data)!==null&&r!==void 0?r:{},channel:(i=v?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Cl})}else throw new Pw("You must provide either an email or phone number and a password");const{data:s,error:o}=a;if(o||!s)return await ya(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(await ya(this.storage,`${this.storageKey}-code-verifier`),zt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:s,options:o}=e;n=await Zt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:sL})}else if("phone"in e){const{phone:a,password:s,options:o}=e;n=await Zt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:sL})}else throw new Pw("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const a=new Um;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(zt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,a,s,o,c,u,h,m,v;let x,_;if("message"in e)x=e.message,_=e.signature;else{const{chain:T,wallet:w,statement:E,options:N}=e;let C;if(xa())if(typeof w=="object")C=w;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")C=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=w}const P=new URL((n=N?.url)!==null&&n!==void 0?n:window.location.href),I=await C.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!I||I.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=pG(I[0]);let O=(r=N?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!O){const L=await C.request({method:"eth_chainId"});O=DZ(L)}const F={domain:P.host,address:j,statement:E,uri:P.href,version:"1",chainId:O,nonce:(i=N?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(s=(a=N?.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(o=N?.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=N?.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=N?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=N?.signInWithEthereum)===null||h===void 0?void 0:h.resources};x=UZ(F),_=await C.request({method:"personal_sign",params:[LZ(x),j]})}try{const{data:T,error:w}=await Zt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:_},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Cl});if(w)throw w;if(!T||!T.session||!T.user){const E=new Um;return this._returnResult({data:{user:null,session:null},error:E})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:w})}catch(T){if(zt(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async signInWithSolana(e){var n,r,i,a,s,o,c,u,h,m,v,x;let _,T;if("message"in e)_=e.message,T=e.signature;else{const{chain:w,wallet:E,statement:N,options:C}=e;let P;if(xa())if(typeof E=="object")P=E;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))P=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!C?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=E}const I=new URL((n=C?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in P&&P.signIn){const j=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C?.signInWithSolana),{version:"1",domain:I.host,uri:I.href}),N?{statement:N}:null));let O;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")O=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)O=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)_=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),T=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${I.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${I.href}`,`Issued At: ${(i=(r=C?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=C?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((s=C?.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((o=C?.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((c=C?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((u=C?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((m=(h=C?.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||m===void 0)&&m.length?["Resources",...C.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const j=await P.signMessage(new TextEncoder().encode(_),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");T=j}}try{const{data:w,error:E}=await Zt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:$h(T)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Cl});if(E)throw E;if(!w||!w.session||!w.user){const N=new Um;return this._returnResult({data:{user:null,session:null},error:N})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:E})}catch(w){if(zt(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(e){const n=await xh(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new iZ;const{data:a,error:s}=await Zt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Cl});if(await ya(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!a||!a.session||!a.user){const o=new Um;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return a.session&&(await this._saveSession(a.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",a.session)},0)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:s})}catch(a){if(await ya(this.storage,`${this.storageKey}-code-verifier`),zt(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:a,nonce:s}=e,o=await Zt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Cl}),{data:c,error:u}=o;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const h=new Um;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(n){if(zt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,a,s;try{if("email"in e){const{email:o,options:c}=e;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await zm(this.storage,this.storageKey));const{error:m}=await Zt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=c?.data)!==null&&n!==void 0?n:{},create_user:(r=c?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in e){const{phone:o,options:c}=e,{data:u,error:h}=await Zt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=c?.data)!==null&&i!==void 0?i:{},create_user:(a=c?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(s=c?.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:h})}throw new Pw("You must provide either an email or phone number.")}catch(o){if(await ya(this.storage,`${this.storageKey}-code-verifier`),zt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(e){var n,r;try{let i,a;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:s,error:o}=await Zt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Cl});if(o)throw o;if(!s)throw new Error("An error occurred on token verification.");const c=s.session,u=s.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(zt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,a,s;try{let o=null,c=null;this.flowType==="pkce"&&([o,c]=await zm(this.storage,this.storageKey));const u=await Zt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:NZ});return!((a=u.data)===null||a===void 0)&&a.url&&xa()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(o){if(await ya(this.storage,`${this.storageKey}-code-verifier`),zt(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new no;const{error:i}=await Zt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(zt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:a}=e,{error:s}=await Zt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in e){const{phone:r,type:i,options:a}=e,{data:s,error:o}=await Zt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s?.message_id},error:o})}throw new Pw("You must provide either an email or phone number and a type")}catch(n){if(zt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await xh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Hk:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const s=await xh(this.userStorage,this.storageKey+"-user");s?.user?e.user=s.user:e.user=$k()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};e.user=EZ(e.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await Zt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:uf}):await this._useSession(async n=>{var r,i,a;const{data:s,error:o}=n;if(o)throw o;return!(!((r=s.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new no}:await Zt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:uf})})}catch(n){if(zt(n))return nZ(n)&&(await this._removeSession(),await ya(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new no;const s=i.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await zm(this.storage,this.storageKey));const{data:u,error:h}=await Zt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:s.access_token,xform:uf});if(h)throw h;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(r){if(await ya(this.storage,`${this.storageKey}-code-verifier`),zt(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new no;const n=Date.now()/1e3;let r=n,i=!0,a=null;const{payload:s}=qk(e.access_token);if(s.exp&&(r=s.exp,i=r<=n),i){const{data:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(zt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:s,error:o}=n;if(o)throw o;e=(r=s.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new no;const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(zt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!xa())throw new Ow("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ow(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Q2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ow("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Q2("No code detected.");const{data:N,error:C}=await this._exchangeCodeForSession(e.code);if(C)throw C;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:s,expires_in:o,expires_at:c,token_type:u}=e;if(!a||!o||!s||!u)throw new Ow("No session defined in URL");const h=Math.round(Date.now()/1e3),m=parseInt(o);let v=h+m;c&&(v=parseInt(c));const x=v-h;x*1e3<=yg&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${m}s`);const _=v-m;h-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,v,h):h-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,v,h);const{data:T,error:w}=await this._getUser(a);if(w)throw w;const E={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:m,expires_at:v,refresh_token:s,token_type:u,user:T.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:E,redirectType:e.type},error:null})}catch(r){if(zt(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await xh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({error:a});const s=(r=i.session)===null||r===void 0?void 0:r.access_token;if(s){const{error:o}=await this.admin.signOut(s,e);if(o&&!(tZ(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return e!=="others"&&(await this._removeSession(),await ya(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=dZ(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:a},error:s}=n;if(s)throw s;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await zm(this.storage,this.storageKey,!0));try{return await Zt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(await ya(this.storage,`${this.storageKey}-code-verifier`),zt(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(zt(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async a=>{var s,o,c,u,h;const{data:m,error:v}=a;if(v)throw v;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Zt(this.fetch,"GET",x,{headers:this.headers,jwt:(h=(u=m.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return xa()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:e.provider,url:r?.url},error:null})}catch(r){if(zt(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:a}}=n;if(i)throw i;const{options:s,provider:o,token:c,access_token:u,nonce:h}=e,m=await Zt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:o,id_token:c,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Cl}),{data:v,error:x}=m;return x?this._returnResult({data:{user:null,session:null},error:x}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new Um}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:x}))}catch(i){if(await ya(this.storage,`${this.storageKey}-code-verifier`),zt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:a,error:s}=n;if(s)throw s;return await Zt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(zt(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await mZ(async i=>(i>0&&await pZ(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Zt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Cl})),(i,a)=>{const s=200*Math.pow(2,i);return a&&Gk(a)&&Date.now()+s-r<yg})}catch(r){if(this._debug(n,"error",r),zt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),xa()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await xh(this.storage,this.storageKey);if(i&&this.userStorage){let s=await xh(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await xg(this.userStorage,this.storageKey+"-user",s)),i.user=(e=s?.user)!==null&&e!==void 0?e:$k()}else if(i&&!i.user&&!i.user){const s=await xh(this.storage,this.storageKey+"-user");s&&s?.user?(i.user=s.user,await ya(this.storage,this.storageKey+"-user"),await xg(this.storage,this.storageKey,i)):i.user=$k()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Hk;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${Hk}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),Gk(s)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:o}=await this._getUser(i.access_token);!o&&s?.user?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(r,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new no;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new gE;const{data:a,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!a.session)throw new no;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={data:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(i,"error",a),zt(a)){const s={data:null,error:a};return Gk(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],s=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(c){a.push(c)}});if(await Promise.all(s),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ya(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await xg(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=iL(i);await xg(this.storage,this.storageKey,a)}else{const i=iL(n);await xg(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ya(this.storage,this.storageKey),await ya(this.storage,this.storageKey+"-code-verifier"),await ya(this.storage,this.storageKey+"-user"),this.userStorage&&await ya(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&xa()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),yg);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/yg);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${yg}ms, refresh threshold is ${uP} ticks`),i<=uP&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof hG)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!xa()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,s]=await zm(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(o.toString())}if(r?.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?this._returnResult({data:null,error:a}):await Zt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(zt(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:a,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await Zt(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&c.type==="totp"&&(!((i=c?.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(n){if(zt(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?qZ(e.webauthn.credential_response):$Z(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:c}=await Zt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:s,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:c}))})}catch(n){if(zt(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const s=await Zt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});if(s.error)return s;const{data:o}=s;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:HZ(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:GZ(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(zt(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=n?.factors)!==null&&e!==void 0?e:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=qk(r.access_token);let s=null;a.aal&&(s=a.aal);let o=s;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(o="aal2");const u=a.amr||[];return{data:{currentLevel:s,nextLevel:o,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await Zt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new no})})}catch(n){if(zt(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new no});const s=await Zt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&xa()&&!n?.skipBrowserRedirect&&window.location.assign(s.data.redirect_url),s})}catch(r){if(zt(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new no});const s=await Zt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&xa()&&!n?.skipBrowserRedirect&&window.location.assign(s.data.redirect_url),s})}catch(r){if(zt(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await Zt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new no})})}catch(e){if(zt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await Zt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new no})})}catch(n){if(zt(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+QJ>i)return r;const{data:a,error:s}=await Zt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:x,error:_}=await this.getSession();if(_||!x.session)return this._returnResult({data:null,error:_});r=x.session.access_token}const{header:i,payload:a,signature:s,raw:{header:o,payload:c}}=qk(r);n?.allowExpired||wZ(a.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!u){const{error:x}=await this.getUser(r);if(x)throw x;return{data:{claims:a,header:i,signature:s},error:null}}const h=SZ(i.alg),m=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,m,s,cZ(`${o}.${c}`)))throw new hP("Invalid JWT signature");return{data:{claims:a,header:i,signature:s},error:null}}catch(r){if(zt(r))return this._returnResult({data:null,error:r});throw r}}}Sx.nextInstanceID={};const tQ=Sx,nQ="2.91.0";let zy="";typeof Deno<"u"?zy="deno":typeof document<"u"?zy="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zy="react-native":zy="node";const rQ={"X-Client-Info":`supabase-js-${zy}/${nQ}`},iQ={headers:rQ},aQ={schema:"public"},sQ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},oQ={};function Tx(t){"@babel/helpers - typeof";return Tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tx(t)}function lQ(t,e){if(Tx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cQ(t){var e=lQ(t,"string");return Tx(e)=="symbol"?e:e+""}function uQ(t,e,n){return(e=cQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ci(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dL(Object(n),!0).forEach(function(r){uQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const dQ=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),fQ=()=>Headers,hQ=(t,e,n)=>{const r=dQ(n),i=fQ();return async(a,s)=>{var o;const c=(o=await e())!==null&&o!==void 0?o:t;let u=new i(s?.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(a,ci(ci({},s),{},{headers:u}))}};function pQ(t){return t.endsWith("/")?t:t+"/"}function mQ(t,e){var n,r;const{db:i,auth:a,realtime:s,global:o}=t,{db:c,auth:u,realtime:h,global:m}=e,v={db:ci(ci({},c),i),auth:ci(ci({},u),a),realtime:ci(ci({},h),s),storage:{},global:ci(ci(ci({},m),o),{},{headers:ci(ci({},(n=m?.headers)!==null&&n!==void 0?n:{}),(r=o?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function gQ(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(pQ(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var vQ=class extends tQ{constructor(t){super(t)}},yQ=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const a=gQ(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const s=`sb-${a.hostname.split(".")[0]}-auth-token`,o={db:aQ,realtime:oQ,auth:ci(ci({},sQ),{},{storageKey:s}),global:iQ},c=mQ(n??{},o);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=hQ(e,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(ci({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new JY(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new KJ(this.storageUrl.href,this.headers,this.fetch,n?.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new $Y(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:a,flowType:s,lock:o,debug:c,throwOnError:u},h,m){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new vQ({url:this.authUrl.href,headers:ci(ci({},v),h),storageKey:a,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:s,lock:o,debug:c,throwOnError:u,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new pJ(this.realtimeUrl.href,ci(ci({},t),{},{params:ci(ci({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const xQ=(t,e,n)=>new yQ(t,e,n);function bQ(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}bQ()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const _Q="https://tkvogxqtylddfzzsgmtv.supabase.co",wQ="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRrdm9neHF0eWxkZGZ6enNnbXR2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgxNTQ5MTIsImV4cCI6MjA4MzczMDkxMn0.3WKSkeFCj8BmZwBBdnMFUwJRzzp8KP42k1HmoiBZce4",Tn=xQ(_Q,wQ),SQ=({setPage:t})=>{const[e,n]=J.useState(!1),[r,i]=J.useState(!1);J.useEffect(()=>{localStorage.getItem("cookie-consent-v4")||n(!0)},[]);const a=async()=>{localStorage.setItem("cookie-consent-v4","all"),n(!1);const{data:{session:o}}=await Tn.auth.getSession();o?.user&&await Tn.from("cookie_consents").upsert({user_id:o.user.id,consent_level:"all",updated_at:new Date().toISOString()})},s=async()=>{localStorage.setItem("cookie-consent-v4","necessary"),n(!1);const{data:{session:o}}=await Tn.auth.getSession();o?.user&&await Tn.from("cookie_consents").upsert({user_id:o.user.id,consent_level:"necessary",updated_at:new Date().toISOString()})};return e?d.jsx("div",{className:"fixed bottom-6 left-6 right-6 z-[100] animate-in slide-in-from-bottom-10 fade-in duration-700",children:d.jsxs("div",{className:"glass bg-slate-900/90 backdrop-blur-2xl border border-white/10 rounded-[2rem] p-4 md:p-6 shadow-[0_20px_60px_rgba(0,0,0,0.6)] max-w-5xl mx-auto overflow-hidden",children:[d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 lg:items-center",children:[d.jsxs("div",{className:"flex-grow space-y-3",children:[d.jsxs("div",{className:"flex items-center gap-3 text-orange-400",children:[d.jsx(jc,{size:24,className:"animate-pulse"}),d.jsx("h2",{className:"text-lg md:text-xl font-bold text-white tracking-tight",children:"Vi vrnar om din integritet"})]}),d.jsx("div",{className:"space-y-2 text-slate-300 text-xs md:text-sm leading-relaxed font-light max-w-2xl",children:d.jsx("p",{children:"Vi anvnder cookies fr att ge dig en s trygg och fungerande upplevelse som mjligt. Vissa krvs fr grundfunktionen, medan andra hjlper oss att frbttra vra verktyg fr dig."})}),d.jsxs("div",{className:"flex flex-wrap gap-4 pt-1",children:[d.jsx("button",{onClick:()=>t(Te.COOKIE_POLICY),className:"text-xs font-bold text-slate-400 hover:text-orange-400 underline transition-colors uppercase tracking-widest",children:"Ls vr policy"}),d.jsxs("button",{onClick:()=>i(!r),className:"flex items-center gap-1 text-xs font-bold text-slate-400 hover:text-orange-400 underline transition-colors uppercase tracking-widest",children:[r?d.jsx($H,{size:14}):d.jsx(n1,{size:14})," ",r?"Dlj instllningar":"Instllningar"]})]})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row lg:flex-col gap-2 min-w-[180px]",children:[d.jsx("button",{onClick:a,className:"px-6 py-3 bg-orange-500 hover:bg-orange-400 text-slate-950 rounded-xl font-black transition-all hover:scale-105 shadow-xl shadow-orange-500/20 text-xs md:text-sm",children:"Godknn alla"}),d.jsx("button",{onClick:s,className:"px-6 py-3 bg-white/5 hover:bg-white/10 border border-white/10 text-white rounded-xl font-bold transition-all text-xs md:text-sm",children:"Endast ndvndiga"})]})]}),r&&d.jsxs("div",{className:"pt-8 border-t border-white/10 grid md:grid-cols-2 gap-6 animate-in slide-in-from-top-4 duration-500",children:[d.jsxs("div",{className:"glass bg-white/5 p-6 rounded-2xl border border-white/5 space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2 text-white font-bold",children:[d.jsx(lp,{size:16,className:"text-blue-400"})," Ndvndiga"]}),d.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-500 font-black",children:"Alltid aktiva"})]}),d.jsx("p",{className:"text-xs text-slate-400 leading-relaxed font-light",children:'Dessa r sidans "autonoma nervsystem". Krvs fr grundlggande funktioner som skerhet och sessioner.'})]}),d.jsxs("div",{className:"glass bg-white/5 p-6 rounded-2xl border border-white/5 space-y-3 opacity-60",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2 text-white font-bold",children:[d.jsx(XH,{size:16,className:"text-orange-400"})," Analys & Statistik"]}),d.jsx("div",{className:"w-10 h-5 bg-slate-800 rounded-full relative",children:d.jsx("div",{className:"absolute right-1 top-1 bottom-1 w-3 bg-slate-600 rounded-full"})})]}),d.jsx("p",{className:"text-xs text-slate-400 leading-relaxed font-light",children:"Hjlper oss att frst hur sidan anvnds s vi kan frbttra upplevelsen. (Privacy by default: inaktiverat tills du godknner)."})]})]})]}),d.jsx("button",{onClick:()=>n(!1),className:"absolute top-6 right-6 text-slate-500 hover:text-white transition-colors","aria-label":"Stng",children:d.jsx(Bc,{size:20})})]})}):null},AO=()=>{const[t,e]=J.useState(""),[n,r]=J.useState(""),[i,a]=J.useState(!1),[s,o]=J.useState("idle"),c=u=>{u.preventDefault(),a(!0),setTimeout(()=>{a(!1),o("success"),e(""),r(""),setTimeout(()=>o("idle"),6e3)},1200)};return d.jsxs("section",{className:"relative w-screen left-1/2 right-1/2 -ml-[50vw] -mr-[50vw] my-12 overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-white/[0.03] backdrop-blur-2xl border-y border-white/10"}),d.jsx("div",{className:"absolute top-0 inset-x-0 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"}),d.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full bg-amber-500/5 blur-[120px] pointer-events-none opacity-20"}),d.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto py-10 px-6 md:px-12 flex flex-col lg:flex-row items-center justify-between gap-8 lg:gap-16",children:[d.jsxs("div",{className:"newsletter-text text-center lg:text-left space-y-2 lg:max-w-md",children:[d.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-0.5 bg-amber-500/10 rounded-full border border-amber-500/20 text-amber-500 text-[10px] font-bold uppercase tracking-widest mb-1",children:[d.jsx(wv,{size:12})," Nyhetsbrev"]}),d.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-white leading-tight",children:"Prenumerera p vrt nyhetsbrev"}),d.jsx("p",{className:"text-zinc-400 text-sm font-medium leading-relaxed",children:"Reflektioner om trauma och utveckling  direkt till din inkorg."})]}),d.jsxs("div",{className:"w-full lg:max-w-2xl",children:[s==="success"?d.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/20 py-4 px-8 rounded-2xl text-center animate-fade-in flex items-center justify-center gap-4",children:[d.jsx("div",{className:"w-10 h-10 bg-emerald-500 text-black rounded-full flex items-center justify-center shadow-lg",children:d.jsx(dY,{size:20,strokeWidth:3})}),d.jsx("span",{className:"text-emerald-400 font-bold",children:"Tack! Vi har lagt till dig p listan."})]}):d.jsxs("form",{className:"flex flex-col sm:flex-row gap-3 w-full",onSubmit:c,children:[d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1",children:[d.jsx("input",{type:"text",placeholder:"Ditt namn",value:n,onChange:u=>r(u.target.value),className:"flex-1 p-4 bg-black/40 border border-white/10 rounded-xl text-white placeholder-zinc-600 outline-none focus:border-amber-500 transition-all text-sm",required:!0}),d.jsx("input",{type:"email",placeholder:"Din e-postadress",value:t,onChange:u=>e(u.target.value),className:"flex-[1.2] p-4 bg-black/40 border border-white/10 rounded-xl text-white placeholder-zinc-600 outline-none focus:border-amber-500 transition-all text-sm",required:!0})]}),d.jsx("button",{type:"submit",disabled:i,className:"px-8 py-4 bg-white/10 hover:bg-white/20 border border-white/20 text-white rounded-xl cursor-pointer font-bold text-sm transition-all hover:scale-105 active:scale-95 flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:i?d.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):d.jsxs(d.Fragment,{children:["Prenumerera ",d.jsx(zc,{size:16})]})})]}),d.jsxs("p",{className:"mt-4 text-[10px] text-zinc-500 text-center lg:text-left flex items-center justify-center lg:justify-start gap-2 italic",children:[d.jsx(wa,{size:10,className:"text-amber-500"})," Din integritet r viktig. Vi hanterar dina uppgifter med strsta omsorg."]})]})]})]})},kO=({isOpen:t,onClose:e,pdfUrl:n,title:r})=>t?d.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6 animate-in fade-in duration-200",children:[d.jsx("div",{className:"absolute inset-0 bg-slate-950/80 backdrop-blur-sm",onClick:e}),d.jsxs("div",{className:"relative w-full max-w-5xl h-[85vh] bg-slate-900 border border-slate-700 rounded-2xl shadow-2xl flex flex-col animate-in zoom-in-95 duration-300",children:[d.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-700 bg-slate-800/50 rounded-t-2xl",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"bg-orange-500/10 p-2 rounded-lg text-orange-500",children:d.jsx(gx,{size:20})}),d.jsx("h3",{className:"font-bold text-white text-lg",children:r})]}),d.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-700 rounded-full text-slate-400 hover:text-white transition-colors",children:d.jsx(Bc,{size:20})})]}),d.jsx("div",{className:"flex-1 bg-slate-800 relative",children:d.jsx("iframe",{src:`${n}#toolbar=0&view=FitH`,className:"w-full h-full border-none rounded-b-2xl",title:r})})]})]}):null,ao=({src:t,alt:e,className:n="",imgClassName:r="object-cover",defaultRotation:i="-2deg",grayscale:a=!0,blur:s="0px",hoverBlur:o="0px"})=>{const[c,u]=J.useState(!1);return d.jsxs("div",{className:`relative overflow-hidden rounded-2xl shadow-xl transition-all duration-500 ease-out cursor-pointer z-10 hover:z-20 ${n}`,style:{transform:`rotate(${c?"0deg":i}) scale(${c?1.05:1})`,boxShadow:c?"0 20px 40px rgba(0,0,0,0.3)":"0 10px 20px rgba(0,0,0,0.1)",filter:`blur(${c?o:s})`},onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:[d.jsx("img",{src:t,alt:e,className:`w-full h-full transition-all duration-700 ${r} ${a?c?"grayscale-0":"grayscale":""}`}),d.jsx("div",{className:`absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent transition-opacity duration-500 ${c?"opacity-100":"opacity-0"}`})]})},gG=()=>d.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[d.jsxs("div",{className:"text-center space-y-4 mb-12",children:[d.jsx("h2",{className:"text-4xl font-bold text-white tracking-tight",children:"Kontakt & Bokning"}),d.jsx("p",{className:"text-slate-400 max-w-2xl mx-auto text-lg leading-relaxed",children:"Inom Horizonten har vi tillgng till legitimerade terapeuter och experter. Boka ett samtal fr att f professionell vgledning och std fr din situation."})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[d.jsxs("div",{className:"group bg-slate-900 border border-slate-800 rounded-3xl overflow-hidden hover:border-orange-500/30 transition-all hover:shadow-[0_0_40px_-10px_rgba(249,115,22,0.15)] flex flex-col",children:[d.jsxs("div",{className:"relative h-80 overflow-hidden bg-slate-800",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent z-10 opacity-60"}),d.jsx("img",{src:"/assets/minerva_profil.jpg",alt:"Minerva Kassab",className:"w-full h-full object-cover object-top opacity-60 grayscale group-hover:grayscale-0 transition-all duration-1000 group-hover:scale-105"})]}),d.jsxs("div",{className:"p-6 flex-grow flex flex-col",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"Minerva Kassab"}),d.jsxs("p",{className:"text-orange-400 font-medium flex items-center gap-2",children:[d.jsx(_g,{size:16}),"Psykolog!"]})]}),d.jsx("p",{className:"text-slate-400 text-sm leading-relaxed mb-6 flex-grow",children:"Erbjuder stdjande samtal och terapi med fokus p personlig utveckling och relationshantering."}),d.jsxs("button",{onClick:()=>window.location.href="mailto:minerva@klattertradet.se,billy@klattertradet.se?subject=Bokningsfrfrgan via Horizonten",className:"w-full bg-slate-800 hover:bg-orange-500 hover:text-slate-900 text-white font-bold py-3 rounded-xl transition-all flex items-center justify-center gap-2 group/btn",children:[d.jsx(Dl,{size:18}),d.jsx("span",{children:"Boka Samtal"})]})]})]}),d.jsxs("div",{className:"group bg-slate-900 border border-slate-800 rounded-3xl overflow-hidden hover:border-orange-500/30 transition-all hover:shadow-[0_0_40px_-10px_rgba(249,115,22,0.15)] flex flex-col",children:[d.jsxs("div",{className:"relative h-80 overflow-hidden bg-slate-800",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent z-10 opacity-60"}),d.jsx("img",{src:"/assets/billy_profil.jpeg",alt:"Billy Ljungberg",className:"w-full h-full object-cover object-top opacity-60 grayscale group-hover:grayscale-0 transition-all duration-1000 group-hover:scale-105"}),d.jsx("div",{className:"absolute bottom-4 left-4 z-20",children:d.jsx("span",{className:"inline-block px-3 py-1 bg-green-500 text-slate-950 text-xs font-bold uppercase tracking-wider rounded-full mb-2",children:"Grundare"})})]}),d.jsxs("div",{className:"p-6 flex-grow flex flex-col",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"Billy Ljungberg"}),d.jsxs("p",{className:"text-orange-400 font-medium flex items-center gap-2",children:[d.jsx(_g,{size:16}),"Gestaltterapeut / Beroendeterapeut"]})]}),d.jsx("p",{className:"text-slate-400 text-sm leading-relaxed mb-6 flex-grow",children:"Grundare av Klttertrdet. Specialiserad p traumamedveten omsorg, beroendeproblematik och processledning."}),d.jsxs("button",{onClick:()=>window.location.href="mailto:billy@klattertradet.se?subject=Bokningsfrfrgan via Horizonten",className:"w-full bg-slate-800 hover:bg-orange-500 hover:text-slate-900 text-white font-bold py-3 rounded-xl transition-all flex items-center justify-center gap-2 group/btn",children:[d.jsx(Dl,{size:18}),d.jsx("span",{children:"Boka Samtal"})]})]})]}),d.jsxs("div",{className:"group bg-slate-900 border border-slate-800 rounded-3xl overflow-hidden hover:border-orange-500/30 transition-all hover:shadow-[0_0_40px_-10px_rgba(249,115,22,0.15)] flex flex-col",children:[d.jsxs("div",{className:"relative h-80 overflow-hidden bg-slate-800",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent z-10 opacity-60"}),d.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-700",children:d.jsx(Gi,{size:64})})]}),d.jsxs("div",{className:"p-6 flex-grow flex flex-col",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"Mattias O Sandin"}),d.jsxs("p",{className:"text-orange-400 font-medium flex items-center gap-2",children:[d.jsx(_g,{size:16}),"Samtalsterapeut"]})]}),d.jsx("p",{className:"text-slate-400 text-sm leading-relaxed mb-6 flex-grow",children:"Erfaren terapeut som mter dig dr du r. Fokus p trygghet, insikt och frndring."}),d.jsxs("button",{onClick:()=>window.location.href="mailto:mattias@klattertradet.se,billy@klattertradet.se?subject=Bokningsfrfrgan via Horizonten",className:"w-full bg-slate-800 hover:bg-orange-500 hover:text-slate-900 text-white font-bold py-3 rounded-xl transition-all flex items-center justify-center gap-2 group/btn",children:[d.jsx(Dl,{size:18}),d.jsx("span",{children:"Boka Samtal"})]})]})]}),d.jsxs("div",{className:"group bg-slate-900 border border-slate-800 rounded-3xl overflow-hidden hover:border-orange-500/30 transition-all hover:shadow-[0_0_40px_-10px_rgba(249,115,22,0.15)] flex flex-col",children:[d.jsxs("div",{className:"relative h-80 overflow-hidden bg-slate-800",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent z-10 opacity-60"}),d.jsx("img",{src:"/assets/malin-widerlov.png",alt:"Malin Widerlv",className:"w-full h-full object-cover object-top opacity-60 grayscale group-hover:grayscale-0 transition-all duration-1000 group-hover:scale-105"})]}),d.jsxs("div",{className:"p-6 flex-grow flex flex-col",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"Malin Widerlv"}),d.jsxs("p",{className:"text-orange-400 font-medium flex items-center gap-2",children:[d.jsx(_g,{size:16}),"Behandlingspedagog & Socialarbetare"]})]}),d.jsx("p",{className:"text-slate-400 text-sm leading-relaxed mb-6 flex-grow",children:"Specialiserad p familjefrgor och socialt std. Malin fungerar ven som familjeombud och stttar i komplexa livssituationer."}),d.jsxs("button",{onClick:()=>window.location.href="mailto:malin@klattertradet.se,billy@klattertradet.se?subject=Bokningsfrfrgan via Horizonten",className:"w-full bg-slate-800 hover:bg-orange-500 hover:text-slate-900 text-white font-bold py-3 rounded-xl transition-all flex items-center justify-center gap-2 group/btn",children:[d.jsx(Dl,{size:18}),d.jsx("span",{children:"Boka Samtal"})]})]})]})]})]}),TQ=()=>{const[t,e]=J.useState(!1);return J.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(n=>{n.onupdatefound=()=>{const r=n.installing;r&&(r.onstatechange=()=>{r.state==="installed"&&navigator.serviceWorker.controller&&e(!0)})}})},[]),t?d.jsxs("div",{onClick:()=>window.location.reload(),className:"flex items-center gap-2 bg-orange-500/10 border border-orange-500/30 px-4 py-1.5 rounded-full cursor-pointer hover:bg-orange-500/20 transition-all animate-pulse",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full animate-ping absolute inset-0"}),d.jsx("div",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full relative"})]}),d.jsx("span",{className:"text-[10px] font-black text-orange-500 uppercase tracking-widest",children:"Uppdatering tillgnglig  Klicka fr att hmta"})]}):null},fL=({setPage:t})=>{const[e,n]=J.useState(!1),[r,i]=J.useState(0),[a,s]=J.useState(!1),o=[{title:"Ett grundlggande attributionsfel",description:"Varfr dmer vi andra hrdare n oss sjlva? En genomgng av hur vra hjrnor snedvrider verkligheten i sociala relationer.",pdfUrl:"/Attributionsfel-narcissism.pdf"},{title:"Polarisering och personlighetsstrningar",description:"En djupanalys av hur dmande och polarisering pverkar vra relationer och vr sjlvbild i ett kliniskt sammanhang.",pdfUrl:"/Polarisering-av-personlighetsstrningar .pdf"}],c=J.useCallback(()=>{a||(s(!0),setTimeout(()=>{i(h=>(h+1)%o.length),s(!1)},500))},[a,o.length]),u=J.useCallback(()=>{a||(s(!0),setTimeout(()=>{i(h=>(h-1+o.length)%o.length),s(!1)},500))},[a,o.length]);return J.useEffect(()=>{if(e)return;const h=setInterval(c,7e3);return()=>clearInterval(h)},[c,e]),d.jsxs("div",{className:"max-w-[1600px] mx-auto px-4 md:px-8 py-2 md:py-4 animate-fade-in w-full space-y-12",children:[d.jsx(kO,{isOpen:e,onClose:()=>n(!1),pdfUrl:o[r].pdfUrl,title:o[r].title}),d.jsxs("div",{className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-6 md:py-6 md:px-14 relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-amber-500/10 to-transparent pointer-events-none"}),d.jsxs("div",{className:"relative z-10 grid md:grid-cols-2 gap-10 items-center",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("h1",{className:"text-2xl md:text-4xl lg:text-6xl font-black leading-[0.95] drop-shadow-lg tracking-tight max-w-[12ch]",children:["Klttertrdet ",d.jsx("br",{}),d.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-white via-amber-200 to-zinc-500",children:"& Horizonten"})]}),d.jsx("p",{className:"text-base md:text-lg text-white/90 leading-relaxed max-w-md font-light",children:"Specialistutbildning, terapi och handledning med fokus p traumamedvetenhet och personlig mognad. Vlkommen till vr gemenskap."}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-2",children:[d.jsxs("button",{onClick:()=>t(Te.CHAT),className:"px-6 md:px-8 py-2.5 bg-white text-slate-900 hover:bg-white/90 rounded-xl font-bold transition-all hover:scale-105 flex items-center gap-2 shadow-xl shadow-white/10",children:["Vra Utbildningar ",d.jsx(Vi,{size:18})]}),d.jsxs("button",{onClick:()=>t(Te.CONTACT),className:"px-6 md:px-8 py-2.5 bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl font-bold transition-all hover:scale-105 flex items-center gap-2",children:["Boka tid ",d.jsx(Dl,{size:18})]})]})]}),d.jsx("div",{className:"hidden md:flex justify-center items-center",children:d.jsx("div",{className:"relative w-56 h-64 p-4",children:d.jsx(ao,{src:"/logo2.png",alt:"Klttertrdet Logo",className:"w-full h-full",imgClassName:"object-contain p-4",defaultRotation:"-8deg",grayscale:!1})})})]})]}),d.jsxs("div",{className:"w-full space-y-3 animate-in slide-in-from-bottom-6 duration-700 relative group/carousel",children:[d.jsxs("div",{className:"flex justify-between items-center px-2",children:[d.jsxs("h2",{className:"text-xl md:text-2xl font-black text-white italic tracking-tight flex items-center gap-2",children:[d.jsx(yx,{className:"text-orange-500",size:20}),"Nytt frn oss"]}),d.jsx(TQ,{})]}),d.jsxs("div",{className:"relative group/carousel",children:[d.jsx("button",{onClick:h=>{h.stopPropagation(),u()},"aria-label":"Fregende slide",className:"absolute -left-2 top-[92%] -translate-y-1/2 z-20 px-6 py-2 bg-white/5 hover:bg-white/10 border border-white/20 rounded-2xl text-white transition-all backdrop-blur-2xl md:opacity-0 md:group-hover/carousel:opacity-100 opacity-100 hover:scale-105 shadow-[0_0_30px_rgba(255,255,255,0.1)] md:group-hover/carousel:-translate-x-2",children:d.jsx(px,{size:20})}),d.jsx("button",{onClick:h=>{h.stopPropagation(),c()},"aria-label":"Nsta slide",className:"absolute -right-2 top-[92%] -translate-y-1/2 z-20 px-6 py-2 bg-white/5 hover:bg-white/10 border border-white/20 rounded-2xl text-white transition-all backdrop-blur-2xl md:opacity-0 md:group-hover/carousel:opacity-100 opacity-100 hover:scale-105 shadow-[0_0_30px_rgba(255,255,255,0.1)] md:group-hover/carousel:translate-x-2",children:d.jsx(op,{size:20})}),d.jsxs("div",{onClick:()=>n(!0),className:`bg-gradient-to-br from-slate-900 to-slate-800 border border-orange-500/30 p-4 md:p-6 rounded-[1.5rem] group hover:border-orange-500 transition-all duration-500 cursor-pointer shadow-[0_20px_60px_rgba(0,0,0,0.4)] relative overflow-hidden ${a?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:[d.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 right-[15%] p-4 opacity-20 group-hover:opacity-40 transition-opacity blur-[2px]",children:d.jsx("img",{src:"/logo2.png",alt:"Klttertrdet Logo",className:"w-20 h-20 md:w-28 md:h-28 object-contain rotate-12"})}),d.jsxs("div",{className:"relative z-10",children:[d.jsx("span",{className:"text-[10px] bg-orange-500/20 text-orange-400 px-3 py-1 rounded-full font-black uppercase tracking-[0.2em] mb-2 inline-block",children:"Veckans Djupdykning"}),d.jsx("h4",{className:"text-xl md:text-2xl font-black text-white mb-1 group-hover:text-orange-400 transition-colors tracking-tight",children:o[r].title}),d.jsx("p",{className:"text-slate-400 text-xs md:text-sm mb-3 max-w-2xl font-light leading-relaxed line-clamp-1 md:line-clamp-none",children:o[r].description}),d.jsxs("button",{onClick:h=>{h.stopPropagation(),t(Te.BLOG)},className:"flex items-center gap-2 text-orange-400 text-[10px] md:text-xs font-black group-hover:gap-3 transition-all hover:text-white",children:["Ls de nya blogginlggen ",d.jsx(op,{size:16})]})]})]})]}),d.jsx("div",{className:"flex justify-center gap-3",children:o.map((h,m)=>d.jsx("button",{onClick:()=>i(m),"aria-label":`G till slide ${m+1}`,className:`h-1.5 transition-all rounded-full ${r===m?"w-8 bg-orange-500 shadow-[0_0_10px_rgba(249,115,22,0.5)]":"w-1.5 bg-white/20"}`},m))})]}),d.jsxs("div",{className:"w-full glass bg-white/5 border border-white/10 rounded-[2.5rem] p-6 md:p-10 flex flex-col md:flex-row items-center gap-10 group hover:border-amber-500/20 transition-all min-h-[280px]",children:[d.jsx("div",{className:"md:w-1/4 flex justify-center",children:d.jsx(ao,{src:"/booklet.jpeg",alt:"Myndighetsinducerat trauma bok",className:"w-40 h-56",defaultRotation:"-3deg",grayscale:!1})}),d.jsxs("div",{className:"md:w-3/4 space-y-4",children:[d.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white leading-tight",children:"Vr nya bok: Myndighetsinducerat trauma"}),d.jsx("p",{className:"text-zinc-400 text-sm md:text-base leading-relaxed",children:"En unik djupdykning i systemets pverkan p individen och vgen mot lkning. Innehller praktiska verktyg och fallstudier fr bde drabbade och professionella."}),d.jsxs("button",{onClick:()=>t(Te.BOOK),className:"flex items-center gap-2 text-amber-500 font-bold hover:underline transition-all group-hover:translate-x-2 text-sm md:text-base",children:["Ls mer om boken ",d.jsx(Vi,{size:20})]})]})]}),d.jsx("div",{className:"w-full glass bg-gradient-to-r from-amber-500/20 to-orange-600/20 border border-white/10 rounded-[2.5rem] p-6 md:p-10 relative overflow-hidden group min-h-[320px] flex items-center justify-center",children:d.jsxs("div",{className:"relative z-10 max-w-2xl text-center space-y-4",children:[d.jsx("div",{className:"inline-block px-3 py-1 bg-amber-500/20 rounded-full border border-amber-500/30 text-amber-500 text-[10px] font-black uppercase tracking-widest",children:"Aktuell Specialistutbildning"}),d.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white leading-tight",children:"Myndighetsinducerat Trauma (MiT)"}),d.jsx("p",{className:"text-sm md:text-base text-amber-100/80 leading-relaxed",children:"Vr nya specialistutbildning ger dig verktygen att frst, bemta och sttta klienter som farit illa av systemet och myndighetsutvning."}),d.jsxs("button",{onClick:()=>t(Te.CHAT),className:"flex items-center gap-2 px-6 py-3 bg-amber-500 hover:bg-amber-400 text-slate-950 rounded-xl font-black transition-all hover:scale-105 shadow-2xl shadow-amber-500/20 text-sm md:text-base",children:["Ls mer om MiT ",d.jsx(Vi,{size:20})]})]})}),d.jsx("div",{className:"grid md:grid-cols-3 gap-4 md:gap-6",children:[{src:"/hemsida-bild2.jpeg",title:"Empati",text:"Vi mter dig dr du r, utan dmande, med fokus p din unika livssituation.",rot:"-2deg"},{src:"/hemsida-bild3.jpeg",title:"Trygghet",text:"En trygg bas r frutsttningen fr all form av lkning och utveckling.",rot:"1deg"},{src:"/hemsida-bild4.jpeg",title:"Insikt",text:"Genom 'Hr, Nu och Hur' skapar vi medvetenhet som leder till verklig frndring.",rot:"-1deg"}].map((h,m)=>d.jsxs("div",{className:"glass bg-white/5 border border-white/10 p-5 md:p-6 rounded-3xl hover:bg-white/10 transition-colors group flex flex-col items-center text-center",children:[d.jsx(ao,{src:h.src,alt:h.title,className:"w-32 h-32 mb-4",defaultRotation:h.rot}),d.jsx("h3",{className:"text-base md:text-lg font-bold text-white mb-1.5 md:mb-2",children:h.title}),d.jsx("p",{className:"text-zinc-400 leading-relaxed text-[11px] md:text-xs",children:h.text})]},m))}),d.jsxs("div",{className:"space-y-6 md:space-y-8",children:[d.jsxs("div",{className:"text-center space-y-1",children:[d.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white",children:"Vra Tjnster"}),d.jsx("p",{className:"text-zinc-400 text-xs md:text-sm max-w-2xl mx-auto",children:"Vi erbjuder ett brett spektrum av tjnster fr bde individer och professionella."})]}),d.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[d.jsxs("div",{className:"glass bg-gradient-to-br from-white/5 to-white/[0.02] border border-white/10 rounded-[1.5rem] p-5 md:p-8 flex flex-col justify-between group",children:[d.jsxs("div",{className:"space-y-3 md:space-y-4",children:[d.jsx(ao,{src:"/bild-ljusbord.jpeg",alt:"Enskild Terapi",className:"w-full h-40",defaultRotation:"-2deg",grayscale:!1}),d.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white",children:"Enskild Terapi"}),d.jsx("p",{className:"text-zinc-400 text-xs md:text-sm leading-relaxed",children:"Gestaltterapeutisk grund med fokus p att lsa upp knutar som str i vgen fr det liv du vill leva. Vi jobbar med stress, ngest, sorg och PTSD."})]}),d.jsxs("button",{onClick:()=>t(Te.THERAPY),className:"mt-4 md:mt-6 flex items-center gap-2 text-white font-bold hover:text-red-400 transition-colors text-xs md:text-sm",children:["Ls mer om terapi ",d.jsx(Vi,{size:18})]})]}),d.jsxs("div",{className:"glass bg-gradient-to-br from-white/5 to-white/[0.02] border border-white/10 rounded-[1.5rem] p-5 md:p-8 flex flex-col justify-between group",children:[d.jsxs("div",{className:"space-y-3 md:space-y-4",children:[d.jsx(ao,{src:"/bild-terapistol.jpeg",alt:"Parterapi",className:"w-full h-40",defaultRotation:"2deg",grayscale:!1}),d.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white",children:"Grupp- & Parterapi"}),d.jsx("p",{className:"text-zinc-400 text-xs md:text-sm leading-relaxed",children:"Lkning genom relation och gemenskap. Vi erbjuder specialiserad terapi fr grupper och par."})]}),d.jsxs("button",{onClick:()=>t(Te.GROUP_THERAPY),className:"mt-4 md:mt-6 flex items-center gap-2 text-white font-bold hover:text-indigo-400 transition-colors text-xs md:text-sm",children:["Ls mer om parterapi ",d.jsx(Vi,{size:18})]})]}),d.jsxs("div",{className:"glass bg-gradient-to-br from-white/5 to-white/[0.02] border border-white/10 rounded-[1.5rem] p-5 md:p-8 flex flex-col justify-between group",children:[d.jsxs("div",{className:"space-y-3 md:space-y-4",children:[d.jsx(ao,{src:"/Pic-BIllyteavla.jpeg",alt:"Behandlingspedagog",className:"w-full h-56",defaultRotation:"-1deg"}),d.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white",children:"Behandlingspedagog"}),d.jsx("p",{className:"text-zinc-400 text-xs md:text-sm leading-relaxed",children:"Vr yrkesutbildning fr dig som vill arbeta professionellt med mnniskor i frndring. 8 block av praktisk och teoretisk kunskap."})]}),d.jsxs("button",{onClick:()=>t(Te.BEHANDLINGS_PEDAGOG),className:"mt-4 md:mt-6 flex items-center gap-2 text-white font-bold hover:text-amber-400 transition-colors text-xs md:text-sm",children:["Ls mer om behandlingspedagog ",d.jsx(Vi,{size:18})]})]})]})]}),d.jsxs("div",{className:"space-y-16 md:space-y-24 py-12",children:[d.jsxs("div",{className:"text-center space-y-6 mx-auto",children:[d.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-white italic tracking-tight leading-[1.1]",children:["Horizonten Gemenskap  ",d.jsx("br",{className:"hidden md:block"}),d.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-orange-400 via-amber-200 to-white",children:"Din digitala flock"})]}),d.jsx("p",{className:"text-xl md:text-2xl text-amber-500/90 font-bold italic tracking-wide",children:"Ingen lker i vakuum. Vi behver varandra."}),d.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-orange-500 to-transparent mx-auto rounded-full"}),d.jsx("p",{className:"text-zinc-400 text-lg md:text-xl leading-relaxed font-light",children:"P Klttertrdet vet vi att psykisk hlsa inte bara handlar om vad som sker under en timme i terapistolen. Det handlar om vad som hnder dremellan. Det handlar om vardagen. Drfr har vi, tillsammans med vra partners Socialkraft och Twisted-stacks, skapat Horizonten Gemenskap."})]}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center mx-auto",children:[d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"inline-block px-4 py-1.5 bg-orange-500/10 rounded-full border border-orange-500/20 text-orange-500 text-xs font-black uppercase tracking-widest",children:"Mer n bara en app"}),d.jsx("h3",{className:"text-3xl font-black text-white italic",children:"En omsorgsfullt designad plattform"}),d.jsx("p",{className:"text-zinc-400 text-lg leading-relaxed font-light",children:"Detta r inte sociala medier som stjl din energi. Det r en omsorgsfullt designad plattform fr terhmtning, igenknning och vxtkraft. Vi har flyttat in vr filosofi om Self-care, Bottom-up och trygghet i en digital milj som du alltid har med dig i fickan."})]}),d.jsxs("div",{className:"relative group flex justify-center",children:[d.jsx("div",{className:"absolute -inset-4 bg-orange-500/20 rounded-[3rem] blur-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),d.jsx(ao,{src:"/logo2.png",alt:"Horizonten Gemenskap",className:"w-64 h-64 md:w-80 md:h-80",imgClassName:"object-contain p-8",defaultRotation:"5deg",grayscale:!1})]})]}),d.jsxs("div",{className:"space-y-12",children:[d.jsxs("div",{className:"text-center space-y-2",children:[d.jsx("h3",{className:"text-3xl font-black text-white italic tracking-tight",children:"Vad hittar du hr?"}),d.jsx("p",{className:"text-zinc-500",children:"Mngsidigt std fr din personliga resa."})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mx-auto",children:[{title:"Gratis Std",text:"En plats dr du kan dela erfarenheter med andra som frstr. Att spegla sig i andra minskar skam och bryter isolering.",icon:d.jsx(Gi,{className:"text-orange-500",size:32})},{title:"Verktyg",text:"Tillgng till material, vningar och mallar som stttar din process.",icon:d.jsx(wa,{className:"text-amber-400",size:32})},{title:"Mjligheter",text:"Som medlem kan du delta i (eller sjlv hlla i) digitala sjlvhjlpsmten via vra videorum.",icon:d.jsx(Dl,{className:"text-white",size:32})}].map((h,m)=>d.jsxs("div",{className:"glass bg-white/5 border border-white/10 p-8 rounded-3xl hover:bg-white/10 transition-all group hover:-translate-y-2",children:[d.jsx("div",{className:"mb-6 p-4 bg-white/5 rounded-2xl w-fit group-hover:scale-110 transition-transform",children:h.icon}),d.jsx("h4",{className:"text-xl font-bold text-white mb-3",children:h.title}),d.jsx("p",{className:"text-zinc-400 leading-relaxed text-sm font-light",children:h.text})]},m))})]}),d.jsxs("div",{className:"glass bg-gradient-to-br from-white/5 to-white/[0.02] border border-white/10 rounded-[3rem] p-10 md:p-16 mx-auto relative overflow-hidden group",children:[d.jsx("div",{className:"absolute -right-20 -bottom-20 w-64 h-64 bg-orange-500/5 rounded-full blur-3xl group-hover:bg-orange-500/10 transition-colors"}),d.jsxs("div",{className:"relative z-10 space-y-12 text-center",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-3xl font-black text-white italic tracking-tight",children:"Ett unikt samarbete"}),d.jsx("p",{className:"text-zinc-400 text-lg font-light",children:"Horizonten r resultatet av tre krafter som frenas fr din skull:"})]}),d.jsx("div",{className:"grid md:grid-cols-3 gap-12",children:[{name:"Klttertrdet",text:"Bidrar med den terapeutiska grunden, kunskapen om trauma och nervsystemet.",icon:d.jsx(Zo,{className:"text-red-400",size:24})},{name:"Socialkraft",text:"Skerstller perspektivet av rttvisa, std i myndighetsfrgor och empowerment.",icon:d.jsx(uo,{className:"text-blue-400",size:24})},{name:"Twisted-stacks",text:"Mjliggr tekniken som bygger broar mellan mnniskor p ett skert stt.",icon:d.jsx(wa,{className:"text-purple-400",size:24})}].map((h,m)=>d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-center gap-3",children:[h.icon,d.jsx("h4",{className:"text-xl font-black text-white tracking-tight",children:h.name})]}),d.jsx("p",{className:"text-zinc-500 text-sm leading-relaxed font-light",children:h.text})]},m))})]})]}),d.jsxs("div",{className:"space-y-24",children:[d.jsxs("div",{className:"text-center space-y-6 mx-auto",children:[d.jsx("h2",{className:"text-4xl md:text-5xl font-black text-white italic tracking-tight",children:"Vrt Specialistteam"}),d.jsx("p",{className:"text-xl text-amber-500 font-bold italic",children:"Handplockad kompetens fr hela mnniskan."}),d.jsxs("div",{className:"space-y-6 text-zinc-400 text-lg md:text-xl leading-relaxed font-light text-left md:text-center",children:[d.jsx("p",{children:"Jag brukar sga att trygghet brjar med kompetens. Fr att kunna guida en annan mnniska genom svr terrng  oavsett om det handlar om djupa barndomstrauman eller stressrelaterad ohlsa  krvs en guide som r trygg, erfaren och vlutbildad."}),d.jsx("p",{children:"Drfr r jag otroligt stolt och tacksam ver det team vi har samlat hr p Klttertrdet och Horizonten."})]})]}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center mx-auto",children:[d.jsxs("div",{className:"space-y-6",children:[d.jsx("h3",{className:"text-3xl font-black text-white italic",children:"Vi har sllat fram de bsta"}),d.jsx("p",{className:"text-zinc-400 text-lg leading-relaxed font-light",children:"Vi stller extremt hga krav p vra medarbetare. Inte bara gllande deras akademiska meriter, utan p deras frmga till nrvaro och bemtande. De terapeuter och behandlare du mter hos oss r noga utsorterade fr att de r bst inom sina respektive flt."}),d.jsx("p",{className:"text-zinc-400 text-lg leading-relaxed font-light",children:'Vi jobbar inte efter en "one-size-fits-all"-modell. Vi vet att olika nervsystem behver olika ingngar fr att lka. Drfr har vi samlat en bredd av expertis under samma tak:'})]}),d.jsx("div",{className:"relative p-8 glass bg-white/5 border border-white/10 rounded-[2.5rem] space-y-4",children:[{label:"Traumaterapi & Bottom-up",desc:"Specialister p att arbeta med kroppens minnen och nervsystemets reglering."},{label:"KBT & Beteendevetenskap",desc:"Fr dig som behver struktur, verktyg och tankemnsterfrndring."},{label:"Psykoanalys & Psychodynamic",desc:"Fr djupare frstelse av omedvetna processer och livsmnster."},{label:"Hypnos",desc:"Ett kraftfullt verktyg fr att n bortom det logiska sinnet och arbeta med djupare frndring."},{label:"Hudvrd & Somatisk omsorg",desc:"Self-care handlar ocks om att vrda kroppens grns mot omvrlden."}].map((h,m)=>d.jsxs("div",{className:"flex gap-4",children:[d.jsx("div",{className:"mt-1 w-1.5 h-1.5 bg-orange-500 rounded-full shrink-0"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-white font-bold text-sm",children:h.label}),d.jsx("p",{className:"text-zinc-500 text-xs",children:h.desc})]})]},m))})]}),d.jsxs("div",{className:"text-center space-y-12 mx-auto",children:[d.jsx(gG,{}),d.jsxs("div",{className:"pt-8 space-y-8",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("p",{className:"text-2xl font-black text-white italic",children:"Vlkommen in i vrmen."}),d.jsx("p",{className:"text-orange-500 font-bold uppercase tracking-widest text-xs",children:"Det r gratis att bli medlem."})]}),d.jsxs("div",{className:"flex flex-wrap justify-center gap-6",children:[d.jsxs("button",{onClick:()=>t(Te.CONTACT),className:"px-10 py-5 bg-white text-slate-900 hover:bg-white/90 rounded-2xl font-black transition-all hover:scale-105 flex items-center gap-3 shadow-2xl shadow-white/10 uppercase tracking-widest text-xs",children:["Ta kontakt med oss ",d.jsx(Vi,{size:20})]}),d.jsx("button",{onClick:()=>t(Te.THERAPY,{showForm:!0}),className:"px-10 py-5 bg-white/5 hover:bg-white/10 border border-white/20 rounded-2xl text-white font-black transition-all hover:scale-105 flex items-center gap-3 uppercase tracking-widest text-xs",children:"Hjlp med att hitta en terapeut"})]})]})]})]})]}),d.jsx(AO,{})]})},EQ=()=>d.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 md:py-10 animate-fade-in space-y-16",children:[d.jsxs("div",{className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-8 md:p-16 text-center relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-orange-500/10 to-transparent pointer-events-none"}),d.jsxs("div",{className:"relative z-10",children:[d.jsx("h1",{className:"text-3xl md:text-5xl font-bold mb-6 text-transparent bg-clip-text bg-gradient-to-r from-amber-200 to-orange-400 leading-tight",children:"Om Klttertrdet & Horizonten"}),d.jsx("h2",{className:"text-xl md:text-2xl text-white/90 font-light italic mb-8",children:"Ett kunskapscenter fr mnsklig utveckling"}),d.jsx("p",{className:"text-lg text-white/80 leading-relaxed max-w-4xl mx-auto",children:"Vr vision har alltid varit att skapa rum fr utveckling, terhmtning och utbildning  fr mnniskor i frndring. Vi frenar djup terapeutisk kompetens med specialistutbildningar fr morgondagens behandlare."})]})]}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-10",children:[d.jsxs("div",{className:"glass bg-gradient-to-br from-orange-900/20 to-black/40 border border-orange-500/20 rounded-3xl p-8 md:p-12",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[d.jsx("div",{className:"p-3 bg-orange-500/20 rounded-xl text-orange-400",children:d.jsx(wa,{size:32})}),d.jsx("h3",{className:"text-2xl font-bold",children:"Vi startade 2020"})]}),d.jsxs("p",{className:"text-white/80 leading-relaxed mb-6",children:[d.jsx("strong",{children:"Klttertrdet AB"})," grundades av Billy Ljungberg 2020 och har sin bas i Gvle. Med lng erfarenhet som terapeut, handledare och utbildare har vi under ren ftt frmnen att mta bde individer och verksamheter i behov av std, riktning och frdjupning."]}),d.jsxs("div",{className:"flex items-start gap-4 bg-black/20 p-6 rounded-2xl border border-white/5",children:[d.jsx(IY,{className:"text-orange-400 shrink-0",size:24}),d.jsx("p",{className:"text-white/80 italic text-sm",children:'"Vi startade med en vertygelse om att kvalitet och nrvaro r nyckeln till verklig frndring."'})]})]}),d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 md:p-12 flex flex-col justify-center",children:[d.jsxs("h3",{className:"text-2xl font-bold mb-6 flex items-center gap-3",children:[d.jsx(HH,{className:"text-amber-400"})," Vr verksamhet"]}),d.jsxs("p",{className:"text-white/80 leading-relaxed mb-6",children:["Vi erbjuder utbildningar till ",d.jsx("strong",{children:"behandlingspedagog"})," och ",d.jsx("strong",{children:"socialpedagog"}),", samt handledning och kvalificerad terapi inom beroendeproblematik, trauma och relationsarbete."]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-3 text-white/90",children:[d.jsx(_g,{className:"text-orange-400",size:20}),d.jsx("span",{children:"Handplockade frelsare frn hela Sverige"})]}),d.jsxs("div",{className:"flex items-center gap-3 text-white/90",children:[d.jsx(uo,{className:"text-orange-400",size:20}),d.jsx("span",{children:"Kvalitetsskrad metodik & traumafrstelse"})]}),d.jsxs("div",{className:"flex items-center gap-3 text-white/90",children:[d.jsx(Gi,{className:"text-orange-400",size:20}),d.jsx("span",{children:"Std fr bde individer och organisationer"})]})]})]})]}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-3xl font-bold text-center mb-10",children:"Vr Metodik & Filosofi"}),d.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"glass bg-white/5 p-8 rounded-2xl border border-white/10",children:[d.jsx("div",{className:"mb-4 bg-blue-500/20 w-12 h-12 rounded-lg flex items-center justify-center text-blue-300",children:d.jsx(hE,{size:24})}),d.jsx("h4",{className:"text-xl font-bold mb-3",children:"Processinriktat Lrande"}),d.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:"Kunskap mste landa i kroppen. Vra utbildningar bygger p kvalitet, nrvaro och mngrig erfarenhet dr vi varvar teori med praktisk implementation."})]}),d.jsxs("div",{className:"glass bg-white/5 p-8 rounded-2xl border border-white/10",children:[d.jsx("div",{className:"mb-4 bg-red-500/20 w-12 h-12 rounded-lg flex items-center justify-center text-red-300",children:d.jsx(Zo,{size:24})}),d.jsx("h4",{className:"text-xl font-bold mb-3",children:"Traumamedveten Omsorg"}),d.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:"Vi utgr frn neurobiologi och traumateori (TMO) fr att frst hur man reglerar nervsystem som fastnat i kamp, flykt eller frys."})]}),d.jsxs("div",{className:"glass bg-white/5 p-8 rounded-2xl border border-white/10",children:[d.jsx("div",{className:"mb-4 bg-green-500/20 w-12 h-12 rounded-lg flex items-center justify-center text-green-300",children:d.jsx(Gi,{size:24})}),d.jsx("h4",{className:"text-xl font-bold mb-3",children:"Gestaltterapeutisk Grund"}),d.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:'Vi fokuserar p "hr och nu". Kontakt, medvetenhet och ansvar r nyckelord i vr syn p mnniskan som en helhet.'})]})]})]}),d.jsxs("div",{className:"glass bg-white/10 border border-white/20 rounded-3xl p-8 md:p-12 text-center mt-12",children:[d.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Besk oss i Gvle"}),d.jsx("p",{className:"text-white/80 max-w-2xl mx-auto mb-8",children:"Vi bedriver vr verksamhet i ljusa lokaler centralt i Gvle. Hr mts vi fr utbildningstrffar, terapi och frdjupade samtal."}),d.jsxs("div",{className:"inline-flex flex-col md:flex-row gap-6 md:gap-12 justify-center items-center text-white/90 font-medium",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(dE,{className:"text-orange-400"}),d.jsx("span",{children:"Gullregnsgatan 9A, 802 56 Gvle"})]}),d.jsx("div",{className:"hidden md:block w-1.5 h-1.5 bg-white/30 rounded-full"}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(hx,{className:"text-orange-400",size:20}),d.jsx("span",{children:"info@klattertradet.se"})]})]})]})]}),AQ=()=>{const[t,e]=J.useState("info"),[n,r]=J.useState({type:"Anmlan till utbildning (MiT)",name:"",email:"",phone:"",workplace:"",invoiceAddress:"",message:""}),i=a=>{a.preventDefault();const s="billy@klattertradet.se",o=`Anmlan: ${n.type} - ${n.name}`,c=`
Hej Billy,

Hr kommer en anmlan/frfrgan via hemsidan.

AVSER:
${n.type}

KONTAKTUPPGIFTER:
Namn: ${n.name}
E-post: ${n.email}
Telefon: ${n.phone}
Arbetsplats/Titel: ${n.workplace}

FAKTURAADRESS (om angivet):
${n.invoiceAddress}

MEDDELANDE / VRIGT:
${n.message}
    `.trim(),u=`mailto:${s}?subject=${encodeURIComponent(o)}&body=${encodeURIComponent(c)}`;window.location.href=u,e("success")};return t==="success"?d.jsx("div",{className:"container mx-auto px-4 py-20 flex items-center justify-center animate-fade-in min-h-[70vh]",children:d.jsxs("div",{className:"glass bg-white/10 backdrop-blur-xl border border-white/20 p-12 rounded-[40px] max-w-lg w-full text-center shadow-2xl",children:[d.jsx("div",{className:"mb-6 flex justify-center text-green-400",children:d.jsx(xf,{size:64})}),d.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Tack fr din anmlan!"}),d.jsx("p",{className:"text-lg text-white/80 mb-6",children:'Ett frifyllt mail har skapats i din mailklient. Vnligen klicka p "Skicka" fr att slutfra anmlan till Billy.'}),d.jsx("button",{onClick:()=>e("info"),className:"text-white hover:text-amber-400 font-medium underline transition-colors",children:"G tillbaka till utbildningssidan"})]})}):t==="form"?d.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-10 animate-fade-in max-w-3xl",children:[d.jsxs("button",{onClick:()=>e("info"),className:"flex items-center gap-2 text-white/60 hover:text-white mb-6 transition-colors",children:[d.jsx(Jo,{size:20})," Tillbaka till informationen"]}),d.jsxs("div",{className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-8 md:p-12 shadow-2xl",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Anmlan & Intresse"}),d.jsx("p",{className:"text-white/70",children:"Myndighetsinducerat Trauma (MiT)"})]}),d.jsxs("form",{onSubmit:i,className:"space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-white/80",children:"Vad vill du gra?"}),d.jsxs("select",{className:"w-full p-4 bg-black/40 border border-white/10 rounded-xl text-white outline-none focus:ring-2 focus:ring-orange-500 transition-all appearance-none",value:n.type,onChange:a=>r({...n,type:a.target.value}),children:[d.jsx("option",{value:"Bindande anmlan till utbildning (MiT)",className:"bg-zinc-900",children:"Jag vill anmla mig till utbildningen"}),d.jsx("option",{value:"Intresseanmlan (MiT)",className:"bg-zinc-900",children:"Jag r intresserad och vill veta mer (Intresseanmlan)"}),d.jsx("option",{value:"Frfrgan fr arbetsgrupp (MiT)",className:"bg-zinc-900",children:"Jag vill boka utbildning fr min arbetsgrupp"})]})]}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"block text-sm font-medium text-white/80",children:["Namn ",d.jsx("span",{className:"text-red-400",children:"*"})]}),d.jsx("input",{required:!0,type:"text",className:"w-full p-3 bg-black/40 border border-white/10 rounded-xl text-white outline-none focus:ring-2 focus:ring-orange-500",value:n.name,onChange:a=>r({...n,name:a.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"block text-sm font-medium text-white/80",children:["E-post ",d.jsx("span",{className:"text-red-400",children:"*"})]}),d.jsx("input",{required:!0,type:"email",className:"w-full p-3 bg-black/40 border border-white/10 rounded-xl text-white outline-none focus:ring-2 focus:ring-orange-500",value:n.email,onChange:a=>r({...n,email:a.target.value})})]})]}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-white/80",children:"Telefon"}),d.jsx("input",{type:"tel",className:"w-full p-3 bg-black/40 border border-white/10 rounded-xl text-white outline-none focus:ring-2 focus:ring-orange-500",value:n.phone,onChange:a=>r({...n,phone:a.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-white/80",children:"Arbetsplats / Titel"}),d.jsx("input",{type:"text",className:"w-full p-3 bg-black/40 border border-white/10 rounded-xl text-white outline-none focus:ring-2 focus:ring-orange-500",placeholder:"T.ex. Socialtjnsten Gvle / Socialsekreterare",value:n.workplace,onChange:a=>r({...n,workplace:a.target.value})})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-white/80",children:"Fakturaadress (vid anmlan)"}),d.jsx("textarea",{rows:2,className:"w-full p-3 bg-black/40 border border-white/10 rounded-xl text-white outline-none focus:ring-2 focus:ring-orange-500 resize-none",placeholder:"Adress, referens, ev. kostnadsstlle...",value:n.invoiceAddress,onChange:a=>r({...n,invoiceAddress:a.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-white/80",children:"Meddelande / Allergier"}),d.jsx("textarea",{rows:3,className:"w-full p-3 bg-black/40 border border-white/10 rounded-xl text-white outline-none focus:ring-2 focus:ring-orange-500 resize-none",value:n.message,onChange:a=>r({...n,message:a.target.value})})]}),d.jsxs("button",{type:"submit",className:"w-full py-4 bg-white/10 hover:bg-white/20 border border-white/20 text-white font-bold rounded-xl transition-all hover:scale-[1.01] active:scale-95 flex items-center justify-center gap-2",children:["Skicka anmlan ",d.jsx(zc,{size:20})]}),d.jsx("p",{className:"text-center text-xs text-white/40 mt-4",children:"Genom att skicka in godknner du att vi kontaktar dig angende utbildningen."})]})]})]}):d.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 md:py-10 animate-fade-in w-full",children:[d.jsxs("div",{className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-8 md:p-12 mb-8 relative overflow-hidden flex flex-col md:flex-row items-center justify-between gap-8",children:[d.jsxs("div",{className:"relative z-10 flex-1",children:[d.jsx("h1",{className:"text-3xl md:text-5xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-amber-200 to-orange-400 leading-tight",children:"Myndighetsinducerat Trauma (MiT)"}),d.jsx("h2",{className:"text-xl md:text-2xl text-white/90 italic font-light mb-6",children:" Att lka nr systemet skadar"}),d.jsx("p",{className:"text-lg md:text-xl text-white/80 leading-relaxed max-w-4xl",children:"Nr hjlpen blir ett hot. En specialistutbildning fr dig som mter mnniskor i klm mellan behov och byrkrati."})]}),d.jsx("div",{className:"relative z-10 w-full md:w-64 h-48 md:h-64 flex justify-center md:justify-end",children:d.jsx(ao,{src:"/hemsida-bild7.jpeg",alt:"Myndighetsinducerat Trauma",className:"w-48 h-64 md:w-full md:h-full",defaultRotation:"8deg",grayscale:!1,blur:"10px",hoverBlur:"0px"})})]}),d.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[d.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-2xl p-6 md:p-8",children:[d.jsx("p",{className:"text-white/80 leading-relaxed mb-6 text-lg",children:'Har du mtt klienten som "stnger av" s fort ett myndighetsbrev landar p hallmattan? Eller ungdomen som gr in i totalt kamp-lge vid blotta tanken p ett SIP-mte? Det handlar ofta om myndighetsinducerat trauma. Fr mnga av vra klienter r mtet med vrd- och omsorgsapparaten inte en vg till lkning, utan en klla till ytterligare stress, vanmakt och retraumatiserande upplevelser.'}),d.jsx("p",{className:"text-white/80 leading-relaxed text-lg",children:"P Klttertrdet och Horizonten vet vi att vi inte kan prata bort dessa tillstnd. Vi mste jobba bottom-up. Vi mste frst nervsystemets reaktioner och erbjuda verktyg som fungerar p riktigt."})]}),d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-2xl p-6 md:p-8",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[d.jsx(GH,{className:"text-orange-400",size:32,"aria-hidden":"true"}),d.jsx("h3",{className:"text-2xl font-bold",children:"Om utbildningen"})]}),d.jsx("p",{className:"text-white/80 leading-relaxed mb-4",children:"Detta r en processinriktad specialistutbildning som strcker sig ver en termin. Vi kombinerar djupgende fysiska trffar i Gvle med flexibla, processinriktade onlinetrffar. Mlet r att gra dig till en trygg hamn i ett stormigt system."}),d.jsx("p",{className:"text-white/80 leading-relaxed",children:"Vi utgr frn vr egen Self-care modell fr att kartlgga hur bristen p agens och trygghet i kontakten med myndigheter aktiverar gamla grundsr ssom Avvisad eller Frdmjukad. Du fr lra dig att hjlpa klienten g frn maktls underkastelse till reglering och agens."})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsx("h3",{className:"text-2xl font-bold px-2",children:"Upplgg: 3 + 3 Modellen"}),d.jsx("p",{className:"text-white/70 px-2 italic",children:'Vi tror p det "blandade lrandet"  att ses p riktigt fr att bygga allians och trygghet, och att ses digitalt fr att hlla processen levande i vardagen.'}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"glass bg-orange-900/10 border border-orange-500/20 rounded-2xl p-6",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4 text-orange-300",children:[d.jsx(Gi,{size:24,"aria-hidden":"true"}),d.jsx("h4",{className:"text-xl font-bold",children:"Del 1: Fysiska Trffar"})]}),d.jsx("p",{className:"text-sm text-white/70 mb-4",children:"3 heldagar i Gvle. Vi ses i vra lokaler p Gullregnsgatan."}),d.jsxs("ul",{className:"space-y-3",children:[d.jsxs("li",{className:"flex gap-3 text-white/80 text-sm",children:[d.jsx("span",{className:"text-orange-400 font-bold","aria-hidden":"true",children:""}),d.jsxs("span",{children:[d.jsx("strong",{children:"Neurobiologin bakom MiT:"})," Vad hnder i hjrnan och kroppen vid strukturellt svek?"]})]}),d.jsxs("li",{className:"flex gap-3 text-white/80 text-sm",children:[d.jsx("span",{className:"text-orange-400 font-bold","aria-hidden":"true",children:""}),d.jsxs("span",{children:[d.jsx("strong",{children:"Identifiera Grundsr:"})," Hur triggar systemet sr som vergivenhet eller Orttvisa?"]})]}),d.jsxs("li",{className:"flex gap-3 text-white/80 text-sm",children:[d.jsx("span",{className:"text-orange-400 font-bold","aria-hidden":"true",children:""}),d.jsxs("span",{children:[d.jsx("strong",{children:"Praktisk Self-care:"}),' Vi var p Containment och Reglering. Hur skapar vi ett "vi" nr klienten misstror alla auktoriteter?']})]})]})]}),d.jsxs("div",{className:"glass bg-blue-900/10 border border-blue-500/20 rounded-2xl p-6",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4 text-blue-300",children:[d.jsx(wY,{size:24,"aria-hidden":"true"}),d.jsx("h4",{className:"text-xl font-bold",children:"Del 2: Onlinetrffar"})]}),d.jsx("p",{className:"text-sm text-white/70 mb-4",children:'3 halvdagar via lnk. Din "depstopp" fr handledning och implementation.'}),d.jsxs("ul",{className:"space-y-3",children:[d.jsxs("li",{className:"flex gap-3 text-white/80 text-sm",children:[d.jsx("span",{className:"text-blue-400 font-bold","aria-hidden":"true",children:""}),d.jsxs("span",{children:[d.jsx("strong",{children:"Case-arbete:"})," Du tar med dig fall frn din vardag."]})]}),d.jsxs("li",{className:"flex gap-3 text-white/80 text-sm",children:[d.jsx("span",{className:"text-blue-400 font-bold","aria-hidden":"true",children:""}),d.jsxs("span",{children:[d.jsx("strong",{children:"Metodfrdjupning:"})," Hur applicerar vi Self-care modellen i digitala mten eller korta samtal?"]})]}),d.jsxs("li",{className:"flex gap-3 text-white/80 text-sm",children:[d.jsx("span",{className:"text-blue-400 font-bold","aria-hidden":"true",children:""}),d.jsxs("span",{children:[d.jsx("strong",{children:"Hllbarhet:"})," Hur skyddar du dig sjlv frn sekundrtraumatisering nr du stngas mot systemet?"]})]})]})]})]})]})]}),d.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[d.jsxs("div",{className:"glass bg-gradient-to-br from-amber-500/10 to-orange-600/10 border border-orange-500/30 rounded-2xl p-8 relative overflow-hidden",children:[d.jsx("div",{className:"absolute -top-10 -right-10 text-orange-500/10 rotate-12","aria-hidden":"true",children:d.jsx(_g,{size:180})}),d.jsxs("h3",{className:"text-2xl font-bold mb-4 relative z-10 flex items-center gap-2",children:[d.jsx(uo,{className:"text-orange-400","aria-hidden":"true"})," Unikt vrde"]}),d.jsx("p",{className:"text-white/90 mb-6 relative z-10 font-medium",children:"Bli Kvalitetsmarkerad"}),d.jsx("p",{className:"text-white/70 text-sm mb-6 relative z-10 leading-relaxed",children:"Vi vet att tillit r hrdvaluta. Direkt efter godknd utbildning fr du rtten att anvnda Horizontens Kvalitetsmarkering fr MiT-kompetens."}),d.jsxs("div",{className:"space-y-3 relative z-10 bg-black/20 p-4 rounded-xl border border-white/5",children:[d.jsx("p",{className:"text-xs text-white/70 uppercase tracking-widest mb-2",children:"Bevis p kompetens"}),d.jsxs("div",{className:"flex gap-3 text-sm text-white/80",children:[d.jsx("span",{className:"font-bold text-orange-400",children:"1."}),d.jsx("span",{children:"Specialistkunskap om systeminducerad stress."})]}),d.jsxs("div",{className:"flex gap-3 text-sm text-white/80",children:[d.jsx("span",{className:"font-bold text-orange-400",children:"2."}),d.jsx("span",{children:"Evidensbaserade verktyg fr stabilisering."})]}),d.jsxs("div",{className:"flex gap-3 text-sm text-white/80",children:[d.jsx("span",{className:"font-bold text-orange-400",children:"3."}),d.jsx("span",{children:"Etiskt frhllningsstt via Self-care modellen."})]})]})]}),d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-2xl p-6 md:p-8",children:[d.jsx("h3",{className:"text-xl font-bold mb-6",children:"Praktisk information"}),d.jsxs("ul",{className:"space-y-4",children:[d.jsxs("li",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"bg-white/10 p-2 rounded-lg","aria-hidden":"true",children:d.jsx(dE,{size:20,className:"text-orange-300"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-white/70",children:"Plats"}),d.jsx("p",{className:"text-white font-medium",children:"Gullregnsgatan 9A, Gvle (Fysiska)"}),d.jsx("p",{className:"text-white font-medium",children:"Samt Zoom (Online)"})]})]}),d.jsxs("li",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"bg-white/10 p-2 rounded-lg","aria-hidden":"true",children:d.jsx(Dl,{size:20,className:"text-orange-300"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-white/70",children:"Omfattning"}),d.jsx("p",{className:"text-white font-medium",children:"3 heldagar fysiskt"}),d.jsx("p",{className:"text-white font-medium",children:"3 halvdagar online"})]})]}),d.jsxs("li",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"bg-white/10 p-2 rounded-lg","aria-hidden":"true",children:d.jsx(Gi,{size:20,className:"text-orange-300"})}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"text-sm text-white/70",children:"Kursledare"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-white font-medium",children:"Billy Ljungberg"}),d.jsx("p",{className:"text-xs text-white/70",children:"Traumaterapeut"})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-white font-medium",children:"Malin Widerlv"}),d.jsx("p",{className:"text-xs text-white/70",children:"Socialarbetare"})]})]})]})]}),d.jsxs("div",{className:"mt-8 pt-6 border-t border-white/10",children:[d.jsx("h4",{className:"text-sm font-bold text-white/70 mb-2",children:"Fr vem?"}),d.jsx("p",{className:"text-sm text-white/70 italic",children:"Socionomer, behandlingspedagoger, boendestdjare, terapeuter eller andra i grnssnittet mellan individ och myndighet."})]}),d.jsx("button",{onClick:()=>e("form"),className:"w-full mt-6 py-3 bg-white/10 hover:bg-white/20 border border-white/20 text-white rounded-xl font-bold transition-all hover:scale-105 focus:outline-none","aria-label":"Anml dig till Myndighetsinducerat Trauma utbildningen",children:"Anml dig hr"})]})]})]}),d.jsxs("div",{className:"mt-12 text-center",children:[d.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:"r du redo?"}),d.jsx("p",{className:"text-white/70",children:"Bli den skillnad dina klienter behver i mtet med systemet."})]})]})},kQ=({setPage:t})=>{const[e,n]=J.useState(()=>window.history.state?.showForm?"form":"splash"),[r,i]=J.useState({tidigare_erfarenhet:"",uppskattade:"",tanke_delar:"",utmaningar:[],annan_utmaning_text:"",mal:"",annat_mal_text:"",terapeut_kon:"inte_viktigt",motesform:"",namn:"",epost:"",telefon:""}),a=J.useRef(null);J.useEffect(()=>{window.history.state?.showForm&&a.current&&setTimeout(()=>{a.current?.scrollIntoView({behavior:"smooth",block:"center"})},100)},[]);const s=["ngest","Fobier","Skam och rdsla","Uppvxtproblematik","Sorg","Medberoende","Vuxna-barnproblematiken","Stress","Utbrndhet","PTSD","C-PTSD (komplex PTSD)"],o=u=>{const{value:h,checked:m}=u.target;i(m?v=>({...v,utmaningar:[...v.utmaningar,h]}):v=>({...v,utmaningar:v.utmaningar.filter(x=>x!==h)}))},c=u=>{u.preventDefault();const h="billy@klattertradet.se",m="Enkt, hjlp med att hitta terapeut";let v=`Hr r svaren frn din enkt:

`;v+=`1. Dina tidigare erfarenheter av terapi:
`,v+=`   - Har skt terapi tidigare? ${r.tidigare_erfarenhet||"Inget svar"}
`,r.uppskattade&&(v+=`   - Mest/minst uppskattat: ${r.uppskattade}
`),r.tanke_delar&&(v+=`   - Tankar kring upplevelser: ${r.tanke_delar}
`),v+=`
`,v+=`2. Vad sker du hjlp fr?
`;const x=r.utmaningar.map(T=>T==="annan"?`Annan: ${r.annan_utmaning_text}`:T);v+=`   - Aktuell utmaning: ${x.length>0?x.join(", "):"Inget svar"}
`,v+=`   - Huvudsakligt ml: ${r.mal==="annat"?`Annat: ${r.annat_mal_text}`:r.mal}
`,v+=`
`,v+=`3. nskeml p terapeut:
`,v+=`   - Terapeutens kn: ${r.terapeut_kon}
`,v+=`   - Fredragen mtesform: ${r.motesform}
`,v+=`
`,v+=`4. Dina kontaktuppgifter:
`,v+=`   - Namn: ${r.namn}
`,v+=`   - E-post: ${r.epost}
`,r.telefon&&(v+=`   - Telefon: ${r.telefon}
`);const _=`mailto:${h}?subject=${encodeURIComponent(m)}&body=${encodeURIComponent(v)}`;n("confirmation"),setTimeout(()=>{window.location.href=_},1e3)};return d.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 md:py-10 animate-fade-in space-y-20",children:[d.jsxs("div",{className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-8 md:p-16 relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-red-500/10 to-transparent pointer-events-none"}),d.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-12",children:[d.jsxs("div",{className:"max-w-2xl",children:[d.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-red-200 to-orange-400 leading-tight",children:"TERAPI"}),d.jsx("h2",{className:"text-xl md:text-3xl text-white/90 font-light italic mb-8",children:"Vi vgleder dig genom din utveckling"}),d.jsx("p",{className:"text-lg md:text-xl text-white/80 leading-relaxed font-light",children:"Enskild terapi kan g i flera olika led och tcka upp fr flera olika typer av problembilder. Det viktigaste fr oss r att vi mter dig i de problem du kommer med!"})]}),d.jsx("div",{className:"hidden lg:block shrink-0",children:d.jsx(ao,{src:"/pic-enskildterapi.jpeg",alt:"Enskild terapi",className:"w-72 h-96",grayscale:!1,blur:"8px",hoverBlur:"0px",defaultRotation:"-3deg"})})]})]}),d.jsxs("div",{className:"grid lg:grid-cols-2 gap-10",children:[d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 md:p-12 hover:bg-white/10 transition-all duration-300",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[d.jsx("div",{className:"p-3 bg-red-500/20 rounded-2xl text-red-400",children:d.jsx(hE,{size:32})}),d.jsx("h3",{className:"text-2xl font-bold",children:"Gestaltterapeutisk grund"})]}),d.jsxs("p",{className:"text-white/80 leading-relaxed mb-6",children:["I enskild terapi jobbar vi p en gestaltterapeutisk grund och det innebr att vi jobbar utifrn ",d.jsx("strong",{children:"Hr, Nu och Hur"}),". Gestaltterapi r en upplevelsebaserad terapiform dr vgen r mognad och fullbordan genom den egna upplevelsen."]}),d.jsx("p",{className:"text-white/80 leading-relaxed",children:"I gestaltterapi tittar vi inte bakt och brottas i intellektuella diskussioner om hur du haft det och varfr det varit som det varit utan vi jobbar utifrn hur ditt liv tar sig uttryck hr och nu och lser upp de knutar som str i vgen fr att du ska skapa och leva det liv som du vill!"})]}),d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 md:p-12 hover:bg-white/10 transition-all duration-300",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[d.jsx("div",{className:"p-3 bg-amber-500/20 rounded-2xl text-amber-400",children:d.jsx(wa,{size:32})}),d.jsx("h3",{className:"text-2xl font-bold",children:"Avsluta oavslutade mnster"})]}),d.jsx("p",{className:"text-white/80 leading-relaxed mb-6",children:"I gestaltterapi s jobbar vi fr att avsluta oavslutade mnster (gestalter) i livet som liksom gtt ut ur tid och inte lngre r nskvrda."}),d.jsxs("div",{className:"flex items-start gap-4 bg-black/20 p-6 rounded-2xl border border-white/5",children:[d.jsx(jc,{className:"text-orange-400 shrink-0 mt-1"}),d.jsx("p",{className:"text-white/90 italic",children:"Vi jobbar alltid med kontrakt i denna typ av terapi dr du sjlv bestmmer vgen och vi stmmer av med jmna mellanrum under perioden vi ses hur det gr med mlen i kontraktet."})]})]})]}),d.jsxs("div",{className:"glass bg-gradient-to-br from-red-900/10 to-orange-900/10 border border-white/10 rounded-3xl p-8 md:p-12 h-fit",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[d.jsx("div",{className:"p-3 bg-red-500/20 rounded-2xl text-red-400",children:d.jsx(Zo,{size:32})}),d.jsx("h3",{className:"text-2xl font-bold",children:"I enskild terapi jobbar vi med t.ex:"})]}),d.jsx("div",{className:"grid sm:grid-cols-2 gap-4",children:s.map((u,h)=>d.jsxs("div",{className:"flex items-center gap-3 bg-white/5 border border-white/5 p-4 rounded-xl hover:bg-white/10 hover:border-white/10 transition-all group",children:[d.jsx(xf,{className:"text-red-400/50 group-hover:text-red-400 transition-colors shrink-0",size:18}),d.jsx("span",{className:"text-white/80 font-medium",children:u})]},h))}),d.jsxs("div",{className:"mt-10 pt-8 border-t border-white/10 space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-3 text-white/70",children:[d.jsx(Gi,{size:20,className:"text-orange-300"}),d.jsx("p",{className:"text-sm",children:"Vi jobbar med olika terapiformer och gr kontinuerligt i handledning."})]}),d.jsxs("div",{className:"flex items-center gap-3 text-white/70",children:[d.jsx(lY,{size:20,className:"text-orange-300"}),d.jsx("p",{className:"text-sm",children:"Vrt fokus r att mta dig dr du r, med de specifika utmaningar du br p."})]})]})]})]}),d.jsx("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-10 text-center max-w-4xl mx-auto",children:d.jsx("p",{className:"text-2xl font-light text-white/90 leading-relaxed italic",children:'"Det viktigaste fr oss r att vi mter dig i de problem du kommer med!"'})}),d.jsxs("div",{className:"max-w-4xl mx-auto w-full",children:[e==="splash"&&d.jsxs("button",{onClick:()=>n("form"),className:"w-full glass bg-white/10 backdrop-blur-xl border border-white/20 p-12 rounded-[40px] text-center hover:bg-white/15 transition-all group shadow-2xl animate-fade-in",children:[d.jsx("div",{className:"mb-6 flex justify-center",children:d.jsx("div",{className:"p-5 bg-orange-500/20 rounded-full text-orange-400 group-hover:scale-110 transition-transform duration-500",children:d.jsx(Zo,{size:40})})}),d.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Vi finns hr fr dig."}),d.jsx("p",{className:"text-lg text-white/70 mb-8 leading-relaxed",children:"Klicka hr fr att bertta mer, helt konfidentiellt."}),d.jsx("span",{className:"inline-block px-8 py-3 bg-white/10 hover:bg-white/20 border border-white/20 text-white rounded-xl font-bold transition-all hover:scale-105",children:"Hitta din terapeut"})]}),e==="form"&&d.jsxs("div",{ref:a,className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-8 md:p-12 shadow-2xl animate-fade-in",children:[d.jsxs("div",{className:"text-center mb-10",children:[d.jsx(bO,{className:"mx-auto text-orange-400 mb-4",size:40}),d.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Sker du terapi?"}),d.jsx("p",{className:"text-white/70",children:"Lt oss hjlpa dig p vgen genom att svara p ngra korta frgor."})]}),d.jsxs("form",{onSubmit:c,className:"space-y-8",children:[d.jsxs("fieldset",{className:"p-6 border border-white/10 rounded-2xl bg-white/5",children:[d.jsx("legend",{className:"text-lg font-bold text-orange-300 px-3 mb-4",children:"1. Tidigare erfarenheter"}),d.jsxs("div",{className:"space-y-4 mb-6",children:[d.jsx("p",{className:"font-medium text-white/90",children:"Har du skt terapi tidigare?"}),["Ja, jag har gtt i terapi.","Nej, det hr r frsta gngen.","Jag har skt, men inte fullfljt."].map(u=>d.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[d.jsx("input",{type:"radio",name:"exp",value:u,onChange:h=>i({...r,tidigare_erfarenhet:h.target.value}),className:"w-4 h-4 text-orange-500 bg-white/10 border-white/20"}),d.jsx("span",{className:"text-white/80 group-hover:text-white transition-colors",children:u})]},u))]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("label",{className:"block font-medium text-white/90",children:"Vad uppskattade du mest/minst tidigare?"}),d.jsx("textarea",{rows:2,maxLength:200,className:"w-full p-4 bg-black/30 border border-white/10 rounded-xl text-white outline-none focus:ring-2 focus:ring-orange-500",value:r.uppskattade,onChange:u=>i({...r,uppskattade:u.target.value})})]})]}),d.jsxs("fieldset",{className:"p-6 border border-white/10 rounded-2xl bg-white/5",children:[d.jsx("legend",{className:"text-lg font-bold text-orange-300 px-3 mb-4",children:"2. Vad sker du hjlp fr?"}),d.jsx("div",{className:"grid sm:grid-cols-2 gap-3 mb-6",children:["Stress","ngest","Nedstmdhet","Relationer","Sorg","Annan"].map(u=>d.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[d.jsx("input",{type:"checkbox",value:u,onChange:o,className:"w-4 h-4 rounded text-orange-500 bg-white/10 border-white/20"}),d.jsx("span",{className:"text-white/80",children:u})]},u))}),d.jsx("textarea",{rows:1,placeholder:"Beskriv mer hr...",className:"w-full p-4 bg-black/30 border border-white/10 rounded-xl text-white outline-none focus:ring-2 focus:ring-orange-500",value:r.annan_utmaning_text,onChange:u=>i({...r,annan_utmaning_text:u.target.value})})]}),d.jsxs("fieldset",{className:"p-6 border border-white/10 rounded-2xl bg-white/5",children:[d.jsx("legend",{className:"text-lg font-bold text-orange-300 px-3 mb-4",children:"3. nskeml & Kontakt"}),d.jsxs("div",{className:"mb-6",children:[d.jsx("p",{className:"font-medium text-white/90 mb-3",children:"Fredragen mtesform?"}),d.jsx("div",{className:"space-y-2",children:["Fysiska mten p plats.","Digitalt via Zoom."].map(u=>d.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[d.jsx("input",{type:"radio",name:"motesform",value:u,onChange:h=>i({...r,motesform:h.target.value}),className:"w-4 h-4 text-orange-500 bg-white/10 border-white/20"}),d.jsx("span",{className:"text-white/80 group-hover:text-white transition-colors",children:u})]},u))})]}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"Namn"}),d.jsx("input",{type:"text",required:!0,className:"w-full p-3 bg-black/30 border border-white/10 rounded-xl text-white",value:r.namn,onChange:u=>i({...r,namn:u.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"E-post"}),d.jsx("input",{type:"email",required:!0,className:"w-full p-3 bg-black/30 border border-white/10 rounded-xl text-white",value:r.epost,onChange:u=>i({...r,epost:u.target.value})})]})]})]}),d.jsxs("button",{type:"submit",className:"w-full py-5 bg-white/10 hover:bg-white/20 border border-white/20 text-white font-bold rounded-xl shadow-xl hover:scale-[1.01] active:scale-95 transition-all flex items-center justify-center gap-3",children:["Skicka in och hitta matchning ",d.jsx(zc,{size:20})]})]})]}),e==="confirmation"&&d.jsxs("div",{className:"glass bg-white/10 backdrop-blur-xl border border-white/20 p-12 rounded-[40px] text-center shadow-2xl animate-fade-in",children:[d.jsx(xf,{className:"mx-auto text-green-400 mb-6",size:64}),d.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Tack fr ditt frtroende!"}),d.jsx("p",{className:"text-lg text-white/80 mb-6",children:"Vi frbereder nu ett e-postmeddelande med dina svar."}),d.jsx("p",{className:"text-white/60",children:'Klicka p "Skicka" i din e-postklient nr den ppnas. Vi terkommer snarast!'}),d.jsx("button",{onClick:()=>n("splash"),className:"mt-8 text-white hover:text-amber-400 underline font-bold",children:"G tillbaka"})]})]})]})},MQ=({setPage:t})=>d.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 md:py-10 animate-fade-in space-y-16",children:[d.jsxs("div",{className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-8 md:p-16 relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-indigo-500/10 to-transparent pointer-events-none"}),d.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-12",children:[d.jsxs("div",{className:"max-w-2xl",children:[d.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-indigo-200 to-purple-400 leading-tight",children:"GRUPP- & PARTERAPI"}),d.jsx("h2",{className:"text-xl md:text-3xl text-white/90 font-light italic mb-8",children:"Lkning genom relation och gemenskap"}),d.jsx("p",{className:"text-lg md:text-xl text-white/80 leading-relaxed font-light",children:"Mnniskan r en social varelse. Mnga av vra djupaste sr uppstr i relationer, men det r ocks dr de kan lka bst. Vi erbjuder specialiserad terapi fr grupper och par som vill frdjupa sin kontakt och lsa upp lsta mnster."})]}),d.jsx("div",{className:"hidden lg:block shrink-0",children:d.jsx(ao,{src:"/Pic-gruppterapi.jpeg",alt:"Gruppterapi",className:"w-64 h-80",grayscale:!1,defaultRotation:"-3deg",blur:"8px",hoverBlur:"0px"})})]})]}),d.jsxs("div",{className:"grid lg:grid-cols-2 gap-10",children:[d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 md:p-12 hover:bg-white/10 transition-all duration-300",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[d.jsx("div",{className:"p-3 bg-purple-500/20 rounded-2xl text-purple-400",children:d.jsx(Zo,{size:32})}),d.jsx("h3",{className:"text-2xl font-bold",children:"Parterapi"})]}),d.jsx("p",{className:"text-white/80 leading-relaxed mb-6",children:"I parterapi fokuserar vi p dynamiken mellan er. Vi anvnder oss av gestaltmetodik fr att titta p hur ni kommunicerar, hur ni mter varandras behov och var kontakten brister."}),d.jsx("ul",{className:"space-y-4 mb-8",children:["Lsa upp destruktiva konflikmnster","Frdjupa den emotionella kontakten","Hantering av kriser och frtroendebrott","Utforska gemensamma vrderingar och ml"].map((e,n)=>d.jsxs("li",{className:"flex items-center gap-3 text-white/70 text-sm",children:[d.jsx(xf,{size:16,className:"text-purple-400"}),e]},n))})]}),d.jsx("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 md:p-12 hover:bg-white/10 transition-all duration-300",children:d.jsx("div",{className:"flex flex-col lg:flex-row gap-10 items-center",children:d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[d.jsx("div",{className:"p-3 bg-indigo-500/20 rounded-2xl text-indigo-400",children:d.jsx(zY,{size:32})}),d.jsx("h3",{className:"text-2xl font-bold",children:"Gruppterapi"})]}),d.jsx("p",{className:"text-white/80 leading-relaxed mb-6",children:"Gruppen fungerar som en spegel. Genom att dela sina upplevelser med andra i liknande situationer skapas en unik form av validering och igenknning som r svr att n i enskild terapi."}),d.jsxs("div",{className:"bg-black/20 p-6 rounded-2xl border border-white/5 space-y-4",children:[d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(wa,{className:"text-indigo-400 mt-1",size:20}),d.jsx("p",{className:"text-sm text-white/80 italic",children:'"Att inse att jag inte r ensam r det frsta steget mot verklig frndring."'})]}),d.jsx("p",{className:"text-xs text-white/50",children:"Vi hller kontinuerligt grupper fr t.ex. anhriga, vuxna barn till missbrukare eller personer med liknande traumaupplevelser."})]})]})})})]}),d.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[d.jsxs("div",{className:"text-center space-y-4",children:[d.jsx("div",{className:"mx-auto w-16 h-16 bg-white/10 rounded-full flex items-center justify-center text-indigo-300",children:d.jsx(uo,{size:32})}),d.jsx("h4",{className:"font-bold",children:"Trygghet i rummet"}),d.jsx("p",{className:"text-sm text-white/60",children:"Vi skapar en ram dr alla parter knner sig hrda och respekterade."})]}),d.jsxs("div",{className:"text-center space-y-4",children:[d.jsx("div",{className:"mx-auto w-16 h-16 bg-white/10 rounded-full flex items-center justify-center text-indigo-300",children:d.jsx(Gi,{size:32})}),d.jsx("h4",{className:"font-bold",children:"Relationell vxt"}),d.jsx("p",{className:"text-sm text-white/60",children:"Fokus p hur vi pverkar varandra i realtid  hr och nu."})]}),d.jsxs("div",{className:"text-center space-y-4",children:[d.jsx("div",{className:"mx-auto w-16 h-16 bg-white/10 rounded-full flex items-center justify-center text-indigo-300",children:d.jsx(hE,{size:32})}),d.jsx("h4",{className:"font-bold",children:"Mlmedvetenhet"}),d.jsx("p",{className:"text-sm text-white/60",children:"Vi arbetar med tydliga kontrakt fr att n de resultat ni nskar."})]})]}),d.jsxs("div",{className:"glass bg-gradient-to-r from-indigo-900/40 to-purple-900/40 border border-white/20 rounded-3xl p-10 text-center max-w-4xl mx-auto",children:[d.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Vill ni veta mer?"}),d.jsx("p",{className:"text-white/70 mb-8",children:"Boka ett inledande samtal fr att se om grupp- eller parterapi r rtt vg fr just er."}),d.jsxs("button",{onClick:()=>t(Te.CONTACT),className:"px-10 py-4 bg-white text-indigo-900 rounded-full font-bold hover:scale-105 transition-all shadow-xl flex items-center gap-2 mx-auto",children:["Kontakta oss fr bokning ",d.jsx(Vi,{size:20})]})]})]}),NQ=({setPage:t})=>d.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 md:py-10 animate-fade-in space-y-16",children:[d.jsxs("div",{className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-8 md:p-16 relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-1/3 h-full bg-gradient-to-l from-blue-500/10 to-transparent pointer-events-none"}),d.jsxs("div",{className:"relative z-10 max-w-4xl",children:[d.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-blue-200 to-indigo-400 leading-tight",children:"Utbildning i Gestaltterapi"}),d.jsx("h2",{className:"text-xl md:text-3xl text-white/90 font-light italic mb-8",children:"Frdjupa din nrvaro och professionella skicklighet"}),d.jsx("p",{className:"text-lg md:text-xl text-white/80 leading-relaxed",children:"Vr gestaltutbildning vnder sig till dig som vill arbeta processinriktat och relationellt. Vi fokuserar p kontakten, medvetenheten och det personliga ansvaret i det terapeutiska mtet."})]})]}),d.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[d.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-2xl p-6 md:p-8",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[d.jsx("div",{className:"p-3 bg-blue-500/20 rounded-xl text-blue-400",children:d.jsx(hE,{size:28})}),d.jsx("h3",{className:"text-2xl font-bold",children:"Hr, Nu och Hur"})]}),d.jsx("p",{className:"text-white/80 leading-relaxed mb-6",children:"Gestaltterapi r en upplevelsebaserad metod. I utbildningen lr du dig att anvnda dig sjlv som instrument och att arbeta med det som sker i rummet just nu. Vi gr bortom intellektualiseringar och fokuserar p den direkta upplevelsen och hur den formar vra livsmnster."}),d.jsx("p",{className:"text-white/80 leading-relaxed",children:"Utbildningen ger dig verktyg att identifiera oavslutade gestalter och stdja klienten i att n fullbordan och mognad. Vi varvar teori med praktiska vningar, handledning och eget terapiarbete."})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-2xl font-bold px-2",children:"Utbildningens krnomrden"}),d.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:[{title:"Kontaktformler",desc:"Frstelse fr hur vi mter eller undviker kontakt med omvrlden."},{title:"Figur & Grund",desc:"Lr dig se vad som trder fram som mest relevant i stunden."},{title:"Kroppslig Medvetenhet",desc:"Lyssna p kroppens signaler som brare av sanning."},{title:"Den terapeutiska alliansen",desc:"Att bygga en trygg och utmanande relation."}].map((e,n)=>d.jsxs("div",{className:"glass bg-white/5 border border-white/5 p-6 rounded-xl hover:bg-white/10 transition-colors",children:[d.jsx("h4",{className:"font-bold text-blue-300 mb-2",children:e.title}),d.jsx("p",{className:"text-sm text-white/70",children:e.desc})]},n))})]})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"glass bg-gradient-to-br from-blue-900/20 to-indigo-900/20 border border-blue-500/30 rounded-2xl p-6",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx(yx,{className:"text-yellow-400",size:24}),d.jsx("h3",{className:"text-xl font-bold",children:"Vem br g?"})]}),d.jsx("p",{className:"text-white/80 text-sm leading-relaxed mb-6",children:"Utbildningen r skrddarsydd fr socionomer, psykologer, behandlingspedagoger och chefer som vill frdjupa sitt ledarskap och sin samtalsmetodik."}),d.jsxs("div",{className:"space-y-3 bg-black/30 p-4 rounded-xl border border-white/5",children:[d.jsxs("div",{className:"flex gap-3 text-xs text-white/70",children:[d.jsx(jc,{className:"text-blue-400 shrink-0",size:16}),d.jsx("span",{children:"Minst 2 rs yrkeserfarenhet inom mnniskovrdande yrken."})]}),d.jsxs("div",{className:"flex gap-3 text-xs text-white/70",children:[d.jsx(jc,{className:"text-blue-400 shrink-0",size:16}),d.jsx("span",{children:"Vilja att arbeta med sin egen personliga utveckling."})]})]})]}),d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-2xl p-6",children:[d.jsx("h3",{className:"text-xl font-bold mb-4",children:"Intresseanmlan"}),d.jsx("p",{className:"text-sm text-white/60 mb-6",children:"Vi startar nya grupper kontinuerligt. Kontakta oss fr kursstart och kursplan."}),d.jsxs("button",{onClick:()=>t(Te.CONTACT),className:"w-full py-3 bg-white/10 hover:bg-white/20 border border-white/20 text-white rounded-xl font-bold transition-all hover:scale-105 flex items-center justify-center gap-2",children:["Kontakta oss ",d.jsx(Vi,{size:18})]})]})]})]})]}),CQ=({setPage:t})=>{const[e,n]=J.useState(null),r=a=>{n(e===a?null:a)},i=[{id:1,title:"Block 1: Introduktion & Yrkesroll",content:"Hr lggs grunden fr yrkesrollen som behandlingspedagog. Vi gr igenom etik, vrdegrund och vad det innebr att arbeta professionellt med mnniskor i utsatta situationer. Fokus p bemtande och empatisk frmga."},{id:2,title:"Block 2: Kommunikation & Samtalsmetodik",content:"Detta block fokuserar p praktiska verktyg fr kommunikation. Vi trnar p aktivt lyssnande, MI (Motiverande Samtal) och hur man bygger brande relationer med klienter."},{id:3,title:"Block 3: Psykisk Ohlsa & Diagnoser",content:"Grundlggande kunskap om de vanligaste psykiatriska diagnoserna ssom ngest, depression, ADHD och autismspektrumtillstnd. Hur anpassar vi vrt std utifrn olika frutsttningar?"},{id:4,title:"Block 4: Beroendelra & Missbruk",content:"En djupdykning i beroendets mekanismer, bde substansberoende och beteendeberoende. Vi gr igenom olika behandlingsmodeller och terfallsprevention."},{id:5,title:"Block 5: Sociallagstiftning & Dokumentation",content:"Viktiga lagar som styr arbetet, ssom SoL och LSS. Vi lr oss ocks vikten av rttssker dokumentation och hur man skriver genomfrandeplaner."},{id:6,title:"Block 6: Konflikthantering & Lgaffektivt Bemtande",content:"Metoder fr att frebygga och hantera hotfulla situationer. Vi arbetar med lgaffektivt bemtande (LAB) fr att skapa trygghet fr bde personal och klienter."},{id:7,title:"Block 7: Gruppdynamik & Systemteori",content:"Hur fungerar grupper och familjesystem? Vi tittar p roller i grupper och hur man kan arbeta med ntverket runt individen."},{id:8,title:"Block 8: Praktisk Tillmpning & Avslutning",content:"Summering av utbildningen, fallbeskrivningar (case) och praktiska vningar dr vi vver samman kunskapen frn alla tidigare block. Diplomering."}];return d.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 md:py-10 animate-fade-in space-y-16",children:[d.jsxs("div",{className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-8 md:p-16 relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-1/3 h-full bg-gradient-to-l from-emerald-500/10 to-transparent pointer-events-none"}),d.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row items-center justify-between gap-12",children:[d.jsxs("div",{className:"max-w-3xl",children:[d.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-emerald-200 to-teal-400 leading-tight",children:"Behandlingspedagog"}),d.jsx("h2",{className:"text-xl md:text-3xl text-white/90 font-light italic mb-8",children:"En yrkesutbildning fr framtidens vrd och omsorg"}),d.jsx("p",{className:"text-lg md:text-xl text-white/80 leading-relaxed font-light",children:"Vill du arbeta med mnniskor och gra verklig skillnad? Vr utbildning till behandlingspedagog ger dig den teoretiska grund och de praktiska verktyg du behver fr att st trygg i mtet med mnniskor i frndring."})]}),d.jsx("div",{className:"hidden lg:block shrink-0",children:d.jsx(ao,{src:"/Pic-BIllyteavla.jpeg",alt:"Behandlingspedagog",className:"w-80 h-[28rem]",grayscale:!1,defaultRotation:"3deg"})})]})]}),d.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[d.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-2xl p-6 md:p-8",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[d.jsx("div",{className:"p-3 bg-emerald-500/20 rounded-xl text-emerald-400",children:d.jsx(bY,{size:28})}),d.jsx("h3",{className:"text-2xl font-bold",children:"Om utbildningen"})]}),d.jsx("p",{className:"text-white/80 leading-relaxed mb-6",children:"Vr utbildning r utformad fr att ge dig en bred kompetens som efterfrgas p arbetsmarknaden. Vi varvar frelsningar med grupparbeten, rollspel och reflektion. Mlet r att du efter avslutad utbildning ska knna dig redo att arbeta inom exempelvis HVB-hem, stdboende, ppenvrd eller socialpsykiatri."})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("h3",{className:"text-2xl font-bold px-2 mb-4 flex items-center gap-2",children:[d.jsx(hx,{size:24,className:"text-emerald-400"})," Kursinnehll"]}),d.jsx("div",{className:"space-y-3",children:i.map(a=>d.jsxs("div",{className:`glass border rounded-xl overflow-hidden transition-all duration-300 ${e===a.id?"bg-white/10 border-emerald-500/40 shadow-lg":"bg-white/5 border-white/5 hover:bg-white/10"}`,children:[d.jsxs("button",{onClick:()=>r(a.id),className:"w-full flex items-center justify-between p-5 text-left focus:outline-none",children:[d.jsx("span",{className:`font-bold text-lg ${e===a.id?"text-emerald-300":"text-white/90"}`,children:a.title}),e===a.id?d.jsx($H,{className:"text-emerald-400",size:24}):d.jsx(n1,{className:"text-white/50",size:24})]}),e===a.id&&d.jsxs("div",{className:"px-5 pb-6 pt-0 animate-fade-in",children:[d.jsx("div",{className:"h-px bg-white/10 mb-4 w-full"}),d.jsx("p",{className:"text-white/80 leading-relaxed",children:a.content})]})]},a.id))})]})]}),d.jsx("div",{className:"space-y-6",children:d.jsxs("div",{className:"glass bg-gradient-to-br from-emerald-900/20 to-teal-900/20 border border-emerald-500/30 rounded-2xl p-6 sticky top-6",children:[d.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[d.jsx(Dl,{size:20,className:"text-emerald-400"})," Kursstart & Upplgg"]}),d.jsxs("div",{className:"space-y-4 mb-8",children:[d.jsxs("div",{className:"flex gap-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center shrink-0",children:d.jsx(Gi,{size:18,className:"text-emerald-300"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-white/50 uppercase font-bold",children:"Studietakt"}),d.jsx("p",{className:"text-white font-medium",children:"Halvfart (50%)"}),d.jsx("p",{className:"text-sm text-white/70",children:"Mjligt att kombinera med arbete"})]})]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center shrink-0",children:d.jsx(jc,{size:18,className:"text-emerald-300"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-white/50 uppercase font-bold",children:"Behrighet"}),d.jsx("p",{className:"text-white font-medium",children:"Grundlggande behrighet"}),d.jsx("p",{className:"text-sm text-white/70",children:"Intervju kan frekomma"})]})]})]}),d.jsx("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5 mb-6",children:d.jsx("p",{className:"text-sm text-white/80 italic",children:'"En utbildning som inte bara ger kunskap, utan ocks personlig utveckling."'})}),d.jsxs("button",{onClick:()=>t(Te.CONTACT),className:"w-full py-4 bg-white/10 hover:bg-white/20 border border-white/20 text-white rounded-xl font-bold transition-all hover:scale-[1.02] flex items-center justify-center gap-2",children:["Ansk nu ",d.jsx(Vi,{size:20})]})]})})]})]})},RQ=({setPage:t})=>{const[e,n]=J.useState(!1),[r,i]=J.useState(!1),[a,s]=J.useState({url:"",title:""}),o=[{title:"Ett grundlggande attributionsfel",description:"Varfr dmer vi andra hrdare n oss sjlva? En genomgng av hur vra hjrnor snedvrider verkligheten i sociala relationer.",pdfUrl:"/Attributionsfel-narcissism.pdf",category:"Psykologi",date:"2024-01-20"},{title:"Polarisering och personlighetsstrningar",description:"En djupanalys av hur dmande och polarisering pverkar vra relationer och vr sjlvbild i ett kliniskt sammanhang.",pdfUrl:"/Polarisering-av-personlighetsstrningar .pdf",category:"Klinisk analys",date:"2024-01-15"}],c=(h,m)=>{s({url:h,title:m}),i(!0)},u=()=>{n(!0),setTimeout(()=>n(!1),5e3)};return d.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 animate-fade-in space-y-12",children:[d.jsx(kO,{isOpen:r,onClose:()=>i(!1),pdfUrl:a.url,title:a.title}),d.jsxs("div",{className:"text-center max-w-3xl mx-auto space-y-4",children:[d.jsx("h1",{className:"text-4xl md:text-5xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-amber-200 to-orange-400",children:"Blogg & Reflektion"}),d.jsx("p",{className:"text-lg text-white/70 italic font-light",children:"Tankar om trauma, terhmtning och mnsklig utveckling."})]}),d.jsxs("div",{className:"max-w-5xl mx-auto space-y-8",children:[d.jsxs("h3",{className:"text-sm font-black px-4 text-white/30 uppercase tracking-[0.3em] flex items-center gap-3",children:[d.jsx(wa,{size:16,className:"text-orange-500"})," Senaste inlggen"]}),d.jsx("div",{className:"grid gap-6",children:o.map((h,m)=>d.jsxs("div",{className:"glass bg-white/[0.03] border border-white/10 rounded-[2.5rem] p-6 md:p-10 hover:bg-white/[0.05] hover:border-orange-500/30 transition-all duration-500 group relative overflow-hidden flex flex-col md:flex-row gap-8 items-center",children:[d.jsx("div",{className:"md:w-1/4 flex justify-center",children:d.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 bg-orange-500/10 rounded-3xl flex items-center justify-center text-orange-400 group-hover:scale-110 transition-transform duration-500",children:d.jsx(gx,{size:48})})}),d.jsxs("div",{className:"md:w-3/4 space-y-4 text-center md:text-left",children:[d.jsxs("div",{className:"flex flex-wrap justify-center md:justify-start gap-3 items-center",children:[d.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest bg-orange-500/20 text-orange-400 px-3 py-1 rounded-full",children:h.category}),d.jsxs("span",{className:"text-[10px] font-bold text-white/30 flex items-center gap-1",children:[d.jsx(WH,{size:12})," ",h.date]})]}),d.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white leading-tight group-hover:text-amber-200 transition-colors",children:h.title}),d.jsx("p",{className:"text-white/60 text-sm md:text-base leading-relaxed max-w-2xl font-light",children:h.description}),d.jsxs("button",{onClick:()=>c(h.pdfUrl,h.title),className:"flex items-center gap-2 text-orange-400 font-black text-sm md:text-base hover:gap-4 transition-all mx-auto md:mx-0",children:["Ls hela inlgget ",d.jsx(Vi,{size:20})]})]}),d.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 right-[5%] p-4 opacity-5 group-hover:opacity-10 transition-opacity blur-[1px] pointer-events-none",children:d.jsx("img",{src:"/assets/logo2.png",alt:"Logo",className:"w-40 h-40 md:w-56 md:h-56 object-contain rotate-12"})})]},m))})]}),d.jsx("div",{className:"max-w-5xl mx-auto",children:d.jsxs("div",{className:"glass bg-gradient-to-br from-orange-600/10 to-transparent border border-white/10 rounded-[3rem] p-8 md:p-12 text-center flex flex-col items-center justify-center space-y-6 relative overflow-hidden shadow-2xl",children:[d.jsx("div",{className:"p-4 bg-orange-500/10 rounded-2xl text-orange-400",children:d.jsx(gg,{size:32})}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white",children:"Vill du veta nr vi publicerar nsta del?"}),d.jsx("p",{className:"text-white/60 max-w-lg mx-auto leading-relaxed font-light",children:"Registrera dig fr vra mnadsbrev s fr du bde nya artiklar och inbjudningar till vra workshops direkt i korgen."})]}),e?d.jsxs("div",{className:"flex items-center gap-3 px-8 py-3.5 bg-green-500/20 border border-green-500/40 rounded-xl text-green-400 text-sm font-black animate-fade-in uppercase tracking-widest",children:[d.jsx(xf,{size:18}),"Vi hr av oss!"]}):d.jsx("button",{onClick:u,className:"px-8 py-3.5 bg-orange-500 hover:bg-orange-400 text-slate-950 rounded-xl font-black transition-all hover:scale-105 shadow-xl shadow-orange-500/20 flex items-center gap-2 uppercase tracking-widest text-xs",children:"F notis vid nya inlgg"})]})}),d.jsx(AO,{}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto opacity-30 grayscale pointer-events-none",children:["Trauma","Gestaltterapi","Pedagogik","Reflektion"].map(h=>d.jsx("div",{className:"glass bg-white/5 border border-white/10 py-3 rounded-full text-center text-xs uppercase tracking-widest font-bold",children:h},h))})]})},IQ=()=>{const[t,e]=J.useState("info"),[n,r]=J.useState({name:"",ssn:"",email:"",phone:"",newsletter:!0}),i=a=>{a.preventDefault(),e("success")};return d.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 md:py-10 animate-fade-in w-full space-y-12",children:[d.jsxs("div",{className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-8 md:p-16 relative overflow-hidden flex flex-col lg:flex-row items-center justify-between gap-12",children:[d.jsxs("div",{className:"max-w-2xl text-center lg:text-left",children:[d.jsx("h1",{className:"text-3xl md:text-5xl font-bold mb-6 text-transparent bg-clip-text bg-gradient-to-r from-amber-200 to-orange-400",children:"Horizonten Gemenskap"}),d.jsx("p",{className:"text-xl md:text-2xl text-white/90 font-light italic mb-8",children:"En trygg hamn fr lkning, insikt och tillsammanskap."}),d.jsxs("div",{className:"flex justify-center lg:justify-start gap-4 flex-wrap",children:[d.jsx("div",{className:"px-6 py-2 bg-white/10 rounded-full border border-white/20 text-sm",children:"Appen"}),d.jsx("div",{className:"px-6 py-2 bg-white/10 rounded-full border border-white/20 text-sm",children:"Gemenskap"}),d.jsx("div",{className:"px-6 py-2 bg-white/10 rounded-full border border-white/20 text-sm",children:"Sjlvhjlp"})]})]}),d.jsx("div",{className:"hidden lg:block shrink-0",children:d.jsx(ao,{src:"/bild-terapistol.jpeg",alt:"Gemenskap",className:"w-64 h-80",grayscale:!1,defaultRotation:"3deg"})})]}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 hover:bg-white/10 transition-all duration-300",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[d.jsx("div",{className:"p-3 bg-orange-500/20 rounded-2xl text-orange-400",children:d.jsx(fE,{size:32})}),d.jsx("h2",{className:"text-2xl font-bold",children:"Appen frn Horizonten"})]}),d.jsx("p",{className:"text-white/80 leading-relaxed mb-6",children:"Vr egen app r hjrtat i vr gemenskap. Hr hittar du ett skert rum dr du kan dela erfarenheter, f std och vxa tillsammans med andra som frstr. Appen r designad fr att vara din fljeslagare i vardagen, fylld med verktyg fr sjlvreglering och reflektion."}),d.jsxs("ul",{className:"space-y-3",children:[d.jsxs("li",{className:"flex items-start gap-3 text-white/70",children:[d.jsx(wa,{className:"text-amber-400 shrink-0 mt-1",size:18}),d.jsx("span",{children:"Interaktiv gemenskap fr erfarenhetsutbyte."})]}),d.jsxs("li",{className:"flex items-start gap-3 text-white/70",children:[d.jsx(wa,{className:"text-amber-400 shrink-0 mt-1",size:18}),d.jsx("span",{children:"Exklusivt material och guidade vningar."})]})]})]}),d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 hover:bg-white/10 transition-all duration-300",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[d.jsx("div",{className:"p-3 bg-red-500/20 rounded-2xl text-red-400",children:d.jsx(Dl,{size:32})}),d.jsx("h2",{className:"text-2xl font-bold",children:"Terapeutledda mten"})]}),d.jsx("p",{className:"text-white/80 leading-relaxed mb-6",children:"Vi tror p kraften i det gemensamma samtalet. Varje vecka hller vi i terapeutledda sjlvhjlpsmten i appen. Hr fr du professionell guidning i en trygg gruppmilj dr vi fokuserar p praktisk tillmpning av traumafrstelse och lkning."}),d.jsxs("div",{className:"bg-black/20 p-4 rounded-2xl border border-white/5",children:[d.jsx("p",{className:"text-sm font-bold text-orange-300 mb-1",children:"Nr?"}),d.jsx("p",{className:"text-white/70 italic",children:"En gng per vecka, direkt i Horizonten-appen."})]})]})]}),d.jsxs("div",{className:"glass bg-gradient-to-br from-orange-900/20 to-amber-900/20 border border-orange-500/30 rounded-3xl p-8 md:p-12 transition-all duration-500",children:[t==="info"&&d.jsxs("div",{className:"grid md:grid-cols-3 gap-8 items-center animate-fade-in",children:[d.jsx("div",{className:"md:col-span-1 flex justify-center",children:d.jsx(ao,{src:"/booklet.jpeg",alt:"Boken: Myndighetsinducerat trauma",className:"w-48 h-64",defaultRotation:"3deg"})}),d.jsxs("div",{className:"md:col-span-2 space-y-6",children:[d.jsx("h2",{className:"text-3xl font-bold",children:"Boken: Myndighetsinducerat trauma"}),d.jsx("p",{className:"text-lg text-white/80 leading-relaxed",children:"Vr nyutgivna bok r en djupdykning i hur systemet kan skada och hur vi kan lka. Men boken r mer n bara text  den r en guide."}),d.jsxs("div",{className:"flex items-start gap-4 bg-white/5 p-6 rounded-2xl border border-white/10",children:[d.jsx(Zo,{className:"text-red-400 shrink-0"}),d.jsx("p",{className:"text-white/90 italic",children:'"Tillhrande boken finns en stor mngd sjlvhjlpsmaterial och praktiska vningar i appen, skapade fr att ge dig verktygen att navigera i din egen lkningsprocess."'})]}),d.jsx("button",{onClick:()=>e("form"),className:"px-8 py-3 bg-white/10 hover:bg-white/20 border border-white/20 text-white rounded-xl font-bold transition-all hover:scale-105",children:"Bestll boken hr"})]})]}),t==="form"&&d.jsxs("div",{className:"max-w-2xl mx-auto animate-fade-in",children:[d.jsxs("div",{className:"flex items-center justify-between mb-8",children:[d.jsx("h2",{className:"text-3xl font-bold",children:"Bestll boken"}),d.jsx("button",{onClick:()=>e("info"),className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:d.jsx(Bc,{size:24,className:"text-white/70"})})]}),d.jsxs("form",{onSubmit:i,className:"space-y-6",children:[d.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-bold text-white/80 ml-1",children:"Namn"}),d.jsx("input",{required:!0,type:"text",placeholder:"Ditt namn",className:"w-full p-4 bg-black/40 border border-white/10 rounded-xl text-white outline-none focus:border-amber-500 transition-all",value:n.name,onChange:a=>r({...n,name:a.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-bold text-white/80 ml-1",children:"Personnummer"}),d.jsx("input",{required:!0,type:"text",placeholder:"MMDD-XXXX",className:"w-full p-4 bg-black/40 border border-white/10 rounded-xl text-white outline-none focus:border-amber-500 transition-all",value:n.ssn,onChange:a=>r({...n,ssn:a.target.value})})]})]}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-bold text-white/80 ml-1",children:"E-post"}),d.jsx("input",{required:!0,type:"email",placeholder:"din@epost.se",className:"w-full p-4 bg-black/40 border border-white/10 rounded-xl text-white outline-none focus:border-amber-500 transition-all",value:n.email,onChange:a=>r({...n,email:a.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-bold text-white/80 ml-1",children:"Telefon"}),d.jsx("input",{required:!0,type:"tel",placeholder:"070-XXX XX XX",className:"w-full p-4 bg-black/40 border border-white/10 rounded-xl text-white outline-none focus:border-amber-500 transition-all",value:n.phone,onChange:a=>r({...n,phone:a.target.value})})]})]}),d.jsx("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5 mt-4",children:d.jsxs("label",{className:"flex items-center gap-4 cursor-pointer group",children:[d.jsxs("div",{className:"relative flex items-center",children:[d.jsx("input",{type:"checkbox",className:"peer h-6 w-6 cursor-pointer appearance-none rounded-md border border-white/20 bg-black/40 transition-all checked:border-amber-500 checked:bg-amber-500",checked:n.newsletter,onChange:a=>r({...n,newsletter:a.target.checked})}),d.jsx(xf,{size:16,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-black opacity-0 peer-checked:opacity-100 pointer-events-none",strokeWidth:3})]}),d.jsx("span",{className:"text-white/90 font-medium group-hover:text-white transition-colors",children:"Jag vill prenumerera p nyhetsbrevet"})]})}),d.jsxs("button",{type:"submit",className:"w-full py-4 bg-white/10 hover:bg-white/20 border border-white/20 text-white font-bold rounded-xl transition-all hover:scale-[1.01] active:scale-95 flex items-center justify-center gap-3 mt-4",children:["Skicka bestllning ",d.jsx(zc,{size:20})]})]})]}),t==="success"&&d.jsxs("div",{className:"text-center py-10 animate-fade-in flex flex-col items-center justify-center",children:[d.jsx("div",{className:"w-20 h-20 bg-emerald-500/20 rounded-full flex items-center justify-center mb-6 shadow-xl",children:d.jsx(xf,{size:40,className:"text-emerald-400"})}),d.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Tack fr din bestllning!"}),d.jsxs("p",{className:"text-white/70 max-w-md mx-auto mb-8",children:['Vi har mottagit din order av boken "Myndighetsinducerat trauma". En bekrftelse och faktura kommer att skickas till ',n.email,"."]}),d.jsx("button",{onClick:()=>e("info"),className:"text-white hover:text-amber-400 font-bold underline transition-colors",children:"G tillbaka"})]})]}),d.jsxs("div",{className:"text-center py-6",children:[d.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Vill du bli en del av gemenskapen?"}),d.jsx("p",{className:"text-white/60 mb-6",children:"Ladda ner appen och brja din resa tillsammans med oss."}),d.jsxs("div",{className:"flex justify-center gap-4",children:[d.jsx("button",{className:"px-6 py-2 bg-white/10 hover:bg-white/20 rounded-xl border border-white/20 font-bold transition-all hover:scale-105",children:"App Store"}),d.jsx("button",{className:"px-6 py-2 bg-white/10 hover:bg-white/20 rounded-xl border border-white/20 font-bold transition-all hover:scale-105",children:"Google Play"})]})]})]})},Kd=[{id:0,name:"Minerva Kassab",email:"minerva@klattertradet.se",age:36,role:"Samtalsterapeut",subRole:"Relationsspecialist",desc:"Erbjuder stdjande samtal och terapi med fokus p personlig utveckling och relationshantering.",image:"/assets/minerva_profil.jpg"},{id:1,name:"Mattias O Sandin",email:"mattias@klattertradet.se",age:34,role:"Gestalt- & Hypnosterapeut",subRole:"Resursfokuserad samtalsterapeut",desc:"Arbetar med undermedvetna processer och kroppslig frankring i nuet.",image:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?q=80&w=1000&auto=format&fit=crop"},{id:2,name:"Billy Ljungberg",email:"billy@klattertradet.se",age:35,role:"Traumaterapeut",subRole:"Utbildare & Handledare",desc:"Specialiserad p myndighetsinducerat trauma och komplexa livssituationer.",image:"/billy-bokning.jpeg"},{id:3,name:"Malin Widerlv",email:"malin@klattertradet.se",age:42,role:"Behandlingspedagog & Socialarbetare",subRole:"Familjeombud",desc:"Specialiserad p familjefrgor och socialt std. Stttar i komplexa livssituationer.",image:"/assets/malin-widerlov.png"}],PQ=()=>{const[t,e]=J.useState(0),[n,r]=J.useState({x:0,y:0}),[i,a]=J.useState(!1),[s,o]=J.useState(null),[c,u]=J.useState(null),[h,m]=J.useState(1),v=J.useRef(null),[x,_]=J.useState(!1),[T,w]=J.useState({name:"",email:"",phone:"",meetingForm:"Fysiskt p mottagning",reason:""}),E=O=>{if(!v.current)return;const F=v.current.getBoundingClientRect(),L=O.clientX-(F.left+F.width/2),z=O.clientY-(F.top+F.height/2);r({x:Number((z/(F.height/2)*-10).toFixed(2)),y:Number((L/(F.width/2)*10).toFixed(2))})},C=(()=>{const O=[],F=new Date;for(let L=0;L<7;L++){const z=new Date(F);if(z.setDate(F.getDate()+L),z.getDay()!==0&&(O.push({day:z.toLocaleDateString("sv-SE",{weekday:"short"}).replace(/^\w/,V=>V.toUpperCase()),num:z.getDate().toString(),full:z.toLocaleDateString("sv-SE",{day:"numeric",month:"short"})}),O.length>=5))break}return O})(),P=["07:00","08:00","09:00","10:30","13:00","14:45","16:00","17:30"],I=O=>{O.preventDefault();const F=Kd[t],L="billy@klattertradet.se";let z=F.email;F.email!==L&&(z+=`,${L}`);const V=F.name,G=s?`${s} ${new Date().toLocaleDateString("sv-SE",{month:"long",year:"numeric"})}`:"",$=`Ny bokning: ${T.name} - ${G} kl ${c}`,ee=`
NY BOKNING VIA HEMSIDAN

TERAPEUT: ${V}
DATUM: ${G}
TID: ${c}
MTESFORM: ${T.meetingForm}

KONTAKTUPPGIFTER:
Namn: ${T.name}
E-post: ${T.email}
Telefon: ${T.phone}

SYFTE / MEDDELANDE:
${T.reason||"Ingen beskrivning angiven."}

---
Detta r ett automatiskt genererat utkast frn hemsidan.
    `.trim(),te=`mailto:${z}?subject=${encodeURIComponent($)}&body=${encodeURIComponent(ee)}`;m(3),setTimeout(()=>{window.location.href=te},500)},j=O=>{O.preventDefault(),_(!0)};return d.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-10 animate-fade-in space-y-16",children:[d.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between px-4 gap-6",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-amber-500 text-[10px] font-bold uppercase tracking-[0.3em] mb-2 block",children:"Tidsbokning"}),d.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white italic tracking-tight",children:"Vlj en tid i kalendern"})]}),d.jsx("div",{className:"flex bg-white/5 p-1.5 rounded-2xl border border-white/10 backdrop-blur-xl overflow-x-auto no-scrollbar w-full md:w-auto",children:Kd.map(O=>d.jsx("button",{onClick:()=>{e(O.id),m(1),u(null),o(null)},className:`px-4 md:px-8 py-3 rounded-xl text-xs md:text-sm font-bold transition-all duration-300 whitespace-nowrap ${t===O.id?"bg-white/10 border border-white/20 text-white scale-105":"text-white/50 hover:text-white hover:bg-white/5"}`,children:O.name},O.id))})]}),d.jsxs("div",{className:"flex flex-col lg:flex-row items-start gap-12 lg:gap-20",children:[d.jsx("div",{className:"lg:w-1/2 w-full flex justify-center",children:d.jsxs("div",{ref:v,onMouseMove:E,onMouseEnter:()=>a(!0),onMouseLeave:()=>{a(!1),r({x:0,y:0})},style:{perspective:"1000px"},className:"relative cursor-pointer group",children:[d.jsxs("div",{className:"relative w-[300px] md:w-[380px] aspect-[3/4] rounded-[2.5rem] overflow-hidden shadow-2xl transition-all duration-500 ease-out border border-white/10",style:{transform:`rotateX(${n.x}deg) rotateY(${n.y}deg) scale(${i?1.05:1})`,transformStyle:"preserve-3d"},children:[d.jsxs("div",{className:"absolute inset-0 bg-slate-900",children:[d.jsx("img",{src:Kd[t].image,className:"w-full h-full object-cover object-top opacity-60 grayscale group-hover:grayscale-0 transition-all duration-1000",alt:"Therapist"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-90"})]}),d.jsxs("div",{className:"absolute inset-0 p-10 flex flex-col justify-end",style:{transform:"translateZ(60px)"},children:[d.jsxs("div",{className:"mb-4",children:[d.jsxs("span",{className:"text-amber-500 text-[10px] font-bold tracking-[0.3em] uppercase block mb-1",children:[Kd[t].age," r  ",Kd[t].subRole]}),d.jsx("h2",{className:"text-4xl font-black text-white leading-none",children:Kd[t].name})]}),d.jsxs("p",{className:"text-white/70 text-sm leading-relaxed mb-6 border-l-2 border-amber-500/50 pl-4 italic",children:['"',Kd[t].desc,'"']}),d.jsxs("div",{className:"flex items-center gap-2 text-amber-500/80 text-[11px] font-bold uppercase tracking-widest",children:[d.jsx(jc,{size:14})," Certifierad Behandlare"]})]})]}),d.jsx("div",{className:"absolute -inset-4 bg-amber-500/10 blur-3xl -z-10 rounded-full opacity-50 group-hover:opacity-100 transition-opacity"})]})}),d.jsx("div",{className:"lg:w-1/2 w-full",children:d.jsx("div",{className:"glass bg-white/5 border border-white/10 rounded-[2.5rem] p-8 md:p-12 shadow-2xl min-h-[550px] flex flex-col",children:h===1?d.jsxs("div",{className:"animate-fade-in flex-1 flex flex-col",children:[d.jsx("h3",{className:"text-3xl font-black mb-2 text-white italic",children:"Boka session"}),d.jsxs("p",{className:"text-zinc-500 text-sm mb-10",children:["Vlj ett datum och en tid fr ditt mte med ",Kd[t].name,"."]}),d.jsxs("div",{className:"space-y-10 flex-1",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-amber-500 mb-4 block",children:new Date().toLocaleDateString("sv-SE",{month:"long",year:"numeric"})}),d.jsx("div",{className:"flex gap-3 overflow-x-auto pb-4 no-scrollbar",children:C.map(O=>d.jsxs("button",{onClick:()=>{o(O.num),u(null)},className:`flex flex-col items-center min-w-[75px] py-5 rounded-2xl border transition-all ${s===O.num?"bg-amber-500 border-amber-500 text-black shadow-xl scale-105":"bg-white/5 border-white/10 text-zinc-400 hover:border-white/30"}`,children:[d.jsx("span",{className:"text-[10px] uppercase font-bold mb-1",children:O.day}),d.jsx("span",{className:"text-xl font-black",children:O.num})]},O.num))})]}),d.jsxs("div",{children:[d.jsx("label",{className:`text-[10px] font-bold uppercase tracking-widest mb-4 block transition-colors ${s?"text-amber-500":"text-zinc-700"}`,children:"Tillgngliga tider"}),d.jsx("div",{className:"grid grid-cols-3 gap-3",children:P.map(O=>d.jsx("button",{disabled:!s,onClick:()=>u(O),className:`py-4 rounded-xl text-sm font-black border transition-all ${s?c===O?"bg-white text-black border-white shadow-lg":"bg-transparent border-white/10 text-white/80 hover:bg-white/5":"bg-white/5 border-white/5 text-zinc-700 cursor-not-allowed"}`,children:O},O))})]})]}),d.jsx("div",{className:"mt-8",children:d.jsxs("button",{disabled:!c,onClick:()=>m(2),className:`w-full py-5 rounded-xl font-bold text-xl transition-all flex items-center justify-center gap-3 group border border-white/20 ${c?"bg-white/10 hover:bg-white/20 text-white shadow-xl hover:scale-105":"bg-white/5 text-white/30 border-white/5 cursor-not-allowed"}`,children:["Fortstt med bokning",d.jsx(Vi,{size:24,className:c?"group-hover:translate-x-1 transition-transform":""})]})})]}):h===2?d.jsxs("div",{className:"animate-in fade-in zoom-in-95 duration-300 flex-1",children:[d.jsxs("button",{onClick:()=>m(1),className:"text-zinc-500 hover:text-white mb-8 text-sm flex items-center gap-2 font-bold",children:[d.jsx(px,{size:18})," G tillbaka till tider"]}),d.jsx("h3",{className:"text-3xl font-black mb-2 text-white italic",children:"Ngra frgor..."}),d.jsx("p",{className:"text-zinc-500 text-sm mb-8 italic",children:"Vi behver veta lite mer om dig fr att frbereda vrt mte."}),d.jsxs("form",{className:"space-y-6",onSubmit:I,children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-bold uppercase text-amber-500 ml-1",children:"Vad heter du?"}),d.jsx("input",{type:"text",required:!0,placeholder:"Fr- och efternamn",className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-4 text-white outline-none focus:border-amber-500 transition-all",value:T.name,onChange:O=>w({...T,name:O.target.value})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-bold uppercase text-amber-500 ml-1",children:"Din e-post"}),d.jsx("input",{type:"email",required:!0,placeholder:"namn@epost.se",className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-4 text-white outline-none focus:border-amber-500 transition-all",value:T.email,onChange:O=>w({...T,email:O.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-bold uppercase text-amber-500 ml-1",children:"Telefonnummer"}),d.jsx("input",{type:"tel",required:!0,placeholder:"07x-xxx xx xx",className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-4 text-white outline-none focus:border-amber-500 transition-all",value:T.phone,onChange:O=>w({...T,phone:O.target.value})})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-bold uppercase text-amber-500 ml-1",children:"Hur vill du ses?"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:["Fysiskt p mottagning","Digitalt via Zoom"].map(O=>d.jsx("button",{type:"button",onClick:()=>w({...T,meetingForm:O}),className:`px-3 py-3 rounded-xl text-[11px] font-bold transition-all border ${T.meetingForm===O?"bg-amber-500/20 border-amber-500 text-amber-400":"bg-black/20 border-white/10 text-white/40 hover:border-white/30"}`,children:O},O))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-bold uppercase text-amber-500 ml-1",children:"Vad nskar du hjlp med? (Valfritt)"}),d.jsx("textarea",{placeholder:"Kort beskrivning av ditt rende...",rows:3,className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-4 text-white outline-none focus:border-amber-500 transition-all resize-none",value:T.reason,onChange:O=>w({...T,reason:O.target.value})})]})]}),d.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5 flex items-center gap-4",children:[d.jsx(Dl,{size:20,className:"text-amber-500"}),d.jsxs("span",{className:"text-sm font-bold text-white/90",children:["Vald tid: ",s," ",new Date().toLocaleDateString("sv-SE",{month:"short"})," kl ",c]})]}),d.jsx("button",{className:"w-full bg-white/10 hover:bg-white/20 border border-white/20 text-white py-5 rounded-xl font-bold text-xl transition-all hover:scale-[1.01] active:scale-95 mt-4",children:"Slutfr bokning"})]})]}):d.jsxs("div",{className:"text-center py-20 animate-in zoom-in-90 duration-500 flex-1 flex flex-col items-center justify-center",children:[d.jsx("div",{className:"w-24 h-24 bg-emerald-500/20 text-emerald-400 rounded-full flex items-center justify-center mb-8 shadow-2xl",children:d.jsx(mx,{size:48})}),d.jsx("h3",{className:"text-3xl md:text-4xl font-black mb-4 text-white italic",children:"Vlkommen till vr bokningspanel"}),d.jsxs("p",{className:"text-zinc-300 text-lg mb-6 max-w-sm mx-auto leading-relaxed",children:["Tack ",T.name.split(" ")[0],"! Vad bra att du hrde av dig till oss och vi terkommer till dig snarast efter att vi mottagit mailet!"]}),d.jsx("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 mb-8 text-xs text-zinc-500 max-w-xs italic",children:'Notera: Ditt e-postprogram har ppnats. Vnligen klicka p "Skicka" fr att slutfra bokningen.'}),d.jsx("button",{onClick:()=>{m(1),o(null),u(null),w({name:"",email:"",phone:"",meetingForm:"Fysiskt p mottagning",reason:""})},className:"text-white hover:text-amber-400 font-bold hover:underline tracking-widest text-sm uppercase",children:"Gr en ny bokning"})]})})})]}),d.jsxs("div",{className:"grid lg:grid-cols-5 gap-10",children:[d.jsx("div",{className:"lg:col-span-2 space-y-6",children:d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-10 space-y-10",children:[d.jsx("h2",{className:"text-3xl font-black text-white italic",children:"Kontakt"}),d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"flex items-start gap-5",children:[d.jsx("div",{className:"p-4 bg-white/5 border border-white/10 rounded-2xl text-amber-500 shrink-0",children:d.jsx(dE,{size:24})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] text-zinc-500 uppercase tracking-widest mb-1 font-bold",children:"Mottagning"}),d.jsx("p",{className:"text-white font-medium text-lg",children:"Gullregnsgatan 9A, Gvle"})]})]}),d.jsxs("div",{className:"flex items-start gap-5",children:[d.jsx("div",{className:"p-4 bg-white/5 border border-white/10 rounded-2xl text-amber-500 shrink-0",children:d.jsx(wv,{size:24})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-[10px] text-zinc-500 uppercase tracking-widest mb-1 font-bold",children:"E-post"}),d.jsx("p",{className:"text-white font-medium text-lg",children:"billy@klattertradet.se"})]})]})]})]})}),d.jsx("div",{className:"lg:col-span-3",children:x?d.jsxs("div",{className:"glass bg-white/5 border border-white/10 p-12 rounded-[40px] text-center flex flex-col items-center justify-center min-h-[400px]",children:[d.jsx(mx,{size:64,className:"text-emerald-500 mb-6"}),d.jsx("h2",{className:"text-3xl font-black text-white mb-4 italic",children:"Tack!"}),d.jsx("p",{className:"text-zinc-400",children:"Vi terkommer till dig s snart vi kan."})]}):d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-10 md:p-12",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-10",children:[d.jsx("div",{className:"w-12 h-12 bg-amber-500/10 rounded-xl flex items-center justify-center",children:d.jsx(pY,{className:"text-amber-500",size:28})}),d.jsx("h2",{className:"text-3xl font-black text-white italic",children:"vriga frgor"})]}),d.jsxs("form",{onSubmit:j,className:"space-y-8",children:[d.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[d.jsx("input",{required:!0,placeholder:"Ditt namn",type:"text",className:"w-full p-4 bg-black/40 border border-white/10 rounded-2xl text-white outline-none focus:border-amber-500 transition-all"}),d.jsx("input",{required:!0,placeholder:"Din e-post",type:"email",className:"w-full p-4 bg-black/40 border border-white/10 rounded-2xl text-white outline-none focus:border-amber-500 transition-all"})]}),d.jsx("textarea",{rows:5,placeholder:"Ditt meddelande...",className:"w-full p-4 bg-black/40 border border-white/10 rounded-2xl text-white outline-none focus:border-amber-500 transition-all resize-none"}),d.jsxs("button",{type:"submit",className:"w-full py-6 bg-white/10 hover:bg-white/20 border border-white/20 text-white font-bold rounded-xl shadow-xl transition-all hover:scale-[1.01] active:scale-95 flex items-center justify-center gap-3 text-lg",children:["Skicka meddelande ",d.jsx(zc,{size:20})]})]})]})})]}),d.jsx(AO,{})]})},OQ=[{id:1,category:{sv:"vergivenhet",en:"Abandonment",ar:"",fi:"Hylkminen",es:"Abandono",de:"Verlassenheit"},categoryCode:"O",text:{sv:"Hur knner du dig nr en nra relation tar slut eller nr du r separerad frn ngon viktig?",en:"How do you feel when a close relationship ends or when you are separated from someone important?",ar:"            ",fi:"Milt sinusta tuntuu, kun lheinen suhde pttyy tai olet erossa jostakusta trkest?",es:"Cmo te sientes cuando una relacin cercana termina o cuando ests separado de alguien importante?",de:"Wie fhlen Sie sich, wenn eine enge Beziehung endet oder wenn Sie von jemand Wichtigem getrennt sind?"},options:{sv:["Jag knner mig trygg och kan hantera det bra.","Jag knner viss oro och har svrt fr ensamhet.","Jag knner djup rdsla och panik fr att bli lmnad."],en:["I feel secure and can handle it well.","I feel some anxiety and have difficulty with loneliness.","I feel deep fear and panic about being abandoned."],ar:["       .","       .","      ."],fi:["Tunnen oloni turvalliseksi ja pystyn ksittelemn sen hyvin.","Tunnen jonkin verran ahdistusta ja minun on vaikea olla yksin.","Tunnen syv pelkoa ja paniikkia hyltyksi tulemisesta."],es:["Me siento seguro y puedo manejarlo bien.","Siento algo de ansiedad y tengo dificultades con la soledad.","Siento un profundo miedo y pnico a ser abandonado."],de:["Ich fhle mich sicher und kann gut damit umgehen.","Ich fhle eine gewisse Angst und habe Schwierigkeiten mit der Einsamkeit.","Ich empfinde tiefe Angst und Panik davor, verlassen zu werden."]}},{id:2,category:{sv:"vergivenhet",en:"Abandonment",ar:"",fi:"Hylkminen",es:"Abandono",de:"Verlassenheit"},categoryCode:"O",text:{sv:"Hur upplever du att vara ensam med dig sjlv?",en:"How do you experience being alone with yourself?",ar:"     ",fi:"Miten koet yksin olemisen itsesi kanssa?",es:"Cmo experimentas estar a solas contigo mismo?",de:"Wie erleben Sie es, mit sich allein zu sein?"},options:{sv:["Jag r bekvm med att vara ensam.","Jag har svrt att vara ensam under lngre perioder.","Jag har en intensiv rdsla fr ensamhet."],en:["I am comfortable being alone.","I find it difficult to be alone for long periods.","I have an intense fear of loneliness."],ar:["   .","      .","    ."],fi:["Olen sinut yksin olemisen kanssa.","Minun on vaikea olla yksin pitki aikoja.","Minulla on voimakas yksinisyyden pelko."],es:["Me siento cmodo estando solo.","Me resulta difcil estar solo por largos perodos.","Tengo un miedo intenso a la soledad."],de:["Ich bin gerne allein.","Es fllt mir schwer, ber lngere Zeitrume allein zu sein.","Ich habe eine intensive Angst vor der Einsamkeit."]}},{id:3,category:{sv:"vergivenhet",en:"Abandonment",ar:"",fi:"Hylkminen",es:"Abandono",de:"Verlassenheit"},categoryCode:"O",text:{sv:"Hur mycket bekrftelse behver du frn andra i dina relationer?",en:"How much validation do you need from others in your relationships?",ar:"        ",fi:"Kuinka paljon vahvistusta tarvitset muilta suhteissasi?",es:"Cunta validacin necesitas de los dems en tus relaciones?",de:"Wie viel Besttigung bentigen Sie von anderen in Ihren Beziehungen?"},options:{sv:["Jag knner mig trygg och behver inte stndig bekrftelse.","Jag sker ibland bekrftelse fr att knna mig trygg.","Mitt liv domineras av ett konstant behov av bekrftelse."],en:["I feel secure and do not need constant validation.","I sometimes seek validation to feel secure.","My life is dominated by a constant need for validation."],ar:["      .","     .","     ."],fi:["Tunnen oloni turvalliseksi enk tarvitse jatkuvaa vahvistusta.","Etsin joskus vahvistusta tunteakseni oloni turvalliseksi.","Elmni hallitsee jatkuva vahvistuksen tarve."],es:["Me siento seguro y no necesito validacin constante.","A veces busco validacin para sentirme seguro.","Mi vida est dominada por una necesidad constante de validacin."],de:["Ich fhle mich sicher und brauche keine stndige Besttigung.","Ich suche manchmal nach Besttigung, um mich sicher zu fhlen.","Mein Leben wird von einem stndigen Bedrfnis nach Besttigung dominiert."]}},{id:4,category:{sv:"Avvisad",en:"Rejection",ar:"",fi:"Hylkminen",es:"Rechazo",de:"Ablehnung"},categoryCode:"A",text:{sv:"Hur ofta knner du att du verkligen hr till i sociala sammanhang?",en:"How often do you feel you truly belong in social contexts?",ar:"        ",fi:"Kuinka usein tunnet todella kuuluvasi sosiaalisiin tilanteisiin?",es:"Con qu frecuencia sientes que realmente perteneces a contextos sociales?",de:"Wie oft haben Sie das Gefhl, in sozialen Kontexten wirklich dazuzugehren?"},options:{sv:["Nstan alltid.","Ibland knner jag mig ifrgasatt eller utanfr.","Jag har en stndig knsla av att jag inte hr till."],en:["Almost always.","Sometimes I feel questioned or left out.","I have a constant feeling that I don't belong."],ar:[" .","    .","     ."],fi:["Melkein aina.","Joskus tunnen itseni kyseenalaistetuksi tai ulkopuoliseksi.","Minulla on jatkuva tunne, etten kuulu joukkoon."],es:["Casi siempre.","A veces me siento cuestionado o excluido.","Tengo una sensacin constante de que no pertenezco."],de:["Fast immer.","Manchmal fhle ich mich in Frage gestellt oder ausgeschlossen.","Ich habe stndig das Gefhl, nicht dazuzugehren."]}},{id:5,category:{sv:"Avvisad",en:"Rejection",ar:"",fi:"Hylkminen",es:"Rechazo",de:"Ablehnung"},categoryCode:"A",text:{sv:"Hur upplever du din roll i en grupp eller ett sammanhang?",en:"How do you perceive your role in a group or context?",ar:"      ",fi:"Miten koet roolisi ryhmss tai kontekstissa?",es:"Cmo percibes tu papel en un grupo o contexto?",de:"Wie nehmen Sie Ihre Rolle in einer Gruppe oder einem Kontext wahr?"},options:{sv:["Jag knner mig som en vlkommen och uppskattad deltagare.","Jag r ibland orolig fr att jag inte r nskad dr jag r.","Jag har en stark, stndig knsla av att jag inte r nskad."],en:["I feel like a welcome and appreciated participant.","I sometimes worry that I am not wanted where I am.","I have a strong, constant feeling of not being wanted."],ar:["     .","        .","       ."],fi:["Tunnen olevani tervetullut ja arvostettu osallistuja.","Olen joskus huolissani siit, etten ole toivottu siell, miss olen.","Minulla on vahva, jatkuva tunne, etten ole toivottu."],es:["Me siento como un participante bienvenido y apreciado.","A veces me preocupa no ser deseado donde estoy.","Tengo un sentimiento fuerte y constante de no ser deseado."],de:["Ich fhle mich als willkommener und geschtzter Teilnehmer.","Ich mache mir manchmal Sorgen, dass ich dort, wo ich bin, nicht erwnscht bin.","Ich habe ein starkes, stndiges Gefhl, nicht gewollt zu sein."]}},{id:6,category:{sv:"Avvisad",en:"Rejection",ar:"",fi:"Hylkminen",es:"Rechazo",de:"Ablehnung"},categoryCode:"A",text:{sv:"Hur mycket oroar du dig fr att bli dmd eller bortvald av andra?",en:"How much do you worry about being judged or rejected by others?",ar:"         ",fi:"Kuinka paljon murehdit muiden tuomitsemaksi tai hylkmksi tulemista?",es:"Cunto te preocupa ser juzgado o rechazado por los dems?",de:"Wie sehr machen Sie sich Sorgen, von anderen beurteilt oder abgelehnt zu werden?"},options:{sv:["Jag har lg social oskerhet och oroar mig sllan.","Jag r ibland orolig fr vad andra ska tycka om mig.","Rdslan att bli avvisad styr mycket av hur jag agerar."],en:["I have low social anxiety and rarely worry.","I am sometimes worried about what others will think of me.","The fear of rejection heavily influences how I act."],ar:["      .","       .","       ."],fi:["Minulla on vhn sosiaalista ahdistusta ja huolehdin harvoin.","Olen joskus huolissani siit, mit muut ajattelevat minusta.","Hylkmisen pelko vaikuttaa voimakkaasti toimintaani."],es:["Tengo poca ansiedad social y rara vez me preocupo.","A veces me preocupa lo que los dems pensarn de m.","El miedo al rechazo influye mucho en cmo acto."],de:["Ich habe geringe soziale ngste und mache mir selten Sorgen.","Ich mache mir manchmal Sorgen darber, was andere ber mich denken werden.","Die Angst vor Ablehnung beeinflusst stark, wie ich handle."]}},{id:7,category:{sv:"Frdmjukad",en:"Humiliation",ar:"",fi:"Nyryytys",es:"Humillacin",de:"Demtigung"},categoryCode:"F",text:{sv:"Hur skulle du beskriva din sjlvbild?",en:"How would you describe your self-image?",ar:"   ",fi:"Miten kuvailisit minkuvaasi?",es:"Cmo describiras tu autoimagen?",de:"Wie wrden Sie Ihr Selbstbild beschreiben?"},options:{sv:["Min sjlvbild r stabil och positiv.","Jag knner mig ibland liten och osker infr andra.","Jag plgas av starka skamknslor och sjlvkritik."],en:["My self-image is stable and positive.","I sometimes feel small and insecure in front of others.","I am plagued by strong feelings of shame and self-criticism."],ar:["   .","      .","      ."],fi:["Minkuvani on vakaa ja positiivinen.","Tunnen itseni joskus pieneksi ja epvarmaksi muiden edess.","Minua vaivaavat voimakkaat hpen ja itsekritiikin tunteet."],es:["Mi autoimagen es estable y positiva.","A veces me siento pequeo e inseguro frente a los dems.","Me atormentan fuertes sentimientos de vergenza y autocrtica."],de:["Mein Selbstbild ist stabil und positiv.","Ich fhle mich manchmal klein und unsicher vor anderen.","Ich werde von starken Schamgefhlen und Selbstkritik geplagt."]}},{id:8,category:{sv:"Frdmjukad",en:"Humiliation",ar:"",fi:"Nyryytys",es:"Humillacin",de:"Demtigung"},categoryCode:"F",text:{sv:"Hur reagerar du p misstag eller misslyckanden?",en:"How do you react to mistakes or failures?",ar:"     ",fi:"Miten reagoit virheisiin tai eponnistumisiin?",es:"Cmo reaccionas ante los errores o fracasos?",de:"Wie reagieren Sie auf Fehler oder Misserfolge?"},options:{sv:["Jag ser dem som tillfllen att lra och utvecklas.","Jag kan knna mig osker och sjlvkritisk.","Jag blir vervldigad av skam och rdsla fr att bli avsljad."],en:["I see them as opportunities to learn and grow.","I can feel insecure and self-critical.","I get overwhelmed by shame and fear of being exposed."],ar:["   .","      .","      ."],fi:["Nen ne mahdollisuuksina oppia ja kasvaa.","Voin tuntea itseni epvarmaksi ja itsekriittiseksi.","Hpe ja paljastumisen pelko valtaavat minut."],es:["Los veo como oportunidades para aprender y crecer.","Puedo sentirme inseguro y autocrtico.","Me siento abrumado por la vergenza y el miedo a ser expuesto."],de:["Ich sehe sie als Gelegenheiten zum Lernen und Wachsen.","Ich kann mich unsicher und selbstkritisch fhlen.","Ich werde von Scham und Angst, aufgedeckt zu werden, berwltigt."]}},{id:9,category:{sv:"Frdmjukad",en:"Humiliation",ar:"",fi:"Nyryytys",es:"Humillacin",de:"Demtigung"},categoryCode:"F",text:{sv:"Hur mycket oroar du dig fr att bli bortgjord eller frnedrad infr andra?",en:"How much do you worry about being embarrassed or humiliated in front of others?",ar:"         ",fi:"Kuinka paljon murehdit nolatuksi tai nyryytetyksi tulemisesta muiden edess?",es:"Cunto te preocupa sentirte avergonzado o humillado frente a los dems?",de:"Wie sehr machen Sie sich Sorgen, vor anderen blamiert oder gedemtigt zu werden?"},options:{sv:["Det r inget jag oroar mig fr ofta.","Jag r ibland orolig fr vad andra tnker om mig.","Rdslan fr frdmjukelse pverkar starkt mina beslut."],en:["It's not something I worry about often.","I sometimes worry about what others think of me.","The fear of humiliation strongly influences my decisions."],ar:["     .","      .","      ."],fi:["Se ei ole asia, josta huolehdin usein.","Olen joskus huolissani siit, mit muut ajattelevat minusta.","Nyryytyksen pelko vaikuttaa voimakkaasti ptksiini."],es:["No es algo que me preocupe a menudo.","A veces me preocupa lo que los dems piensan de m.","El miedo a la humillacin influye fuertemente en mis decisiones."],de:["Darber mache ich mir nicht oft Sorgen.","Ich mache mir manchmal Sorgen darber, was andere ber mich denken.","Die Angst vor Demtigung beeinflusst meine Entscheidungen stark."]}},{id:10,category:{sv:"Sviken",en:"Betrayal",ar:"",fi:"Petos",es:"Traicin",de:"Verrat"},categoryCode:"S",text:{sv:"Hur ltt har du att lita p nya mnniskor i ditt liv?",en:"How easily do you trust new people in your life?",ar:"        ",fi:"Kuinka helposti luotat uusiin ihmisiin elmsssi?",es:"Con qu facilidad confas en gente nueva en tu vida?",de:"Wie leicht vertrauen Sie neuen Menschen in Ihrem Leben?"},options:{sv:["Jag har ltt att lita p andra.","Jag kan vara vaksam i nra relationer och r frsiktig.","Jag har en grundlggande misstro mot andra."],en:["I find it easy to trust others.","I can be vigilant in close relationships and am cautious.","I have a fundamental mistrust of others."],ar:["     .","       .","    ."],fi:["Minun on helppo luottaa toisiin.","Voin olla valpas lheisiss suhteissa ja olen varovainen.","Minulla on perustavanlaatuinen epluottamus toisia kohtaan."],es:["Me resulta fcil confiar en los dems.","Puedo ser vigilante en las relaciones cercanas y soy cauteloso.","Tengo una desconfianza fundamental hacia los dems."],de:["Es fllt mir leicht, anderen zu vertrauen.","Ich kann in engen Beziehungen wachsam und vorsichtig sein.","Ich habe ein grundlegendes Misstrauen gegenber anderen."]}},{id:11,category:{sv:"Sviken",en:"Betrayal",ar:"",fi:"Petos",es:"Traicin",de:"Verrat"},categoryCode:"S",text:{sv:"Hur knner du infr att slppa kontrollen i en relation eller situation?",en:"How do you feel about letting go of control in a relationship or situation?",ar:"         ",fi:"Milt sinusta tuntuu pst irti kontrollista suhteessa tai tilanteessa?",es:"Cmo te sientes al soltar el control en una relacin o situacin?",de:"Wie fhlen Sie sich dabei, die Kontrolle in einer Beziehung oder Situation loszulassen?"},options:{sv:["Jag knner mig bekvm med att lita p andra jag har frtroende fr.","Jag kan vara vaksam och knna behov av att vara p min vakt.","Jag har mycket svrt att slppa kontrollen."],en:["I feel comfortable trusting others I have confidence in.","I can be vigilant and feel the need to be on my guard.","I have great difficulty letting go of control."],ar:["       .","        .","      ."],fi:["Tunnen oloni mukavaksi luottaessani ihmisiin, joihin luotan.","Voin olla valpas ja tuntea tarvetta olla varuillani.","Minun on erittin vaikea pst irti kontrollista."],es:["Me siento cmodo confiando en las personas en las que confo.","Puedo ser vigilante y sentir la necesidad de estar en guardia.","Tengo una gran dificultad para soltar el control."],de:["Ich fhle mich wohl dabei, anderen zu vertrauen, denen ich vertraue.","Ich kann wachsam sein und das Bedrfnis verspren, auf der Hut zu sein.","Es fllt mir sehr schwer, die Kontrolle loszulassen."]}},{id:12,category:{sv:"Sviken",en:"Betrayal",ar:"",fi:"Petos",es:"Traicin",de:"Verrat"},categoryCode:"S",text:{sv:"Hur ofta knner du att mnniskor sviker dig eller gr dig besviken?",en:"How often do you feel that people betray or disappoint you?",ar:"        ",fi:"Kuinka usein tunnet, ett ihmiset pettvt tai tuottavat sinulle pettymyksen?",es:"Con qu frecuencia sientes que la gente te traiciona o te decepciona?",de:"Wie oft haben Sie das Gefhl, dass Menschen Sie verraten oder enttuschen?"},options:{sv:["Sllan eller aldrig.","Ibland knner jag mig sviken, srskilt i nra relationer.","Jag har en stndig knsla av att jag kommer att bli sviken."],en:["Rarely or never.","I sometimes feel let down, especially in close relationships.","I have a constant feeling that I will be betrayed."],ar:["  .","        .","     ."],fi:["Harvoin tai ei koskaan.","Joskus tunnen itseni petetyksi, etenkin lheisiss suhteissa.","Minulla on jatkuva tunne, ett minut petetn."],es:["Rara vez o nunca.","A veces me siento decepcionado, especialmente en relaciones cercanas.","Tengo un sentimiento constante de que ser traicionado."],de:["Selten oder nie.","Manchmal fhle ich mich im Stich gelassen, besonders in engen Beziehungen.","Ich habe stndig das Gefhl, dass ich betrogen werde."]}},{id:13,category:{sv:"Orttvisa",en:"Injustice",ar:"",fi:"Epoikeudenmukaisuus",es:"Injusticia",de:"Ungerechtigkeit"},categoryCode:"R",text:{sv:"Hur reagerar du p situationer som du uppfattar som orttvisa?",en:"How do you react to situations you perceive as unfair?",ar:"       ",fi:"Miten reagoit tilanteisiin, jotka koet epoikeudenmukaisiksi?",es:"Cmo reaccionas ante situaciones que percibes como injustas?",de:"Wie reagieren Sie auf Situationen, die Sie als unfair empfinden?"},options:{sv:["Jag kan acceptera att livet inte alltid r rttvist.","Jag kan reagera starkt och knna mig frustrerad.","Jag knner intensiv vrede och en stark knsla av maktlshet."],en:["I can accept that life is not always fair.","I can react strongly and feel frustrated.","I feel intense anger and a strong sense of powerlessness."],ar:["       .","     .","     ."],fi:["Voin hyvksy, ett elm ei ole aina reilua.","Voin reagoida voimakkaasti ja tuntea turhautumista.","Tunnen voimakasta vihaa ja suurta voimattomuuden tunnetta."],es:["Puedo aceptar que la vida no siempre es justa.","Puedo reaccionar fuertemente y sentirme frustrado.","Siento una ira intensa y un fuerte sentimiento de impotencia."],de:["Ich kann akzeptieren, dass das Leben nicht immer fair ist.","Ich kann stark reagieren und mich frustriert fhlen.","Ich empfinde intensive Wut und ein starkes Gefhl der Ohnmacht."]}},{id:14,category:{sv:"Orttvisa",en:"Injustice",ar:"",fi:"Epoikeudenmukaisuus",es:"Injusticia",de:"Ungerechtigkeit"},categoryCode:"R",text:{sv:"Hur ofta knner du att du har blivit orttvist behandlad?",en:"How often do you feel you have been treated unfairly?",ar:"       ",fi:"Kuinka usein sinusta tuntuu, ett sinua on kohdeltu epoikeudenmukaisesti?",es:"Con qu frecuencia sientes que has sido tratado injustamente?",de:"Wie oft haben Sie das Gefhl, ungerecht behandelt worden zu sein?"},options:{sv:["Sllan eller aldrig.","Ibland knner jag att jag har blivit orttvist behandlad.","Knslan av orttvisa konsumerar mig ofta."],en:["Rarely or never.","I sometimes feel I have been treated unfairly.","The feeling of injustice often consumes me."],ar:["  .","      .","    ."],fi:["Harvoin tai ei koskaan.","Joskus tunnen, ett minua on kohdeltu epoikeudenmukaisesti.","Epoikeudenmukaisuuden tunne kuluttaa minut usein."],es:["Rara vez o nunca.","A veces siento que he sido tratado injustamente.","El sentimiento de injusticia a menudo me consume."],de:["Selten oder nie.","Manchmal habe ich das Gefhl, ungerecht behandelt worden zu sein.","Das Gefhl der Ungerechtigkeit verzehrt mich oft."]}},{id:15,category:{sv:"Orttvisa",en:"Injustice",ar:"",fi:"Epoikeudenmukaisuus",es:"Injusticia",de:"Ungerechtigkeit"},categoryCode:"R",text:{sv:"Vad r din allmnna instllning till rttvisa?",en:"What is your general attitude towards justice?",ar:"     ",fi:"Mik on yleinen asenteesi oikeudenmukaisuuteen?",es:"Cul es tu actitud general hacia la justicia?",de:"Was ist Ihre allgemeine Einstellung zur Gerechtigkeit?"},options:{sv:["Jag uppskattar rttvisa men kan acceptera brister.","Jag r passionerad om rttvisa och blir upprrd nr den saknas.","Jag har ett starkt rttvisepatos som ofta leder till vrede nr jag bevittnar orttvisor."],en:["I appreciate justice but can accept imperfections.","I am passionate about justice and get upset when it is lacking.","I have a strong sense of justice that often leads to anger when I witness injustices."],ar:["     .","      .","           ."],fi:["Arvostan oikeudenmukaisuutta, mutta voin hyvksy puutteet.","Olen intohimoinen oikeudenmukaisuudesta ja suutun, kun sit puuttuu.","Minulla on vahva oikeudentunto, joka usein johtaa vihaan, kun todistan epoikeudenmukaisuuksia."],es:["Aprecio la justicia pero puedo aceptar imperfecciones.","Me apasiona la justicia y me molesto cuando falta.","Tengo un fuerte sentido de la justicia que a menudo me lleva a la ira cuando presencio injusticias."],de:["Ich schtze Gerechtigkeit, kann aber Unvollkommenheiten akzeptieren.","Ich bin leidenschaftlich fr Gerechtigkeit und werde wtend, wenn sie fehlt.","Ich habe einen starken Gerechtigkeitssinn, der oft zu Wut fhrt, wenn ich Ungerechtigkeiten sehe."]}},{id:16,category:{sv:"Ensamhet",en:"Loneliness",ar:"",fi:"Yksinisyys",es:"Soledad",de:"Einsamkeit"},categoryCode:"E",text:{sv:"Hur ser du p att tillbringa tid ensam, utan sllskap?",en:"How do you view spending time alone, without company?",ar:"        ",fi:"Miten suhtaudut yksin vietettyyn aikaan, ilman seuraa?",es:"Cmo ves pasar tiempo a solas, sin compaa?",de:"Wie sehen Sie es, Zeit allein zu verbringen, ohne Gesellschaft?"},options:{sv:["Jag knner mig bekvm och lugn med att vara ensam.","Jag kan hantera ensamhet, men fredrar ofta att ha sllskap.","Jag knner en djup obehagsknsla och ngest nr jag r ensam."],en:["I feel comfortable and calm being alone.","I can handle loneliness, but often prefer company.","I feel a deep sense of discomfort and anxiety when I am alone."],ar:["     .","         .","        ."],fi:["Tunnen oloni mukavaksi ja rauhalliseksi ollessani yksin.","Prjn yksinisyyden kanssa, mutta pidn usein seurasta.","Tunnen syv epmukavuutta ja ahdistusta ollessani yksin."],es:["Me siento cmodo y tranquilo estando solo.","Puedo manejar la soledad, pero a menudo prefiero la compaa.","Siento una profunda sensacin de incomodidad y ansiedad cuando estoy solo."],de:["Ich fhle mich wohl und ruhig, wenn ich allein bin.","Ich kann mit Einsamkeit umgehen, bevorzuge aber oft Gesellschaft.","Ich empfinde ein tiefes Gefhl des Unbehagens und der Angst, wenn ich allein bin."]}},{id:17,category:{sv:"Ensamhet",en:"Loneliness",ar:"",fi:"Yksinisyys",es:"Soledad",de:"Einsamkeit"},categoryCode:"E",text:{sv:"Hur mycket knner du att du behver andras nrvaro fr att knna dig hel och trygg?",en:"How much do you feel you need others' presence to feel whole and secure?",ar:"           ",fi:"Kuinka paljon tunnet tarvitsevasi muiden lsnoloa tunteaksesi itsesi kokonaiseksi ja turvalliseksi?",es:"Cunto sientes que necesitas la presencia de otros para sentirte completo y seguro?",de:"Wie sehr haben Sie das Gefhl, die Anwesenheit anderer zu brauchen, um sich ganz und sicher zu fhlen?"},options:{sv:["Jag knner mig trygg och hel i mig sjlv, oavsett andras nrvaro.","Jag kan knna en viss oro och att jag behver andras nrvaro fr att knna mig trygg.","Jag knner mig tom och plgsamt ensam nr jag inte har ngon annans nrvaro."],en:["I feel secure and whole in myself, regardless of others' presence.","I can feel some anxiety and need others' presence to feel secure.","I feel empty and painfully lonely when I don't have someone else's presence."],ar:["          .","          .","          ."],fi:["Tunnen oloni turvalliseksi ja kokonaiseksi itsessni, riippumatta muiden lsnolosta.","Voin tuntea jonkin verran ahdistusta ja tarvita muiden lsnoloa tunteakseni oloni turvalliseksi.","Tunnen itseni tyhjksi ja tuskallisen yksiniseksi, kun minulla ei ole jonkun toisen lsnoloa."],es:["Me siento seguro y completo en m mismo, independientemente de la presencia de otros.","Puedo sentir algo de ansiedad y necesitar la presencia de otros para sentirme seguro.","Me siento vaco y dolorosamente solo cuando no tengo la presencia de otra persona."],de:["Ich fhle mich in mir selbst sicher und ganz, unabhngig von der Anwesenheit anderer.","Ich kann eine gewisse Angst verspren und die Anwesenheit anderer brauchen, um mich sicher zu fhlen.","Ich fhle mich leer und schmerzlich einsam, wenn ich nicht die Anwesenheit eines anderen habe."]}},{id:18,category:{sv:"Ensamhet",en:"Loneliness",ar:"",fi:"Yksinisyys",es:"Soledad",de:"Einsamkeit"},categoryCode:"E",text:{sv:"Hur ofta upplever du en knsla av djup ensamhet, ven nr du r omgiven av andra?",en:"How often do you experience a feeling of deep loneliness, even when surrounded by others?",ar:"           ",fi:"Kuinka usein koet syvn yksinisyyden tunteen, vaikka olisit muiden ymprimn?",es:"Con qu frecuencia experimentas un sentimiento de profunda soledad, incluso cuando ests rodeado de otros?",de:"Wie oft empfinden Sie ein Gefhl tiefer Einsamkeit, selbst wenn Sie von anderen umgeben sind?"},options:{sv:["Sllan eller aldrig.","Ibland kan jag knna mig ensam, trots att jag r med andra.","Jag har en stndig knsla av ensamhet som r svr att fylla."],en:["Rarely or never.","I can sometimes feel lonely, even when I'm with others.","I have a constant feeling of loneliness that is hard to fill."],ar:["  .","          .","     ."],fi:["Harvoin tai ei koskaan.","Voin joskus tuntea itseni yksiniseksi, vaikka olisinkin muiden kanssa.","Minulla on jatkuva yksinisyyden tunne, jota on vaikea tytt."],es:["Rara vez o nunca.","A veces puedo sentirme solo, incluso cuando estoy con otros.","Tengo un sentimiento constante de soledad que es difcil de llenar."],de:["Selten oder nie.","Manchmal kann ich mich einsam fhlen, auch wenn ich mit anderen zusammen bin.","Ich habe ein stndiges Gefhl der Einsamkeit, das schwer zu fllen ist."]}}],vG=t=>OQ.map(e=>({id:e.id,category:e.category[t]||e.category.sv,categoryCode:e.categoryCode,text:e.text[t]||e.text.sv,options:e.options[t]||e.options.sv})),jQ=J.forwardRef(({question:t,questionIndex:e,selectedAnswer:n,onAnswerSelect:r},i)=>{const a=`${100+e*75}ms`;return d.jsx("div",{ref:i,className:"bg-white/40 dark:bg-brand-dark-surface/40 backdrop-blur-2xl p-6 rounded-3xl shadow-2xl border border-white/50 dark:border-white/20 transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 opacity-0",style:{animation:`slideInUp 0.5s ease-out ${a} forwards`},children:d.jsxs("div",{className:"flex items-start space-x-4",children:[d.jsxs("span",{className:"flex-shrink-0 text-2xl font-bold text-brand-primary dark:text-brand-accent",children:[t.id,"."]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-brand-text dark:text-brand-dark-text mb-4",children:t.text}),d.jsx("div",{className:"space-y-3",children:t.options.map((s,o)=>{const c=n===o;return d.jsxs("label",{className:`flex items-center p-3 rounded-lg border-2 cursor-pointer transition-all duration-200 ease-in-out transform active:scale-[0.98] focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-brand-secondary dark:focus-within:ring-offset-brand-dark-surface ${c?"bg-brand-secondary/90 border-brand-primary text-white font-bold shadow-inner scale-[1.02]":"bg-white/40 dark:bg-brand-dark-surface/40 border-white/50 dark:border-white/20 text-brand-text dark:text-brand-dark-text hover:border-brand-secondary hover:bg-white/60 dark:hover:bg-brand-dark-surface/60 hover:scale-[1.02]"}`,children:[d.jsx("input",{type:"radio",name:`question-${t.id}`,value:o,checked:c,onChange:()=>r(e,o),className:"hidden"}),d.jsx("span",{className:"ml-2",children:s})]},o)})})]})]})})});function yG(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=yG(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function En(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=yG(t))&&(r&&(r+=" "),r+=e);return r}var Kk,hL;function qs(){if(hL)return Kk;hL=1;var t=Array.isArray;return Kk=t,Kk}var Xk,pL;function xG(){if(pL)return Xk;pL=1;var t=typeof Cw=="object"&&Cw&&Cw.Object===Object&&Cw;return Xk=t,Xk}var Yk,mL;function Fc(){if(mL)return Yk;mL=1;var t=xG(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return Yk=n,Yk}var Jk,gL;function Mb(){if(gL)return Jk;gL=1;var t=Fc(),e=t.Symbol;return Jk=e,Jk}var Zk,vL;function DQ(){if(vL)return Zk;vL=1;var t=Mb(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function a(s){var o=n.call(s,i),c=s[i];try{s[i]=void 0;var u=!0}catch{}var h=r.call(s);return u&&(o?s[i]=c:delete s[i]),h}return Zk=a,Zk}var Qk,yL;function LQ(){if(yL)return Qk;yL=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return Qk=n,Qk}var eM,xL;function Qu(){if(xL)return eM;xL=1;var t=Mb(),e=DQ(),n=LQ(),r="[object Null]",i="[object Undefined]",a=t?t.toStringTag:void 0;function s(o){return o==null?o===void 0?i:r:a&&a in Object(o)?e(o):n(o)}return eM=s,eM}var tM,bL;function ed(){if(bL)return tM;bL=1;function t(e){return e!=null&&typeof e=="object"}return tM=t,tM}var nM,_L;function Sv(){if(_L)return nM;_L=1;var t=Qu(),e=ed(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return nM=r,nM}var rM,wL;function MO(){if(wL)return rM;wL=1;var t=qs(),e=Sv(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){if(t(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||e(a)?!0:r.test(a)||!n.test(a)||s!=null&&a in Object(s)}return rM=i,rM}var iM,SL;function Tf(){if(SL)return iM;SL=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return iM=t,iM}var aM,TL;function NO(){if(TL)return aM;TL=1;var t=Qu(),e=Tf(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!e(o))return!1;var c=t(o);return c==r||c==i||c==n||c==a}return aM=s,aM}var sM,EL;function UQ(){if(EL)return sM;EL=1;var t=Fc(),e=t["__core-js_shared__"];return sM=e,sM}var oM,AL;function zQ(){if(AL)return oM;AL=1;var t=UQ(),e=(function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!e&&e in r}return oM=n,oM}var lM,kL;function bG(){if(kL)return lM;kL=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return lM=n,lM}var cM,ML;function BQ(){if(ML)return cM;ML=1;var t=NO(),e=zQ(),n=Tf(),r=bG(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,c=s.toString,u=o.hasOwnProperty,h=RegExp("^"+c.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(v){if(!n(v)||e(v))return!1;var x=t(v)?h:a;return x.test(r(v))}return cM=m,cM}var uM,NL;function FQ(){if(NL)return uM;NL=1;function t(e,n){return e?.[n]}return uM=t,uM}var dM,CL;function _p(){if(CL)return dM;CL=1;var t=BQ(),e=FQ();function n(r,i){var a=e(r,i);return t(a)?a:void 0}return dM=n,dM}var fM,RL;function vE(){if(RL)return fM;RL=1;var t=_p(),e=t(Object,"create");return fM=e,fM}var hM,IL;function VQ(){if(IL)return hM;IL=1;var t=vE();function e(){this.__data__=t?t(null):{},this.size=0}return hM=e,hM}var pM,PL;function HQ(){if(PL)return pM;PL=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return pM=t,pM}var mM,OL;function GQ(){if(OL)return mM;OL=1;var t=vE(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(a){var s=this.__data__;if(t){var o=s[a];return o===e?void 0:o}return r.call(s,a)?s[a]:void 0}return mM=i,mM}var gM,jL;function qQ(){if(jL)return gM;jL=1;var t=vE(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var a=this.__data__;return t?a[i]!==void 0:n.call(a,i)}return gM=r,gM}var vM,DL;function $Q(){if(DL)return vM;DL=1;var t=vE(),e="__lodash_hash_undefined__";function n(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=t&&i===void 0?e:i,this}return vM=n,vM}var yM,LL;function WQ(){if(LL)return yM;LL=1;var t=VQ(),e=HQ(),n=GQ(),r=qQ(),i=$Q();function a(s){var o=-1,c=s==null?0:s.length;for(this.clear();++o<c;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,yM=a,yM}var xM,UL;function KQ(){if(UL)return xM;UL=1;function t(){this.__data__=[],this.size=0}return xM=t,xM}var bM,zL;function CO(){if(zL)return bM;zL=1;function t(e,n){return e===n||e!==e&&n!==n}return bM=t,bM}var _M,BL;function yE(){if(BL)return _M;BL=1;var t=CO();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return _M=e,_M}var wM,FL;function XQ(){if(FL)return wM;FL=1;var t=yE(),e=Array.prototype,n=e.splice;function r(i){var a=this.__data__,s=t(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():n.call(a,s,1),--this.size,!0}return wM=r,wM}var SM,VL;function YQ(){if(VL)return SM;VL=1;var t=yE();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return SM=e,SM}var TM,HL;function JQ(){if(HL)return TM;HL=1;var t=yE();function e(n){return t(this.__data__,n)>-1}return TM=e,TM}var EM,GL;function ZQ(){if(GL)return EM;GL=1;var t=yE();function e(n,r){var i=this.__data__,a=t(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this}return EM=e,EM}var AM,qL;function xE(){if(qL)return AM;qL=1;var t=KQ(),e=XQ(),n=YQ(),r=JQ(),i=ZQ();function a(s){var o=-1,c=s==null?0:s.length;for(this.clear();++o<c;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,AM=a,AM}var kM,$L;function RO(){if($L)return kM;$L=1;var t=_p(),e=Fc(),n=t(e,"Map");return kM=n,kM}var MM,WL;function QQ(){if(WL)return MM;WL=1;var t=WQ(),e=xE(),n=RO();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return MM=r,MM}var NM,KL;function eee(){if(KL)return NM;KL=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return NM=t,NM}var CM,XL;function bE(){if(XL)return CM;XL=1;var t=eee();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return CM=e,CM}var RM,YL;function tee(){if(YL)return RM;YL=1;var t=bE();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return RM=e,RM}var IM,JL;function nee(){if(JL)return IM;JL=1;var t=bE();function e(n){return t(this,n).get(n)}return IM=e,IM}var PM,ZL;function ree(){if(ZL)return PM;ZL=1;var t=bE();function e(n){return t(this,n).has(n)}return PM=e,PM}var OM,QL;function iee(){if(QL)return OM;QL=1;var t=bE();function e(n,r){var i=t(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this}return OM=e,OM}var jM,e4;function IO(){if(e4)return jM;e4=1;var t=QQ(),e=tee(),n=nee(),r=ree(),i=iee();function a(s){var o=-1,c=s==null?0:s.length;for(this.clear();++o<c;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,jM=a,jM}var DM,t4;function _G(){if(t4)return DM;t4=1;var t=IO(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],c=a.cache;if(c.has(o))return c.get(o);var u=r.apply(this,s);return a.cache=c.set(o,u)||c,u};return a.cache=new(n.Cache||t),a}return n.Cache=t,DM=n,DM}var LM,n4;function aee(){if(n4)return LM;n4=1;var t=_G(),e=500;function n(r){var i=t(r,function(s){return a.size===e&&a.clear(),s}),a=i.cache;return i}return LM=n,LM}var UM,r4;function see(){if(r4)return UM;r4=1;var t=aee(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(s,o,c,u){a.push(c?u.replace(n,"$1"):o||s)}),a});return UM=r,UM}var zM,i4;function PO(){if(i4)return zM;i4=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=Array(i);++r<i;)a[r]=n(e[r],r,e);return a}return zM=t,zM}var BM,a4;function oee(){if(a4)return BM;a4=1;var t=Mb(),e=PO(),n=qs(),r=Sv(),i=t?t.prototype:void 0,a=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(n(o))return e(o,s)+"";if(r(o))return a?a.call(o):"";var c=o+"";return c=="0"&&1/o==-1/0?"-0":c}return BM=s,BM}var FM,s4;function wG(){if(s4)return FM;s4=1;var t=oee();function e(n){return n==null?"":t(n)}return FM=e,FM}var VM,o4;function SG(){if(o4)return VM;o4=1;var t=qs(),e=MO(),n=see(),r=wG();function i(a,s){return t(a)?a:e(a,s)?[a]:n(r(a))}return VM=i,VM}var HM,l4;function _E(){if(l4)return HM;l4=1;var t=Sv();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return HM=e,HM}var GM,c4;function OO(){if(c4)return GM;c4=1;var t=SG(),e=_E();function n(r,i){i=t(i,r);for(var a=0,s=i.length;r!=null&&a<s;)r=r[e(i[a++])];return a&&a==s?r:void 0}return GM=n,GM}var qM,u4;function TG(){if(u4)return qM;u4=1;var t=OO();function e(n,r,i){var a=n==null?void 0:t(n,r);return a===void 0?i:a}return qM=e,qM}var lee=TG();const fo=Zn(lee);var $M,d4;function cee(){if(d4)return $M;d4=1;function t(e){return e==null}return $M=t,$M}var uee=cee();const Pn=Zn(uee);var WM,f4;function dee(){if(f4)return WM;f4=1;var t=Qu(),e=qs(),n=ed(),r="[object String]";function i(a){return typeof a=="string"||!e(a)&&n(a)&&t(a)==r}return WM=i,WM}var fee=dee();const cp=Zn(fee);var hee=NO();const on=Zn(hee);var pee=Tf();const Tv=Zn(pee);var KM={exports:{}},ar={};var h4;function mee(){if(h4)return ar;h4=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),_;_=Symbol.for("react.module.reference");function T(w){if(typeof w=="object"&&w!==null){var E=w.$$typeof;switch(E){case t:switch(w=w.type,w){case n:case i:case r:case u:case h:return w;default:switch(w=w&&w.$$typeof,w){case o:case s:case c:case v:case m:case a:return w;default:return E}}case e:return E}}}return ar.ContextConsumer=s,ar.ContextProvider=a,ar.Element=t,ar.ForwardRef=c,ar.Fragment=n,ar.Lazy=v,ar.Memo=m,ar.Portal=e,ar.Profiler=i,ar.StrictMode=r,ar.Suspense=u,ar.SuspenseList=h,ar.isAsyncMode=function(){return!1},ar.isConcurrentMode=function(){return!1},ar.isContextConsumer=function(w){return T(w)===s},ar.isContextProvider=function(w){return T(w)===a},ar.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},ar.isForwardRef=function(w){return T(w)===c},ar.isFragment=function(w){return T(w)===n},ar.isLazy=function(w){return T(w)===v},ar.isMemo=function(w){return T(w)===m},ar.isPortal=function(w){return T(w)===e},ar.isProfiler=function(w){return T(w)===i},ar.isStrictMode=function(w){return T(w)===r},ar.isSuspense=function(w){return T(w)===u},ar.isSuspenseList=function(w){return T(w)===h},ar.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===n||w===i||w===r||w===u||w===h||w===x||typeof w=="object"&&w!==null&&(w.$$typeof===v||w.$$typeof===m||w.$$typeof===a||w.$$typeof===s||w.$$typeof===c||w.$$typeof===_||w.getModuleId!==void 0)},ar.typeOf=T,ar}var p4;function gee(){return p4||(p4=1,KM.exports=mee()),KM.exports}var vee=gee(),XM,m4;function EG(){if(m4)return XM;m4=1;var t=Qu(),e=ed(),n="[object Number]";function r(i){return typeof i=="number"||e(i)&&t(i)==n}return XM=r,XM}var YM,g4;function yee(){if(g4)return YM;g4=1;var t=EG();function e(n){return t(n)&&n!=+n}return YM=e,YM}var xee=yee();const Nb=Zn(xee);var bee=EG();const _ee=Zn(bee);var ds=function(e){return e===0?0:e>0?1:-1},Wh=function(e){return cp(e)&&e.indexOf("%")===e.length-1},dt=function(e){return _ee(e)&&!Nb(e)},wee=function(e){return Pn(e)},Hi=function(e){return dt(e)||cp(e)},See=0,Cb=function(e){var n=++See;return"".concat(e||"").concat(n)},fs=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!dt(e)&&!cp(e))return r;var a;if(Wh(e)){var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return Nb(a)&&(a=r),i&&a>n&&(a=n),a},df=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},Tee=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},of=function(e,n){return dt(e)&&dt(n)?function(r){return e+r*(n-e)}:function(){return n}};function pP(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):fo(r,e))===n})}var Eee=function(e,n){return dt(e)&&dt(n)?e-n:cp(e)&&cp(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Og(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function mP(t){"@babel/helpers - typeof";return mP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mP(t)}var Aee=["viewBox","children"],kee=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],v4=["points","pathLength"],JM={svg:Aee,polygon:v4,polyline:v4},jO=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],c1=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(J.isValidElement(e)&&(r=e.props),!Tv(r))return null;var i={};return Object.keys(r).forEach(function(a){jO.includes(a)&&(i[a]=n||function(s){return r[a](r,s)})}),i},Mee=function(e,n,r){return function(i){return e(n,r,i),null}},up=function(e,n,r){if(!Tv(e)||mP(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var s=e[a];jO.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=Mee(s,n,r))}),i},Nee=["children"],Cee=["children"];function y4(t,e){if(t==null)return{};var n=Ree(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ree(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var x4={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Fu=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},b4=null,ZM=null,DO=function t(e){if(e===b4&&Array.isArray(ZM))return ZM;var n=[];return J.Children.forEach(e,function(r){Pn(r)||(vee.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),ZM=n,b4=e,n};function Wo(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Fu(i)}):r=[Fu(e)],DO(t).forEach(function(i){var a=fo(i,"type.displayName")||fo(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function io(t,e){var n=Wo(t,e);return n&&n[0]}var _4=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!dt(r)||r<=0||!dt(i)||i<=0)},Iee=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Pee=function(e){return e&&e.type&&cp(e.type)&&Iee.indexOf(e.type)>=0},Oee=function(e,n,r,i){var a,s=(a=JM?.[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!on(e)&&(i&&s.includes(n)||kee.includes(n))||r&&jO.includes(n)},rn=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(J.isValidElement(e)&&(i=e.props),!Tv(i))return null;var a={};return Object.keys(i).forEach(function(s){var o;Oee((o=i)===null||o===void 0?void 0:o[s],s,n,r)&&(a[s]=i[s])}),a},gP=function t(e,n){if(e===n)return!0;var r=J.Children.count(e);if(r!==J.Children.count(n))return!1;if(r===0)return!0;if(r===1)return w4(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=e[i],s=n[i];if(Array.isArray(a)||Array.isArray(s)){if(!t(a,s))return!1}else if(!w4(a,s))return!1}return!0},w4=function(e,n){if(Pn(e)&&Pn(n))return!0;if(!Pn(e)&&!Pn(n)){var r=e.props||{},i=r.children,a=y4(r,Nee),s=n.props||{},o=s.children,c=y4(s,Cee);return i&&o?Og(a,c)&&gP(i,o):!i&&!o?Og(a,c):!1}return!1},S4=function(e,n){var r=[],i={};return DO(e).forEach(function(a,s){if(Pee(a))r.push(a);else if(a){var o=Fu(a.type),c=n[o]||{},u=c.handler,h=c.once;if(u&&(!h||!i[o])){var m=u(a,o,s);r.push(m),i[o]=!0}}}),r},jee=function(e){var n=e&&e.type;return n&&x4[n]?x4[n]:null},Dee=function(e,n){return DO(n).indexOf(e)},Lee=["children","width","height","viewBox","className","style","title","desc"];function vP(){return vP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vP.apply(this,arguments)}function Uee(t,e){if(t==null)return{};var n=zee(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function zee(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function yP(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,a=t.className,s=t.style,o=t.title,c=t.desc,u=Uee(t,Lee),h=i||{width:n,height:r,x:0,y:0},m=En("recharts-surface",a);return ue.createElement("svg",vP({},rn(u,!0,"svg"),{className:m,width:n,height:r,style:s,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),ue.createElement("title",null,o),ue.createElement("desc",null,c),e)}var Bee=["children","className"];function xP(){return xP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xP.apply(this,arguments)}function Fee(t,e){if(t==null)return{};var n=Vee(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Vee(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var lr=ue.forwardRef(function(t,e){var n=t.children,r=t.className,i=Fee(t,Bee),a=En("recharts-layer",r);return ue.createElement("g",xP({className:a},rn(i,!0),{ref:e}),n)}),Ul=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]},QM,T4;function Hee(){if(T4)return QM;T4=1;function t(e,n,r){var i=-1,a=e.length;n<0&&(n=-n>a?0:a+n),r=r>a?a:r,r<0&&(r+=a),a=n>r?0:r-n>>>0,n>>>=0;for(var s=Array(a);++i<a;)s[i]=e[i+n];return s}return QM=t,QM}var eN,E4;function Gee(){if(E4)return eN;E4=1;var t=Hee();function e(n,r,i){var a=n.length;return i=i===void 0?a:i,!r&&i>=a?n:t(n,r,i)}return eN=e,eN}var tN,A4;function AG(){if(A4)return tN;A4=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+t+i+a+"]");function c(u){return o.test(u)}return tN=c,tN}var nN,k4;function qee(){if(k4)return nN;k4=1;function t(e){return e.split("")}return nN=t,nN}var rN,M4;function $ee(){if(M4)return rN;M4=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",s="["+t+"]",o="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+c+")",h="[^"+t+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",v="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",_=u+"?",T="["+a+"]?",w="(?:"+x+"(?:"+[h,m,v].join("|")+")"+T+_+")*",E=T+_+w,N="(?:"+[h+o+"?",o,m,v,s].join("|")+")",C=RegExp(c+"(?="+c+")|"+N+E,"g");function P(I){return I.match(C)||[]}return rN=P,rN}var iN,N4;function Wee(){if(N4)return iN;N4=1;var t=qee(),e=AG(),n=$ee();function r(i){return e(i)?n(i):t(i)}return iN=r,iN}var aN,C4;function Kee(){if(C4)return aN;C4=1;var t=Gee(),e=AG(),n=Wee(),r=wG();function i(a){return function(s){s=r(s);var o=e(s)?n(s):void 0,c=o?o[0]:s.charAt(0),u=o?t(o,1).join(""):s.slice(1);return c[a]()+u}}return aN=i,aN}var sN,R4;function Xee(){if(R4)return sN;R4=1;var t=Kee(),e=t("toUpperCase");return sN=e,sN}var Yee=Xee();const wE=Zn(Yee);function Nr(t){return function(){return t}}const kG=Math.cos,u1=Math.sin,Vl=Math.sqrt,d1=Math.PI,SE=2*d1,bP=Math.PI,_P=2*bP,Uh=1e-6,Jee=_P-Uh;function MG(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Zee(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return MG;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let Qee=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?MG:Zee(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,u=i-n,h=s-e,m=o-n,v=h*h+m*m;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(v>Uh)if(!(Math.abs(m*c-u*h)>Uh)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let x=r-s,_=i-o,T=c*c+u*u,w=x*x+_*_,E=Math.sqrt(T),N=Math.sqrt(v),C=a*Math.tan((bP-Math.acos((T+v-w)/(2*E*N)))/2),P=C/N,I=C/E;Math.abs(P-1)>Uh&&this._append`L${e+P*h},${n+P*m}`,this._append`A${a},${a},0,0,${+(m*x>h*_)},${this._x1=e+I*c},${this._y1=n+I*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),u=e+o,h=n+c,m=1^s,v=s?i-a:a-i;this._x1===null?this._append`M${u},${h}`:(Math.abs(this._x1-u)>Uh||Math.abs(this._y1-h)>Uh)&&this._append`L${u},${h}`,r&&(v<0&&(v=v%_P+_P),v>Jee?this._append`A${r},${r},0,1,${m},${e-o},${n-c}A${r},${r},0,1,${m},${this._x1=u},${this._y1=h}`:v>Uh&&this._append`A${r},${r},0,${+(v>=bP)},${m},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function LO(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Qee(e)}function UO(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function NG(t){this._context=t}NG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function TE(t){return new NG(t)}function CG(t){return t[0]}function RG(t){return t[1]}function IG(t,e){var n=Nr(!0),r=null,i=TE,a=null,s=LO(o);t=typeof t=="function"?t:t===void 0?CG:Nr(t),e=typeof e=="function"?e:e===void 0?RG:Nr(e);function o(c){var u,h=(c=UO(c)).length,m,v=!1,x;for(r==null&&(a=i(x=s())),u=0;u<=h;++u)!(u<h&&n(m=c[u],u,c))===v&&((v=!v)?a.lineStart():a.lineEnd()),v&&a.point(+t(m,u,c),+e(m,u,c));if(x)return a=null,x+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:Nr(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:Nr(+c),o):e},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Nr(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),o):r},o}function jw(t,e,n){var r=null,i=Nr(!0),a=null,s=TE,o=null,c=LO(u);t=typeof t=="function"?t:t===void 0?CG:Nr(+t),e=typeof e=="function"?e:Nr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?RG:Nr(+n);function u(m){var v,x,_,T=(m=UO(m)).length,w,E=!1,N,C=new Array(T),P=new Array(T);for(a==null&&(o=s(N=c())),v=0;v<=T;++v){if(!(v<T&&i(w=m[v],v,m))===E)if(E=!E)x=v,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),_=v-1;_>=x;--_)o.point(C[_],P[_]);o.lineEnd(),o.areaEnd()}E&&(C[v]=+t(w,v,m),P[v]=+e(w,v,m),o.point(r?+r(w,v,m):C[v],n?+n(w,v,m):P[v]))}if(N)return o=null,N+""||null}function h(){return IG().defined(i).curve(s).context(a)}return u.x=function(m){return arguments.length?(t=typeof m=="function"?m:Nr(+m),r=null,u):t},u.x0=function(m){return arguments.length?(t=typeof m=="function"?m:Nr(+m),u):t},u.x1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Nr(+m),u):r},u.y=function(m){return arguments.length?(e=typeof m=="function"?m:Nr(+m),n=null,u):e},u.y0=function(m){return arguments.length?(e=typeof m=="function"?m:Nr(+m),u):e},u.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Nr(+m),u):n},u.lineX0=u.lineY0=function(){return h().x(t).y(e)},u.lineY1=function(){return h().x(t).y(n)},u.lineX1=function(){return h().x(r).y(e)},u.defined=function(m){return arguments.length?(i=typeof m=="function"?m:Nr(!!m),u):i},u.curve=function(m){return arguments.length?(s=m,a!=null&&(o=s(a)),u):s},u.context=function(m){return arguments.length?(m==null?a=o=null:o=s(a=m),u):a},u}class PG{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function ete(t){return new PG(t,!0)}function tte(t){return new PG(t,!1)}const zO={draw(t,e){const n=Vl(e/d1);t.moveTo(n,0),t.arc(0,0,n,0,SE)}},nte={draw(t,e){const n=Vl(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},OG=Vl(1/3),rte=OG*2,ite={draw(t,e){const n=Vl(e/rte),r=n*OG;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},ate={draw(t,e){const n=Vl(e),r=-n/2;t.rect(r,r,n,n)}},ste=.8908130915292852,jG=u1(d1/10)/u1(7*d1/10),ote=u1(SE/10)*jG,lte=-kG(SE/10)*jG,cte={draw(t,e){const n=Vl(e*ste),r=ote*n,i=lte*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=SE*a/5,o=kG(s),c=u1(s);t.lineTo(c*n,-o*n),t.lineTo(o*r-c*i,c*r+o*i)}t.closePath()}},oN=Vl(3),ute={draw(t,e){const n=-Vl(e/(oN*3));t.moveTo(0,n*2),t.lineTo(-oN*n,-n),t.lineTo(oN*n,-n),t.closePath()}},Bo=-.5,Fo=Vl(3)/2,wP=1/Vl(12),dte=(wP/2+1)*3,fte={draw(t,e){const n=Vl(e/dte),r=n/2,i=n*wP,a=r,s=n*wP+n,o=-a,c=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,c),t.lineTo(Bo*r-Fo*i,Fo*r+Bo*i),t.lineTo(Bo*a-Fo*s,Fo*a+Bo*s),t.lineTo(Bo*o-Fo*c,Fo*o+Bo*c),t.lineTo(Bo*r+Fo*i,Bo*i-Fo*r),t.lineTo(Bo*a+Fo*s,Bo*s-Fo*a),t.lineTo(Bo*o+Fo*c,Bo*c-Fo*o),t.closePath()}};function hte(t,e){let n=null,r=LO(i);t=typeof t=="function"?t:Nr(t||zO),e=typeof e=="function"?e:Nr(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Nr(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Nr(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function f1(){}function h1(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function DG(t){this._context=t}DG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:h1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:h1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function pte(t){return new DG(t)}function LG(t){this._context=t}LG.prototype={areaStart:f1,areaEnd:f1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:h1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function mte(t){return new LG(t)}function UG(t){this._context=t}UG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:h1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function gte(t){return new UG(t)}function zG(t){this._context=t}zG.prototype={areaStart:f1,areaEnd:f1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function vte(t){return new zG(t)}function I4(t){return t<0?-1:1}function P4(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(I4(a)+I4(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function O4(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function lN(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function p1(t){this._context=t}p1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:lN(this,this._t0,O4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,lN(this,O4(this,n=P4(this,t,e)),n);break;default:lN(this,this._t0,n=P4(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function BG(t){this._context=new FG(t)}(BG.prototype=Object.create(p1.prototype)).point=function(t,e){p1.prototype.point.call(this,e,t)};function FG(t){this._context=t}FG.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function yte(t){return new p1(t)}function xte(t){return new BG(t)}function VG(t){this._context=t}VG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=j4(t),i=j4(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function j4(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function bte(t){return new VG(t)}function EE(t,e){this._context=t,this._t=e}EE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function _te(t){return new EE(t,.5)}function wte(t){return new EE(t,0)}function Ste(t){return new EE(t,1)}function Vg(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function SP(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Tte(t,e){return t[e]}function Ete(t){const e=[];return e.key=t,e}function Ate(){var t=Nr([]),e=SP,n=Vg,r=Tte;function i(a){var s=Array.from(t.apply(this,arguments),Ete),o,c=s.length,u=-1,h;for(const m of a)for(o=0,++u;o<c;++o)(s[o][u]=[0,+r(m,s[o].key,u,a)]).data=m;for(o=0,h=UO(e(s));o<c;++o)s[h[o]].index=o;return n(s,h),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Nr(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Nr(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?SP:typeof a=="function"?a:Nr(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Vg,i):n},i}function kte(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}Vg(t,e)}}function Mte(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}Vg(t,e)}}function Nte(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,u=0;o<s;++o){for(var h=t[e[o]],m=h[r][1]||0,v=h[r-1][1]||0,x=(m-v)/2,_=0;_<o;++_){var T=t[e[_]],w=T[r][1]||0,E=T[r-1][1]||0;x+=w-E}c+=m,u+=x*m}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,Vg(t,e)}}function Ex(t){"@babel/helpers - typeof";return Ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ex(t)}var Cte=["type","size","sizeType"];function TP(){return TP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TP.apply(this,arguments)}function D4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function L4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D4(Object(n),!0).forEach(function(r){Rte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rte(t,e,n){return e=Ite(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ite(t){var e=Pte(t,"string");return Ex(e)=="symbol"?e:e+""}function Pte(t,e){if(Ex(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ex(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ote(t,e){if(t==null)return{};var n=jte(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jte(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var HG={symbolCircle:zO,symbolCross:nte,symbolDiamond:ite,symbolSquare:ate,symbolStar:cte,symbolTriangle:ute,symbolWye:fte},Dte=Math.PI/180,Lte=function(e){var n="symbol".concat(wE(e));return HG[n]||zO},Ute=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*Dte;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},zte=function(e,n){HG["symbol".concat(wE(e))]=n},BO=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,a=i===void 0?64:i,s=e.sizeType,o=s===void 0?"area":s,c=Ote(e,Cte),u=L4(L4({},c),{},{type:r,size:a,sizeType:o}),h=function(){var w=Lte(r),E=hte().type(w).size(Ute(a,o,r));return E()},m=u.className,v=u.cx,x=u.cy,_=rn(u,!0);return v===+v&&x===+x&&a===+a?ue.createElement("path",TP({},_,{className:En("recharts-symbols",m),transform:"translate(".concat(v,", ").concat(x,")"),d:h()})):null};BO.registerSymbol=zte;function Hg(t){"@babel/helpers - typeof";return Hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hg(t)}function EP(){return EP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EP.apply(this,arguments)}function U4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bte(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U4(Object(n),!0).forEach(function(r){Ax(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vte(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qG(r.key),r)}}function Hte(t,e,n){return e&&Vte(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gte(t,e,n){return e=m1(e),qte(t,GG()?Reflect.construct(e,n||[],m1(t).constructor):e.apply(t,n))}function qte(t,e){if(e&&(Hg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $te(t)}function $te(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GG=function(){return!!t})()}function m1(t){return m1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},m1(t)}function Wte(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AP(t,e)}function AP(t,e){return AP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},AP(t,e)}function Ax(t,e,n){return e=qG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qG(t){var e=Kte(t,"string");return Hg(e)=="symbol"?e:e+""}function Kte(t,e){if(Hg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Vo=32,FO=(function(t){function e(){return Fte(this,e),Gte(this,e,arguments)}return Wte(e,t),Hte(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=Vo/2,s=Vo/6,o=Vo/3,c=r.inactive?i:r.color;if(r.type==="plainline")return ue.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:Vo,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return ue.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(Vo,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return ue.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Vo/8,"h").concat(Vo,"v").concat(Vo*3/4,"h").concat(-Vo,"z"),className:"recharts-legend-icon"});if(ue.isValidElement(r.legendIcon)){var u=Bte({},r);return delete u.legendIcon,ue.cloneElement(r.legendIcon,u)}return ue.createElement(BO,{fill:c,cx:a,cy:a,size:Vo,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,s=i.iconSize,o=i.layout,c=i.formatter,u=i.inactiveColor,h={x:0,y:0,width:Vo,height:Vo},m={display:o==="horizontal"?"inline-block":"block",marginRight:10},v={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(x,_){var T=x.formatter||c,w=En(Ax(Ax({"recharts-legend-item":!0},"legend-item-".concat(_),!0),"inactive",x.inactive));if(x.type==="none")return null;var E=on(x.value)?null:x.value;Ul(!on(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var N=x.inactive?u:x.color;return ue.createElement("li",EP({className:w,style:m,key:"legend-item-".concat(_)},up(r.props,x,_)),ue.createElement(yP,{width:s,height:s,viewBox:h,style:v},r.renderIcon(x)),ue.createElement("span",{className:"recharts-legend-item-text",style:{color:N}},T?T(E,x,_):E))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,s=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return ue.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])})(J.PureComponent);Ax(FO,"displayName","Legend");Ax(FO,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var cN,z4;function Xte(){if(z4)return cN;z4=1;var t=xE();function e(){this.__data__=new t,this.size=0}return cN=e,cN}var uN,B4;function Yte(){if(B4)return uN;B4=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return uN=t,uN}var dN,F4;function Jte(){if(F4)return dN;F4=1;function t(e){return this.__data__.get(e)}return dN=t,dN}var fN,V4;function Zte(){if(V4)return fN;V4=1;function t(e){return this.__data__.has(e)}return fN=t,fN}var hN,H4;function Qte(){if(H4)return hN;H4=1;var t=xE(),e=RO(),n=IO(),r=200;function i(a,s){var o=this.__data__;if(o instanceof t){var c=o.__data__;if(!e||c.length<r-1)return c.push([a,s]),this.size=++o.size,this;o=this.__data__=new n(c)}return o.set(a,s),this.size=o.size,this}return hN=i,hN}var pN,G4;function $G(){if(G4)return pN;G4=1;var t=xE(),e=Xte(),n=Yte(),r=Jte(),i=Zte(),a=Qte();function s(o){var c=this.__data__=new t(o);this.size=c.size}return s.prototype.clear=e,s.prototype.delete=n,s.prototype.get=r,s.prototype.has=i,s.prototype.set=a,pN=s,pN}var mN,q4;function ene(){if(q4)return mN;q4=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return mN=e,mN}var gN,$4;function tne(){if($4)return gN;$4=1;function t(e){return this.__data__.has(e)}return gN=t,gN}var vN,W4;function WG(){if(W4)return vN;W4=1;var t=IO(),e=ene(),n=tne();function r(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new t;++a<s;)this.add(i[a])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,vN=r,vN}var yN,K4;function KG(){if(K4)return yN;K4=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return yN=t,yN}var xN,X4;function XG(){if(X4)return xN;X4=1;function t(e,n){return e.has(n)}return xN=t,xN}var bN,Y4;function YG(){if(Y4)return bN;Y4=1;var t=WG(),e=KG(),n=XG(),r=1,i=2;function a(s,o,c,u,h,m){var v=c&r,x=s.length,_=o.length;if(x!=_&&!(v&&_>x))return!1;var T=m.get(s),w=m.get(o);if(T&&w)return T==o&&w==s;var E=-1,N=!0,C=c&i?new t:void 0;for(m.set(s,o),m.set(o,s);++E<x;){var P=s[E],I=o[E];if(u)var j=v?u(I,P,E,o,s,m):u(P,I,E,s,o,m);if(j!==void 0){if(j)continue;N=!1;break}if(C){if(!e(o,function(O,F){if(!n(C,F)&&(P===O||h(P,O,c,u,m)))return C.push(F)})){N=!1;break}}else if(!(P===I||h(P,I,c,u,m))){N=!1;break}}return m.delete(s),m.delete(o),N}return bN=a,bN}var _N,J4;function nne(){if(J4)return _N;J4=1;var t=Fc(),e=t.Uint8Array;return _N=e,_N}var wN,Z4;function rne(){if(Z4)return wN;Z4=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,a){r[++n]=[a,i]}),r}return wN=t,wN}var SN,Q4;function VO(){if(Q4)return SN;Q4=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return SN=t,SN}var TN,eU;function ine(){if(eU)return TN;eU=1;var t=Mb(),e=nne(),n=CO(),r=YG(),i=rne(),a=VO(),s=1,o=2,c="[object Boolean]",u="[object Date]",h="[object Error]",m="[object Map]",v="[object Number]",x="[object RegExp]",_="[object Set]",T="[object String]",w="[object Symbol]",E="[object ArrayBuffer]",N="[object DataView]",C=t?t.prototype:void 0,P=C?C.valueOf:void 0;function I(j,O,F,L,z,V,G){switch(F){case N:if(j.byteLength!=O.byteLength||j.byteOffset!=O.byteOffset)return!1;j=j.buffer,O=O.buffer;case E:return!(j.byteLength!=O.byteLength||!V(new e(j),new e(O)));case c:case u:case v:return n(+j,+O);case h:return j.name==O.name&&j.message==O.message;case x:case T:return j==O+"";case m:var $=i;case _:var ee=L&s;if($||($=a),j.size!=O.size&&!ee)return!1;var te=G.get(j);if(te)return te==O;L|=o,G.set(j,O);var K=r($(j),$(O),L,z,V,G);return G.delete(j),K;case w:if(P)return P.call(j)==P.call(O)}return!1}return TN=I,TN}var EN,tU;function JG(){if(tU)return EN;tU=1;function t(e,n){for(var r=-1,i=n.length,a=e.length;++r<i;)e[a+r]=n[r];return e}return EN=t,EN}var AN,nU;function ane(){if(nU)return AN;nU=1;var t=JG(),e=qs();function n(r,i,a){var s=i(r);return e(r)?s:t(s,a(r))}return AN=n,AN}var kN,rU;function sne(){if(rU)return kN;rU=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=0,s=[];++r<i;){var o=e[r];n(o,r,e)&&(s[a++]=o)}return s}return kN=t,kN}var MN,iU;function one(){if(iU)return MN;iU=1;function t(){return[]}return MN=t,MN}var NN,aU;function lne(){if(aU)return NN;aU=1;var t=sne(),e=one(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),t(i(s),function(o){return r.call(s,o)}))}:e;return NN=a,NN}var CN,sU;function cne(){if(sU)return CN;sU=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return CN=t,CN}var RN,oU;function une(){if(oU)return RN;oU=1;var t=Qu(),e=ed(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return RN=r,RN}var IN,lU;function HO(){if(lU)return IN;lU=1;var t=une(),e=ed(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=t((function(){return arguments})())?t:function(s){return e(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return IN=a,IN}var By={exports:{}},PN,cU;function dne(){if(cU)return PN;cU=1;function t(){return!1}return PN=t,PN}By.exports;var uU;function ZG(){return uU||(uU=1,(function(t,e){var n=Fc(),r=dne(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,o=s?n.Buffer:void 0,c=o?o.isBuffer:void 0,u=c||r;t.exports=u})(By,By.exports)),By.exports}var ON,dU;function GO(){if(dU)return ON;dU=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i??t,!!i&&(a=="number"||a!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return ON=n,ON}var jN,fU;function qO(){if(fU)return jN;fU=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return jN=e,jN}var DN,hU;function fne(){if(hU)return DN;hU=1;var t=Qu(),e=qO(),n=ed(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",c="[object Function]",u="[object Map]",h="[object Number]",m="[object Object]",v="[object RegExp]",x="[object Set]",_="[object String]",T="[object WeakMap]",w="[object ArrayBuffer]",E="[object DataView]",N="[object Float32Array]",C="[object Float64Array]",P="[object Int8Array]",I="[object Int16Array]",j="[object Int32Array]",O="[object Uint8Array]",F="[object Uint8ClampedArray]",L="[object Uint16Array]",z="[object Uint32Array]",V={};V[N]=V[C]=V[P]=V[I]=V[j]=V[O]=V[F]=V[L]=V[z]=!0,V[r]=V[i]=V[w]=V[a]=V[E]=V[s]=V[o]=V[c]=V[u]=V[h]=V[m]=V[v]=V[x]=V[_]=V[T]=!1;function G($){return n($)&&e($.length)&&!!V[t($)]}return DN=G,DN}var LN,pU;function QG(){if(pU)return LN;pU=1;function t(e){return function(n){return e(n)}}return LN=t,LN}var Fy={exports:{}};Fy.exports;var mU;function hne(){return mU||(mU=1,(function(t,e){var n=xG(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,s=a&&n.process,o=(function(){try{var c=i&&i.require&&i.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}})();t.exports=o})(Fy,Fy.exports)),Fy.exports}var UN,gU;function eq(){if(gU)return UN;gU=1;var t=fne(),e=QG(),n=hne(),r=n&&n.isTypedArray,i=r?e(r):t;return UN=i,UN}var zN,vU;function pne(){if(vU)return zN;vU=1;var t=cne(),e=HO(),n=qs(),r=ZG(),i=GO(),a=eq(),s=Object.prototype,o=s.hasOwnProperty;function c(u,h){var m=n(u),v=!m&&e(u),x=!m&&!v&&r(u),_=!m&&!v&&!x&&a(u),T=m||v||x||_,w=T?t(u.length,String):[],E=w.length;for(var N in u)(h||o.call(u,N))&&!(T&&(N=="length"||x&&(N=="offset"||N=="parent")||_&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||i(N,E)))&&w.push(N);return w}return zN=c,zN}var BN,yU;function mne(){if(yU)return BN;yU=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return BN=e,BN}var FN,xU;function tq(){if(xU)return FN;xU=1;function t(e,n){return function(r){return e(n(r))}}return FN=t,FN}var VN,bU;function gne(){if(bU)return VN;bU=1;var t=tq(),e=t(Object.keys,Object);return VN=e,VN}var HN,_U;function vne(){if(_U)return HN;_U=1;var t=mne(),e=gne(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!t(a))return e(a);var s=[];for(var o in Object(a))r.call(a,o)&&o!="constructor"&&s.push(o);return s}return HN=i,HN}var GN,wU;function Rb(){if(wU)return GN;wU=1;var t=NO(),e=qO();function n(r){return r!=null&&e(r.length)&&!t(r)}return GN=n,GN}var qN,SU;function AE(){if(SU)return qN;SU=1;var t=pne(),e=vne(),n=Rb();function r(i){return n(i)?t(i):e(i)}return qN=r,qN}var $N,TU;function yne(){if(TU)return $N;TU=1;var t=ane(),e=lne(),n=AE();function r(i){return t(i,n,e)}return $N=r,$N}var WN,EU;function xne(){if(EU)return WN;EU=1;var t=yne(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o,c,u,h){var m=o&e,v=t(a),x=v.length,_=t(s),T=_.length;if(x!=T&&!m)return!1;for(var w=x;w--;){var E=v[w];if(!(m?E in s:r.call(s,E)))return!1}var N=h.get(a),C=h.get(s);if(N&&C)return N==s&&C==a;var P=!0;h.set(a,s),h.set(s,a);for(var I=m;++w<x;){E=v[w];var j=a[E],O=s[E];if(c)var F=m?c(O,j,E,s,a,h):c(j,O,E,a,s,h);if(!(F===void 0?j===O||u(j,O,o,c,h):F)){P=!1;break}I||(I=E=="constructor")}if(P&&!I){var L=a.constructor,z=s.constructor;L!=z&&"constructor"in a&&"constructor"in s&&!(typeof L=="function"&&L instanceof L&&typeof z=="function"&&z instanceof z)&&(P=!1)}return h.delete(a),h.delete(s),P}return WN=i,WN}var KN,AU;function bne(){if(AU)return KN;AU=1;var t=_p(),e=Fc(),n=t(e,"DataView");return KN=n,KN}var XN,kU;function _ne(){if(kU)return XN;kU=1;var t=_p(),e=Fc(),n=t(e,"Promise");return XN=n,XN}var YN,MU;function nq(){if(MU)return YN;MU=1;var t=_p(),e=Fc(),n=t(e,"Set");return YN=n,YN}var JN,NU;function wne(){if(NU)return JN;NU=1;var t=_p(),e=Fc(),n=t(e,"WeakMap");return JN=n,JN}var ZN,CU;function Sne(){if(CU)return ZN;CU=1;var t=bne(),e=RO(),n=_ne(),r=nq(),i=wne(),a=Qu(),s=bG(),o="[object Map]",c="[object Object]",u="[object Promise]",h="[object Set]",m="[object WeakMap]",v="[object DataView]",x=s(t),_=s(e),T=s(n),w=s(r),E=s(i),N=a;return(t&&N(new t(new ArrayBuffer(1)))!=v||e&&N(new e)!=o||n&&N(n.resolve())!=u||r&&N(new r)!=h||i&&N(new i)!=m)&&(N=function(C){var P=a(C),I=P==c?C.constructor:void 0,j=I?s(I):"";if(j)switch(j){case x:return v;case _:return o;case T:return u;case w:return h;case E:return m}return P}),ZN=N,ZN}var QN,RU;function Tne(){if(RU)return QN;RU=1;var t=$G(),e=YG(),n=ine(),r=xne(),i=Sne(),a=qs(),s=ZG(),o=eq(),c=1,u="[object Arguments]",h="[object Array]",m="[object Object]",v=Object.prototype,x=v.hasOwnProperty;function _(T,w,E,N,C,P){var I=a(T),j=a(w),O=I?h:i(T),F=j?h:i(w);O=O==u?m:O,F=F==u?m:F;var L=O==m,z=F==m,V=O==F;if(V&&s(T)){if(!s(w))return!1;I=!0,L=!1}if(V&&!L)return P||(P=new t),I||o(T)?e(T,w,E,N,C,P):n(T,w,O,E,N,C,P);if(!(E&c)){var G=L&&x.call(T,"__wrapped__"),$=z&&x.call(w,"__wrapped__");if(G||$){var ee=G?T.value():T,te=$?w.value():w;return P||(P=new t),C(ee,te,E,N,P)}}return V?(P||(P=new t),r(T,w,E,N,C,P)):!1}return QN=_,QN}var eC,IU;function $O(){if(IU)return eC;IU=1;var t=Tne(),e=ed();function n(r,i,a,s,o){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,a,s,n,o)}return eC=n,eC}var tC,PU;function Ene(){if(PU)return tC;PU=1;var t=$G(),e=$O(),n=1,r=2;function i(a,s,o,c){var u=o.length,h=u,m=!c;if(a==null)return!h;for(a=Object(a);u--;){var v=o[u];if(m&&v[2]?v[1]!==a[v[0]]:!(v[0]in a))return!1}for(;++u<h;){v=o[u];var x=v[0],_=a[x],T=v[1];if(m&&v[2]){if(_===void 0&&!(x in a))return!1}else{var w=new t;if(c)var E=c(_,T,x,a,s,w);if(!(E===void 0?e(T,_,n|r,c,w):E))return!1}}return!0}return tC=i,tC}var nC,OU;function rq(){if(OU)return nC;OU=1;var t=Tf();function e(n){return n===n&&!t(n)}return nC=e,nC}var rC,jU;function Ane(){if(jU)return rC;jU=1;var t=rq(),e=AE();function n(r){for(var i=e(r),a=i.length;a--;){var s=i[a],o=r[s];i[a]=[s,o,t(o)]}return i}return rC=n,rC}var iC,DU;function iq(){if(DU)return iC;DU=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return iC=t,iC}var aC,LU;function kne(){if(LU)return aC;LU=1;var t=Ene(),e=Ane(),n=iq();function r(i){var a=e(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(s){return s===i||t(s,i,a)}}return aC=r,aC}var sC,UU;function Mne(){if(UU)return sC;UU=1;function t(e,n){return e!=null&&n in Object(e)}return sC=t,sC}var oC,zU;function Nne(){if(zU)return oC;zU=1;var t=SG(),e=HO(),n=qs(),r=GO(),i=qO(),a=_E();function s(o,c,u){c=t(c,o);for(var h=-1,m=c.length,v=!1;++h<m;){var x=a(c[h]);if(!(v=o!=null&&u(o,x)))break;o=o[x]}return v||++h!=m?v:(m=o==null?0:o.length,!!m&&i(m)&&r(x,m)&&(n(o)||e(o)))}return oC=s,oC}var lC,BU;function Cne(){if(BU)return lC;BU=1;var t=Mne(),e=Nne();function n(r,i){return r!=null&&e(r,i,t)}return lC=n,lC}var cC,FU;function Rne(){if(FU)return cC;FU=1;var t=$O(),e=TG(),n=Cne(),r=MO(),i=rq(),a=iq(),s=_E(),o=1,c=2;function u(h,m){return r(h)&&i(m)?a(s(h),m):function(v){var x=e(v,h);return x===void 0&&x===m?n(v,h):t(m,x,o|c)}}return cC=u,cC}var uC,VU;function Ev(){if(VU)return uC;VU=1;function t(e){return e}return uC=t,uC}var dC,HU;function Ine(){if(HU)return dC;HU=1;function t(e){return function(n){return n?.[e]}}return dC=t,dC}var fC,GU;function Pne(){if(GU)return fC;GU=1;var t=OO();function e(n){return function(r){return t(r,n)}}return fC=e,fC}var hC,qU;function One(){if(qU)return hC;qU=1;var t=Ine(),e=Pne(),n=MO(),r=_E();function i(a){return n(a)?t(r(a)):e(a)}return hC=i,hC}var pC,$U;function Vc(){if($U)return pC;$U=1;var t=kne(),e=Rne(),n=Ev(),r=qs(),i=One();function a(s){return typeof s=="function"?s:s==null?n:typeof s=="object"?r(s)?e(s[0],s[1]):t(s):i(s)}return pC=a,pC}var mC,WU;function aq(){if(WU)return mC;WU=1;function t(e,n,r,i){for(var a=e.length,s=r+(i?1:-1);i?s--:++s<a;)if(n(e[s],s,e))return s;return-1}return mC=t,mC}var gC,KU;function jne(){if(KU)return gC;KU=1;function t(e){return e!==e}return gC=t,gC}var vC,XU;function Dne(){if(XU)return vC;XU=1;function t(e,n,r){for(var i=r-1,a=e.length;++i<a;)if(e[i]===n)return i;return-1}return vC=t,vC}var yC,YU;function Lne(){if(YU)return yC;YU=1;var t=aq(),e=jne(),n=Dne();function r(i,a,s){return a===a?n(i,a,s):t(i,e,s)}return yC=r,yC}var xC,JU;function Une(){if(JU)return xC;JU=1;var t=Lne();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return xC=e,xC}var bC,ZU;function zne(){if(ZU)return bC;ZU=1;function t(e,n,r){for(var i=-1,a=e==null?0:e.length;++i<a;)if(r(n,e[i]))return!0;return!1}return bC=t,bC}var _C,QU;function Bne(){if(QU)return _C;QU=1;function t(){}return _C=t,_C}var wC,e5;function Fne(){if(e5)return wC;e5=1;var t=nq(),e=Bne(),n=VO(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(a){return new t(a)}:e;return wC=i,wC}var SC,t5;function Vne(){if(t5)return SC;t5=1;var t=WG(),e=Une(),n=zne(),r=XG(),i=Fne(),a=VO(),s=200;function o(c,u,h){var m=-1,v=e,x=c.length,_=!0,T=[],w=T;if(h)_=!1,v=n;else if(x>=s){var E=u?null:i(c);if(E)return a(E);_=!1,v=r,w=new t}else w=u?[]:T;e:for(;++m<x;){var N=c[m],C=u?u(N):N;if(N=h||N!==0?N:0,_&&C===C){for(var P=w.length;P--;)if(w[P]===C)continue e;u&&w.push(C),T.push(N)}else v(w,C,h)||(w!==T&&w.push(C),T.push(N))}return T}return SC=o,SC}var TC,n5;function Hne(){if(n5)return TC;n5=1;var t=Vc(),e=Vne();function n(r,i){return r&&r.length?e(r,t(i,2)):[]}return TC=n,TC}var Gne=Hne();const r5=Zn(Gne);function sq(t,e,n){return e===!0?r5(t,n):on(e)?r5(t,e):t}function Gg(t){"@babel/helpers - typeof";return Gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gg(t)}var qne=["ref"];function i5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i5(Object(n),!0).forEach(function(r){kE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $ne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lq(r.key),r)}}function Wne(t,e,n){return e&&a5(t.prototype,e),n&&a5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kne(t,e,n){return e=g1(e),Xne(t,oq()?Reflect.construct(e,n||[],g1(t).constructor):e.apply(t,n))}function Xne(t,e){if(e&&(Gg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yne(t)}function Yne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oq=function(){return!!t})()}function g1(t){return g1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},g1(t)}function Jne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kP(t,e)}function kP(t,e){return kP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},kP(t,e)}function kE(t,e,n){return e=lq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lq(t){var e=Zne(t,"string");return Gg(e)=="symbol"?e:e+""}function Zne(t,e){if(Gg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Qne(t,e){if(t==null)return{};var n=ere(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ere(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function tre(t){return t.value}function nre(t,e){if(ue.isValidElement(t))return ue.cloneElement(t,e);if(typeof t=="function")return ue.createElement(t,e);e.ref;var n=Qne(e,qne);return ue.createElement(FO,n)}var s5=1,tp=(function(t){function e(){var n;$ne(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Kne(this,e,[].concat(i)),kE(n,"lastBoundingBox",{width:-1,height:-1}),n}return Jne(e,t),Wne(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>s5||Math.abs(i.height-this.lastBoundingBox.height)>s5)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Tu({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,s=i.align,o=i.verticalAlign,c=i.margin,u=i.chartWidth,h=i.chartHeight,m,v;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&a==="vertical"){var x=this.getBBoxSnapshot();m={left:((u||0)-x.width)/2}}else m=s==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var _=this.getBBoxSnapshot();v={top:((h||0)-_.height)/2}}else v=o==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Tu(Tu({},m),v)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,s=i.width,o=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,h=i.payload,m=Tu(Tu({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(c)),c);return ue.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(x){r.wrapperNode=x}},nre(a,Tu(Tu({},this.props),{},{payload:sq(h,u,tre)})))}}],[{key:"getWithHeight",value:function(r,i){var a=Tu(Tu({},this.defaultProps),r.props),s=a.layout;return s==="vertical"&&dt(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])})(J.PureComponent);kE(tp,"displayName","Legend");kE(tp,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var EC,o5;function rre(){if(o5)return EC;o5=1;var t=Mb(),e=HO(),n=qs(),r=t?t.isConcatSpreadable:void 0;function i(a){return n(a)||e(a)||!!(r&&a&&a[r])}return EC=i,EC}var AC,l5;function cq(){if(l5)return AC;l5=1;var t=JG(),e=rre();function n(r,i,a,s,o){var c=-1,u=r.length;for(a||(a=e),o||(o=[]);++c<u;){var h=r[c];i>0&&a(h)?i>1?n(h,i-1,a,s,o):t(o,h):s||(o[o.length]=h)}return o}return AC=n,AC}var kC,c5;function ire(){if(c5)return kC;c5=1;function t(e){return function(n,r,i){for(var a=-1,s=Object(n),o=i(n),c=o.length;c--;){var u=o[e?c:++a];if(r(s[u],u,s)===!1)break}return n}}return kC=t,kC}var MC,u5;function are(){if(u5)return MC;u5=1;var t=ire(),e=t();return MC=e,MC}var NC,d5;function uq(){if(d5)return NC;d5=1;var t=are(),e=AE();function n(r,i){return r&&t(r,i,e)}return NC=n,NC}var CC,f5;function sre(){if(f5)return CC;f5=1;var t=Rb();function e(n,r){return function(i,a){if(i==null)return i;if(!t(i))return n(i,a);for(var s=i.length,o=r?s:-1,c=Object(i);(r?o--:++o<s)&&a(c[o],o,c)!==!1;);return i}}return CC=e,CC}var RC,h5;function WO(){if(h5)return RC;h5=1;var t=uq(),e=sre(),n=e(t);return RC=n,RC}var IC,p5;function dq(){if(p5)return IC;p5=1;var t=WO(),e=Rb();function n(r,i){var a=-1,s=e(r)?Array(r.length):[];return t(r,function(o,c,u){s[++a]=i(o,c,u)}),s}return IC=n,IC}var PC,m5;function ore(){if(m5)return PC;m5=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return PC=t,PC}var OC,g5;function lre(){if(g5)return OC;g5=1;var t=Sv();function e(n,r){if(n!==r){var i=n!==void 0,a=n===null,s=n===n,o=t(n),c=r!==void 0,u=r===null,h=r===r,m=t(r);if(!u&&!m&&!o&&n>r||o&&c&&h&&!u&&!m||a&&c&&h||!i&&h||!s)return 1;if(!a&&!o&&!m&&n<r||m&&i&&s&&!a&&!o||u&&i&&s||!c&&s||!h)return-1}return 0}return OC=e,OC}var jC,v5;function cre(){if(v5)return jC;v5=1;var t=lre();function e(n,r,i){for(var a=-1,s=n.criteria,o=r.criteria,c=s.length,u=i.length;++a<c;){var h=t(s[a],o[a]);if(h){if(a>=u)return h;var m=i[a];return h*(m=="desc"?-1:1)}}return n.index-r.index}return jC=e,jC}var DC,y5;function ure(){if(y5)return DC;y5=1;var t=PO(),e=OO(),n=Vc(),r=dq(),i=ore(),a=QG(),s=cre(),o=Ev(),c=qs();function u(h,m,v){m.length?m=t(m,function(T){return c(T)?function(w){return e(w,T.length===1?T[0]:T)}:T}):m=[o];var x=-1;m=t(m,a(n));var _=r(h,function(T,w,E){var N=t(m,function(C){return C(T)});return{criteria:N,index:++x,value:T}});return i(_,function(T,w){return s(T,w,v)})}return DC=u,DC}var LC,x5;function dre(){if(x5)return LC;x5=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return LC=t,LC}var UC,b5;function fre(){if(b5)return UC;b5=1;var t=dre(),e=Math.max;function n(r,i,a){return i=e(i===void 0?r.length-1:i,0),function(){for(var s=arguments,o=-1,c=e(s.length-i,0),u=Array(c);++o<c;)u[o]=s[i+o];o=-1;for(var h=Array(i+1);++o<i;)h[o]=s[o];return h[i]=a(u),t(r,this,h)}}return UC=n,UC}var zC,_5;function hre(){if(_5)return zC;_5=1;function t(e){return function(){return e}}return zC=t,zC}var BC,w5;function fq(){if(w5)return BC;w5=1;var t=_p(),e=(function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}})();return BC=e,BC}var FC,S5;function pre(){if(S5)return FC;S5=1;var t=hre(),e=fq(),n=Ev(),r=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:n;return FC=r,FC}var VC,T5;function mre(){if(T5)return VC;T5=1;var t=800,e=16,n=Date.now;function r(i){var a=0,s=0;return function(){var o=n(),c=e-(o-s);if(s=o,c>0){if(++a>=t)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return VC=r,VC}var HC,E5;function gre(){if(E5)return HC;E5=1;var t=pre(),e=mre(),n=e(t);return HC=n,HC}var GC,A5;function vre(){if(A5)return GC;A5=1;var t=Ev(),e=fre(),n=gre();function r(i,a){return n(e(i,a,t),i+"")}return GC=r,GC}var qC,k5;function ME(){if(k5)return qC;k5=1;var t=CO(),e=Rb(),n=GO(),r=Tf();function i(a,s,o){if(!r(o))return!1;var c=typeof s;return(c=="number"?e(o)&&n(s,o.length):c=="string"&&s in o)?t(o[s],a):!1}return qC=i,qC}var $C,M5;function yre(){if(M5)return $C;M5=1;var t=cq(),e=ure(),n=vre(),r=ME(),i=n(function(a,s){if(a==null)return[];var o=s.length;return o>1&&r(a,s[0],s[1])?s=[]:o>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),e(a,t(s,1),[])});return $C=i,$C}var xre=yre();const KO=Zn(xre);function kx(t){"@babel/helpers - typeof";return kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kx(t)}function MP(){return MP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MP.apply(this,arguments)}function bre(t,e){return Tre(t)||Sre(t,e)||wre(t,e)||_re()}function _re(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wre(t,e){if(t){if(typeof t=="string")return N5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N5(t,e)}}function N5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Sre(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Tre(t){if(Array.isArray(t))return t}function C5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function WC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C5(Object(n),!0).forEach(function(r){Ere(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ere(t,e,n){return e=Are(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Are(t){var e=kre(t,"string");return kx(e)=="symbol"?e:e+""}function kre(t,e){if(kx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mre(t){return Array.isArray(t)&&Hi(t[0])&&Hi(t[1])?t.join(" ~ "):t}var Nre=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,a=i===void 0?{}:i,s=e.itemStyle,o=s===void 0?{}:s,c=e.labelStyle,u=c===void 0?{}:c,h=e.payload,m=e.formatter,v=e.itemSorter,x=e.wrapperClassName,_=e.labelClassName,T=e.label,w=e.labelFormatter,E=e.accessibilityLayer,N=E===void 0?!1:E,C=function(){if(h&&h.length){var G={padding:0,margin:0},$=(v?KO(h,v):h).map(function(ee,te){if(ee.type==="none")return null;var K=WC({display:"block",paddingTop:4,paddingBottom:4,color:ee.color||"#000"},o),X=ee.formatter||m||Mre,re=ee.value,ce=ee.name,de=re,W=ce;if(X&&de!=null&&W!=null){var ae=X(re,ce,ee,te,h);if(Array.isArray(ae)){var me=bre(ae,2);de=me[0],W=me[1]}else de=ae}return ue.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(te),style:K},Hi(W)?ue.createElement("span",{className:"recharts-tooltip-item-name"},W):null,Hi(W)?ue.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,ue.createElement("span",{className:"recharts-tooltip-item-value"},de),ue.createElement("span",{className:"recharts-tooltip-item-unit"},ee.unit||""))});return ue.createElement("ul",{className:"recharts-tooltip-item-list",style:G},$)}return null},P=WC({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),I=WC({margin:0},u),j=!Pn(T),O=j?T:"",F=En("recharts-default-tooltip",x),L=En("recharts-tooltip-label",_);j&&w&&h!==void 0&&h!==null&&(O=w(T,h));var z=N?{role:"status","aria-live":"assertive"}:{};return ue.createElement("div",MP({className:F,style:P},z),ue.createElement("p",{className:L,style:I},ue.isValidElement(O)?O:"".concat(O)),C())};function Mx(t){"@babel/helpers - typeof";return Mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mx(t)}function Dw(t,e,n){return e=Cre(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cre(t){var e=Rre(t,"string");return Mx(e)=="symbol"?e:e+""}function Rre(t,e){if(Mx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hy="recharts-tooltip-wrapper",Ire={visibility:"hidden"};function Pre(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return En(hy,Dw(Dw(Dw(Dw({},"".concat(hy,"-right"),dt(n)&&e&&dt(e.x)&&n>=e.x),"".concat(hy,"-left"),dt(n)&&e&&dt(e.x)&&n<e.x),"".concat(hy,"-bottom"),dt(r)&&e&&dt(e.y)&&r>=e.y),"".concat(hy,"-top"),dt(r)&&e&&dt(e.y)&&r<e.y))}function R5(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,a=t.position,s=t.reverseDirection,o=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(a&&dt(a[r]))return a[r];var h=n[r]-o-i,m=n[r]+i;if(e[r])return s[r]?h:m;if(s[r]){var v=h,x=c[r];return v<x?Math.max(m,c[r]):Math.max(h,c[r])}var _=m+o,T=c[r]+u;return _>T?Math.max(h,c[r]):Math.max(m,c[r])}function Ore(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function jre(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,a=t.reverseDirection,s=t.tooltipBox,o=t.useTranslate3d,c=t.viewBox,u,h,m;return s.height>0&&s.width>0&&n?(h=R5({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),m=R5({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=Ore({translateX:h,translateY:m,useTranslate3d:o})):u=Ire,{cssProperties:u,cssClasses:Pre({translateX:h,translateY:m,coordinate:n})}}function qg(t){"@babel/helpers - typeof";return qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qg(t)}function I5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function P5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I5(Object(n),!0).forEach(function(r){CP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lre(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pq(r.key),r)}}function Ure(t,e,n){return e&&Lre(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function zre(t,e,n){return e=v1(e),Bre(t,hq()?Reflect.construct(e,n||[],v1(t).constructor):e.apply(t,n))}function Bre(t,e){if(e&&(qg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fre(t)}function Fre(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hq=function(){return!!t})()}function v1(t){return v1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},v1(t)}function Vre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NP(t,e)}function NP(t,e){return NP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},NP(t,e)}function CP(t,e,n){return e=pq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pq(t){var e=Hre(t,"string");return qg(e)=="symbol"?e:e+""}function Hre(t,e){if(qg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var O5=1,Gre=(function(t){function e(){var n;Dre(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=zre(this,e,[].concat(i)),CP(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),CP(n,"handleKeyDown",function(s){if(s.key==="Escape"){var o,c,u,h;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&o!==void 0?o:0,y:(u=(h=n.props.coordinate)===null||h===void 0?void 0:h.y)!==null&&u!==void 0?u:0}})}}),n}return Vre(e,t),Ure(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>O5||Math.abs(r.height-this.state.lastBoundingBox.height)>O5)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,c=i.animationEasing,u=i.children,h=i.coordinate,m=i.hasPayload,v=i.isAnimationActive,x=i.offset,_=i.position,T=i.reverseDirection,w=i.useTranslate3d,E=i.viewBox,N=i.wrapperStyle,C=jre({allowEscapeViewBox:s,coordinate:h,offsetTopLeft:x,position:_,reverseDirection:T,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:E}),P=C.cssClasses,I=C.cssProperties,j=P5(P5({transition:v&&a?"transform ".concat(o,"ms ").concat(c):void 0},I),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&m?"visible":"hidden",position:"absolute",top:0,left:0},N);return ue.createElement("div",{tabIndex:-1,className:P,style:j,ref:function(F){r.wrapperNode=F}},u)}}])})(J.PureComponent),qre=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Av={isSsr:qre()};function $g(t){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$g(t)}function j5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function D5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j5(Object(n),!0).forEach(function(r){XO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $re(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wre(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gq(r.key),r)}}function Kre(t,e,n){return e&&Wre(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xre(t,e,n){return e=y1(e),Yre(t,mq()?Reflect.construct(e,n||[],y1(t).constructor):e.apply(t,n))}function Yre(t,e){if(e&&($g(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jre(t)}function Jre(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mq=function(){return!!t})()}function y1(t){return y1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},y1(t)}function Zre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RP(t,e)}function RP(t,e){return RP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},RP(t,e)}function XO(t,e,n){return e=gq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gq(t){var e=Qre(t,"string");return $g(e)=="symbol"?e:e+""}function Qre(t,e){if($g(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($g(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function eie(t){return t.dataKey}function tie(t,e){return ue.isValidElement(t)?ue.cloneElement(t,e):typeof t=="function"?ue.createElement(t,e):ue.createElement(Nre,e)}var kc=(function(t){function e(){return $re(this,e),Xre(this,e,arguments)}return Zre(e,t),Kre(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,c=i.animationEasing,u=i.content,h=i.coordinate,m=i.filterNull,v=i.isAnimationActive,x=i.offset,_=i.payload,T=i.payloadUniqBy,w=i.position,E=i.reverseDirection,N=i.useTranslate3d,C=i.viewBox,P=i.wrapperStyle,I=_??[];m&&I.length&&(I=sq(_.filter(function(O){return O.value!=null&&(O.hide!==!0||r.props.includeHidden)}),T,eie));var j=I.length>0;return ue.createElement(Gre,{allowEscapeViewBox:s,animationDuration:o,animationEasing:c,isAnimationActive:v,active:a,coordinate:h,hasPayload:j,offset:x,position:w,reverseDirection:E,useTranslate3d:N,viewBox:C,wrapperStyle:P},tie(u,D5(D5({},this.props),{},{payload:I})))}}])})(J.PureComponent);XO(kc,"displayName","Tooltip");XO(kc,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Av.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var KC,L5;function nie(){if(L5)return KC;L5=1;var t=Fc(),e=function(){return t.Date.now()};return KC=e,KC}var XC,U5;function rie(){if(U5)return XC;U5=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return XC=e,XC}var YC,z5;function iie(){if(z5)return YC;z5=1;var t=rie(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return YC=n,YC}var JC,B5;function vq(){if(B5)return JC;B5=1;var t=iie(),e=Tf(),n=Sv(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function c(u){if(typeof u=="number")return u;if(n(u))return r;if(e(u)){var h=typeof u.valueOf=="function"?u.valueOf():u;u=e(h)?h+"":h}if(typeof u!="string")return u===0?u:+u;u=t(u);var m=a.test(u);return m||s.test(u)?o(u.slice(2),m?2:8):i.test(u)?r:+u}return JC=c,JC}var ZC,F5;function aie(){if(F5)return ZC;F5=1;var t=Tf(),e=nie(),n=vq(),r="Expected a function",i=Math.max,a=Math.min;function s(o,c,u){var h,m,v,x,_,T,w=0,E=!1,N=!1,C=!0;if(typeof o!="function")throw new TypeError(r);c=n(c)||0,t(u)&&(E=!!u.leading,N="maxWait"in u,v=N?i(n(u.maxWait)||0,c):v,C="trailing"in u?!!u.trailing:C);function P($){var ee=h,te=m;return h=m=void 0,w=$,x=o.apply(te,ee),x}function I($){return w=$,_=setTimeout(F,c),E?P($):x}function j($){var ee=$-T,te=$-w,K=c-ee;return N?a(K,v-te):K}function O($){var ee=$-T,te=$-w;return T===void 0||ee>=c||ee<0||N&&te>=v}function F(){var $=e();if(O($))return L($);_=setTimeout(F,j($))}function L($){return _=void 0,C&&h?P($):(h=m=void 0,x)}function z(){_!==void 0&&clearTimeout(_),w=0,h=T=m=_=void 0}function V(){return _===void 0?x:L(e())}function G(){var $=e(),ee=O($);if(h=arguments,m=this,T=$,ee){if(_===void 0)return I(T);if(N)return clearTimeout(_),_=setTimeout(F,c),P(T)}return _===void 0&&(_=setTimeout(F,c)),x}return G.cancel=z,G.flush=V,G}return ZC=s,ZC}var QC,V5;function sie(){if(V5)return QC;V5=1;var t=aie(),e=Tf(),n="Expected a function";function r(i,a,s){var o=!0,c=!0;if(typeof i!="function")throw new TypeError(n);return e(s)&&(o="leading"in s?!!s.leading:o,c="trailing"in s?!!s.trailing:c),t(i,a,{leading:o,maxWait:a,trailing:c})}return QC=r,QC}var oie=sie();const yq=Zn(oie);function Nx(t){"@babel/helpers - typeof";return Nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nx(t)}function H5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H5(Object(n),!0).forEach(function(r){lie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lie(t,e,n){return e=cie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cie(t){var e=uie(t,"string");return Nx(e)=="symbol"?e:e+""}function uie(t,e){if(Nx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Nx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function die(t,e){return mie(t)||pie(t,e)||hie(t,e)||fie()}function fie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hie(t,e){if(t){if(typeof t=="string")return G5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G5(t,e)}}function G5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function mie(t){if(Array.isArray(t))return t}var q5=J.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=t.width,s=a===void 0?"100%":a,o=t.height,c=o===void 0?"100%":o,u=t.minWidth,h=u===void 0?0:u,m=t.minHeight,v=t.maxHeight,x=t.children,_=t.debounce,T=_===void 0?0:_,w=t.id,E=t.className,N=t.onResize,C=t.style,P=C===void 0?{}:C,I=J.useRef(null),j=J.useRef();j.current=N,J.useImperativeHandle(e,function(){return Object.defineProperty(I.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),I.current},configurable:!0})});var O=J.useState({containerWidth:i.width,containerHeight:i.height}),F=die(O,2),L=F[0],z=F[1],V=J.useCallback(function($,ee){z(function(te){var K=Math.round($),X=Math.round(ee);return te.containerWidth===K&&te.containerHeight===X?te:{containerWidth:K,containerHeight:X}})},[]);J.useEffect(function(){var $=function(ce){var de,W=ce[0].contentRect,ae=W.width,me=W.height;V(ae,me),(de=j.current)===null||de===void 0||de.call(j,ae,me)};T>0&&($=yq($,T,{trailing:!0,leading:!1}));var ee=new ResizeObserver($),te=I.current.getBoundingClientRect(),K=te.width,X=te.height;return V(K,X),ee.observe(I.current),function(){ee.disconnect()}},[V,T]);var G=J.useMemo(function(){var $=L.containerWidth,ee=L.containerHeight;if($<0||ee<0)return null;Ul(Wh(s)||Wh(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,c),Ul(!n||n>0,"The aspect(%s) must be greater than zero.",n);var te=Wh(s)?$:s,K=Wh(c)?ee:c;n&&n>0&&(te?K=te/n:K&&(te=K*n),v&&K>v&&(K=v)),Ul(te>0||K>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,te,K,s,c,h,m,n);var X=!Array.isArray(x)&&Fu(x.type).endsWith("Chart");return ue.Children.map(x,function(re){return ue.isValidElement(re)?J.cloneElement(re,Lw({width:te,height:K},X?{style:Lw({height:"100%",width:"100%",maxHeight:K,maxWidth:te},re.props.style)}:{})):re})},[n,x,c,v,m,h,L,s]);return ue.createElement("div",{id:w?"".concat(w):void 0,className:En("recharts-responsive-container",E),style:Lw(Lw({},P),{},{width:s,height:c,minWidth:h,minHeight:m,maxHeight:v}),ref:I},G)}),Cx=function(e){return null};Cx.displayName="Cell";function Rx(t){"@babel/helpers - typeof";return Rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rx(t)}function $5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$5(Object(n),!0).forEach(function(r){gie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gie(t,e,n){return e=vie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vie(t){var e=yie(t,"string");return Rx(e)=="symbol"?e:e+""}function yie(t,e){if(Rx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hm={widthCache:{},cacheCount:0},xie=2e3,bie={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},W5="recharts_measurement_span";function _ie(t){var e=IP({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Jy=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Av.isSsr)return{width:0,height:0};var r=_ie(n),i=JSON.stringify({text:e,copyStyle:r});if(Hm.widthCache[i])return Hm.widthCache[i];try{var a=document.getElementById(W5);a||(a=document.createElement("span"),a.setAttribute("id",W5),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=IP(IP({},bie),r);Object.assign(a.style,s),a.textContent="".concat(e);var o=a.getBoundingClientRect(),c={width:o.width,height:o.height};return Hm.widthCache[i]=c,++Hm.cacheCount>xie&&(Hm.cacheCount=0,Hm.widthCache={}),c}catch{return{width:0,height:0}}},wie=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Ix(t){"@babel/helpers - typeof";return Ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ix(t)}function x1(t,e){return Aie(t)||Eie(t,e)||Tie(t,e)||Sie()}function Sie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tie(t,e){if(t){if(typeof t=="string")return K5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K5(t,e)}}function K5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Eie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Aie(t){if(Array.isArray(t))return t}function kie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nie(r.key),r)}}function Mie(t,e,n){return e&&X5(t.prototype,e),n&&X5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Nie(t){var e=Cie(t,"string");return Ix(e)=="symbol"?e:e+""}function Cie(t,e){if(Ix(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ix(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Y5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,J5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Rie=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Iie=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,xq={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Pie=Object.keys(xq),Sg="NaN";function Oie(t,e){return t*xq[e]}var Uw=(function(){function t(e,n){kie(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!Rie.test(n)&&(this.num=NaN,this.unit=""),Pie.includes(n)&&(this.num=Oie(e,n),this.unit="px")}return Mie(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=Iie.exec(n))!==null&&r!==void 0?r:[],a=x1(i,3),s=a[1],o=a[2];return new t(parseFloat(s),o??"")}}])})();function bq(t){if(t.includes(Sg))return Sg;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=Y5.exec(e))!==null&&n!==void 0?n:[],i=x1(r,4),a=i[1],s=i[2],o=i[3],c=Uw.parse(a??""),u=Uw.parse(o??""),h=s==="*"?c.multiply(u):c.divide(u);if(h.isNaN())return Sg;e=e.replace(Y5,h.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var m,v=(m=J5.exec(e))!==null&&m!==void 0?m:[],x=x1(v,4),_=x[1],T=x[2],w=x[3],E=Uw.parse(_??""),N=Uw.parse(w??""),C=T==="+"?E.add(N):E.subtract(N);if(C.isNaN())return Sg;e=e.replace(J5,C.toString())}return e}var Z5=/\(([^()]*)\)/;function jie(t){for(var e=t;e.includes("(");){var n=Z5.exec(e),r=x1(n,2),i=r[1];e=e.replace(Z5,bq(i))}return e}function Die(t){var e=t.replace(/\s+/g,"");return e=jie(e),e=bq(e),e}function Lie(t){try{return Die(t)}catch{return Sg}}function eR(t){var e=Lie(t.slice(5,-1));return e===Sg?"":e}var Uie=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],zie=["dx","dy","angle","className","breakAll"];function PP(){return PP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PP.apply(this,arguments)}function Q5(t,e){if(t==null)return{};var n=Bie(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Bie(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ez(t,e){return Gie(t)||Hie(t,e)||Vie(t,e)||Fie()}function Fie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vie(t,e){if(t){if(typeof t=="string")return tz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tz(t,e)}}function tz(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Gie(t){if(Array.isArray(t))return t}var _q=/[ \f\n\r\t\v\u2028\u2029]+/,wq=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var a=[];Pn(n)||(r?a=n.toString().split(""):a=n.toString().split(_q));var s=a.map(function(c){return{word:c,width:Jy(c,i).width}}),o=r?0:Jy("",i).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},qie=function(e,n,r,i,a){var s=e.maxLines,o=e.children,c=e.style,u=e.breakAll,h=dt(s),m=o,v=function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return te.reduce(function(K,X){var re=X.word,ce=X.width,de=K[K.length-1];if(de&&(i==null||a||de.width+ce+r<Number(i)))de.words.push(re),de.width+=ce+r;else{var W={words:[re],width:ce};K.push(W)}return K},[])},x=v(n),_=function(te){return te.reduce(function(K,X){return K.width>X.width?K:X})};if(!h)return x;for(var T="",w=function(te){var K=m.slice(0,te),X=wq({breakAll:u,style:c,children:K+T}).wordsWithComputedWidth,re=v(X),ce=re.length>s||_(re).width>Number(i);return[ce,re]},E=0,N=m.length-1,C=0,P;E<=N&&C<=m.length-1;){var I=Math.floor((E+N)/2),j=I-1,O=w(j),F=ez(O,2),L=F[0],z=F[1],V=w(I),G=ez(V,1),$=G[0];if(!L&&!$&&(E=I+1),L&&$&&(N=I-1),!L&&$){P=z;break}C++}return P||x},nz=function(e){var n=Pn(e)?[]:e.toString().split(_q);return[{words:n}]},$ie=function(e){var n=e.width,r=e.scaleToFit,i=e.children,a=e.style,s=e.breakAll,o=e.maxLines;if((n||r)&&!Av.isSsr){var c,u,h=wq({breakAll:s,children:i,style:a});if(h){var m=h.wordsWithComputedWidth,v=h.spaceWidth;c=m,u=v}else return nz(i);return qie({breakAll:s,children:i,maxLines:o,style:a},c,u,n,r)}return nz(i)},rz="#808080",dp=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.lineHeight,o=s===void 0?"1em":s,c=e.capHeight,u=c===void 0?"0.71em":c,h=e.scaleToFit,m=h===void 0?!1:h,v=e.textAnchor,x=v===void 0?"start":v,_=e.verticalAnchor,T=_===void 0?"end":_,w=e.fill,E=w===void 0?rz:w,N=Q5(e,Uie),C=J.useMemo(function(){return $ie({breakAll:N.breakAll,children:N.children,maxLines:N.maxLines,scaleToFit:m,style:N.style,width:N.width})},[N.breakAll,N.children,N.maxLines,m,N.style,N.width]),P=N.dx,I=N.dy,j=N.angle,O=N.className,F=N.breakAll,L=Q5(N,zie);if(!Hi(r)||!Hi(a))return null;var z=r+(dt(P)?P:0),V=a+(dt(I)?I:0),G;switch(T){case"start":G=eR("calc(".concat(u,")"));break;case"middle":G=eR("calc(".concat((C.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:G=eR("calc(".concat(C.length-1," * -").concat(o,")"));break}var $=[];if(m){var ee=C[0].width,te=N.width;$.push("scale(".concat((dt(te)?te/ee:1)/ee,")"))}return j&&$.push("rotate(".concat(j,", ").concat(z,", ").concat(V,")")),$.length&&(L.transform=$.join(" ")),ue.createElement("text",PP({},rn(L,!0),{x:z,y:V,className:En("recharts-text",O),textAnchor:x,fill:E.includes("url")?rz:E}),C.map(function(K,X){var re=K.words.join(F?"":" ");return ue.createElement("tspan",{x:z,dy:X===0?G:o,key:"".concat(re,"-").concat(X)},re)}))};function yf(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Wie(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function YO(t){let e,n,r;t.length!==2?(e=yf,n=(o,c)=>yf(t(o),c),r=(o,c)=>t(o)-c):(e=t===yf||t===Wie?t:Kie,n=t,r=t);function i(o,c,u=0,h=o.length){if(u<h){if(e(c,c)!==0)return h;do{const m=u+h>>>1;n(o[m],c)<0?u=m+1:h=m}while(u<h)}return u}function a(o,c,u=0,h=o.length){if(u<h){if(e(c,c)!==0)return h;do{const m=u+h>>>1;n(o[m],c)<=0?u=m+1:h=m}while(u<h)}return u}function s(o,c,u=0,h=o.length){const m=i(o,c,u,h-1);return m>u&&r(o[m-1],c)>-r(o[m],c)?m-1:m}return{left:i,center:s,right:a}}function Kie(){return 0}function Sq(t){return t===null?NaN:+t}function*Xie(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Yie=YO(yf),Ib=Yie.right;YO(Sq).center;class iz extends Map{constructor(e,n=Qie){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(az(this,e))}has(e){return super.has(az(this,e))}set(e,n){return super.set(Jie(this,e),n)}delete(e){return super.delete(Zie(this,e))}}function az({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Jie({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Zie({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Qie(t){return t!==null&&typeof t=="object"?t.valueOf():t}function eae(t=yf){if(t===yf)return Tq;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Tq(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const tae=Math.sqrt(50),nae=Math.sqrt(10),rae=Math.sqrt(2);function b1(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=tae?10:a>=nae?5:a>=rae?2:1;let o,c,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),c=Math.round(e*u),o/u<t&&++o,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),c=Math.round(e/u),o*u<t&&++o,c*u>e&&--c),c<o&&.5<=n&&n<2?b1(t,e,n*2):[o,c,u]}function OP(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?b1(e,t,n):b1(t,e,n);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)c[u]=(a-u)/-s;else for(let u=0;u<o;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(i+u)/-s;else for(let u=0;u<o;++u)c[u]=(i+u)*s;return c}function jP(t,e,n){return e=+e,t=+t,n=+n,b1(t,e,n)[2]}function DP(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?jP(e,t,n):jP(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function sz(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function oz(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function Eq(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?Tq:eae(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,h=Math.log(c),m=.5*Math.exp(2*h/3),v=.5*Math.sqrt(h*m*(c-m)/c)*(u-c/2<0?-1:1),x=Math.max(n,Math.floor(e-u*m/c+v)),_=Math.min(r,Math.floor(e+(c-u)*m/c+v));Eq(t,e,x,_,i)}const a=t[e];let s=n,o=r;for(py(t,n,e),i(t[r],a)>0&&py(t,n,r);s<o;){for(py(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?py(t,n,o):(++o,py(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function py(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function iae(t,e,n){if(t=Float64Array.from(Xie(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return oz(t);if(e>=1)return sz(t);var r,i=(r-1)*e,a=Math.floor(i),s=sz(Eq(t,a).subarray(0,a+1)),o=oz(t.subarray(a+1));return s+(o-s)*(i-a)}}function aae(t,e,n=Sq){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function sae(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function nl(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function td(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const LP=Symbol("implicit");function JO(){var t=new iz,e=[],n=[],r=LP;function i(a){let s=t.get(a);if(s===void 0){if(r!==LP)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new iz;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return JO(e,n).unknown(r)},nl.apply(i,arguments),i}function Px(){var t=JO().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,c=0,u=0,h=.5;delete t.unknown;function m(){var v=e().length,x=i<r,_=x?i:r,T=x?r:i;a=(T-_)/Math.max(1,v-c+u*2),o&&(a=Math.floor(a)),_+=(T-_-a*(v-c))*h,s=a*(1-c),o&&(_=Math.round(_),s=Math.round(s));var w=sae(v).map(function(E){return _+a*E});return n(x?w.reverse():w)}return t.domain=function(v){return arguments.length?(e(v),m()):e()},t.range=function(v){return arguments.length?([r,i]=v,r=+r,i=+i,m()):[r,i]},t.rangeRound=function(v){return[r,i]=v,r=+r,i=+i,o=!0,m()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(v){return arguments.length?(o=!!v,m()):o},t.padding=function(v){return arguments.length?(c=Math.min(1,u=+v),m()):c},t.paddingInner=function(v){return arguments.length?(c=Math.min(1,v),m()):c},t.paddingOuter=function(v){return arguments.length?(u=+v,m()):u},t.align=function(v){return arguments.length?(h=Math.max(0,Math.min(1,v)),m()):h},t.copy=function(){return Px(e(),[r,i]).round(o).paddingInner(c).paddingOuter(u).align(h)},nl.apply(m(),arguments)}function Aq(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Aq(e())},t}function Zy(){return Aq(Px.apply(null,arguments).paddingInner(1))}function ZO(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function kq(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Pb(){}var Ox=.7,_1=1/Ox,jg="\\s*([+-]?\\d+)\\s*",jx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ic="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oae=/^#([0-9a-f]{3,8})$/,lae=new RegExp(`^rgb\\(${jg},${jg},${jg}\\)$`),cae=new RegExp(`^rgb\\(${Ic},${Ic},${Ic}\\)$`),uae=new RegExp(`^rgba\\(${jg},${jg},${jg},${jx}\\)$`),dae=new RegExp(`^rgba\\(${Ic},${Ic},${Ic},${jx}\\)$`),fae=new RegExp(`^hsl\\(${jx},${Ic},${Ic}\\)$`),hae=new RegExp(`^hsla\\(${jx},${Ic},${Ic},${jx}\\)$`),lz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ZO(Pb,Dx,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:cz,formatHex:cz,formatHex8:pae,formatHsl:mae,formatRgb:uz,toString:uz});function cz(){return this.rgb().formatHex()}function pae(){return this.rgb().formatHex8()}function mae(){return Mq(this).formatHsl()}function uz(){return this.rgb().formatRgb()}function Dx(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=oae.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?dz(e):n===3?new Bs(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?zw(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?zw(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=lae.exec(t))?new Bs(e[1],e[2],e[3],1):(e=cae.exec(t))?new Bs(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=uae.exec(t))?zw(e[1],e[2],e[3],e[4]):(e=dae.exec(t))?zw(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=fae.exec(t))?pz(e[1],e[2]/100,e[3]/100,1):(e=hae.exec(t))?pz(e[1],e[2]/100,e[3]/100,e[4]):lz.hasOwnProperty(t)?dz(lz[t]):t==="transparent"?new Bs(NaN,NaN,NaN,0):null}function dz(t){return new Bs(t>>16&255,t>>8&255,t&255,1)}function zw(t,e,n,r){return r<=0&&(t=e=n=NaN),new Bs(t,e,n,r)}function gae(t){return t instanceof Pb||(t=Dx(t)),t?(t=t.rgb(),new Bs(t.r,t.g,t.b,t.opacity)):new Bs}function UP(t,e,n,r){return arguments.length===1?gae(t):new Bs(t,e,n,r??1)}function Bs(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}ZO(Bs,UP,kq(Pb,{brighter(t){return t=t==null?_1:Math.pow(_1,t),new Bs(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ox:Math.pow(Ox,t),new Bs(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Bs(np(this.r),np(this.g),np(this.b),w1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fz,formatHex:fz,formatHex8:vae,formatRgb:hz,toString:hz}));function fz(){return`#${Kh(this.r)}${Kh(this.g)}${Kh(this.b)}`}function vae(){return`#${Kh(this.r)}${Kh(this.g)}${Kh(this.b)}${Kh((isNaN(this.opacity)?1:this.opacity)*255)}`}function hz(){const t=w1(this.opacity);return`${t===1?"rgb(":"rgba("}${np(this.r)}, ${np(this.g)}, ${np(this.b)}${t===1?")":`, ${t})`}`}function w1(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function np(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Kh(t){return t=np(t),(t<16?"0":"")+t.toString(16)}function pz(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new jl(t,e,n,r)}function Mq(t){if(t instanceof jl)return new jl(t.h,t.s,t.l,t.opacity);if(t instanceof Pb||(t=Dx(t)),!t)return new jl;if(t instanceof jl)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new jl(s,o,c,t.opacity)}function yae(t,e,n,r){return arguments.length===1?Mq(t):new jl(t,e,n,r??1)}function jl(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ZO(jl,yae,kq(Pb,{brighter(t){return t=t==null?_1:Math.pow(_1,t),new jl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ox:Math.pow(Ox,t),new jl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Bs(tR(t>=240?t-240:t+120,i,r),tR(t,i,r),tR(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new jl(mz(this.h),Bw(this.s),Bw(this.l),w1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=w1(this.opacity);return`${t===1?"hsl(":"hsla("}${mz(this.h)}, ${Bw(this.s)*100}%, ${Bw(this.l)*100}%${t===1?")":`, ${t})`}`}}));function mz(t){return t=(t||0)%360,t<0?t+360:t}function Bw(t){return Math.max(0,Math.min(1,t||0))}function tR(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const QO=t=>()=>t;function xae(t,e){return function(n){return t+n*e}}function bae(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function _ae(t){return(t=+t)==1?Nq:function(e,n){return n-e?bae(e,n,t):QO(isNaN(e)?n:e)}}function Nq(t,e){var n=e-t;return n?xae(t,n):QO(isNaN(t)?e:t)}const gz=(function t(e){var n=_ae(e);function r(i,a){var s=n((i=UP(i)).r,(a=UP(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),u=Nq(i.opacity,a.opacity);return function(h){return i.r=s(h),i.g=o(h),i.b=c(h),i.opacity=u(h),i+""}}return r.gamma=t,r})(1);function wae(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Sae(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Tae(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=kv(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function Eae(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function S1(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Aae(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=kv(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var zP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nR=new RegExp(zP.source,"g");function kae(t){return function(){return t}}function Mae(t){return function(e){return t(e)+""}}function Nae(t,e){var n=zP.lastIndex=nR.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(r=zP.exec(t))&&(i=nR.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:S1(r,i)})),n=nR.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?Mae(c[0].x):kae(e):(e=c.length,function(u){for(var h=0,m;h<e;++h)o[(m=c[h]).i]=m.x(u);return o.join("")})}function kv(t,e){var n=typeof e,r;return e==null||n==="boolean"?QO(e):(n==="number"?S1:n==="string"?(r=Dx(e))?(e=r,gz):Nae:e instanceof Dx?gz:e instanceof Date?Eae:Sae(e)?wae:Array.isArray(e)?Tae:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Aae:S1)(t,e)}function ej(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Cae(t,e){e===void 0&&(e=t,t=kv);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function Rae(t){return function(){return t}}function T1(t){return+t}var vz=[0,1];function hs(t){return t}function BP(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Rae(isNaN(e)?NaN:.5)}function Iae(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Pae(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=BP(i,r),a=n(s,a)):(r=BP(r,i),a=n(a,s)),function(o){return a(r(o))}}function Oae(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=BP(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var c=Ib(t,o,1,r)-1;return a[c](i[c](o))}}function Ob(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function NE(){var t=vz,e=vz,n=kv,r,i,a,s=hs,o,c,u;function h(){var v=Math.min(t.length,e.length);return s!==hs&&(s=Iae(t[0],t[v-1])),o=v>2?Oae:Pae,c=u=null,m}function m(v){return v==null||isNaN(v=+v)?a:(c||(c=o(t.map(r),e,n)))(r(s(v)))}return m.invert=function(v){return s(i((u||(u=o(e,t.map(r),S1)))(v)))},m.domain=function(v){return arguments.length?(t=Array.from(v,T1),h()):t.slice()},m.range=function(v){return arguments.length?(e=Array.from(v),h()):e.slice()},m.rangeRound=function(v){return e=Array.from(v),n=ej,h()},m.clamp=function(v){return arguments.length?(s=v?!0:hs,h()):s!==hs},m.interpolate=function(v){return arguments.length?(n=v,h()):n},m.unknown=function(v){return arguments.length?(a=v,m):a},function(v,x){return r=v,i=x,h()}}function tj(){return NE()(hs,hs)}function jae(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function E1(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Wg(t){return t=E1(Math.abs(t)),t?t[1]:NaN}function Dae(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function Lae(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Uae=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Lx(t){if(!(e=Uae.exec(t)))throw new Error("invalid format: "+t);var e;return new nj({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Lx.prototype=nj.prototype;function nj(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}nj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function zae(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var A1;function Bae(t,e){var n=E1(t,e);if(!n)return A1=void 0,t.toPrecision(e);var r=n[0],i=n[1],a=i-(A1=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+E1(t,Math.max(0,e+a-1))[0]}function yz(t,e){var n=E1(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const xz={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:jae,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>yz(t*100,e),r:yz,s:Bae,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function bz(t){return t}var _z=Array.prototype.map,wz=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Fae(t){var e=t.grouping===void 0||t.thousands===void 0?bz:Dae(_z.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?bz:Lae(_z.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(m,v){m=Lx(m);var x=m.fill,_=m.align,T=m.sign,w=m.symbol,E=m.zero,N=m.width,C=m.comma,P=m.precision,I=m.trim,j=m.type;j==="n"?(C=!0,j="g"):xz[j]||(P===void 0&&(P=12),I=!0,j="g"),(E||x==="0"&&_==="=")&&(E=!0,x="0",_="=");var O=(v&&v.prefix!==void 0?v.prefix:"")+(w==="$"?n:w==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():""),F=(w==="$"?r:/[%p]/.test(j)?s:"")+(v&&v.suffix!==void 0?v.suffix:""),L=xz[j],z=/[defgprs%]/.test(j);P=P===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function V(G){var $=O,ee=F,te,K,X;if(j==="c")ee=L(G)+ee,G="";else{G=+G;var re=G<0||1/G<0;if(G=isNaN(G)?c:L(Math.abs(G),P),I&&(G=zae(G)),re&&+G==0&&T!=="+"&&(re=!1),$=(re?T==="("?T:o:T==="-"||T==="("?"":T)+$,ee=(j==="s"&&!isNaN(G)&&A1!==void 0?wz[8+A1/3]:"")+ee+(re&&T==="("?")":""),z){for(te=-1,K=G.length;++te<K;)if(X=G.charCodeAt(te),48>X||X>57){ee=(X===46?i+G.slice(te+1):G.slice(te))+ee,G=G.slice(0,te);break}}}C&&!E&&(G=e(G,1/0));var ce=$.length+G.length+ee.length,de=ce<N?new Array(N-ce+1).join(x):"";switch(C&&E&&(G=e(de+G,de.length?N-ee.length:1/0),de=""),_){case"<":G=$+G+ee+de;break;case"=":G=$+de+G+ee;break;case"^":G=de.slice(0,ce=de.length>>1)+$+G+ee+de.slice(ce);break;default:G=de+$+G+ee;break}return a(G)}return V.toString=function(){return m+""},V}function h(m,v){var x=Math.max(-8,Math.min(8,Math.floor(Wg(v)/3)))*3,_=Math.pow(10,-x),T=u((m=Lx(m),m.type="f",m),{suffix:wz[8+x/3]});return function(w){return T(_*w)}}return{format:u,formatPrefix:h}}var Fw,rj,Cq;Vae({thousands:",",grouping:[3],currency:["$",""]});function Vae(t){return Fw=Fae(t),rj=Fw.format,Cq=Fw.formatPrefix,Fw}function Hae(t){return Math.max(0,-Wg(Math.abs(t)))}function Gae(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Wg(e)/3)))*3-Wg(Math.abs(t)))}function qae(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Wg(e)-Wg(t))+1}function Rq(t,e,n,r){var i=DP(t,e,n),a;switch(r=Lx(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Gae(i,s))&&(r.precision=a),Cq(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=qae(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Hae(i))&&(r.precision=a-(r.type==="%")*2);break}}return rj(r)}function Ef(t){var e=t.domain;return t.ticks=function(n){var r=e();return OP(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Rq(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,u,h=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);h-- >0;){if(u=jP(s,o,n),u===c)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return t},t}function k1(){var t=tj();return t.copy=function(){return Ob(t,k1())},nl.apply(t,arguments),Ef(t)}function Iq(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,T1),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Iq(t).unknown(e)},t=arguments.length?Array.from(t,T1):[0,1],Ef(n)}function Pq(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function Sz(t){return Math.log(t)}function Tz(t){return Math.exp(t)}function $ae(t){return-Math.log(-t)}function Wae(t){return-Math.exp(-t)}function Kae(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Xae(t){return t===10?Kae:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Yae(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Ez(t){return(e,n)=>-t(-e,n)}function ij(t){const e=t(Sz,Tz),n=e.domain;let r=10,i,a;function s(){return i=Yae(r),a=Xae(r),n()[0]<0?(i=Ez(i),a=Ez(a),t($ae,Wae)):t(Sz,Tz),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const c=n();let u=c[0],h=c[c.length-1];const m=h<u;m&&([u,h]=[h,u]);let v=i(u),x=i(h),_,T;const w=o==null?10:+o;let E=[];if(!(r%1)&&x-v<w){if(v=Math.floor(v),x=Math.ceil(x),u>0){for(;v<=x;++v)for(_=1;_<r;++_)if(T=v<0?_/a(-v):_*a(v),!(T<u)){if(T>h)break;E.push(T)}}else for(;v<=x;++v)for(_=r-1;_>=1;--_)if(T=v>0?_/a(-v):_*a(v),!(T<u)){if(T>h)break;E.push(T)}E.length*2<w&&(E=OP(u,h,w))}else E=OP(v,x,Math.min(x-v,w)).map(a);return m?E.reverse():E},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Lx(c)).precision==null&&(c.trim=!0),c=rj(c)),o===1/0)return c;const u=Math.max(1,r*o/e.ticks().length);return h=>{let m=h/a(Math.round(i(h)));return m*r<r-.5&&(m*=r),m<=u?c(h):""}},e.nice=()=>n(Pq(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function Oq(){const t=ij(NE()).domain([1,10]);return t.copy=()=>Ob(t,Oq()).base(t.base()),nl.apply(t,arguments),t}function Az(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function kz(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function aj(t){var e=1,n=t(Az(e),kz(e));return n.constant=function(r){return arguments.length?t(Az(e=+r),kz(e)):e},Ef(n)}function jq(){var t=aj(NE());return t.copy=function(){return Ob(t,jq()).constant(t.constant())},nl.apply(t,arguments)}function Mz(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Jae(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Zae(t){return t<0?-t*t:t*t}function sj(t){var e=t(hs,hs),n=1;function r(){return n===1?t(hs,hs):n===.5?t(Jae,Zae):t(Mz(n),Mz(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Ef(e)}function oj(){var t=sj(NE());return t.copy=function(){return Ob(t,oj()).exponent(t.exponent())},nl.apply(t,arguments),t}function Qae(){return oj.apply(null,arguments).exponent(.5)}function Nz(t){return Math.sign(t)*t*t}function ese(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Dq(){var t=tj(),e=[0,1],n=!1,r;function i(a){var s=ese(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(Nz(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,T1)).map(Nz)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Dq(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},nl.apply(i,arguments),Ef(i)}function Lq(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=aae(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[Ib(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(yf),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return Lq().domain(t).range(e).unknown(r)},nl.apply(a,arguments)}function Uq(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[Ib(r,c,0,n)]:a}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,o()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return Uq().domain([t,e]).range(i).unknown(a)},nl.apply(Ef(s),arguments)}function zq(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[Ib(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return zq().domain(t).range(e).unknown(n)},nl.apply(i,arguments)}const rR=new Date,iR=new Date;function Wi(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let u;do c.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return c},i.filter=a=>Wi(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(rR.setTime(+a),iR.setTime(+s),t(rR),t(iR),Math.floor(n(rR,iR))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const M1=Wi(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);M1.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Wi(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):M1);M1.range;const Lu=1e3,$o=Lu*60,Uu=$o*60,qu=Uu*24,lj=qu*7,Cz=qu*30,aR=qu*365,Xh=Wi(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Lu)},(t,e)=>(e-t)/Lu,t=>t.getUTCSeconds());Xh.range;const cj=Wi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Lu)},(t,e)=>{t.setTime(+t+e*$o)},(t,e)=>(e-t)/$o,t=>t.getMinutes());cj.range;const uj=Wi(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*$o)},(t,e)=>(e-t)/$o,t=>t.getUTCMinutes());uj.range;const dj=Wi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Lu-t.getMinutes()*$o)},(t,e)=>{t.setTime(+t+e*Uu)},(t,e)=>(e-t)/Uu,t=>t.getHours());dj.range;const fj=Wi(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Uu)},(t,e)=>(e-t)/Uu,t=>t.getUTCHours());fj.range;const jb=Wi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*$o)/qu,t=>t.getDate()-1);jb.range;const CE=Wi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/qu,t=>t.getUTCDate()-1);CE.range;const Bq=Wi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/qu,t=>Math.floor(t/qu));Bq.range;function wp(t){return Wi(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*$o)/lj)}const RE=wp(0),N1=wp(1),tse=wp(2),nse=wp(3),Kg=wp(4),rse=wp(5),ise=wp(6);RE.range;N1.range;tse.range;nse.range;Kg.range;rse.range;ise.range;function Sp(t){return Wi(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/lj)}const IE=Sp(0),C1=Sp(1),ase=Sp(2),sse=Sp(3),Xg=Sp(4),ose=Sp(5),lse=Sp(6);IE.range;C1.range;ase.range;sse.range;Xg.range;ose.range;lse.range;const hj=Wi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());hj.range;const pj=Wi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());pj.range;const $u=Wi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());$u.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wi(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});$u.range;const Wu=Wi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Wu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wi(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Wu.range;function Fq(t,e,n,r,i,a){const s=[[Xh,1,Lu],[Xh,5,5*Lu],[Xh,15,15*Lu],[Xh,30,30*Lu],[a,1,$o],[a,5,5*$o],[a,15,15*$o],[a,30,30*$o],[i,1,Uu],[i,3,3*Uu],[i,6,6*Uu],[i,12,12*Uu],[r,1,qu],[r,2,2*qu],[n,1,lj],[e,1,Cz],[e,3,3*Cz],[t,1,aR]];function o(u,h,m){const v=h<u;v&&([u,h]=[h,u]);const x=m&&typeof m.range=="function"?m:c(u,h,m),_=x?x.range(u,+h+1):[];return v?_.reverse():_}function c(u,h,m){const v=Math.abs(h-u)/m,x=YO(([,,w])=>w).right(s,v);if(x===s.length)return t.every(DP(u/aR,h/aR,m));if(x===0)return M1.every(Math.max(DP(u,h,m),1));const[_,T]=s[v/s[x-1][2]<s[x][2]/v?x-1:x];return _.every(T)}return[o,c]}const[cse,use]=Fq(Wu,pj,IE,Bq,fj,uj),[dse,fse]=Fq($u,hj,RE,jb,dj,cj);function sR(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function oR(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function my(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function hse(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,c=t.shortMonths,u=gy(i),h=vy(i),m=gy(a),v=vy(a),x=gy(s),_=vy(s),T=gy(o),w=vy(o),E=gy(c),N=vy(c),C={a:X,A:re,b:ce,B:de,c:null,d:Dz,e:Dz,f:Dse,g:$se,G:Kse,H:Pse,I:Ose,j:jse,L:Vq,m:Lse,M:Use,p:W,q:ae,Q:zz,s:Bz,S:zse,u:Bse,U:Fse,V:Vse,w:Hse,W:Gse,x:null,X:null,y:qse,Y:Wse,Z:Xse,"%":Uz},P={a:me,A:Ie,b:Xe,B:ve,c:null,d:Lz,e:Lz,f:Qse,g:coe,G:doe,H:Yse,I:Jse,j:Zse,L:Gq,m:eoe,M:toe,p:_e,q:Ye,Q:zz,s:Bz,S:noe,u:roe,U:ioe,V:aoe,w:soe,W:ooe,x:null,X:null,y:loe,Y:uoe,Z:foe,"%":Uz},I={a:z,A:V,b:G,B:$,c:ee,d:Oz,e:Oz,f:Nse,g:Pz,G:Iz,H:jz,I:jz,j:Ese,L:Mse,m:Tse,M:Ase,p:L,q:Sse,Q:Rse,s:Ise,S:kse,u:yse,U:xse,V:bse,w:vse,W:_se,x:te,X:K,y:Pz,Y:Iz,Z:wse,"%":Cse};C.x=j(n,C),C.X=j(r,C),C.c=j(e,C),P.x=j(n,P),P.X=j(r,P),P.c=j(e,P);function j(ke,qe){return function(pt){var Ue=[],xt=-1,Me=0,Fe=ke.length,Le,Qe,ie;for(pt instanceof Date||(pt=new Date(+pt));++xt<Fe;)ke.charCodeAt(xt)===37&&(Ue.push(ke.slice(Me,xt)),(Qe=Rz[Le=ke.charAt(++xt)])!=null?Le=ke.charAt(++xt):Qe=Le==="e"?" ":"0",(ie=qe[Le])&&(Le=ie(pt,Qe)),Ue.push(Le),Me=xt+1);return Ue.push(ke.slice(Me,xt)),Ue.join("")}}function O(ke,qe){return function(pt){var Ue=my(1900,void 0,1),xt=F(Ue,ke,pt+="",0),Me,Fe;if(xt!=pt.length)return null;if("Q"in Ue)return new Date(Ue.Q);if("s"in Ue)return new Date(Ue.s*1e3+("L"in Ue?Ue.L:0));if(qe&&!("Z"in Ue)&&(Ue.Z=0),"p"in Ue&&(Ue.H=Ue.H%12+Ue.p*12),Ue.m===void 0&&(Ue.m="q"in Ue?Ue.q:0),"V"in Ue){if(Ue.V<1||Ue.V>53)return null;"w"in Ue||(Ue.w=1),"Z"in Ue?(Me=oR(my(Ue.y,0,1)),Fe=Me.getUTCDay(),Me=Fe>4||Fe===0?C1.ceil(Me):C1(Me),Me=CE.offset(Me,(Ue.V-1)*7),Ue.y=Me.getUTCFullYear(),Ue.m=Me.getUTCMonth(),Ue.d=Me.getUTCDate()+(Ue.w+6)%7):(Me=sR(my(Ue.y,0,1)),Fe=Me.getDay(),Me=Fe>4||Fe===0?N1.ceil(Me):N1(Me),Me=jb.offset(Me,(Ue.V-1)*7),Ue.y=Me.getFullYear(),Ue.m=Me.getMonth(),Ue.d=Me.getDate()+(Ue.w+6)%7)}else("W"in Ue||"U"in Ue)&&("w"in Ue||(Ue.w="u"in Ue?Ue.u%7:"W"in Ue?1:0),Fe="Z"in Ue?oR(my(Ue.y,0,1)).getUTCDay():sR(my(Ue.y,0,1)).getDay(),Ue.m=0,Ue.d="W"in Ue?(Ue.w+6)%7+Ue.W*7-(Fe+5)%7:Ue.w+Ue.U*7-(Fe+6)%7);return"Z"in Ue?(Ue.H+=Ue.Z/100|0,Ue.M+=Ue.Z%100,oR(Ue)):sR(Ue)}}function F(ke,qe,pt,Ue){for(var xt=0,Me=qe.length,Fe=pt.length,Le,Qe;xt<Me;){if(Ue>=Fe)return-1;if(Le=qe.charCodeAt(xt++),Le===37){if(Le=qe.charAt(xt++),Qe=I[Le in Rz?qe.charAt(xt++):Le],!Qe||(Ue=Qe(ke,pt,Ue))<0)return-1}else if(Le!=pt.charCodeAt(Ue++))return-1}return Ue}function L(ke,qe,pt){var Ue=u.exec(qe.slice(pt));return Ue?(ke.p=h.get(Ue[0].toLowerCase()),pt+Ue[0].length):-1}function z(ke,qe,pt){var Ue=x.exec(qe.slice(pt));return Ue?(ke.w=_.get(Ue[0].toLowerCase()),pt+Ue[0].length):-1}function V(ke,qe,pt){var Ue=m.exec(qe.slice(pt));return Ue?(ke.w=v.get(Ue[0].toLowerCase()),pt+Ue[0].length):-1}function G(ke,qe,pt){var Ue=E.exec(qe.slice(pt));return Ue?(ke.m=N.get(Ue[0].toLowerCase()),pt+Ue[0].length):-1}function $(ke,qe,pt){var Ue=T.exec(qe.slice(pt));return Ue?(ke.m=w.get(Ue[0].toLowerCase()),pt+Ue[0].length):-1}function ee(ke,qe,pt){return F(ke,e,qe,pt)}function te(ke,qe,pt){return F(ke,n,qe,pt)}function K(ke,qe,pt){return F(ke,r,qe,pt)}function X(ke){return s[ke.getDay()]}function re(ke){return a[ke.getDay()]}function ce(ke){return c[ke.getMonth()]}function de(ke){return o[ke.getMonth()]}function W(ke){return i[+(ke.getHours()>=12)]}function ae(ke){return 1+~~(ke.getMonth()/3)}function me(ke){return s[ke.getUTCDay()]}function Ie(ke){return a[ke.getUTCDay()]}function Xe(ke){return c[ke.getUTCMonth()]}function ve(ke){return o[ke.getUTCMonth()]}function _e(ke){return i[+(ke.getUTCHours()>=12)]}function Ye(ke){return 1+~~(ke.getUTCMonth()/3)}return{format:function(ke){var qe=j(ke+="",C);return qe.toString=function(){return ke},qe},parse:function(ke){var qe=O(ke+="",!1);return qe.toString=function(){return ke},qe},utcFormat:function(ke){var qe=j(ke+="",P);return qe.toString=function(){return ke},qe},utcParse:function(ke){var qe=O(ke+="",!0);return qe.toString=function(){return ke},qe}}}var Rz={"-":"",_:" ",0:"0"},aa=/^\s*\d+/,pse=/^%/,mse=/[\\^$*+?|[\]().{}]/g;function Yn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function gse(t){return t.replace(mse,"\\$&")}function gy(t){return new RegExp("^(?:"+t.map(gse).join("|")+")","i")}function vy(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function vse(t,e,n){var r=aa.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function yse(t,e,n){var r=aa.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function xse(t,e,n){var r=aa.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function bse(t,e,n){var r=aa.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function _se(t,e,n){var r=aa.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Iz(t,e,n){var r=aa.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Pz(t,e,n){var r=aa.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function wse(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Sse(t,e,n){var r=aa.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Tse(t,e,n){var r=aa.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Oz(t,e,n){var r=aa.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Ese(t,e,n){var r=aa.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function jz(t,e,n){var r=aa.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Ase(t,e,n){var r=aa.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function kse(t,e,n){var r=aa.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Mse(t,e,n){var r=aa.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Nse(t,e,n){var r=aa.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Cse(t,e,n){var r=pse.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Rse(t,e,n){var r=aa.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Ise(t,e,n){var r=aa.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Dz(t,e){return Yn(t.getDate(),e,2)}function Pse(t,e){return Yn(t.getHours(),e,2)}function Ose(t,e){return Yn(t.getHours()%12||12,e,2)}function jse(t,e){return Yn(1+jb.count($u(t),t),e,3)}function Vq(t,e){return Yn(t.getMilliseconds(),e,3)}function Dse(t,e){return Vq(t,e)+"000"}function Lse(t,e){return Yn(t.getMonth()+1,e,2)}function Use(t,e){return Yn(t.getMinutes(),e,2)}function zse(t,e){return Yn(t.getSeconds(),e,2)}function Bse(t){var e=t.getDay();return e===0?7:e}function Fse(t,e){return Yn(RE.count($u(t)-1,t),e,2)}function Hq(t){var e=t.getDay();return e>=4||e===0?Kg(t):Kg.ceil(t)}function Vse(t,e){return t=Hq(t),Yn(Kg.count($u(t),t)+($u(t).getDay()===4),e,2)}function Hse(t){return t.getDay()}function Gse(t,e){return Yn(N1.count($u(t)-1,t),e,2)}function qse(t,e){return Yn(t.getFullYear()%100,e,2)}function $se(t,e){return t=Hq(t),Yn(t.getFullYear()%100,e,2)}function Wse(t,e){return Yn(t.getFullYear()%1e4,e,4)}function Kse(t,e){var n=t.getDay();return t=n>=4||n===0?Kg(t):Kg.ceil(t),Yn(t.getFullYear()%1e4,e,4)}function Xse(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Yn(e/60|0,"0",2)+Yn(e%60,"0",2)}function Lz(t,e){return Yn(t.getUTCDate(),e,2)}function Yse(t,e){return Yn(t.getUTCHours(),e,2)}function Jse(t,e){return Yn(t.getUTCHours()%12||12,e,2)}function Zse(t,e){return Yn(1+CE.count(Wu(t),t),e,3)}function Gq(t,e){return Yn(t.getUTCMilliseconds(),e,3)}function Qse(t,e){return Gq(t,e)+"000"}function eoe(t,e){return Yn(t.getUTCMonth()+1,e,2)}function toe(t,e){return Yn(t.getUTCMinutes(),e,2)}function noe(t,e){return Yn(t.getUTCSeconds(),e,2)}function roe(t){var e=t.getUTCDay();return e===0?7:e}function ioe(t,e){return Yn(IE.count(Wu(t)-1,t),e,2)}function qq(t){var e=t.getUTCDay();return e>=4||e===0?Xg(t):Xg.ceil(t)}function aoe(t,e){return t=qq(t),Yn(Xg.count(Wu(t),t)+(Wu(t).getUTCDay()===4),e,2)}function soe(t){return t.getUTCDay()}function ooe(t,e){return Yn(C1.count(Wu(t)-1,t),e,2)}function loe(t,e){return Yn(t.getUTCFullYear()%100,e,2)}function coe(t,e){return t=qq(t),Yn(t.getUTCFullYear()%100,e,2)}function uoe(t,e){return Yn(t.getUTCFullYear()%1e4,e,4)}function doe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Xg(t):Xg.ceil(t),Yn(t.getUTCFullYear()%1e4,e,4)}function foe(){return"+0000"}function Uz(){return"%"}function zz(t){return+t}function Bz(t){return Math.floor(+t/1e3)}var Gm,$q,Wq;hoe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function hoe(t){return Gm=hse(t),$q=Gm.format,Gm.parse,Wq=Gm.utcFormat,Gm.utcParse,Gm}function poe(t){return new Date(t)}function moe(t){return t instanceof Date?+t:+new Date(+t)}function mj(t,e,n,r,i,a,s,o,c,u){var h=tj(),m=h.invert,v=h.domain,x=u(".%L"),_=u(":%S"),T=u("%I:%M"),w=u("%I %p"),E=u("%a %d"),N=u("%b %d"),C=u("%B"),P=u("%Y");function I(j){return(c(j)<j?x:o(j)<j?_:s(j)<j?T:a(j)<j?w:r(j)<j?i(j)<j?E:N:n(j)<j?C:P)(j)}return h.invert=function(j){return new Date(m(j))},h.domain=function(j){return arguments.length?v(Array.from(j,moe)):v().map(poe)},h.ticks=function(j){var O=v();return t(O[0],O[O.length-1],j??10)},h.tickFormat=function(j,O){return O==null?I:u(O)},h.nice=function(j){var O=v();return(!j||typeof j.range!="function")&&(j=e(O[0],O[O.length-1],j??10)),j?v(Pq(O,j)):h},h.copy=function(){return Ob(h,mj(t,e,n,r,i,a,s,o,c,u))},h}function goe(){return nl.apply(mj(dse,fse,$u,hj,RE,jb,dj,cj,Xh,$q).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function voe(){return nl.apply(mj(cse,use,Wu,pj,IE,CE,fj,uj,Xh,Wq).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function PE(){var t=0,e=1,n,r,i,a,s=hs,o=!1,c;function u(m){return m==null||isNaN(m=+m)?c:s(i===0?.5:(m=(a(m)-n)*i,o?Math.max(0,Math.min(1,m)):m))}u.domain=function(m){return arguments.length?([t,e]=m,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(m){return arguments.length?(o=!!m,u):o},u.interpolator=function(m){return arguments.length?(s=m,u):s};function h(m){return function(v){var x,_;return arguments.length?([x,_]=v,s=m(x,_),u):[s(0),s(1)]}}return u.range=h(kv),u.rangeRound=h(ej),u.unknown=function(m){return arguments.length?(c=m,u):c},function(m){return a=m,n=m(t),r=m(e),i=n===r?0:1/(r-n),u}}function Af(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Kq(){var t=Ef(PE()(hs));return t.copy=function(){return Af(t,Kq())},td.apply(t,arguments)}function Xq(){var t=ij(PE()).domain([1,10]);return t.copy=function(){return Af(t,Xq()).base(t.base())},td.apply(t,arguments)}function Yq(){var t=aj(PE());return t.copy=function(){return Af(t,Yq()).constant(t.constant())},td.apply(t,arguments)}function gj(){var t=sj(PE());return t.copy=function(){return Af(t,gj()).exponent(t.exponent())},td.apply(t,arguments)}function yoe(){return gj.apply(null,arguments).exponent(.5)}function Jq(){var t=[],e=hs;function n(r){if(r!=null&&!isNaN(r=+r))return e((Ib(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(yf),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>iae(t,a/r))},n.copy=function(){return Jq(e).domain(t)},td.apply(n,arguments)}function OE(){var t=0,e=.5,n=1,r=1,i,a,s,o,c,u=hs,h,m=!1,v;function x(T){return isNaN(T=+T)?v:(T=.5+((T=+h(T))-a)*(r*T<r*a?o:c),u(m?Math.max(0,Math.min(1,T)):T))}x.domain=function(T){return arguments.length?([t,e,n]=T,i=h(t=+t),a=h(e=+e),s=h(n=+n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,x):[t,e,n]},x.clamp=function(T){return arguments.length?(m=!!T,x):m},x.interpolator=function(T){return arguments.length?(u=T,x):u};function _(T){return function(w){var E,N,C;return arguments.length?([E,N,C]=w,u=Cae(T,[E,N,C]),x):[u(0),u(.5),u(1)]}}return x.range=_(kv),x.rangeRound=_(ej),x.unknown=function(T){return arguments.length?(v=T,x):v},function(T){return h=T,i=T(t),a=T(e),s=T(n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,x}}function Zq(){var t=Ef(OE()(hs));return t.copy=function(){return Af(t,Zq())},td.apply(t,arguments)}function Qq(){var t=ij(OE()).domain([.1,1,10]);return t.copy=function(){return Af(t,Qq()).base(t.base())},td.apply(t,arguments)}function e$(){var t=aj(OE());return t.copy=function(){return Af(t,e$()).constant(t.constant())},td.apply(t,arguments)}function vj(){var t=sj(OE());return t.copy=function(){return Af(t,vj()).exponent(t.exponent())},td.apply(t,arguments)}function xoe(){return vj.apply(null,arguments).exponent(.5)}const Fz=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Px,scaleDiverging:Zq,scaleDivergingLog:Qq,scaleDivergingPow:vj,scaleDivergingSqrt:xoe,scaleDivergingSymlog:e$,scaleIdentity:Iq,scaleImplicit:LP,scaleLinear:k1,scaleLog:Oq,scaleOrdinal:JO,scalePoint:Zy,scalePow:oj,scaleQuantile:Lq,scaleQuantize:Uq,scaleRadial:Dq,scaleSequential:Kq,scaleSequentialLog:Xq,scaleSequentialPow:gj,scaleSequentialQuantile:Jq,scaleSequentialSqrt:yoe,scaleSequentialSymlog:Yq,scaleSqrt:Qae,scaleSymlog:jq,scaleThreshold:zq,scaleTime:goe,scaleUtc:voe,tickFormat:Rq},Symbol.toStringTag,{value:"Module"}));var lR,Vz;function jE(){if(Vz)return lR;Vz=1;var t=Sv();function e(n,r,i){for(var a=-1,s=n.length;++a<s;){var o=n[a],c=r(o);if(c!=null&&(u===void 0?c===c&&!t(c):i(c,u)))var u=c,h=o}return h}return lR=e,lR}var cR,Hz;function t$(){if(Hz)return cR;Hz=1;function t(e,n){return e>n}return cR=t,cR}var uR,Gz;function boe(){if(Gz)return uR;Gz=1;var t=jE(),e=t$(),n=Ev();function r(i){return i&&i.length?t(i,n,e):void 0}return uR=r,uR}var _oe=boe();const DE=Zn(_oe);var dR,qz;function n$(){if(qz)return dR;qz=1;function t(e,n){return e<n}return dR=t,dR}var fR,$z;function woe(){if($z)return fR;$z=1;var t=jE(),e=n$(),n=Ev();function r(i){return i&&i.length?t(i,n,e):void 0}return fR=r,fR}var Soe=woe();const LE=Zn(Soe);var hR,Wz;function Toe(){if(Wz)return hR;Wz=1;var t=PO(),e=Vc(),n=dq(),r=qs();function i(a,s){var o=r(a)?t:n;return o(a,e(s,3))}return hR=i,hR}var pR,Kz;function Eoe(){if(Kz)return pR;Kz=1;var t=cq(),e=Toe();function n(r,i){return t(e(r,i),1)}return pR=n,pR}var Aoe=Eoe();const koe=Zn(Aoe);var mR,Xz;function Moe(){if(Xz)return mR;Xz=1;var t=$O();function e(n,r){return t(n,r)}return mR=e,mR}var Noe=Moe();const UE=Zn(Noe);var Mv=1e9,Coe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},xj,qr=!0,Qo="[DecimalError] ",rp=Qo+"Invalid argument: ",yj=Qo+"Exponent out of range: ",Nv=Math.floor,zh=Math.pow,Roe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,lo,ea=1e7,Br=7,r$=9007199254740991,R1=Nv(r$/Br),Pt={};Pt.absoluteValue=Pt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Pt.comparedTo=Pt.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Pt.decimalPlaces=Pt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Br;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Pt.dividedBy=Pt.div=function(t){return Vu(this,new this.constructor(t))};Pt.dividedToIntegerBy=Pt.idiv=function(t){var e=this,n=e.constructor;return _r(Vu(e,new n(t),0,1),n.precision)};Pt.equals=Pt.eq=function(t){return!this.cmp(t)};Pt.exponent=function(){return Ri(this)};Pt.greaterThan=Pt.gt=function(t){return this.cmp(t)>0};Pt.greaterThanOrEqualTo=Pt.gte=function(t){return this.cmp(t)>=0};Pt.isInteger=Pt.isint=function(){return this.e>this.d.length-2};Pt.isNegative=Pt.isneg=function(){return this.s<0};Pt.isPositive=Pt.ispos=function(){return this.s>0};Pt.isZero=function(){return this.s===0};Pt.lessThan=Pt.lt=function(t){return this.cmp(t)<0};Pt.lessThanOrEqualTo=Pt.lte=function(t){return this.cmp(t)<1};Pt.logarithm=Pt.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(lo))throw Error(Qo+"NaN");if(n.s<1)throw Error(Qo+(n.s?"NaN":"-Infinity"));return n.eq(lo)?new r(0):(qr=!1,e=Vu(Ux(n,a),Ux(t,a),a),qr=!0,_r(e,i))};Pt.minus=Pt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?s$(e,t):i$(e,(t.s=-t.s,t))};Pt.modulo=Pt.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Qo+"NaN");return n.s?(qr=!1,e=Vu(n,t,0,1).times(t),qr=!0,n.minus(e)):_r(new r(n),i)};Pt.naturalExponential=Pt.exp=function(){return a$(this)};Pt.naturalLogarithm=Pt.ln=function(){return Ux(this)};Pt.negated=Pt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Pt.plus=Pt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?i$(e,t):s$(e,(t.s=-t.s,t))};Pt.precision=Pt.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(rp+t);if(e=Ri(i)+1,r=i.d.length-1,n=r*Br+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Pt.squareRoot=Pt.sqrt=function(){var t,e,n,r,i,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Qo+"NaN")}for(t=Ri(o),qr=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=Nc(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Nv((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(a=r,r=a.plus(Vu(o,a,s+2)).times(.5),Nc(a.d).slice(0,s)===(e=Nc(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(_r(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return qr=!0,_r(r,n)};Pt.times=Pt.mul=function(t){var e,n,r,i,a,s,o,c,u,h=this,m=h.constructor,v=h.d,x=(t=new m(t)).d;if(!h.s||!t.s)return new m(0);for(t.s*=h.s,n=h.e+t.e,c=v.length,u=x.length,c<u&&(a=v,v=x,x=a,s=c,c=u,u=s),a=[],s=c+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)o=a[i]+x[r]*v[i-r-1]+e,a[i--]=o%ea|0,e=o/ea|0;a[i]=(a[i]+e)%ea|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,qr?_r(t,m.precision):t};Pt.toDecimalPlaces=Pt.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Dc(t,0,Mv),e===void 0?e=r.rounding:Dc(e,0,8),_r(n,t+Ri(n)+1,e))};Pt.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=fp(r,!0):(Dc(t,0,Mv),e===void 0?e=i.rounding:Dc(e,0,8),r=_r(new i(r),t+1,e),n=fp(r,!0,t+1)),n};Pt.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?fp(i):(Dc(t,0,Mv),e===void 0?e=a.rounding:Dc(e,0,8),r=_r(new a(i),t+Ri(i)+1,e),n=fp(r.abs(),!1,t+Ri(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Pt.toInteger=Pt.toint=function(){var t=this,e=t.constructor;return _r(new e(t),Ri(t)+1,e.rounding)};Pt.toNumber=function(){return+this};Pt.toPower=Pt.pow=function(t){var e,n,r,i,a,s,o=this,c=o.constructor,u=12,h=+(t=new c(t));if(!t.s)return new c(lo);if(o=new c(o),!o.s){if(t.s<1)throw Error(Qo+"Infinity");return o}if(o.eq(lo))return o;if(r=c.precision,t.eq(lo))return _r(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=h<0?-h:h)<=r$){for(i=new c(lo),e=Math.ceil(r/Br+4),qr=!1;n%2&&(i=i.times(o),Jz(i.d,e)),n=Nv(n/2),n!==0;)o=o.times(o),Jz(o.d,e);return qr=!0,t.s<0?new c(lo).div(i):_r(i,r)}}else if(a<0)throw Error(Qo+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,qr=!1,i=t.times(Ux(o,r+u)),qr=!0,i=a$(i),i.s=a,i};Pt.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=Ri(i),r=fp(i,n<=a.toExpNeg||n>=a.toExpPos)):(Dc(t,1,Mv),e===void 0?e=a.rounding:Dc(e,0,8),i=_r(new a(i),t,e),n=Ri(i),r=fp(i,t<=n||n<=a.toExpNeg,t)),r};Pt.toSignificantDigits=Pt.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Dc(t,1,Mv),e===void 0?e=r.rounding:Dc(e,0,8)),_r(new r(n),t,e)};Pt.toString=Pt.valueOf=Pt.val=Pt.toJSON=Pt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ri(t),n=t.constructor;return fp(t,e<=n.toExpNeg||e>=n.toExpPos)};function i$(t,e){var n,r,i,a,s,o,c,u,h=t.constructor,m=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),qr?_r(e,m):e;if(c=t.d,u=e.d,s=t.e,i=e.e,c=c.slice(),a=s-i,a){for(a<0?(r=c,a=-a,o=u.length):(r=u,i=s,o=c.length),s=Math.ceil(m/Br),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=c.length,a=u.length,o-a<0&&(a=o,r=u,u=c,c=r),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/ea|0,c[a]%=ea;for(n&&(c.unshift(n),++i),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=i,qr?_r(e,m):e}function Dc(t,e,n){if(t!==~~t||t<e||t>n)throw Error(rp+t)}function Nc(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=Br-r.length,n&&(a+=lf(n)),a+=r;s=t[e],r=s+"",n=Br-r.length,n&&(a+=lf(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Vu=(function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%ea|0,s=a/ea|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*ea+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,c,u,h,m,v,x,_,T,w,E,N,C,P,I,j,O,F,L=r.constructor,z=r.s==i.s?1:-1,V=r.d,G=i.d;if(!r.s)return new L(r);if(!i.s)throw Error(Qo+"Division by zero");for(c=r.e-i.e,O=G.length,I=V.length,x=new L(z),_=x.d=[],u=0;G[u]==(V[u]||0);)++u;if(G[u]>(V[u]||0)&&--c,a==null?N=a=L.precision:s?N=a+(Ri(r)-Ri(i))+1:N=a,N<0)return new L(0);if(N=N/Br+2|0,u=0,O==1)for(h=0,G=G[0],N++;(u<I||h)&&N--;u++)C=h*ea+(V[u]||0),_[u]=C/G|0,h=C%G|0;else{for(h=ea/(G[0]+1)|0,h>1&&(G=t(G,h),V=t(V,h),O=G.length,I=V.length),P=O,T=V.slice(0,O),w=T.length;w<O;)T[w++]=0;F=G.slice(),F.unshift(0),j=G[0],G[1]>=ea/2&&++j;do h=0,o=e(G,T,O,w),o<0?(E=T[0],O!=w&&(E=E*ea+(T[1]||0)),h=E/j|0,h>1?(h>=ea&&(h=ea-1),m=t(G,h),v=m.length,w=T.length,o=e(m,T,v,w),o==1&&(h--,n(m,O<v?F:G,v))):(h==0&&(o=h=1),m=G.slice()),v=m.length,v<w&&m.unshift(0),n(T,m,w),o==-1&&(w=T.length,o=e(G,T,O,w),o<1&&(h++,n(T,O<w?F:G,w))),w=T.length):o===0&&(h++,T=[0]),_[u++]=h,o&&T[0]?T[w++]=V[P]||0:(T=[V[P]],w=1);while((P++<I||T[0]!==void 0)&&N--)}return _[0]||_.shift(),x.e=c,_r(x,s?a+Ri(x)+1:a)}})();function a$(t,e){var n,r,i,a,s,o,c=0,u=0,h=t.constructor,m=h.precision;if(Ri(t)>16)throw Error(yj+Ri(t));if(!t.s)return new h(lo);for(qr=!1,o=m,s=new h(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(zh(2,u))/Math.LN10*2+5|0,o+=r,n=i=a=new h(lo),h.precision=o;;){if(i=_r(i.times(t),o),n=n.times(++c),s=a.plus(Vu(i,n,o)),Nc(s.d).slice(0,o)===Nc(a.d).slice(0,o)){for(;u--;)a=_r(a.times(a),o);return h.precision=m,e==null?(qr=!0,_r(a,m)):a}a=s}}function Ri(t){for(var e=t.e*Br,n=t.d[0];n>=10;n/=10)e++;return e}function gR(t,e,n){if(e>t.LN10.sd())throw qr=!0,n&&(t.precision=n),Error(Qo+"LN10 precision limit exceeded");return _r(new t(t.LN10),e)}function lf(t){for(var e="";t--;)e+="0";return e}function Ux(t,e){var n,r,i,a,s,o,c,u,h,m=1,v=10,x=t,_=x.d,T=x.constructor,w=T.precision;if(x.s<1)throw Error(Qo+(x.s?"NaN":"-Infinity"));if(x.eq(lo))return new T(0);if(e==null?(qr=!1,u=w):u=e,x.eq(10))return e==null&&(qr=!0),gR(T,u);if(u+=v,T.precision=u,n=Nc(_),r=n.charAt(0),a=Ri(x),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)x=x.times(t),n=Nc(x.d),r=n.charAt(0),m++;a=Ri(x),r>1?(x=new T("0."+n),a++):x=new T(r+"."+n.slice(1))}else return c=gR(T,u+2,w).times(a+""),x=Ux(new T(r+"."+n.slice(1)),u-v).plus(c),T.precision=w,e==null?(qr=!0,_r(x,w)):x;for(o=s=x=Vu(x.minus(lo),x.plus(lo),u),h=_r(x.times(x),u),i=3;;){if(s=_r(s.times(h),u),c=o.plus(Vu(s,new T(i),u)),Nc(c.d).slice(0,u)===Nc(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(gR(T,u+2,w).times(a+""))),o=Vu(o,new T(m),u),T.precision=w,e==null?(qr=!0,_r(o,w)):o;o=c,i+=2}}function Yz(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Nv(n/Br),t.d=[],r=(n+1)%Br,n<0&&(r+=Br),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Br;r<i;)t.d.push(+e.slice(r,r+=Br));e=e.slice(r),r=Br-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),qr&&(t.e>R1||t.e<-R1))throw Error(yj+n)}else t.s=0,t.e=0,t.d=[0];return t}function _r(t,e,n){var r,i,a,s,o,c,u,h,m=t.d;for(s=1,a=m[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=Br,i=e,u=m[h=0];else{if(h=Math.ceil((r+1)/Br),a=m.length,h>=a)return t;for(u=a=m[h],s=1;a>=10;a/=10)s++;r%=Br,i=r-Br+s}if(n!==void 0&&(a=zh(10,s-i-1),o=u/a%10|0,c=e<0||m[h+1]!==void 0||u%a,c=n<4?(o||c)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(r>0?i>0?u/zh(10,s-i):0:m[h-1])%10&1||n==(t.s<0?8:7))),e<1||!m[0])return c?(a=Ri(t),m.length=1,e=e-a-1,m[0]=zh(10,(Br-e%Br)%Br),t.e=Nv(-e/Br)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(r==0?(m.length=h,a=1,h--):(m.length=h+1,a=zh(10,Br-r),m[h]=i>0?(u/zh(10,s-i)%zh(10,i)|0)*a:0),c)for(;;)if(h==0){(m[0]+=a)==ea&&(m[0]=1,++t.e);break}else{if(m[h]+=a,m[h]!=ea)break;m[h--]=0,a=1}for(r=m.length;m[--r]===0;)m.pop();if(qr&&(t.e>R1||t.e<-R1))throw Error(yj+Ri(t));return t}function s$(t,e){var n,r,i,a,s,o,c,u,h,m,v=t.constructor,x=v.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new v(t),qr?_r(e,x):e;if(c=t.d,m=e.d,r=e.e,u=t.e,c=c.slice(),s=u-r,s){for(h=s<0,h?(n=c,s=-s,o=m.length):(n=m,r=u,o=c.length),i=Math.max(Math.ceil(x/Br),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,o=m.length,h=i<o,h&&(o=i),i=0;i<o;i++)if(c[i]!=m[i]){h=c[i]<m[i];break}s=0}for(h&&(n=c,c=m,m=n,e.s=-e.s),o=c.length,i=m.length-o;i>0;--i)c[o++]=0;for(i=m.length;i>s;){if(c[--i]<m[i]){for(a=i;a&&c[--a]===0;)c[a]=ea-1;--c[a],c[i]+=ea}c[i]-=m[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,qr?_r(e,x):e):new v(0)}function fp(t,e,n){var r,i=Ri(t),a=Nc(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+lf(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+lf(-i-1)+a,n&&(r=n-s)>0&&(a+=lf(r))):i>=s?(a+=lf(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+lf(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=lf(r))),t.s<0?"-"+a:a}function Jz(t,e){if(t.length>e)return t.length=e,!0}function o$(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(rp+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return Yz(s,a.toString())}else if(typeof a!="string")throw Error(rp+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,Roe.test(a))Yz(s,a);else throw Error(rp+a)}if(i.prototype=Pt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=o$,i.config=i.set=Ioe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Ioe(t){if(!t||typeof t!="object")throw Error(Qo+"Object expected");var e,n,r,i=["precision",1,Mv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Nv(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(rp+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(rp+n+": "+r);return this}var xj=o$(Coe);lo=new xj(1);const mr=xj;function Poe(t){return Loe(t)||Doe(t)||joe(t)||Ooe()}function Ooe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function joe(t,e){if(t){if(typeof t=="string")return FP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FP(t,e)}}function Doe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Loe(t){if(Array.isArray(t))return FP(t)}function FP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Uoe=function(e){return e},l$={},c$=function(e){return e===l$},Zz=function(e){return function n(){return arguments.length===0||arguments.length===1&&c$(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},zoe=function t(e,n){return e===1?n:Zz(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i.filter(function(o){return o!==l$}).length;return s>=e?n.apply(void 0,i):t(e-s,Zz(function(){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];var h=i.map(function(m){return c$(m)?c.shift():m});return n.apply(void 0,Poe(h).concat(c))}))})},zE=function(e){return zoe(e.length,e)},VP=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},Boe=zE(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Foe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Uoe;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(o,c){return c(o)},a.apply(void 0,arguments))}},HP=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},u$=function(e){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n&&a.every(function(o,c){return o===n[c]})||(n=a,r=e.apply(void 0,a)),r}};function Voe(t){var e;return t===0?e=1:e=Math.floor(new mr(t).abs().log(10).toNumber())+1,e}function Hoe(t,e,n){for(var r=new mr(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var Goe=zE(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),qoe=zE(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),$oe=zE(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const BE={rangeStep:Hoe,getDigitCount:Voe,interpolateNumber:Goe,uninterpolateNumber:qoe,uninterpolateTruncation:$oe};function GP(t){return Xoe(t)||Koe(t)||d$(t)||Woe()}function Woe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Koe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Xoe(t){if(Array.isArray(t))return qP(t)}function zx(t,e){return Zoe(t)||Joe(t,e)||d$(t,e)||Yoe()}function Yoe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d$(t,e){if(t){if(typeof t=="string")return qP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qP(t,e)}}function qP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Joe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),o;!(r=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,a=c}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return n}}function Zoe(t){if(Array.isArray(t))return t}function f$(t){var e=zx(t,2),n=e[0],r=e[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function h$(t,e,n){if(t.lte(0))return new mr(0);var r=BE.getDigitCount(t.toNumber()),i=new mr(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new mr(Math.ceil(a.div(s).toNumber())).add(n).mul(s),c=o.mul(i);return e?c:new mr(Math.ceil(c))}function Qoe(t,e,n){var r=1,i=new mr(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new mr(10).pow(BE.getDigitCount(t)-1),i=new mr(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new mr(Math.floor(t)))}else t===0?i=new mr(Math.floor((e-1)/2)):n||(i=new mr(Math.floor(t)));var s=Math.floor((e-1)/2),o=Foe(Boe(function(c){return i.add(new mr(c-s).mul(r)).toNumber()}),VP);return o(0,e)}function p$(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new mr(0),tickMin:new mr(0),tickMax:new mr(0)};var a=h$(new mr(e).sub(t).div(n-1),r,i),s;t<=0&&e>=0?s=new mr(0):(s=new mr(t).add(e).div(2),s=s.sub(new mr(s).mod(a)));var o=Math.ceil(s.sub(t).div(a).toNumber()),c=Math.ceil(new mr(e).sub(s).div(a).toNumber()),u=o+c+1;return u>n?p$(t,e,n,r,i+1):(u<n&&(c=e>0?c+(n-u):c,o=e>0?o:o+(n-u)),{step:a,tickMin:s.sub(new mr(o).mul(a)),tickMax:s.add(new mr(c).mul(a))})}function ele(t){var e=zx(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),o=f$([n,r]),c=zx(o,2),u=c[0],h=c[1];if(u===-1/0||h===1/0){var m=h===1/0?[u].concat(GP(VP(0,i-1).map(function(){return 1/0}))):[].concat(GP(VP(0,i-1).map(function(){return-1/0})),[h]);return n>r?HP(m):m}if(u===h)return Qoe(u,i,a);var v=p$(u,h,s,a),x=v.step,_=v.tickMin,T=v.tickMax,w=BE.rangeStep(_,T.add(new mr(.1).mul(x)),x);return n>r?HP(w):w}function tle(t,e){var n=zx(t,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=f$([r,i]),o=zx(s,2),c=o[0],u=o[1];if(c===-1/0||u===1/0)return[r,i];if(c===u)return[c];var h=Math.max(e,2),m=h$(new mr(u).sub(c).div(h-1),a,0),v=[].concat(GP(BE.rangeStep(new mr(c),new mr(u).sub(new mr(.99).mul(m)),m)),[u]);return r>i?HP(v):v}var nle=u$(ele),rle=u$(tle),ile="Invariant failed";function hp(t,e){throw new Error(ile)}var ale=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Yg(t){"@babel/helpers - typeof";return Yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yg(t)}function I1(){return I1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},I1.apply(this,arguments)}function sle(t,e){return ule(t)||cle(t,e)||lle(t,e)||ole()}function ole(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lle(t,e){if(t){if(typeof t=="string")return Qz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qz(t,e)}}function Qz(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cle(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function ule(t){if(Array.isArray(t))return t}function dle(t,e){if(t==null)return{};var n=fle(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fle(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function hle(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ple(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v$(r.key),r)}}function mle(t,e,n){return e&&ple(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gle(t,e,n){return e=P1(e),vle(t,m$()?Reflect.construct(e,n||[],P1(t).constructor):e.apply(t,n))}function vle(t,e){if(e&&(Yg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yle(t)}function yle(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m$=function(){return!!t})()}function P1(t){return P1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},P1(t)}function xle(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$P(t,e)}function $P(t,e){return $P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$P(t,e)}function g$(t,e,n){return e=v$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v$(t){var e=ble(t,"string");return Yg(e)=="symbol"?e:e+""}function ble(t,e){if(Yg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var FE=(function(t){function e(){return hle(this,e),gle(this,e,arguments)}return xle(e,t),mle(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,s=r.width,o=r.dataKey,c=r.data,u=r.dataPointFormatter,h=r.xAxis,m=r.yAxis,v=dle(r,ale),x=rn(v,!1);this.props.direction==="x"&&h.type!=="number"&&hp();var _=c.map(function(T){var w=u(T,o),E=w.x,N=w.y,C=w.value,P=w.errorVal;if(!P)return null;var I=[],j,O;if(Array.isArray(P)){var F=sle(P,2);j=F[0],O=F[1]}else j=O=P;if(a==="vertical"){var L=h.scale,z=N+i,V=z+s,G=z-s,$=L(C-j),ee=L(C+O);I.push({x1:ee,y1:V,x2:ee,y2:G}),I.push({x1:$,y1:z,x2:ee,y2:z}),I.push({x1:$,y1:V,x2:$,y2:G})}else if(a==="horizontal"){var te=m.scale,K=E+i,X=K-s,re=K+s,ce=te(C-j),de=te(C+O);I.push({x1:X,y1:de,x2:re,y2:de}),I.push({x1:K,y1:ce,x2:K,y2:de}),I.push({x1:X,y1:ce,x2:re,y2:ce})}return ue.createElement(lr,I1({className:"recharts-errorBar",key:"bar-".concat(I.map(function(W){return"".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))},x),I.map(function(W){return ue.createElement("line",I1({},W,{key:"line-".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))}))});return ue.createElement(lr,{className:"recharts-errorBars"},_)}}])})(ue.Component);g$(FE,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});g$(FE,"displayName","ErrorBar");function Bx(t){"@babel/helpers - typeof";return Bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bx(t)}function eB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eB(Object(n),!0).forEach(function(r){_le(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _le(t,e,n){return e=wle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wle(t){var e=Sle(t,"string");return Bx(e)=="symbol"?e:e+""}function Sle(t,e){if(Bx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var y$=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,s=io(n,tp);if(!s)return null;var o=tp.defaultProps,c=o!==void 0?bh(bh({},o),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:a==="children"?u=(r||[]).reduce(function(h,m){var v=m.item,x=m.props,_=x.sectors||x.data||[];return h.concat(_.map(function(T){return{type:s.props.iconType||v.props.legendType,value:T.name,color:T.fill,payload:T}}))},[]):u=(r||[]).map(function(h){var m=h.item,v=m.type.defaultProps,x=v!==void 0?bh(bh({},v),m.props):{},_=x.dataKey,T=x.name,w=x.legendType,E=x.hide;return{inactive:E,dataKey:_,type:c.iconType||w||"square",color:bj(m),value:T||_,payload:x}}),bh(bh(bh({},c),tp.getWithHeight(s,i)),{},{payload:u,item:s})};function Fx(t){"@babel/helpers - typeof";return Fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fx(t)}function tB(t){return kle(t)||Ale(t)||Ele(t)||Tle()}function Tle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ele(t,e){if(t){if(typeof t=="string")return WP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WP(t,e)}}function Ale(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kle(t){if(Array.isArray(t))return WP(t)}function WP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function nB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ui(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nB(Object(n),!0).forEach(function(r){Dg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dg(t,e,n){return e=Mle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mle(t){var e=Nle(t,"string");return Fx(e)=="symbol"?e:e+""}function Nle(t,e){if(Fx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Va(t,e,n){return Pn(t)||Pn(e)?n:Hi(e)?fo(t,e,n):on(e)?e(t):n}function Qy(t,e,n,r){var i=koe(t,function(o){return Va(o,e)});if(n==="number"){var a=i.filter(function(o){return dt(o)||parseFloat(o)});return a.length?[LE(a),DE(a)]:[1/0,-1/0]}var s=r?i.filter(function(o){return!Pn(o)}):i;return s.map(function(o){return Hi(o)||o instanceof Date?o:""})}var Cle=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,o=(n=r?.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,u=0;u<o;u++){var h=u>0?i[u-1].coordinate:i[o-1].coordinate,m=i[u].coordinate,v=u>=o-1?i[0].coordinate:i[u+1].coordinate,x=void 0;if(ds(m-h)!==ds(v-m)){var _=[];if(ds(v-m)===ds(c[1]-c[0])){x=v;var T=m+c[1]-c[0];_[0]=Math.min(T,(T+h)/2),_[1]=Math.max(T,(T+h)/2)}else{x=h;var w=v+c[1]-c[0];_[0]=Math.min(m,(w+m)/2),_[1]=Math.max(m,(w+m)/2)}var E=[Math.min(m,(x+m)/2),Math.max(m,(x+m)/2)];if(e>E[0]&&e<=E[1]||e>=_[0]&&e<=_[1]){s=i[u].index;break}}else{var N=Math.min(h,v),C=Math.max(h,v);if(e>(N+m)/2&&e<=(C+m)/2){s=i[u].index;break}}}else for(var P=0;P<o;P++)if(P===0&&e<=(r[P].coordinate+r[P+1].coordinate)/2||P>0&&P<o-1&&e>(r[P].coordinate+r[P-1].coordinate)/2&&e<=(r[P].coordinate+r[P+1].coordinate)/2||P===o-1&&e>(r[P].coordinate+r[P-1].coordinate)/2){s=r[P].index;break}return s},bj=function(e){var n,r=e,i=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?ui(ui({},e.type.defaultProps),e.props):e.props,s=a.stroke,o=a.fill,c;switch(i){case"Line":c=s;break;case"Area":case"Radar":c=s&&s!=="none"?s:o;break;default:c=o;break}return c},Rle=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},o=Object.keys(a),c=0,u=o.length;c<u;c++)for(var h=a[o[c]].stackGroups,m=Object.keys(h),v=0,x=m.length;v<x;v++){var _=h[m[v]],T=_.items,w=_.cateAxisId,E=T.filter(function(O){return Fu(O.type).indexOf("Bar")>=0});if(E&&E.length){var N=E[0].type.defaultProps,C=N!==void 0?ui(ui({},N),E[0].props):E[0].props,P=C.barSize,I=C[w];s[I]||(s[I]=[]);var j=Pn(P)?n:P;s[I].push({item:E[0],stackList:E.slice(1),barSize:Pn(j)?void 0:fs(j,r,0)})}}return s},Ile=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,o=e.maxBarSize,c=s.length;if(c<1)return null;var u=fs(n,i,0,!0),h,m=[];if(s[0].barSize===+s[0].barSize){var v=!1,x=i/c,_=s.reduce(function(P,I){return P+I.barSize||0},0);_+=(c-1)*u,_>=i&&(_-=(c-1)*u,u=0),_>=i&&x>0&&(v=!0,x*=.9,_=c*x);var T=(i-_)/2>>0,w={offset:T-u,size:0};h=s.reduce(function(P,I){var j={item:I.item,position:{offset:w.offset+w.size+u,size:v?x:I.barSize}},O=[].concat(tB(P),[j]);return w=O[O.length-1].position,I.stackList&&I.stackList.length&&I.stackList.forEach(function(F){O.push({item:F,position:w})}),O},m)}else{var E=fs(r,i,0,!0);i-2*E-(c-1)*u<=0&&(u=0);var N=(i-2*E-(c-1)*u)/c;N>1&&(N>>=0);var C=o===+o?Math.min(N,o):N;h=s.reduce(function(P,I,j){var O=[].concat(tB(P),[{item:I.item,position:{offset:E+(N+u)*j+(N-C)/2,size:C}}]);return I.stackList&&I.stackList.length&&I.stackList.forEach(function(F){O.push({item:F,position:O[O.length-1].position})}),O},m)}return h},Ple=function(e,n,r,i){var a=r.children,s=r.width,o=r.margin,c=s-(o.left||0)-(o.right||0),u=y$({children:a,legendWidth:c});if(u){var h=i||{},m=h.width,v=h.height,x=u.align,_=u.verticalAlign,T=u.layout;if((T==="vertical"||T==="horizontal"&&_==="middle")&&x!=="center"&&dt(e[x]))return ui(ui({},e),{},Dg({},x,e[x]+(m||0)));if((T==="horizontal"||T==="vertical"&&x==="center")&&_!=="middle"&&dt(e[_]))return ui(ui({},e),{},Dg({},_,e[_]+(v||0)))}return e},Ole=function(e,n,r){return Pn(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},x$=function(e,n,r,i,a){var s=n.props.children,o=Wo(s,FE).filter(function(u){return Ole(i,a,u.props.direction)});if(o&&o.length){var c=o.map(function(u){return u.props.dataKey});return e.reduce(function(u,h){var m=Va(h,r);if(Pn(m))return u;var v=Array.isArray(m)?[LE(m),DE(m)]:[m,m],x=c.reduce(function(_,T){var w=Va(h,T,0),E=v[0]-Math.abs(Array.isArray(w)?w[0]:w),N=v[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(E,_[0]),Math.max(N,_[1])]},[1/0,-1/0]);return[Math.min(x[0],u[0]),Math.max(x[1],u[1])]},[1/0,-1/0])}return null},jle=function(e,n,r,i,a){var s=n.map(function(o){return x$(e,o,r,a,i)}).filter(function(o){return!Pn(o)});return s&&s.length?s.reduce(function(o,c){return[Math.min(o[0],c[0]),Math.max(o[1],c[1])]},[1/0,-1/0]):null},b$=function(e,n,r,i,a){var s=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&x$(e,c,u,i)||Qy(e,u,r,a)});if(r==="number")return s.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var o={};return s.reduce(function(c,u){for(var h=0,m=u.length;h<m;h++)o[u[h]]||(o[u[h]]=!0,c.push(u[h]));return c},[])},_$=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},w$=function(e,n,r,i){if(i)return e.map(function(c){return c.coordinate});var a,s,o=e.map(function(c){return c.coordinate===n&&(a=!0),c.coordinate===r&&(s=!0),c.coordinate});return a||o.push(n),s||o.push(r),o},zu=function(e,n,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,s=e.type,o=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&s==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&o?.length>=2?ds(o[0]-o[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var h=(e.ticks||e.niceTicks).map(function(m){var v=a?a.indexOf(m):m;return{coordinate:i(v)+u,value:m,offset:u}});return h.filter(function(m){return!Nb(m.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(m,v){return{coordinate:i(m)+u,value:m,index:v,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(m){return{coordinate:i(m)+u,value:m,offset:u}}):i.domain().map(function(m,v){return{coordinate:i(m)+u,value:a?a[m]:m,index:v,offset:u}})},vR=new WeakMap,Vw=function(e,n){if(typeof n!="function")return e;vR.has(e)||vR.set(e,new WeakMap);var r=vR.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},S$=function(e,n,r){var i=e.scale,a=e.type,s=e.layout,o=e.axisType;if(i==="auto")return s==="radial"&&o==="radiusAxis"?{scale:Px(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:k1(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Zy(),realScaleType:"point"}:a==="category"?{scale:Px(),realScaleType:"band"}:{scale:k1(),realScaleType:"linear"};if(cp(i)){var c="scale".concat(wE(i));return{scale:(Fz[c]||Zy)(),realScaleType:Fz[c]?c:"point"}}return on(i)?{scale:i}:{scale:Zy(),realScaleType:"point"}},rB=1e-4,T$=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),a=Math.min(i[0],i[1])-rB,s=Math.max(i[0],i[1])+rB,o=e(n[0]),c=e(n[r-1]);(o<a||o>s||c<a||c>s)&&e.domain([n[0],n[r-1]])}},Dle=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},Lle=function(e,n){if(!n||n.length!==2||!dt(n[0])||!dt(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!dt(e[0])||e[0]<r)&&(a[0]=r),(!dt(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},Ule=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0,o=0;o<n;++o){var c=Nb(e[o][r][1])?e[o][r][0]:e[o][r][1];c>=0?(e[o][r][0]=a,e[o][r][1]=a+c,a=e[o][r][1]):(e[o][r][0]=s,e[o][r][1]=s+c,s=e[o][r][1])}},zle=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0;s<n;++s){var o=Nb(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},Ble={sign:Ule,expand:kte,none:Vg,silhouette:Mte,wiggle:Nte,positive:zle},Fle=function(e,n,r){var i=n.map(function(o){return o.props.dataKey}),a=Ble[r],s=Ate().keys(i).value(function(o,c){return+Va(o,c,0)}).order(SP).offset(a);return s(e)},Vle=function(e,n,r,i,a,s){if(!e)return null;var o=s?n.reverse():n,c={},u=o.reduce(function(m,v){var x,_=(x=v.type)!==null&&x!==void 0&&x.defaultProps?ui(ui({},v.type.defaultProps),v.props):v.props,T=_.stackId,w=_.hide;if(w)return m;var E=_[r],N=m[E]||{hasStack:!1,stackGroups:{}};if(Hi(T)){var C=N.stackGroups[T]||{numericAxisId:r,cateAxisId:i,items:[]};C.items.push(v),N.hasStack=!0,N.stackGroups[T]=C}else N.stackGroups[Cb("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[v]};return ui(ui({},m),{},Dg({},E,N))},c),h={};return Object.keys(u).reduce(function(m,v){var x=u[v];if(x.hasStack){var _={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(T,w){var E=x.stackGroups[w];return ui(ui({},T),{},Dg({},w,{numericAxisId:r,cateAxisId:i,items:E.items,stackedData:Fle(e,E.items,a)}))},_)}return ui(ui({},m),{},Dg({},v,x))},h)},E$=function(e,n){var r=n.realScaleType,i=n.type,a=n.tickCount,s=n.originalDomain,o=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=e.domain();if(!u.length)return null;var h=nle(u,a,o);return e.domain([LE(h),DE(h)]),{niceTicks:h}}if(a&&i==="number"){var m=e.domain(),v=rle(m,a,o);return{niceTicks:v}}return null},iB=function(e){var n=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,s=e.entry,o=e.index;if(n.type==="category")return r[o]?r[o].coordinate+i:null;var c=Va(s,n.dataKey,n.domain[o]);return Pn(c)?null:n.scale(c)-a/2+i},Hle=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},Gle=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?ui(ui({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(Hi(a)){var s=n[a];if(s){var o=s.items.indexOf(e);return o>=0?s.stackedData[o]:null}}return null},qle=function(e){return e.reduce(function(n,r){return[LE(r.concat([n[0]]).filter(dt)),DE(r.concat([n[1]]).filter(dt))]},[1/0,-1/0])},A$=function(e,n,r){return Object.keys(e).reduce(function(i,a){var s=e[a],o=s.stackedData,c=o.reduce(function(u,h){var m=qle(h.slice(n,r+1));return[Math.min(u[0],m[0]),Math.max(u[1],m[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},aB=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,sB=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,KP=function(e,n,r){if(on(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(dt(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(aB.test(e[0])){var a=+aB.exec(e[0])[1];i[0]=n[0]-a}else on(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(dt(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(sB.test(e[1])){var s=+sB.exec(e[1])[1];i[1]=n[1]+s}else on(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},O1=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var a=KO(n,function(m){return m.coordinate}),s=1/0,o=1,c=a.length;o<c;o++){var u=a[o],h=a[o-1];s=Math.min((u.coordinate||0)-(h.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},oB=function(e,n,r){return!e||!e.length||UE(e,fo(r,"type.defaultProps.domain"))?n:e},k$=function(e,n){var r=e.type.defaultProps?ui(ui({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,s=r.unit,o=r.formatter,c=r.tooltipType,u=r.chartType,h=r.hide;return ui(ui({},rn(e,!1)),{},{dataKey:i,unit:s,formatter:o,name:a||i,color:bj(e),value:Va(n,i),type:c,payload:n,chartType:u,hide:h})};function Vx(t){"@babel/helpers - typeof";return Vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vx(t)}function lB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ou(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lB(Object(n),!0).forEach(function(r){M$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function M$(t,e,n){return e=$le(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $le(t){var e=Wle(t,"string");return Vx(e)=="symbol"?e:e+""}function Wle(t,e){if(Vx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kle(t,e){return Zle(t)||Jle(t,e)||Yle(t,e)||Xle()}function Xle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yle(t,e){if(t){if(typeof t=="string")return cB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cB(t,e)}}function cB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Jle(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Zle(t){if(Array.isArray(t))return t}var j1=Math.PI/180,Qle=function(e){return e*180/Math.PI},Cr=function(e,n,r,i){return{x:e+Math.cos(-j1*i)*r,y:n+Math.sin(-j1*i)*r}},N$=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},ece=function(e,n,r,i,a){var s=e.width,o=e.height,c=e.startAngle,u=e.endAngle,h=fs(e.cx,s,s/2),m=fs(e.cy,o,o/2),v=N$(s,o,r),x=fs(e.innerRadius,v,0),_=fs(e.outerRadius,v,v*.8),T=Object.keys(n);return T.reduce(function(w,E){var N=n[E],C=N.domain,P=N.reversed,I;if(Pn(N.range))i==="angleAxis"?I=[c,u]:i==="radiusAxis"&&(I=[x,_]),P&&(I=[I[1],I[0]]);else{I=N.range;var j=I,O=Kle(j,2);c=O[0],u=O[1]}var F=S$(N,a),L=F.realScaleType,z=F.scale;z.domain(C).range(I),T$(z);var V=E$(z,Ou(Ou({},N),{},{realScaleType:L})),G=Ou(Ou(Ou({},N),V),{},{range:I,radius:_,realScaleType:L,scale:z,cx:h,cy:m,innerRadius:x,outerRadius:_,startAngle:c,endAngle:u});return Ou(Ou({},w),{},M$({},E,G))},{})},tce=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-s,2))},nce=function(e,n){var r=e.x,i=e.y,a=n.cx,s=n.cy,o=tce({x:r,y:i},{x:a,y:s});if(o<=0)return{radius:o};var c=(r-a)/o,u=Math.acos(c);return i>s&&(u=2*Math.PI-u),{radius:o,angle:Qle(u),angleInRadian:u}},rce=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return{startAngle:n-s*360,endAngle:r-s*360}},ice=function(e,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),s=Math.floor(i/360),o=Math.min(a,s);return e+o*360},uB=function(e,n){var r=e.x,i=e.y,a=nce({x:r,y:i},n),s=a.radius,o=a.angle,c=n.innerRadius,u=n.outerRadius;if(s<c||s>u)return!1;if(s===0)return!0;var h=rce(n),m=h.startAngle,v=h.endAngle,x=o,_;if(m<=v){for(;x>v;)x-=360;for(;x<m;)x+=360;_=x>=m&&x<=v}else{for(;x>m;)x-=360;for(;x<v;)x+=360;_=x>=v&&x<=m}return _?Ou(Ou({},n),{},{radius:s,angle:ice(x,n)}):null},C$=function(e){return!J.isValidElement(e)&&!on(e)&&typeof e!="boolean"?e.className:""};function Hx(t){"@babel/helpers - typeof";return Hx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hx(t)}var ace=["offset"];function sce(t){return uce(t)||cce(t)||lce(t)||oce()}function oce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lce(t,e){if(t){if(typeof t=="string")return XP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XP(t,e)}}function cce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uce(t){if(Array.isArray(t))return XP(t)}function XP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dce(t,e){if(t==null)return{};var n=fce(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function dB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dB(Object(n),!0).forEach(function(r){hce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hce(t,e,n){return e=pce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pce(t){var e=mce(t,"string");return Hx(e)=="symbol"?e:e+""}function mce(t,e){if(Hx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gx(){return Gx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gx.apply(this,arguments)}var gce=function(e){var n=e.value,r=e.formatter,i=Pn(e.children)?n:e.children;return on(r)?r(i):i},vce=function(e,n){var r=ds(n-e),i=Math.min(Math.abs(n-e),360);return r*i},yce=function(e,n,r){var i=e.position,a=e.viewBox,s=e.offset,o=e.className,c=a,u=c.cx,h=c.cy,m=c.innerRadius,v=c.outerRadius,x=c.startAngle,_=c.endAngle,T=c.clockWise,w=(m+v)/2,E=vce(x,_),N=E>=0?1:-1,C,P;i==="insideStart"?(C=x+N*s,P=T):i==="insideEnd"?(C=_-N*s,P=!T):i==="end"&&(C=_+N*s,P=T),P=E<=0?P:!P;var I=Cr(u,h,w,C),j=Cr(u,h,w,C+(P?1:-1)*359),O="M".concat(I.x,",").concat(I.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(P?0:1,`,
    `).concat(j.x,",").concat(j.y),F=Pn(e.id)?Cb("recharts-radial-line-"):e.id;return ue.createElement("text",Gx({},r,{dominantBaseline:"central",className:En("recharts-radial-bar-label",o)}),ue.createElement("defs",null,ue.createElement("path",{id:F,d:O})),ue.createElement("textPath",{xlinkHref:"#".concat(F)},n))},xce=function(e){var n=e.viewBox,r=e.offset,i=e.position,a=n,s=a.cx,o=a.cy,c=a.innerRadius,u=a.outerRadius,h=a.startAngle,m=a.endAngle,v=(h+m)/2;if(i==="outside"){var x=Cr(s,o,u+r,v),_=x.x,T=x.y;return{x:_,y:T,textAnchor:_>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var w=(c+u)/2,E=Cr(s,o,w,v),N=E.x,C=E.y;return{x:N,y:C,textAnchor:"middle",verticalAnchor:"middle"}},bce=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,s=n,o=s.x,c=s.y,u=s.width,h=s.height,m=h>=0?1:-1,v=m*i,x=m>0?"end":"start",_=m>0?"start":"end",T=u>=0?1:-1,w=T*i,E=T>0?"end":"start",N=T>0?"start":"end";if(a==="top"){var C={x:o+u/2,y:c-m*i,textAnchor:"middle",verticalAnchor:x};return Bi(Bi({},C),r?{height:Math.max(c-r.y,0),width:u}:{})}if(a==="bottom"){var P={x:o+u/2,y:c+h+v,textAnchor:"middle",verticalAnchor:_};return Bi(Bi({},P),r?{height:Math.max(r.y+r.height-(c+h),0),width:u}:{})}if(a==="left"){var I={x:o-w,y:c+h/2,textAnchor:E,verticalAnchor:"middle"};return Bi(Bi({},I),r?{width:Math.max(I.x-r.x,0),height:h}:{})}if(a==="right"){var j={x:o+u+w,y:c+h/2,textAnchor:N,verticalAnchor:"middle"};return Bi(Bi({},j),r?{width:Math.max(r.x+r.width-j.x,0),height:h}:{})}var O=r?{width:u,height:h}:{};return a==="insideLeft"?Bi({x:o+w,y:c+h/2,textAnchor:N,verticalAnchor:"middle"},O):a==="insideRight"?Bi({x:o+u-w,y:c+h/2,textAnchor:E,verticalAnchor:"middle"},O):a==="insideTop"?Bi({x:o+u/2,y:c+v,textAnchor:"middle",verticalAnchor:_},O):a==="insideBottom"?Bi({x:o+u/2,y:c+h-v,textAnchor:"middle",verticalAnchor:x},O):a==="insideTopLeft"?Bi({x:o+w,y:c+v,textAnchor:N,verticalAnchor:_},O):a==="insideTopRight"?Bi({x:o+u-w,y:c+v,textAnchor:E,verticalAnchor:_},O):a==="insideBottomLeft"?Bi({x:o+w,y:c+h-v,textAnchor:N,verticalAnchor:x},O):a==="insideBottomRight"?Bi({x:o+u-w,y:c+h-v,textAnchor:E,verticalAnchor:x},O):Tv(a)&&(dt(a.x)||Wh(a.x))&&(dt(a.y)||Wh(a.y))?Bi({x:o+fs(a.x,u),y:c+fs(a.y,h),textAnchor:"end",verticalAnchor:"end"},O):Bi({x:o+u/2,y:c+h/2,textAnchor:"middle",verticalAnchor:"middle"},O)},_ce=function(e){return"cx"in e&&dt(e.cx)};function ta(t){var e=t.offset,n=e===void 0?5:e,r=dce(t,ace),i=Bi({offset:n},r),a=i.viewBox,s=i.position,o=i.value,c=i.children,u=i.content,h=i.className,m=h===void 0?"":h,v=i.textBreakAll;if(!a||Pn(o)&&Pn(c)&&!J.isValidElement(u)&&!on(u))return null;if(J.isValidElement(u))return J.cloneElement(u,i);var x;if(on(u)){if(x=J.createElement(u,i),J.isValidElement(x))return x}else x=gce(i);var _=_ce(a),T=rn(i,!0);if(_&&(s==="insideStart"||s==="insideEnd"||s==="end"))return yce(i,x,T);var w=_?xce(i):bce(i);return ue.createElement(dp,Gx({className:En("recharts-label",m)},T,w,{breakAll:v}),x)}ta.displayName="Label";var R$=function(e){var n=e.cx,r=e.cy,i=e.angle,a=e.startAngle,s=e.endAngle,o=e.r,c=e.radius,u=e.innerRadius,h=e.outerRadius,m=e.x,v=e.y,x=e.top,_=e.left,T=e.width,w=e.height,E=e.clockWise,N=e.labelViewBox;if(N)return N;if(dt(T)&&dt(w)){if(dt(m)&&dt(v))return{x:m,y:v,width:T,height:w};if(dt(x)&&dt(_))return{x,y:_,width:T,height:w}}return dt(m)&&dt(v)?{x:m,y:v,width:0,height:0}:dt(n)&&dt(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:s||i||0,innerRadius:u||0,outerRadius:h||c||o||0,clockWise:E}:e.viewBox?e.viewBox:{}},wce=function(e,n){return e?e===!0?ue.createElement(ta,{key:"label-implicit",viewBox:n}):Hi(e)?ue.createElement(ta,{key:"label-implicit",viewBox:n,value:e}):J.isValidElement(e)?e.type===ta?J.cloneElement(e,{key:"label-implicit",viewBox:n}):ue.createElement(ta,{key:"label-implicit",content:e,viewBox:n}):on(e)?ue.createElement(ta,{key:"label-implicit",content:e,viewBox:n}):Tv(e)?ue.createElement(ta,Gx({viewBox:n},e,{key:"label-implicit"})):null:null},Sce=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=R$(e),s=Wo(i,ta).map(function(c,u){return J.cloneElement(c,{viewBox:n||a,key:"label-".concat(u)})});if(!r)return s;var o=wce(e.label,n||a);return[o].concat(sce(s))};ta.parseViewBox=R$;ta.renderCallByParent=Sce;var yR,fB;function Tce(){if(fB)return yR;fB=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return yR=t,yR}var Ece=Tce();const Ace=Zn(Ece);function qx(t){"@babel/helpers - typeof";return qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qx(t)}var kce=["valueAccessor"],Mce=["data","dataKey","clockWise","id","textBreakAll"];function Nce(t){return Pce(t)||Ice(t)||Rce(t)||Cce()}function Cce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rce(t,e){if(t){if(typeof t=="string")return YP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YP(t,e)}}function Ice(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Pce(t){if(Array.isArray(t))return YP(t)}function YP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function D1(){return D1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D1.apply(this,arguments)}function hB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hB(Object(n),!0).forEach(function(r){Oce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oce(t,e,n){return e=jce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jce(t){var e=Dce(t,"string");return qx(e)=="symbol"?e:e+""}function Dce(t,e){if(qx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mB(t,e){if(t==null)return{};var n=Lce(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Lce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Uce=function(e){return Array.isArray(e.value)?Ace(e.value):e.value};function Hu(t){var e=t.valueAccessor,n=e===void 0?Uce:e,r=mB(t,kce),i=r.data,a=r.dataKey,s=r.clockWise,o=r.id,c=r.textBreakAll,u=mB(r,Mce);return!i||!i.length?null:ue.createElement(lr,{className:"recharts-label-list"},i.map(function(h,m){var v=Pn(a)?n(h,m):Va(h&&h.payload,a),x=Pn(o)?{}:{id:"".concat(o,"-").concat(m)};return ue.createElement(ta,D1({},rn(h,!0),u,x,{parentViewBox:h.parentViewBox,value:v,textBreakAll:c,viewBox:ta.parseViewBox(Pn(s)?h:pB(pB({},h),{},{clockWise:s})),key:"label-".concat(m),index:m}))}))}Hu.displayName="LabelList";function zce(t,e){return t?t===!0?ue.createElement(Hu,{key:"labelList-implicit",data:e}):ue.isValidElement(t)||on(t)?ue.createElement(Hu,{key:"labelList-implicit",data:e,content:t}):Tv(t)?ue.createElement(Hu,D1({data:e},t,{key:"labelList-implicit"})):null:null}function Bce(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Wo(r,Hu).map(function(s,o){return J.cloneElement(s,{data:e,key:"labelList-".concat(o)})});if(!n)return i;var a=zce(t.label,e);return[a].concat(Nce(i))}Hu.renderCallByParent=Bce;function $x(t){"@babel/helpers - typeof";return $x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$x(t)}function JP(){return JP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JP.apply(this,arguments)}function gB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gB(Object(n),!0).forEach(function(r){Fce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fce(t,e,n){return e=Vce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vce(t){var e=Hce(t,"string");return $x(e)=="symbol"?e:e+""}function Hce(t,e){if($x(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($x(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Gce=function(e,n){var r=ds(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},Hw=function(e){var n=e.cx,r=e.cy,i=e.radius,a=e.angle,s=e.sign,o=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,h=c*(o?1:-1)+i,m=Math.asin(c/h)/j1,v=u?a:a+s*m,x=Cr(n,r,h,v),_=Cr(n,r,i,v),T=u?a-s*m:a,w=Cr(n,r,h*Math.cos(m*j1),T);return{center:x,circleTangency:_,lineTangency:w,theta:m}},I$=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.startAngle,o=e.endAngle,c=Gce(s,o),u=s+c,h=Cr(n,r,a,s),m=Cr(n,r,a,u),v="M ".concat(h.x,",").concat(h.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(s>u),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(i>0){var x=Cr(n,r,i,s),_=Cr(n,r,i,u);v+="L ".concat(_.x,",").concat(_.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(s<=u),`,
            `).concat(x.x,",").concat(x.y," Z")}else v+="L ".concat(n,",").concat(r," Z");return v},qce=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,o=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,h=e.endAngle,m=ds(h-u),v=Hw({cx:n,cy:r,radius:a,angle:u,sign:m,cornerRadius:s,cornerIsExternal:c}),x=v.circleTangency,_=v.lineTangency,T=v.theta,w=Hw({cx:n,cy:r,radius:a,angle:h,sign:-m,cornerRadius:s,cornerIsExternal:c}),E=w.circleTangency,N=w.lineTangency,C=w.theta,P=c?Math.abs(u-h):Math.abs(u-h)-T-C;if(P<0)return o?"M ".concat(_.x,",").concat(_.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):I$({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:h});var I="M ".concat(_.x,",").concat(_.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(P>180),",").concat(+(m<0),",").concat(E.x,",").concat(E.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(N.x,",").concat(N.y,`
  `);if(i>0){var j=Hw({cx:n,cy:r,radius:i,angle:u,sign:m,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),O=j.circleTangency,F=j.lineTangency,L=j.theta,z=Hw({cx:n,cy:r,radius:i,angle:h,sign:-m,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),V=z.circleTangency,G=z.lineTangency,$=z.theta,ee=c?Math.abs(u-h):Math.abs(u-h)-L-$;if(ee<0&&s===0)return"".concat(I,"L").concat(n,",").concat(r,"Z");I+="L".concat(G.x,",").concat(G.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(V.x,",").concat(V.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(ee>180),",").concat(+(m>0),",").concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(F.x,",").concat(F.y,"Z")}else I+="L".concat(n,",").concat(r,"Z");return I},$ce={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},_j=function(e){var n=vB(vB({},$ce),e),r=n.cx,i=n.cy,a=n.innerRadius,s=n.outerRadius,o=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,h=n.startAngle,m=n.endAngle,v=n.className;if(s<a||h===m)return null;var x=En("recharts-sector",v),_=s-a,T=fs(o,_,0,!0),w;return T>0&&Math.abs(h-m)<360?w=qce({cx:r,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(T,_/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:h,endAngle:m}):w=I$({cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:h,endAngle:m}),ue.createElement("path",JP({},rn(n,!0),{className:x,d:w,role:"img"}))};function Wx(t){"@babel/helpers - typeof";return Wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wx(t)}function ZP(){return ZP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZP.apply(this,arguments)}function yB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yB(Object(n),!0).forEach(function(r){Wce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wce(t,e,n){return e=Kce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kce(t){var e=Xce(t,"string");return Wx(e)=="symbol"?e:e+""}function Xce(t,e){if(Wx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bB={curveBasisClosed:mte,curveBasisOpen:gte,curveBasis:pte,curveBumpX:ete,curveBumpY:tte,curveLinearClosed:vte,curveLinear:TE,curveMonotoneX:yte,curveMonotoneY:xte,curveNatural:bte,curveStep:_te,curveStepAfter:Ste,curveStepBefore:wte},Gw=function(e){return e.x===+e.x&&e.y===+e.y},yy=function(e){return e.x},xy=function(e){return e.y},Yce=function(e,n){if(on(e))return e;var r="curve".concat(wE(e));return(r==="curveMonotone"||r==="curveBump")&&n?bB["".concat(r).concat(n==="vertical"?"Y":"X")]:bB[r]||TE},Jce=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,a=i===void 0?[]:i,s=e.baseLine,o=e.layout,c=e.connectNulls,u=c===void 0?!1:c,h=Yce(r,o),m=u?a.filter(function(T){return Gw(T)}):a,v;if(Array.isArray(s)){var x=u?s.filter(function(T){return Gw(T)}):s,_=m.map(function(T,w){return xB(xB({},T),{},{base:x[w]})});return o==="vertical"?v=jw().y(xy).x1(yy).x0(function(T){return T.base.x}):v=jw().x(yy).y1(xy).y0(function(T){return T.base.y}),v.defined(Gw).curve(h),v(_)}return o==="vertical"&&dt(s)?v=jw().y(xy).x1(yy).x0(s):dt(s)?v=jw().x(yy).y1(xy).y0(s):v=IG().x(yy).y(xy),v.defined(Gw).curve(h),v(m)},QP=function(e){var n=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?Jce(e):i;return J.createElement("path",ZP({},rn(e,!1),c1(e),{className:En("recharts-curve",n),d:s,ref:a}))},xR={exports:{}},bR,_B;function Zce(){if(_B)return bR;_B=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return bR=t,bR}var _R,wB;function Qce(){if(wB)return _R;wB=1;var t=Zce();function e(){}function n(){}return n.resetWarningCache=e,_R=function(){function r(s,o,c,u,h,m){if(m!==t){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},_R}var SB;function eue(){return SB||(SB=1,xR.exports=Qce()()),xR.exports}var tue=eue();const sr=Zn(tue),{getOwnPropertyNames:nue,getOwnPropertySymbols:rue}=Object,{hasOwnProperty:iue}=Object.prototype;function wR(t,e){return function(r,i,a){return t(r,i,a)&&e(r,i,a)}}function qw(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:a}=i,s=a.get(n),o=a.get(r);if(s&&o)return s===r&&o===n;a.set(n,r),a.set(r,n);const c=t(n,r,i);return a.delete(n),a.delete(r),c}}function aue(t){return t?.[Symbol.toStringTag]}function TB(t){return nue(t).concat(rue(t))}const sue=Object.hasOwn||((t,e)=>iue.call(t,e));function Tp(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const oue="__v",lue="__o",cue="_owner",{getOwnPropertyDescriptor:EB,keys:AB}=Object;function uue(t,e){return t.byteLength===e.byteLength&&L1(new Uint8Array(t),new Uint8Array(e))}function due(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function fue(t,e){return t.byteLength===e.byteLength&&L1(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function hue(t,e){return Tp(t.getTime(),e.getTime())}function pue(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function mue(t,e){return t===e}function kB(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),a=t.entries();let s,o,c=0;for(;(s=a.next())&&!s.done;){const u=e.entries();let h=!1,m=0;for(;(o=u.next())&&!o.done;){if(i[m]){m++;continue}const v=s.value,x=o.value;if(n.equals(v[0],x[0],c,m,t,e,n)&&n.equals(v[1],x[1],v[0],x[0],t,e,n)){h=i[m]=!0;break}m++}if(!h)return!1;c++}return!0}const gue=Tp;function vue(t,e,n){const r=AB(t);let i=r.length;if(AB(e).length!==i)return!1;for(;i-- >0;)if(!P$(t,e,n,r[i]))return!1;return!0}function by(t,e,n){const r=TB(t);let i=r.length;if(TB(e).length!==i)return!1;let a,s,o;for(;i-- >0;)if(a=r[i],!P$(t,e,n,a)||(s=EB(t,a),o=EB(e,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function yue(t,e){return Tp(t.valueOf(),e.valueOf())}function xue(t,e){return t.source===e.source&&t.flags===e.flags}function MB(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),a=t.values();let s,o;for(;(s=a.next())&&!s.done;){const c=e.values();let u=!1,h=0;for(;(o=c.next())&&!o.done;){if(!i[h]&&n.equals(s.value,o.value,s.value,o.value,t,e,n)){u=i[h]=!0;break}h++}if(!u)return!1}return!0}function L1(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function bue(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function P$(t,e,n,r){return(r===cue||r===lue||r===oue)&&(t.$$typeof||e.$$typeof)?!0:sue(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const _ue="[object ArrayBuffer]",wue="[object Arguments]",Sue="[object Boolean]",Tue="[object DataView]",Eue="[object Date]",Aue="[object Error]",kue="[object Map]",Mue="[object Number]",Nue="[object Object]",Cue="[object RegExp]",Rue="[object Set]",Iue="[object String]",Pue={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Oue="[object URL]",jue=Object.prototype.toString;function Due({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:a,areMapsEqual:s,areNumbersEqual:o,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:h,areSetsEqual:m,areTypedArraysEqual:v,areUrlsEqual:x,unknownTagComparators:_}){return function(w,E,N){if(w===E)return!0;if(w==null||E==null)return!1;const C=typeof w;if(C!==typeof E)return!1;if(C!=="object")return C==="number"?o(w,E,N):C==="function"?a(w,E,N):!1;const P=w.constructor;if(P!==E.constructor)return!1;if(P===Object)return c(w,E,N);if(Array.isArray(w))return e(w,E,N);if(P===Date)return r(w,E,N);if(P===RegExp)return h(w,E,N);if(P===Map)return s(w,E,N);if(P===Set)return m(w,E,N);const I=jue.call(w);if(I===Eue)return r(w,E,N);if(I===Cue)return h(w,E,N);if(I===kue)return s(w,E,N);if(I===Rue)return m(w,E,N);if(I===Nue)return typeof w.then!="function"&&typeof E.then!="function"&&c(w,E,N);if(I===Oue)return x(w,E,N);if(I===Aue)return i(w,E,N);if(I===wue)return c(w,E,N);if(Pue[I])return v(w,E,N);if(I===_ue)return t(w,E,N);if(I===Tue)return n(w,E,N);if(I===Sue||I===Mue||I===Iue)return u(w,E,N);if(_){let j=_[I];if(!j){const O=aue(w);O&&(j=_[O])}if(j)return j(w,E,N)}return!1}}function Lue({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:uue,areArraysEqual:n?by:due,areDataViewsEqual:fue,areDatesEqual:hue,areErrorsEqual:pue,areFunctionsEqual:mue,areMapsEqual:n?wR(kB,by):kB,areNumbersEqual:gue,areObjectsEqual:n?by:vue,arePrimitiveWrappersEqual:yue,areRegExpsEqual:xue,areSetsEqual:n?wR(MB,by):MB,areTypedArraysEqual:n?wR(L1,by):L1,areUrlsEqual:bue,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=qw(r.areArraysEqual),a=qw(r.areMapsEqual),s=qw(r.areObjectsEqual),o=qw(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:o})}return r}function Uue(t){return function(e,n,r,i,a,s,o){return t(e,n,o)}}function zue({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(o,c){const{cache:u=t?new WeakMap:void 0,meta:h}=n();return e(o,c,{cache:u,equals:r,meta:h,strict:i})};if(t)return function(o,c){return e(o,c,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const a={cache:void 0,equals:r,meta:void 0,strict:i};return function(o,c){return e(o,c,a)}}const Bue=kf();kf({strict:!0});kf({circular:!0});kf({circular:!0,strict:!0});kf({createInternalComparator:()=>Tp});kf({strict:!0,createInternalComparator:()=>Tp});kf({circular:!0,createInternalComparator:()=>Tp});kf({circular:!0,createInternalComparator:()=>Tp,strict:!0});function kf(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,a=Lue(t),s=Due(a),o=n?n(s):Uue(s);return zue({circular:e,comparator:s,createState:r,equals:o,strict:i})}function Fue(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function NB(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>e?(t(a),n=-1):Fue(i)};requestAnimationFrame(r)}function e3(t){"@babel/helpers - typeof";return e3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e3(t)}function Vue(t){return $ue(t)||que(t)||Gue(t)||Hue()}function Hue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gue(t,e){if(t){if(typeof t=="string")return CB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CB(t,e)}}function CB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function que(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $ue(t){if(Array.isArray(t))return t}function Wue(){var t={},e=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var s=a,o=Vue(s),c=o[0],u=o.slice(1);if(typeof c=="number"){NB(i.bind(null,u),c);return}i(c),NB(i.bind(null,u));return}e3(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function Kx(t){"@babel/helpers - typeof";return Kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kx(t)}function RB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RB(Object(n),!0).forEach(function(r){O$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function O$(t,e,n){return e=Kue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kue(t){var e=Xue(t,"string");return Kx(e)==="symbol"?e:String(e)}function Xue(t,e){if(Kx(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Kx(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yue=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},Jue=function(e){return e},Zue=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},ex=function(e,n){return Object.keys(n).reduce(function(r,i){return IB(IB({},r),{},O$({},i,e(i,n[i])))},{})},PB=function(e,n,r){return e.map(function(i){return"".concat(Zue(i)," ").concat(n,"ms ").concat(r)}).join(",")};function Que(t,e){return nde(t)||tde(t,e)||j$(t,e)||ede()}function ede(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function nde(t){if(Array.isArray(t))return t}function rde(t){return sde(t)||ade(t)||j$(t)||ide()}function ide(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j$(t,e){if(t){if(typeof t=="string")return t3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t3(t,e)}}function ade(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sde(t){if(Array.isArray(t))return t3(t)}function t3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var U1=1e-4,D$=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},L$=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},OB=function(e,n){return function(r){var i=D$(e,n);return L$(i,r)}},ode=function(e,n){return function(r){var i=D$(e,n),a=[].concat(rde(i.map(function(s,o){return s*o}).slice(1)),[0]);return L$(a,r)}},jB=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,s=1,o=1;break;case"ease":i=.25,a=.1,s=.25,o=1;break;case"ease-in":i=.42,a=0,s=1,o=1;break;case"ease-out":i=.42,a=0,s=.58,o=1;break;case"ease-in-out":i=0,a=0,s=.58,o=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),h=Que(u,4);i=h[0],a=h[1],s=h[2],o=h[3]}}}var m=OB(i,s),v=OB(a,o),x=ode(i,s),_=function(E){return E>1?1:E<0?0:E},T=function(E){for(var N=E>1?1:E,C=N,P=0;P<8;++P){var I=m(C)-N,j=x(C);if(Math.abs(I-N)<U1||j<U1)return v(C);C=_(C-I/j)}return v(C)};return T.isStepper=!1,T},lde=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,a=i===void 0?8:i,s=e.dt,o=s===void 0?17:s,c=function(h,m,v){var x=-(h-m)*r,_=v*a,T=v+(x-_)*o/1e3,w=v*o/1e3+h;return Math.abs(w-m)<U1&&Math.abs(T)<U1?[m,0]:[w,T]};return c.isStepper=!0,c.dt=o,c},cde=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return jB(i);case"spring":return lde();default:if(i.split("(")[0]==="cubic-bezier")return jB(i)}return typeof i=="function"?i:null};function Xx(t){"@babel/helpers - typeof";return Xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xx(t)}function DB(t){return fde(t)||dde(t)||U$(t)||ude()}function ude(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fde(t){if(Array.isArray(t))return r3(t)}function LB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ba(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LB(Object(n),!0).forEach(function(r){n3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function n3(t,e,n){return e=hde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hde(t){var e=pde(t,"string");return Xx(e)==="symbol"?e:String(e)}function pde(t,e){if(Xx(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xx(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mde(t,e){return yde(t)||vde(t,e)||U$(t,e)||gde()}function gde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U$(t,e){if(t){if(typeof t=="string")return r3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r3(t,e)}}function r3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function yde(t){if(Array.isArray(t))return t}var z1=function(e,n,r){return e+(n-e)*r},i3=function(e){var n=e.from,r=e.to;return n!==r},xde=function t(e,n,r){var i=ex(function(a,s){if(i3(s)){var o=e(s.from,s.to,s.velocity),c=mde(o,2),u=c[0],h=c[1];return ba(ba({},s),{},{from:u,velocity:h})}return s},n);return r<1?ex(function(a,s){return i3(s)?ba(ba({},s),{},{velocity:z1(s.velocity,i[a].velocity,r),from:z1(s.from,i[a].from,r)}):s},n):t(e,i,r-1)};const bde=(function(t,e,n,r,i){var a=Yue(t,e),s=a.reduce(function(w,E){return ba(ba({},w),{},n3({},E,[t[E],e[E]]))},{}),o=a.reduce(function(w,E){return ba(ba({},w),{},n3({},E,{from:t[E],velocity:0,to:e[E]}))},{}),c=-1,u,h,m=function(){return null},v=function(){return ex(function(E,N){return N.from},o)},x=function(){return!Object.values(o).filter(i3).length},_=function(E){u||(u=E);var N=E-u,C=N/n.dt;o=xde(n,o,C),i(ba(ba(ba({},t),e),v())),u=E,x()||(c=requestAnimationFrame(m))},T=function(E){h||(h=E);var N=(E-h)/r,C=ex(function(I,j){return z1.apply(void 0,DB(j).concat([n(N)]))},s);if(i(ba(ba(ba({},t),e),C)),N<1)c=requestAnimationFrame(m);else{var P=ex(function(I,j){return z1.apply(void 0,DB(j).concat([n(1)]))},s);i(ba(ba(ba({},t),e),P))}};return m=n.isStepper?_:T,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(c)}}});function Jg(t){"@babel/helpers - typeof";return Jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jg(t)}var _de=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function wde(t,e){if(t==null)return{};var n=Sde(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Sde(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function SR(t){return kde(t)||Ade(t)||Ede(t)||Tde()}function Tde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ede(t,e){if(t){if(typeof t=="string")return a3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a3(t,e)}}function Ade(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kde(t){if(Array.isArray(t))return a3(t)}function a3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function UB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Al(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UB(Object(n),!0).forEach(function(r){Vy(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vy(t,e,n){return e=z$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,z$(r.key),r)}}function Cde(t,e,n){return e&&Nde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function z$(t){var e=Rde(t,"string");return Jg(e)==="symbol"?e:String(e)}function Rde(t,e){if(Jg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ide(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s3(t,e)}function s3(t,e){return s3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},s3(t,e)}function Pde(t){var e=Ode();return function(){var r=B1(t),i;if(e){var a=B1(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return o3(this,i)}}function o3(t,e){if(e&&(Jg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l3(t)}function l3(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ode(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function B1(t){return B1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},B1(t)}var Ku=(function(t){Ide(n,t);var e=Pde(n);function n(r,i){var a;Mde(this,n),a=e.call(this,r,i);var s=a.props,o=s.isActive,c=s.attributeName,u=s.from,h=s.to,m=s.steps,v=s.children,x=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(l3(a)),a.changeStyle=a.changeStyle.bind(l3(a)),!o||x<=0)return a.state={style:{}},typeof v=="function"&&(a.state={style:h}),o3(a);if(m&&m.length)a.state={style:m[0].style};else if(u){if(typeof v=="function")return a.state={style:u},o3(a);a.state={style:c?Vy({},c,u):u}}else a.state={style:{}};return a}return Cde(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,o=a.canBegin,c=a.attributeName,u=a.shouldReAnimate,h=a.to,m=a.from,v=this.state.style;if(o){if(!s){var x={style:c?Vy({},c,h):h};this.state&&v&&(c&&v[c]!==h||!c&&v!==h)&&this.setState(x);return}if(!(Bue(i.to,h)&&i.canBegin&&i.isActive)){var _=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var T=_||u?m:i.to;if(this.state&&v){var w={style:c?Vy({},c,T):T};(c&&v[c]!==T||!c&&v!==T)&&this.setState(w)}this.runAnimation(Al(Al({},this.props),{},{from:T,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,o=i.to,c=i.duration,u=i.easing,h=i.begin,m=i.onAnimationEnd,v=i.onAnimationStart,x=bde(s,o,cde(u),c,this.changeStyle),_=function(){a.stopJSAnimation=x()};this.manager.start([v,h,_,c,m])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,o=i.begin,c=i.onAnimationStart,u=s[0],h=u.style,m=u.duration,v=m===void 0?0:m,x=function(T,w,E){if(E===0)return T;var N=w.duration,C=w.easing,P=C===void 0?"ease":C,I=w.style,j=w.properties,O=w.onAnimationEnd,F=E>0?s[E-1]:w,L=j||Object.keys(I);if(typeof P=="function"||P==="spring")return[].concat(SR(T),[a.runJSAnimation.bind(a,{from:F.style,to:I,duration:N,easing:P}),N]);var z=PB(L,N,P),V=Al(Al(Al({},F.style),I),{},{transition:z});return[].concat(SR(T),[V,N,O]).filter(Jue)};return this.manager.start([c].concat(SR(s.reduce(x,[h,Math.max(v,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Wue());var a=i.begin,s=i.duration,o=i.attributeName,c=i.to,u=i.easing,h=i.onAnimationStart,m=i.onAnimationEnd,v=i.steps,x=i.children,_=this.manager;if(this.unSubscribe=_.subscribe(this.handleStyleChange),typeof u=="function"||typeof x=="function"||u==="spring"){this.runJSAnimation(i);return}if(v.length>1){this.runStepAnimation(i);return}var T=o?Vy({},o,c):c,w=PB(Object.keys(T),s,u);_.start([h,a,Al(Al({},T),{},{transition:w}),s,m])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=wde(i,_de),u=J.Children.count(a),h=this.state.style;if(typeof a=="function")return a(h);if(!o||u===0||s<=0)return a;var m=function(x){var _=x.props,T=_.style,w=T===void 0?{}:T,E=_.className,N=J.cloneElement(x,Al(Al({},c),{},{style:Al(Al({},w),h),className:E}));return N};return u===1?m(J.Children.only(a)):ue.createElement("div",null,J.Children.map(a,function(v){return m(v)}))}}]),n})(J.PureComponent);Ku.displayName="Animate";Ku.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ku.propTypes={from:sr.oneOfType([sr.object,sr.string]),to:sr.oneOfType([sr.object,sr.string]),attributeName:sr.string,duration:sr.number,begin:sr.number,easing:sr.oneOfType([sr.string,sr.func]),steps:sr.arrayOf(sr.shape({duration:sr.number.isRequired,style:sr.object.isRequired,easing:sr.oneOfType([sr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),sr.func]),properties:sr.arrayOf("string"),onAnimationEnd:sr.func})),children:sr.oneOfType([sr.node,sr.func]),isActive:sr.bool,canBegin:sr.bool,onAnimationEnd:sr.func,shouldReAnimate:sr.bool,onAnimationStart:sr.func,onAnimationReStart:sr.func};function Yx(t){"@babel/helpers - typeof";return Yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yx(t)}function F1(){return F1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F1.apply(this,arguments)}function jde(t,e){return zde(t)||Ude(t,e)||Lde(t,e)||Dde()}function Dde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lde(t,e){if(t){if(typeof t=="string")return zB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zB(t,e)}}function zB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ude(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function zde(t){if(Array.isArray(t))return t}function BB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BB(Object(n),!0).forEach(function(r){Bde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bde(t,e,n){return e=Fde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fde(t){var e=Vde(t,"string");return Yx(e)=="symbol"?e:e+""}function Vde(t,e){if(Yx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VB=function(e,n,r,i,a){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,c=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,h;if(s>0&&a instanceof Array){for(var m=[0,0,0,0],v=0,x=4;v<x;v++)m[v]=a[v]>s?s:a[v];h="M".concat(e,",").concat(n+o*m[0]),m[0]>0&&(h+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(u,",").concat(e+c*m[0],",").concat(n)),h+="L ".concat(e+r-c*m[1],",").concat(n),m[1]>0&&(h+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+o*m[1])),h+="L ".concat(e+r,",").concat(n+i-o*m[2]),m[2]>0&&(h+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(u,`,
        `).concat(e+r-c*m[2],",").concat(n+i)),h+="L ".concat(e+c*m[3],",").concat(n+i),m[3]>0&&(h+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-o*m[3])),h+="Z"}else if(s>0&&a===+a&&a>0){var _=Math.min(s,a);h="M ".concat(e,",").concat(n+o*_,`
            A `).concat(_,",").concat(_,",0,0,").concat(u,",").concat(e+c*_,",").concat(n,`
            L `).concat(e+r-c*_,",").concat(n,`
            A `).concat(_,",").concat(_,",0,0,").concat(u,",").concat(e+r,",").concat(n+o*_,`
            L `).concat(e+r,",").concat(n+i-o*_,`
            A `).concat(_,",").concat(_,",0,0,").concat(u,",").concat(e+r-c*_,",").concat(n+i,`
            L `).concat(e+c*_,",").concat(n+i,`
            A `).concat(_,",").concat(_,",0,0,").concat(u,",").concat(e,",").concat(n+i-o*_," Z")}else h="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return h},Hde=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,a=n.x,s=n.y,o=n.width,c=n.height;if(Math.abs(o)>0&&Math.abs(c)>0){var u=Math.min(a,a+o),h=Math.max(a,a+o),m=Math.min(s,s+c),v=Math.max(s,s+c);return r>=u&&r<=h&&i>=m&&i<=v}return!1},Gde={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},wj=function(e){var n=FB(FB({},Gde),e),r=J.useRef(),i=J.useState(-1),a=jde(i,2),s=a[0],o=a[1];J.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var P=r.current.getTotalLength();P&&o(P)}catch{}},[]);var c=n.x,u=n.y,h=n.width,m=n.height,v=n.radius,x=n.className,_=n.animationEasing,T=n.animationDuration,w=n.animationBegin,E=n.isAnimationActive,N=n.isUpdateAnimationActive;if(c!==+c||u!==+u||h!==+h||m!==+m||h===0||m===0)return null;var C=En("recharts-rectangle",x);return N?ue.createElement(Ku,{canBegin:s>0,from:{width:h,height:m,x:c,y:u},to:{width:h,height:m,x:c,y:u},duration:T,animationEasing:_,isActive:N},function(P){var I=P.width,j=P.height,O=P.x,F=P.y;return ue.createElement(Ku,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:T,isActive:E,easing:_},ue.createElement("path",F1({},rn(n,!0),{className:C,d:VB(O,F,I,j,v),ref:r})))}):ue.createElement("path",F1({},rn(n,!0),{className:C,d:VB(c,u,h,m,v)}))},qde=["points","className","baseLinePoints","connectNulls"];function Tg(){return Tg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tg.apply(this,arguments)}function $de(t,e){if(t==null)return{};var n=Wde(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Wde(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function HB(t){return Jde(t)||Yde(t)||Xde(t)||Kde()}function Kde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xde(t,e){if(t){if(typeof t=="string")return c3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c3(t,e)}}function Yde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Jde(t){if(Array.isArray(t))return c3(t)}function c3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var GB=function(e){return e&&e.x===+e.x&&e.y===+e.y},Zde=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){GB(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),GB(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},tx=function(e,n){var r=Zde(e);n&&(r=[r.reduce(function(a,s){return[].concat(HB(a),HB(s))},[])]);var i=r.map(function(a){return a.reduce(function(s,o,c){return"".concat(s).concat(c===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},Qde=function(e,n,r){var i=tx(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(tx(n.reverse(),r).slice(1))},efe=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,a=e.connectNulls,s=$de(e,qde);if(!n||!n.length)return null;var o=En("recharts-polygon",r);if(i&&i.length){var c=s.stroke&&s.stroke!=="none",u=Qde(n,i,a);return ue.createElement("g",{className:o},ue.createElement("path",Tg({},rn(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),c?ue.createElement("path",Tg({},rn(s,!0),{fill:"none",d:tx(n,a)})):null,c?ue.createElement("path",Tg({},rn(s,!0),{fill:"none",d:tx(i,a)})):null)}var h=tx(n,a);return ue.createElement("path",Tg({},rn(s,!0),{fill:h.slice(-1)==="Z"?s.fill:"none",className:o,d:h}))};function u3(){return u3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u3.apply(this,arguments)}var Sj=function(e){var n=e.cx,r=e.cy,i=e.r,a=e.className,s=En("recharts-dot",a);return n===+n&&r===+r&&i===+i?J.createElement("circle",u3({},rn(e,!1),c1(e),{className:s,cx:n,cy:r,r:i})):null};function Jx(t){"@babel/helpers - typeof";return Jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jx(t)}var tfe=["x","y","top","left","width","height","className"];function d3(){return d3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d3.apply(this,arguments)}function qB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nfe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qB(Object(n),!0).forEach(function(r){rfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rfe(t,e,n){return e=ife(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ife(t){var e=afe(t,"string");return Jx(e)=="symbol"?e:e+""}function afe(t,e){if(Jx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sfe(t,e){if(t==null)return{};var n=ofe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ofe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var lfe=function(e,n,r,i,a,s){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(n,"h").concat(r)},cfe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.top,o=s===void 0?0:s,c=e.left,u=c===void 0?0:c,h=e.width,m=h===void 0?0:h,v=e.height,x=v===void 0?0:v,_=e.className,T=sfe(e,tfe),w=nfe({x:r,y:a,top:o,left:u,width:m,height:x},T);return!dt(r)||!dt(a)||!dt(m)||!dt(x)||!dt(o)||!dt(u)?null:ue.createElement("path",d3({},rn(w,!0),{className:En("recharts-cross",_),d:lfe(r,a,m,x,o,u)}))},TR,$B;function ufe(){if($B)return TR;$B=1;var t=jE(),e=t$(),n=Vc();function r(i,a){return i&&i.length?t(i,n(a,2),e):void 0}return TR=r,TR}var dfe=ufe();const ffe=Zn(dfe);var ER,WB;function hfe(){if(WB)return ER;WB=1;var t=jE(),e=Vc(),n=n$();function r(i,a){return i&&i.length?t(i,e(a,2),n):void 0}return ER=r,ER}var pfe=hfe();const mfe=Zn(pfe);var gfe=["cx","cy","angle","ticks","axisLine"],vfe=["ticks","tick","angle","tickFormatter","stroke"];function Zg(t){"@babel/helpers - typeof";return Zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zg(t)}function nx(){return nx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nx.apply(this,arguments)}function KB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _h(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KB(Object(n),!0).forEach(function(r){VE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XB(t,e){if(t==null)return{};var n=yfe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yfe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function xfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,F$(r.key),r)}}function bfe(t,e,n){return e&&YB(t.prototype,e),n&&YB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _fe(t,e,n){return e=V1(e),wfe(t,B$()?Reflect.construct(e,n||[],V1(t).constructor):e.apply(t,n))}function wfe(t,e){if(e&&(Zg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sfe(t)}function Sfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B$=function(){return!!t})()}function V1(t){return V1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},V1(t)}function Tfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f3(t,e)}function f3(t,e){return f3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},f3(t,e)}function VE(t,e,n){return e=F$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function F$(t){var e=Efe(t,"string");return Zg(e)=="symbol"?e:e+""}function Efe(t,e){if(Zg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var HE=(function(t){function e(){return xfe(this,e),_fe(this,e,arguments)}return Tfe(e,t),bfe(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,a=this.props,s=a.angle,o=a.cx,c=a.cy;return Cr(o,c,i,s)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,o=r.ticks,c=ffe(o,function(h){return h.coordinate||0}),u=mfe(o,function(h){return h.coordinate||0});return{cx:i,cy:a,startAngle:s,endAngle:s,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,o=r.ticks,c=r.axisLine,u=XB(r,gfe),h=o.reduce(function(_,T){return[Math.min(_[0],T.coordinate),Math.max(_[1],T.coordinate)]},[1/0,-1/0]),m=Cr(i,a,h[0],s),v=Cr(i,a,h[1],s),x=_h(_h(_h({},rn(u,!1)),{},{fill:"none"},rn(c,!1)),{},{x1:m.x,y1:m.y,x2:v.x,y2:v.y});return ue.createElement("line",nx({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,o=i.angle,c=i.tickFormatter,u=i.stroke,h=XB(i,vfe),m=this.getTickTextAnchor(),v=rn(h,!1),x=rn(s,!1),_=a.map(function(T,w){var E=r.getTickValueCoord(T),N=_h(_h(_h(_h({textAnchor:m,transform:"rotate(".concat(90-o,", ").concat(E.x,", ").concat(E.y,")")},v),{},{stroke:"none",fill:u},x),{},{index:w},E),{},{payload:T});return ue.createElement(lr,nx({className:En("recharts-polar-radius-axis-tick",C$(s)),key:"tick-".concat(T.coordinate)},up(r.props,T,w)),e.renderTickItem(s,N,c?c(T.value,w):T.value))});return ue.createElement(lr,{className:"recharts-polar-radius-axis-ticks"},_)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.axisLine,s=r.tick;return!i||!i.length?null:ue.createElement(lr,{className:En("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),s&&this.renderTicks(),ta.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,a){var s;return ue.isValidElement(r)?s=ue.cloneElement(r,i):on(r)?s=r(i):s=ue.createElement(dp,nx({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}])})(J.PureComponent);VE(HE,"displayName","PolarRadiusAxis");VE(HE,"axisType","radiusAxis");VE(HE,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Qg(t){"@babel/helpers - typeof";return Qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qg(t)}function Gh(){return Gh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gh.apply(this,arguments)}function JB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JB(Object(n),!0).forEach(function(r){GE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Afe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,H$(r.key),r)}}function kfe(t,e,n){return e&&ZB(t.prototype,e),n&&ZB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mfe(t,e,n){return e=H1(e),Nfe(t,V$()?Reflect.construct(e,n||[],H1(t).constructor):e.apply(t,n))}function Nfe(t,e){if(e&&(Qg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cfe(t)}function Cfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V$=function(){return!!t})()}function H1(t){return H1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},H1(t)}function Rfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h3(t,e)}function h3(t,e){return h3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},h3(t,e)}function GE(t,e,n){return e=H$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H$(t){var e=Ife(t,"string");return Qg(e)=="symbol"?e:e+""}function Ife(t,e){if(Qg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Pfe=Math.PI/180,QB=1e-5,qE=(function(t){function e(){return Afe(this,e),Mfe(this,e,arguments)}return Rfe(e,t),kfe(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.cx,s=i.cy,o=i.radius,c=i.orientation,u=i.tickSize,h=u||8,m=Cr(a,s,o,r.coordinate),v=Cr(a,s,o+(c==="inner"?-1:1)*h,r.coordinate);return{x1:m.x,y1:m.y,x2:v.x,y2:v.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,a=Math.cos(-r.coordinate*Pfe),s;return a>QB?s=i==="outer"?"start":"end":a<-QB?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.radius,o=r.axisLine,c=r.axisLineType,u=wh(wh({},rn(this.props,!1)),{},{fill:"none"},rn(o,!1));if(c==="circle")return ue.createElement(Sj,Gh({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:a,r:s}));var h=this.props.ticks,m=h.map(function(v){return Cr(i,a,s,v.coordinate)});return ue.createElement(efe,Gh({className:"recharts-polar-angle-axis-line"},u,{points:m}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,o=i.tickLine,c=i.tickFormatter,u=i.stroke,h=rn(this.props,!1),m=rn(s,!1),v=wh(wh({},h),{},{fill:"none"},rn(o,!1)),x=a.map(function(_,T){var w=r.getTickLineCoord(_),E=r.getTickTextAnchor(_),N=wh(wh(wh({textAnchor:E},h),{},{stroke:"none",fill:u},m),{},{index:T,payload:_,x:w.x2,y:w.y2});return ue.createElement(lr,Gh({className:En("recharts-polar-angle-axis-tick",C$(s)),key:"tick-".concat(_.coordinate)},up(r.props,_,T)),o&&ue.createElement("line",Gh({className:"recharts-polar-angle-axis-tick-line"},v,w)),s&&e.renderTickItem(s,N,c?c(_.value,T):_.value))});return ue.createElement(lr,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.radius,s=r.axisLine;return a<=0||!i||!i.length?null:ue.createElement(lr,{className:En("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,a){var s;return ue.isValidElement(r)?s=ue.cloneElement(r,i):on(r)?s=r(i):s=ue.createElement(dp,Gh({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}])})(J.PureComponent);GE(qE,"displayName","PolarAngleAxis");GE(qE,"axisType","angleAxis");GE(qE,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var AR,eF;function Ofe(){if(eF)return AR;eF=1;var t=tq(),e=t(Object.getPrototypeOf,Object);return AR=e,AR}var kR,tF;function jfe(){if(tF)return kR;tF=1;var t=Qu(),e=Ofe(),n=ed(),r="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,c=s.call(Object);function u(h){if(!n(h)||t(h)!=r)return!1;var m=e(h);if(m===null)return!0;var v=o.call(m,"constructor")&&m.constructor;return typeof v=="function"&&v instanceof v&&s.call(v)==c}return kR=u,kR}var Dfe=jfe();const Lfe=Zn(Dfe);var MR,nF;function Ufe(){if(nF)return MR;nF=1;var t=Qu(),e=ed(),n="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&t(i)==n}return MR=r,MR}var zfe=Ufe();const Bfe=Zn(zfe);function Zx(t){"@babel/helpers - typeof";return Zx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zx(t)}function G1(){return G1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},G1.apply(this,arguments)}function Ffe(t,e){return qfe(t)||Gfe(t,e)||Hfe(t,e)||Vfe()}function Vfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hfe(t,e){if(t){if(typeof t=="string")return rF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rF(t,e)}}function rF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Gfe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function qfe(t){if(Array.isArray(t))return t}function iF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iF(Object(n),!0).forEach(function(r){$fe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $fe(t,e,n){return e=Wfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wfe(t){var e=Kfe(t,"string");return Zx(e)=="symbol"?e:e+""}function Kfe(t,e){if(Zx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sF=function(e,n,r,i,a){var s=r-i,o;return o="M ".concat(e,",").concat(n),o+="L ".concat(e+r,",").concat(n),o+="L ".concat(e+r-s/2,",").concat(n+a),o+="L ".concat(e+r-s/2-i,",").concat(n+a),o+="L ".concat(e,",").concat(n," Z"),o},Xfe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Yfe=function(e){var n=aF(aF({},Xfe),e),r=J.useRef(),i=J.useState(-1),a=Ffe(i,2),s=a[0],o=a[1];J.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var C=r.current.getTotalLength();C&&o(C)}catch{}},[]);var c=n.x,u=n.y,h=n.upperWidth,m=n.lowerWidth,v=n.height,x=n.className,_=n.animationEasing,T=n.animationDuration,w=n.animationBegin,E=n.isUpdateAnimationActive;if(c!==+c||u!==+u||h!==+h||m!==+m||v!==+v||h===0&&m===0||v===0)return null;var N=En("recharts-trapezoid",x);return E?ue.createElement(Ku,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:v,x:c,y:u},to:{upperWidth:h,lowerWidth:m,height:v,x:c,y:u},duration:T,animationEasing:_,isActive:E},function(C){var P=C.upperWidth,I=C.lowerWidth,j=C.height,O=C.x,F=C.y;return ue.createElement(Ku,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:T,easing:_},ue.createElement("path",G1({},rn(n,!0),{className:N,d:sF(O,F,P,I,j),ref:r})))}):ue.createElement("g",null,ue.createElement("path",G1({},rn(n,!0),{className:N,d:sF(c,u,h,m,v)})))},Jfe=["option","shapeType","propTransformer","activeClassName","isActive"];function Qx(t){"@babel/helpers - typeof";return Qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qx(t)}function Zfe(t,e){if(t==null)return{};var n=Qfe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Qfe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function oF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function q1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oF(Object(n),!0).forEach(function(r){ehe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ehe(t,e,n){return e=the(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function the(t){var e=nhe(t,"string");return Qx(e)=="symbol"?e:e+""}function nhe(t,e){if(Qx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rhe(t,e){return q1(q1({},e),t)}function ihe(t,e){return t==="symbols"}function lF(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return ue.createElement(wj,n);case"trapezoid":return ue.createElement(Yfe,n);case"sector":return ue.createElement(_j,n);case"symbols":if(ihe(e))return ue.createElement(BO,n);break;default:return null}}function ahe(t){return J.isValidElement(t)?t.props:t}function G$(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?rhe:r,a=t.activeClassName,s=a===void 0?"recharts-active-shape":a,o=t.isActive,c=Zfe(t,Jfe),u;if(J.isValidElement(e))u=J.cloneElement(e,q1(q1({},c),ahe(e)));else if(on(e))u=e(c);else if(Lfe(e)&&!Bfe(e)){var h=i(e,c);u=ue.createElement(lF,{shapeType:n,elementProps:h})}else{var m=c;u=ue.createElement(lF,{shapeType:n,elementProps:m})}return o?ue.createElement(lr,{className:s},u):u}function $E(t,e){return e!=null&&"trapezoids"in t.props}function WE(t,e){return e!=null&&"sectors"in t.props}function eb(t,e){return e!=null&&"points"in t.props}function she(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&a}function ohe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function lhe(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function che(t,e){var n;return $E(t,e)?n=she:WE(t,e)?n=ohe:eb(t,e)&&(n=lhe),n}function uhe(t,e){var n;return $E(t,e)?n="trapezoids":WE(t,e)?n="sectors":eb(t,e)&&(n="points"),n}function dhe(t,e){if($E(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(WE(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return eb(t,e)?e.payload:{}}function fhe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=uhe(n,e),a=dhe(n,e),s=r.filter(function(c,u){var h=UE(a,c),m=n.props[i].filter(function(_){var T=che(n,e);return T(_,e)}),v=n.props[i].indexOf(m[m.length-1]),x=u===v;return h&&x}),o=r.indexOf(s[s.length-1]);return o}var XS;function ev(t){"@babel/helpers - typeof";return ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ev(t)}function Eg(){return Eg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Eg.apply(this,arguments)}function cF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cF(Object(n),!0).forEach(function(r){qo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$$(r.key),r)}}function phe(t,e,n){return e&&uF(t.prototype,e),n&&uF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mhe(t,e,n){return e=$1(e),ghe(t,q$()?Reflect.construct(e,n||[],$1(t).constructor):e.apply(t,n))}function ghe(t,e){if(e&&(ev(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vhe(t)}function vhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function q$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q$=function(){return!!t})()}function $1(t){return $1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$1(t)}function yhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p3(t,e)}function p3(t,e){return p3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},p3(t,e)}function qo(t,e,n){return e=$$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $$(t){var e=xhe(t,"string");return ev(e)=="symbol"?e:e+""}function xhe(t,e){if(ev(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ev(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var nd=(function(t){function e(n){var r;return hhe(this,e),r=mhe(this,e,[n]),qo(r,"pieRef",null),qo(r,"sectorRefs",[]),qo(r,"id",Cb("recharts-pie-")),qo(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),on(i)&&i()}),qo(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),on(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return yhe(e,t),phe(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.label,o=a.labelLine,c=a.dataKey,u=a.valueKey,h=rn(this.props,!1),m=rn(s,!1),v=rn(o,!1),x=s&&s.offsetRadius||20,_=r.map(function(T,w){var E=(T.startAngle+T.endAngle)/2,N=Cr(T.cx,T.cy,T.outerRadius+x,E),C=Mr(Mr(Mr(Mr({},h),T),{},{stroke:"none"},m),{},{index:w,textAnchor:e.getTextAnchor(N.x,T.cx)},N),P=Mr(Mr(Mr(Mr({},h),T),{},{fill:"none",stroke:T.fill},v),{},{index:w,points:[Cr(T.cx,T.cy,T.outerRadius,E),N]}),I=c;return Pn(c)&&Pn(u)?I="value":Pn(c)&&(I=u),ue.createElement(lr,{key:"label-".concat(T.startAngle,"-").concat(T.endAngle,"-").concat(T.midAngle,"-").concat(w)},o&&e.renderLabelLineItem(o,P,"line"),e.renderLabelItem(s,C,Va(T,I)))});return ue.createElement(lr,{className:"recharts-pie-labels"},_)}},{key:"renderSectorsStatically",value:function(r){var i=this,a=this.props,s=a.activeShape,o=a.blendStroke,c=a.inactiveShape;return r.map(function(u,h){if(u?.startAngle===0&&u?.endAngle===0&&r.length!==1)return null;var m=i.isActiveIndex(h),v=c&&i.hasActiveIndex()?c:null,x=m?s:v,_=Mr(Mr({},u),{},{stroke:o?u.fill:u.stroke,tabIndex:-1});return ue.createElement(lr,Eg({ref:function(w){w&&!i.sectorRefs.includes(w)&&i.sectorRefs.push(w)},tabIndex:-1,className:"recharts-pie-sector"},up(i.props,u,h),{key:"sector-".concat(u?.startAngle,"-").concat(u?.endAngle,"-").concat(u.midAngle,"-").concat(h)}),ue.createElement(G$,Eg({option:x,isActive:m,shapeType:"sector"},_)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,a=i.sectors,s=i.isAnimationActive,o=i.animationBegin,c=i.animationDuration,u=i.animationEasing,h=i.animationId,m=this.state,v=m.prevSectors,x=m.prevIsAnimationActive;return ue.createElement(Ku,{begin:o,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(h,"-").concat(x),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(_){var T=_.t,w=[],E=a&&a[0],N=E.startAngle;return a.forEach(function(C,P){var I=v&&v[P],j=P>0?fo(C,"paddingAngle",0):0;if(I){var O=of(I.endAngle-I.startAngle,C.endAngle-C.startAngle),F=Mr(Mr({},C),{},{startAngle:N+j,endAngle:N+O(T)+j});w.push(F),N=F.endAngle}else{var L=C.endAngle,z=C.startAngle,V=of(0,L-z),G=V(T),$=Mr(Mr({},C),{},{startAngle:N+j,endAngle:N+G+j});w.push($),N=$.endAngle}}),ue.createElement(lr,null,r.renderSectorsStatically(w))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var s=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"ArrowRight":{var o=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,a=r.isAnimationActive,s=this.state.prevSectors;return a&&i&&i.length&&(!s||!UE(s,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,a=i.hide,s=i.sectors,o=i.className,c=i.label,u=i.cx,h=i.cy,m=i.innerRadius,v=i.outerRadius,x=i.isAnimationActive,_=this.state.isAnimationFinished;if(a||!s||!s.length||!dt(u)||!dt(h)||!dt(m)||!dt(v))return null;var T=En("recharts-pie",o);return ue.createElement(lr,{tabIndex:this.props.rootTabIndex,className:T,ref:function(E){r.pieRef=E}},this.renderSectors(),c&&this.renderLabels(s),ta.renderCallByParent(this.props,null,!1),(!x||_)&&Hu.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,a){if(ue.isValidElement(r))return ue.cloneElement(r,i);if(on(r))return r(i);var s=En("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return ue.createElement(QP,Eg({},i,{key:a,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(r,i,a){if(ue.isValidElement(r))return ue.cloneElement(r,i);var s=a;if(on(r)&&(s=r(i),ue.isValidElement(s)))return s;var o=En("recharts-pie-label-text",typeof r!="boolean"&&!on(r)?r.className:"");return ue.createElement(dp,Eg({},i,{alignmentBaseline:"middle",className:o}),s)}}])})(J.PureComponent);XS=nd;qo(nd,"displayName","Pie");qo(nd,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Av.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});qo(nd,"parseDeltaAngle",function(t,e){var n=ds(e-t),r=Math.min(Math.abs(e-t),360);return n*r});qo(nd,"getRealPieData",function(t){var e=t.data,n=t.children,r=rn(t,!1),i=Wo(n,Cx);return e&&e.length?e.map(function(a,s){return Mr(Mr(Mr({payload:a},r),a),i&&i[s]&&i[s].props)}):i&&i.length?i.map(function(a){return Mr(Mr({},r),a.props)}):[]});qo(nd,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,a=e.height,s=N$(i,a),o=r+fs(t.cx,i,i/2),c=n+fs(t.cy,a,a/2),u=fs(t.innerRadius,s,0),h=fs(t.outerRadius,s,s*.8),m=t.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:o,cy:c,innerRadius:u,outerRadius:h,maxRadius:m}});qo(nd,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?Mr(Mr({},e.type.defaultProps),e.props):e.props,i=XS.getRealPieData(r);if(!i||!i.length)return null;var a=r.cornerRadius,s=r.startAngle,o=r.endAngle,c=r.paddingAngle,u=r.dataKey,h=r.nameKey,m=r.valueKey,v=r.tooltipType,x=Math.abs(r.minAngle),_=XS.parseCoordinateOfPie(r,n),T=XS.parseDeltaAngle(s,o),w=Math.abs(T),E=u;Pn(u)&&Pn(m)?(Ul(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),E="value"):Pn(u)&&(Ul(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),E=m);var N=i.filter(function(F){return Va(F,E,0)!==0}).length,C=(w>=360?N:N-1)*c,P=w-N*x-C,I=i.reduce(function(F,L){var z=Va(L,E,0);return F+(dt(z)?z:0)},0),j;if(I>0){var O;j=i.map(function(F,L){var z=Va(F,E,0),V=Va(F,h,L),G=(dt(z)?z:0)/I,$;L?$=O.endAngle+ds(T)*c*(z!==0?1:0):$=s;var ee=$+ds(T)*((z!==0?x:0)+G*P),te=($+ee)/2,K=(_.innerRadius+_.outerRadius)/2,X=[{name:V,value:z,payload:F,dataKey:E,type:v}],re=Cr(_.cx,_.cy,K,te);return O=Mr(Mr(Mr({percent:G,cornerRadius:a,name:V,tooltipPayload:X,midAngle:te,middleRadius:K,tooltipPosition:re},F),_),{},{value:Va(F,E),startAngle:$,endAngle:ee,payload:F,paddingAngle:ds(T)*c}),O})}return Mr(Mr({},_),{},{sectors:j,data:i})});var NR,dF;function bhe(){if(dF)return NR;dF=1;var t=Math.ceil,e=Math.max;function n(r,i,a,s){for(var o=-1,c=e(t((i-r)/(a||1)),0),u=Array(c);c--;)u[s?c:++o]=r,r+=a;return u}return NR=n,NR}var CR,fF;function W$(){if(fF)return CR;fF=1;var t=vq(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var a=i<0?-1:1;return a*n}return i===i?i:0}return CR=r,CR}var RR,hF;function _he(){if(hF)return RR;hF=1;var t=bhe(),e=ME(),n=W$();function r(i){return function(a,s,o){return o&&typeof o!="number"&&e(a,s,o)&&(s=o=void 0),a=n(a),s===void 0?(s=a,a=0):s=n(s),o=o===void 0?a<s?1:-1:n(o),t(a,s,o,i)}}return RR=r,RR}var IR,pF;function whe(){if(pF)return IR;pF=1;var t=_he(),e=t();return IR=e,IR}var She=whe();const W1=Zn(She);function tb(t){"@babel/helpers - typeof";return tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tb(t)}function mF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mF(Object(n),!0).forEach(function(r){K$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function K$(t,e,n){return e=The(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function The(t){var e=Ehe(t,"string");return tb(e)=="symbol"?e:e+""}function Ehe(t,e){if(tb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ahe=["Webkit","Moz","O","ms"],khe=function(e,n){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=Ahe.reduce(function(a,s){return gF(gF({},a),{},K$({},s+r,n))},{});return i[e]=n,i};function tv(t){"@babel/helpers - typeof";return tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tv(t)}function K1(){return K1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},K1.apply(this,arguments)}function vF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vF(Object(n),!0).forEach(function(r){ro(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Y$(r.key),r)}}function Nhe(t,e,n){return e&&yF(t.prototype,e),n&&yF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Che(t,e,n){return e=X1(e),Rhe(t,X$()?Reflect.construct(e,n||[],X1(t).constructor):e.apply(t,n))}function Rhe(t,e){if(e&&(tv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ihe(t)}function Ihe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X$=function(){return!!t})()}function X1(t){return X1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},X1(t)}function Phe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m3(t,e)}function m3(t,e){return m3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},m3(t,e)}function ro(t,e,n){return e=Y$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y$(t){var e=Ohe(t,"string");return tv(e)=="symbol"?e:e+""}function Ohe(t,e){if(tv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var jhe=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,a=e.x,s=e.width,o=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Zy().domain(W1(0,c)).range([a,a+s-o]),h=u.domain().map(function(m){return u(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:h}},xF=function(e){return e.changedTouches&&!!e.changedTouches.length},nv=(function(t){function e(n){var r;return Mhe(this,e),r=Che(this,e,[n]),ro(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),ro(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),ro(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,s=i.onDragEnd,o=i.startIndex;s?.({endIndex:a,startIndex:o})}),r.detachDragEndListener()}),ro(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),ro(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),ro(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),ro(r,"handleSlideDragStart",function(i){var a=xF(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Phe(e,t),Nhe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,s=this.state.scaleValues,o=this.props,c=o.gap,u=o.data,h=u.length-1,m=Math.min(i,a),v=Math.max(i,a),x=e.getIndexInRange(s,m),_=e.getIndexInRange(s,v);return{startIndex:x-x%c,endIndex:_===h?h:_-_%c}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,s=i.tickFormatter,o=i.dataKey,c=Va(a[r],o,r);return on(s)?s(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,s=i.startX,o=i.endX,c=this.props,u=c.x,h=c.width,m=c.travellerWidth,v=c.startIndex,x=c.endIndex,_=c.onChange,T=r.pageX-a;T>0?T=Math.min(T,u+h-m-o,u+h-m-s):T<0&&(T=Math.max(T,u-s,u-o));var w=this.getIndex({startX:s+T,endX:o+T});(w.startIndex!==v||w.endIndex!==x)&&_&&_(w),this.setState({startX:s+T,endX:o+T,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=xF(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,o=i.endX,c=i.startX,u=this.state[s],h=this.props,m=h.x,v=h.width,x=h.travellerWidth,_=h.onChange,T=h.gap,w=h.data,E={startX:this.state.startX,endX:this.state.endX},N=r.pageX-a;N>0?N=Math.min(N,m+v-x-u):N<0&&(N=Math.max(N,m-u)),E[s]=u+N;var C=this.getIndex(E),P=C.startIndex,I=C.endIndex,j=function(){var F=w.length-1;return s==="startX"&&(o>c?P%T===0:I%T===0)||o<c&&I===F||s==="endX"&&(o>c?I%T===0:P%T===0)||o>c&&I===F};this.setState(ro(ro({},s,u+N),"brushMoveStartX",r.pageX),function(){_&&j()&&_(C)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,s=this.state,o=s.scaleValues,c=s.startX,u=s.endX,h=this.state[i],m=o.indexOf(h);if(m!==-1){var v=m+r;if(!(v===-1||v>=o.length)){var x=o[v];i==="startX"&&x>=u||i==="endX"&&x<=c||this.setState(ro({},i,x),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,c=r.fill,u=r.stroke;return ue.createElement("rect",{stroke:u,fill:c,x:i,y:a,width:s,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,c=r.data,u=r.children,h=r.padding,m=J.Children.only(u);return m?ue.cloneElement(m,{x:i,y:a,width:s,height:o,margin:h,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,s,o=this,c=this.props,u=c.y,h=c.travellerWidth,m=c.height,v=c.traveller,x=c.ariaLabel,_=c.data,T=c.startIndex,w=c.endIndex,E=Math.max(r,this.props.x),N=PR(PR({},rn(this.props,!1)),{},{x:E,y:u,width:h,height:m}),C=x||"Min value: ".concat((a=_[T])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=_[w])===null||s===void 0?void 0:s.name);return ue.createElement(lr,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(I){["ArrowLeft","ArrowRight"].includes(I.key)&&(I.preventDefault(),I.stopPropagation(),o.handleTravellerMoveKeyboard(I.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(v,N))}},{key:"renderSlide",value:function(r,i){var a=this.props,s=a.y,o=a.height,c=a.stroke,u=a.travellerWidth,h=Math.min(r,i)+u,m=Math.max(Math.abs(i-r)-u,0);return ue.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:h,y:s,width:m,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,s=r.y,o=r.height,c=r.travellerWidth,u=r.stroke,h=this.state,m=h.startX,v=h.endX,x=5,_={pointerEvents:"none",fill:u};return ue.createElement(lr,{className:"recharts-brush-texts"},ue.createElement(dp,K1({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,v)-x,y:s+o/2},_),this.getTextOfTick(i)),ue.createElement(dp,K1({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,v)+c+x,y:s+o/2},_),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,s=r.children,o=r.x,c=r.y,u=r.width,h=r.height,m=r.alwaysShowText,v=this.state,x=v.startX,_=v.endX,T=v.isTextActive,w=v.isSlideMoving,E=v.isTravellerMoving,N=v.isTravellerFocused;if(!i||!i.length||!dt(o)||!dt(c)||!dt(u)||!dt(h)||u<=0||h<=0)return null;var C=En("recharts-brush",a),P=ue.Children.count(s)===1,I=khe("userSelect","none");return ue.createElement(lr,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:I},this.renderBackground(),P&&this.renderPanorama(),this.renderSlide(x,_),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(_,"endX"),(T||w||E||N||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,s=r.width,o=r.height,c=r.stroke,u=Math.floor(a+o/2)-1;return ue.createElement(ue.Fragment,null,ue.createElement("rect",{x:i,y:a,width:s,height:o,fill:c,stroke:"none"}),ue.createElement("line",{x1:i+1,y1:u,x2:i+s-1,y2:u,fill:"none",stroke:"#fff"}),ue.createElement("line",{x1:i+1,y1:u+2,x2:i+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return ue.isValidElement(r)?a=ue.cloneElement(r,i):on(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,s=r.width,o=r.x,c=r.travellerWidth,u=r.updateId,h=r.startIndex,m=r.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return PR({prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:s},a&&a.length?jhe({data:a,width:s,x:o,travellerWidth:c,startIndex:h,endIndex:m}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||o!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([o,o+s-c]);var v=i.scale.domain().map(function(x){return i.scale(x)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:v}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,s=0,o=a-1;o-s>1;){var c=Math.floor((s+o)/2);r[c]>i?o=c:s=c}return i>=r[o]?o:s}}])})(J.PureComponent);ro(nv,"displayName","Brush");ro(nv,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var OR,bF;function Dhe(){if(bF)return OR;bF=1;var t=WO();function e(n,r){var i;return t(n,function(a,s,o){return i=r(a,s,o),!i}),!!i}return OR=e,OR}var jR,_F;function Lhe(){if(_F)return jR;_F=1;var t=KG(),e=Vc(),n=Dhe(),r=qs(),i=ME();function a(s,o,c){var u=r(s)?t:n;return c&&i(s,o,c)&&(o=void 0),u(s,e(o,3))}return jR=a,jR}var Uhe=Lhe();const zhe=Zn(Uhe);var Pc=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},DR,wF;function Bhe(){if(wF)return DR;wF=1;var t=fq();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return DR=e,DR}var LR,SF;function Fhe(){if(SF)return LR;SF=1;var t=Bhe(),e=uq(),n=Vc();function r(i,a){var s={};return a=n(a,3),e(i,function(o,c,u){t(s,c,a(o,c,u))}),s}return LR=r,LR}var Vhe=Fhe();const Hhe=Zn(Vhe);var UR,TF;function Ghe(){if(TF)return UR;TF=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!n(e[r],r,e))return!1;return!0}return UR=t,UR}var zR,EF;function qhe(){if(EF)return zR;EF=1;var t=WO();function e(n,r){var i=!0;return t(n,function(a,s,o){return i=!!r(a,s,o),i}),i}return zR=e,zR}var BR,AF;function $he(){if(AF)return BR;AF=1;var t=Ghe(),e=qhe(),n=Vc(),r=qs(),i=ME();function a(s,o,c){var u=r(s)?t:e;return c&&i(s,o,c)&&(o=void 0),u(s,n(o,3))}return BR=a,BR}var Whe=$he();const J$=Zn(Whe);var Khe=["x","y"];function nb(t){"@babel/helpers - typeof";return nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nb(t)}function g3(){return g3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g3.apply(this,arguments)}function kF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _y(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kF(Object(n),!0).forEach(function(r){Xhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xhe(t,e,n){return e=Yhe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yhe(t){var e=Jhe(t,"string");return nb(e)=="symbol"?e:e+""}function Jhe(t,e){if(nb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(nb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zhe(t,e){if(t==null)return{};var n=Qhe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Qhe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function epe(t,e){var n=t.x,r=t.y,i=Zhe(t,Khe),a="".concat(n),s=parseInt(a,10),o="".concat(r),c=parseInt(o,10),u="".concat(e.height||i.height),h=parseInt(u,10),m="".concat(e.width||i.width),v=parseInt(m,10);return _y(_y(_y(_y(_y({},e),i),s?{x:s}:{}),c?{y:c}:{}),{},{height:h,width:v,name:e.name,radius:e.radius})}function MF(t){return ue.createElement(G$,g3({shapeType:"rectangle",propTransformer:epe,activeClassName:"recharts-active-bar"},t))}var tpe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=dt(r)||wee(r);return a?e(r,i):(a||hp(),n)}},npe=["value","background"],Z$;function rv(t){"@babel/helpers - typeof";return rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rv(t)}function rpe(t,e){if(t==null)return{};var n=ipe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ipe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Y1(){return Y1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Y1.apply(this,arguments)}function NF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ni(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NF(Object(n),!0).forEach(function(r){pf(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ape(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,e9(r.key),r)}}function spe(t,e,n){return e&&CF(t.prototype,e),n&&CF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ope(t,e,n){return e=J1(e),lpe(t,Q$()?Reflect.construct(e,n||[],J1(t).constructor):e.apply(t,n))}function lpe(t,e){if(e&&(rv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cpe(t)}function cpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Q$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Q$=function(){return!!t})()}function J1(t){return J1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},J1(t)}function upe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v3(t,e)}function v3(t,e){return v3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},v3(t,e)}function pf(t,e,n){return e=e9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e9(t){var e=dpe(t,"string");return rv(e)=="symbol"?e:e+""}function dpe(t,e){if(rv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ep=(function(t){function e(){var n;ape(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=ope(this,e,[].concat(i)),pf(n,"state",{isAnimationFinished:!1}),pf(n,"id",Cb("recharts-bar-")),pf(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),pf(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return upe(e,t),spe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,s=a.shape,o=a.dataKey,c=a.activeIndex,u=a.activeBar,h=rn(this.props,!1);return r&&r.map(function(m,v){var x=v===c,_=x?u:s,T=Ni(Ni(Ni({},h),m),{},{isActive:x,option:_,index:v,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return ue.createElement(lr,Y1({className:"recharts-bar-rectangle"},up(i.props,m,v),{key:"rectangle-".concat(m?.x,"-").concat(m?.y,"-").concat(m?.value,"-").concat(v)}),ue.createElement(MF,T))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,s=i.layout,o=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,h=i.animationEasing,m=i.animationId,v=this.state.prevData;return ue.createElement(Ku,{begin:c,duration:u,isActive:o,easing:h,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var _=x.t,T=a.map(function(w,E){var N=v&&v[E];if(N){var C=of(N.x,w.x),P=of(N.y,w.y),I=of(N.width,w.width),j=of(N.height,w.height);return Ni(Ni({},w),{},{x:C(_),y:P(_),width:I(_),height:j(_)})}if(s==="horizontal"){var O=of(0,w.height),F=O(_);return Ni(Ni({},w),{},{y:w.y+w.height-F,height:F})}var L=of(0,w.width),z=L(_);return Ni(Ni({},w),{},{width:z})});return ue.createElement(lr,null,r.renderRectanglesStatically(T))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!UE(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,s=i.dataKey,o=i.activeIndex,c=rn(this.props.background,!1);return a.map(function(u,h){u.value;var m=u.background,v=rpe(u,npe);if(!m)return null;var x=Ni(Ni(Ni(Ni(Ni({},v),{},{fill:"#eee"},m),c),up(r.props,u,h)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:h,className:"recharts-bar-background-rectangle"});return ue.createElement(MF,Y1({key:"background-bar-".concat(h),option:r.props.background,isActive:h===o},x))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,o=a.xAxis,c=a.yAxis,u=a.layout,h=a.children,m=Wo(h,FE);if(!m)return null;var v=u==="vertical"?s[0].height/2:s[0].width/2,x=function(w,E){var N=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:N,errorVal:Va(w,E)}},_={clipPath:r?"url(#clipPath-".concat(i,")"):null};return ue.createElement(lr,_,m.map(function(T){return ue.cloneElement(T,{key:"error-bar-".concat(i,"-").concat(T.props.dataKey),data:s,xAxis:o,yAxis:c,layout:u,offset:v,dataPointFormatter:x})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,s=r.className,o=r.xAxis,c=r.yAxis,u=r.left,h=r.top,m=r.width,v=r.height,x=r.isAnimationActive,_=r.background,T=r.id;if(i||!a||!a.length)return null;var w=this.state.isAnimationFinished,E=En("recharts-bar",s),N=o&&o.allowDataOverflow,C=c&&c.allowDataOverflow,P=N||C,I=Pn(T)?this.id:T;return ue.createElement(lr,{className:E},N||C?ue.createElement("defs",null,ue.createElement("clipPath",{id:"clipPath-".concat(I)},ue.createElement("rect",{x:N?u:u-m/2,y:C?h:h-v/2,width:N?m:m*2,height:C?v:v*2}))):null,ue.createElement(lr,{className:"recharts-bar-rectangles",clipPath:P?"url(#clipPath-".concat(I,")"):null},_?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(P,I),(!x||w)&&Hu.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])})(J.PureComponent);Z$=Ep;pf(Ep,"displayName","Bar");pf(Ep,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Av.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});pf(Ep,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,a=t.xAxis,s=t.yAxis,o=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,h=t.dataStartIndex,m=t.displayedData,v=t.offset,x=Dle(r,n);if(!x)return null;var _=e.layout,T=n.type.defaultProps,w=T!==void 0?Ni(Ni({},T),n.props):n.props,E=w.dataKey,N=w.children,C=w.minPointSize,P=_==="horizontal"?s:a,I=u?P.scale.domain():null,j=Hle({numericAxis:P}),O=Wo(N,Cx),F=m.map(function(L,z){var V,G,$,ee,te,K;u?V=Lle(u[h+z],I):(V=Va(L,E),Array.isArray(V)||(V=[j,V]));var X=tpe(C,Z$.defaultProps.minPointSize)(V[1],z);if(_==="horizontal"){var re,ce=[s.scale(V[0]),s.scale(V[1])],de=ce[0],W=ce[1];G=iB({axis:a,ticks:o,bandSize:i,offset:x.offset,entry:L,index:z}),$=(re=W??de)!==null&&re!==void 0?re:void 0,ee=x.size;var ae=de-W;if(te=Number.isNaN(ae)?0:ae,K={x:G,y:s.y,width:ee,height:s.height},Math.abs(X)>0&&Math.abs(te)<Math.abs(X)){var me=ds(te||X)*(Math.abs(X)-Math.abs(te));$-=me,te+=me}}else{var Ie=[a.scale(V[0]),a.scale(V[1])],Xe=Ie[0],ve=Ie[1];if(G=Xe,$=iB({axis:s,ticks:c,bandSize:i,offset:x.offset,entry:L,index:z}),ee=ve-Xe,te=x.size,K={x:a.x,y:$,width:a.width,height:te},Math.abs(X)>0&&Math.abs(ee)<Math.abs(X)){var _e=ds(ee||X)*(Math.abs(X)-Math.abs(ee));ee+=_e}}return Ni(Ni(Ni({},L),{},{x:G,y:$,width:ee,height:te,value:u?V:V[1],payload:L,background:K},O&&O[z]&&O[z].props),{},{tooltipPayload:[k$(n,L)],tooltipPosition:{x:G+ee/2,y:$+te/2}})});return Ni({data:F,layout:_},v)});function rb(t){"@babel/helpers - typeof";return rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rb(t)}function fpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,t9(r.key),r)}}function hpe(t,e,n){return e&&RF(t.prototype,e),n&&RF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function IF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IF(Object(n),!0).forEach(function(r){KE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KE(t,e,n){return e=t9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t9(t){var e=ppe(t,"string");return rb(e)=="symbol"?e:e+""}function ppe(t,e){if(rb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mpe=function(e,n,r,i,a){var s=e.width,o=e.height,c=e.layout,u=e.children,h=Object.keys(n),m={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},v=!!io(u,Ep);return h.reduce(function(x,_){var T=n[_],w=T.orientation,E=T.domain,N=T.padding,C=N===void 0?{}:N,P=T.mirror,I=T.reversed,j="".concat(w).concat(P?"Mirror":""),O,F,L,z,V;if(T.type==="number"&&(T.padding==="gap"||T.padding==="no-gap")){var G=E[1]-E[0],$=1/0,ee=T.categoricalDomain.sort(Eee);if(ee.forEach(function(Ie,Xe){Xe>0&&($=Math.min((Ie||0)-(ee[Xe-1]||0),$))}),Number.isFinite($)){var te=$/G,K=T.layout==="vertical"?r.height:r.width;if(T.padding==="gap"&&(O=te*K/2),T.padding==="no-gap"){var X=fs(e.barCategoryGap,te*K),re=te*K/2;O=re-X-(re-X)/K*X}}}i==="xAxis"?F=[r.left+(C.left||0)+(O||0),r.left+r.width-(C.right||0)-(O||0)]:i==="yAxis"?F=c==="horizontal"?[r.top+r.height-(C.bottom||0),r.top+(C.top||0)]:[r.top+(C.top||0)+(O||0),r.top+r.height-(C.bottom||0)-(O||0)]:F=T.range,I&&(F=[F[1],F[0]]);var ce=S$(T,a,v),de=ce.scale,W=ce.realScaleType;de.domain(E).range(F),T$(de);var ae=E$(de,Pl(Pl({},T),{},{realScaleType:W}));i==="xAxis"?(V=w==="top"&&!P||w==="bottom"&&P,L=r.left,z=m[j]-V*T.height):i==="yAxis"&&(V=w==="left"&&!P||w==="right"&&P,L=m[j]-V*T.width,z=r.top);var me=Pl(Pl(Pl({},T),ae),{},{realScaleType:W,x:L,y:z,scale:de,width:i==="xAxis"?r.width:T.width,height:i==="yAxis"?r.height:T.height});return me.bandSize=O1(me,ae),!T.hide&&i==="xAxis"?m[j]+=(V?-1:1)*me.height:T.hide||(m[j]+=(V?-1:1)*me.width),Pl(Pl({},x),{},KE({},_,me))},{})},n9=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return{x:Math.min(r,a),y:Math.min(i,s),width:Math.abs(a-r),height:Math.abs(s-i)}},gpe=function(e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2;return n9({x:n,y:r},{x:i,y:a})},r9=(function(){function t(e){fpe(this,t),this.scale=e}return hpe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])})();KE(r9,"EPS",1e-4);var Tj=function(e){var n=Object.keys(e).reduce(function(r,i){return Pl(Pl({},r),{},KE({},i,r9.create(e[i])))},{});return Pl(Pl({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,o=a.position;return Hhe(i,function(c,u){return n[u].apply(c,{bandAware:s,position:o})})},isInRange:function(i){return J$(i,function(a,s){return n[s].isInRange(a)})}})};function vpe(t){return(t%180+180)%180}var ype=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=vpe(i),s=a*Math.PI/180,o=Math.atan(r/n),c=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},FR,PF;function xpe(){if(PF)return FR;PF=1;var t=Vc(),e=Rb(),n=AE();function r(i){return function(a,s,o){var c=Object(a);if(!e(a)){var u=t(s,3);a=n(a),s=function(m){return u(c[m],m,c)}}var h=i(a,s,o);return h>-1?c[u?a[h]:h]:void 0}}return FR=r,FR}var VR,OF;function bpe(){if(OF)return VR;OF=1;var t=W$();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return VR=e,VR}var HR,jF;function _pe(){if(jF)return HR;jF=1;var t=aq(),e=Vc(),n=bpe(),r=Math.max;function i(a,s,o){var c=a==null?0:a.length;if(!c)return-1;var u=o==null?0:n(o);return u<0&&(u=r(c+u,0)),t(a,e(s,3),u)}return HR=i,HR}var GR,DF;function wpe(){if(DF)return GR;DF=1;var t=xpe(),e=_pe(),n=t(e);return GR=n,GR}var Spe=wpe();const Tpe=Zn(Spe);var Epe=_G();const Ape=Zn(Epe);var kpe=Ape(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),Ej=J.createContext(void 0),Aj=J.createContext(void 0),i9=J.createContext(void 0),a9=J.createContext({}),s9=J.createContext(void 0),o9=J.createContext(0),l9=J.createContext(0),LF=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,s=e.clipPathId,o=e.children,c=e.width,u=e.height,h=kpe(a);return ue.createElement(Ej.Provider,{value:r},ue.createElement(Aj.Provider,{value:i},ue.createElement(a9.Provider,{value:a},ue.createElement(i9.Provider,{value:h},ue.createElement(s9.Provider,{value:s},ue.createElement(o9.Provider,{value:u},ue.createElement(l9.Provider,{value:c},o)))))))},Mpe=function(){return J.useContext(s9)},c9=function(e){var n=J.useContext(Ej);n==null&&hp();var r=n[e];return r==null&&hp(),r},Npe=function(){var e=J.useContext(Ej);return df(e)},Cpe=function(){var e=J.useContext(Aj),n=Tpe(e,function(r){return J$(r.domain,Number.isFinite)});return n||df(e)},u9=function(e){var n=J.useContext(Aj);n==null&&hp();var r=n[e];return r==null&&hp(),r},Rpe=function(){var e=J.useContext(i9);return e},Ipe=function(){return J.useContext(a9)},kj=function(){return J.useContext(l9)},Mj=function(){return J.useContext(o9)};function iv(t){"@babel/helpers - typeof";return iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iv(t)}function Ppe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ope(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f9(r.key),r)}}function jpe(t,e,n){return e&&Ope(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dpe(t,e,n){return e=Z1(e),Lpe(t,d9()?Reflect.construct(e,n||[],Z1(t).constructor):e.apply(t,n))}function Lpe(t,e){if(e&&(iv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Upe(t)}function Upe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d9=function(){return!!t})()}function Z1(t){return Z1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Z1(t)}function zpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y3(t,e)}function y3(t,e){return y3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},y3(t,e)}function UF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UF(Object(n),!0).forEach(function(r){Nj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nj(t,e,n){return e=f9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f9(t){var e=Bpe(t,"string");return iv(e)=="symbol"?e:e+""}function Bpe(t,e){if(iv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(iv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Fpe(t,e){return qpe(t)||Gpe(t,e)||Hpe(t,e)||Vpe()}function Vpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hpe(t,e){if(t){if(typeof t=="string")return BF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BF(t,e)}}function BF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Gpe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function qpe(t){if(Array.isArray(t))return t}function x3(){return x3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x3.apply(this,arguments)}var $pe=function(e,n){var r;return ue.isValidElement(e)?r=ue.cloneElement(e,n):on(e)?r=e(n):r=ue.createElement("line",x3({},n,{className:"recharts-reference-line-line"})),r},Wpe=function(e,n,r,i,a,s,o,c,u){var h=a.x,m=a.y,v=a.width,x=a.height;if(r){var _=u.y,T=e.y.apply(_,{position:s});if(Pc(u,"discard")&&!e.y.isInRange(T))return null;var w=[{x:h+v,y:T},{x:h,y:T}];return c==="left"?w.reverse():w}if(n){var E=u.x,N=e.x.apply(E,{position:s});if(Pc(u,"discard")&&!e.x.isInRange(N))return null;var C=[{x:N,y:m+x},{x:N,y:m}];return o==="top"?C.reverse():C}if(i){var P=u.segment,I=P.map(function(j){return e.apply(j,{position:s})});return Pc(u,"discard")&&zhe(I,function(j){return!e.isInRange(j)})?null:I}return null};function Kpe(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,a=t.yAxisId,s=t.shape,o=t.className,c=t.alwaysShow,u=Mpe(),h=c9(i),m=u9(a),v=Rpe();if(!u||!v)return null;Ul(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=Tj({x:h.scale,y:m.scale}),_=Hi(e),T=Hi(n),w=r&&r.length===2,E=Wpe(x,_,T,w,v,t.position,h.orientation,m.orientation,t);if(!E)return null;var N=Fpe(E,2),C=N[0],P=C.x,I=C.y,j=N[1],O=j.x,F=j.y,L=Pc(t,"hidden")?"url(#".concat(u,")"):void 0,z=zF(zF({clipPath:L},rn(t,!0)),{},{x1:P,y1:I,x2:O,y2:F});return ue.createElement(lr,{className:En("recharts-reference-line",o)},$pe(s,z),ta.renderCallByParent(t,gpe({x1:P,y1:I,x2:O,y2:F})))}var Cj=(function(t){function e(){return Ppe(this,e),Dpe(this,e,arguments)}return zpe(e,t),jpe(e,[{key:"render",value:function(){return ue.createElement(Kpe,this.props)}}])})(ue.Component);Nj(Cj,"displayName","ReferenceLine");Nj(Cj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function b3(){return b3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b3.apply(this,arguments)}function av(t){"@babel/helpers - typeof";return av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},av(t)}function FF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function VF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FF(Object(n),!0).forEach(function(r){XE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ype(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p9(r.key),r)}}function Jpe(t,e,n){return e&&Ype(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Zpe(t,e,n){return e=Q1(e),Qpe(t,h9()?Reflect.construct(e,n||[],Q1(t).constructor):e.apply(t,n))}function Qpe(t,e){if(e&&(av(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eme(t)}function eme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h9=function(){return!!t})()}function Q1(t){return Q1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Q1(t)}function tme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_3(t,e)}function _3(t,e){return _3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_3(t,e)}function XE(t,e,n){return e=p9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p9(t){var e=nme(t,"string");return av(e)=="symbol"?e:e+""}function nme(t,e){if(av(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(av(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var rme=function(e){var n=e.x,r=e.y,i=e.xAxis,a=e.yAxis,s=Tj({x:i.scale,y:a.scale}),o=s.apply({x:n,y:r},{bandAware:!0});return Pc(e,"discard")&&!s.isInRange(o)?null:o},YE=(function(t){function e(){return Xpe(this,e),Zpe(this,e,arguments)}return tme(e,t),Jpe(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,s=r.r,o=r.alwaysShow,c=r.clipPathId,u=Hi(i),h=Hi(a);if(Ul(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!h)return null;var m=rme(this.props);if(!m)return null;var v=m.x,x=m.y,_=this.props,T=_.shape,w=_.className,E=Pc(this.props,"hidden")?"url(#".concat(c,")"):void 0,N=VF(VF({clipPath:E},rn(this.props,!0)),{},{cx:v,cy:x});return ue.createElement(lr,{className:En("recharts-reference-dot",w)},e.renderDot(T,N),ta.renderCallByParent(this.props,{x:v-s,y:x-s,width:2*s,height:2*s}))}}])})(ue.Component);XE(YE,"displayName","ReferenceDot");XE(YE,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});XE(YE,"renderDot",function(t,e){var n;return ue.isValidElement(t)?n=ue.cloneElement(t,e):on(t)?n=t(e):n=ue.createElement(Sj,b3({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function w3(){return w3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},w3.apply(this,arguments)}function sv(t){"@babel/helpers - typeof";return sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sv(t)}function HF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function GF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HF(Object(n),!0).forEach(function(r){JE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ime(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ame(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g9(r.key),r)}}function sme(t,e,n){return e&&ame(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ome(t,e,n){return e=eT(e),lme(t,m9()?Reflect.construct(e,n||[],eT(t).constructor):e.apply(t,n))}function lme(t,e){if(e&&(sv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cme(t)}function cme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m9=function(){return!!t})()}function eT(t){return eT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},eT(t)}function ume(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S3(t,e)}function S3(t,e){return S3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},S3(t,e)}function JE(t,e,n){return e=g9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g9(t){var e=dme(t,"string");return sv(e)=="symbol"?e:e+""}function dme(t,e){if(sv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fme=function(e,n,r,i,a){var s=a.x1,o=a.x2,c=a.y1,u=a.y2,h=a.xAxis,m=a.yAxis;if(!h||!m)return null;var v=Tj({x:h.scale,y:m.scale}),x={x:e?v.x.apply(s,{position:"start"}):v.x.rangeMin,y:r?v.y.apply(c,{position:"start"}):v.y.rangeMin},_={x:n?v.x.apply(o,{position:"end"}):v.x.rangeMax,y:i?v.y.apply(u,{position:"end"}):v.y.rangeMax};return Pc(a,"discard")&&(!v.isInRange(x)||!v.isInRange(_))?null:n9(x,_)},ZE=(function(t){function e(){return ime(this,e),ome(this,e,arguments)}return ume(e,t),sme(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,s=r.y1,o=r.y2,c=r.className,u=r.alwaysShow,h=r.clipPathId;Ul(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=Hi(i),v=Hi(a),x=Hi(s),_=Hi(o),T=this.props.shape;if(!m&&!v&&!x&&!_&&!T)return null;var w=fme(m,v,x,_,this.props);if(!w&&!T)return null;var E=Pc(this.props,"hidden")?"url(#".concat(h,")"):void 0;return ue.createElement(lr,{className:En("recharts-reference-area",c)},e.renderRect(T,GF(GF({clipPath:E},rn(this.props,!0)),w)),ta.renderCallByParent(this.props,w))}}])})(ue.Component);JE(ZE,"displayName","ReferenceArea");JE(ZE,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});JE(ZE,"renderRect",function(t,e){var n;return ue.isValidElement(t)?n=ue.cloneElement(t,e):on(t)?n=t(e):n=ue.createElement(wj,w3({},e,{className:"recharts-reference-area-rect"})),n});function v9(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function hme(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return ype(r,n)}function pme(t,e,n){var r=n==="width",i=t.x,a=t.y,s=t.width,o=t.height;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function tT(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function mme(t,e){return v9(t,e+1)}function gme(t,e,n,r,i){for(var a=(r||[]).slice(),s=e.start,o=e.end,c=0,u=1,h=s,m=function(){var _=r?.[c];if(_===void 0)return{v:v9(r,u)};var T=c,w,E=function(){return w===void 0&&(w=n(_,T)),w},N=_.coordinate,C=c===0||tT(t,N,E,h,o);C||(c=0,h=s,u+=1),C&&(h=N+t*(E()/2+i),c+=u)},v;u<=a.length;)if(v=m(),v)return v.v;return[]}function ib(t){"@babel/helpers - typeof";return ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ib(t)}function qF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function za(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qF(Object(n),!0).forEach(function(r){vme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vme(t,e,n){return e=yme(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yme(t){var e=xme(t,"string");return ib(e)=="symbol"?e:e+""}function xme(t,e){if(ib(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ib(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bme(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,o=e.start,c=e.end,u=function(v){var x=a[v],_,T=function(){return _===void 0&&(_=n(x,v)),_};if(v===s-1){var w=t*(x.coordinate+t*T()/2-c);a[v]=x=za(za({},x),{},{tickCoord:w>0?x.coordinate-w*t:x.coordinate})}else a[v]=x=za(za({},x),{},{tickCoord:x.coordinate});var E=tT(t,x.tickCoord,T,o,c);E&&(c=x.tickCoord-t*(T()/2+i),a[v]=za(za({},x),{},{isShow:!0}))},h=s-1;h>=0;h--)u(h);return a}function _me(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,c=e.start,u=e.end;if(a){var h=r[o-1],m=n(h,o-1),v=t*(h.coordinate+t*m/2-u);s[o-1]=h=za(za({},h),{},{tickCoord:v>0?h.coordinate-v*t:h.coordinate});var x=tT(t,h.tickCoord,function(){return m},c,u);x&&(u=h.tickCoord-t*(m/2+i),s[o-1]=za(za({},h),{},{isShow:!0}))}for(var _=a?o-1:o,T=function(N){var C=s[N],P,I=function(){return P===void 0&&(P=n(C,N)),P};if(N===0){var j=t*(C.coordinate-t*I()/2-c);s[N]=C=za(za({},C),{},{tickCoord:j<0?C.coordinate-j*t:C.coordinate})}else s[N]=C=za(za({},C),{},{tickCoord:C.coordinate});var O=tT(t,C.tickCoord,I,c,u);O&&(c=C.tickCoord+t*(I()/2+i),s[N]=za(za({},C),{},{isShow:!0}))},w=0;w<_;w++)T(w);return s}function Rj(t,e,n){var r=t.tick,i=t.ticks,a=t.viewBox,s=t.minTickGap,o=t.orientation,c=t.interval,u=t.tickFormatter,h=t.unit,m=t.angle;if(!i||!i.length||!r)return[];if(dt(c)||Av.isSsr)return mme(i,typeof c=="number"&&dt(c)?c:0);var v=[],x=o==="top"||o==="bottom"?"width":"height",_=h&&x==="width"?Jy(h,{fontSize:e,letterSpacing:n}):{width:0,height:0},T=function(C,P){var I=on(u)?u(C.value,P):C.value;return x==="width"?hme(Jy(I,{fontSize:e,letterSpacing:n}),_,m):Jy(I,{fontSize:e,letterSpacing:n})[x]},w=i.length>=2?ds(i[1].coordinate-i[0].coordinate):1,E=pme(a,w,x);return c==="equidistantPreserveStart"?gme(w,E,T,i,s):(c==="preserveStart"||c==="preserveStartEnd"?v=_me(w,E,T,i,s,c==="preserveStartEnd"):v=bme(w,E,T,i,s),v.filter(function(N){return N.isShow}))}var wme=["viewBox"],Sme=["viewBox"],Tme=["ticks"];function ov(t){"@babel/helpers - typeof";return ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ov(t)}function Ag(){return Ag=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ag.apply(this,arguments)}function $F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$F(Object(n),!0).forEach(function(r){Ij(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$F(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qR(t,e){if(t==null)return{};var n=Eme(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Eme(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ame(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,x9(r.key),r)}}function kme(t,e,n){return e&&WF(t.prototype,e),n&&WF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mme(t,e,n){return e=nT(e),Nme(t,y9()?Reflect.construct(e,n||[],nT(t).constructor):e.apply(t,n))}function Nme(t,e){if(e&&(ov(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cme(t)}function Cme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y9=function(){return!!t})()}function nT(t){return nT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},nT(t)}function Rme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T3(t,e)}function T3(t,e){return T3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},T3(t,e)}function Ij(t,e,n){return e=x9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x9(t){var e=Ime(t,"string");return ov(e)=="symbol"?e:e+""}function Ime(t,e){if(ov(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ov(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Cv=(function(t){function e(n){var r;return Ame(this,e),r=Mme(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return Rme(e,t),kme(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,s=qR(r,wme),o=this.props,c=o.viewBox,u=qR(o,Sme);return!Og(a,c)||!Og(s,u)||!Og(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,s=i.y,o=i.width,c=i.height,u=i.orientation,h=i.tickSize,m=i.mirror,v=i.tickMargin,x,_,T,w,E,N,C=m?-1:1,P=r.tickSize||h,I=dt(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":x=_=r.coordinate,w=s+ +!m*c,T=w-C*P,N=T-C*v,E=I;break;case"left":T=w=r.coordinate,_=a+ +!m*o,x=_-C*P,E=x-C*v,N=I;break;case"right":T=w=r.coordinate,_=a+ +m*o,x=_+C*P,E=x+C*v,N=I;break;default:x=_=r.coordinate,w=s+ +m*c,T=w+C*P,N=T+C*v,E=I;break}return{line:{x1:x,y1:T,x2:_,y2:w},tick:{x:E,y:N}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,c=r.orientation,u=r.mirror,h=r.axisLine,m=zi(zi(zi({},rn(this.props,!1)),rn(h,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var v=+(c==="top"&&!u||c==="bottom"&&u);m=zi(zi({},m),{},{x1:i,y1:a+v*o,x2:i+s,y2:a+v*o})}else{var x=+(c==="left"&&!u||c==="right"&&u);m=zi(zi({},m),{},{x1:i+x*s,y1:a,x2:i+x*s,y2:a+o})}return ue.createElement("line",Ag({},m,{className:En("recharts-cartesian-axis-line",fo(h,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var s=this,o=this.props,c=o.tickLine,u=o.stroke,h=o.tick,m=o.tickFormatter,v=o.unit,x=Rj(zi(zi({},this.props),{},{ticks:r}),i,a),_=this.getTickTextAnchor(),T=this.getTickVerticalAnchor(),w=rn(this.props,!1),E=rn(h,!1),N=zi(zi({},w),{},{fill:"none"},rn(c,!1)),C=x.map(function(P,I){var j=s.getTickLineCoord(P),O=j.line,F=j.tick,L=zi(zi(zi(zi({textAnchor:_,verticalAnchor:T},w),{},{stroke:"none",fill:u},E),F),{},{index:I,payload:P,visibleTicksCount:x.length,tickFormatter:m});return ue.createElement(lr,Ag({className:"recharts-cartesian-axis-tick",key:"tick-".concat(P.value,"-").concat(P.coordinate,"-").concat(P.tickCoord)},up(s.props,P,I)),c&&ue.createElement("line",Ag({},N,O,{className:En("recharts-cartesian-axis-tick-line",fo(c,"className"))})),h&&e.renderTickItem(h,L,"".concat(on(m)?m(P.value,I):P.value).concat(v||"")))});return ue.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,s=i.width,o=i.height,c=i.ticksGenerator,u=i.className,h=i.hide;if(h)return null;var m=this.props,v=m.ticks,x=qR(m,Tme),_=v;return on(c)&&(_=v&&v.length>0?c(this.props):c(x)),s<=0||o<=0||!_||!_.length?null:ue.createElement(lr,{className:En("recharts-cartesian-axis",u),ref:function(w){r.layerReference=w}},a&&this.renderAxisLine(),this.renderTicks(_,this.state.fontSize,this.state.letterSpacing),ta.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var s,o=En(i.className,"recharts-cartesian-axis-tick-value");return ue.isValidElement(r)?s=ue.cloneElement(r,zi(zi({},i),{},{className:o})):on(r)?s=r(zi(zi({},i),{},{className:o})):s=ue.createElement(dp,Ag({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])})(J.Component);Ij(Cv,"displayName","CartesianAxis");Ij(Cv,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Pme=["x1","y1","x2","y2","key"],Ome=["offset"];function pp(t){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pp(t)}function KF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KF(Object(n),!0).forEach(function(r){jme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jme(t,e,n){return e=Dme(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dme(t){var e=Lme(t,"string");return pp(e)=="symbol"?e:e+""}function Lme(t,e){if(pp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yh(){return Yh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yh.apply(this,arguments)}function XF(t,e){if(t==null)return{};var n=Ume(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ume(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var zme=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,s=e.width,o=e.height,c=e.ry;return ue.createElement("rect",{x:i,y:a,ry:c,width:s,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function b9(t,e){var n;if(ue.isValidElement(t))n=ue.cloneElement(t,e);else if(on(t))n=t(e);else{var r=e.x1,i=e.y1,a=e.x2,s=e.y2,o=e.key,c=XF(e,Pme),u=rn(c,!1);u.offset;var h=XF(u,Ome);n=ue.createElement("line",Yh({},h,{x1:r,y1:i,x2:a,y2:s,fill:"none",key:o}))}return n}function Bme(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,c){var u=Fa(Fa({},t),{},{x1:e,y1:o,x2:e+n,y2:o,key:"line-".concat(c),index:c});return b9(i,u)});return ue.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function Fme(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,a=t.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,c){var u=Fa(Fa({},t),{},{x1:o,y1:e,x2:o,y2:e+n,key:"line-".concat(c),index:c});return b9(i,u)});return ue.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function Vme(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,a=t.width,s=t.height,o=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var h=o.map(function(v){return Math.round(v+i-i)}).sort(function(v,x){return v-x});i!==h[0]&&h.unshift(0);var m=h.map(function(v,x){var _=!h[x+1],T=_?i+s-v:h[x+1]-v;if(T<=0)return null;var w=x%e.length;return ue.createElement("rect",{key:"react-".concat(x),y:v,x:r,height:T,width:a,stroke:"none",fill:e[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return ue.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function Hme(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,a=t.x,s=t.y,o=t.width,c=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var h=u.map(function(v){return Math.round(v+a-a)}).sort(function(v,x){return v-x});a!==h[0]&&h.unshift(0);var m=h.map(function(v,x){var _=!h[x+1],T=_?a+o-v:h[x+1]-v;if(T<=0)return null;var w=x%r.length;return ue.createElement("rect",{key:"react-".concat(x),x:v,y:s,width:T,height:c,stroke:"none",fill:r[w],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return ue.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var Gme=function(e,n){var r=e.xAxis,i=e.width,a=e.height,s=e.offset;return w$(Rj(Fa(Fa(Fa({},Cv.defaultProps),r),{},{ticks:zu(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,n)},qme=function(e,n){var r=e.yAxis,i=e.width,a=e.height,s=e.offset;return w$(Rj(Fa(Fa(Fa({},Cv.defaultProps),r),{},{ticks:zu(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,n)},qm={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function _9(t){var e,n,r,i,a,s,o=kj(),c=Mj(),u=Ipe(),h=Fa(Fa({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:qm.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:qm.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:qm.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:qm.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:qm.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:qm.verticalFill,x:dt(t.x)?t.x:u.left,y:dt(t.y)?t.y:u.top,width:dt(t.width)?t.width:u.width,height:dt(t.height)?t.height:u.height}),m=h.x,v=h.y,x=h.width,_=h.height,T=h.syncWithTicks,w=h.horizontalValues,E=h.verticalValues,N=Npe(),C=Cpe();if(!dt(x)||x<=0||!dt(_)||_<=0||!dt(m)||m!==+m||!dt(v)||v!==+v)return null;var P=h.verticalCoordinatesGenerator||Gme,I=h.horizontalCoordinatesGenerator||qme,j=h.horizontalPoints,O=h.verticalPoints;if((!j||!j.length)&&on(I)){var F=w&&w.length,L=I({yAxis:C?Fa(Fa({},C),{},{ticks:F?w:C.ticks}):void 0,width:o,height:c,offset:u},F?!0:T);Ul(Array.isArray(L),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(pp(L),"]")),Array.isArray(L)&&(j=L)}if((!O||!O.length)&&on(P)){var z=E&&E.length,V=P({xAxis:N?Fa(Fa({},N),{},{ticks:z?E:N.ticks}):void 0,width:o,height:c,offset:u},z?!0:T);Ul(Array.isArray(V),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(pp(V),"]")),Array.isArray(V)&&(O=V)}return ue.createElement("g",{className:"recharts-cartesian-grid"},ue.createElement(zme,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height,ry:h.ry}),ue.createElement(Bme,Yh({},h,{offset:u,horizontalPoints:j,xAxis:N,yAxis:C})),ue.createElement(Fme,Yh({},h,{offset:u,verticalPoints:O,xAxis:N,yAxis:C})),ue.createElement(Vme,Yh({},h,{horizontalPoints:j})),ue.createElement(Hme,Yh({},h,{verticalPoints:O})))}_9.displayName="CartesianGrid";function lv(t){"@babel/helpers - typeof";return lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lv(t)}function $me(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wme(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T9(r.key),r)}}function Kme(t,e,n){return e&&Wme(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xme(t,e,n){return e=rT(e),Yme(t,w9()?Reflect.construct(e,n||[],rT(t).constructor):e.apply(t,n))}function Yme(t,e){if(e&&(lv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jme(t)}function Jme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w9=function(){return!!t})()}function rT(t){return rT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},rT(t)}function Zme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E3(t,e)}function E3(t,e){return E3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},E3(t,e)}function S9(t,e,n){return e=T9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T9(t){var e=Qme(t,"string");return lv(e)=="symbol"?e:e+""}function Qme(t,e){if(lv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function A3(){return A3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},A3.apply(this,arguments)}function ege(t){var e=t.xAxisId,n=kj(),r=Mj(),i=c9(e);return i==null?null:J.createElement(Cv,A3({},i,{className:En("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(s){return zu(s,!0)}}))}var QE=(function(t){function e(){return $me(this,e),Xme(this,e,arguments)}return Zme(e,t),Kme(e,[{key:"render",value:function(){return J.createElement(ege,this.props)}}])})(J.Component);S9(QE,"displayName","XAxis");S9(QE,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function cv(t){"@babel/helpers - typeof";return cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cv(t)}function tge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,k9(r.key),r)}}function rge(t,e,n){return e&&nge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ige(t,e,n){return e=iT(e),age(t,E9()?Reflect.construct(e,n||[],iT(t).constructor):e.apply(t,n))}function age(t,e){if(e&&(cv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sge(t)}function sge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E9=function(){return!!t})()}function iT(t){return iT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},iT(t)}function oge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k3(t,e)}function k3(t,e){return k3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},k3(t,e)}function A9(t,e,n){return e=k9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k9(t){var e=lge(t,"string");return cv(e)=="symbol"?e:e+""}function lge(t,e){if(cv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function M3(){return M3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},M3.apply(this,arguments)}var cge=function(e){var n=e.yAxisId,r=kj(),i=Mj(),a=u9(n);return a==null?null:J.createElement(Cv,M3({},a,{className:En("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return zu(o,!0)}}))},eA=(function(t){function e(){return tge(this,e),ige(this,e,arguments)}return oge(e,t),rge(e,[{key:"render",value:function(){return J.createElement(cge,this.props)}}])})(J.Component);A9(eA,"displayName","YAxis");A9(eA,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function YF(t){return hge(t)||fge(t)||dge(t)||uge()}function uge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dge(t,e){if(t){if(typeof t=="string")return N3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N3(t,e)}}function fge(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hge(t){if(Array.isArray(t))return N3(t)}function N3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var C3=function(e,n,r,i,a){var s=Wo(e,Cj),o=Wo(e,YE),c=[].concat(YF(s),YF(o)),u=Wo(e,ZE),h="".concat(i,"Id"),m=i[0],v=n;if(c.length&&(v=c.reduce(function(T,w){if(w.props[h]===r&&Pc(w.props,"extendDomain")&&dt(w.props[m])){var E=w.props[m];return[Math.min(T[0],E),Math.max(T[1],E)]}return T},v)),u.length){var x="".concat(m,"1"),_="".concat(m,"2");v=u.reduce(function(T,w){if(w.props[h]===r&&Pc(w.props,"extendDomain")&&dt(w.props[x])&&dt(w.props[_])){var E=w.props[x],N=w.props[_];return[Math.min(T[0],E,N),Math.max(T[1],E,N)]}return T},v)}return a&&a.length&&(v=a.reduce(function(T,w){return dt(w)?[Math.min(T[0],w),Math.max(T[1],w)]:T},v)),v},$R={exports:{}},JF;function pge(){return JF||(JF=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,h){this.fn=c,this.context=u,this.once=h||!1}function a(c,u,h,m,v){if(typeof h!="function")throw new TypeError("The listener must be a function");var x=new i(h,m||c,v),_=n?n+u:u;return c._events[_]?c._events[_].fn?c._events[_]=[c._events[_],x]:c._events[_].push(x):(c._events[_]=x,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],h,m;if(this._eventsCount===0)return u;for(m in h=this._events)e.call(h,m)&&u.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},o.prototype.listeners=function(u){var h=n?n+u:u,m=this._events[h];if(!m)return[];if(m.fn)return[m.fn];for(var v=0,x=m.length,_=new Array(x);v<x;v++)_[v]=m[v].fn;return _},o.prototype.listenerCount=function(u){var h=n?n+u:u,m=this._events[h];return m?m.fn?1:m.length:0},o.prototype.emit=function(u,h,m,v,x,_){var T=n?n+u:u;if(!this._events[T])return!1;var w=this._events[T],E=arguments.length,N,C;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),E){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,h),!0;case 3:return w.fn.call(w.context,h,m),!0;case 4:return w.fn.call(w.context,h,m,v),!0;case 5:return w.fn.call(w.context,h,m,v,x),!0;case 6:return w.fn.call(w.context,h,m,v,x,_),!0}for(C=1,N=new Array(E-1);C<E;C++)N[C-1]=arguments[C];w.fn.apply(w.context,N)}else{var P=w.length,I;for(C=0;C<P;C++)switch(w[C].once&&this.removeListener(u,w[C].fn,void 0,!0),E){case 1:w[C].fn.call(w[C].context);break;case 2:w[C].fn.call(w[C].context,h);break;case 3:w[C].fn.call(w[C].context,h,m);break;case 4:w[C].fn.call(w[C].context,h,m,v);break;default:if(!N)for(I=1,N=new Array(E-1);I<E;I++)N[I-1]=arguments[I];w[C].fn.apply(w[C].context,N)}}return!0},o.prototype.on=function(u,h,m){return a(this,u,h,m,!1)},o.prototype.once=function(u,h,m){return a(this,u,h,m,!0)},o.prototype.removeListener=function(u,h,m,v){var x=n?n+u:u;if(!this._events[x])return this;if(!h)return s(this,x),this;var _=this._events[x];if(_.fn)_.fn===h&&(!v||_.once)&&(!m||_.context===m)&&s(this,x);else{for(var T=0,w=[],E=_.length;T<E;T++)(_[T].fn!==h||v&&!_[T].once||m&&_[T].context!==m)&&w.push(_[T]);w.length?this._events[x]=w.length===1?w[0]:w:s(this,x)}return this},o.prototype.removeAllListeners=function(u){var h;return u?(h=n?n+u:u,this._events[h]&&s(this,h)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})($R)),$R.exports}var mge=pge();const gge=Zn(mge);var WR=new gge,KR="recharts.syncMouseEvents";function ab(t){"@babel/helpers - typeof";return ab=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ab(t)}function vge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,M9(r.key),r)}}function xge(t,e,n){return e&&yge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function XR(t,e,n){return e=M9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M9(t){var e=bge(t,"string");return ab(e)=="symbol"?e:e+""}function bge(t,e){if(ab(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ab(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _ge=(function(){function t(){vge(this,t),XR(this,"activeIndex",0),XR(this,"coordinateList",[]),XR(this,"layout","horizontal")}return xge(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,s=n.container,o=s===void 0?null:s,c=n.layout,u=c===void 0?null:c,h=n.offset,m=h===void 0?null:h,v=n.mouseHandlerCallback,x=v===void 0?null:v;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,o=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,h=((r=window)===null||r===void 0?void 0:r.scrollY)||0,m=a+c+u,v=s+this.offset.top+o/2+h;this.mouseHandlerCallback({pageX:m,pageY:v})}}}])})();function wge(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t?.[0],i=t?.[1];if(r&&i&&dt(r)&&dt(i))return!0}return!1}function Sge(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function N9(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,a=t.endAngle,s=Cr(e,n,r,i),o=Cr(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function Tge(t,e,n){var r,i,a,s;if(t==="horizontal")r=e.x,a=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,c=e.cy,u=e.innerRadius,h=e.outerRadius,m=e.angle,v=Cr(o,c,u,m),x=Cr(o,c,h,m);r=v.x,i=v.y,a=x.x,s=x.y}else return N9(e);return[{x:r,y:i},{x:a,y:s}]}function sb(t){"@babel/helpers - typeof";return sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sb(t)}function ZF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $w(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZF(Object(n),!0).forEach(function(r){Ege(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ege(t,e,n){return e=Age(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Age(t){var e=kge(t,"string");return sb(e)=="symbol"?e:e+""}function kge(t,e){if(sb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mge(t){var e,n,r=t.element,i=t.tooltipEventType,a=t.isActive,s=t.activeCoordinate,o=t.activePayload,c=t.offset,u=t.activeTooltipIndex,h=t.tooltipAxisBandSize,m=t.layout,v=t.chartName,x=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!x||!a||!s||v!=="ScatterChart"&&i!=="axis")return null;var _,T=QP;if(v==="ScatterChart")_=s,T=cfe;else if(v==="BarChart")_=Sge(m,s,c,h),T=wj;else if(m==="radial"){var w=N9(s),E=w.cx,N=w.cy,C=w.radius,P=w.startAngle,I=w.endAngle;_={cx:E,cy:N,startAngle:P,endAngle:I,innerRadius:C,outerRadius:C},T=_j}else _={points:Tge(m,s,c)},T=QP;var j=$w($w($w($w({stroke:"#ccc",pointerEvents:"none"},c),_),rn(x,!1)),{},{payload:o,payloadIndex:u,className:En("recharts-tooltip-cursor",x.className)});return J.isValidElement(x)?J.cloneElement(x,j):J.createElement(T,j)}var Nge=["item"],Cge=["children","className","width","height","style","compact","title","desc"];function uv(t){"@babel/helpers - typeof";return uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uv(t)}function kg(){return kg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kg.apply(this,arguments)}function QF(t,e){return Pge(t)||Ige(t,e)||R9(t,e)||Rge()}function Rge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ige(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Pge(t){if(Array.isArray(t))return t}function e6(t,e){if(t==null)return{};var n=Oge(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Oge(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function jge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I9(r.key),r)}}function Lge(t,e,n){return e&&Dge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Uge(t,e,n){return e=aT(e),zge(t,C9()?Reflect.construct(e,n||[],aT(t).constructor):e.apply(t,n))}function zge(t,e){if(e&&(uv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bge(t)}function Bge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C9=function(){return!!t})()}function aT(t){return aT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},aT(t)}function Fge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R3(t,e)}function R3(t,e){return R3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},R3(t,e)}function dv(t){return Gge(t)||Hge(t)||R9(t)||Vge()}function Vge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R9(t,e){if(t){if(typeof t=="string")return I3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I3(t,e)}}function Hge(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Gge(t){if(Array.isArray(t))return I3(t)}function I3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function t6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Be(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t6(Object(n),!0).forEach(function(r){Jt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jt(t,e,n){return e=I9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I9(t){var e=qge(t,"string");return uv(e)=="symbol"?e:e+""}function qge(t,e){if(uv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(uv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $ge={xAxis:["bottom","top"],yAxis:["left","right"]},Wge={width:"100%",height:"100%"},P9={x:0,y:0};function Ww(t){return t}var Kge=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},Xge=function(e,n,r,i){var a=n.find(function(h){return h&&h.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,o=i.radius;return Be(Be(Be({},i),Cr(i.cx,i.cy,o,s)),{},{angle:s,radius:o})}var c=a.coordinate,u=i.angle;return Be(Be(Be({},i),Cr(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return P9},tA=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,s=(r??[]).reduce(function(o,c){var u=c.props.data;return u&&u.length?[].concat(dv(o),dv(u)):o},[]);return s.length>0?s:e&&e.length&&dt(i)&&dt(a)?e.slice(i,a+1):[]};function O9(t){return t==="number"?[0,"auto"]:void 0}var P3=function(e,n,r,i){var a=e.graphicalItems,s=e.tooltipAxis,o=tA(n,e);return r<0||!a||!a.length||r>=o.length?null:a.reduce(function(c,u){var h,m=(h=u.props.data)!==null&&h!==void 0?h:n;m&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(m=m.slice(e.dataStartIndex,e.dataEndIndex+1));var v;if(s.dataKey&&!s.allowDuplicatedCategory){var x=m===void 0?o:m;v=pP(x,s.dataKey,i)}else v=m&&m[r]||o[r];return v?[].concat(dv(c),[k$(u,v)]):c},[])},n6=function(e,n,r,i){var a=i||{x:e.chartX,y:e.chartY},s=Kge(a,r),o=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,h=Cle(s,o,u,c);if(h>=0&&u){var m=u[h]&&u[h].value,v=P3(e,n,h,m),x=Xge(r,o,h,a);return{activeTooltipIndex:h,activeLabel:m,activePayload:v,activeCoordinate:x}}return null},Yge=function(e,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,h=e.layout,m=e.children,v=e.stackOffset,x=_$(h,a);return r.reduce(function(_,T){var w,E=T.type.defaultProps!==void 0?Be(Be({},T.type.defaultProps),T.props):T.props,N=E.type,C=E.dataKey,P=E.allowDataOverflow,I=E.allowDuplicatedCategory,j=E.scale,O=E.ticks,F=E.includeHidden,L=E[s];if(_[L])return _;var z=tA(e.data,{graphicalItems:i.filter(function(ae){var me,Ie=s in ae.props?ae.props[s]:(me=ae.type.defaultProps)===null||me===void 0?void 0:me[s];return Ie===L}),dataStartIndex:c,dataEndIndex:u}),V=z.length,G,$,ee;wge(E.domain,P,N)&&(G=KP(E.domain,null,P),x&&(N==="number"||j!=="auto")&&(ee=Qy(z,C,"category")));var te=O9(N);if(!G||G.length===0){var K,X=(K=E.domain)!==null&&K!==void 0?K:te;if(C){if(G=Qy(z,C,N),N==="category"&&x){var re=Tee(G);I&&re?($=G,G=W1(0,V)):I||(G=oB(X,G,T).reduce(function(ae,me){return ae.indexOf(me)>=0?ae:[].concat(dv(ae),[me])},[]))}else if(N==="category")I?G=G.filter(function(ae){return ae!==""&&!Pn(ae)}):G=oB(X,G,T).reduce(function(ae,me){return ae.indexOf(me)>=0||me===""||Pn(me)?ae:[].concat(dv(ae),[me])},[]);else if(N==="number"){var ce=jle(z,i.filter(function(ae){var me,Ie,Xe=s in ae.props?ae.props[s]:(me=ae.type.defaultProps)===null||me===void 0?void 0:me[s],ve="hide"in ae.props?ae.props.hide:(Ie=ae.type.defaultProps)===null||Ie===void 0?void 0:Ie.hide;return Xe===L&&(F||!ve)}),C,a,h);ce&&(G=ce)}x&&(N==="number"||j!=="auto")&&(ee=Qy(z,C,"category"))}else x?G=W1(0,V):o&&o[L]&&o[L].hasStack&&N==="number"?G=v==="expand"?[0,1]:A$(o[L].stackGroups,c,u):G=b$(z,i.filter(function(ae){var me=s in ae.props?ae.props[s]:ae.type.defaultProps[s],Ie="hide"in ae.props?ae.props.hide:ae.type.defaultProps.hide;return me===L&&(F||!Ie)}),N,h,!0);if(N==="number")G=C3(m,G,L,a,O),X&&(G=KP(X,G,P));else if(N==="category"&&X){var de=X,W=G.every(function(ae){return de.indexOf(ae)>=0});W&&(G=de)}}return Be(Be({},_),{},Jt({},L,Be(Be({},E),{},{axisType:a,domain:G,categoricalDomain:ee,duplicateDomain:$,originalDomain:(w=E.domain)!==null&&w!==void 0?w:te,isCategorical:x,layout:h})))},{})},Jge=function(e,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,h=e.layout,m=e.children,v=tA(e.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),x=v.length,_=_$(h,a),T=-1;return r.reduce(function(w,E){var N=E.type.defaultProps!==void 0?Be(Be({},E.type.defaultProps),E.props):E.props,C=N[s],P=O9("number");if(!w[C]){T++;var I;return _?I=W1(0,x):o&&o[C]&&o[C].hasStack?(I=A$(o[C].stackGroups,c,u),I=C3(m,I,C,a)):(I=KP(P,b$(v,r.filter(function(j){var O,F,L=s in j.props?j.props[s]:(O=j.type.defaultProps)===null||O===void 0?void 0:O[s],z="hide"in j.props?j.props.hide:(F=j.type.defaultProps)===null||F===void 0?void 0:F.hide;return L===C&&!z}),"number",h),i.defaultProps.allowDataOverflow),I=C3(m,I,C,a)),Be(Be({},w),{},Jt({},C,Be(Be({axisType:a},i.defaultProps),{},{hide:!0,orientation:fo($ge,"".concat(a,".").concat(T%2),null),domain:I,originalDomain:P,isCategorical:_,layout:h})))}return w},{})},Zge=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,s=n.graphicalItems,o=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,h=e.children,m="".concat(i,"Id"),v=Wo(h,a),x={};return v&&v.length?x=Yge(e,{axes:v,graphicalItems:s,axisType:i,axisIdKey:m,stackGroups:o,dataStartIndex:c,dataEndIndex:u}):s&&s.length&&(x=Jge(e,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:m,stackGroups:o,dataStartIndex:c,dataEndIndex:u})),x},Qge=function(e){var n=df(e),r=zu(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:KO(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:O1(n,r)}},r6=function(e){var n=e.children,r=e.defaultShowTooltip,i=io(n,nv),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},eve=function(e){return!e||!e.length?!1:e.some(function(n){var r=Fu(n&&n.type);return r&&r.indexOf("Bar")>=0})},i6=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},tve=function(e,n){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,o=e.yAxisMap,c=o===void 0?{}:o,u=r.width,h=r.height,m=r.children,v=r.margin||{},x=io(m,nv),_=io(m,tp),T=Object.keys(c).reduce(function(I,j){var O=c[j],F=O.orientation;return!O.mirror&&!O.hide?Be(Be({},I),{},Jt({},F,I[F]+O.width)):I},{left:v.left||0,right:v.right||0}),w=Object.keys(s).reduce(function(I,j){var O=s[j],F=O.orientation;return!O.mirror&&!O.hide?Be(Be({},I),{},Jt({},F,fo(I,"".concat(F))+O.height)):I},{top:v.top||0,bottom:v.bottom||0}),E=Be(Be({},w),T),N=E.bottom;x&&(E.bottom+=x.props.height||nv.defaultProps.height),_&&n&&(E=Ple(E,i,r,n));var C=u-E.left-E.right,P=h-E.top-E.bottom;return Be(Be({brushBottom:N},E),{},{width:Math.max(C,0),height:Math.max(P,0)})},nve=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},j9=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,s=e.validateTooltipEventTypes,o=s===void 0?["axis"]:s,c=e.axisComponents,u=e.legendContent,h=e.formatAxisMap,m=e.defaultProps,v=function(E,N){var C=N.graphicalItems,P=N.stackGroups,I=N.offset,j=N.updateId,O=N.dataStartIndex,F=N.dataEndIndex,L=E.barSize,z=E.layout,V=E.barGap,G=E.barCategoryGap,$=E.maxBarSize,ee=i6(z),te=ee.numericAxisName,K=ee.cateAxisName,X=eve(C),re=[];return C.forEach(function(ce,de){var W=tA(E.data,{graphicalItems:[ce],dataStartIndex:O,dataEndIndex:F}),ae=ce.type.defaultProps!==void 0?Be(Be({},ce.type.defaultProps),ce.props):ce.props,me=ae.dataKey,Ie=ae.maxBarSize,Xe=ae["".concat(te,"Id")],ve=ae["".concat(K,"Id")],_e={},Ye=c.reduce(function(Ct,et){var ne=N["".concat(et.axisType,"Map")],q=ae["".concat(et.axisType,"Id")];ne&&ne[q]||et.axisType==="zAxis"||hp();var he=ne[q];return Be(Be({},Ct),{},Jt(Jt({},et.axisType,he),"".concat(et.axisType,"Ticks"),zu(he)))},_e),ke=Ye[K],qe=Ye["".concat(K,"Ticks")],pt=P&&P[Xe]&&P[Xe].hasStack&&Gle(ce,P[Xe].stackGroups),Ue=Fu(ce.type).indexOf("Bar")>=0,xt=O1(ke,qe),Me=[],Fe=X&&Rle({barSize:L,stackGroups:P,totalSize:nve(Ye,K)});if(Ue){var Le,Qe,ie=Pn(Ie)?$:Ie,Nt=(Le=(Qe=O1(ke,qe,!0))!==null&&Qe!==void 0?Qe:ie)!==null&&Le!==void 0?Le:0;Me=Ile({barGap:V,barCategoryGap:G,bandSize:Nt!==xt?Nt:xt,sizeList:Fe[ve],maxBarSize:ie}),Nt!==xt&&(Me=Me.map(function(Ct){return Be(Be({},Ct),{},{position:Be(Be({},Ct.position),{},{offset:Ct.position.offset-Nt/2})})}))}var ft=ce&&ce.type&&ce.type.getComposedData;ft&&re.push({props:Be(Be({},ft(Be(Be({},Ye),{},{displayedData:W,props:E,dataKey:me,item:ce,bandSize:xt,barPosition:Me,offset:I,stackedData:pt,layout:z,dataStartIndex:O,dataEndIndex:F}))),{},Jt(Jt(Jt({key:ce.key||"item-".concat(de)},te,Ye[te]),K,Ye[K]),"animationId",j)),childIndex:Dee(ce,E.children),item:ce})}),re},x=function(E,N){var C=E.props,P=E.dataStartIndex,I=E.dataEndIndex,j=E.updateId;if(!_4({props:C}))return null;var O=C.children,F=C.layout,L=C.stackOffset,z=C.data,V=C.reverseStackOrder,G=i6(F),$=G.numericAxisName,ee=G.cateAxisName,te=Wo(O,r),K=Vle(z,te,"".concat($,"Id"),"".concat(ee,"Id"),L,V),X=c.reduce(function(ae,me){var Ie="".concat(me.axisType,"Map");return Be(Be({},ae),{},Jt({},Ie,Zge(C,Be(Be({},me),{},{graphicalItems:te,stackGroups:me.axisType===$&&K,dataStartIndex:P,dataEndIndex:I}))))},{}),re=tve(Be(Be({},X),{},{props:C,graphicalItems:te}),N?.legendBBox);Object.keys(X).forEach(function(ae){X[ae]=h(C,X[ae],re,ae.replace("Map",""),n)});var ce=X["".concat(ee,"Map")],de=Qge(ce),W=v(C,Be(Be({},X),{},{dataStartIndex:P,dataEndIndex:I,updateId:j,graphicalItems:te,stackGroups:K,offset:re}));return Be(Be({formattedGraphicalItems:W,graphicalItems:te,offset:re,stackGroups:K},de),X)},_=(function(w){function E(N){var C,P,I;return jge(this,E),I=Uge(this,E,[N]),Jt(I,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Jt(I,"accessibilityManager",new _ge),Jt(I,"handleLegendBBoxUpdate",function(j){if(j){var O=I.state,F=O.dataStartIndex,L=O.dataEndIndex,z=O.updateId;I.setState(Be({legendBBox:j},x({props:I.props,dataStartIndex:F,dataEndIndex:L,updateId:z},Be(Be({},I.state),{},{legendBBox:j}))))}}),Jt(I,"handleReceiveSyncEvent",function(j,O,F){if(I.props.syncId===j){if(F===I.eventEmitterSymbol&&typeof I.props.syncMethod!="function")return;I.applySyncEvent(O)}}),Jt(I,"handleBrushChange",function(j){var O=j.startIndex,F=j.endIndex;if(O!==I.state.dataStartIndex||F!==I.state.dataEndIndex){var L=I.state.updateId;I.setState(function(){return Be({dataStartIndex:O,dataEndIndex:F},x({props:I.props,dataStartIndex:O,dataEndIndex:F,updateId:L},I.state))}),I.triggerSyncEvent({dataStartIndex:O,dataEndIndex:F})}}),Jt(I,"handleMouseEnter",function(j){var O=I.getMouseInfo(j);if(O){var F=Be(Be({},O),{},{isTooltipActive:!0});I.setState(F),I.triggerSyncEvent(F);var L=I.props.onMouseEnter;on(L)&&L(F,j)}}),Jt(I,"triggeredAfterMouseMove",function(j){var O=I.getMouseInfo(j),F=O?Be(Be({},O),{},{isTooltipActive:!0}):{isTooltipActive:!1};I.setState(F),I.triggerSyncEvent(F);var L=I.props.onMouseMove;on(L)&&L(F,j)}),Jt(I,"handleItemMouseEnter",function(j){I.setState(function(){return{isTooltipActive:!0,activeItem:j,activePayload:j.tooltipPayload,activeCoordinate:j.tooltipPosition||{x:j.cx,y:j.cy}}})}),Jt(I,"handleItemMouseLeave",function(){I.setState(function(){return{isTooltipActive:!1}})}),Jt(I,"handleMouseMove",function(j){j.persist(),I.throttleTriggeredAfterMouseMove(j)}),Jt(I,"handleMouseLeave",function(j){I.throttleTriggeredAfterMouseMove.cancel();var O={isTooltipActive:!1};I.setState(O),I.triggerSyncEvent(O);var F=I.props.onMouseLeave;on(F)&&F(O,j)}),Jt(I,"handleOuterEvent",function(j){var O=jee(j),F=fo(I.props,"".concat(O));if(O&&on(F)){var L,z;/.*touch.*/i.test(O)?z=I.getMouseInfo(j.changedTouches[0]):z=I.getMouseInfo(j),F((L=z)!==null&&L!==void 0?L:{},j)}}),Jt(I,"handleClick",function(j){var O=I.getMouseInfo(j);if(O){var F=Be(Be({},O),{},{isTooltipActive:!0});I.setState(F),I.triggerSyncEvent(F);var L=I.props.onClick;on(L)&&L(F,j)}}),Jt(I,"handleMouseDown",function(j){var O=I.props.onMouseDown;if(on(O)){var F=I.getMouseInfo(j);O(F,j)}}),Jt(I,"handleMouseUp",function(j){var O=I.props.onMouseUp;if(on(O)){var F=I.getMouseInfo(j);O(F,j)}}),Jt(I,"handleTouchMove",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&I.throttleTriggeredAfterMouseMove(j.changedTouches[0])}),Jt(I,"handleTouchStart",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&I.handleMouseDown(j.changedTouches[0])}),Jt(I,"handleTouchEnd",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&I.handleMouseUp(j.changedTouches[0])}),Jt(I,"handleDoubleClick",function(j){var O=I.props.onDoubleClick;if(on(O)){var F=I.getMouseInfo(j);O(F,j)}}),Jt(I,"handleContextMenu",function(j){var O=I.props.onContextMenu;if(on(O)){var F=I.getMouseInfo(j);O(F,j)}}),Jt(I,"triggerSyncEvent",function(j){I.props.syncId!==void 0&&WR.emit(KR,I.props.syncId,j,I.eventEmitterSymbol)}),Jt(I,"applySyncEvent",function(j){var O=I.props,F=O.layout,L=O.syncMethod,z=I.state.updateId,V=j.dataStartIndex,G=j.dataEndIndex;if(j.dataStartIndex!==void 0||j.dataEndIndex!==void 0)I.setState(Be({dataStartIndex:V,dataEndIndex:G},x({props:I.props,dataStartIndex:V,dataEndIndex:G,updateId:z},I.state)));else if(j.activeTooltipIndex!==void 0){var $=j.chartX,ee=j.chartY,te=j.activeTooltipIndex,K=I.state,X=K.offset,re=K.tooltipTicks;if(!X)return;if(typeof L=="function")te=L(re,j);else if(L==="value"){te=-1;for(var ce=0;ce<re.length;ce++)if(re[ce].value===j.activeLabel){te=ce;break}}var de=Be(Be({},X),{},{x:X.left,y:X.top}),W=Math.min($,de.x+de.width),ae=Math.min(ee,de.y+de.height),me=re[te]&&re[te].value,Ie=P3(I.state,I.props.data,te),Xe=re[te]?{x:F==="horizontal"?re[te].coordinate:W,y:F==="horizontal"?ae:re[te].coordinate}:P9;I.setState(Be(Be({},j),{},{activeLabel:me,activeCoordinate:Xe,activePayload:Ie,activeTooltipIndex:te}))}else I.setState(j)}),Jt(I,"renderCursor",function(j){var O,F=I.state,L=F.isTooltipActive,z=F.activeCoordinate,V=F.activePayload,G=F.offset,$=F.activeTooltipIndex,ee=F.tooltipAxisBandSize,te=I.getTooltipEventType(),K=(O=j.props.active)!==null&&O!==void 0?O:L,X=I.props.layout,re=j.key||"_recharts-cursor";return ue.createElement(Mge,{key:re,activeCoordinate:z,activePayload:V,activeTooltipIndex:$,chartName:n,element:j,isActive:K,layout:X,offset:G,tooltipAxisBandSize:ee,tooltipEventType:te})}),Jt(I,"renderPolarAxis",function(j,O,F){var L=fo(j,"type.axisType"),z=fo(I.state,"".concat(L,"Map")),V=j.type.defaultProps,G=V!==void 0?Be(Be({},V),j.props):j.props,$=z&&z[G["".concat(L,"Id")]];return J.cloneElement(j,Be(Be({},$),{},{className:En(L,$.className),key:j.key||"".concat(O,"-").concat(F),ticks:zu($,!0)}))}),Jt(I,"renderPolarGrid",function(j){var O=j.props,F=O.radialLines,L=O.polarAngles,z=O.polarRadius,V=I.state,G=V.radiusAxisMap,$=V.angleAxisMap,ee=df(G),te=df($),K=te.cx,X=te.cy,re=te.innerRadius,ce=te.outerRadius;return J.cloneElement(j,{polarAngles:Array.isArray(L)?L:zu(te,!0).map(function(de){return de.coordinate}),polarRadius:Array.isArray(z)?z:zu(ee,!0).map(function(de){return de.coordinate}),cx:K,cy:X,innerRadius:re,outerRadius:ce,key:j.key||"polar-grid",radialLines:F})}),Jt(I,"renderLegend",function(){var j=I.state.formattedGraphicalItems,O=I.props,F=O.children,L=O.width,z=O.height,V=I.props.margin||{},G=L-(V.left||0)-(V.right||0),$=y$({children:F,formattedGraphicalItems:j,legendWidth:G,legendContent:u});if(!$)return null;var ee=$.item,te=e6($,Nge);return J.cloneElement(ee,Be(Be({},te),{},{chartWidth:L,chartHeight:z,margin:V,onBBoxUpdate:I.handleLegendBBoxUpdate}))}),Jt(I,"renderTooltip",function(){var j,O=I.props,F=O.children,L=O.accessibilityLayer,z=io(F,kc);if(!z)return null;var V=I.state,G=V.isTooltipActive,$=V.activeCoordinate,ee=V.activePayload,te=V.activeLabel,K=V.offset,X=(j=z.props.active)!==null&&j!==void 0?j:G;return J.cloneElement(z,{viewBox:Be(Be({},K),{},{x:K.left,y:K.top}),active:X,label:te,payload:X?ee:[],coordinate:$,accessibilityLayer:L})}),Jt(I,"renderBrush",function(j){var O=I.props,F=O.margin,L=O.data,z=I.state,V=z.offset,G=z.dataStartIndex,$=z.dataEndIndex,ee=z.updateId;return J.cloneElement(j,{key:j.key||"_recharts-brush",onChange:Vw(I.handleBrushChange,j.props.onChange),data:L,x:dt(j.props.x)?j.props.x:V.left,y:dt(j.props.y)?j.props.y:V.top+V.height+V.brushBottom-(F.bottom||0),width:dt(j.props.width)?j.props.width:V.width,startIndex:G,endIndex:$,updateId:"brush-".concat(ee)})}),Jt(I,"renderReferenceElement",function(j,O,F){if(!j)return null;var L=I,z=L.clipPathId,V=I.state,G=V.xAxisMap,$=V.yAxisMap,ee=V.offset,te=j.type.defaultProps||{},K=j.props,X=K.xAxisId,re=X===void 0?te.xAxisId:X,ce=K.yAxisId,de=ce===void 0?te.yAxisId:ce;return J.cloneElement(j,{key:j.key||"".concat(O,"-").concat(F),xAxis:G[re],yAxis:$[de],viewBox:{x:ee.left,y:ee.top,width:ee.width,height:ee.height},clipPathId:z})}),Jt(I,"renderActivePoints",function(j){var O=j.item,F=j.activePoint,L=j.basePoint,z=j.childIndex,V=j.isRange,G=[],$=O.props.key,ee=O.item.type.defaultProps!==void 0?Be(Be({},O.item.type.defaultProps),O.item.props):O.item.props,te=ee.activeDot,K=ee.dataKey,X=Be(Be({index:z,dataKey:K,cx:F.x,cy:F.y,r:4,fill:bj(O.item),strokeWidth:2,stroke:"#fff",payload:F.payload,value:F.value},rn(te,!1)),c1(te));return G.push(E.renderActiveDot(te,X,"".concat($,"-activePoint-").concat(z))),L?G.push(E.renderActiveDot(te,Be(Be({},X),{},{cx:L.x,cy:L.y}),"".concat($,"-basePoint-").concat(z))):V&&G.push(null),G}),Jt(I,"renderGraphicChild",function(j,O,F){var L=I.filterFormatItem(j,O,F);if(!L)return null;var z=I.getTooltipEventType(),V=I.state,G=V.isTooltipActive,$=V.tooltipAxis,ee=V.activeTooltipIndex,te=V.activeLabel,K=I.props.children,X=io(K,kc),re=L.props,ce=re.points,de=re.isRange,W=re.baseLine,ae=L.item.type.defaultProps!==void 0?Be(Be({},L.item.type.defaultProps),L.item.props):L.item.props,me=ae.activeDot,Ie=ae.hide,Xe=ae.activeBar,ve=ae.activeShape,_e=!!(!Ie&&G&&X&&(me||Xe||ve)),Ye={};z!=="axis"&&X&&X.props.trigger==="click"?Ye={onClick:Vw(I.handleItemMouseEnter,j.props.onClick)}:z!=="axis"&&(Ye={onMouseLeave:Vw(I.handleItemMouseLeave,j.props.onMouseLeave),onMouseEnter:Vw(I.handleItemMouseEnter,j.props.onMouseEnter)});var ke=J.cloneElement(j,Be(Be({},L.props),Ye));function qe(et){return typeof $.dataKey=="function"?$.dataKey(et.payload):null}if(_e)if(ee>=0){var pt,Ue;if($.dataKey&&!$.allowDuplicatedCategory){var xt=typeof $.dataKey=="function"?qe:"payload.".concat($.dataKey.toString());pt=pP(ce,xt,te),Ue=de&&W&&pP(W,xt,te)}else pt=ce?.[ee],Ue=de&&W&&W[ee];if(ve||Xe){var Me=j.props.activeIndex!==void 0?j.props.activeIndex:ee;return[J.cloneElement(j,Be(Be(Be({},L.props),Ye),{},{activeIndex:Me})),null,null]}if(!Pn(pt))return[ke].concat(dv(I.renderActivePoints({item:L,activePoint:pt,basePoint:Ue,childIndex:ee,isRange:de})))}else{var Fe,Le=(Fe=I.getItemByXY(I.state.activeCoordinate))!==null&&Fe!==void 0?Fe:{graphicalItem:ke},Qe=Le.graphicalItem,ie=Qe.item,Nt=ie===void 0?j:ie,ft=Qe.childIndex,Ct=Be(Be(Be({},L.props),Ye),{},{activeIndex:ft});return[J.cloneElement(Nt,Ct),null,null]}return de?[ke,null,null]:[ke,null]}),Jt(I,"renderCustomized",function(j,O,F){return J.cloneElement(j,Be(Be({key:"recharts-customized-".concat(F)},I.props),I.state))}),Jt(I,"renderMap",{CartesianGrid:{handler:Ww,once:!0},ReferenceArea:{handler:I.renderReferenceElement},ReferenceLine:{handler:Ww},ReferenceDot:{handler:I.renderReferenceElement},XAxis:{handler:Ww},YAxis:{handler:Ww},Brush:{handler:I.renderBrush,once:!0},Bar:{handler:I.renderGraphicChild},Line:{handler:I.renderGraphicChild},Area:{handler:I.renderGraphicChild},Radar:{handler:I.renderGraphicChild},RadialBar:{handler:I.renderGraphicChild},Scatter:{handler:I.renderGraphicChild},Pie:{handler:I.renderGraphicChild},Funnel:{handler:I.renderGraphicChild},Tooltip:{handler:I.renderCursor,once:!0},PolarGrid:{handler:I.renderPolarGrid,once:!0},PolarAngleAxis:{handler:I.renderPolarAxis},PolarRadiusAxis:{handler:I.renderPolarAxis},Customized:{handler:I.renderCustomized}}),I.clipPathId="".concat((C=N.id)!==null&&C!==void 0?C:Cb("recharts"),"-clip"),I.throttleTriggeredAfterMouseMove=yq(I.triggeredAfterMouseMove,(P=N.throttleDelay)!==null&&P!==void 0?P:1e3/60),I.state={},I}return Fge(E,w),Lge(E,[{key:"componentDidMount",value:function(){var C,P;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,P=C.children,I=C.data,j=C.height,O=C.layout,F=io(P,kc);if(F){var L=F.props.defaultIndex;if(!(typeof L!="number"||L<0||L>this.state.tooltipTicks.length-1)){var z=this.state.tooltipTicks[L]&&this.state.tooltipTicks[L].value,V=P3(this.state,I,L,z),G=this.state.tooltipTicks[L].coordinate,$=(this.state.offset.top+j)/2,ee=O==="horizontal",te=ee?{x:G,y:$}:{y:G,x:$},K=this.state.formattedGraphicalItems.find(function(re){var ce=re.item;return ce.type.name==="Scatter"});K&&(te=Be(Be({},te),K.props.points[L].tooltipPosition),V=K.props.points[L].tooltipPayload);var X={activeTooltipIndex:L,isTooltipActive:!0,activeLabel:z,activePayload:V,activeCoordinate:te};this.setState(X),this.renderCursor(F),this.accessibilityManager.setIndex(L)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,P){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==P.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var I,j;this.accessibilityManager.setDetails({offset:{left:(I=this.props.margin.left)!==null&&I!==void 0?I:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0}})}return null}},{key:"componentDidUpdate",value:function(C){gP([io(C.children,kc)],[io(this.props.children,kc)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=io(this.props.children,kc);if(C&&typeof C.props.shared=="boolean"){var P=C.props.shared?"axis":"item";return o.indexOf(P)>=0?P:a}return a}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var P=this.container,I=P.getBoundingClientRect(),j=wie(I),O={chartX:Math.round(C.pageX-j.left),chartY:Math.round(C.pageY-j.top)},F=I.width/P.offsetWidth||1,L=this.inRange(O.chartX,O.chartY,F);if(!L)return null;var z=this.state,V=z.xAxisMap,G=z.yAxisMap,$=this.getTooltipEventType(),ee=n6(this.state,this.props.data,this.props.layout,L);if($!=="axis"&&V&&G){var te=df(V).scale,K=df(G).scale,X=te&&te.invert?te.invert(O.chartX):null,re=K&&K.invert?K.invert(O.chartY):null;return Be(Be({},O),{},{xValue:X,yValue:re},ee)}return ee?Be(Be({},O),ee):null}},{key:"inRange",value:function(C,P){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,j=this.props.layout,O=C/I,F=P/I;if(j==="horizontal"||j==="vertical"){var L=this.state.offset,z=O>=L.left&&O<=L.left+L.width&&F>=L.top&&F<=L.top+L.height;return z?{x:O,y:F}:null}var V=this.state,G=V.angleAxisMap,$=V.radiusAxisMap;if(G&&$){var ee=df(G);return uB({x:O,y:F},ee)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,P=this.getTooltipEventType(),I=io(C,kc),j={};I&&P==="axis"&&(I.props.trigger==="click"?j={onClick:this.handleClick}:j={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var O=c1(this.props,this.handleOuterEvent);return Be(Be({},O),j)}},{key:"addListener",value:function(){WR.on(KR,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){WR.removeListener(KR,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,P,I){for(var j=this.state.formattedGraphicalItems,O=0,F=j.length;O<F;O++){var L=j[O];if(L.item===C||L.props.key===C.key||P===Fu(L.item.type)&&I===L.childIndex)return L}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,P=this.state.offset,I=P.left,j=P.top,O=P.height,F=P.width;return ue.createElement("defs",null,ue.createElement("clipPath",{id:C},ue.createElement("rect",{x:I,y:j,height:O,width:F})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(P,I){var j=QF(I,2),O=j[0],F=j[1];return Be(Be({},P),{},Jt({},O,F.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(P,I){var j=QF(I,2),O=j[0],F=j[1];return Be(Be({},P),{},Jt({},O,F.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var P;return(P=this.state.xAxisMap)===null||P===void 0||(P=P[C])===null||P===void 0?void 0:P.scale}},{key:"getYScaleByAxisId",value:function(C){var P;return(P=this.state.yAxisMap)===null||P===void 0||(P=P[C])===null||P===void 0?void 0:P.scale}},{key:"getItemByXY",value:function(C){var P=this.state,I=P.formattedGraphicalItems,j=P.activeItem;if(I&&I.length)for(var O=0,F=I.length;O<F;O++){var L=I[O],z=L.props,V=L.item,G=V.type.defaultProps!==void 0?Be(Be({},V.type.defaultProps),V.props):V.props,$=Fu(V.type);if($==="Bar"){var ee=(z.data||[]).find(function(re){return Hde(C,re)});if(ee)return{graphicalItem:L,payload:ee}}else if($==="RadialBar"){var te=(z.data||[]).find(function(re){return uB(C,re)});if(te)return{graphicalItem:L,payload:te}}else if($E(L,j)||WE(L,j)||eb(L,j)){var K=fhe({graphicalItem:L,activeTooltipItem:j,itemData:G.data}),X=G.activeIndex===void 0?K:G.activeIndex;return{graphicalItem:Be(Be({},L),{},{childIndex:X}),payload:eb(L,j)?G.data[K]:L.props.data[K]}}}return null}},{key:"render",value:function(){var C=this;if(!_4(this))return null;var P=this.props,I=P.children,j=P.className,O=P.width,F=P.height,L=P.style,z=P.compact,V=P.title,G=P.desc,$=e6(P,Cge),ee=rn($,!1);if(z)return ue.createElement(LF,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ue.createElement(yP,kg({},ee,{width:O,height:F,title:V,desc:G}),this.renderClipPath(),S4(I,this.renderMap)));if(this.props.accessibilityLayer){var te,K;ee.tabIndex=(te=this.props.tabIndex)!==null&&te!==void 0?te:0,ee.role=(K=this.props.role)!==null&&K!==void 0?K:"application",ee.onKeyDown=function(re){C.accessibilityManager.keyboardEvent(re)},ee.onFocus=function(){C.accessibilityManager.focus()}}var X=this.parseEventsOfWrapper();return ue.createElement(LF,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ue.createElement("div",kg({className:En("recharts-wrapper",j),style:Be({position:"relative",cursor:"default",width:O,height:F},L)},X,{ref:function(ce){C.container=ce}}),ue.createElement(yP,kg({},ee,{width:O,height:F,title:V,desc:G,style:Wge}),this.renderClipPath(),S4(I,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(J.Component);Jt(_,"displayName",n),Jt(_,"defaultProps",Be({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),Jt(_,"getDerivedStateFromProps",function(w,E){var N=w.dataKey,C=w.data,P=w.children,I=w.width,j=w.height,O=w.layout,F=w.stackOffset,L=w.margin,z=E.dataStartIndex,V=E.dataEndIndex;if(E.updateId===void 0){var G=r6(w);return Be(Be(Be({},G),{},{updateId:0},x(Be(Be({props:w},G),{},{updateId:0}),E)),{},{prevDataKey:N,prevData:C,prevWidth:I,prevHeight:j,prevLayout:O,prevStackOffset:F,prevMargin:L,prevChildren:P})}if(N!==E.prevDataKey||C!==E.prevData||I!==E.prevWidth||j!==E.prevHeight||O!==E.prevLayout||F!==E.prevStackOffset||!Og(L,E.prevMargin)){var $=r6(w),ee={chartX:E.chartX,chartY:E.chartY,isTooltipActive:E.isTooltipActive},te=Be(Be({},n6(E,C,O)),{},{updateId:E.updateId+1}),K=Be(Be(Be({},$),ee),te);return Be(Be(Be({},K),x(Be({props:w},K),E)),{},{prevDataKey:N,prevData:C,prevWidth:I,prevHeight:j,prevLayout:O,prevStackOffset:F,prevMargin:L,prevChildren:P})}if(!gP(P,E.prevChildren)){var X,re,ce,de,W=io(P,nv),ae=W&&(X=(re=W.props)===null||re===void 0?void 0:re.startIndex)!==null&&X!==void 0?X:z,me=W&&(ce=(de=W.props)===null||de===void 0?void 0:de.endIndex)!==null&&ce!==void 0?ce:V,Ie=ae!==z||me!==V,Xe=!Pn(C),ve=Xe&&!Ie?E.updateId:E.updateId+1;return Be(Be({updateId:ve},x(Be(Be({props:w},E),{},{updateId:ve,dataStartIndex:ae,dataEndIndex:me}),E)),{},{prevChildren:P,dataStartIndex:ae,dataEndIndex:me})}return null}),Jt(_,"renderActiveDot",function(w,E,N){var C;return J.isValidElement(w)?C=J.cloneElement(w,E):on(w)?C=w(E):C=ue.createElement(Sj,E),ue.createElement(lr,{className:"recharts-active-dot",key:N},C)});var T=J.forwardRef(function(E,N){return ue.createElement(_,kg({},E,{ref:N}))});return T.displayName=_.displayName,T},rve=j9({chartName:"BarChart",GraphicalChild:Ep,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:QE},{axisType:"yAxis",AxisComp:eA}],formatAxisMap:mpe}),ive=j9({chartName:"PieChart",GraphicalChild:nd,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:qE},{axisType:"radiusAxis",AxisComp:HE}],formatAxisMap:ece,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const ave=t=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.664 0l3.18-3.185m-3.18-3.182L12 12.5l-3.182-3.182a8.25 8.25 0 00-11.664 0L2.985 19.644z"})}),sve=t=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"})}),D9=J.createContext(void 0),ove=()=>{try{const t=window.localStorage.getItem("app-language");if(t&&["sv","en","ar","fi","es","de"].includes(t))return t}catch(t){console.warn("Could not read language from localStorage",t)}return"sv"},lve=({children:t})=>{const[e,n]=J.useState(ove);J.useEffect(()=>{try{window.localStorage.setItem("app-language",e),document.documentElement.lang=e,e==="ar"?document.documentElement.dir="rtl":document.documentElement.dir="ltr"}catch(a){console.error("Failed to save language to localStorage",a)}},[e]);const r=J.useCallback(a=>{n(a)},[]),i=J.useMemo(()=>({language:e,setLanguage:r}),[e,r]);return d.jsx(D9.Provider,{value:i,children:t})},L9=()=>{const t=J.useContext(D9);if(t===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return t},cve={sv:{idleTitle:"Enkt: Grundsr fr Sjlvreflektion",idleWelcome:"Vlkommen till en resa int. Detta verktyg r utformat fr att hjlpa dig reflektera ver dina s kallade <strong>Grundsr</strong>.",idleDescription:"Den korrekta psykologiska termen r <strong>Kumulativa stress- och utvecklingstrauma (KUT)</strong>. Till skillnad frn enstaka, chockerande hndelser (PTSD), uppstr KUT frn upprepade och ofta subtila negativa upplevelser ver tid, srskilt under uppvxten. Det kan handla om allt frn knslomssig frsummelse och konstant kritik till en ofrutsgbar hemmilj. Eftersom dessa erfarenheter normaliseras blir de en del av vr 'normala' verklighet och kan forma vr sjlvbild, vra relationer och hur vi ser p vrlden. Lngsiktiga effekter kan inkludera lg sjlvknsla, svrigheter med tillit, och en ihllande knsla av att inte duga.",idleInstructions:"Se denna enkt som ett frsta steg i din sjlvreflektion. Svara rligt utifrn vad som knns mest sant fr dig. Nr du r klar analyseras dina svar fr att ge dig en personlig insikt. All information hanteras enligt vr <a href='https://www.klattertradet.com/integritet-och-sekretess-policy' target='_blank' rel='noopener noreferrer' class='text-brand-secondary hover:underline font-semibold'>integritets- och sekretesspolicy</a>.",startQuizButton:"Starta Enkten",emailPrompt:"Ange din e-postadress fr att fortstta",activeTitle:"Sjlvreflektionsenkt",submitButton:"Skicka in och se resultat",pleaseAnswerAll:"Vnligen besvara alla frgor fr att fortstta.",errorTitle:"Ett fel har intrffat",analysisError:"Ett fel uppstod vid analysen. Frsk igen.",tryAgainButton:"Frsk igen",footerText:"Copyright  Klttertrdet 2024",loadingAnalysis:"Analyserar dina svar...",loadingTakeAMoment:"Detta kan ta en liten stund.",userEmail:"Anvndarens e-post",resultsTitle:"Ditt Resultat",resultsSubtitle:"Hr r en analys av dina svar, utformad fr att stdja din sjlvreflektion.",summaryTitle:"Sammanfattande Analys",scoresOverviewTitle:"Pongversikt",resetQuizButton:"Gr om enkten",score:"Pong",woundName:"Grundsr",privacyInfo:"Din integritet r viktig fr oss. All analys av dina svar sker anonymt och direkt i din webblsare. Ingen personlig data eller enskilda svar sparas p vra servrar. Fr en fullstndig beskrivning, ls vr <a href='https://www.klattertradet.com/integritet-och-sekretess-policy' target='_blank' rel='noopener noreferrer' class='text-brand-secondary hover:underline font-semibold'>integritets- och sekretesspolicy</a>.",topWoundsTitle:"Dina mest framtrdande grundsr",primaryWoundTitle:"Primrt grundsr",secondaryWoundTitle:"Sekundrt grundsr",categoriesTitle:"Frst din pverkansgrad per sr",regulatedTitle:"Reglerat",regulatedDescription:"Indikerar att detta omrde har en lg inverkan p ditt dagliga liv. Du har troligen sunda hanteringsstrategier.",compensatedTitle:"Kompenserat",compensatedDescription:"Tyder p att du kan uppleva utmaningar, men har utvecklat strategier fr att hantera dem, vilket kan vara energikrvande.",overwhelmedTitle:"vervldigat",overwhelmedDescription:"Indikerar att detta omrde har en betydande inverkan p dina tankar, knslor och beteenden. Std kan vara vrdefullt hr.",woundDistributionTitle:"Frdelning av Grundsr",detailedBreakdownTitle:"Detaljerad versikt",totalScoreTitle:"Din totala pverkansgrad",totalScore:"Totalpong",regulatedMainTitle:"Reglerat (0-49 pong)",regulatedMainDescription:"Din totalpong indikerar en stark frmga till sjlvreglering och en hg grad av emotionell medvetenhet. Du har sannolikt en stabil grund och har utvecklat sunda, effektiva strategier fr att hantera livets utmaningar. Detta tyder p resiliens, en trygg inre krna och en hlsosam koppling till dina knslor, vilket gr att du kan navigera svrigheter p ett balanserat och konstruktivt stt. ven om vissa sr kan finnas, pverkar de inte din vardag i ngon strre utstrckning.",compensatedMainTitle:"Kompenserat (50-79 pong)",compensatedLowDescription:"Din totalpong antyder att du befinner dig i ett kompenserat lge, dr du aktivt hanterar underliggande sr. Du har utvecklat fungerande frsvarsmekanismer, men dessa kan vara energikrvande och ibland leda till stress eller utmattning. Det finns en medvetenhet, men ocks en srbarhet.",compensatedHighDescription:"Din totalpong antyder att du befinner dig i ett kompenserat lge, men med en hgre anstrngning. Du arbetar hrt fr att hantera dina sr, vilket kan leda till en knsla av att stndigt vara p din vakt. Du kan uppleva perioder av stress och trtthet, och det finns en risk att dina strategier blir verbelastade under press.",overwhelmedMainTitle:"vervldigat (80-120 pong)",overwhelmedMainDescription:"Din totalpong indikerar att dina grundsr har en betydande och mrkbar inverkan p ditt dagliga liv. Du kan uppleva intensiva knslor, terkommande negativa tankemnster och svrigheter i relationer. Dina vanliga hanteringsstrategier kan knnas otillrckliga, och du kan knna dig fast eller vervldigad. Detta r en tydlig signal om att det r dags att ska std fr att bearbeta dessa sr och hitta nya, mer hllbara vgar framt.",recommendationTitle:"Rekommendation & Nsta Steg",recommendationLowScore:"Ditt resultat tyder p en god grund av sjlvinsikt och resiliens. Fortstt att vrda din emotionella hlsa genom sjlvreflektion. Om ngot specifikt sr nd resonerar med dig, kan det vara vrdefullt att utforska det vidare p egen hand eller med en vn.",recommendationHighScore:"Ditt resultat indikerar att du br p en betydande emotionell smrta som pverkar ditt vlmende. Att ska professionellt std frn en terapeut eller psykolog kan vara ett avgrande steg mot lkning. P <a href='https://www.klattertradet.se' target='_blank' rel='noopener noreferrer' class='text-brand-secondary hover:underline font-semibold'>Klttertrdet</a> erbjuder vi specialiserad hjlp fr att bearbeta KUT. Kontakta oss grna fr ett frsta samtal.",sendToHorizontenButton:"Skicka till Horizonten",emailSubject:"Resultat frn Grundsrsenkten",copyButton:"Kopiera text",copiedButton:"Kopierad!",nextSurveyButton:"G vidare till enkt 2: Kompenserat",woundTooltip_O:"vergivenhet: Rdslan fr att bli lmnad, fysiskt eller emotionellt.",woundTooltip_A:"Avvisad: Knslan av att inte duga, inte hra till eller vara onskad.",woundTooltip_F:"Frdmjukad: Knslan av skam, att vara liten, fel eller vrdels.",woundTooltip_S:"Sviken: Rdslan fr att bli bedragen, vilket leder till misstro.",woundTooltip_R:"Orttvisa: Knslan av att livet r orttvist och att man behandlas fel.",woundTooltip_E:"Ensamhet: En djup inre knsla av att vara ensam, oavsett sllskap."},en:{idleTitle:"Survey: Core Wounds for Self-Reflection",idleWelcome:"Welcome to a journey inward. This tool is designed to help you reflect on your so-called <strong>Core Wounds</strong>.",idleDescription:"The correct psychological term is <strong>Cumulative Stress and Developmental Trauma (CSDT)</strong>. Unlike single, shocking events (PTSD), CSDT arises from repeated and often subtle negative experiences over time, especially during childhood. This can range from emotional neglect and constant criticism to an unpredictable home environment. Because these experiences are normalized, they become part of our 'normal' reality and can shape our self-image, our relationships, and how we see the world. Long-term effects can include low self-esteem, difficulty with trust, and a persistent feeling of not being good enough.",idleInstructions:"See this survey as a first step in your self-reflection. Answer honestly based on what feels most true for you. When you are finished, your answers will be analyzed to give you personal insight. All information is handled according to our <a href='https://www.klattertradet.com/integritet-och-sekretess-policy' target='_blank' rel='noopener noreferrer' class='text-brand-secondary hover:underline font-semibold'>privacy policy</a>.",startQuizButton:"Start Survey",emailPrompt:"Enter your email address to continue",activeTitle:"Self-Reflection Survey",submitButton:"Submit and See Results",pleaseAnswerAll:"Please answer all questions to continue.",errorTitle:"An error has occurred",analysisError:"An error occurred during the analysis. Please try again.",tryAgainButton:"Try Again",footerText:"Copyright  Klttertrdet 2024",loadingAnalysis:"Analyzing your answers...",loadingTakeAMoment:"This may take a moment.",userEmail:"User's email",resultsTitle:"Your Result",resultsSubtitle:"Here is an analysis of your answers, designed to support your self-reflection.",summaryTitle:"Summary Analysis",scoresOverviewTitle:"Score Overview",resetQuizButton:"Retake Survey",score:"Score",woundName:"Core Wound",privacyInfo:"Your privacy is important to us. All analysis of your answers is done anonymously and directly in your browser. No personal data or individual answers are saved on our servers. For a full description, please read our <a href='https://www.klattertradet.com/integritet-och-sekretess-policy' target='_blank' rel='noopener noreferrer' class='text-brand-secondary hover:underline font-semibold'>privacy policy</a>.",topWoundsTitle:"Your Most Prominent Core Wounds",primaryWoundTitle:"Primary Core Wound",secondaryWoundTitle:"Secondary Core Wound",categoriesTitle:"Understand Your Impact Level Per Wound",regulatedTitle:"Regulated",regulatedDescription:"Indicates that this area has a low impact on your daily life. You likely have healthy coping strategies.",compensatedTitle:"Compensated",compensatedDescription:"Suggests you may experience challenges but have developed strategies to manage them, which can be energy-consuming.",overwhelmedTitle:"Overwhelmed",overwhelmedDescription:"Indicates this area has a significant impact on your thoughts, feelings, and behaviors. Support could be valuable here.",woundDistributionTitle:"Core Wound Distribution",detailedBreakdownTitle:"Detailed Breakdown",totalScoreTitle:"Your Total Impact Level",totalScore:"Total Score",regulatedMainTitle:"Regulated (0-49 points)",regulatedMainDescription:"Your total score indicates a strong ability for self-regulation and a high degree of emotional awareness. You likely have a stable foundation and have developed healthy, effective strategies to handle life's challenges. This suggests resilience, a secure inner core, and a healthy connection to your emotions, allowing you to navigate difficulties in a balanced and constructive way. Although some wounds may be present, they do not significantly affect your daily life.",compensatedMainTitle:"Compensated (50-79 points)",compensatedLowDescription:"Your total score suggests that you are in a compensated state, actively managing underlying wounds. You have developed functional defense mechanisms, but these can be energy-consuming and sometimes lead to stress or exhaustion. There is an awareness, but also a vulnerability.",compensatedHighDescription:"Your total score suggests that you are in a compensated state, but with greater effort. You work hard to manage your wounds, which can lead to a feeling of constantly being on guard. You may experience periods of stress and fatigue, and there is a risk that your strategies will become overloaded under pressure.",overwhelmedMainTitle:"Overwhelmed (80-120 points)",overwhelmedMainDescription:"Your total score indicates that your core wounds have a significant and noticeable impact on your daily life. You may experience intense emotions, recurring negative thought patterns, and difficulties in relationships. Your usual coping strategies may feel inadequate, and you might feel stuck or overwhelmed. This is a clear signal that it is time to seek support to process these wounds and find new, more sustainable paths forward.",recommendationTitle:"Recommendation & Next Steps",recommendationLowScore:"Your result suggests a good foundation of self-awareness and resilience. Continue to nurture your emotional health through self-reflection. If a specific wound still resonates with you, it may be valuable to explore it further on your own or with a friend.",recommendationHighScore:"Your result indicates that you carry significant emotional pain that affects your well-being. Seeking professional support from a therapist or psychologist can be a crucial step towards healing. At <a href='https://www.klattertradet.se' target='_blank' rel='noopener noreferrer' class='text-brand-secondary hover:underline font-semibold'>Klttertrdet</a>, we offer specialized help for processing CSDT. Please contact us for an initial consultation.",sendToHorizontenButton:"Send to Horizonten",emailSubject:"Results from the Core Wounds Survey",copyButton:"Copy Text",copiedButton:"Copied!",nextSurveyButton:"Proceed to Survey 2: Compensated",woundTooltip_O:"Abandonment: The fear of being left, physically or emotionally.",woundTooltip_A:"Rejection: The feeling of not being good enough, not belonging, or being unwanted.",woundTooltip_F:"Humiliation: The feeling of shame, of being small, wrong, or worthless.",woundTooltip_S:"Betrayal: The fear of being deceived, leading to mistrust.",woundTooltip_R:"Injustice: The feeling that life is unfair and that one is treated wrongly.",woundTooltip_E:"Loneliness: A deep inner feeling of being alone, regardless of company."},ar:{idleTitle:":    ",idleWelcome:"     .           <strong> </strong>.",idleDescription:"    <strong>    (CSDT)</strong>.      (PTSD)   CSDT              .                .             ''         .                 .",idleInstructions:"       .           .         .       <a href='https://www.klattertradet.com/integritet-och-sekretess-policy' target='_blank' rel='noopener noreferrer' class='text-brand-secondary hover:underline font-semibold'> </a>  .",startQuizButton:" ",emailPrompt:"   ",activeTitle:"  ",submitButton:"  ",pleaseAnswerAll:"     .",errorTitle:" ",analysisError:"   .    .",tryAgainButton:"  ",footerText:"   Klttertrdet 2024",loadingAnalysis:"  ...",loadingTakeAMoment:"    .",userEmail:"  ",resultsTitle:"",resultsSubtitle:"       .",summaryTitle:" ",scoresOverviewTitle:"   ",resetQuizButton:" ",score:"",woundName:" ",privacyInfo:" .         .           .        <a href='https://www.klattertradet.com/integritet-och-sekretess-policy' target='_blank' rel='noopener noreferrer' class='text-brand-secondary hover:underline font-semibold'> </a>  .",topWoundsTitle:"  ",primaryWoundTitle:"  ",secondaryWoundTitle:"  ",categoriesTitle:"    ",regulatedTitle:"",regulatedDescription:"          .        .",compensatedTitle:"",compensatedDescription:"                .",overwhelmedTitle:"",overwhelmedDescription:"           .      .",woundDistributionTitle:"  ",detailedBreakdownTitle:" ",totalScoreTitle:"    ",totalScore:" ",regulatedMainTitle:" (0-49 )",regulatedMainDescription:"             .                .                      .                .",compensatedMainTitle:" (50-79 )",compensatedLowDescription:"            .                  .       .",compensatedHighDescription:"           .             .                .",overwhelmedMainTitle:" (80-120 )",overwhelmedMainDescription:"             .             .                .                    .",recommendationTitle:"  ",recommendationLowScore:"        .         .                     .",recommendationHighScore:"          .               .  <a href='https://www.klattertradet.se' target='_blank' rel='noopener noreferrer' class='text-brand-secondary hover:underline font-semibold'>Klttertrdet</a>      CSDT.       .",sendToHorizontenButton:"  Horizonten",emailSubject:"    ",copyButton:" ",copiedButton:" !",nextSurveyButton:"   2: ",woundTooltip_O:":        .",woundTooltip_A:":           .",woundTooltip_F:":            .",woundTooltip_S:":         .",woundTooltip_R:":          .",woundTooltip_E:":         ."},fi:{idleTitle:"Kysely: Ydinhaavat itsetutkiskelua varten",idleWelcome:"Vlkomna matkalle sisnpin. Tm tykalu on suunniteltu auttamaan sinua pohtimaan niin kutsuttuja <strong>ydinhaavojasi</strong>.",idleDescription:"Oikea psykologinen termi on <strong>kumulatiivinen stressi ja kehityksellinen trauma (CSDT)</strong>. Toisin kuin yksittiset, jrkyttvt tapahtumat (PTSD), CSDT syntyy toistuvista ja usein hienovaraisista negatiivisista kokemuksista ajan myt, erityisesti lapsuudessa. Tm voi vaihdella emotionaalisesta laiminlynnist ja jatkuvasta kritiikist arvaamattomaan kotiympristn. Koska nm kokemukset normalisoituvat, niist tulee osa 'normaalia' todellisuuttamme ja ne voivat muokata minkuvaamme, suhteitamme ja tapaamme nhd maailma. Pitkaikaisia vaikutuksia voivat olla alhainen itsetunto, luottamusvaikeudet ja jatkuva riittmttmyyden tunne.",idleInstructions:"Ne tm kysely ensimmisen askeleena itsetutkiskelussasi. Vastaa rehellisesti sen perusteella, mik tuntuu sinulle todelta. Kun olet valmis, vastauksesi analysoidaan antamaan sinulle henkilkohtaista oivallusta. Kaikki tiedot ksitelln <a href='https://www.klattertradet.com/integritet-och-sekretess-policy' target='_blank' rel='noopener noreferrer' class='text-brand-secondary hover:underline font-semibold'>tietosuojakytntmme</a> mukaisesti.",startQuizButton:"Aloita kysely",emailPrompt:"Syt shkpostiosoitteesi jatkaaksesi",activeTitle:"Itsetutkiskelukysely",submitButton:"Lhet ja katso tulokset",pleaseAnswerAll:"Vastaa kaikkiin kysymyksiin jatkaaksesi.",errorTitle:"On tapahtunut virhe",analysisError:"Analyysin aikana tapahtui virhe. Yrit uudelleen.",tryAgainButton:"Yrit uudelleen",footerText:"Tekijnoikeus  Klttertrdet 2024",loadingAnalysis:"Analysoidaan vastauksiasi...",loadingTakeAMoment:"Tm voi kest hetken.",userEmail:"Kyttjn shkposti",resultsTitle:"Tuloksesi",resultsSubtitle:"Tss on analyysi vastauksistasi, joka on suunniteltu tukemaan itsetutkiskeluasi.",summaryTitle:"Yhteenvetoanalyysi",scoresOverviewTitle:"Pisteiden yleiskatsaus",resetQuizButton:"Tee kysely uudelleen",score:"Pisteet",woundName:"Ydinhaava",privacyInfo:"Yksityisyytesi on meille trke. Kaikki vastaustesi analysointi tapahtuu nimettmn ja suoraan selaimessasi. Henkiltietoja tai yksittisi vastauksia ei tallenneta palvelimillemme. Lue koko kuvaus <a href='https://www.klattertradet.com/integritet-och-sekretess-policy' target='_blank' rel='noopener noreferrer' class='text-brand-secondary hover:underline font-semibold'>tietosuojakytntmme</a>.",topWoundsTitle:"Merkittvimmt ydinhaavasi",primaryWoundTitle:"Ensisijainen ydinhaava",secondaryWoundTitle:"Toissijainen ydinhaava",categoriesTitle:"Ymmrr vaikutustasosi haavaa kohti",regulatedTitle:"Snnelty",regulatedDescription:"Osoittaa, ett tll alueella on vhinen vaikutus pivittiseen elmsi. Sinulla on todennkisesti terveit selviytymisstrategioita.",compensatedTitle:"Kompensoitu",compensatedDescription:"Viittaa siihen, ett saatat kohdata haasteita, mutta olet kehittnyt strategioita niiden hallitsemiseksi, mik voi olla energiaa viev.",overwhelmedTitle:"Ylikuormitettu",overwhelmedDescription:"Osoittaa, ett tll alueella on merkittv vaikutus ajatuksiisi, tunteisiisi ja kyttytymiseesi. Tuki voisi olla arvokasta tss.",woundDistributionTitle:"Ydinhaavojen jakauma",detailedBreakdownTitle:"Yksityiskohtainen erittely",totalScoreTitle:"Kokonaisvaikutustasosi",totalScore:"Kokonaispisteet",regulatedMainTitle:"Snnelty (0-49 pistett)",regulatedMainDescription:"Kokonaispisteesi osoittavat vahvaa kyky itsestelyyn ja korkeaa emotionaalista tietoisuutta. Sinulla on todennkisesti vakaa perusta ja olet kehittnyt terveit, tehokkaita strategioita elmn haasteiden ksittelemiseksi. Tm viittaa sietokykyyn, turvalliseen sisiseen ytimeen ja terveeseen yhteyteen tunteisiisi, mik antaa sinun selviyty vaikeuksista tasapainoisella ja rakentavalla tavalla. Vaikka joitain haavoja voi olla, ne eivt vaikuta merkittvsti pivittiseen elmsi.",compensatedMainTitle:"Kompensoitu (50-79 pistett)",compensatedLowDescription:"Kokonaispisteesi viittaavat siihen, ett olet kompensoidussa tilassa, hallitset aktiivisesti taustalla olevia haavoja. Olet kehittnyt toimivia puolustusmekanismeja, mutta ne voivat olla energiaa vievi ja johtaa joskus stressiin tai uupumukseen. On tietoisuutta, mutta mys haavoittuvuutta.",compensatedHighDescription:"Kokonaispisteesi viittaavat siihen, ett olet kompensoidussa tilassa, mutta suuremmalla vaivalla. Tyskentelet kovasti haavojesi hallitsemiseksi, mik voi johtaa jatkuvan varuillaan olon tunteeseen. Saatat kokea stressin ja vsymyksen kausia, ja on olemassa riski, ett strategiasi ylikuormittuvat paineen alla.",overwhelmedMainTitle:"Ylikuormitettu (80-120 pistett)",overwhelmedMainDescription:"Kokonaispisteesi osoittavat, ett ydinhaavoillasi on merkittv ja huomattava vaikutus pivittiseen elmsi. Saatat kokea voimakkaita tunteita, toistuvia negatiivisia ajatusmalleja ja vaikeuksia suhteissa. Tavanomaiset selviytymisstrategiasi voivat tuntua riittmttmilt, ja saatat tuntea itsesi jumiutuneeksi tai ylikuormittuneeksi. Tm on selv signaali siit, ett on aika hakea tukea niden haavojen ksittelemiseksi ja lyt uusia, kestvmpi polkuja eteenpin.",recommendationTitle:"Suositus ja seuraavat vaiheet",recommendationLowScore:"Tuloksesi viittaa hyvn itsetuntemuksen ja sietokyvyn perustaan. Jatka emotionaalisen terveytesi vaalimista itsetutkiskelun kautta. Jos jokin tietty haava silti resonoi kanssasi, voi olla arvokasta tutkia sit tarkemmin yksin tai ystvn kanssa.",recommendationHighScore:"Tuloksesi osoittaa, ett kannat merkittv emotionaalista kipua, joka vaikuttaa hyvinvointiisi. Ammatillisen tuen hakeminen terapeutilta tai psykologilta voi olla ratkaiseva askel kohti paranemista. <a href='https://www.klattertradet.se' target='_blank' rel='noopener noreferrer' class='text-brand-secondary hover:underline font-semibold'>Klttertrdetiss</a> tarjoamme erikoistunutta apua CSDT:n ksittelyyn. Ota meihin yhteytt ensikonsultaatiota varten.",sendToHorizontenButton:"Lhet Horizontenille",emailSubject:"Tulokset ydinhaavakyselyst",copyButton:"Kopioi teksti",copiedButton:"Kopioitu!",nextSurveyButton:"Siirry kyselyyn 2: Kompensoitu",woundTooltip_O:"Hylkminen: Pelko tulla jtetyksi, fyysisesti tai emotionaalisesti.",woundTooltip_A:"Torjunta: Tunne riittmttmyydest, kuulumattomuudesta tai ei-toivotusta.",woundTooltip_F:"Nyryytys: Hpen tunne, pienuuden, vrn tai arvottomuuden tunne.",woundTooltip_S:"Petos: Pelko tulla petetyksi, mik johtaa epluottamukseen.",woundTooltip_R:"Epoikeudenmukaisuus: Tunne siit, ett elm on epoikeudenmukaista ja ett sinua kohdellaan vrin.",woundTooltip_E:"Yksinisyys: Syv sisinen yksinisyyden tunne, riippumatta seurasta."},es:{idleTitle:"Encuesta: Heridas Fundamentales para la Autorreflexin",idleWelcome:"Bienvenido a un viaje hacia el interior. Esta herramienta est diseada para ayudarte a reflexionar sobre tus llamadas <strong>Heridas Fundamentales</strong>.",idleDescription:"El trmino psicolgico correcto es <strong>Trauma Acumulativo por Estrs y Desarrollo (CSDT)</strong>. A diferencia de los eventos nicos e impactantes (TEPT), el CSDT surge de experiencias negativas repetidas y a menudo sutiles a lo largo del tiempo, especialmente durante la infancia. Esto puede variar desde la negligencia emocional y la crtica constante hasta un entorno familiar impredecible. Debido a que estas experiencias se normalizan, se convierten en parte de nuestra realidad 'normal' y pueden moldear nuestra autoimagen, nuestras relaciones y cmo vemos el mundo. Los efectos a largo plazo pueden incluir baja autoestima, dificultad para confiar y un sentimiento persistente de no ser suficiente.",idleInstructions:"Considera esta encuesta como un primer paso en tu autorreflexin. Responde honestamente basndote en lo que sientas ms verdadero para ti. Cuando termines, tus respuestas sern analizadas para darte una visin personal. Toda la informacin se maneja de acuerdo con nuestra <a href='https://www.klattertradet.com/integritet-och-sekretess-policy' target='_blank' rel='noopener noreferrer' class='text-brand-secondary hover:underline font-semibold'>poltica de privacidad</a>.",startQuizButton:"Iniciar Encuesta",emailPrompt:"Introduce tu correo electrnico para continuar",activeTitle:"Encuesta de Autorreflexin",submitButton:"Enviar y Ver Resultados",pleaseAnswerAll:"Por favor, responde a todas las preguntas para continuar.",errorTitle:"Ha ocurrido un error",analysisError:"Ocurri un error durante el anlisis. Por favor, intntalo de nuevo.",tryAgainButton:"Intentar de Nuevo",footerText:"Copyright  Klttertrdet 2024",loadingAnalysis:"Analizando tus respuestas...",loadingTakeAMoment:"Esto puede llevar un momento.",userEmail:"Correo electrnico del usuario",resultsTitle:"Tu Resultado",resultsSubtitle:"Aqu tienes un anlisis de tus respuestas, diseado para apoyar tu autorreflexin.",summaryTitle:"Anlisis Resumido",scoresOverviewTitle:"Resumen de Puntuaciones",resetQuizButton:"Repetir Encuesta",score:"Puntuacin",woundName:"Herida Fundamental",privacyInfo:"Tu privacidad es importante para nosotros. Todo el anlisis de tus respuestas se realiza de forma annima y directamente en tu navegador. No se guardan datos personales ni respuestas individuales en nuestros servidores. Para una descripcin completa, por favor lee nuestra <a href='https://www.klattertradet.com/integritet-och-sekretess-policy' target='_blank' rel='noopener noreferrer' class='text-brand-secondary hover:underline font-semibold'>poltica de privacidad</a>.",topWoundsTitle:"Tus Heridas Fundamentales Ms Prominentes",primaryWoundTitle:"Herida Fundamental Primaria",secondaryWoundTitle:"Herida Fundamental Secundaria",categoriesTitle:"Entiende tu Nivel de Impacto por Herida",regulatedTitle:"Regulado",regulatedDescription:"Indica que esta rea tiene un bajo impacto en tu vida diaria. Probablemente tienes estrategias de afrontamiento saludables.",compensatedTitle:"Compensado",compensatedDescription:"Sugiere que puedes experimentar desafos pero has desarrollado estrategias para manejarlos, lo cual puede consumir energa.",overwhelmedTitle:"Abrumado",overwhelmedDescription:"Indica que esta rea tiene un impacto significativo en tus pensamientos, sentimientos y comportamientos. El apoyo podra ser valioso aqu.",woundDistributionTitle:"Distribucin de Heridas Fundamentales",detailedBreakdownTitle:"Desglose Detallado",totalScoreTitle:"Tu Nivel de Impacto Total",totalScore:"Puntuacin Total",regulatedMainTitle:"Regulado (0-49 puntos)",regulatedMainDescription:"Tu puntuacin total indica una fuerte capacidad de autorregulacin y un alto grado de conciencia emocional. Probablemente tienes una base estable y has desarrollado estrategias saludables y efectivas para manejar los desafos de la vida. Esto sugiere resiliencia, un ncleo interno seguro y una conexin saludable con tus emociones, lo que te permite navegar las dificultades de una manera equilibrada y constructiva. Aunque algunas heridas pueden estar presentes, no afectan significativamente tu vida diaria.",compensatedMainTitle:"Compensado (50-79 puntos)",compensatedLowDescription:"Tu puntuacin total sugiere que te encuentras en un estado compensado, manejando activamente las heridas subyacentes. Has desarrollado mecanismos de defensa funcionales, pero estos pueden consumir energa y a veces llevar al estrs o al agotamiento. Hay conciencia, pero tambin vulnerabilidad.",compensatedHighDescription:"Tu puntuacin total sugiere que te encuentras en un estado compensado, pero con un mayor esfuerzo. Trabajas duro para manejar tus heridas, lo que puede llevar a una sensacin de estar constantemente en guardia. Puedes experimentar perodos de estrs y fatiga, y existe el riesgo de que tus estrategias se sobrecarguen bajo presin.",overwhelmedMainTitle:"Abrumado (80-120 puntos)",overwhelmedMainDescription:"Tu puntuacin total indica que tus heridas fundamentales tienen un impacto significativo y notable en tu vida diaria. Puedes experimentar emociones intensas, patrones de pensamiento negativos recurrentes y dificultades en las relaciones. Tus estrategias de afrontamiento habituales pueden parecer inadecuadas y podras sentirte atascado o abrumado. Esta es una seal clara de que es hora de buscar apoyo para procesar estas heridas y encontrar nuevos caminos ms sostenibles hacia adelante.",recommendationTitle:"Recomendacin y Prximos Pasos",recommendationLowScore:"Tu resultado sugiere una buena base de autoconciencia y resiliencia. Contina cultivando tu salud emocional a travs de la autorreflexin. Si una herida especfica todava resuena contigo, puede ser valioso explorarla ms a fondo por tu cuenta o con un amigo.",recommendationHighScore:"Tu resultado indica que llevas un dolor emocional significativo que afecta tu bienestar. Buscar apoyo profesional de un terapeuta o psiclogo puede ser un paso crucial hacia la curacin. En <a href='https://www.klattertradet.se' target='_blank' rel='noopener noreferrer' class='text-brand-secondary hover:underline font-semibold'>Klttertrdet</a>, ofrecemos ayuda especializada para procesar CSDT. Por favor, contctanos para una consulta inicial.",sendToHorizontenButton:"Enviar a Horizonten",emailSubject:"Resultados de la Encuesta de Heridas Fundamentales",copyButton:"Copiar Texto",copiedButton:"Copiado!",nextSurveyButton:"Ir a la Encuesta 2: Compensado",woundTooltip_O:"Abandono: El miedo a ser dejado, fsica o emocionalmente.",woundTooltip_A:"Rechazo: El sentimiento de no ser suficiente, de no pertenecer o de no ser deseado.",woundTooltip_F:"Humillacin: El sentimiento de vergenza, de ser pequeo, incorrecto o sin valor.",woundTooltip_S:"Traicin: El miedo a ser engaado, lo que lleva a la desconfianza.",woundTooltip_R:"Injusticia: El sentimiento de que la vida es injusta y que uno es tratado incorrectamente.",woundTooltip_E:"Soledad: Un profundo sentimiento interno de estar solo, independientemente de la compaa."},de:{idleTitle:"Umfrage: Kernwunden zur Selbstreflexion",idleWelcome:"Willkommen auf einer Reise nach innen. Dieses Tool soll Ihnen helfen, ber Ihre sogenannten <strong>Kernwunden</strong> nachzudenken.",idleDescription:"Der korrekte psychologische Begriff ist <strong>Kumulatives Stress- und Entwicklungstrauma (CSDT)</strong>. Im Gegensatz zu einzelnen, schockierenden Ereignissen (PTBS) entsteht CSDT aus wiederholten und oft subtilen negativen Erfahrungen ber die Zeit, insbesondere in der Kindheit. Dies kann von emotionaler Vernachlssigung und stndiger Kritik bis hin zu einer unvorhersehbaren huslichen Umgebung reichen. Da diese Erfahrungen normalisiert werden, werden sie Teil unserer 'normalen' Realitt und knnen unser Selbstbild, unsere Beziehungen und unsere Sicht auf die Welt prgen. Langfristige Auswirkungen knnen geringes Selbstwertgefhl, Schwierigkeiten mit Vertrauen und ein anhaltendes Gefhl, nicht gut genug zu sein, umfassen.",idleInstructions:"Betrachten Sie diese Umfrage als einen ersten Schritt in Ihrer Selbstreflexion. Antworten Sie ehrlich, basierend auf dem, was sich fr Sie am wahrsten anfhlt. Wenn Sie fertig sind, werden Ihre Antworten analysiert, um Ihnen persnliche Einblicke zu geben. Alle Informationen werden gem unserer <a href='https://www.klattertradet.com/integritet-och-sekretess-policy' target='_blank' rel='noopener noreferrer' class='text-brand-secondary hover:underline font-semibold'>Datenschutzrichtlinie</a> behandelt.",startQuizButton:"Umfrage starten",emailPrompt:"Geben Sie Ihre E-Mail-Adresse ein, um fortzufahren",activeTitle:"Selbstreflexions-Umfrage",submitButton:"Senden und Ergebnisse sehen",pleaseAnswerAll:"Bitte beantworten Sie alle Fragen, um fortzufahren.",errorTitle:"Ein Fehler ist aufgetreten",analysisError:"Bei der Analyse ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut.",tryAgainButton:"Erneut versuchen",footerText:"Copyright  Klttertrdet 2024",loadingAnalysis:"Analysiere deine Antworten...",loadingTakeAMoment:"Dies kann einen Moment dauern.",userEmail:"E-Mail des Benutzers",resultsTitle:"Ihr Ergebnis",resultsSubtitle:"Hier ist eine Analyse Ihrer Antworten, die Ihre Selbstreflexion untersttzen soll.",summaryTitle:"Zusammenfassende Analyse",scoresOverviewTitle:"Punktebersicht",resetQuizButton:"Umfrage wiederholen",score:"Punkte",woundName:"Kernwunde",privacyInfo:"Ihre Privatsphre ist uns wichtig. Die gesamte Analyse Ihrer Antworten erfolgt anonym und direkt in Ihrem Browser. Es werden keine persnlichen Daten oder einzelnen Antworten auf unseren Servern gespeichert. Fr eine vollstndige Beschreibung lesen Sie bitte unsere <a href='https://www.klattertradet.com/integritet-och-sekretess-policy' target='_blank' rel='noopener noreferrer' class='text-brand-secondary hover:underline font-semibold'>Datenschutzrichtlinie</a>.",topWoundsTitle:"Ihre prominentesten Kernwunden",primaryWoundTitle:"Primre Kernwunde",secondaryWoundTitle:"Sekundre Kernwunde",categoriesTitle:"Verstehen Sie Ihr Auswirkungsniveau pro Wunde",regulatedTitle:"Reguliert",regulatedDescription:"Zeigt an, dass dieser Bereich einen geringen Einfluss auf Ihr tgliches Leben hat. Sie haben wahrscheinlich gesunde Bewltigungsstrategien.",compensatedTitle:"Kompensiert",compensatedDescription:"Deutet darauf hin, dass Sie mglicherweise Herausforderungen erleben, aber Strategien entwickelt haben, um damit umzugehen, was energieaufwndig sein kann.",overwhelmedTitle:"berwltigt",overwhelmedDescription:"Zeigt an, dass dieser Bereich einen erheblichen Einfluss auf Ihre Gedanken, Gefhle und Verhaltensweisen hat. Untersttzung knnte hier wertvoll sein.",woundDistributionTitle:"Verteilung der Kernwunden",detailedBreakdownTitle:"Detaillierte Aufschlsselung",totalScoreTitle:"Ihr Gesamtauswirkungsniveau",totalScore:"Gesamtpunktzahl",regulatedMainTitle:"Reguliert (0-49 Punkte)",regulatedMainDescription:"Ihre Gesamtpunktzahl deutet auf eine starke Fhigkeit zur Selbstregulation und ein hohes Ma an emotionalem Bewusstsein hin. Sie haben wahrscheinlich eine stabile Grundlage und haben gesunde, effektiva Strategien entwickelt, um mit den Herausforderungen des Lebens umzugehen. Dies deutet auf Resilienz, einen sicheren inneren Kern und eine gesunde Verbindung zu Ihren Emotionen hin, die es Ihnen ermglichen, Schwierigkeiten auf eine ausgewogene und konstruktive Weise zu bewltigen. Obwohl einige Wunden vorhanden sein knnen, beeintrchtigen sie Ihr tgliches Leben nicht wesentlich.",compensatedMainTitle:"Kompensiert (50-79 Punkte)",compensatedLowDescription:"Ihre Gesamtpunktzahl deutet darauf hin, dass Sie sich in einem kompensierten Zustand befinden und zugrunde liegende Wunden aktiv bewltigen. Sie haben funktionale Abwehrmechanismen entwickelt, aber diese knnen energieaufwndig sein und manchmal zu Stress oder Erschpfung fhren. Es gibt ein Bewusstsein, aber auch eine Verletzlichkeit.",compensatedHighDescription:"Ihre Gesamtpunktzahl deutet darauf hin, dass Sie sich in einem kompensierten Zustand befinden, jedoch mit grerem Aufwand. Sie arbeiten hart daran, Ihre Wunden zu bewltigen, was zu dem Gefhl fhren kann, stndig auf der Hut zu sein. Sie knnen Perioden von Stress und Mdigkeit erleben, und es besteht das Risiko, dass Ihre Strategien unter Druck berlastet werden.",overwhelmedMainTitle:"berwltigt (80-120 Punkte)",overwhelmedMainDescription:"Ihre Gesamtpunktzahl deutet darauf hin, dass Ihre Kernwunden einen erheblichen und sprbaren Einfluss auf Ihr tgliches Leben haben. Sie knnen intensive Emotionen, wiederkehrende negative Denkmuster und Schwierigkeiten in Beziehungen erleben. Ihre blichen Bewltigungsstrategien fhlen sich mglicherweise unzureichend an, und Sie knnten sich festgefahren oder berwltigt fhlen. Dies ist ein klares Signal, dass es an der Zeit ist, Untersttzung zu suchen, um diese Wunden zu verarbeiten und neue, nachhaltigere Wege nach vorne zu finden.",recommendationTitle:"Empfehlung & Nchste Schritte",recommendationLowScore:"Ihr Ergebnis deutet auf eine gute Grundlage von Selbstbewusstsein und Resilienz hin. Pflegen Sie weiterhin Ihre emotionale Gesundheit durch Selbstreflexion. Wenn eine bestimmte Wunde immer noch bei Ihnen Anklang findet, kann es wertvoll sein, sie alleine oder mit einem Freund weiter zu erforschen.",recommendationHighScore:"Ihr Ergebnis deutet darauf hin, dass Sie erheblichen emotionalen Schmerz tragen, der Ihr Wohlbefinden beeintrchtigt. Professionelle Untersttzung von einem Therapeuten oder Psychologen zu suchen, kann ein entscheidender Schritt zur Heilung sein. Bei <a href='https://www.klattertradet.se' target='_blank' rel='noopener noreferrer' class='text-brand-secondary hover:underline font-semibold'>Klttertrdet</a> bietet wir spezialisierte Hilfe bei der Verarbeitung von CSDT an. Bitte kontaktieren Sie uns fr ein Erstgesprch.",sendToHorizontenButton:"An Horizonten senden",emailSubject:"Ergebnisse der Kernwunden-Umfrage",copyButton:"Text kopieren",copiedButton:"Kopiert!",nextSurveyButton:"Weiter zur Umfrage 2: Kompensiert",woundTooltip_O:"Verlassenheit: Die Angst, krperlich oder emotional verlassen zu werden.",woundTooltip_A:"Ablehnung: Das Gefhl, nicht gut genug zu sein, nicht dazuzugehren oder unerwnscht zu sein.",woundTooltip_F:"Demtigung: Das Gefhl der Scham, klein, falsch oder wertlos zu sein.",woundTooltip_S:"Verrat: Die Angst, betrogen zu werden, was zu Misstrauen fhrt.",woundTooltip_R:"Ungerechtigkeit: Das Gefhl, dass das Leben unfair ist und man falsch behandelt wird.",woundTooltip_E:"Einsamkeit: Ein tiefes inneres Gefhl des Alleinseins, unabhngig von Gesellschaft."}},nA=()=>{const{language:t}=L9();return cve[t]},a6={default:{name:"default",displayName:"Ocean",colors:{"brand-primary":"30 58 138","brand-secondary":"59 130 246","brand-accent":"147 197 253","brand-light":"239 246 255","brand-text":"17 24 39","brand-dark-bg":"17 24 39","brand-dark-text":"243 244 246","brand-dark-surface":"31 41 55"}},sunset:{name:"sunset",displayName:"Sunset",colors:{"brand-primary":"194 65 12","brand-secondary":"249 115 22","brand-accent":"253 186 116","brand-light":"255 247 237","brand-text":"28 25 23","brand-dark-bg":"28 25 23","brand-dark-text":"255 237 213","brand-dark-surface":"68 64 60"}}},U9=J.createContext(void 0),uve=()=>{try{const t=window.localStorage.getItem("app-color-mode");if(t==="light"||t==="dark")return t}catch(t){console.warn("Could not read color mode from localStorage",t)}return"dark"},dve=({children:t})=>{const[e,n]=J.useState(()=>{try{const o=window.localStorage.getItem("app-theme");return o&&a6[o]?o:"default"}catch(o){return console.warn("Could not read theme from localStorage",o),"default"}}),[r,i]=J.useState(uve);J.useEffect(()=>{const o=a6[e];if(o){const c=document.documentElement;Object.entries(o.colors).forEach(([u,h])=>{c.style.setProperty(`--color-${u}`,h)});try{window.localStorage.setItem("app-theme",e)}catch(u){console.error("Failed to save theme to localStorage",u)}}},[e]),J.useEffect(()=>{const o=document.documentElement;r==="dark"?o.classList.add("dark"):o.classList.remove("dark");try{window.localStorage.setItem("app-color-mode",r)}catch(c){console.error("Failed to save color mode to localStorage",c)}},[r]);const a=J.useCallback(()=>{i(o=>o==="light"?"dark":"light")},[]),s=J.useMemo(()=>({themeName:e,setThemeName:n,colorMode:r,toggleColorMode:a}),[e,r,a]);return d.jsx(U9.Provider,{value:s,children:t})},fve=()=>{const t=J.useContext(U9);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},hve=({active:t,payload:e})=>{const n=nA();if(t&&e&&e.length){const r=e[0].payload;return d.jsxs("div",{className:"bg-white/80 dark:bg-brand-dark-surface/80 backdrop-blur-sm p-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-xl text-brand-text dark:text-brand-dark-text",children:[d.jsx("p",{className:"font-bold",children:`${r.name}`}),d.jsx("p",{className:"text-brand-primary dark:text-brand-accent",children:`${n.score}: ${r.score}`})]})}return null},pve=({result:t,onReset:e,userEmail:n})=>{const r=nA(),{colorMode:i}=fve(),[a,s]=J.useState(0),o=J.useMemo(()=>({regulated:{title:r.regulatedTitle,description:r.regulatedDescription,color:"border-green-500",textColor:"text-green-600 dark:text-green-400",badgeClasses:"bg-green-100 text-green-700 dark:bg-green-500/20 dark:text-green-300"},compensated:{title:r.compensatedTitle,description:r.compensatedDescription,color:"border-yellow-500",textColor:"text-yellow-600 dark:text-yellow-400",badgeClasses:"bg-yellow-100 text-yellow-700 dark:bg-yellow-500/20 dark:text-yellow-300"},overwhelmed:{title:r.overwhelmedTitle,description:r.overwhelmedDescription,color:"border-red-500",textColor:"text-red-600 dark:text-red-400",badgeClasses:"bg-red-100 text-red-700 dark:bg-red-500/20 dark:text-red-300"}}),[r]),c=L=>L<=7?"regulated":L<=14?"compensated":"overwhelmed",u=J.useMemo(()=>[...t.allScores].map(L=>({...L,categoryKey:c(L.score)})).sort((L,z)=>z.score-L.score),[t.allScores]),h=t.primaryWound,m=u.find(L=>L.code!==h.code),v=J.useMemo(()=>Math.round(t.allScores.reduce((L,z)=>L+z.score,0)),[t.allScores]),x=J.useMemo(()=>v<=49?{title:r.regulatedMainTitle,description:r.regulatedMainDescription,color:"green"}:v<=79?{title:r.compensatedMainTitle,description:v<=64?r.compensatedLowDescription:r.compensatedHighDescription,color:"yellow"}:{title:r.overwhelmedMainTitle,description:r.overwhelmedMainDescription,color:"red"},[v,r]),T={green:{border:"border-green-500",text:"text-green-600 dark:text-green-400",bg:"bg-green-500"},yellow:{border:"border-yellow-500",text:"text-yellow-600 dark:text-yellow-400",bg:"bg-yellow-500"},red:{border:"border-red-500",text:"text-red-600 dark:text-red-400",bg:"bg-red-500"}}[x.color],w=i==="dark"?"#f3f4f6":"#111827",E=i==="dark"?"rgba(255, 255, 255, 0.1)":"rgba(55, 65, 81, 0.1)",N=`rgb(${getComputedStyle(document.documentElement).getPropertyValue("--color-brand-primary").trim()})`,C=`rgb(${getComputedStyle(document.documentElement).getPropertyValue("--color-brand-secondary").trim()})`,P=`rgb(${getComputedStyle(document.documentElement).getPropertyValue("--color-brand-accent").trim()})`,I=[N,C,"#10B981",P,"#F59E0B","#EF4444"],j=L=>{const{cx:z,cy:V,innerRadius:G,outerRadius:$,startAngle:ee,endAngle:te,fill:K,payload:X}=L;return d.jsxs("g",{style:{filter:`drop-shadow(0px 4px 12px ${K}99)`},children:[d.jsx(_j,{cx:z,cy:V,innerRadius:G,outerRadius:$+10,startAngle:ee,endAngle:te,fill:K,cornerRadius:5}),d.jsx("text",{x:z,y:V-10,textAnchor:"middle",fill:w,className:"text-base font-semibold",children:X.name}),d.jsx("text",{x:z,y:V+15,textAnchor:"middle",fill:w,className:"text-2xl font-bold",children:`${X.score}/20`})]})},O=(L=!1)=>{let z=`**${r.userEmail}: ${n}**

`;return z+=`${r.resultsTitle}

`,L&&(z+=`**${r.totalScore.toUpperCase()}**
`,z+=`${v}/120 - ${x.title}

`),z+=`**${r.summaryTitle}**
${t.summary}

`,z+=`**${r.primaryWoundTitle}: ${h.name} (${h.score}/20)**
${h.description}

`,m&&(z+=`**${r.secondaryWoundTitle}: ${m.name} (${m.score}/20)**
${m.description}

`),z+=`
**${r.scoresOverviewTitle}**
`,u.forEach(V=>{z+=`- ${V.name}: ${V.score}/20 (${o[V.categoryKey].title})
`}),z},F=()=>{const L=encodeURIComponent(r.emailSubject),z=O(!0),V=encodeURIComponent(z);window.location.href=`mailto:billy@klattertradet.se?subject=${L}&body=${V}`};return d.jsxs("div",{className:"w-full max-w-6xl mx-auto bg-white/30 dark:bg-brand-dark-surface/30 backdrop-blur-2xl rounded-3xl shadow-2xl p-6 md:p-8 border border-white/50 dark:border-white/20",children:[d.jsx("h1",{className:"text-3xl lg:text-4xl font-extrabold text-center text-brand-text dark:text-brand-dark-text mb-4 opacity-0",style:{animation:"slideInUp 0.5s ease-out 0.1s forwards"},children:r.resultsTitle}),d.jsx("p",{className:"text-center text-gray-600 dark:text-gray-300 mb-8 opacity-0",style:{animation:"slideInUp 0.5s ease-out 0.2s forwards"},children:r.resultsSubtitle}),d.jsxs("div",{className:"bg-white/30 dark:bg-brand-dark-surface/30 backdrop-blur-2xl p-6 rounded-3xl shadow-2xl border border-white/50 dark:border-white/20 mb-8 opacity-0",style:{animation:"slideInUp 0.5s ease-out 0.3s forwards"},children:[d.jsx("h2",{className:"text-2xl font-bold text-brand-text dark:text-brand-dark-text mb-4",children:r.topWoundsTitle}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-brand-primary dark:text-brand-accent mb-2",children:r.primaryWoundTitle}),d.jsxs("div",{className:"bg-white/50 dark:bg-brand-dark-surface/50 p-4 rounded-lg border border-brand-accent/40 transition-all duration-300 ease-in-out hover:scale-[1.03] hover:shadow-xl h-full",children:[d.jsx("h4",{className:"text-xl font-bold text-brand-secondary",children:h.name}),d.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-sm mt-2 leading-relaxed",children:h.description})]})]}),m&&d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-brand-secondary dark:text-blue-400 mb-2",children:r.secondaryWoundTitle}),d.jsxs("div",{className:"bg-white/50 dark:bg-brand-dark-surface/50 p-4 rounded-lg border border-brand-accent/40 transition-all duration-300 ease-in-out hover:scale-[1.03] hover:shadow-xl h-full",children:[d.jsx("h4",{className:"text-xl font-bold text-brand-secondary",children:m.name}),d.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-sm mt-2 leading-relaxed",children:m.description})]})]})]})]}),d.jsxs("div",{className:"bg-white/30 dark:bg-brand-dark-surface/30 backdrop-blur-2xl p-6 rounded-3xl shadow-2xl border border-white/50 dark:border-white/20 mb-8 opacity-0",style:{animation:"slideInUp 0.5s ease-out 0.4s forwards"},children:[d.jsx("h2",{className:"text-2xl font-bold text-brand-text dark:text-brand-dark-text mb-4",children:r.totalScoreTitle}),d.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[d.jsxs("div",{className:"flex-shrink-0 text-center",children:[d.jsx("p",{className:`text-5xl font-bold ${T.text}`,children:v}),d.jsx("p",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300",children:"/ 120"})]}),d.jsxs("div",{className:"w-full",children:[d.jsx("h3",{className:`text-xl font-bold ${T.text}`,children:x.title}),d.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 my-2",children:d.jsx("div",{className:`${T.bg} h-2.5 rounded-full`,style:{width:`${v/120*100}%`}})}),d.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-sm mt-2 leading-relaxed",children:x.description})]})]})]}),d.jsxs("div",{className:"bg-white/30 dark:bg-brand-dark-surface/30 backdrop-blur-2xl p-6 rounded-3xl shadow-2xl border border-white/50 dark:border-white/20 mb-8 opacity-0",style:{animation:"slideInUp 0.5s ease-out 0.5s forwards"},children:[d.jsx("h2",{className:"text-2xl font-bold text-brand-text dark:text-brand-dark-text mb-3",children:r.summaryTitle}),d.jsx("p",{className:"text-gray-700 dark:text-gray-200 leading-relaxed whitespace-pre-wrap",children:t.summary})]}),d.jsxs("div",{className:"grid lg:grid-cols-5 gap-8 mb-8",children:[d.jsxs("div",{role:"region","aria-label":r.woundDistributionTitle,className:"lg:col-span-3 bg-white/30 dark:bg-brand-dark-surface/30 backdrop-blur-2xl p-6 rounded-3xl shadow-2xl border border-white/50 dark:border-white/20 opacity-0 transition-all duration-300 ease-in-out hover:shadow-2xl hover:-translate-y-1",style:{animation:"slideInUp 0.5s ease-out 0.6s forwards"},children:[d.jsx("h2",{className:"text-2xl font-bold text-brand-text dark:text-brand-dark-text mb-4",children:r.woundDistributionTitle}),d.jsx("div",{style:{width:"100%",height:400},children:d.jsx(q5,{children:d.jsxs(ive,{children:[d.jsx(nd,{activeIndex:a,activeShape:j,data:u,cx:"50%",cy:"50%",labelLine:!1,outerRadius:140,innerRadius:70,dataKey:"score",nameKey:"name",onMouseEnter:(L,z)=>s(z),isAnimationActive:!0,animationDuration:1200,animationEasing:"ease-in-out",animationBegin:200,children:u.map((L,z)=>d.jsx(Cx,{fill:I[z%I.length],style:{filter:`saturate(${a===z?1:.6}) opacity(${a===z?1:.7})`,transition:"filter 0.4s ease-in-out"}},`cell-${z}`))}),d.jsx(tp,{iconSize:10,layout:"vertical",verticalAlign:"middle",align:"right",wrapperStyle:{color:w,right:"-20px"}})]})})})]}),d.jsxs("div",{role:"region","aria-label":r.detailedBreakdownTitle,className:"lg:col-span-2 bg-white/30 dark:bg-brand-dark-surface/30 backdrop-blur-2xl p-6 rounded-3xl shadow-2xl border border-white/50 dark:border-white/20 opacity-0 transition-all duration-300 ease-in-out hover:shadow-2xl hover:-translate-y-1",style:{animation:"slideInUp 0.5s ease-out 0.7s forwards"},children:[d.jsx("h2",{className:"text-2xl font-bold text-brand-text dark:text-brand-dark-text mb-4",children:r.detailedBreakdownTitle}),d.jsx("div",{style:{width:"100%",height:400},children:d.jsx(q5,{children:d.jsxs(rve,{data:u,layout:"vertical",margin:{top:5,right:30,left:10,bottom:5},children:[d.jsx(_9,{stroke:E,strokeDasharray:"3 3",horizontal:!1}),d.jsx(QE,{type:"number",domain:[0,20],tick:{fill:w,fontSize:12}}),d.jsx(eA,{type:"category",dataKey:"name",width:100,tick:{fill:w,fontSize:12},style:{textAnchor:"end"}}),d.jsx(kc,{content:d.jsx(hve,{}),cursor:{fill:"rgba(255,255,255,0.1)"}}),d.jsxs(Ep,{dataKey:"score",radius:[0,10,10,0],isAnimationActive:!0,animationDuration:1500,animationEasing:"ease-out",children:[d.jsx(Hu,{dataKey:"score",position:"right",fill:w,fontWeight:"bold"}),u.map((L,z)=>d.jsx(Cx,{fill:I[z%I.length]},`cell-${z}`))]})]})})})]})]}),d.jsxs("div",{className:"bg-white/30 dark:bg-brand-dark-surface/30 backdrop-blur-2xl p-6 rounded-3xl shadow-2xl border border-white/50 dark:border-white/20 mb-8 opacity-0",style:{animation:"slideInUp 0.5s ease-out 0.8s forwards"},children:[d.jsx("h2",{className:"text-2xl font-bold text-brand-text dark:text-brand-dark-text mb-4",children:r.categoriesTitle}),d.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.values(o).map((L,z)=>d.jsxs("div",{className:`p-4 rounded-lg border-l-4 ${L.color} bg-white/40 dark:bg-brand-dark-surface/40`,children:[d.jsx("h3",{className:`font-bold ${L.textColor}`,children:L.title}),d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:L.description})]},z))})]}),d.jsxs("div",{className:"bg-white/30 dark:bg-brand-dark-surface/30 backdrop-blur-2xl p-6 rounded-3xl shadow-2xl border border-white/50 dark:border-white/20 mb-8 opacity-0",style:{animation:"slideInUp 0.5s ease-out 0.9s forwards"},children:[d.jsx("h2",{className:"text-2xl font-bold text-brand-text dark:text-brand-dark-text mb-4",children:r.recommendationTitle}),d.jsx("p",{className:"text-gray-700 dark:text-gray-200 leading-relaxed",dangerouslySetInnerHTML:{__html:v>60?r.recommendationHighScore:r.recommendationLowScore}})]}),d.jsx("div",{className:"bg-white/30 dark:bg-brand-dark-surface/30 backdrop-blur-2xl p-6 rounded-3xl shadow-2xl border border-white/50 dark:border-white/20 mb-8 opacity-0",style:{animation:"slideInUp 0.5s ease-out 1.0s forwards"},children:d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 leading-relaxed text-center",dangerouslySetInnerHTML:{__html:r.privacyInfo}})}),d.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4 opacity-0",style:{animation:"slideInUp 0.5s ease-out 1.1s forwards"},children:[d.jsxs("button",{onClick:e,className:"flex items-center justify-center bg-brand-primary hover:bg-brand-secondary text-white font-bold py-2 px-6 rounded-full transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 active:scale-95",children:[d.jsx(ave,{className:"w-5 h-5 mr-2"}),r.resetQuizButton]}),d.jsxs("button",{onClick:F,className:"flex items-center justify-center bg-brand-primary hover:bg-brand-secondary text-white font-bold py-2 px-6 rounded-full transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 active:scale-95",children:[d.jsx(sve,{className:"w-5 h-5 mr-2"}),r.sendToHorizontenButton]})]})]})},mve=()=>{const t=nA();return d.jsxs("div",{className:"flex flex-col items-center justify-center p-10",children:[d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx("div",{className:"w-4 h-4 bg-brand-primary rounded-full animate-pulse-dot"}),d.jsx("div",{className:"w-4 h-4 bg-brand-primary rounded-full animate-pulse-dot",style:{animationDelay:"0.2s"}}),d.jsx("div",{className:"w-4 h-4 bg-brand-primary rounded-full animate-pulse-dot",style:{animationDelay:"0.4s"}})]}),d.jsx("p",{className:"text-brand-primary dark:text-brand-accent font-semibold mt-6 text-lg",children:t.loadingAnalysis}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2 text-sm",children:t.loadingTakeAMoment})]})};var gve={};let vve,yve;function xve(){return{geminiUrl:vve,vertexUrl:yve}}function bve(t,e,n,r){var i,a;if(!t?.baseUrl){const s=xve();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(a=s.geminiUrl)!==null&&a!==void 0?a:r}return t.baseUrl}class rd{}function At(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const a=e[i];return a!=null?String(a):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function k(t,e,n){for(let a=0;a<e.length-1;a++){const s=e[a];if(s.endsWith("[]")){const o=s.slice(0,-2);if(!(o in t))if(Array.isArray(n))t[o]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[o])){const c=t[o];if(Array.isArray(n))for(let u=0;u<c.length;u++){const h=c[u];k(h,e.slice(a+1),n[u])}else for(const u of c)k(u,e.slice(a+1),n)}return}else if(s.endsWith("[0]")){const o=s.slice(0,-3);o in t||(t[o]=[{}]);const c=t[o];k(c[0],e.slice(a+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function A(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const a=i.slice(0,-2);if(a in t){const s=t[a];return Array.isArray(s)?s.map(o=>A(o,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function _ve(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),a=r.split("."),s=new Set;let o=-1;for(let c=0;c<i.length;c++)if(i[c]==="*"){o=c;break}if(o!==-1&&a.length>o)for(let c=o;c<a.length;c++){const u=a[c];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&s.add(u)}O3(t,i,a,0,s)}}function O3(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const a=e[r];if(a.endsWith("[]")){const s=a.slice(0,-2),o=t;if(s in o&&Array.isArray(o[s]))for(const c of o[s])O3(c,e,n,r+1,i)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,o=Object.keys(s).filter(u=>!u.startsWith("_")&&!i.has(u)),c={};for(const u of o)c[u]=s[u];for(const[u,h]of Object.entries(c)){const m=[];for(const v of n.slice(r))v==="*"?m.push(u):m.push(v);k(s,m,h)}for(const u of o)delete s[u]}}else{const s=t;a in s&&O3(s[a],e,n,r+1,i)}}function Pj(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function wve(t){const e={},n=A(t,["operationName"]);n!=null&&k(e,["operationName"],n);const r=A(t,["resourceName"]);return r!=null&&k(e,["_url","resourceName"],r),e}function Sve(t){const e={},n=A(t,["name"]);n!=null&&k(e,["name"],n);const r=A(t,["metadata"]);r!=null&&k(e,["metadata"],r);const i=A(t,["done"]);i!=null&&k(e,["done"],i);const a=A(t,["error"]);a!=null&&k(e,["error"],a);const s=A(t,["response","generateVideoResponse"]);return s!=null&&k(e,["response"],Eve(s)),e}function Tve(t){const e={},n=A(t,["name"]);n!=null&&k(e,["name"],n);const r=A(t,["metadata"]);r!=null&&k(e,["metadata"],r);const i=A(t,["done"]);i!=null&&k(e,["done"],i);const a=A(t,["error"]);a!=null&&k(e,["error"],a);const s=A(t,["response"]);return s!=null&&k(e,["response"],Ave(s)),e}function Eve(t){const e={},n=A(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>kve(s))),k(e,["generatedVideos"],a)}const r=A(t,["raiMediaFilteredCount"]);r!=null&&k(e,["raiMediaFilteredCount"],r);const i=A(t,["raiMediaFilteredReasons"]);return i!=null&&k(e,["raiMediaFilteredReasons"],i),e}function Ave(t){const e={},n=A(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>Mve(s))),k(e,["generatedVideos"],a)}const r=A(t,["raiMediaFilteredCount"]);r!=null&&k(e,["raiMediaFilteredCount"],r);const i=A(t,["raiMediaFilteredReasons"]);return i!=null&&k(e,["raiMediaFilteredReasons"],i),e}function kve(t){const e={},n=A(t,["video"]);return n!=null&&k(e,["video"],Ove(n)),e}function Mve(t){const e={},n=A(t,["_self"]);return n!=null&&k(e,["video"],jve(n)),e}function Nve(t){const e={},n=A(t,["operationName"]);return n!=null&&k(e,["_url","operationName"],n),e}function Cve(t){const e={},n=A(t,["operationName"]);return n!=null&&k(e,["_url","operationName"],n),e}function Rve(t){const e={},n=A(t,["name"]);n!=null&&k(e,["name"],n);const r=A(t,["metadata"]);r!=null&&k(e,["metadata"],r);const i=A(t,["done"]);i!=null&&k(e,["done"],i);const a=A(t,["error"]);a!=null&&k(e,["error"],a);const s=A(t,["response"]);return s!=null&&k(e,["response"],Ive(s)),e}function Ive(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["parent"]);r!=null&&k(e,["parent"],r);const i=A(t,["documentName"]);return i!=null&&k(e,["documentName"],i),e}function z9(t){const e={},n=A(t,["name"]);n!=null&&k(e,["name"],n);const r=A(t,["metadata"]);r!=null&&k(e,["metadata"],r);const i=A(t,["done"]);i!=null&&k(e,["done"],i);const a=A(t,["error"]);a!=null&&k(e,["error"],a);const s=A(t,["response"]);return s!=null&&k(e,["response"],Pve(s)),e}function Pve(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["parent"]);r!=null&&k(e,["parent"],r);const i=A(t,["documentName"]);return i!=null&&k(e,["documentName"],i),e}function Ove(t){const e={},n=A(t,["uri"]);n!=null&&k(e,["uri"],n);const r=A(t,["encodedVideo"]);r!=null&&k(e,["videoBytes"],Pj(r));const i=A(t,["encoding"]);return i!=null&&k(e,["mimeType"],i),e}function jve(t){const e={},n=A(t,["gcsUri"]);n!=null&&k(e,["uri"],n);const r=A(t,["bytesBase64Encoded"]);r!=null&&k(e,["videoBytes"],Pj(r));const i=A(t,["mimeType"]);return i!=null&&k(e,["mimeType"],i),e}var s6;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(s6||(s6={}));var o6;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(o6||(o6={}));var l6;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(l6||(l6={}));var xr;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(xr||(xr={}));var c6;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(c6||(c6={}));var u6;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(u6||(u6={}));var d6;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(d6||(d6={}));var f6;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(f6||(f6={}));var h6;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(h6||(h6={}));var p6;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(p6||(p6={}));var m6;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(m6||(m6={}));var g6;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(g6||(g6={}));var v6;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(v6||(v6={}));var y6;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(y6||(y6={}));var x6;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(x6||(x6={}));var b6;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(b6||(b6={}));var _6;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(_6||(_6={}));var w6;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(w6||(w6={}));var S6;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(S6||(S6={}));var T6;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(T6||(T6={}));var E6;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(E6||(E6={}));var sT;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(sT||(sT={}));var A6;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(A6||(A6={}));var k6;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(k6||(k6={}));var M6;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(M6||(M6={}));var j3;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(j3||(j3={}));var N6;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(N6||(N6={}));var C6;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(C6||(C6={}));var D3;(function(t){t.COLLECTION="COLLECTION"})(D3||(D3={}));var R6;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(R6||(R6={}));var I6;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(I6||(I6={}));var P6;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(P6||(P6={}));var O6;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(O6||(O6={}));var j6;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(j6||(j6={}));var D6;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(D6||(D6={}));var L6;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(L6||(L6={}));var U6;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(U6||(U6={}));var z6;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(z6||(z6={}));var B6;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(B6||(B6={}));var F6;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(F6||(F6={}));var V6;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(V6||(V6={}));var H6;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(H6||(H6={}));var G6;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(G6||(G6={}));var q6;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(q6||(q6={}));var $6;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})($6||($6={}));var W6;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(W6||(W6={}));var K6;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(K6||(K6={}));var X6;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(X6||(X6={}));var Y6;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Y6||(Y6={}));var J6;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(J6||(J6={}));var Z6;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Z6||(Z6={}));var Q6;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Q6||(Q6={}));var e8;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(e8||(e8={}));var t8;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(t8||(t8={}));var n8;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(n8||(n8={}));var r8;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(r8||(r8={}));var Mg;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Mg||(Mg={}));class L3{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class wy{get text(){var e,n,r,i,a,s,o,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",h=!1;const m=[];for(const v of(c=(o=(s=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)!==null&&c!==void 0?c:[]){for(const[x,_]of Object.entries(v))x!=="text"&&x!=="thought"&&x!=="thoughtSignature"&&(_!==null||_!==void 0)&&m.push(x);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;h=!0,u+=v.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?u:void 0}get data(){var e,n,r,i,a,s,o,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const h=[];for(const m of(c=(o=(s=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)!==null&&c!==void 0?c:[]){for(const[v,x]of Object.entries(m))v!=="inlineData"&&(x!==null||x!==void 0)&&h.push(v);m.inlineData&&typeof m.inlineData.data=="string"&&(u+=atob(m.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,i,a,s,o,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(c=(o=(s=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||c===void 0?void 0:c.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if(u?.length!==0)return u}get executableCode(){var e,n,r,i,a,s,o,c,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(c=(o=(s=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||c===void 0?void 0:c.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if(h?.length!==0)return(u=h?.[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,i,a,s,o,c,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(c=(o=(s=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||c===void 0?void 0:c.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if(h?.length!==0)return(u=h?.[0])===null||u===void 0?void 0:u.output}}class i8{}class a8{}class Dve{}class Lve{}class Uve{}class zve{}class s8{}class o8{}class l8{}class Bve{}class oT{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new oT;let i;const a=e;return n?i=Tve(a):i=Sve(a),Object.assign(r,i),r}}class c8{}class u8{}class d8{}class f8{}class Fve{}class Vve{}class Hve{}class Oj{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Oj,a=Rve(e);return Object.assign(r,a),r}}class Gve{}class qve{}class $ve{}class h8{}class Wve{get text(){var e,n,r;let i="",a=!1;const s=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,u]of Object.entries(o))c!=="text"&&c!=="thought"&&u!==null&&s.push(c);if(typeof o.text=="string"){if(typeof o.thought=="boolean"&&o.thought)continue;a=!0,i+=o.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?i:void 0}get data(){var e,n,r;let i="";const a=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[o,c]of Object.entries(s))o!=="inlineData"&&c!==null&&a.push(o);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class Kve{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class jj{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new jj,a=z9(e);return Object.assign(r,a),r}}function Jn(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function B9(t,e){const n=Jn(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function F9(t){return Array.isArray(t)?t.map(e=>lT(e)):[lT(t)]}function lT(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function V9(t){const e=lT(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function H9(t){const e=lT(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function p8(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function G9(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>p8(e)):[p8(t)]}function U3(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function m8(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function g8(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ha(t){if(t==null)throw new Error("ContentUnion is required");return U3(t)?t:{role:"user",parts:G9(t)}}function Dj(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Ha(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Ha(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Ha(n)):[Ha(e)]}function Ko(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(m8(t)||g8(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ha(t)]}const e=[],n=[],r=U3(t[0]);for(const i of t){const a=U3(i);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(i);else{if(m8(i)||g8(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:G9(n)}),e}function Xve(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(xr).includes(n[0].toUpperCase())?n[0].toUpperCase():xr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(xr).includes(r.toUpperCase())?r.toUpperCase():xr.TYPE_UNSPECIFIED})}}function Lg(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&Xve(t.type,e);for(const[s,o]of Object.entries(t))if(o!=null)if(s=="type"){if(o==="null")throw new Error("type: null can not be the only possible type for the field.");if(o instanceof Array)continue;e.type=Object.values(xr).includes(o.toUpperCase())?o.toUpperCase():xr.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Lg(o);else if(r.includes(s)){const c=[];for(const u of o){if(u.type=="null"){e.nullable=!0;continue}c.push(Lg(u))}e[s]=c}else if(i.includes(s)){const c={};for(const[u,h]of Object.entries(o))c[u]=Lg(h);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=o}return e}function Lj(t){return Lg(t)}function Uj(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function zj(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Rv(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Lg(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Lg(e.response));return t}function Iv(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Yve(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function id(t,e){if(typeof e!="string")throw new Error("name must be a string");return Yve(t,e,"cachedContents")}function q9(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Mf(t){return Pj(t)}function Jve(t){return t!=null&&typeof t=="object"&&"name"in t}function Zve(t){return t!=null&&typeof t=="object"&&"video"in t}function Qve(t){return t!=null&&typeof t=="object"&&"uri"in t}function $9(t){var e;let n;if(Jve(t)&&(n=t.name),!(Qve(t)&&(n=t.uri,n===void 0))&&!(Zve(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function W9(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function K9(t){for(const e of["models","tunedModels","publisherModels"])if(e0e(t,e))return t[e];return[]}function e0e(t,e){return t!==null&&typeof t=="object"&&e in t}function t0e(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function n0e(t,e={}){const n=[],r=new Set;for(const i of t){const a=i.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const s=t0e(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function X9(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function r0e(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Y9(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let a=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Pv(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function J9(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function i0e(t){const e={},n=A(t,["responsesFile"]);n!=null&&k(e,["fileName"],n);const r=A(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>U0e(s))),k(e,["inlinedResponses"],a)}const i=A(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>s)),k(e,["inlinedEmbedContentResponses"],a)}return e}function a0e(t){const e={},n=A(t,["predictionsFormat"]);n!=null&&k(e,["format"],n);const r=A(t,["gcsDestination","outputUriPrefix"]);r!=null&&k(e,["gcsUri"],r);const i=A(t,["bigqueryDestination","outputUri"]);return i!=null&&k(e,["bigqueryUri"],i),e}function s0e(t){const e={},n=A(t,["format"]);n!=null&&k(e,["predictionsFormat"],n);const r=A(t,["gcsUri"]);r!=null&&k(e,["gcsDestination","outputUriPrefix"],r);const i=A(t,["bigqueryUri"]);if(i!=null&&k(e,["bigqueryDestination","outputUri"],i),A(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(A(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(A(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function YS(t){const e={},n=A(t,["name"]);n!=null&&k(e,["name"],n);const r=A(t,["metadata","displayName"]);r!=null&&k(e,["displayName"],r);const i=A(t,["metadata","state"]);i!=null&&k(e,["state"],J9(i));const a=A(t,["metadata","createTime"]);a!=null&&k(e,["createTime"],a);const s=A(t,["metadata","endTime"]);s!=null&&k(e,["endTime"],s);const o=A(t,["metadata","updateTime"]);o!=null&&k(e,["updateTime"],o);const c=A(t,["metadata","model"]);c!=null&&k(e,["model"],c);const u=A(t,["metadata","output"]);return u!=null&&k(e,["dest"],i0e(Y9(u))),e}function z3(t){const e={},n=A(t,["name"]);n!=null&&k(e,["name"],n);const r=A(t,["displayName"]);r!=null&&k(e,["displayName"],r);const i=A(t,["state"]);i!=null&&k(e,["state"],J9(i));const a=A(t,["error"]);a!=null&&k(e,["error"],a);const s=A(t,["createTime"]);s!=null&&k(e,["createTime"],s);const o=A(t,["startTime"]);o!=null&&k(e,["startTime"],o);const c=A(t,["endTime"]);c!=null&&k(e,["endTime"],c);const u=A(t,["updateTime"]);u!=null&&k(e,["updateTime"],u);const h=A(t,["model"]);h!=null&&k(e,["model"],h);const m=A(t,["inputConfig"]);m!=null&&k(e,["src"],o0e(m));const v=A(t,["outputConfig"]);v!=null&&k(e,["dest"],a0e(Y9(v)));const x=A(t,["completionStats"]);return x!=null&&k(e,["completionStats"],x),e}function o0e(t){const e={},n=A(t,["instancesFormat"]);n!=null&&k(e,["format"],n);const r=A(t,["gcsSource","uris"]);r!=null&&k(e,["gcsUri"],r);const i=A(t,["bigquerySource","inputUri"]);return i!=null&&k(e,["bigqueryUri"],i),e}function l0e(t,e){const n={};if(A(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(A(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(A(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=A(e,["fileName"]);r!=null&&k(n,["fileName"],r);const i=A(e,["inlinedRequests"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>L0e(t,s))),k(n,["requests","requests"],a)}return n}function c0e(t){const e={},n=A(t,["format"]);n!=null&&k(e,["instancesFormat"],n);const r=A(t,["gcsUri"]);r!=null&&k(e,["gcsSource","uris"],r);const i=A(t,["bigqueryUri"]);if(i!=null&&k(e,["bigquerySource","inputUri"],i),A(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(A(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function u0e(t){const e={},n=A(t,["data"]);if(n!=null&&k(e,["data"],n),A(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=A(t,["mimeType"]);return r!=null&&k(e,["mimeType"],r),e}function d0e(t,e){const n={},r=A(e,["name"]);return r!=null&&k(n,["_url","name"],Pv(t,r)),n}function f0e(t,e){const n={},r=A(e,["name"]);return r!=null&&k(n,["_url","name"],Pv(t,r)),n}function h0e(t){const e={},n=A(t,["content"]);n!=null&&k(e,["content"],n);const r=A(t,["citationMetadata"]);r!=null&&k(e,["citationMetadata"],p0e(r));const i=A(t,["tokenCount"]);i!=null&&k(e,["tokenCount"],i);const a=A(t,["finishReason"]);a!=null&&k(e,["finishReason"],a);const s=A(t,["avgLogprobs"]);s!=null&&k(e,["avgLogprobs"],s);const o=A(t,["groundingMetadata"]);o!=null&&k(e,["groundingMetadata"],o);const c=A(t,["index"]);c!=null&&k(e,["index"],c);const u=A(t,["logprobsResult"]);u!=null&&k(e,["logprobsResult"],u);const h=A(t,["safetyRatings"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(x=>x)),k(e,["safetyRatings"],v)}const m=A(t,["urlContextMetadata"]);return m!=null&&k(e,["urlContextMetadata"],m),e}function p0e(t){const e={},n=A(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),k(e,["citations"],r)}return e}function Z9(t){const e={},n=A(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>q0e(a))),k(e,["parts"],i)}const r=A(t,["role"]);return r!=null&&k(e,["role"],r),e}function m0e(t,e){const n={},r=A(t,["displayName"]);if(e!==void 0&&r!=null&&k(e,["batch","displayName"],r),A(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function g0e(t,e){const n={},r=A(t,["displayName"]);e!==void 0&&r!=null&&k(e,["displayName"],r);const i=A(t,["dest"]);return e!==void 0&&i!=null&&k(e,["outputConfig"],s0e(r0e(i))),n}function v8(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["_url","model"],Jn(t,r));const i=A(e,["src"]);i!=null&&k(n,["batch","inputConfig"],l0e(t,X9(t,i)));const a=A(e,["config"]);return a!=null&&m0e(a,n),n}function v0e(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["model"],Jn(t,r));const i=A(e,["src"]);i!=null&&k(n,["inputConfig"],c0e(X9(t,i)));const a=A(e,["config"]);return a!=null&&g0e(a,n),n}function y0e(t,e){const n={},r=A(t,["displayName"]);return e!==void 0&&r!=null&&k(e,["batch","displayName"],r),n}function x0e(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["_url","model"],Jn(t,r));const i=A(e,["src"]);i!=null&&k(n,["batch","inputConfig"],A0e(t,i));const a=A(e,["config"]);return a!=null&&y0e(a,n),n}function b0e(t,e){const n={},r=A(e,["name"]);return r!=null&&k(n,["_url","name"],Pv(t,r)),n}function _0e(t,e){const n={},r=A(e,["name"]);return r!=null&&k(n,["_url","name"],Pv(t,r)),n}function w0e(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["name"]);r!=null&&k(e,["name"],r);const i=A(t,["done"]);i!=null&&k(e,["done"],i);const a=A(t,["error"]);return a!=null&&k(e,["error"],a),e}function S0e(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["name"]);r!=null&&k(e,["name"],r);const i=A(t,["done"]);i!=null&&k(e,["done"],i);const a=A(t,["error"]);return a!=null&&k(e,["error"],a),e}function T0e(t,e){const n={},r=A(e,["contents"]);if(r!=null){let a=Dj(t,r);Array.isArray(a)&&(a=a.map(s=>s)),k(n,["requests[]","request","content"],a)}const i=A(e,["config"]);return i!=null&&(k(n,["_self"],E0e(i,n)),_ve(n,{"requests[].*":"requests[].request.*"})),n}function E0e(t,e){const n={},r=A(t,["taskType"]);e!==void 0&&r!=null&&k(e,["requests[]","taskType"],r);const i=A(t,["title"]);e!==void 0&&i!=null&&k(e,["requests[]","title"],i);const a=A(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&k(e,["requests[]","outputDimensionality"],a),A(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(A(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function A0e(t,e){const n={},r=A(e,["fileName"]);r!=null&&k(n,["file_name"],r);const i=A(e,["inlinedRequests"]);return i!=null&&k(n,["requests"],T0e(t,i)),n}function k0e(t){const e={};if(A(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=A(t,["fileUri"]);n!=null&&k(e,["fileUri"],n);const r=A(t,["mimeType"]);return r!=null&&k(e,["mimeType"],r),e}function M0e(t){const e={},n=A(t,["id"]);n!=null&&k(e,["id"],n);const r=A(t,["args"]);r!=null&&k(e,["args"],r);const i=A(t,["name"]);if(i!=null&&k(e,["name"],i),A(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(A(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function N0e(t){const e={},n=A(t,["allowedFunctionNames"]);n!=null&&k(e,["allowedFunctionNames"],n);const r=A(t,["mode"]);if(r!=null&&k(e,["mode"],r),A(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function C0e(t,e,n){const r={},i=A(e,["systemInstruction"]);n!==void 0&&i!=null&&k(n,["systemInstruction"],Z9(Ha(i)));const a=A(e,["temperature"]);a!=null&&k(r,["temperature"],a);const s=A(e,["topP"]);s!=null&&k(r,["topP"],s);const o=A(e,["topK"]);o!=null&&k(r,["topK"],o);const c=A(e,["candidateCount"]);c!=null&&k(r,["candidateCount"],c);const u=A(e,["maxOutputTokens"]);u!=null&&k(r,["maxOutputTokens"],u);const h=A(e,["stopSequences"]);h!=null&&k(r,["stopSequences"],h);const m=A(e,["responseLogprobs"]);m!=null&&k(r,["responseLogprobs"],m);const v=A(e,["logprobs"]);v!=null&&k(r,["logprobs"],v);const x=A(e,["presencePenalty"]);x!=null&&k(r,["presencePenalty"],x);const _=A(e,["frequencyPenalty"]);_!=null&&k(r,["frequencyPenalty"],_);const T=A(e,["seed"]);T!=null&&k(r,["seed"],T);const w=A(e,["responseMimeType"]);w!=null&&k(r,["responseMimeType"],w);const E=A(e,["responseSchema"]);E!=null&&k(r,["responseSchema"],Lj(E));const N=A(e,["responseJsonSchema"]);if(N!=null&&k(r,["responseJsonSchema"],N),A(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(A(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=A(e,["safetySettings"]);if(n!==void 0&&C!=null){let $=C;Array.isArray($)&&($=$.map(ee=>$0e(ee))),k(n,["safetySettings"],$)}const P=A(e,["tools"]);if(n!==void 0&&P!=null){let $=Iv(P);Array.isArray($)&&($=$.map(ee=>K0e(Rv(ee)))),k(n,["tools"],$)}const I=A(e,["toolConfig"]);if(n!==void 0&&I!=null&&k(n,["toolConfig"],W0e(I)),A(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const j=A(e,["cachedContent"]);n!==void 0&&j!=null&&k(n,["cachedContent"],id(t,j));const O=A(e,["responseModalities"]);O!=null&&k(r,["responseModalities"],O);const F=A(e,["mediaResolution"]);F!=null&&k(r,["mediaResolution"],F);const L=A(e,["speechConfig"]);if(L!=null&&k(r,["speechConfig"],Uj(L)),A(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const z=A(e,["thinkingConfig"]);z!=null&&k(r,["thinkingConfig"],z);const V=A(e,["imageConfig"]);V!=null&&k(r,["imageConfig"],D0e(V));const G=A(e,["enableEnhancedCivicAnswers"]);if(G!=null&&k(r,["enableEnhancedCivicAnswers"],G),A(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function R0e(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>h0e(u))),k(e,["candidates"],c)}const i=A(t,["modelVersion"]);i!=null&&k(e,["modelVersion"],i);const a=A(t,["promptFeedback"]);a!=null&&k(e,["promptFeedback"],a);const s=A(t,["responseId"]);s!=null&&k(e,["responseId"],s);const o=A(t,["usageMetadata"]);return o!=null&&k(e,["usageMetadata"],o),e}function I0e(t,e){const n={},r=A(e,["name"]);return r!=null&&k(n,["_url","name"],Pv(t,r)),n}function P0e(t,e){const n={},r=A(e,["name"]);return r!=null&&k(n,["_url","name"],Pv(t,r)),n}function O0e(t){const e={};if(A(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=A(t,["enableWidget"]);return n!=null&&k(e,["enableWidget"],n),e}function j0e(t){const e={};if(A(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(A(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=A(t,["timeRangeFilter"]);return n!=null&&k(e,["timeRangeFilter"],n),e}function D0e(t){const e={},n=A(t,["aspectRatio"]);n!=null&&k(e,["aspectRatio"],n);const r=A(t,["imageSize"]);if(r!=null&&k(e,["imageSize"],r),A(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(A(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(A(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function L0e(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["request","model"],Jn(t,r));const i=A(e,["contents"]);if(i!=null){let o=Ko(i);Array.isArray(o)&&(o=o.map(c=>Z9(c))),k(n,["request","contents"],o)}const a=A(e,["metadata"]);a!=null&&k(n,["metadata"],a);const s=A(e,["config"]);return s!=null&&k(n,["request","generationConfig"],C0e(t,s,A(n,["request"],{}))),n}function U0e(t){const e={},n=A(t,["response"]);n!=null&&k(e,["response"],R0e(n));const r=A(t,["error"]);return r!=null&&k(e,["error"],r),e}function z0e(t,e){const n={},r=A(t,["pageSize"]);e!==void 0&&r!=null&&k(e,["_query","pageSize"],r);const i=A(t,["pageToken"]);if(e!==void 0&&i!=null&&k(e,["_query","pageToken"],i),A(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function B0e(t,e){const n={},r=A(t,["pageSize"]);e!==void 0&&r!=null&&k(e,["_query","pageSize"],r);const i=A(t,["pageToken"]);e!==void 0&&i!=null&&k(e,["_query","pageToken"],i);const a=A(t,["filter"]);return e!==void 0&&a!=null&&k(e,["_query","filter"],a),n}function F0e(t){const e={},n=A(t,["config"]);return n!=null&&z0e(n,e),e}function V0e(t){const e={},n=A(t,["config"]);return n!=null&&B0e(n,e),e}function H0e(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["nextPageToken"]);r!=null&&k(e,["nextPageToken"],r);const i=A(t,["operations"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>YS(s))),k(e,["batchJobs"],a)}return e}function G0e(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["nextPageToken"]);r!=null&&k(e,["nextPageToken"],r);const i=A(t,["batchPredictionJobs"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>z3(s))),k(e,["batchJobs"],a)}return e}function q0e(t){const e={},n=A(t,["mediaResolution"]);n!=null&&k(e,["mediaResolution"],n);const r=A(t,["codeExecutionResult"]);r!=null&&k(e,["codeExecutionResult"],r);const i=A(t,["executableCode"]);i!=null&&k(e,["executableCode"],i);const a=A(t,["fileData"]);a!=null&&k(e,["fileData"],k0e(a));const s=A(t,["functionCall"]);s!=null&&k(e,["functionCall"],M0e(s));const o=A(t,["functionResponse"]);o!=null&&k(e,["functionResponse"],o);const c=A(t,["inlineData"]);c!=null&&k(e,["inlineData"],u0e(c));const u=A(t,["text"]);u!=null&&k(e,["text"],u);const h=A(t,["thought"]);h!=null&&k(e,["thought"],h);const m=A(t,["thoughtSignature"]);m!=null&&k(e,["thoughtSignature"],m);const v=A(t,["videoMetadata"]);return v!=null&&k(e,["videoMetadata"],v),e}function $0e(t){const e={},n=A(t,["category"]);if(n!=null&&k(e,["category"],n),A(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=A(t,["threshold"]);return r!=null&&k(e,["threshold"],r),e}function W0e(t){const e={},n=A(t,["retrievalConfig"]);n!=null&&k(e,["retrievalConfig"],n);const r=A(t,["functionCallingConfig"]);return r!=null&&k(e,["functionCallingConfig"],N0e(r)),e}function K0e(t){const e={};if(A(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=A(t,["computerUse"]);n!=null&&k(e,["computerUse"],n);const r=A(t,["fileSearch"]);r!=null&&k(e,["fileSearch"],r);const i=A(t,["codeExecution"]);if(i!=null&&k(e,["codeExecution"],i),A(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=A(t,["functionDeclarations"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(m=>m)),k(e,["functionDeclarations"],h)}const s=A(t,["googleMaps"]);s!=null&&k(e,["googleMaps"],O0e(s));const o=A(t,["googleSearch"]);o!=null&&k(e,["googleSearch"],j0e(o));const c=A(t,["googleSearchRetrieval"]);c!=null&&k(e,["googleSearchRetrieval"],c);const u=A(t,["urlContext"]);return u!=null&&k(e,["urlContext"],u),e}var Xu;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Xu||(Xu={}));class Ap{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(a=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}class X0e extends rd{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ap(Xu.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=v8(this.apiClient,e),r=n._url,i=At("{model}:batchGenerateContent",r),o=n.batch.inputConfig.requests,c=o.requests,u=[];for(const h of c){const m=Object.assign({},h);if(m.systemInstruction){const v=m.systemInstruction;delete m.systemInstruction;const x=m.request;x.systemInstruction=v,m.request=x}u.push(m)}return o.requests=u,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const a=this.getGcsUri(e),s=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?r.dest=`${a.slice(0,-6)}/dest`:r.dest=`${a}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=v0e(this.apiClient,e);return o=At("batchPredictionJobs",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>z3(h))}else{const u=v8(this.apiClient,e);return o=At("{model}:batchGenerateContent",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),s.then(h=>YS(h))}}async createEmbeddingsInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=x0e(this.apiClient,e);return a=At("{model}:asyncBatchEmbedContent",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>YS(c))}}async get(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=P0e(this.apiClient,e);return o=At("batchPredictionJobs/{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>z3(h))}else{const u=I0e(this.apiClient,e);return o=At("batches/{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),s.then(h=>YS(h))}}async cancel(e){var n,r,i,a;let s="",o={};if(this.apiClient.isVertexAI()){const c=f0e(this.apiClient,e);s=At("batchPredictionJobs/{name}:cancel",c._url),o=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=d0e(this.apiClient,e);s=At("batches/{name}:cancel",c._url),o=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=V0e(e);return o=At("batchPredictionJobs",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=G0e(h),v=new h8;return Object.assign(v,m),v})}else{const u=F0e(e);return o=At("batches",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=H0e(h),v=new h8;return Object.assign(v,m),v})}}async delete(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=_0e(this.apiClient,e);return o=At("batchPredictionJobs/{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>S0e(h))}else{const u=b0e(this.apiClient,e);return o=At("batches/{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>w0e(h))}}}function Y0e(t){const e={},n=A(t,["data"]);if(n!=null&&k(e,["data"],n),A(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=A(t,["mimeType"]);return r!=null&&k(e,["mimeType"],r),e}function y8(t){const e={},n=A(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>xye(a))),k(e,["parts"],i)}const r=A(t,["role"]);return r!=null&&k(e,["role"],r),e}function J0e(t,e){const n={},r=A(t,["ttl"]);e!==void 0&&r!=null&&k(e,["ttl"],r);const i=A(t,["expireTime"]);e!==void 0&&i!=null&&k(e,["expireTime"],i);const a=A(t,["displayName"]);e!==void 0&&a!=null&&k(e,["displayName"],a);const s=A(t,["contents"]);if(e!==void 0&&s!=null){let h=Ko(s);Array.isArray(h)&&(h=h.map(m=>y8(m))),k(e,["contents"],h)}const o=A(t,["systemInstruction"]);e!==void 0&&o!=null&&k(e,["systemInstruction"],y8(Ha(o)));const c=A(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(m=>_ye(m))),k(e,["tools"],h)}const u=A(t,["toolConfig"]);if(e!==void 0&&u!=null&&k(e,["toolConfig"],bye(u)),A(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Z0e(t,e){const n={},r=A(t,["ttl"]);e!==void 0&&r!=null&&k(e,["ttl"],r);const i=A(t,["expireTime"]);e!==void 0&&i!=null&&k(e,["expireTime"],i);const a=A(t,["displayName"]);e!==void 0&&a!=null&&k(e,["displayName"],a);const s=A(t,["contents"]);if(e!==void 0&&s!=null){let m=Ko(s);Array.isArray(m)&&(m=m.map(v=>v)),k(e,["contents"],m)}const o=A(t,["systemInstruction"]);e!==void 0&&o!=null&&k(e,["systemInstruction"],Ha(o));const c=A(t,["tools"]);if(e!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(v=>wye(v))),k(e,["tools"],m)}const u=A(t,["toolConfig"]);e!==void 0&&u!=null&&k(e,["toolConfig"],u);const h=A(t,["kmsKeyName"]);return e!==void 0&&h!=null&&k(e,["encryption_spec","kmsKeyName"],h),n}function Q0e(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["model"],B9(t,r));const i=A(e,["config"]);return i!=null&&J0e(i,n),n}function eye(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["model"],B9(t,r));const i=A(e,["config"]);return i!=null&&Z0e(i,n),n}function tye(t,e){const n={},r=A(e,["name"]);return r!=null&&k(n,["_url","name"],id(t,r)),n}function nye(t,e){const n={},r=A(e,["name"]);return r!=null&&k(n,["_url","name"],id(t,r)),n}function rye(t){const e={},n=A(t,["sdkHttpResponse"]);return n!=null&&k(e,["sdkHttpResponse"],n),e}function iye(t){const e={},n=A(t,["sdkHttpResponse"]);return n!=null&&k(e,["sdkHttpResponse"],n),e}function aye(t){const e={};if(A(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=A(t,["fileUri"]);n!=null&&k(e,["fileUri"],n);const r=A(t,["mimeType"]);return r!=null&&k(e,["mimeType"],r),e}function sye(t){const e={},n=A(t,["id"]);n!=null&&k(e,["id"],n);const r=A(t,["args"]);r!=null&&k(e,["args"],r);const i=A(t,["name"]);if(i!=null&&k(e,["name"],i),A(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(A(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function oye(t){const e={},n=A(t,["allowedFunctionNames"]);n!=null&&k(e,["allowedFunctionNames"],n);const r=A(t,["mode"]);if(r!=null&&k(e,["mode"],r),A(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function lye(t){const e={},n=A(t,["description"]);n!=null&&k(e,["description"],n);const r=A(t,["name"]);r!=null&&k(e,["name"],r);const i=A(t,["parameters"]);i!=null&&k(e,["parameters"],i);const a=A(t,["parametersJsonSchema"]);a!=null&&k(e,["parametersJsonSchema"],a);const s=A(t,["response"]);s!=null&&k(e,["response"],s);const o=A(t,["responseJsonSchema"]);if(o!=null&&k(e,["responseJsonSchema"],o),A(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function cye(t,e){const n={},r=A(e,["name"]);return r!=null&&k(n,["_url","name"],id(t,r)),n}function uye(t,e){const n={},r=A(e,["name"]);return r!=null&&k(n,["_url","name"],id(t,r)),n}function dye(t){const e={};if(A(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=A(t,["enableWidget"]);return n!=null&&k(e,["enableWidget"],n),e}function fye(t){const e={};if(A(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(A(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=A(t,["timeRangeFilter"]);return n!=null&&k(e,["timeRangeFilter"],n),e}function hye(t,e){const n={},r=A(t,["pageSize"]);e!==void 0&&r!=null&&k(e,["_query","pageSize"],r);const i=A(t,["pageToken"]);return e!==void 0&&i!=null&&k(e,["_query","pageToken"],i),n}function pye(t,e){const n={},r=A(t,["pageSize"]);e!==void 0&&r!=null&&k(e,["_query","pageSize"],r);const i=A(t,["pageToken"]);return e!==void 0&&i!=null&&k(e,["_query","pageToken"],i),n}function mye(t){const e={},n=A(t,["config"]);return n!=null&&hye(n,e),e}function gye(t){const e={},n=A(t,["config"]);return n!=null&&pye(n,e),e}function vye(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["nextPageToken"]);r!=null&&k(e,["nextPageToken"],r);const i=A(t,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>s)),k(e,["cachedContents"],a)}return e}function yye(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["nextPageToken"]);r!=null&&k(e,["nextPageToken"],r);const i=A(t,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>s)),k(e,["cachedContents"],a)}return e}function xye(t){const e={},n=A(t,["mediaResolution"]);n!=null&&k(e,["mediaResolution"],n);const r=A(t,["codeExecutionResult"]);r!=null&&k(e,["codeExecutionResult"],r);const i=A(t,["executableCode"]);i!=null&&k(e,["executableCode"],i);const a=A(t,["fileData"]);a!=null&&k(e,["fileData"],aye(a));const s=A(t,["functionCall"]);s!=null&&k(e,["functionCall"],sye(s));const o=A(t,["functionResponse"]);o!=null&&k(e,["functionResponse"],o);const c=A(t,["inlineData"]);c!=null&&k(e,["inlineData"],Y0e(c));const u=A(t,["text"]);u!=null&&k(e,["text"],u);const h=A(t,["thought"]);h!=null&&k(e,["thought"],h);const m=A(t,["thoughtSignature"]);m!=null&&k(e,["thoughtSignature"],m);const v=A(t,["videoMetadata"]);return v!=null&&k(e,["videoMetadata"],v),e}function bye(t){const e={},n=A(t,["retrievalConfig"]);n!=null&&k(e,["retrievalConfig"],n);const r=A(t,["functionCallingConfig"]);return r!=null&&k(e,["functionCallingConfig"],oye(r)),e}function _ye(t){const e={};if(A(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=A(t,["computerUse"]);n!=null&&k(e,["computerUse"],n);const r=A(t,["fileSearch"]);r!=null&&k(e,["fileSearch"],r);const i=A(t,["codeExecution"]);if(i!=null&&k(e,["codeExecution"],i),A(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=A(t,["functionDeclarations"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(m=>m)),k(e,["functionDeclarations"],h)}const s=A(t,["googleMaps"]);s!=null&&k(e,["googleMaps"],dye(s));const o=A(t,["googleSearch"]);o!=null&&k(e,["googleSearch"],fye(o));const c=A(t,["googleSearchRetrieval"]);c!=null&&k(e,["googleSearchRetrieval"],c);const u=A(t,["urlContext"]);return u!=null&&k(e,["urlContext"],u),e}function wye(t){const e={},n=A(t,["retrieval"]);n!=null&&k(e,["retrieval"],n);const r=A(t,["computerUse"]);if(r!=null&&k(e,["computerUse"],r),A(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=A(t,["codeExecution"]);i!=null&&k(e,["codeExecution"],i);const a=A(t,["enterpriseWebSearch"]);a!=null&&k(e,["enterpriseWebSearch"],a);const s=A(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>lye(v))),k(e,["functionDeclarations"],m)}const o=A(t,["googleMaps"]);o!=null&&k(e,["googleMaps"],o);const c=A(t,["googleSearch"]);c!=null&&k(e,["googleSearch"],c);const u=A(t,["googleSearchRetrieval"]);u!=null&&k(e,["googleSearchRetrieval"],u);const h=A(t,["urlContext"]);return h!=null&&k(e,["urlContext"],h),e}function Sye(t,e){const n={},r=A(t,["ttl"]);e!==void 0&&r!=null&&k(e,["ttl"],r);const i=A(t,["expireTime"]);return e!==void 0&&i!=null&&k(e,["expireTime"],i),n}function Tye(t,e){const n={},r=A(t,["ttl"]);e!==void 0&&r!=null&&k(e,["ttl"],r);const i=A(t,["expireTime"]);return e!==void 0&&i!=null&&k(e,["expireTime"],i),n}function Eye(t,e){const n={},r=A(e,["name"]);r!=null&&k(n,["_url","name"],id(t,r));const i=A(e,["config"]);return i!=null&&Sye(i,n),n}function Aye(t,e){const n={},r=A(e,["name"]);r!=null&&k(n,["_url","name"],id(t,r));const i=A(e,["config"]);return i!=null&&Tye(i,n),n}class kye extends rd{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ap(Xu.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=eye(this.apiClient,e);return o=At("cachedContents",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const u=Q0e(this.apiClient,e);return o=At("cachedContents",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async get(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=uye(this.apiClient,e);return o=At("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const u=cye(this.apiClient,e);return o=At("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=nye(this.apiClient,e);return o=At("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=iye(h),v=new d8;return Object.assign(v,m),v})}else{const u=tye(this.apiClient,e);return o=At("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=rye(h),v=new d8;return Object.assign(v,m),v})}}async update(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=Aye(this.apiClient,e);return o=At("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const u=Eye(this.apiClient,e);return o=At("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async listInternal(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=gye(e);return o=At("cachedContents",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=yye(h),v=new f8;return Object.assign(v,m),v})}else{const u=mye(e);return o=At("cachedContents",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=vye(h),v=new f8;return Object.assign(v,m),v})}}}function cT(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function x8(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function cn(t){return this instanceof cn?(this.v=t,this):new cn(t)}function zl(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(x){return function(_){return Promise.resolve(_).then(x,m)}}function o(x,_){r[x]&&(i[x]=function(T){return new Promise(function(w,E){a.push([x,T,w,E])>1||c(x,T)})},_&&(i[x]=_(i[x])))}function c(x,_){try{u(r[x](_))}catch(T){v(a[0][3],T)}}function u(x){x.value instanceof cn?Promise.resolve(x.value.v).then(h,m):v(a[0][2],x)}function h(x){c("next",x)}function m(x){c("throw",x)}function v(x,_){x(_),a.shift(),a.length&&c(a[0][0],a[0][1])}}function Bl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof x8=="function"?x8(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(s){return new Promise(function(o,c){s=t[a](s),i(o,c,s.done,s.value)})}}function i(a,s,o,c){Promise.resolve(c).then(function(u){a({value:u,done:o})},s)}}function Mye(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Q9(n)}function Q9(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Nye(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function b8(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let a=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),a&&!Q9(t[r])&&(a=!1),r++;a?e.push(...i):e.pop()}return e}class Cye{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Rye(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Rye{constructor(e,n,r,i={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=a,this.sendPromise=Promise.resolve(),Nye(a)}async sendMessage(e){var n;await this.sendPromise;const r=Ha(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,s,o;const c=await i,u=(s=(a=c.candidates)===null||a===void 0?void 0:a[0])===null||s===void 0?void 0:s.content,h=c.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let v=[];h!=null&&(v=(o=h.slice(m))!==null&&o!==void 0?o:[]);const x=u?[u]:[];this.recordHistory(r,x,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Ha(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const a=await i;return this.processStreamResponse(a,r)}getHistory(e=!1){const n=e?b8(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return zl(this,arguments,function*(){var i,a,s,o,c,u;const h=[];try{for(var m=!0,v=Bl(e),x;x=yield cn(v.next()),i=x.done,!i;m=!0){o=x.value,m=!1;const _=o;if(Mye(_)){const T=(u=(c=_.candidates)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.content;T!==void 0&&h.push(T)}yield yield cn(_)}}catch(_){a={error:_}}finally{try{!m&&!i&&(s=v.return)&&(yield cn(s.call(v)))}finally{if(a)throw a.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(a=>a.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...b8(r)):this.history.push(e),this.history.push(...i)}}class ob extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ob.prototype)}}function Iye(t){const e={},n=A(t,["file"]);return n!=null&&k(e,["file"],n),e}function Pye(t){const e={},n=A(t,["sdkHttpResponse"]);return n!=null&&k(e,["sdkHttpResponse"],n),e}function Oye(t){const e={},n=A(t,["name"]);return n!=null&&k(e,["_url","file"],$9(n)),e}function jye(t){const e={},n=A(t,["sdkHttpResponse"]);return n!=null&&k(e,["sdkHttpResponse"],n),e}function Dye(t){const e={},n=A(t,["name"]);return n!=null&&k(e,["_url","file"],$9(n)),e}function Lye(t,e){const n={},r=A(t,["pageSize"]);e!==void 0&&r!=null&&k(e,["_query","pageSize"],r);const i=A(t,["pageToken"]);return e!==void 0&&i!=null&&k(e,["_query","pageToken"],i),n}function Uye(t){const e={},n=A(t,["config"]);return n!=null&&Lye(n,e),e}function zye(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["nextPageToken"]);r!=null&&k(e,["nextPageToken"],r);const i=A(t,["files"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>s)),k(e,["files"],a)}return e}class Bye extends rd{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ap(Xu.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Uye(e);return a=At("files",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const u=zye(c),h=new Gve;return Object.assign(h,u),h})}}async createInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Iye(e);return a=At("upload/v1beta/files",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const u=Pye(c),h=new qve;return Object.assign(h,u),h})}}async get(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Dye(e);return a=At("files/{file}",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Oye(e);return a=At("files/{file}",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const u=jye(c),h=new $ve;return Object.assign(h,u),h})}}}function JS(t){const e={},n=A(t,["data"]);if(n!=null&&k(e,["data"],n),A(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=A(t,["mimeType"]);return r!=null&&k(e,["mimeType"],r),e}function Fye(t){const e={},n=A(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>rxe(a))),k(e,["parts"],i)}const r=A(t,["role"]);return r!=null&&k(e,["role"],r),e}function Vye(t){const e={};if(A(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=A(t,["fileUri"]);n!=null&&k(e,["fileUri"],n);const r=A(t,["mimeType"]);return r!=null&&k(e,["mimeType"],r),e}function Hye(t){const e={},n=A(t,["id"]);n!=null&&k(e,["id"],n);const r=A(t,["args"]);r!=null&&k(e,["args"],r);const i=A(t,["name"]);if(i!=null&&k(e,["name"],i),A(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(A(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Gye(t){const e={},n=A(t,["description"]);n!=null&&k(e,["description"],n);const r=A(t,["name"]);r!=null&&k(e,["name"],r);const i=A(t,["parameters"]);i!=null&&k(e,["parameters"],i);const a=A(t,["parametersJsonSchema"]);a!=null&&k(e,["parametersJsonSchema"],a);const s=A(t,["response"]);s!=null&&k(e,["response"],s);const o=A(t,["responseJsonSchema"]);if(o!=null&&k(e,["responseJsonSchema"],o),A(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function qye(t){const e={},n=A(t,["modelSelectionConfig"]);n!=null&&k(e,["modelConfig"],n);const r=A(t,["responseJsonSchema"]);r!=null&&k(e,["responseJsonSchema"],r);const i=A(t,["audioTimestamp"]);i!=null&&k(e,["audioTimestamp"],i);const a=A(t,["candidateCount"]);a!=null&&k(e,["candidateCount"],a);const s=A(t,["enableAffectiveDialog"]);s!=null&&k(e,["enableAffectiveDialog"],s);const o=A(t,["frequencyPenalty"]);o!=null&&k(e,["frequencyPenalty"],o);const c=A(t,["logprobs"]);c!=null&&k(e,["logprobs"],c);const u=A(t,["maxOutputTokens"]);u!=null&&k(e,["maxOutputTokens"],u);const h=A(t,["mediaResolution"]);h!=null&&k(e,["mediaResolution"],h);const m=A(t,["presencePenalty"]);m!=null&&k(e,["presencePenalty"],m);const v=A(t,["responseLogprobs"]);v!=null&&k(e,["responseLogprobs"],v);const x=A(t,["responseMimeType"]);x!=null&&k(e,["responseMimeType"],x);const _=A(t,["responseModalities"]);_!=null&&k(e,["responseModalities"],_);const T=A(t,["responseSchema"]);T!=null&&k(e,["responseSchema"],T);const w=A(t,["routingConfig"]);w!=null&&k(e,["routingConfig"],w);const E=A(t,["seed"]);E!=null&&k(e,["seed"],E);const N=A(t,["speechConfig"]);N!=null&&k(e,["speechConfig"],N);const C=A(t,["stopSequences"]);C!=null&&k(e,["stopSequences"],C);const P=A(t,["temperature"]);P!=null&&k(e,["temperature"],P);const I=A(t,["thinkingConfig"]);I!=null&&k(e,["thinkingConfig"],I);const j=A(t,["topK"]);j!=null&&k(e,["topK"],j);const O=A(t,["topP"]);if(O!=null&&k(e,["topP"],O),A(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function $ye(t){const e={};if(A(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=A(t,["enableWidget"]);return n!=null&&k(e,["enableWidget"],n),e}function Wye(t){const e={};if(A(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(A(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=A(t,["timeRangeFilter"]);return n!=null&&k(e,["timeRangeFilter"],n),e}function Kye(t,e){const n={},r=A(t,["generationConfig"]);e!==void 0&&r!=null&&k(e,["setup","generationConfig"],r);const i=A(t,["responseModalities"]);e!==void 0&&i!=null&&k(e,["setup","generationConfig","responseModalities"],i);const a=A(t,["temperature"]);e!==void 0&&a!=null&&k(e,["setup","generationConfig","temperature"],a);const s=A(t,["topP"]);e!==void 0&&s!=null&&k(e,["setup","generationConfig","topP"],s);const o=A(t,["topK"]);e!==void 0&&o!=null&&k(e,["setup","generationConfig","topK"],o);const c=A(t,["maxOutputTokens"]);e!==void 0&&c!=null&&k(e,["setup","generationConfig","maxOutputTokens"],c);const u=A(t,["mediaResolution"]);e!==void 0&&u!=null&&k(e,["setup","generationConfig","mediaResolution"],u);const h=A(t,["seed"]);e!==void 0&&h!=null&&k(e,["setup","generationConfig","seed"],h);const m=A(t,["speechConfig"]);e!==void 0&&m!=null&&k(e,["setup","generationConfig","speechConfig"],zj(m));const v=A(t,["thinkingConfig"]);e!==void 0&&v!=null&&k(e,["setup","generationConfig","thinkingConfig"],v);const x=A(t,["enableAffectiveDialog"]);e!==void 0&&x!=null&&k(e,["setup","generationConfig","enableAffectiveDialog"],x);const _=A(t,["systemInstruction"]);e!==void 0&&_!=null&&k(e,["setup","systemInstruction"],Fye(Ha(_)));const T=A(t,["tools"]);if(e!==void 0&&T!=null){let j=Iv(T);Array.isArray(j)&&(j=j.map(O=>axe(Rv(O)))),k(e,["setup","tools"],j)}const w=A(t,["sessionResumption"]);e!==void 0&&w!=null&&k(e,["setup","sessionResumption"],ixe(w));const E=A(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&k(e,["setup","inputAudioTranscription"],E);const N=A(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&k(e,["setup","outputAudioTranscription"],N);const C=A(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&k(e,["setup","realtimeInputConfig"],C);const P=A(t,["contextWindowCompression"]);e!==void 0&&P!=null&&k(e,["setup","contextWindowCompression"],P);const I=A(t,["proactivity"]);if(e!==void 0&&I!=null&&k(e,["setup","proactivity"],I),A(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Xye(t,e){const n={},r=A(t,["generationConfig"]);e!==void 0&&r!=null&&k(e,["setup","generationConfig"],qye(r));const i=A(t,["responseModalities"]);e!==void 0&&i!=null&&k(e,["setup","generationConfig","responseModalities"],i);const a=A(t,["temperature"]);e!==void 0&&a!=null&&k(e,["setup","generationConfig","temperature"],a);const s=A(t,["topP"]);e!==void 0&&s!=null&&k(e,["setup","generationConfig","topP"],s);const o=A(t,["topK"]);e!==void 0&&o!=null&&k(e,["setup","generationConfig","topK"],o);const c=A(t,["maxOutputTokens"]);e!==void 0&&c!=null&&k(e,["setup","generationConfig","maxOutputTokens"],c);const u=A(t,["mediaResolution"]);e!==void 0&&u!=null&&k(e,["setup","generationConfig","mediaResolution"],u);const h=A(t,["seed"]);e!==void 0&&h!=null&&k(e,["setup","generationConfig","seed"],h);const m=A(t,["speechConfig"]);e!==void 0&&m!=null&&k(e,["setup","generationConfig","speechConfig"],zj(m));const v=A(t,["thinkingConfig"]);e!==void 0&&v!=null&&k(e,["setup","generationConfig","thinkingConfig"],v);const x=A(t,["enableAffectiveDialog"]);e!==void 0&&x!=null&&k(e,["setup","generationConfig","enableAffectiveDialog"],x);const _=A(t,["systemInstruction"]);e!==void 0&&_!=null&&k(e,["setup","systemInstruction"],Ha(_));const T=A(t,["tools"]);if(e!==void 0&&T!=null){let O=Iv(T);Array.isArray(O)&&(O=O.map(F=>sxe(Rv(F)))),k(e,["setup","tools"],O)}const w=A(t,["sessionResumption"]);e!==void 0&&w!=null&&k(e,["setup","sessionResumption"],w);const E=A(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&k(e,["setup","inputAudioTranscription"],E);const N=A(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&k(e,["setup","outputAudioTranscription"],N);const C=A(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&k(e,["setup","realtimeInputConfig"],C);const P=A(t,["contextWindowCompression"]);e!==void 0&&P!=null&&k(e,["setup","contextWindowCompression"],P);const I=A(t,["proactivity"]);e!==void 0&&I!=null&&k(e,["setup","proactivity"],I);const j=A(t,["explicitVadSignal"]);return e!==void 0&&j!=null&&k(e,["setup","explicitVadSignal"],j),n}function Yye(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["setup","model"],Jn(t,r));const i=A(e,["config"]);return i!=null&&k(n,["config"],Kye(i,n)),n}function Jye(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["setup","model"],Jn(t,r));const i=A(e,["config"]);return i!=null&&k(n,["config"],Xye(i,n)),n}function Zye(t){const e={},n=A(t,["musicGenerationConfig"]);return n!=null&&k(e,["musicGenerationConfig"],n),e}function Qye(t){const e={},n=A(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),k(e,["weightedPrompts"],r)}return e}function exe(t){const e={},n=A(t,["media"]);if(n!=null){let u=F9(n);Array.isArray(u)&&(u=u.map(h=>JS(h))),k(e,["mediaChunks"],u)}const r=A(t,["audio"]);r!=null&&k(e,["audio"],JS(H9(r)));const i=A(t,["audioStreamEnd"]);i!=null&&k(e,["audioStreamEnd"],i);const a=A(t,["video"]);a!=null&&k(e,["video"],JS(V9(a)));const s=A(t,["text"]);s!=null&&k(e,["text"],s);const o=A(t,["activityStart"]);o!=null&&k(e,["activityStart"],o);const c=A(t,["activityEnd"]);return c!=null&&k(e,["activityEnd"],c),e}function txe(t){const e={},n=A(t,["media"]);if(n!=null){let u=F9(n);Array.isArray(u)&&(u=u.map(h=>h)),k(e,["mediaChunks"],u)}const r=A(t,["audio"]);r!=null&&k(e,["audio"],H9(r));const i=A(t,["audioStreamEnd"]);i!=null&&k(e,["audioStreamEnd"],i);const a=A(t,["video"]);a!=null&&k(e,["video"],V9(a));const s=A(t,["text"]);s!=null&&k(e,["text"],s);const o=A(t,["activityStart"]);o!=null&&k(e,["activityStart"],o);const c=A(t,["activityEnd"]);return c!=null&&k(e,["activityEnd"],c),e}function nxe(t){const e={},n=A(t,["setupComplete"]);n!=null&&k(e,["setupComplete"],n);const r=A(t,["serverContent"]);r!=null&&k(e,["serverContent"],r);const i=A(t,["toolCall"]);i!=null&&k(e,["toolCall"],i);const a=A(t,["toolCallCancellation"]);a!=null&&k(e,["toolCallCancellation"],a);const s=A(t,["usageMetadata"]);s!=null&&k(e,["usageMetadata"],oxe(s));const o=A(t,["goAway"]);o!=null&&k(e,["goAway"],o);const c=A(t,["sessionResumptionUpdate"]);c!=null&&k(e,["sessionResumptionUpdate"],c);const u=A(t,["voiceActivityDetectionSignal"]);u!=null&&k(e,["voiceActivityDetectionSignal"],u);const h=A(t,["voiceActivity"]);return h!=null&&k(e,["voiceActivity"],lxe(h)),e}function rxe(t){const e={},n=A(t,["mediaResolution"]);n!=null&&k(e,["mediaResolution"],n);const r=A(t,["codeExecutionResult"]);r!=null&&k(e,["codeExecutionResult"],r);const i=A(t,["executableCode"]);i!=null&&k(e,["executableCode"],i);const a=A(t,["fileData"]);a!=null&&k(e,["fileData"],Vye(a));const s=A(t,["functionCall"]);s!=null&&k(e,["functionCall"],Hye(s));const o=A(t,["functionResponse"]);o!=null&&k(e,["functionResponse"],o);const c=A(t,["inlineData"]);c!=null&&k(e,["inlineData"],JS(c));const u=A(t,["text"]);u!=null&&k(e,["text"],u);const h=A(t,["thought"]);h!=null&&k(e,["thought"],h);const m=A(t,["thoughtSignature"]);m!=null&&k(e,["thoughtSignature"],m);const v=A(t,["videoMetadata"]);return v!=null&&k(e,["videoMetadata"],v),e}function ixe(t){const e={},n=A(t,["handle"]);if(n!=null&&k(e,["handle"],n),A(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function axe(t){const e={};if(A(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=A(t,["computerUse"]);n!=null&&k(e,["computerUse"],n);const r=A(t,["fileSearch"]);r!=null&&k(e,["fileSearch"],r);const i=A(t,["codeExecution"]);if(i!=null&&k(e,["codeExecution"],i),A(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=A(t,["functionDeclarations"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(m=>m)),k(e,["functionDeclarations"],h)}const s=A(t,["googleMaps"]);s!=null&&k(e,["googleMaps"],$ye(s));const o=A(t,["googleSearch"]);o!=null&&k(e,["googleSearch"],Wye(o));const c=A(t,["googleSearchRetrieval"]);c!=null&&k(e,["googleSearchRetrieval"],c);const u=A(t,["urlContext"]);return u!=null&&k(e,["urlContext"],u),e}function sxe(t){const e={},n=A(t,["retrieval"]);n!=null&&k(e,["retrieval"],n);const r=A(t,["computerUse"]);if(r!=null&&k(e,["computerUse"],r),A(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=A(t,["codeExecution"]);i!=null&&k(e,["codeExecution"],i);const a=A(t,["enterpriseWebSearch"]);a!=null&&k(e,["enterpriseWebSearch"],a);const s=A(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>Gye(v))),k(e,["functionDeclarations"],m)}const o=A(t,["googleMaps"]);o!=null&&k(e,["googleMaps"],o);const c=A(t,["googleSearch"]);c!=null&&k(e,["googleSearch"],c);const u=A(t,["googleSearchRetrieval"]);u!=null&&k(e,["googleSearchRetrieval"],u);const h=A(t,["urlContext"]);return h!=null&&k(e,["urlContext"],h),e}function oxe(t){const e={},n=A(t,["promptTokenCount"]);n!=null&&k(e,["promptTokenCount"],n);const r=A(t,["cachedContentTokenCount"]);r!=null&&k(e,["cachedContentTokenCount"],r);const i=A(t,["candidatesTokenCount"]);i!=null&&k(e,["responseTokenCount"],i);const a=A(t,["toolUsePromptTokenCount"]);a!=null&&k(e,["toolUsePromptTokenCount"],a);const s=A(t,["thoughtsTokenCount"]);s!=null&&k(e,["thoughtsTokenCount"],s);const o=A(t,["totalTokenCount"]);o!=null&&k(e,["totalTokenCount"],o);const c=A(t,["promptTokensDetails"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(_=>_)),k(e,["promptTokensDetails"],x)}const u=A(t,["cacheTokensDetails"]);if(u!=null){let x=u;Array.isArray(x)&&(x=x.map(_=>_)),k(e,["cacheTokensDetails"],x)}const h=A(t,["candidatesTokensDetails"]);if(h!=null){let x=h;Array.isArray(x)&&(x=x.map(_=>_)),k(e,["responseTokensDetails"],x)}const m=A(t,["toolUsePromptTokensDetails"]);if(m!=null){let x=m;Array.isArray(x)&&(x=x.map(_=>_)),k(e,["toolUsePromptTokensDetails"],x)}const v=A(t,["trafficType"]);return v!=null&&k(e,["trafficType"],v),e}function lxe(t){const e={},n=A(t,["type"]);return n!=null&&k(e,["voiceActivityType"],n),e}function cxe(t){const e={},n=A(t,["data"]);if(n!=null&&k(e,["data"],n),A(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=A(t,["mimeType"]);return r!=null&&k(e,["mimeType"],r),e}function uxe(t){const e={},n=A(t,["content"]);n!=null&&k(e,["content"],n);const r=A(t,["citationMetadata"]);r!=null&&k(e,["citationMetadata"],dxe(r));const i=A(t,["tokenCount"]);i!=null&&k(e,["tokenCount"],i);const a=A(t,["finishReason"]);a!=null&&k(e,["finishReason"],a);const s=A(t,["avgLogprobs"]);s!=null&&k(e,["avgLogprobs"],s);const o=A(t,["groundingMetadata"]);o!=null&&k(e,["groundingMetadata"],o);const c=A(t,["index"]);c!=null&&k(e,["index"],c);const u=A(t,["logprobsResult"]);u!=null&&k(e,["logprobsResult"],u);const h=A(t,["safetyRatings"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(x=>x)),k(e,["safetyRatings"],v)}const m=A(t,["urlContextMetadata"]);return m!=null&&k(e,["urlContextMetadata"],m),e}function dxe(t){const e={},n=A(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),k(e,["citations"],r)}return e}function fxe(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["_url","model"],Jn(t,r));const i=A(e,["contents"]);if(i!=null){let a=Ko(i);Array.isArray(a)&&(a=a.map(s=>s)),k(n,["contents"],a)}return n}function hxe(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),k(e,["tokensInfo"],i)}return e}function pxe(t){const e={},n=A(t,["values"]);n!=null&&k(e,["values"],n);const r=A(t,["statistics"]);return r!=null&&k(e,["statistics"],mxe(r)),e}function mxe(t){const e={},n=A(t,["truncated"]);n!=null&&k(e,["truncated"],n);const r=A(t,["token_count"]);return r!=null&&k(e,["tokenCount"],r),e}function rA(t){const e={},n=A(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Tbe(a))),k(e,["parts"],i)}const r=A(t,["role"]);return r!=null&&k(e,["role"],r),e}function gxe(t){const e={},n=A(t,["controlType"]);n!=null&&k(e,["controlType"],n);const r=A(t,["enableControlImageComputation"]);return r!=null&&k(e,["computeControl"],r),e}function vxe(t){const e={};if(A(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(A(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(A(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function yxe(t,e){const n={},r=A(t,["systemInstruction"]);e!==void 0&&r!=null&&k(e,["systemInstruction"],Ha(r));const i=A(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>r7(o))),k(e,["tools"],s)}const a=A(t,["generationConfig"]);return e!==void 0&&a!=null&&k(e,["generationConfig"],cbe(a)),n}function xxe(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["_url","model"],Jn(t,r));const i=A(e,["contents"]);if(i!=null){let s=Ko(i);Array.isArray(s)&&(s=s.map(o=>rA(o))),k(n,["contents"],s)}const a=A(e,["config"]);return a!=null&&vxe(a),n}function bxe(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["_url","model"],Jn(t,r));const i=A(e,["contents"]);if(i!=null){let s=Ko(i);Array.isArray(s)&&(s=s.map(o=>o)),k(n,["contents"],s)}const a=A(e,["config"]);return a!=null&&yxe(a,n),n}function _xe(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["totalTokens"]);r!=null&&k(e,["totalTokens"],r);const i=A(t,["cachedContentTokenCount"]);return i!=null&&k(e,["cachedContentTokenCount"],i),e}function wxe(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["totalTokens"]);return r!=null&&k(e,["totalTokens"],r),e}function Sxe(t,e){const n={},r=A(e,["model"]);return r!=null&&k(n,["_url","name"],Jn(t,r)),n}function Txe(t,e){const n={},r=A(e,["model"]);return r!=null&&k(n,["_url","name"],Jn(t,r)),n}function Exe(t){const e={},n=A(t,["sdkHttpResponse"]);return n!=null&&k(e,["sdkHttpResponse"],n),e}function Axe(t){const e={},n=A(t,["sdkHttpResponse"]);return n!=null&&k(e,["sdkHttpResponse"],n),e}function kxe(t,e){const n={},r=A(t,["outputGcsUri"]);e!==void 0&&r!=null&&k(e,["parameters","storageUri"],r);const i=A(t,["negativePrompt"]);e!==void 0&&i!=null&&k(e,["parameters","negativePrompt"],i);const a=A(t,["numberOfImages"]);e!==void 0&&a!=null&&k(e,["parameters","sampleCount"],a);const s=A(t,["aspectRatio"]);e!==void 0&&s!=null&&k(e,["parameters","aspectRatio"],s);const o=A(t,["guidanceScale"]);e!==void 0&&o!=null&&k(e,["parameters","guidanceScale"],o);const c=A(t,["seed"]);e!==void 0&&c!=null&&k(e,["parameters","seed"],c);const u=A(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&k(e,["parameters","safetySetting"],u);const h=A(t,["personGeneration"]);e!==void 0&&h!=null&&k(e,["parameters","personGeneration"],h);const m=A(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&k(e,["parameters","includeSafetyAttributes"],m);const v=A(t,["includeRaiReason"]);e!==void 0&&v!=null&&k(e,["parameters","includeRaiReason"],v);const x=A(t,["language"]);e!==void 0&&x!=null&&k(e,["parameters","language"],x);const _=A(t,["outputMimeType"]);e!==void 0&&_!=null&&k(e,["parameters","outputOptions","mimeType"],_);const T=A(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&k(e,["parameters","outputOptions","compressionQuality"],T);const w=A(t,["addWatermark"]);e!==void 0&&w!=null&&k(e,["parameters","addWatermark"],w);const E=A(t,["labels"]);e!==void 0&&E!=null&&k(e,["labels"],E);const N=A(t,["editMode"]);e!==void 0&&N!=null&&k(e,["parameters","editMode"],N);const C=A(t,["baseSteps"]);return e!==void 0&&C!=null&&k(e,["parameters","editConfig","baseSteps"],C),n}function Mxe(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["_url","model"],Jn(t,r));const i=A(e,["prompt"]);i!=null&&k(n,["instances[0]","prompt"],i);const a=A(e,["referenceImages"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>Cbe(c))),k(n,["instances[0]","referenceImages"],o)}const s=A(e,["config"]);return s!=null&&kxe(s,n),n}function Nxe(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>iA(a))),k(e,["generatedImages"],i)}return e}function Cxe(t,e){const n={},r=A(t,["taskType"]);e!==void 0&&r!=null&&k(e,["requests[]","taskType"],r);const i=A(t,["title"]);e!==void 0&&i!=null&&k(e,["requests[]","title"],i);const a=A(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&k(e,["requests[]","outputDimensionality"],a),A(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(A(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Rxe(t,e){const n={},r=A(t,["taskType"]);e!==void 0&&r!=null&&k(e,["instances[]","task_type"],r);const i=A(t,["title"]);e!==void 0&&i!=null&&k(e,["instances[]","title"],i);const a=A(t,["outputDimensionality"]);e!==void 0&&a!=null&&k(e,["parameters","outputDimensionality"],a);const s=A(t,["mimeType"]);e!==void 0&&s!=null&&k(e,["instances[]","mimeType"],s);const o=A(t,["autoTruncate"]);return e!==void 0&&o!=null&&k(e,["parameters","autoTruncate"],o),n}function Ixe(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["_url","model"],Jn(t,r));const i=A(e,["contents"]);if(i!=null){let o=Dj(t,i);Array.isArray(o)&&(o=o.map(c=>c)),k(n,["requests[]","content"],o)}const a=A(e,["config"]);a!=null&&Cxe(a,n);const s=A(e,["model"]);return s!==void 0&&k(n,["requests[]","model"],Jn(t,s)),n}function Pxe(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["_url","model"],Jn(t,r));const i=A(e,["contents"]);if(i!=null){let s=Dj(t,i);Array.isArray(s)&&(s=s.map(o=>o)),k(n,["instances[]","content"],s)}const a=A(e,["config"]);return a!=null&&Rxe(a,n),n}function Oxe(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>s)),k(e,["embeddings"],a)}const i=A(t,["metadata"]);return i!=null&&k(e,["metadata"],i),e}function jxe(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>pxe(s))),k(e,["embeddings"],a)}const i=A(t,["metadata"]);return i!=null&&k(e,["metadata"],i),e}function Dxe(t){const e={},n=A(t,["endpoint"]);n!=null&&k(e,["name"],n);const r=A(t,["deployedModelId"]);return r!=null&&k(e,["deployedModelId"],r),e}function Lxe(t){const e={};if(A(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=A(t,["fileUri"]);n!=null&&k(e,["fileUri"],n);const r=A(t,["mimeType"]);return r!=null&&k(e,["mimeType"],r),e}function Uxe(t){const e={},n=A(t,["id"]);n!=null&&k(e,["id"],n);const r=A(t,["args"]);r!=null&&k(e,["args"],r);const i=A(t,["name"]);if(i!=null&&k(e,["name"],i),A(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(A(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function zxe(t){const e={},n=A(t,["allowedFunctionNames"]);n!=null&&k(e,["allowedFunctionNames"],n);const r=A(t,["mode"]);if(r!=null&&k(e,["mode"],r),A(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Bxe(t){const e={},n=A(t,["description"]);n!=null&&k(e,["description"],n);const r=A(t,["name"]);r!=null&&k(e,["name"],r);const i=A(t,["parameters"]);i!=null&&k(e,["parameters"],i);const a=A(t,["parametersJsonSchema"]);a!=null&&k(e,["parametersJsonSchema"],a);const s=A(t,["response"]);s!=null&&k(e,["response"],s);const o=A(t,["responseJsonSchema"]);if(o!=null&&k(e,["responseJsonSchema"],o),A(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Fxe(t,e,n){const r={},i=A(e,["systemInstruction"]);n!==void 0&&i!=null&&k(n,["systemInstruction"],rA(Ha(i)));const a=A(e,["temperature"]);a!=null&&k(r,["temperature"],a);const s=A(e,["topP"]);s!=null&&k(r,["topP"],s);const o=A(e,["topK"]);o!=null&&k(r,["topK"],o);const c=A(e,["candidateCount"]);c!=null&&k(r,["candidateCount"],c);const u=A(e,["maxOutputTokens"]);u!=null&&k(r,["maxOutputTokens"],u);const h=A(e,["stopSequences"]);h!=null&&k(r,["stopSequences"],h);const m=A(e,["responseLogprobs"]);m!=null&&k(r,["responseLogprobs"],m);const v=A(e,["logprobs"]);v!=null&&k(r,["logprobs"],v);const x=A(e,["presencePenalty"]);x!=null&&k(r,["presencePenalty"],x);const _=A(e,["frequencyPenalty"]);_!=null&&k(r,["frequencyPenalty"],_);const T=A(e,["seed"]);T!=null&&k(r,["seed"],T);const w=A(e,["responseMimeType"]);w!=null&&k(r,["responseMimeType"],w);const E=A(e,["responseSchema"]);E!=null&&k(r,["responseSchema"],Lj(E));const N=A(e,["responseJsonSchema"]);if(N!=null&&k(r,["responseJsonSchema"],N),A(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(A(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=A(e,["safetySettings"]);if(n!==void 0&&C!=null){let $=C;Array.isArray($)&&($=$.map(ee=>Rbe(ee))),k(n,["safetySettings"],$)}const P=A(e,["tools"]);if(n!==void 0&&P!=null){let $=Iv(P);Array.isArray($)&&($=$.map(ee=>Ube(Rv(ee)))),k(n,["tools"],$)}const I=A(e,["toolConfig"]);if(n!==void 0&&I!=null&&k(n,["toolConfig"],Lbe(I)),A(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const j=A(e,["cachedContent"]);n!==void 0&&j!=null&&k(n,["cachedContent"],id(t,j));const O=A(e,["responseModalities"]);O!=null&&k(r,["responseModalities"],O);const F=A(e,["mediaResolution"]);F!=null&&k(r,["mediaResolution"],F);const L=A(e,["speechConfig"]);if(L!=null&&k(r,["speechConfig"],Uj(L)),A(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const z=A(e,["thinkingConfig"]);z!=null&&k(r,["thinkingConfig"],z);const V=A(e,["imageConfig"]);V!=null&&k(r,["imageConfig"],pbe(V));const G=A(e,["enableEnhancedCivicAnswers"]);if(G!=null&&k(r,["enableEnhancedCivicAnswers"],G),A(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function Vxe(t,e,n){const r={},i=A(e,["systemInstruction"]);n!==void 0&&i!=null&&k(n,["systemInstruction"],Ha(i));const a=A(e,["temperature"]);a!=null&&k(r,["temperature"],a);const s=A(e,["topP"]);s!=null&&k(r,["topP"],s);const o=A(e,["topK"]);o!=null&&k(r,["topK"],o);const c=A(e,["candidateCount"]);c!=null&&k(r,["candidateCount"],c);const u=A(e,["maxOutputTokens"]);u!=null&&k(r,["maxOutputTokens"],u);const h=A(e,["stopSequences"]);h!=null&&k(r,["stopSequences"],h);const m=A(e,["responseLogprobs"]);m!=null&&k(r,["responseLogprobs"],m);const v=A(e,["logprobs"]);v!=null&&k(r,["logprobs"],v);const x=A(e,["presencePenalty"]);x!=null&&k(r,["presencePenalty"],x);const _=A(e,["frequencyPenalty"]);_!=null&&k(r,["frequencyPenalty"],_);const T=A(e,["seed"]);T!=null&&k(r,["seed"],T);const w=A(e,["responseMimeType"]);w!=null&&k(r,["responseMimeType"],w);const E=A(e,["responseSchema"]);E!=null&&k(r,["responseSchema"],Lj(E));const N=A(e,["responseJsonSchema"]);N!=null&&k(r,["responseJsonSchema"],N);const C=A(e,["routingConfig"]);C!=null&&k(r,["routingConfig"],C);const P=A(e,["modelSelectionConfig"]);P!=null&&k(r,["modelConfig"],P);const I=A(e,["safetySettings"]);if(n!==void 0&&I!=null){let X=I;Array.isArray(X)&&(X=X.map(re=>re)),k(n,["safetySettings"],X)}const j=A(e,["tools"]);if(n!==void 0&&j!=null){let X=Iv(j);Array.isArray(X)&&(X=X.map(re=>r7(Rv(re)))),k(n,["tools"],X)}const O=A(e,["toolConfig"]);n!==void 0&&O!=null&&k(n,["toolConfig"],O);const F=A(e,["labels"]);n!==void 0&&F!=null&&k(n,["labels"],F);const L=A(e,["cachedContent"]);n!==void 0&&L!=null&&k(n,["cachedContent"],id(t,L));const z=A(e,["responseModalities"]);z!=null&&k(r,["responseModalities"],z);const V=A(e,["mediaResolution"]);V!=null&&k(r,["mediaResolution"],V);const G=A(e,["speechConfig"]);G!=null&&k(r,["speechConfig"],Uj(G));const $=A(e,["audioTimestamp"]);$!=null&&k(r,["audioTimestamp"],$);const ee=A(e,["thinkingConfig"]);ee!=null&&k(r,["thinkingConfig"],ee);const te=A(e,["imageConfig"]);if(te!=null&&k(r,["imageConfig"],mbe(te)),A(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const K=A(e,["modelArmorConfig"]);return n!==void 0&&K!=null&&k(n,["modelArmorConfig"],K),r}function _8(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["_url","model"],Jn(t,r));const i=A(e,["contents"]);if(i!=null){let s=Ko(i);Array.isArray(s)&&(s=s.map(o=>rA(o))),k(n,["contents"],s)}const a=A(e,["config"]);return a!=null&&k(n,["generationConfig"],Fxe(t,a,n)),n}function w8(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["_url","model"],Jn(t,r));const i=A(e,["contents"]);if(i!=null){let s=Ko(i);Array.isArray(s)&&(s=s.map(o=>o)),k(n,["contents"],s)}const a=A(e,["config"]);return a!=null&&k(n,["generationConfig"],Vxe(t,a,n)),n}function S8(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>uxe(u))),k(e,["candidates"],c)}const i=A(t,["modelVersion"]);i!=null&&k(e,["modelVersion"],i);const a=A(t,["promptFeedback"]);a!=null&&k(e,["promptFeedback"],a);const s=A(t,["responseId"]);s!=null&&k(e,["responseId"],s);const o=A(t,["usageMetadata"]);return o!=null&&k(e,["usageMetadata"],o),e}function T8(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),k(e,["candidates"],u)}const i=A(t,["createTime"]);i!=null&&k(e,["createTime"],i);const a=A(t,["modelVersion"]);a!=null&&k(e,["modelVersion"],a);const s=A(t,["promptFeedback"]);s!=null&&k(e,["promptFeedback"],s);const o=A(t,["responseId"]);o!=null&&k(e,["responseId"],o);const c=A(t,["usageMetadata"]);return c!=null&&k(e,["usageMetadata"],c),e}function Hxe(t,e){const n={};if(A(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(A(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=A(t,["numberOfImages"]);e!==void 0&&r!=null&&k(e,["parameters","sampleCount"],r);const i=A(t,["aspectRatio"]);e!==void 0&&i!=null&&k(e,["parameters","aspectRatio"],i);const a=A(t,["guidanceScale"]);if(e!==void 0&&a!=null&&k(e,["parameters","guidanceScale"],a),A(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=A(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&k(e,["parameters","safetySetting"],s);const o=A(t,["personGeneration"]);e!==void 0&&o!=null&&k(e,["parameters","personGeneration"],o);const c=A(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&k(e,["parameters","includeSafetyAttributes"],c);const u=A(t,["includeRaiReason"]);e!==void 0&&u!=null&&k(e,["parameters","includeRaiReason"],u);const h=A(t,["language"]);e!==void 0&&h!=null&&k(e,["parameters","language"],h);const m=A(t,["outputMimeType"]);e!==void 0&&m!=null&&k(e,["parameters","outputOptions","mimeType"],m);const v=A(t,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&k(e,["parameters","outputOptions","compressionQuality"],v),A(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(A(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=A(t,["imageSize"]);if(e!==void 0&&x!=null&&k(e,["parameters","sampleImageSize"],x),A(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Gxe(t,e){const n={},r=A(t,["outputGcsUri"]);e!==void 0&&r!=null&&k(e,["parameters","storageUri"],r);const i=A(t,["negativePrompt"]);e!==void 0&&i!=null&&k(e,["parameters","negativePrompt"],i);const a=A(t,["numberOfImages"]);e!==void 0&&a!=null&&k(e,["parameters","sampleCount"],a);const s=A(t,["aspectRatio"]);e!==void 0&&s!=null&&k(e,["parameters","aspectRatio"],s);const o=A(t,["guidanceScale"]);e!==void 0&&o!=null&&k(e,["parameters","guidanceScale"],o);const c=A(t,["seed"]);e!==void 0&&c!=null&&k(e,["parameters","seed"],c);const u=A(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&k(e,["parameters","safetySetting"],u);const h=A(t,["personGeneration"]);e!==void 0&&h!=null&&k(e,["parameters","personGeneration"],h);const m=A(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&k(e,["parameters","includeSafetyAttributes"],m);const v=A(t,["includeRaiReason"]);e!==void 0&&v!=null&&k(e,["parameters","includeRaiReason"],v);const x=A(t,["language"]);e!==void 0&&x!=null&&k(e,["parameters","language"],x);const _=A(t,["outputMimeType"]);e!==void 0&&_!=null&&k(e,["parameters","outputOptions","mimeType"],_);const T=A(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&k(e,["parameters","outputOptions","compressionQuality"],T);const w=A(t,["addWatermark"]);e!==void 0&&w!=null&&k(e,["parameters","addWatermark"],w);const E=A(t,["labels"]);e!==void 0&&E!=null&&k(e,["labels"],E);const N=A(t,["imageSize"]);e!==void 0&&N!=null&&k(e,["parameters","sampleImageSize"],N);const C=A(t,["enhancePrompt"]);return e!==void 0&&C!=null&&k(e,["parameters","enhancePrompt"],C),n}function qxe(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["_url","model"],Jn(t,r));const i=A(e,["prompt"]);i!=null&&k(n,["instances[0]","prompt"],i);const a=A(e,["config"]);return a!=null&&Hxe(a,n),n}function $xe(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["_url","model"],Jn(t,r));const i=A(e,["prompt"]);i!=null&&k(n,["instances[0]","prompt"],i);const a=A(e,["config"]);return a!=null&&Gxe(a,n),n}function Wxe(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>abe(s))),k(e,["generatedImages"],a)}const i=A(t,["positivePromptSafetyAttributes"]);return i!=null&&k(e,["positivePromptSafetyAttributes"],t7(i)),e}function Kxe(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>iA(s))),k(e,["generatedImages"],a)}const i=A(t,["positivePromptSafetyAttributes"]);return i!=null&&k(e,["positivePromptSafetyAttributes"],n7(i)),e}function Xxe(t,e){const n={},r=A(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&k(e,["parameters","sampleCount"],r),A(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(A(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=A(t,["durationSeconds"]);if(e!==void 0&&i!=null&&k(e,["parameters","durationSeconds"],i),A(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=A(t,["aspectRatio"]);e!==void 0&&a!=null&&k(e,["parameters","aspectRatio"],a);const s=A(t,["resolution"]);e!==void 0&&s!=null&&k(e,["parameters","resolution"],s);const o=A(t,["personGeneration"]);if(e!==void 0&&o!=null&&k(e,["parameters","personGeneration"],o),A(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=A(t,["negativePrompt"]);e!==void 0&&c!=null&&k(e,["parameters","negativePrompt"],c);const u=A(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&k(e,["parameters","enhancePrompt"],u),A(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=A(t,["lastFrame"]);e!==void 0&&h!=null&&k(e,["instances[0]","lastFrame"],aA(h));const m=A(t,["referenceImages"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(x=>Jbe(x))),k(e,["instances[0]","referenceImages"],v)}if(A(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(A(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Yxe(t,e){const n={},r=A(t,["numberOfVideos"]);e!==void 0&&r!=null&&k(e,["parameters","sampleCount"],r);const i=A(t,["outputGcsUri"]);e!==void 0&&i!=null&&k(e,["parameters","storageUri"],i);const a=A(t,["fps"]);e!==void 0&&a!=null&&k(e,["parameters","fps"],a);const s=A(t,["durationSeconds"]);e!==void 0&&s!=null&&k(e,["parameters","durationSeconds"],s);const o=A(t,["seed"]);e!==void 0&&o!=null&&k(e,["parameters","seed"],o);const c=A(t,["aspectRatio"]);e!==void 0&&c!=null&&k(e,["parameters","aspectRatio"],c);const u=A(t,["resolution"]);e!==void 0&&u!=null&&k(e,["parameters","resolution"],u);const h=A(t,["personGeneration"]);e!==void 0&&h!=null&&k(e,["parameters","personGeneration"],h);const m=A(t,["pubsubTopic"]);e!==void 0&&m!=null&&k(e,["parameters","pubsubTopic"],m);const v=A(t,["negativePrompt"]);e!==void 0&&v!=null&&k(e,["parameters","negativePrompt"],v);const x=A(t,["enhancePrompt"]);e!==void 0&&x!=null&&k(e,["parameters","enhancePrompt"],x);const _=A(t,["generateAudio"]);e!==void 0&&_!=null&&k(e,["parameters","generateAudio"],_);const T=A(t,["lastFrame"]);e!==void 0&&T!=null&&k(e,["instances[0]","lastFrame"],Hl(T));const w=A(t,["referenceImages"]);if(e!==void 0&&w!=null){let C=w;Array.isArray(C)&&(C=C.map(P=>Zbe(P))),k(e,["instances[0]","referenceImages"],C)}const E=A(t,["mask"]);e!==void 0&&E!=null&&k(e,["instances[0]","mask"],Ybe(E));const N=A(t,["compressionQuality"]);return e!==void 0&&N!=null&&k(e,["parameters","compressionQuality"],N),n}function Jxe(t){const e={},n=A(t,["name"]);n!=null&&k(e,["name"],n);const r=A(t,["metadata"]);r!=null&&k(e,["metadata"],r);const i=A(t,["done"]);i!=null&&k(e,["done"],i);const a=A(t,["error"]);a!=null&&k(e,["error"],a);const s=A(t,["response","generateVideoResponse"]);return s!=null&&k(e,["response"],tbe(s)),e}function Zxe(t){const e={},n=A(t,["name"]);n!=null&&k(e,["name"],n);const r=A(t,["metadata"]);r!=null&&k(e,["metadata"],r);const i=A(t,["done"]);i!=null&&k(e,["done"],i);const a=A(t,["error"]);a!=null&&k(e,["error"],a);const s=A(t,["response"]);return s!=null&&k(e,["response"],nbe(s)),e}function Qxe(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["_url","model"],Jn(t,r));const i=A(e,["prompt"]);i!=null&&k(n,["instances[0]","prompt"],i);const a=A(e,["image"]);a!=null&&k(n,["instances[0]","image"],aA(a));const s=A(e,["video"]);s!=null&&k(n,["instances[0]","video"],i7(s));const o=A(e,["source"]);o!=null&&rbe(o,n);const c=A(e,["config"]);return c!=null&&Xxe(c,n),n}function ebe(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["_url","model"],Jn(t,r));const i=A(e,["prompt"]);i!=null&&k(n,["instances[0]","prompt"],i);const a=A(e,["image"]);a!=null&&k(n,["instances[0]","image"],Hl(a));const s=A(e,["video"]);s!=null&&k(n,["instances[0]","video"],a7(s));const o=A(e,["source"]);o!=null&&ibe(o,n);const c=A(e,["config"]);return c!=null&&Yxe(c,n),n}function tbe(t){const e={},n=A(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>obe(s))),k(e,["generatedVideos"],a)}const r=A(t,["raiMediaFilteredCount"]);r!=null&&k(e,["raiMediaFilteredCount"],r);const i=A(t,["raiMediaFilteredReasons"]);return i!=null&&k(e,["raiMediaFilteredReasons"],i),e}function nbe(t){const e={},n=A(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>lbe(s))),k(e,["generatedVideos"],a)}const r=A(t,["raiMediaFilteredCount"]);r!=null&&k(e,["raiMediaFilteredCount"],r);const i=A(t,["raiMediaFilteredReasons"]);return i!=null&&k(e,["raiMediaFilteredReasons"],i),e}function rbe(t,e){const n={},r=A(t,["prompt"]);e!==void 0&&r!=null&&k(e,["instances[0]","prompt"],r);const i=A(t,["image"]);e!==void 0&&i!=null&&k(e,["instances[0]","image"],aA(i));const a=A(t,["video"]);return e!==void 0&&a!=null&&k(e,["instances[0]","video"],i7(a)),n}function ibe(t,e){const n={},r=A(t,["prompt"]);e!==void 0&&r!=null&&k(e,["instances[0]","prompt"],r);const i=A(t,["image"]);e!==void 0&&i!=null&&k(e,["instances[0]","image"],Hl(i));const a=A(t,["video"]);return e!==void 0&&a!=null&&k(e,["instances[0]","video"],a7(a)),n}function abe(t){const e={},n=A(t,["_self"]);n!=null&&k(e,["image"],gbe(n));const r=A(t,["raiFilteredReason"]);r!=null&&k(e,["raiFilteredReason"],r);const i=A(t,["_self"]);return i!=null&&k(e,["safetyAttributes"],t7(i)),e}function iA(t){const e={},n=A(t,["_self"]);n!=null&&k(e,["image"],e7(n));const r=A(t,["raiFilteredReason"]);r!=null&&k(e,["raiFilteredReason"],r);const i=A(t,["_self"]);i!=null&&k(e,["safetyAttributes"],n7(i));const a=A(t,["prompt"]);return a!=null&&k(e,["enhancedPrompt"],a),e}function sbe(t){const e={},n=A(t,["_self"]);n!=null&&k(e,["mask"],e7(n));const r=A(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),k(e,["labels"],i)}return e}function obe(t){const e={},n=A(t,["video"]);return n!=null&&k(e,["video"],Kbe(n)),e}function lbe(t){const e={},n=A(t,["_self"]);return n!=null&&k(e,["video"],Xbe(n)),e}function cbe(t){const e={},n=A(t,["modelSelectionConfig"]);n!=null&&k(e,["modelConfig"],n);const r=A(t,["responseJsonSchema"]);r!=null&&k(e,["responseJsonSchema"],r);const i=A(t,["audioTimestamp"]);i!=null&&k(e,["audioTimestamp"],i);const a=A(t,["candidateCount"]);a!=null&&k(e,["candidateCount"],a);const s=A(t,["enableAffectiveDialog"]);s!=null&&k(e,["enableAffectiveDialog"],s);const o=A(t,["frequencyPenalty"]);o!=null&&k(e,["frequencyPenalty"],o);const c=A(t,["logprobs"]);c!=null&&k(e,["logprobs"],c);const u=A(t,["maxOutputTokens"]);u!=null&&k(e,["maxOutputTokens"],u);const h=A(t,["mediaResolution"]);h!=null&&k(e,["mediaResolution"],h);const m=A(t,["presencePenalty"]);m!=null&&k(e,["presencePenalty"],m);const v=A(t,["responseLogprobs"]);v!=null&&k(e,["responseLogprobs"],v);const x=A(t,["responseMimeType"]);x!=null&&k(e,["responseMimeType"],x);const _=A(t,["responseModalities"]);_!=null&&k(e,["responseModalities"],_);const T=A(t,["responseSchema"]);T!=null&&k(e,["responseSchema"],T);const w=A(t,["routingConfig"]);w!=null&&k(e,["routingConfig"],w);const E=A(t,["seed"]);E!=null&&k(e,["seed"],E);const N=A(t,["speechConfig"]);N!=null&&k(e,["speechConfig"],N);const C=A(t,["stopSequences"]);C!=null&&k(e,["stopSequences"],C);const P=A(t,["temperature"]);P!=null&&k(e,["temperature"],P);const I=A(t,["thinkingConfig"]);I!=null&&k(e,["thinkingConfig"],I);const j=A(t,["topK"]);j!=null&&k(e,["topK"],j);const O=A(t,["topP"]);if(O!=null&&k(e,["topP"],O),A(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function ube(t,e){const n={},r=A(e,["model"]);return r!=null&&k(n,["_url","name"],Jn(t,r)),n}function dbe(t,e){const n={},r=A(e,["model"]);return r!=null&&k(n,["_url","name"],Jn(t,r)),n}function fbe(t){const e={};if(A(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=A(t,["enableWidget"]);return n!=null&&k(e,["enableWidget"],n),e}function hbe(t){const e={};if(A(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(A(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=A(t,["timeRangeFilter"]);return n!=null&&k(e,["timeRangeFilter"],n),e}function pbe(t){const e={},n=A(t,["aspectRatio"]);n!=null&&k(e,["aspectRatio"],n);const r=A(t,["imageSize"]);if(r!=null&&k(e,["imageSize"],r),A(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(A(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(A(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function mbe(t){const e={},n=A(t,["aspectRatio"]);n!=null&&k(e,["aspectRatio"],n);const r=A(t,["imageSize"]);r!=null&&k(e,["imageSize"],r);const i=A(t,["personGeneration"]);i!=null&&k(e,["personGeneration"],i);const a=A(t,["outputMimeType"]);a!=null&&k(e,["imageOutputOptions","mimeType"],a);const s=A(t,["outputCompressionQuality"]);return s!=null&&k(e,["imageOutputOptions","compressionQuality"],s),e}function gbe(t){const e={},n=A(t,["bytesBase64Encoded"]);n!=null&&k(e,["imageBytes"],Mf(n));const r=A(t,["mimeType"]);return r!=null&&k(e,["mimeType"],r),e}function e7(t){const e={},n=A(t,["gcsUri"]);n!=null&&k(e,["gcsUri"],n);const r=A(t,["bytesBase64Encoded"]);r!=null&&k(e,["imageBytes"],Mf(r));const i=A(t,["mimeType"]);return i!=null&&k(e,["mimeType"],i),e}function aA(t){const e={};if(A(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=A(t,["imageBytes"]);n!=null&&k(e,["bytesBase64Encoded"],Mf(n));const r=A(t,["mimeType"]);return r!=null&&k(e,["mimeType"],r),e}function Hl(t){const e={},n=A(t,["gcsUri"]);n!=null&&k(e,["gcsUri"],n);const r=A(t,["imageBytes"]);r!=null&&k(e,["bytesBase64Encoded"],Mf(r));const i=A(t,["mimeType"]);return i!=null&&k(e,["mimeType"],i),e}function vbe(t,e,n){const r={},i=A(e,["pageSize"]);n!==void 0&&i!=null&&k(n,["_query","pageSize"],i);const a=A(e,["pageToken"]);n!==void 0&&a!=null&&k(n,["_query","pageToken"],a);const s=A(e,["filter"]);n!==void 0&&s!=null&&k(n,["_query","filter"],s);const o=A(e,["queryBase"]);return n!==void 0&&o!=null&&k(n,["_url","models_url"],W9(t,o)),r}function ybe(t,e,n){const r={},i=A(e,["pageSize"]);n!==void 0&&i!=null&&k(n,["_query","pageSize"],i);const a=A(e,["pageToken"]);n!==void 0&&a!=null&&k(n,["_query","pageToken"],a);const s=A(e,["filter"]);n!==void 0&&s!=null&&k(n,["_query","filter"],s);const o=A(e,["queryBase"]);return n!==void 0&&o!=null&&k(n,["_url","models_url"],W9(t,o)),r}function xbe(t,e){const n={},r=A(e,["config"]);return r!=null&&vbe(t,r,n),n}function bbe(t,e){const n={},r=A(e,["config"]);return r!=null&&ybe(t,r,n),n}function _be(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["nextPageToken"]);r!=null&&k(e,["nextPageToken"],r);const i=A(t,["_self"]);if(i!=null){let a=K9(i);Array.isArray(a)&&(a=a.map(s=>B3(s))),k(e,["models"],a)}return e}function wbe(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["nextPageToken"]);r!=null&&k(e,["nextPageToken"],r);const i=A(t,["_self"]);if(i!=null){let a=K9(i);Array.isArray(a)&&(a=a.map(s=>F3(s))),k(e,["models"],a)}return e}function Sbe(t){const e={},n=A(t,["maskMode"]);n!=null&&k(e,["maskMode"],n);const r=A(t,["segmentationClasses"]);r!=null&&k(e,["maskClasses"],r);const i=A(t,["maskDilation"]);return i!=null&&k(e,["dilation"],i),e}function B3(t){const e={},n=A(t,["name"]);n!=null&&k(e,["name"],n);const r=A(t,["displayName"]);r!=null&&k(e,["displayName"],r);const i=A(t,["description"]);i!=null&&k(e,["description"],i);const a=A(t,["version"]);a!=null&&k(e,["version"],a);const s=A(t,["_self"]);s!=null&&k(e,["tunedModelInfo"],zbe(s));const o=A(t,["inputTokenLimit"]);o!=null&&k(e,["inputTokenLimit"],o);const c=A(t,["outputTokenLimit"]);c!=null&&k(e,["outputTokenLimit"],c);const u=A(t,["supportedGenerationMethods"]);u!=null&&k(e,["supportedActions"],u);const h=A(t,["temperature"]);h!=null&&k(e,["temperature"],h);const m=A(t,["maxTemperature"]);m!=null&&k(e,["maxTemperature"],m);const v=A(t,["topP"]);v!=null&&k(e,["topP"],v);const x=A(t,["topK"]);x!=null&&k(e,["topK"],x);const _=A(t,["thinking"]);return _!=null&&k(e,["thinking"],_),e}function F3(t){const e={},n=A(t,["name"]);n!=null&&k(e,["name"],n);const r=A(t,["displayName"]);r!=null&&k(e,["displayName"],r);const i=A(t,["description"]);i!=null&&k(e,["description"],i);const a=A(t,["versionId"]);a!=null&&k(e,["version"],a);const s=A(t,["deployedModels"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>Dxe(v))),k(e,["endpoints"],m)}const o=A(t,["labels"]);o!=null&&k(e,["labels"],o);const c=A(t,["_self"]);c!=null&&k(e,["tunedModelInfo"],Bbe(c));const u=A(t,["defaultCheckpointId"]);u!=null&&k(e,["defaultCheckpointId"],u);const h=A(t,["checkpoints"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(v=>v)),k(e,["checkpoints"],m)}return e}function Tbe(t){const e={},n=A(t,["mediaResolution"]);n!=null&&k(e,["mediaResolution"],n);const r=A(t,["codeExecutionResult"]);r!=null&&k(e,["codeExecutionResult"],r);const i=A(t,["executableCode"]);i!=null&&k(e,["executableCode"],i);const a=A(t,["fileData"]);a!=null&&k(e,["fileData"],Lxe(a));const s=A(t,["functionCall"]);s!=null&&k(e,["functionCall"],Uxe(s));const o=A(t,["functionResponse"]);o!=null&&k(e,["functionResponse"],o);const c=A(t,["inlineData"]);c!=null&&k(e,["inlineData"],cxe(c));const u=A(t,["text"]);u!=null&&k(e,["text"],u);const h=A(t,["thought"]);h!=null&&k(e,["thought"],h);const m=A(t,["thoughtSignature"]);m!=null&&k(e,["thoughtSignature"],m);const v=A(t,["videoMetadata"]);return v!=null&&k(e,["videoMetadata"],v),e}function Ebe(t){const e={},n=A(t,["productImage"]);return n!=null&&k(e,["image"],Hl(n)),e}function Abe(t,e){const n={},r=A(t,["numberOfImages"]);e!==void 0&&r!=null&&k(e,["parameters","sampleCount"],r);const i=A(t,["baseSteps"]);e!==void 0&&i!=null&&k(e,["parameters","baseSteps"],i);const a=A(t,["outputGcsUri"]);e!==void 0&&a!=null&&k(e,["parameters","storageUri"],a);const s=A(t,["seed"]);e!==void 0&&s!=null&&k(e,["parameters","seed"],s);const o=A(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&k(e,["parameters","safetySetting"],o);const c=A(t,["personGeneration"]);e!==void 0&&c!=null&&k(e,["parameters","personGeneration"],c);const u=A(t,["addWatermark"]);e!==void 0&&u!=null&&k(e,["parameters","addWatermark"],u);const h=A(t,["outputMimeType"]);e!==void 0&&h!=null&&k(e,["parameters","outputOptions","mimeType"],h);const m=A(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&k(e,["parameters","outputOptions","compressionQuality"],m);const v=A(t,["enhancePrompt"]);e!==void 0&&v!=null&&k(e,["parameters","enhancePrompt"],v);const x=A(t,["labels"]);return e!==void 0&&x!=null&&k(e,["labels"],x),n}function kbe(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["_url","model"],Jn(t,r));const i=A(e,["source"]);i!=null&&Nbe(i,n);const a=A(e,["config"]);return a!=null&&Abe(a,n),n}function Mbe(t){const e={},n=A(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>iA(i))),k(e,["generatedImages"],r)}return e}function Nbe(t,e){const n={},r=A(t,["prompt"]);e!==void 0&&r!=null&&k(e,["instances[0]","prompt"],r);const i=A(t,["personImage"]);e!==void 0&&i!=null&&k(e,["instances[0]","personImage","image"],Hl(i));const a=A(t,["productImages"]);if(e!==void 0&&a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Ebe(o))),k(e,["instances[0]","productImages"],s)}return n}function Cbe(t){const e={},n=A(t,["referenceImage"]);n!=null&&k(e,["referenceImage"],Hl(n));const r=A(t,["referenceId"]);r!=null&&k(e,["referenceId"],r);const i=A(t,["referenceType"]);i!=null&&k(e,["referenceType"],i);const a=A(t,["maskImageConfig"]);a!=null&&k(e,["maskImageConfig"],Sbe(a));const s=A(t,["controlImageConfig"]);s!=null&&k(e,["controlImageConfig"],gxe(s));const o=A(t,["styleImageConfig"]);o!=null&&k(e,["styleImageConfig"],o);const c=A(t,["subjectImageConfig"]);return c!=null&&k(e,["subjectImageConfig"],c),e}function t7(t){const e={},n=A(t,["safetyAttributes","categories"]);n!=null&&k(e,["categories"],n);const r=A(t,["safetyAttributes","scores"]);r!=null&&k(e,["scores"],r);const i=A(t,["contentType"]);return i!=null&&k(e,["contentType"],i),e}function n7(t){const e={},n=A(t,["safetyAttributes","categories"]);n!=null&&k(e,["categories"],n);const r=A(t,["safetyAttributes","scores"]);r!=null&&k(e,["scores"],r);const i=A(t,["contentType"]);return i!=null&&k(e,["contentType"],i),e}function Rbe(t){const e={},n=A(t,["category"]);if(n!=null&&k(e,["category"],n),A(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=A(t,["threshold"]);return r!=null&&k(e,["threshold"],r),e}function Ibe(t){const e={},n=A(t,["image"]);return n!=null&&k(e,["image"],Hl(n)),e}function Pbe(t,e){const n={},r=A(t,["mode"]);e!==void 0&&r!=null&&k(e,["parameters","mode"],r);const i=A(t,["maxPredictions"]);e!==void 0&&i!=null&&k(e,["parameters","maxPredictions"],i);const a=A(t,["confidenceThreshold"]);e!==void 0&&a!=null&&k(e,["parameters","confidenceThreshold"],a);const s=A(t,["maskDilation"]);e!==void 0&&s!=null&&k(e,["parameters","maskDilation"],s);const o=A(t,["binaryColorThreshold"]);e!==void 0&&o!=null&&k(e,["parameters","binaryColorThreshold"],o);const c=A(t,["labels"]);return e!==void 0&&c!=null&&k(e,["labels"],c),n}function Obe(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["_url","model"],Jn(t,r));const i=A(e,["source"]);i!=null&&Dbe(i,n);const a=A(e,["config"]);return a!=null&&Pbe(a,n),n}function jbe(t){const e={},n=A(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>sbe(i))),k(e,["generatedMasks"],r)}return e}function Dbe(t,e){const n={},r=A(t,["prompt"]);e!==void 0&&r!=null&&k(e,["instances[0]","prompt"],r);const i=A(t,["image"]);e!==void 0&&i!=null&&k(e,["instances[0]","image"],Hl(i));const a=A(t,["scribbleImage"]);return e!==void 0&&a!=null&&k(e,["instances[0]","scribble"],Ibe(a)),n}function Lbe(t){const e={},n=A(t,["retrievalConfig"]);n!=null&&k(e,["retrievalConfig"],n);const r=A(t,["functionCallingConfig"]);return r!=null&&k(e,["functionCallingConfig"],zxe(r)),e}function Ube(t){const e={};if(A(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=A(t,["computerUse"]);n!=null&&k(e,["computerUse"],n);const r=A(t,["fileSearch"]);r!=null&&k(e,["fileSearch"],r);const i=A(t,["codeExecution"]);if(i!=null&&k(e,["codeExecution"],i),A(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=A(t,["functionDeclarations"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(m=>m)),k(e,["functionDeclarations"],h)}const s=A(t,["googleMaps"]);s!=null&&k(e,["googleMaps"],fbe(s));const o=A(t,["googleSearch"]);o!=null&&k(e,["googleSearch"],hbe(o));const c=A(t,["googleSearchRetrieval"]);c!=null&&k(e,["googleSearchRetrieval"],c);const u=A(t,["urlContext"]);return u!=null&&k(e,["urlContext"],u),e}function r7(t){const e={},n=A(t,["retrieval"]);n!=null&&k(e,["retrieval"],n);const r=A(t,["computerUse"]);if(r!=null&&k(e,["computerUse"],r),A(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=A(t,["codeExecution"]);i!=null&&k(e,["codeExecution"],i);const a=A(t,["enterpriseWebSearch"]);a!=null&&k(e,["enterpriseWebSearch"],a);const s=A(t,["functionDeclarations"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>Bxe(v))),k(e,["functionDeclarations"],m)}const o=A(t,["googleMaps"]);o!=null&&k(e,["googleMaps"],o);const c=A(t,["googleSearch"]);c!=null&&k(e,["googleSearch"],c);const u=A(t,["googleSearchRetrieval"]);u!=null&&k(e,["googleSearchRetrieval"],u);const h=A(t,["urlContext"]);return h!=null&&k(e,["urlContext"],h),e}function zbe(t){const e={},n=A(t,["baseModel"]);n!=null&&k(e,["baseModel"],n);const r=A(t,["createTime"]);r!=null&&k(e,["createTime"],r);const i=A(t,["updateTime"]);return i!=null&&k(e,["updateTime"],i),e}function Bbe(t){const e={},n=A(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&k(e,["baseModel"],n);const r=A(t,["createTime"]);r!=null&&k(e,["createTime"],r);const i=A(t,["updateTime"]);return i!=null&&k(e,["updateTime"],i),e}function Fbe(t,e){const n={},r=A(t,["displayName"]);e!==void 0&&r!=null&&k(e,["displayName"],r);const i=A(t,["description"]);e!==void 0&&i!=null&&k(e,["description"],i);const a=A(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&k(e,["defaultCheckpointId"],a),n}function Vbe(t,e){const n={},r=A(t,["displayName"]);e!==void 0&&r!=null&&k(e,["displayName"],r);const i=A(t,["description"]);e!==void 0&&i!=null&&k(e,["description"],i);const a=A(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&k(e,["defaultCheckpointId"],a),n}function Hbe(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["_url","name"],Jn(t,r));const i=A(e,["config"]);return i!=null&&Fbe(i,n),n}function Gbe(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["_url","model"],Jn(t,r));const i=A(e,["config"]);return i!=null&&Vbe(i,n),n}function qbe(t,e){const n={},r=A(t,["outputGcsUri"]);e!==void 0&&r!=null&&k(e,["parameters","storageUri"],r);const i=A(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&k(e,["parameters","safetySetting"],i);const a=A(t,["personGeneration"]);e!==void 0&&a!=null&&k(e,["parameters","personGeneration"],a);const s=A(t,["includeRaiReason"]);e!==void 0&&s!=null&&k(e,["parameters","includeRaiReason"],s);const o=A(t,["outputMimeType"]);e!==void 0&&o!=null&&k(e,["parameters","outputOptions","mimeType"],o);const c=A(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&k(e,["parameters","outputOptions","compressionQuality"],c);const u=A(t,["enhanceInputImage"]);e!==void 0&&u!=null&&k(e,["parameters","upscaleConfig","enhanceInputImage"],u);const h=A(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&k(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const m=A(t,["labels"]);e!==void 0&&m!=null&&k(e,["labels"],m);const v=A(t,["numberOfImages"]);e!==void 0&&v!=null&&k(e,["parameters","sampleCount"],v);const x=A(t,["mode"]);return e!==void 0&&x!=null&&k(e,["parameters","mode"],x),n}function $be(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["_url","model"],Jn(t,r));const i=A(e,["image"]);i!=null&&k(n,["instances[0]","image"],Hl(i));const a=A(e,["upscaleFactor"]);a!=null&&k(n,["parameters","upscaleConfig","upscaleFactor"],a);const s=A(e,["config"]);return s!=null&&qbe(s,n),n}function Wbe(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>iA(a))),k(e,["generatedImages"],i)}return e}function Kbe(t){const e={},n=A(t,["uri"]);n!=null&&k(e,["uri"],n);const r=A(t,["encodedVideo"]);r!=null&&k(e,["videoBytes"],Mf(r));const i=A(t,["encoding"]);return i!=null&&k(e,["mimeType"],i),e}function Xbe(t){const e={},n=A(t,["gcsUri"]);n!=null&&k(e,["uri"],n);const r=A(t,["bytesBase64Encoded"]);r!=null&&k(e,["videoBytes"],Mf(r));const i=A(t,["mimeType"]);return i!=null&&k(e,["mimeType"],i),e}function Ybe(t){const e={},n=A(t,["image"]);n!=null&&k(e,["_self"],Hl(n));const r=A(t,["maskMode"]);return r!=null&&k(e,["maskMode"],r),e}function Jbe(t){const e={},n=A(t,["image"]);n!=null&&k(e,["image"],aA(n));const r=A(t,["referenceType"]);return r!=null&&k(e,["referenceType"],r),e}function Zbe(t){const e={},n=A(t,["image"]);n!=null&&k(e,["image"],Hl(n));const r=A(t,["referenceType"]);return r!=null&&k(e,["referenceType"],r),e}function i7(t){const e={},n=A(t,["uri"]);n!=null&&k(e,["uri"],n);const r=A(t,["videoBytes"]);r!=null&&k(e,["encodedVideo"],Mf(r));const i=A(t,["mimeType"]);return i!=null&&k(e,["encoding"],i),e}function a7(t){const e={},n=A(t,["uri"]);n!=null&&k(e,["gcsUri"],n);const r=A(t,["videoBytes"]);r!=null&&k(e,["bytesBase64Encoded"],Mf(r));const i=A(t,["mimeType"]);return i!=null&&k(e,["mimeType"],i),e}function Qbe(t,e){const n={},r=A(t,["displayName"]);return e!==void 0&&r!=null&&k(e,["displayName"],r),n}function e_e(t){const e={},n=A(t,["config"]);return n!=null&&Qbe(n,e),e}function t_e(t,e){const n={},r=A(t,["force"]);return e!==void 0&&r!=null&&k(e,["_query","force"],r),n}function n_e(t){const e={},n=A(t,["name"]);n!=null&&k(e,["_url","name"],n);const r=A(t,["config"]);return r!=null&&t_e(r,e),e}function r_e(t){const e={},n=A(t,["name"]);return n!=null&&k(e,["_url","name"],n),e}function i_e(t,e){const n={},r=A(t,["customMetadata"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>s)),k(e,["customMetadata"],a)}const i=A(t,["chunkingConfig"]);return e!==void 0&&i!=null&&k(e,["chunkingConfig"],i),n}function a_e(t){const e={},n=A(t,["name"]);n!=null&&k(e,["name"],n);const r=A(t,["metadata"]);r!=null&&k(e,["metadata"],r);const i=A(t,["done"]);i!=null&&k(e,["done"],i);const a=A(t,["error"]);a!=null&&k(e,["error"],a);const s=A(t,["response"]);return s!=null&&k(e,["response"],o_e(s)),e}function s_e(t){const e={},n=A(t,["fileSearchStoreName"]);n!=null&&k(e,["_url","file_search_store_name"],n);const r=A(t,["fileName"]);r!=null&&k(e,["fileName"],r);const i=A(t,["config"]);return i!=null&&i_e(i,e),e}function o_e(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["parent"]);r!=null&&k(e,["parent"],r);const i=A(t,["documentName"]);return i!=null&&k(e,["documentName"],i),e}function l_e(t,e){const n={},r=A(t,["pageSize"]);e!==void 0&&r!=null&&k(e,["_query","pageSize"],r);const i=A(t,["pageToken"]);return e!==void 0&&i!=null&&k(e,["_query","pageToken"],i),n}function c_e(t){const e={},n=A(t,["config"]);return n!=null&&l_e(n,e),e}function u_e(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["nextPageToken"]);r!=null&&k(e,["nextPageToken"],r);const i=A(t,["fileSearchStores"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>s)),k(e,["fileSearchStores"],a)}return e}function s7(t,e){const n={},r=A(t,["mimeType"]);e!==void 0&&r!=null&&k(e,["mimeType"],r);const i=A(t,["displayName"]);e!==void 0&&i!=null&&k(e,["displayName"],i);const a=A(t,["customMetadata"]);if(e!==void 0&&a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>c)),k(e,["customMetadata"],o)}const s=A(t,["chunkingConfig"]);return e!==void 0&&s!=null&&k(e,["chunkingConfig"],s),n}function d_e(t){const e={},n=A(t,["fileSearchStoreName"]);n!=null&&k(e,["_url","file_search_store_name"],n);const r=A(t,["config"]);return r!=null&&s7(r,e),e}function f_e(t){const e={},n=A(t,["sdkHttpResponse"]);return n!=null&&k(e,["sdkHttpResponse"],n),e}const h_e="Content-Type",p_e="X-Server-Timeout",m_e="User-Agent",V3="x-goog-api-client",g_e="1.38.0",v_e=`google-genai-sdk/${g_e}`,y_e="v1beta1",x_e="v1beta";class b_e{constructor(e){var n,r,i;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const o=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!o?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:y_e}else{if(!this.clientOptions.apiKey)throw new ob({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:x_e,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===D3.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,n),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,o]of Object.entries(e.queryParams))i.searchParams.append(s,String(o));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,i.toString(),e.abortSignal),this.unaryApiCall(i,a,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,a]of Object.entries(n))typeof a=="object"?r[i]=Object.assign(Object.assign({},r[i]),a):a!==void 0&&(r[i]=a);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,n),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,i.toString(),e.abortSignal),this.streamApiCall(i,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const a=new AbortController,s=a.signal;if(n.timeout&&n?.timeout>0){const o=setTimeout(()=>a.abort(),n.timeout);o&&typeof o.unref=="function"&&o.unref()}i&&i.addEventListener("abort",()=>{a.abort()}),e.signal=s}return n&&n.extraBody!==null&&__e(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await E8(i),new L3(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await E8(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return zl(this,arguments,function*(){var r;const i=(r=e?.body)===null||r===void 0?void 0:r.getReader(),a=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";const o="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:u,value:h}=yield cn(i.read());if(u){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=a.decode(h,{stream:!0});try{const _=JSON.parse(m);if("error"in _){const T=JSON.parse(JSON.stringify(_.error)),w=T.status,E=T.code,N=`got status: ${w}. ${JSON.stringify(_)}`;if(E>=400&&E<600)throw new ob({message:N,status:E})}}catch(_){if(_.name==="ApiError")throw _}s+=m;let v=-1,x=0;for(;;){v=-1,x=0;for(const w of c){const E=s.indexOf(w);E!==-1&&(v===-1||E<v)&&(v=E,x=w.length)}if(v===-1)break;const _=s.substring(0,v);s=s.substring(v+x);const T=_.trim();if(T.startsWith(o)){const w=T.substring(o.length).trim();try{const E=new Response(w,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield cn(new L3(E))}catch(E){throw new Error(`exception parsing stream chunk ${w}. ${E}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=v_e+" "+this.clientOptions.userAgentExtra;return e[m_e]=n,e[V3]=n,e[h_e]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,a]of Object.entries(e.headers))r.append(i,a);e.timeout&&e.timeout>0&&r.append(p_e,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const a=this.clientOptions.uploader,s=await a.stat(e);i.sizeBytes=String(s.size);const o=(r=n?.mimeType)!==null&&r!==void 0?r:s.type;if(o===void 0||o==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=o;const c={file:i},u=this.getFileName(e),h=At("upload/v1beta/files",c._url),m=await this.fetchUploadUrl(h,i.sizeBytes,i.mimeType,u,c,n?.httpOptions);return a.upload(e,m,this)}async uploadFileToFileSearchStore(e,n,r){var i;const a=this.clientOptions.uploader,s=await a.stat(n),o=String(s.size),c=(i=r?.mimeType)!==null&&i!==void 0?i:s.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${e}:uploadToFileSearchStore`,h=this.getFileName(n),m={};r!=null&&s7(r,m);const v=await this.fetchUploadUrl(u,o,c,h,m,r?.httpOptions);return a.uploadToFileSearchStore(n,v,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,a,s){var o;let c={};s?c=s:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const u=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:c});if(!u||!u?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(o=u?.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function E8(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new ob({message:i,status:n}):new Error(i)}}function __e(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(a,s){const o=Object.assign({},a);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const u=s[c],h=o[c];u&&typeof u=="object"&&!Array.isArray(u)&&h&&typeof h=="object"&&!Array.isArray(h)?o[c]=r(h,u):(h&&u&&typeof h!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof h}, New type: ${typeof u}. Overwriting.`),o[c]=u)}return o}const i=r(n,e);t.body=JSON.stringify(i)}const w_e="mcp_used/unknown";let S_e=!1;function o7(t){for(const e of t)if(T_e(e)||typeof e=="object"&&"inputSchema"in e)return!0;return S_e}function l7(t){var e;const n=(e=t[V3])!==null&&e!==void 0?e:"";t[V3]=(n+` ${w_e}`).trimStart()}function T_e(t){return t!==null&&typeof t=="object"&&t instanceof Bj}function E_e(t){return zl(this,arguments,function*(n,r=100){let i,a=0;for(;a<r;){const s=yield cn(n.listTools({cursor:i}));for(const o of s.tools)yield yield cn(o),a++;if(!s.nextCursor)break;i=s.nextCursor}})}class Bj{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Bj(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const a={},s=[];for(const h of this.mcpClients)try{for(var o=!0,c=(n=void 0,Bl(E_e(h))),u;u=await c.next(),e=u.done,!e;o=!0){i=u.value,o=!1;const m=i;s.push(m);const v=m.name;if(a[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);a[v]=h}}catch(m){n={error:m}}finally{try{!o&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),n0e(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,a);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}async function A_e(t,e,n){const r=new Kve;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class k_e{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),s=C_e(this.apiClient.getDefaultHeaders()),o=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${o}`;let u=()=>{};const h=new Promise(C=>{u=C}),m=e.callbacks,v=function(){u({})},x=this.apiClient,_={onopen:v,onmessage:C=>{A_e(x,m.onmessage,C)},onerror:(n=m?.onerror)!==null&&n!==void 0?n:function(C){},onclose:(r=m?.onclose)!==null&&r!==void 0?r:function(C){}},T=this.webSocketFactory.create(c,N_e(s),_);T.connect(),await h;const N={setup:{model:Jn(this.apiClient,e.model)}};return T.send(JSON.stringify(N)),new M_e(T,this.apiClient)}}class M_e{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Qye(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Zye(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Mg.PLAY)}pause(){this.sendPlaybackControl(Mg.PAUSE)}stop(){this.sendPlaybackControl(Mg.STOP)}resetContext(){this.sendPlaybackControl(Mg.RESET_CONTEXT)}close(){this.conn.close()}}function N_e(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function C_e(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}const R_e="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function I_e(t,e,n){const r=new Wve;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const a=JSON.parse(i);if(t.isVertexAI()){const s=nxe(a);Object.assign(r,s)}else Object.assign(r,a);e(r)}class P_e{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new k_e(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,a,s,o;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let h;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&o7(e.config.tools)&&l7(m);const v=L_e(m);if(this.apiClient.isVertexAI()){const L=this.apiClient.getProject(),z=this.apiClient.getLocation(),V=this.apiClient.getApiKey(),G=!!L&&!!z||!!V;this.apiClient.getCustomBaseUrl()&&!G?h=c:(h=`${c}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v,h))}else{const L=this.apiClient.getApiKey();let z="BidiGenerateContent",V="key";L?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),z="BidiGenerateContentConstrained",V="access_token"),h=`${c}/ws/google.ai.generativelanguage.${u}.GenerativeService.${z}?${V}=${L}`}let x=()=>{};const _=new Promise(L=>{x=L}),T=e.callbacks,w=function(){var L;(L=T?.onopen)===null||L===void 0||L.call(T),x({})},E=this.apiClient,N={onopen:w,onmessage:L=>{I_e(E,T.onmessage,L)},onerror:(n=T?.onerror)!==null&&n!==void 0?n:function(L){},onclose:(r=T?.onclose)!==null&&r!==void 0?r:function(L){}},C=this.webSocketFactory.create(h,D_e(v),N);C.connect(),await _;let P=Jn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&P.startsWith("publishers/")){const L=this.apiClient.getProject(),z=this.apiClient.getLocation();L&&z&&(P=`projects/${L}/locations/${z}/`+P)}let I={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[sT.AUDIO]}:e.config.responseModalities=[sT.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const j=(o=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&o!==void 0?o:[],O=[];for(const L of j)if(this.isCallableTool(L)){const z=L;O.push(await z.tool())}else O.push(L);O.length>0&&(e.config.tools=O);const F={model:P,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?I=Jye(this.apiClient,F):I=Yye(this.apiClient,F),delete I.config,C.send(JSON.stringify(I)),new j_e(C,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const O_e={turnComplete:!0};class j_e{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Ko(n.turns),e.isVertexAI()||(r=r.map(i=>rA(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(R_e)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},O_e),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:txe(e)}:n={realtimeInput:exe(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function D_e(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function L_e(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}const A8=10;function k8(t){var e,n,r;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t?.tools)!==null&&n!==void 0?n:[])if(Ug(s)){i=!0;break}if(!i)return!0;const a=(r=t?.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ug(t){return"callTool"in t&&typeof t.callTool=="function"}function U_e(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Ug(i)))!==null&&r!==void 0?r:!1}function M8(t){var e;const n=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(Ug(r))return;const a=r;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(i)}),n}function N8(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}class z_e extends rd{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,a,s,o;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!U_e(n)||k8(n.config))return await this.generateContentInternal(c);const u=M8(n);if(u.length>0){const T=u.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${T}.`)}let h,m;const v=Ko(c.contents),x=(a=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&a!==void 0?a:A8;let _=0;for(;_<x&&(h=await this.generateContentInternal(c),!(!h.functionCalls||h.functionCalls.length===0));){const T=h.candidates[0].content,w=[];for(const E of(o=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&o!==void 0?o:[])if(Ug(E)){const C=await E.callTool(h.functionCalls);w.push(...C)}_++,m={role:"user",parts:w},c.contents=Ko(c.contents),c.contents.push(T),c.contents.push(m),N8(c.config)&&(v.push(T),v.push(m))}return N8(c.config)&&(h.automaticFunctionCallingHistory=v),h},this.generateContentStream=async n=>{var r,i,a,s,o;if(this.maybeMoveToResponseJsonSchem(n),k8(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const c=M8(n);if(c.length>0){const m=c.map(v=>`tools[${v}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(a=(i=(r=n?.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,h=(o=(s=n?.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.disable;if(u&&!h)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let a;const s=[];if(r?.generatedImages)for(const c of r.generatedImages)c&&c?.safetyAttributes&&((i=c?.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?a=c?.safetyAttributes:s.push(c);let o;return a?o={generatedImages:s,positivePromptSafetyAttributes:a,sdkHttpResponse:r.sdkHttpResponse}:o={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},o}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Ap(Xu.PAGED_ITEM_MODELS,o=>this.listInternal(o),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,a,s,o,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(a=n.source)===null||a===void 0?void 0:a.video)===null||s===void 0)&&s.uri&&(!((c=(o=n.source)===null||o===void 0?void 0:o.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const s=await Promise.all(a.map(async c=>Ug(c)?await c.tool():c)),o={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(o.config.tools=s,e.config&&e.config.tools&&o7(e.config.tools)){const c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let u=Object.assign({},c);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),l7(u),o.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return o}async initAfcToolsMap(e){var n,r,i;const a=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Ug(s)){const o=s,c=await o.tool();for(const u of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!u.name)throw new Error("Function declaration name is required.");if(a.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);a.set(u.name,o)}}return a}async processAfcStream(e){var n,r,i;const a=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:A8;let s=!1,o=0;const c=await this.initAfcToolsMap(e);return(function(u,h,m){return zl(this,arguments,function*(){for(var v,x,_,T,w,E;o<a;){s&&(o++,s=!1);const I=yield cn(u.processParamsMaybeAddMcpUsage(m)),j=yield cn(u.generateContentStreamInternal(I)),O=[],F=[];try{for(var N=!0,C=(x=void 0,Bl(j)),P;P=yield cn(C.next()),v=P.done,!v;N=!0){T=P.value,N=!1;const L=T;if(yield yield cn(L),L.candidates&&(!((w=L.candidates[0])===null||w===void 0)&&w.content)){F.push(L.candidates[0].content);for(const z of(E=L.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(o<a&&z.functionCall){if(!z.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(z.functionCall.name)){const V=yield cn(h.get(z.functionCall.name).callTool([z.functionCall]));O.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${z.functionCall.name}`)}}}}catch(L){x={error:L}}finally{try{!N&&!v&&(_=C.return)&&(yield cn(_.call(C)))}finally{if(x)throw x.error}}if(O.length>0){s=!0;const L=new wy;L.candidates=[{content:{role:"user",parts:O}}],yield yield cn(L);const z=[];z.push(...F),z.push({role:"user",parts:O});const V=Ko(m.contents).concat(z);m.contents=V}else break}})})(this,c,e)}async generateContentInternal(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=w8(this.apiClient,e);return o=At("{model}:generateContent",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=T8(h),v=new wy;return Object.assign(v,m),v})}else{const u=_8(this.apiClient,e);return o=At("{model}:generateContent",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=S8(h),v=new wy;return Object.assign(v,m),v})}}async generateContentStreamInternal(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=w8(this.apiClient,e);return o=At("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.requestStream({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(m){return zl(this,arguments,function*(){var v,x,_,T;try{for(var w=!0,E=Bl(m),N;N=yield cn(E.next()),v=N.done,!v;w=!0){T=N.value,w=!1;const C=T,P=T8(yield cn(C.json()));P.sdkHttpResponse={headers:C.headers};const I=new wy;Object.assign(I,P),yield yield cn(I)}}catch(C){x={error:C}}finally{try{!w&&!v&&(_=E.return)&&(yield cn(_.call(E)))}finally{if(x)throw x.error}}})})}else{const u=_8(this.apiClient,e);return o=At("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.requestStream({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),s.then(function(m){return zl(this,arguments,function*(){var v,x,_,T;try{for(var w=!0,E=Bl(m),N;N=yield cn(E.next()),v=N.done,!v;w=!0){T=N.value,w=!1;const C=T,P=S8(yield cn(C.json()));P.sdkHttpResponse={headers:C.headers};const I=new wy;Object.assign(I,P),yield yield cn(I)}}catch(C){x={error:C}}finally{try{!w&&!v&&(_=E.return)&&(yield cn(_.call(E)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=Pxe(this.apiClient,e);return o=At("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=jxe(h),v=new i8;return Object.assign(v,m),v})}else{const u=Ixe(this.apiClient,e);return o=At("{model}:batchEmbedContents",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=Oxe(h),v=new i8;return Object.assign(v,m),v})}}async generateImagesInternal(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=$xe(this.apiClient,e);return o=At("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=Kxe(h),v=new a8;return Object.assign(v,m),v})}else{const u=qxe(this.apiClient,e);return o=At("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=Wxe(h),v=new a8;return Object.assign(v,m),v})}}async editImageInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI()){const o=Mxe(this.apiClient,e);return a=At("{model}:predict",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const u=Nxe(c),h=new Dve;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI()){const o=$be(this.apiClient,e);return a=At("{model}:predict",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const u=Wbe(c),h=new Lve;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI()){const o=kbe(this.apiClient,e);return a=At("{model}:predict",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const u=Mbe(c),h=new Uve;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI()){const o=Obe(this.apiClient,e);return a=At("{model}:predict",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const u=jbe(c),h=new zve;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=dbe(this.apiClient,e);return o=At("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>F3(h))}else{const u=ube(this.apiClient,e);return o=At("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),s.then(h=>B3(h))}}async listInternal(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=bbe(this.apiClient,e);return o=At("{models_url}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=wbe(h),v=new s8;return Object.assign(v,m),v})}else{const u=xbe(this.apiClient,e);return o=At("{models_url}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=_be(h),v=new s8;return Object.assign(v,m),v})}}async update(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=Gbe(this.apiClient,e);return o=At("{model}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>F3(h))}else{const u=Hbe(this.apiClient,e);return o=At("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),s.then(h=>B3(h))}}async delete(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=Txe(this.apiClient,e);return o=At("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=Axe(h),v=new o8;return Object.assign(v,m),v})}else{const u=Sxe(this.apiClient,e);return o=At("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=Exe(h),v=new o8;return Object.assign(v,m),v})}}async countTokens(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=bxe(this.apiClient,e);return o=At("{model}:countTokens",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=wxe(h),v=new l8;return Object.assign(v,m),v})}else{const u=xxe(this.apiClient,e);return o=At("{model}:countTokens",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=_xe(h),v=new l8;return Object.assign(v,m),v})}}async computeTokens(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI()){const o=fxe(this.apiClient,e);return a=At("{model}:computeTokens",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const u=hxe(c),h=new Bve;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=ebe(this.apiClient,e);return o=At("{model}:predictLongRunning",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const m=Zxe(h),v=new oT;return Object.assign(v,m),v})}else{const u=Qxe(this.apiClient,e);return o=At("{model}:predictLongRunning",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),s.then(h=>{const m=Jxe(h),v=new oT;return Object.assign(v,m),v})}}}class B_e extends rd{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=Cve(e);return o=At("{operationName}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s}else{const u=Nve(e);return o=At("{operationName}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI()){const o=wve(e);return a=At("{resourceName}:fetchPredictOperation",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}function F_e(t){const e={},n=A(t,["data"]);if(n!=null&&k(e,["data"],n),A(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=A(t,["mimeType"]);return r!=null&&k(e,["mimeType"],r),e}function V_e(t){const e={},n=A(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>J_e(a))),k(e,["parts"],i)}const r=A(t,["role"]);return r!=null&&k(e,["role"],r),e}function H_e(t,e,n){const r={},i=A(e,["expireTime"]);n!==void 0&&i!=null&&k(n,["expireTime"],i);const a=A(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&k(n,["newSessionExpireTime"],a);const s=A(e,["uses"]);n!==void 0&&s!=null&&k(n,["uses"],s);const o=A(e,["liveConnectConstraints"]);n!==void 0&&o!=null&&k(n,["bidiGenerateContentSetup"],Y_e(t,o));const c=A(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&k(n,["fieldMask"],c),r}function G_e(t,e){const n={},r=A(e,["config"]);return r!=null&&k(n,["config"],H_e(t,r,n)),n}function q_e(t){const e={};if(A(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=A(t,["fileUri"]);n!=null&&k(e,["fileUri"],n);const r=A(t,["mimeType"]);return r!=null&&k(e,["mimeType"],r),e}function $_e(t){const e={},n=A(t,["id"]);n!=null&&k(e,["id"],n);const r=A(t,["args"]);r!=null&&k(e,["args"],r);const i=A(t,["name"]);if(i!=null&&k(e,["name"],i),A(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(A(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function W_e(t){const e={};if(A(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=A(t,["enableWidget"]);return n!=null&&k(e,["enableWidget"],n),e}function K_e(t){const e={};if(A(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(A(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=A(t,["timeRangeFilter"]);return n!=null&&k(e,["timeRangeFilter"],n),e}function X_e(t,e){const n={},r=A(t,["generationConfig"]);e!==void 0&&r!=null&&k(e,["setup","generationConfig"],r);const i=A(t,["responseModalities"]);e!==void 0&&i!=null&&k(e,["setup","generationConfig","responseModalities"],i);const a=A(t,["temperature"]);e!==void 0&&a!=null&&k(e,["setup","generationConfig","temperature"],a);const s=A(t,["topP"]);e!==void 0&&s!=null&&k(e,["setup","generationConfig","topP"],s);const o=A(t,["topK"]);e!==void 0&&o!=null&&k(e,["setup","generationConfig","topK"],o);const c=A(t,["maxOutputTokens"]);e!==void 0&&c!=null&&k(e,["setup","generationConfig","maxOutputTokens"],c);const u=A(t,["mediaResolution"]);e!==void 0&&u!=null&&k(e,["setup","generationConfig","mediaResolution"],u);const h=A(t,["seed"]);e!==void 0&&h!=null&&k(e,["setup","generationConfig","seed"],h);const m=A(t,["speechConfig"]);e!==void 0&&m!=null&&k(e,["setup","generationConfig","speechConfig"],zj(m));const v=A(t,["thinkingConfig"]);e!==void 0&&v!=null&&k(e,["setup","generationConfig","thinkingConfig"],v);const x=A(t,["enableAffectiveDialog"]);e!==void 0&&x!=null&&k(e,["setup","generationConfig","enableAffectiveDialog"],x);const _=A(t,["systemInstruction"]);e!==void 0&&_!=null&&k(e,["setup","systemInstruction"],V_e(Ha(_)));const T=A(t,["tools"]);if(e!==void 0&&T!=null){let j=Iv(T);Array.isArray(j)&&(j=j.map(O=>Q_e(Rv(O)))),k(e,["setup","tools"],j)}const w=A(t,["sessionResumption"]);e!==void 0&&w!=null&&k(e,["setup","sessionResumption"],Z_e(w));const E=A(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&k(e,["setup","inputAudioTranscription"],E);const N=A(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&k(e,["setup","outputAudioTranscription"],N);const C=A(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&k(e,["setup","realtimeInputConfig"],C);const P=A(t,["contextWindowCompression"]);e!==void 0&&P!=null&&k(e,["setup","contextWindowCompression"],P);const I=A(t,["proactivity"]);if(e!==void 0&&I!=null&&k(e,["setup","proactivity"],I),A(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Y_e(t,e){const n={},r=A(e,["model"]);r!=null&&k(n,["setup","model"],Jn(t,r));const i=A(e,["config"]);return i!=null&&k(n,["config"],X_e(i,n)),n}function J_e(t){const e={},n=A(t,["mediaResolution"]);n!=null&&k(e,["mediaResolution"],n);const r=A(t,["codeExecutionResult"]);r!=null&&k(e,["codeExecutionResult"],r);const i=A(t,["executableCode"]);i!=null&&k(e,["executableCode"],i);const a=A(t,["fileData"]);a!=null&&k(e,["fileData"],q_e(a));const s=A(t,["functionCall"]);s!=null&&k(e,["functionCall"],$_e(s));const o=A(t,["functionResponse"]);o!=null&&k(e,["functionResponse"],o);const c=A(t,["inlineData"]);c!=null&&k(e,["inlineData"],F_e(c));const u=A(t,["text"]);u!=null&&k(e,["text"],u);const h=A(t,["thought"]);h!=null&&k(e,["thought"],h);const m=A(t,["thoughtSignature"]);m!=null&&k(e,["thoughtSignature"],m);const v=A(t,["videoMetadata"]);return v!=null&&k(e,["videoMetadata"],v),e}function Z_e(t){const e={},n=A(t,["handle"]);if(n!=null&&k(e,["handle"],n),A(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Q_e(t){const e={};if(A(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=A(t,["computerUse"]);n!=null&&k(e,["computerUse"],n);const r=A(t,["fileSearch"]);r!=null&&k(e,["fileSearch"],r);const i=A(t,["codeExecution"]);if(i!=null&&k(e,["codeExecution"],i),A(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=A(t,["functionDeclarations"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(m=>m)),k(e,["functionDeclarations"],h)}const s=A(t,["googleMaps"]);s!=null&&k(e,["googleMaps"],W_e(s));const o=A(t,["googleSearch"]);o!=null&&k(e,["googleSearch"],K_e(o));const c=A(t,["googleSearchRetrieval"]);c!=null&&k(e,["googleSearchRetrieval"],c);const u=A(t,["urlContext"]);return u!=null&&k(e,["urlContext"],u),e}function ewe(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(a=>`${n}.${a}`);e.push(...i)}else e.push(n)}return e.join(",")}function twe(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const a=ewe(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)a?t.fieldMask=a:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let o=[];i.length>0&&(o=i.map(u=>s.includes(u)?`generationConfig.${u}`:u));const c=[];a&&c.push(a),o.length>0&&c.push(...o),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class nwe extends rd{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const o=G_e(this.apiClient,e);a=At("auth_tokens",o._url),s=o._query,delete o.config,delete o._url,delete o._query;const c=twe(o,e.config);return i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}}function rwe(t,e){const n={},r=A(t,["force"]);return e!==void 0&&r!=null&&k(e,["_query","force"],r),n}function iwe(t){const e={},n=A(t,["name"]);n!=null&&k(e,["_url","name"],n);const r=A(t,["config"]);return r!=null&&rwe(r,e),e}function awe(t){const e={},n=A(t,["name"]);return n!=null&&k(e,["_url","name"],n),e}function swe(t,e){const n={},r=A(t,["pageSize"]);e!==void 0&&r!=null&&k(e,["_query","pageSize"],r);const i=A(t,["pageToken"]);return e!==void 0&&i!=null&&k(e,["_query","pageToken"],i),n}function owe(t){const e={},n=A(t,["parent"]);n!=null&&k(e,["_url","parent"],n);const r=A(t,["config"]);return r!=null&&swe(r,e),e}function lwe(t){const e={},n=A(t,["sdkHttpResponse"]);n!=null&&k(e,["sdkHttpResponse"],n);const r=A(t,["nextPageToken"]);r!=null&&k(e,["nextPageToken"],r);const i=A(t,["documents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>s)),k(e,["documents"],a)}return e}class cwe extends rd{constructor(e){super(),this.apiClient=e,this.list=async n=>new Ap(Xu.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=awe(e);return a=At("{name}",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var n,r;let i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=iwe(e);i=At("{name}",s._url),a=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=owe(e);return a=At("{parent}/documents",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const u=lwe(c),h=new Fve;return Object.assign(h,u),h})}}}class uwe extends rd{constructor(e,n=new cwe(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Ap(Xu.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=e_e(e);return a=At("fileSearchStores",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async get(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=r_e(e);return a=At("{name}",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var n,r;let i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=n_e(e);i=At("{name}",s._url),a=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=c_e(e);return a=At("fileSearchStores",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const u=u_e(c),h=new Vve;return Object.assign(h,u),h})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=d_e(e);return a=At("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const u=f_e(c),h=new Hve;return Object.assign(h,u),h})}}async importFile(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=s_e(e);return a=At("{file_search_store_name}:importFile",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const u=a_e(c),h=new Oj;return Object.assign(h,u),h})}}}let c7=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return c7=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const dwe=()=>c7();function H3(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const G3=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class el extends Error{}class ms extends el{constructor(e,n,r,i){super(`${ms.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new sA({message:r,cause:G3(n)});const a=n;return e===400?new d7(e,a,r,i):e===401?new f7(e,a,r,i):e===403?new h7(e,a,r,i):e===404?new p7(e,a,r,i):e===409?new m7(e,a,r,i):e===422?new g7(e,a,r,i):e===429?new v7(e,a,r,i):e>=500?new y7(e,a,r,i):new ms(e,a,r,i)}}class q3 extends ms{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class sA extends ms{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class u7 extends sA{constructor({message:e}={}){super({message:e??"Request timed out."})}}class d7 extends ms{}class f7 extends ms{}class h7 extends ms{}class p7 extends ms{}class m7 extends ms{}class g7 extends ms{}class v7 extends ms{}class y7 extends ms{}const fwe=/^[a-z][a-z0-9+.-]*:/i,hwe=t=>fwe.test(t);let $3=t=>($3=Array.isArray,$3(t));const pwe=$3;let mwe=pwe;const C8=mwe;function gwe(t){if(!t)return!0;for(const e in t)return!1;return!0}function vwe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const ywe=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new el(`${t} must be an integer`);if(e<0)throw new el(`${t} must be a positive integer`);return e},xwe=t=>{try{return JSON.parse(t)}catch{return}};const bwe=t=>new Promise(e=>setTimeout(e,t));const bg="0.0.1";function _we(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const wwe=()=>{var t,e,n,r,i;const a=_we();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bg,"X-Stainless-OS":I8(Deno.build.os),"X-Stainless-Arch":R8(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bg,"X-Stainless-OS":I8((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":R8((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const s=Swe();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Swe(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,a=r[2]||0,s=r[3]||0;return{browser:e,version:`${i}.${a}.${s}`}}}return null}const R8=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",I8=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Kw;const Twe=()=>Kw??(Kw=wwe());function Ewe(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function x7(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Awe(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return x7({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function b7(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function kwe(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}const Mwe=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});const _7=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e?.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function YR(t,e,n){return _7(),new File(t,e??"unknown_file",n)}function Nwe(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Cwe=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";const w7=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Rwe=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&w7(t),Iwe=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Pwe(t,e,n){if(_7(),t=await t,Rwe(t))return t instanceof File?t:YR([await t.arrayBuffer()],t.name);if(Iwe(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),YR(await W3(i),e,n)}const r=await W3(t);if(e||(e=Nwe(t)),!n?.type){const i=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return YR(r,e,n)}async function W3(t){var e,n,r,i,a;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(w7(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(Cwe(t))try{for(var o=!0,c=Bl(t),u;u=await c.next(),e=u.done,!e;o=!0){i=u.value,o=!1;const h=i;s.push(...await W3(h))}}catch(h){n={error:h}}finally{try{!o&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}else{const h=(a=t?.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof t}${h?`; constructor: ${h}`:""}${Owe(t)}`)}return s}function Owe(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class S7{constructor(e){this._client=e}}S7._key=[];function T7(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const P8=Object.freeze(Object.create(null)),jwe=(t=T7)=>(function(n,...r){if(n.length===1)return n[0];let i=!1;const a=[],s=n.reduce((h,m,v)=>{var x,_,T;/[?#]/.test(m)&&(i=!0);const w=r[v];let E=(i?encodeURIComponent:t)(""+w);return v!==r.length&&(w==null||typeof w=="object"&&w.toString===((T=Object.getPrototypeOf((_=Object.getPrototypeOf((x=w.hasOwnProperty)!==null&&x!==void 0?x:P8))!==null&&_!==void 0?_:P8))===null||T===void 0?void 0:T.toString))&&(E=w+"",a.push({start:h.length+m.length,length:E.length,error:`Value of type ${Object.prototype.toString.call(w).slice(8,-1)} is not a valid path parameter`})),h+m+(v===r.length?"":E)},""),o=s.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=c.exec(o))!==null;)a.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(a.sort((h,m)=>h.start-m.start),a.length>0){let h=0;const m=a.reduce((v,x)=>{const _=" ".repeat(x.start-h),T="^".repeat(x.length);return h=x.start+x.length,v+_+T},"");throw new el(`Path parameters result in path with invalid segments:
${a.map(v=>v.error).join(`
`)}
${s}
${m}`)}return s}),Xw=jwe(T7);class E7 extends S7{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,a=cT(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new el("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new el("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Xw`/${i}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(Xw`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(Xw`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const a=n??{},{api_version:s=this._client.apiVersion}=a,o=cT(a,["api_version"]);return this._client.get(Xw`/${s}/interactions/${e}`,Object.assign(Object.assign({query:o},r),{stream:(i=n?.stream)!==null&&i!==void 0?i:!1}))}}E7._key=Object.freeze(["interactions"]);class A7 extends E7{}function Dwe(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let Yw;function Fj(t){let e;return(Yw??(e=new globalThis.TextEncoder,Yw=e.encode.bind(e)))(t)}let Jw;function O8(t){let e;return(Jw??(e=new globalThis.TextDecoder,Jw=e.decode.bind(e)))(t)}class oA{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Fj(e):e;this.buffer=Dwe([this.buffer,n]);const r=[];let i;for(;(i=Lwe(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(O8(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,s=O8(this.buffer.subarray(0,a));r.push(s),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}oA.NEWLINE_CHARS=new Set([`
`,"\r"]);oA.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Lwe(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Uwe(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const uT={off:0,error:200,warn:300,info:400,debug:500},j8=(t,e,n)=>{if(t){if(vwe(uT,t))return t;ls(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(uT))}`)}};function Hy(){}function Zw(t,e,n){return!e||uT[t]>uT[n]?Hy:e[t].bind(e)}const zwe={error:Hy,warn:Hy,info:Hy,debug:Hy};let D8=new WeakMap;function ls(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return zwe;const i=D8.get(n);if(i&&i[0]===r)return i[1];const a={error:Zw("error",n,r),warn:Zw("warn",n,r),info:Zw("info",n,r),debug:Zw("debug",n,r)};return D8.set(n,[r,a]),a}const Bh=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);class Ng{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const a=r?ls(r):console;function s(){return zl(this,arguments,function*(){var c,u,h,m;if(i)throw new el("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let v=!1;try{try{for(var x=!0,_=Bl(Bwe(e,n)),T;T=yield cn(_.next()),c=T.done,!c;x=!0){m=T.value,x=!1;const w=m;if(!v)if(w.data.startsWith("[DONE]")){v=!0;continue}else try{yield yield cn(JSON.parse(w.data))}catch(E){throw a.error("Could not parse message into JSON:",w.data),a.error("From chunk:",w.raw),E}}}catch(w){u={error:w}}finally{try{!x&&!c&&(h=_.return)&&(yield cn(h.call(_)))}finally{if(u)throw u.error}}v=!0}catch(w){if(H3(w))return yield cn(void 0);throw w}finally{v||n.abort()}})}return new Ng(s,n,r)}static fromReadableStream(e,n,r){let i=!1;function a(){return zl(this,arguments,function*(){var c,u,h,m;const v=new oA,x=b7(e);try{for(var _=!0,T=Bl(x),w;w=yield cn(T.next()),c=w.done,!c;_=!0){m=w.value,_=!1;const E=m;for(const N of v.decode(E))yield yield cn(N)}}catch(E){u={error:E}}finally{try{!_&&!c&&(h=T.return)&&(yield cn(h.call(T)))}finally{if(u)throw u.error}}for(const E of v.flush())yield yield cn(E)})}function s(){return zl(this,arguments,function*(){var c,u,h,m;if(i)throw new el("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let v=!1;try{try{for(var x=!0,_=Bl(a()),T;T=yield cn(_.next()),c=T.done,!c;x=!0){m=T.value,x=!1;const w=m;v||w&&(yield yield cn(JSON.parse(w)))}}catch(w){u={error:w}}finally{try{!x&&!c&&(h=_.return)&&(yield cn(h.call(_)))}finally{if(u)throw u.error}}v=!0}catch(w){if(H3(w))return yield cn(void 0);throw w}finally{v||n.abort()}})}return new Ng(s,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=a=>({next:()=>{if(a.length===0){const s=r.next();e.push(s),n.push(s)}return a.shift()}});return[new Ng(()=>i(e),this.controller,this.client),new Ng(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return x7({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:a}=await n.next();if(a)return r.close();const s=Fj(JSON.stringify(i)+`
`);r.enqueue(s)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function Bwe(t,e){return zl(this,arguments,function*(){var r,i,a,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new el("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new el("Attempted to iterate over a response with no body");const o=new Vwe,c=new oA,u=b7(t.body);try{for(var h=!0,m=Bl(Fwe(u)),v;v=yield cn(m.next()),r=v.done,!r;h=!0){s=v.value,h=!1;const x=s;for(const _ of c.decode(x)){const T=o.decode(_);T&&(yield yield cn(T))}}}catch(x){i={error:x}}finally{try{!h&&!r&&(a=m.return)&&(yield cn(a.call(m)))}finally{if(i)throw i.error}}for(const x of c.flush()){const _=o.decode(x);_&&(yield yield cn(_))}})}function Fwe(t){return zl(this,arguments,function*(){var n,r,i,a;let s=new Uint8Array;try{for(var o=!0,c=Bl(t),u;u=yield cn(c.next()),n=u.done,!n;o=!0){a=u.value,o=!1;const h=a;if(h==null)continue;const m=h instanceof ArrayBuffer?new Uint8Array(h):typeof h=="string"?Fj(h):h;let v=new Uint8Array(s.length+m.length);v.set(s),v.set(m,s.length),s=v;let x;for(;(x=Uwe(s))!==-1;)yield yield cn(s.slice(0,x)),s=s.slice(x)}}catch(h){r={error:h}}finally{try{!o&&!n&&(i=c.return)&&(yield cn(i.call(c)))}finally{if(r)throw r.error}}s.length>0&&(yield yield cn(s))})}class Vwe{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=Hwe(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function Hwe(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function Gwe(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:a}=e,s=await(async()=>{var o;if(e.options.stream)return ls(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Ng.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type"),u=(o=c?.split(";")[0])===null||o===void 0?void 0:o.trim();return u?.includes("application/json")||u?.endsWith("+json")?await n.json():await n.text()})();return ls(t).debug(`[${r}] response parsed`,Bh({retryOfRequestLogID:i,url:n.url,status:n.status,body:s,durationMs:Date.now()-a})),s}class Vj extends Promise{constructor(e,n,r=Gwe){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new Vj(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}const k7=Symbol("brand.privateNullableHeaders");function*qwe(t){if(!t)return;if(k7 in t){const{values:r,nulls:i}=t;yield*r.entries();for(const a of i)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():C8(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const a=C8(r[1])?r[1]:[r[1]];let s=!1;for(const o of a)o!==void 0&&(e&&!s&&(s=!0,yield[i,null]),yield[i,o])}}const Sy=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[a,s]of qwe(r)){const o=a.toLowerCase();i.has(o)||(e.delete(a),i.add(o)),s===null?(e.delete(a),n.add(o)):(e.append(a,s),n.delete(o))}}return{[k7]:!0,values:e,nulls:n}};const JR=t=>{var e,n,r,i,a,s;if(typeof globalThis.process<"u")return(r=(n=(e=gve)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(s=(a=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||a===void 0?void 0:a.call(i,t))===null||s===void 0?void 0:s.trim()};var M7;class lA{constructor(e){var n,r,i,a,s,o,c,{baseURL:u=JR("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:h=(n=JR("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=e,v=cT(e,["baseURL","apiKey","apiVersion"]);const x=Object.assign(Object.assign({apiKey:h,apiVersion:m},v),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=x.baseURL,this.timeout=(r=x.timeout)!==null&&r!==void 0?r:lA.DEFAULT_TIMEOUT,this.logger=(i=x.logger)!==null&&i!==void 0?i:console;const _="warn";this.logLevel=_,this.logLevel=(s=(a=j8(x.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:j8(JR("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:_,this.fetchOptions=x.fetchOptions,this.maxRetries=(o=x.maxRetries)!==null&&o!==void 0?o:2,this.fetch=(c=x.fetch)!==null&&c!==void 0?c:Ewe(),this.encoder=Mwe,this._options=x,this.apiKey=h,this.apiVersion=m,this.clientAdapter=x.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Sy([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Sy([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Sy([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new el(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${bg}`}defaultIdempotencyKey(){return`stainless-node-retry-${dwe()}`}makeStatusError(e,n,r,i){return ms.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,a=hwe(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return gwe(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new Vj(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,a,s;const o=await e,c=(i=o.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=c),await this.prepareOptions(o);const{req:u,url:h,timeout:m}=await this.buildRequest(o,{retryCount:c-n});await this.prepareRequest(u,{url:h,options:o});const v="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),x=r===void 0?"":`, retryOf: ${r}`,_=Date.now();if(ls(this).debug(`[${v}] sending request`,Bh({retryOfRequestLogID:r,method:o.method,url:h,options:o,headers:u.headers})),!((a=o.signal)===null||a===void 0)&&a.aborted)throw new q3;const T=new AbortController,w=await this.fetchWithTimeout(h,u,m,T).catch(G3),E=Date.now();if(w instanceof globalThis.Error){const C=`retrying, ${n} attempts remaining`;if(!((s=o.signal)===null||s===void 0)&&s.aborted)throw new q3;const P=H3(w)||/timed? ?out/i.test(String(w)+("cause"in w?String(w.cause):""));if(n)return ls(this).info(`[${v}] connection ${P?"timed out":"failed"} - ${C}`),ls(this).debug(`[${v}] connection ${P?"timed out":"failed"} (${C})`,Bh({retryOfRequestLogID:r,url:h,durationMs:E-_,message:w.message})),this.retryRequest(o,n,r??v);throw ls(this).info(`[${v}] connection ${P?"timed out":"failed"} - error; no more retries left`),ls(this).debug(`[${v}] connection ${P?"timed out":"failed"} (error; no more retries left)`,Bh({retryOfRequestLogID:r,url:h,durationMs:E-_,message:w.message})),P?new u7:new sA({cause:w})}const N=`[${v}${x}] ${u.method} ${h} ${w.ok?"succeeded":"failed"} with status ${w.status} in ${E-_}ms`;if(!w.ok){const C=await this.shouldRetry(w);if(n&&C){const L=`retrying, ${n} attempts remaining`;return await kwe(w.body),ls(this).info(`${N} - ${L}`),ls(this).debug(`[${v}] response error (${L})`,Bh({retryOfRequestLogID:r,url:w.url,status:w.status,headers:w.headers,durationMs:E-_})),this.retryRequest(o,n,r??v,w.headers)}const P=C?"error; no more retries left":"error; not retryable";ls(this).info(`${N} - ${P}`);const I=await w.text().catch(L=>G3(L).message),j=xwe(I),O=j?void 0:I;throw ls(this).debug(`[${v}] response error (${P})`,Bh({retryOfRequestLogID:r,url:w.url,status:w.status,headers:w.headers,message:O,durationMs:Date.now()-_})),this.makeStatusError(w.status,j,O,w.headers)}return ls(this).info(N),ls(this).debug(`[${v}] response start`,Bh({retryOfRequestLogID:r,url:w.url,status:w.status,headers:w.headers,durationMs:E-_})),{response:w,options:o,controller:T,requestLogID:v,retryOfRequestLogID:r,startTime:_}}async fetchWithTimeout(e,n,r,i){const a=n||{},{signal:s,method:o}=a,c=cT(a,["signal","method"]);s&&s.addEventListener("abort",()=>i.abort());const u=setTimeout(()=>i.abort(),r),h=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m=Object.assign(Object.assign(Object.assign({signal:i.signal},h?{duplex:"half"}:{}),{method:"GET"}),c);o&&(m.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(u)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var a;let s;const o=i?.get("retry-after-ms");if(o){const u=parseFloat(o);Number.isNaN(u)||(s=u)}const c=i?.get("retry-after");if(c&&!s){const u=parseFloat(c);Number.isNaN(u)?s=Date.parse(c)-Date.now():s=u*1e3}if(!(s&&0<=s&&s<60*1e3)){const u=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,u)}return await bwe(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,s=Math.min(.5*Math.pow(2,a),8),o=1-Math.random()*.25;return s*o*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,a;const s=Object.assign({},e),{method:o,path:c,query:u,defaultBaseURL:h}=s,m=this.buildURL(c,u,h);"timeout"in s&&ywe("timeout",s.timeout),s.timeout=(r=s.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:v,body:x}=this.buildBody({options:s}),_=await this.buildHeaders({options:e,method:o,bodyHeaders:v,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:o,headers:_},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&x instanceof globalThis.ReadableStream&&{duplex:"half"}),x&&{body:x}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(a=s.fetchOptions)!==null&&a!==void 0?a:{}),url:m,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const s=await this.authHeaders(e);let o=Sy([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Twe()),this._options.defaultHeaders,r,e.headers,s]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Sy([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Awe(e)}:this.encoder({body:e,headers:r})}}lA.DEFAULT_TIMEOUT=6e4;class sa extends lA{constructor(){super(...arguments),this.interactions=new A7(this)}}M7=sa;sa.GeminiNextGenAPIClient=M7;sa.GeminiNextGenAPIClientError=el;sa.APIError=ms;sa.APIConnectionError=sA;sa.APIConnectionTimeoutError=u7;sa.APIUserAbortError=q3;sa.NotFoundError=p7;sa.ConflictError=m7;sa.RateLimitError=v7;sa.BadRequestError=d7;sa.AuthenticationError=f7;sa.InternalServerError=y7;sa.PermissionDeniedError=h7;sa.UnprocessableEntityError=g7;sa.toFile=Pwe;sa.Interactions=A7;function $we(t,e){const n={},r=A(t,["name"]);return r!=null&&k(n,["_url","name"],r),n}function Wwe(t,e){const n={},r=A(t,["name"]);return r!=null&&k(n,["_url","name"],r),n}function Kwe(t,e){const n={},r=A(t,["sdkHttpResponse"]);return r!=null&&k(n,["sdkHttpResponse"],r),n}function Xwe(t,e){const n={},r=A(t,["sdkHttpResponse"]);return r!=null&&k(n,["sdkHttpResponse"],r),n}function Ywe(t,e,n){const r={};if(A(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=A(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&k(e,["displayName"],i),A(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=A(t,["epochCount"]);e!==void 0&&a!=null&&k(e,["tuningTask","hyperparameters","epochCount"],a);const s=A(t,["learningRateMultiplier"]);if(s!=null&&k(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),A(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(A(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(A(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const o=A(t,["batchSize"]);e!==void 0&&o!=null&&k(e,["tuningTask","hyperparameters","batchSize"],o);const c=A(t,["learningRate"]);if(e!==void 0&&c!=null&&k(e,["tuningTask","hyperparameters","learningRate"],c),A(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(A(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function Jwe(t,e,n){const r={};let i=A(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const x=A(t,["validationDataset"]);e!==void 0&&x!=null&&k(e,["supervisedTuningSpec"],L8(x))}else if(i==="PREFERENCE_TUNING"){const x=A(t,["validationDataset"]);e!==void 0&&x!=null&&k(e,["preferenceOptimizationSpec"],L8(x))}const a=A(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&k(e,["tunedModelDisplayName"],a);const s=A(t,["description"]);e!==void 0&&s!=null&&k(e,["description"],s);let o=A(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const x=A(t,["epochCount"]);e!==void 0&&x!=null&&k(e,["supervisedTuningSpec","hyperParameters","epochCount"],x)}else if(o==="PREFERENCE_TUNING"){const x=A(t,["epochCount"]);e!==void 0&&x!=null&&k(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],x)}let c=A(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const x=A(t,["learningRateMultiplier"]);e!==void 0&&x!=null&&k(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],x)}else if(c==="PREFERENCE_TUNING"){const x=A(t,["learningRateMultiplier"]);e!==void 0&&x!=null&&k(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],x)}let u=A(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const x=A(t,["exportLastCheckpointOnly"]);e!==void 0&&x!=null&&k(e,["supervisedTuningSpec","exportLastCheckpointOnly"],x)}else if(u==="PREFERENCE_TUNING"){const x=A(t,["exportLastCheckpointOnly"]);e!==void 0&&x!=null&&k(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],x)}let h=A(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const x=A(t,["adapterSize"]);e!==void 0&&x!=null&&k(e,["supervisedTuningSpec","hyperParameters","adapterSize"],x)}else if(h==="PREFERENCE_TUNING"){const x=A(t,["adapterSize"]);e!==void 0&&x!=null&&k(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],x)}if(A(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(A(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=A(t,["labels"]);e!==void 0&&m!=null&&k(e,["labels"],m);const v=A(t,["beta"]);return e!==void 0&&v!=null&&k(e,["preferenceOptimizationSpec","hyperParameters","beta"],v),r}function Zwe(t,e){const n={},r=A(t,["baseModel"]);r!=null&&k(n,["baseModel"],r);const i=A(t,["preTunedModel"]);i!=null&&k(n,["preTunedModel"],i);const a=A(t,["trainingDataset"]);a!=null&&cSe(a);const s=A(t,["config"]);return s!=null&&Ywe(s,n),n}function Qwe(t,e){const n={},r=A(t,["baseModel"]);r!=null&&k(n,["baseModel"],r);const i=A(t,["preTunedModel"]);i!=null&&k(n,["preTunedModel"],i);const a=A(t,["trainingDataset"]);a!=null&&uSe(a,n,e);const s=A(t,["config"]);return s!=null&&Jwe(s,n,e),n}function eSe(t,e){const n={},r=A(t,["name"]);return r!=null&&k(n,["_url","name"],r),n}function tSe(t,e){const n={},r=A(t,["name"]);return r!=null&&k(n,["_url","name"],r),n}function nSe(t,e,n){const r={},i=A(t,["pageSize"]);e!==void 0&&i!=null&&k(e,["_query","pageSize"],i);const a=A(t,["pageToken"]);e!==void 0&&a!=null&&k(e,["_query","pageToken"],a);const s=A(t,["filter"]);return e!==void 0&&s!=null&&k(e,["_query","filter"],s),r}function rSe(t,e,n){const r={},i=A(t,["pageSize"]);e!==void 0&&i!=null&&k(e,["_query","pageSize"],i);const a=A(t,["pageToken"]);e!==void 0&&a!=null&&k(e,["_query","pageToken"],a);const s=A(t,["filter"]);return e!==void 0&&s!=null&&k(e,["_query","filter"],s),r}function iSe(t,e){const n={},r=A(t,["config"]);return r!=null&&nSe(r,n),n}function aSe(t,e){const n={},r=A(t,["config"]);return r!=null&&rSe(r,n),n}function sSe(t,e){const n={},r=A(t,["sdkHttpResponse"]);r!=null&&k(n,["sdkHttpResponse"],r);const i=A(t,["nextPageToken"]);i!=null&&k(n,["nextPageToken"],i);const a=A(t,["tunedModels"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>N7(o))),k(n,["tuningJobs"],s)}return n}function oSe(t,e){const n={},r=A(t,["sdkHttpResponse"]);r!=null&&k(n,["sdkHttpResponse"],r);const i=A(t,["nextPageToken"]);i!=null&&k(n,["nextPageToken"],i);const a=A(t,["tuningJobs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>K3(o))),k(n,["tuningJobs"],s)}return n}function lSe(t,e){const n={},r=A(t,["name"]);r!=null&&k(n,["model"],r);const i=A(t,["name"]);return i!=null&&k(n,["endpoint"],i),n}function cSe(t,e){const n={};if(A(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(A(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=A(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),k(n,["examples","examples"],i)}return n}function uSe(t,e,n){const r={};let i=A(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=A(t,["gcsUri"]);e!==void 0&&s!=null&&k(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=A(t,["gcsUri"]);e!==void 0&&s!=null&&k(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let a=A(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const s=A(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&k(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(a==="PREFERENCE_TUNING"){const s=A(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&k(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(A(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function N7(t,e){const n={},r=A(t,["sdkHttpResponse"]);r!=null&&k(n,["sdkHttpResponse"],r);const i=A(t,["name"]);i!=null&&k(n,["name"],i);const a=A(t,["state"]);a!=null&&k(n,["state"],q9(a));const s=A(t,["createTime"]);s!=null&&k(n,["createTime"],s);const o=A(t,["tuningTask","startTime"]);o!=null&&k(n,["startTime"],o);const c=A(t,["tuningTask","completeTime"]);c!=null&&k(n,["endTime"],c);const u=A(t,["updateTime"]);u!=null&&k(n,["updateTime"],u);const h=A(t,["description"]);h!=null&&k(n,["description"],h);const m=A(t,["baseModel"]);m!=null&&k(n,["baseModel"],m);const v=A(t,["_self"]);return v!=null&&k(n,["tunedModel"],lSe(v)),n}function K3(t,e){const n={},r=A(t,["sdkHttpResponse"]);r!=null&&k(n,["sdkHttpResponse"],r);const i=A(t,["name"]);i!=null&&k(n,["name"],i);const a=A(t,["state"]);a!=null&&k(n,["state"],q9(a));const s=A(t,["createTime"]);s!=null&&k(n,["createTime"],s);const o=A(t,["startTime"]);o!=null&&k(n,["startTime"],o);const c=A(t,["endTime"]);c!=null&&k(n,["endTime"],c);const u=A(t,["updateTime"]);u!=null&&k(n,["updateTime"],u);const h=A(t,["error"]);h!=null&&k(n,["error"],h);const m=A(t,["description"]);m!=null&&k(n,["description"],m);const v=A(t,["baseModel"]);v!=null&&k(n,["baseModel"],v);const x=A(t,["tunedModel"]);x!=null&&k(n,["tunedModel"],x);const _=A(t,["preTunedModel"]);_!=null&&k(n,["preTunedModel"],_);const T=A(t,["supervisedTuningSpec"]);T!=null&&k(n,["supervisedTuningSpec"],T);const w=A(t,["preferenceOptimizationSpec"]);w!=null&&k(n,["preferenceOptimizationSpec"],w);const E=A(t,["tuningDataStats"]);E!=null&&k(n,["tuningDataStats"],E);const N=A(t,["encryptionSpec"]);N!=null&&k(n,["encryptionSpec"],N);const C=A(t,["partnerModelTuningSpec"]);C!=null&&k(n,["partnerModelTuningSpec"],C);const P=A(t,["customBaseModel"]);P!=null&&k(n,["customBaseModel"],P);const I=A(t,["experiment"]);I!=null&&k(n,["experiment"],I);const j=A(t,["labels"]);j!=null&&k(n,["labels"],j);const O=A(t,["outputUri"]);O!=null&&k(n,["outputUri"],O);const F=A(t,["pipelineJob"]);F!=null&&k(n,["pipelineJob"],F);const L=A(t,["serviceAccount"]);L!=null&&k(n,["serviceAccount"],L);const z=A(t,["tunedModelDisplayName"]);z!=null&&k(n,["tunedModelDisplayName"],z);const V=A(t,["veoTuningSpec"]);return V!=null&&k(n,["veoTuningSpec"],V),n}function dSe(t,e){const n={},r=A(t,["sdkHttpResponse"]);r!=null&&k(n,["sdkHttpResponse"],r);const i=A(t,["name"]);i!=null&&k(n,["name"],i);const a=A(t,["metadata"]);a!=null&&k(n,["metadata"],a);const s=A(t,["done"]);s!=null&&k(n,["done"],s);const o=A(t,["error"]);return o!=null&&k(n,["error"],o),n}function L8(t,e){const n={},r=A(t,["gcsUri"]);r!=null&&k(n,["validationDatasetUri"],r);const i=A(t,["vertexDatasetResource"]);return i!=null&&k(n,["validationDatasetUri"],i),n}class fSe extends rd{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ap(Xu.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:i});return a.baseModel=void 0,await this.tuneInternal(a)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),a=await this.tuneMldevInternal(i);let s="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?s=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(s=a.name.split("/operations/")[0]),{name:s,state:j3.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=tSe(e);return o=At("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>K3(h))}else{const u=eSe(e);return o=At("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>N7(h))}}async listInternal(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=aSe(e);return o=At("tuningJobs",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=oSe(h),v=new c8;return Object.assign(v,m),v})}else{const u=iSe(e);return o=At("tunedModels",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=sSe(h),v=new c8;return Object.assign(v,m),v})}}async cancel(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=Wwe(e);return o=At("{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=Xwe(h),v=new u8;return Object.assign(v,m),v})}else{const u=$we(e);return o=At("{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=Kwe(h),v=new u8;return Object.assign(v,m),v})}}async tuneInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI()){const o=Qwe(e,e);return a=At("tuningJobs",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>K3(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Zwe(e);return a=At("tunedModels",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>dSe(c))}}}class hSe{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const pSe=1024*1024*8,mSe=3,gSe=1e3,vSe=2,dT="x-goog-upload-status";async function ySe(t,e,n){var r;const i=await C7(t,e,n),a=await i?.json();if(((r=i?.headers)===null||r===void 0?void 0:r[dT])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function xSe(t,e,n){var r;const i=await C7(t,e,n),a=await i?.json();if(((r=i?.headers)===null||r===void 0?void 0:r[dT])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=z9(a),o=new jj;return Object.assign(o,s),o}async function C7(t,e,n){var r,i;let a=0,s=0,o=new L3(new Response),c="upload";for(a=t.size;s<a;){const u=Math.min(pSe,a-s),h=t.slice(s,s+u);s+u>=a&&(c+=", finalize");let m=0,v=gSe;for(;m<mSe&&(o=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(s),"Content-Length":String(u)}}}),!(!((r=o?.headers)===null||r===void 0)&&r[dT]));)m++,await _Se(v),v=v*vSe;if(s+=u,((i=o?.headers)===null||i===void 0?void 0:i[dT])!=="active")break;if(a<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return o}async function bSe(t){return{size:t.size,type:t.type}}function _Se(t){return new Promise(e=>setTimeout(e,t))}class wSe{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ySe(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await xSe(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await bSe(e)}}class SSe{create(e,n,r){return new TSe(e,n,r)}}class TSe{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const U8="x-goog-api-key";class ESe{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(U8)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(U8,this.apiKey)}}}const ASe="gl-node/";class R7{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new sa({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=bve(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new ESe(this.apiKey);this.apiClient=new b_e({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:ASe+"web",uploader:new wSe,downloader:new hSe}),this.models=new z_e(this.apiClient),this.live=new P_e(this.apiClient,i,new SSe),this.batches=new X0e(this.apiClient),this.chats=new Cye(this.models,this.apiClient),this.caches=new kye(this.apiClient),this.files=new Bye(this.apiClient),this.operations=new B_e(this.apiClient),this.authTokens=new nwe(this.apiClient),this.tunings=new fSe(this.apiClient),this.fileSearchStores=new uwe(this.apiClient)}}const kSe="AIzaSyDB3okRgXzyM5Hxo9BjknJZ6mF1f6qMS1U",MSe=new R7({apiKey:kSe}),NSe={type:xr.OBJECT,properties:{primaryWound:{type:xr.OBJECT,properties:{name:{type:xr.STRING},score:{type:xr.NUMBER},description:{type:xr.STRING},code:{type:xr.STRING}},required:["name","score","description","code"]},secondaryWounds:{type:xr.ARRAY,items:{type:xr.OBJECT,properties:{name:{type:xr.STRING},score:{type:xr.NUMBER},description:{type:xr.STRING},code:{type:xr.STRING}},required:["name","score","description","code"]}},allScores:{type:xr.ARRAY,items:{type:xr.OBJECT,properties:{name:{type:xr.STRING},score:{type:xr.NUMBER},description:{type:xr.STRING},code:{type:xr.STRING}},required:["name","score","description","code"]}},summary:{type:xr.STRING}},required:["primaryWound","secondaryWounds","summary","allScores"]},Qw={sv:"Swedish",en:"English",ar:"Arabic",fi:"Finnish",es:"Spanish",de:"German"},CSe=async(t,e)=>{const n=vG(e),r=n.map((o,c)=>`Question ${o.id} (${o.category}): Score ${t[c].toFixed(2)}`).join(`
`),i=new Map;n.forEach(o=>{i.has(o.categoryCode)||i.set(o.categoryCode,o.category)});const a=Array.from(i.entries()).map(([o,c])=>`${c} (${o})`).join(", "),s=`
    Analyze the following survey responses about core emotional wounds. The response MUST be in ${Qw[e]}.

    The survey consists of 18 questions, divided into 6 categories with 3 questions each.
    The categories are: ${a}.
    The answer options have score values of 0, 3.33 (10/3), and 6.67 (20/3), where 6.67 indicates the strongest identification with the wound.

    The user's scores:
    ${r}

    Your task:
    1.  Calculate the total score for each category (the wound) by summing the scores for the three associated questions. Each category will have a score between 0 and 20. Round the score to an integer in the result.
    2.  Identify the primary wound (the one with the highest score). If there is a tie, choose one of them as primary.
    3.  Identify the secondary wounds (those with the next highest scores or other high scores).
    4.  Generate a short, supportive, and insightful description for each wound in ${Qw[e]}. Ensure the description for each of the 6 wounds is returned in the 'allScores' array.
    5.  Write a summary analysis in ${Qw[e]}. The tone should be empathetic and constructive.
    6.  Structure your entire response as a JSON object that follows the provided schema. Ensure you include ALL 6 wounds in the 'allScores' array, sorted from highest to lowest score. The 'name' property for each wound MUST be in ${Qw[e]}.
  `;try{const c=(await MSe.models.generateContent({model:"gemini-2.5-flash",contents:s,config:{responseMimeType:"application/json",responseSchema:NSe}})).text?.trim()||"{}",u=JSON.parse(c);return u.allScores.forEach(h=>h.score=Math.round(h.score)),u.primaryWound.score=Math.round(u.primaryWound.score),u.secondaryWounds.forEach(h=>h.score=Math.round(h.score)),u}catch(o){throw console.error("Gemini API call failed:",o),new Error("Failed to get analysis from Gemini API.")}},RSe=()=>{const[t,e]=J.useState("idle"),[n,r]=J.useState(""),{language:i}=L9(),a=nA(),s=J.useMemo(()=>vG(i),[i]),[o,c]=J.useState(()=>Array(s.length).fill(-1)),[u,h]=J.useState(null),[m,v]=J.useState(null),x=J.useRef([]),_=J.useRef(null),T=J.useCallback((I,j)=>{_.current=I,c(O=>{const F=[...O];return F[I]=j,F})},[]);J.useEffect(()=>{if(_.current===null)return;const I=o.findIndex((j,O)=>j===-1&&O>_.current);I!==-1&&setTimeout(()=>{x.current[I]?.scrollIntoView({behavior:"smooth",block:"center"})},100),_.current=null},[o]);const w=async()=>{e("loading"),v(null);try{const I=o.map(O=>O*3.3333333333333335),j=await CSe(I,i);h(j),e("complete")}catch(I){console.error("Error analyzing answers:",I),v(a.analysisError),e("error")}};J.useEffect(()=>{c(Array(s.length).fill(-1))},[i,s.length]);const E=()=>{c(Array(s.length).fill(-1)),h(null),r(""),e("idle"),v(null),window.scrollTo({top:0,behavior:"smooth"})},N=J.useMemo(()=>o.every(I=>I!==-1),[o]),C=J.useMemo(()=>n.trim()!==""&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n),[n]),P=()=>{switch(t){case"idle":return d.jsxs("div",{className:"text-center p-8 max-w-2xl mx-auto bg-white/40 dark:bg-brand-dark-surface/40 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 dark:border-white/10 opacity-0",style:{animation:"slideInUp 0.5s ease-out 0.1s forwards"},children:[d.jsx("h1",{className:"text-3xl font-bold text-brand-text dark:text-brand-dark-text mt-4 mb-2",children:a.idleTitle}),d.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",dangerouslySetInnerHTML:{__html:a.idleWelcome}}),d.jsx("div",{className:"text-left bg-brand-secondary/10 dark:bg-brand-secondary/20 backdrop-blur-sm border-l-4 border-brand-secondary p-4 rounded-r-lg mb-6",children:d.jsx("p",{className:"text-gray-700 dark:text-gray-200",dangerouslySetInnerHTML:{__html:a.idleDescription}})}),d.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 leading-relaxed",dangerouslySetInnerHTML:{__html:a.idleInstructions}}),d.jsxs("div",{className:"w-full max-w-sm mx-auto mb-6",children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a.emailPrompt}),d.jsx("input",{type:"email",id:"email",value:n,onChange:I=>r(I.target.value),placeholder:"din.email@exempel.com",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-full shadow-sm focus:outline-none focus:ring-2 focus:ring-brand-secondary bg-white/70 dark:bg-brand-dark-surface text-brand-text dark:text-brand-dark-text",required:!0})]}),d.jsx("div",{children:d.jsx("button",{onClick:()=>e("active"),disabled:!C,className:"bg-brand-primary hover:bg-brand-secondary text-white font-bold py-3 px-8 rounded-full transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 active:scale-95 disabled:bg-gray-400 disabled:cursor-not-allowed disabled:shadow-none disabled:transform-none",children:a.startQuizButton})})]});case"active":return d.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[d.jsx("h1",{className:"text-4xl font-extrabold text-center text-brand-text dark:text-brand-dark-text mb-8",children:a.activeTitle}),d.jsx("div",{className:"space-y-6",children:s.map((I,j)=>d.jsx(jQ,{ref:O=>{x.current[j]=O},question:I,questionIndex:j,selectedAnswer:o[j],onAnswerSelect:T},I.id))}),d.jsxs("div",{className:"mt-10 text-center",children:[d.jsx("button",{onClick:w,disabled:!N,className:"bg-brand-primary text-white font-bold py-3 px-10 rounded-full transition-all duration-300 shadow-lg disabled:bg-gray-400 disabled:cursor-not-allowed disabled:shadow-none disabled:transform-none hover:bg-brand-secondary hover:shadow-xl transform hover:-translate-y-1 active:scale-95",children:a.submitButton}),!N&&d.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-3 text-sm",children:a.pleaseAnswerAll})]})]});case"loading":return d.jsx(mve,{});case"complete":return u&&d.jsx(pve,{result:u,onReset:E,userEmail:n});case"error":return d.jsxs("div",{className:"text-center p-8 max-w-2xl mx-auto bg-white/50 dark:bg-brand-dark-surface/50 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/30 dark:border-white/10",children:[d.jsx("h2",{className:"text-2xl font-bold text-red-600 dark:text-red-500 mb-4",children:a.errorTitle}),d.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:m}),d.jsx("button",{onClick:E,className:"bg-brand-secondary hover:bg-brand-primary text-white font-bold py-2 px-6 rounded-full transition-all duration-300 active:scale-95",children:a.tryAgainButton})]})}};return d.jsxs("div",{className:"min-h-screen font-sans text-brand-text dark:text-brand-dark-text flex flex-col",children:[d.jsx("main",{className:"flex-grow flex flex-col items-center justify-center min-h-full w-full p-4 sm:p-6 lg:p-8",children:d.jsx("div",{className:"w-full flex justify-center animate-fade-in py-8",children:P()},t)}),d.jsx("div",{className:"text-center py-4 mt-auto px-4 sm:px-6 lg:px-8",children:d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.footerText})})]})},ISe=({setPage:t})=>{const e=[{category:"E-bcker",items:[{title:"Myndighetsinducerat trauma - En introduktion",desc:"En sammanfattning av grunderna i MiT-modellen och hur du brjar din lkningsresa.",icon:jk,color:"text-amber-400",size:"Online",page:Te.MIT_EBOOK},{title:"Gestaltterapi i vardagen",desc:"Praktiska verktyg fr att anvnda gestaltmetodik i dina nra relationer.",icon:jk,color:"text-blue-400",size:"1.8 MB"},{title:"Narcissism, en problematisering av etiketter",desc:"En djupdykning i hur diagnoser och etiketter pverkar individens sjlvbild och den terapeutiska processen.",icon:jk,color:"text-purple-400",size:"2.1 MB"}]},{category:"Arbetsmaterial & Mallar",items:[{title:"Sjlvreglerings-schema (Veckoplanering)",desc:"Ett verktyg fr att kartlgga ditt nervsystems reaktioner under veckan.",icon:yY,color:"text-emerald-400",size:"0.5 MB"},{title:"Checklista infr myndighetsmten",desc:"Gr din rst hrd. En guide fr att frbereda dig mentalt och praktiskt.",icon:gx,color:"text-orange-400",size:"0.3 MB"},{title:"Gestaltterapi: arbetsblad i filosofisk grund",desc:"Interaktivt arbetsblad fr att utforska existentialism och fenomenologi.",icon:wa,color:"text-indigo-400",size:"Online",page:Te.GESTALT_WORKSHEET}]},{category:"vningar & Verktyg",items:[{title:"Grounding-vningar fr hemmabruk",desc:"Fem enkla vningar fr att komma tillbaka till nuet nr stressen tar ver.",icon:Zo,color:"text-red-400",size:"1.2 MB"},{title:"Self-care modellen: Arbetsblad",desc:"Frdjupat arbetsblad fr att arbeta med dina grundsr p egen hand.",icon:wa,color:"text-purple-400",size:"0.9 MB"}]}];return d.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-10 animate-fade-in space-y-12",children:[d.jsxs("div",{className:"text-center max-w-3xl mx-auto space-y-4",children:[d.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-300 to-teal-500",children:"Nedladdningar"}),d.jsx("p",{className:"text-lg text-white/70",children:"Hr har vi samlat resurser, e-bcker och arbetsmaterial som hjlper dig i din personliga eller professionella utveckling."})]}),d.jsx("div",{className:"space-y-16",children:e.map((n,r)=>d.jsxs("div",{className:"space-y-6",children:[d.jsx("h2",{className:"text-2xl font-bold border-l-4 border-emerald-500 pl-4 text-white/90",children:n.category}),d.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:n.items.map((i,a)=>d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-6 hover:bg-white/10 transition-all duration-300 group flex flex-col h-full",children:[d.jsxs("div",{className:"flex items-start justify-between mb-4",children:[d.jsx("div",{className:`p-3 bg-white/5 rounded-2xl ${i.color} group-hover:scale-110 transition-transform`,children:d.jsx(i.icon,{size:28})}),d.jsx("span",{className:"text-[10px] font-bold text-white/30 uppercase tracking-widest bg-black/20 px-3 py-1 rounded-full border border-white/5",children:i.size==="Online"?"WEB APP":`PDF | ${i.size}`})]}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-xl font-bold mb-2 group-hover:text-white transition-colors",children:i.title}),d.jsx("p",{className:"text-white/60 text-sm leading-relaxed mb-6",children:i.desc})]}),d.jsxs("button",{onClick:()=>{i.page?t(i.page):alert(`Startar nedladdning av: ${i.title}`)},className:"w-full py-3 bg-white/10 hover:bg-white/20 border border-white/20 text-white rounded-xl font-bold text-sm transition-all hover:scale-[1.02] active:scale-95 flex items-center justify-center gap-2",children:[i.page?d.jsx(wa,{size:18}):d.jsx(KH,{size:18}),i.page?n.category==="E-bcker"?"ppna e-bok":"ppna arbetsblad":"Ladda ner material"]})]},a))})]},r))}),d.jsxs("div",{className:"glass bg-emerald-900/10 border border-emerald-500/20 rounded-3xl p-8 text-center max-w-2xl mx-auto mt-12",children:[d.jsx(wa,{className:"mx-auto text-emerald-400 mb-4"}),d.jsx("p",{className:"text-sm text-white/70 italic",children:"Vi fyller p med nytt material kontinuerligt. Saknar du ngot specifikt? Kontakta oss grna med nskeml."})]})]})},PSe=()=>{const[t,e]=J.useState(null),[n,r]=J.useState(!1),[i,a]=J.useState(!1);return J.useEffect(()=>{const o=h=>{h.preventDefault(),e(h),r(!0)},c=()=>{r(!1),e(null),a(!1)};window.addEventListener("beforeinstallprompt",o),window.addEventListener("appinstalled",c);const u=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;return r(!u),()=>{window.removeEventListener("beforeinstallprompt",o),window.removeEventListener("appinstalled",c)}},[]),{isInstallable:n,installApp:async()=>{if(t){t.prompt();const{outcome:o}=await t.userChoice;o==="accepted"&&e(null)}else a(!0)},showInstallModal:i,setShowInstallModal:a}},I7=({isOpen:t,onClose:e})=>{if(!t)return null;const n=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,r=/Android/.test(navigator.userAgent),i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return d.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[d.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:e}),d.jsxs("div",{className:"relative w-full max-w-sm bg-zinc-900 border border-white/10 rounded-3xl p-6 shadow-2xl overflow-hidden",children:[d.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 text-white/50 hover:text-white bg-white/5 hover:bg-white/10 rounded-full transition-colors",children:d.jsx(Bc,{size:20})}),d.jsxs("div",{className:"text-center space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-xl font-black text-white",children:"Installera Appen"}),d.jsx("p",{className:"text-sm text-slate-400",children:"Flj instruktionerna fr din enhet:"})]}),d.jsx("div",{className:"bg-white/5 rounded-2xl p-6 space-y-4 text-left",children:n?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"bg-orange-500/10 p-2 rounded-lg text-orange-500 mt-1",children:d.jsx(B2,{size:20})}),d.jsxs("div",{children:[d.jsx("span",{className:"block text-white font-bold text-sm",children:"Steg 1"}),d.jsxs("span",{className:"text-slate-400 text-xs",children:["Tryck p ",d.jsx("span",{className:"text-white font-medium",children:"Dela-knappen"})," i menyn."]})]})]}),d.jsx("div",{className:"w-px h-6 bg-white/10 ml-5 my-1"}),d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"bg-orange-500/10 p-2 rounded-lg text-orange-500 mt-1",children:d.jsx(Uk,{size:20})}),d.jsxs("div",{children:[d.jsx("span",{className:"block text-white font-bold text-sm",children:"Steg 2"}),d.jsxs("span",{className:"text-slate-400 text-xs",children:["Vlj ",d.jsx("span",{className:"text-white font-medium",children:'"Lgg till p hemskrmen"'}),"."]})]})]})]}):r?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"bg-orange-500/10 p-2 rounded-lg text-orange-500 mt-1",children:d.jsx(i1,{size:20})}),d.jsxs("div",{children:[d.jsx("span",{className:"block text-white font-bold text-sm",children:"Steg 1"}),d.jsxs("span",{className:"text-slate-400 text-xs",children:["Tryck p ",d.jsx("span",{className:"text-white font-medium",children:"Meny-knappen"})," (tre prickar)."]})]})]}),d.jsx("div",{className:"w-px h-6 bg-white/10 ml-5 my-1"}),d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"bg-orange-500/10 p-2 rounded-lg text-orange-500 mt-1",children:d.jsx(Uk,{size:20})}),d.jsxs("div",{children:[d.jsx("span",{className:"block text-white font-bold text-sm",children:"Steg 2"}),d.jsxs("span",{className:"text-slate-400 text-xs",children:["Vlj ",d.jsx("span",{className:"text-white font-medium",children:'"Installera app"'})," eller ",d.jsx("span",{className:"text-white font-medium",children:'"Lgg till p hemskrmen"'}),"."]})]})]})]}):i?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"bg-orange-500/10 p-2 rounded-lg text-orange-500 mt-1",children:d.jsx(B2,{size:20})}),d.jsxs("div",{children:[d.jsx("span",{className:"block text-white font-bold text-sm",children:"Steg 1 (Safari)"}),d.jsxs("span",{className:"text-slate-400 text-xs",children:["Tryck p ",d.jsx("span",{className:"text-white font-medium",children:"Dela-knappen"})," i verktygsfltet."]})]})]}),d.jsx("div",{className:"w-full h-px bg-white/10 my-3"}),d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"bg-orange-500/10 p-2 rounded-lg text-orange-500 mt-1",children:d.jsx(Uk,{size:20})}),d.jsxs("div",{children:[d.jsx("span",{className:"block text-white font-bold text-sm",children:"Steg 2"}),d.jsxs("span",{className:"text-slate-400 text-xs",children:["Vlj ",d.jsx("span",{className:"text-white font-medium",children:'"Lgg till i Dock"'}),"."]})]})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"bg-orange-500/10 p-2 rounded-lg text-orange-500 mt-1",children:d.jsx(D2,{size:20,className:"rotate-45"})}),d.jsxs("div",{children:[d.jsx("span",{className:"block text-white font-bold text-sm",children:"Alternativ 1 (Enklast)"}),d.jsxs("span",{className:"text-slate-400 text-xs",children:["Leta efter en liten ",d.jsx("span",{className:"text-white font-medium",children:"dator-ikon med pil"})," i adressfltet."]})]})]}),d.jsx("div",{className:"w-full h-px bg-white/10 my-3"}),d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"bg-orange-500/10 p-2 rounded-lg text-orange-500 mt-1",children:d.jsx(i1,{size:20})}),d.jsxs("div",{children:[d.jsx("span",{className:"block text-white font-bold text-sm",children:"Alternativ 2 (Meny)"}),d.jsxs("span",{className:"text-slate-400 text-xs",children:["Tre prickar  ",d.jsx("span",{className:"text-white font-medium",children:"Spara och dela"}),'  "Installera Horizonten..."']})]})]})]})}),d.jsx("div",{className:"bg-orange-500/10 border border-orange-500/20 p-3 rounded-xl",children:d.jsx("p",{className:"text-[10px] text-orange-200 text-center",children:"Ser du inte alternativen? D har du troligen redan installerat appen! Titta i din app-lista."})}),d.jsx("button",{onClick:e,className:"w-full py-3 bg-white text-black font-bold rounded-xl hover:bg-gray-200 transition-colors",children:"Jag frstr"}),n&&d.jsx("div",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 translate-y-full animate-bounce text-white/50",children:d.jsx(D2,{size:24,className:"rotate-180"})})]})]})]})},OSe=({setPage:t})=>{const{installApp:e,isInstallable:n,showInstallModal:r,setShowInstallModal:i}=PSe();return d.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-10 md:py-20 animate-fade-in flex flex-col items-center",children:[d.jsxs("div",{className:"w-full max-w-6xl",children:[d.jsxs("button",{onClick:()=>t(Te.HOME),className:"flex items-center gap-2 text-white/40 hover:text-white transition-colors mb-8 group",children:[d.jsx(Jo,{size:18,className:"group-hover:-translate-x-1 transition-transform"}),"Tillbaka till hem"]}),d.jsxs("div",{className:"text-center space-y-4 mb-16 animate-in fade-in slide-in-from-top-4 duration-700",children:[d.jsxs("h1",{className:"text-4xl md:text-6xl font-black tracking-tighter text-white leading-tight",children:["Medlemsinloggning ",d.jsx("br",{}),d.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-orange-400 via-amber-200 to-white",children:"Horizonten Gemenskap"})]}),d.jsx("p",{className:"text-lg md:text-2xl font-medium text-orange-200/80 tracking-tight italic",children:"Din digitala gemenskap fr lkning och vxande"})]}),d.jsxs("div",{className:"glass bg-white/[0.03] border border-white/10 p-6 md:p-10 rounded-3xl max-w-5xl mx-auto text-center space-y-6 backdrop-blur-md mb-20 animate-in fade-in zoom-in-95 duration-700",children:[d.jsxs("div",{className:"space-y-4 text-slate-300 text-base md:text-lg leading-relaxed font-light",children:[d.jsx("p",{children:"Att vara mnniska r att behva andra. Vrt nervsystem sker stndigt efter trygghet i kontakt med flocken. Hr p Horizonten har vi skapat en digital plats dr du kan va p att ta plats, dela erfarenheter och hitta styrka i igenknning  allt utifrn din egen takt och dina behov."}),d.jsx("p",{className:"text-white font-medium",children:'Oavsett om du vill smyga igng och "knna in rummet" eller om du r redo att dyka djupt och leda dig sjlv och andra, s finns det en plats fr dig hr.'})]}),d.jsx("div",{className:"pt-2",children:d.jsx("p",{className:"text-orange-400 font-black uppercase tracking-[0.2em] text-xs",children:"Vlj den niv av gemenskap som passar ditt liv just nu:"})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 w-full mb-12",children:[d.jsxs("div",{className:"group relative glass bg-white/[0.02] border border-white/10 hover:border-white/20 p-8 md:p-10 rounded-[2.5rem] transition-all duration-500 flex flex-col justify-between overflow-hidden shadow-2xl",children:[d.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 group-hover:opacity-10 transition-opacity",children:d.jsx(SY,{size:100,className:"text-green-500 rotate-12"})}),d.jsxs("div",{className:"space-y-6 relative z-10",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("h3",{className:"text-2xl md:text-3xl font-black text-white flex items-center gap-2",children:"GRATIS MEDLEMSKAP"}),d.jsx("p",{className:"text-slate-400 font-bold tracking-wide uppercase text-[10px]",children:"En trygg plats att landa p"})]}),d.jsx("p",{className:"text-slate-400 leading-relaxed text-sm md:text-base",children:"Detta r fr dig som vill ta del av gemenskapen, lsa och inspireras, men kanske inte har behov av de djupare funktionerna just nu. Det r ett frsta steg i din Self-care fr att bryta isolering."}),d.jsx("ul",{className:"space-y-4 pt-4 border-t border-white/5",children:[{title:"Lsrttigheter",desc:"Ta del av ppna diskussioner och insikter."},{title:"Begrnsad chat",desc:"Mjlighet att skriva i vr allmnna vlkomst-trd."},{title:"Gemenskap",desc:"Du r en del av flocken  du r inte ensam."}].map((a,s)=>d.jsxs("li",{className:"flex gap-3 items-start",children:[d.jsx(op,{size:14,className:"text-slate-500 mt-1 shrink-0"}),d.jsxs("div",{className:"text-sm",children:[d.jsxs("span",{className:"font-bold text-white mr-1",children:[a.title,":"]}),d.jsx("span",{className:"text-slate-400 font-light",children:a.desc})]})]},s))})]}),d.jsxs("div",{className:"flex flex-col gap-3 mt-8",children:[d.jsxs("button",{onClick:()=>{window.location.hash="#login",t(Te.GEMENSKAP_APP)},className:"w-full py-4 bg-white/5 hover:bg-white/10 border border-white/10 rounded-2xl font-black text-white transition-all flex items-center justify-center gap-2 uppercase tracking-widest text-xs",children:["Logga in ",d.jsx(Vi,{size:18})]}),d.jsx("button",{onClick:()=>{t(Te.FREE_REGISTRATION)},className:"w-full py-4 bg-amber-500 hover:bg-amber-400 text-black rounded-2xl font-black transition-all flex items-center justify-center gap-2 uppercase tracking-widest text-xs shadow-lg shadow-amber-500/20",children:"Registrera dig gratis idag"})]})]}),d.jsxs("div",{className:"group relative overflow-hidden bg-gradient-to-br from-orange-600/10 to-transparent border border-orange-500/30 hover:border-orange-500 p-8 md:p-10 rounded-[2.5rem] transition-all duration-500 flex flex-col justify-between shadow-[0_20px_60px_rgba(249,115,22,0.1)]",children:[d.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 group-hover:opacity-20 transition-opacity",children:d.jsx(LY,{size:120,className:"text-orange-500 -rotate-6"})}),d.jsxs("div",{className:"space-y-6 relative z-10",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsxs("div",{className:"flex flex-wrap justify-between items-start gap-2",children:[d.jsx("h3",{className:"text-2xl md:text-3xl font-black text-white flex items-center gap-2",children:"PREMIUM"}),d.jsx("div",{className:"bg-orange-500 text-[10px] font-black px-3 py-1 rounded-full text-white uppercase tracking-widest shadow-lg shadow-orange-500/40",children:"250 kr/mn"})]}),d.jsx("p",{className:"text-orange-300 font-bold tracking-wide uppercase text-[10px]",children:"Fr dig som vill vxa, pverka och frdjupa din process"})]}),d.jsx("p",{className:"text-slate-300 leading-relaxed text-sm md:text-base font-light",children:"Hr fr du tillgng till hela verktygsldan. Premium r utformat fr att ge dig handlingsutrymme. Det handlar inte bara om att f std, utan om mjligheten att sjlv vara en aktiv skapare av din trygghet och din utveckling."}),d.jsx("ul",{className:"space-y-4 pt-4 border-t border-orange-500/10",children:[{title:"Obegrnsad Chat & Trdar",desc:"Skriv fritt i den offentliga trden och f tillgng till privata trdar."},{title:"Bli din egen mtesledare",desc:"Mjlighet att (till rabatterat pris) hyra vra skra videorum fr egna grupper."},{title:"Kunskapsbanken",desc:"Fri nedladdning av arbetsblad, mallar och filer som stttar din resa."},{title:"Frtur & Rabatter",desc:"F frtur till workshops och event som Klttertrdet anordnar."}].map((a,s)=>d.jsxs("li",{className:"flex gap-3 items-start",children:[d.jsx(op,{size:14,className:"text-orange-400 mt-1 shrink-0"}),d.jsxs("div",{className:"text-sm",children:[d.jsxs("span",{className:"font-bold text-white mr-1",children:[a.title,":"]}),d.jsx("span",{className:"text-slate-400 font-light leading-relaxed",children:a.desc})]})]},s))}),d.jsx("div",{className:"bg-orange-500/5 p-3 rounded-xl border border-orange-500/10",children:d.jsx("p",{className:"text-orange-200/90 text-xs font-medium italic text-center",children:"Ingen bindningstid. Investera i din egen och andras hllbarhet."})})]}),d.jsxs("div",{className:"flex flex-col gap-3 mt-8",children:[d.jsxs("button",{onClick:()=>{window.location.hash="#premium-login",t(Te.GEMENSKAP_APP)},className:"w-full py-4 bg-white/10 hover:bg-white/20 border border-white/10 rounded-2xl font-black text-white transition-all flex items-center justify-center gap-2 uppercase tracking-widest text-xs",children:["Logga in ",d.jsx(Vi,{size:18})]}),d.jsx("button",{onClick:()=>t(Te.PREMIUM_APPLICATION),className:"w-full py-4 bg-orange-500 hover:bg-orange-400 text-white rounded-2xl font-black transition-all flex items-center justify-center gap-2 uppercase tracking-widest text-xs shadow-2xl shadow-orange-500/20",children:"Ansk om medlemskap"}),n&&d.jsxs("button",{onClick:e,className:"bg-zinc-800 text-white border border-zinc-700 hover:bg-zinc-700/80 transition-all shadow-lg hover:shadow-xl font-bold py-3 px-6 rounded-xl flex items-center justify-center gap-2 transform hover:-translate-y-0.5 active:translate-y-0 w-full",children:[d.jsx(fE,{size:18,className:"text-orange-400"})," Installera Appen"]})]})]})]}),d.jsx("div",{className:"text-center",children:d.jsxs("button",{onClick:()=>{window.location.hash="#login",t(Te.GEMENSKAP_APP)},className:"text-white/40 hover:text-orange-400 transition-colors text-sm font-bold flex items-center gap-2 mx-auto",children:["Redan medlem? ",d.jsx("span",{className:"underline underline-offset-4",children:"Logga in hr"})]})})]}),n&&d.jsxs("div",{onClick:e,className:"fixed bottom-0 left-0 w-full pointer-events-none z-50 overflow-hidden",style:{height:"150px"},children:[d.jsx("style",{children:`
                        @keyframes walkAcross {
                            0% { transform: translateX(-150px) scaleX(1); }
                            49% { transform: translateX(100vw) scaleX(1); }
                            50% { transform: translateX(100vw) scaleX(-1); }
                            99% { transform: translateX(-150px) scaleX(-1); }
                            100% { transform: translateX(-150px) scaleX(1); }
                        }
                        @keyframes bob {
                            0%, 100% { transform: translateY(0); }
                            50% { transform: translateY(-5px); }
                        }
                        .walking-goat {
                            animation: walkAcross 60s linear infinite;
                            cursor: pointer;
                            pointer-events: auto;
                        }
                        .walking-goat:hover {
                            filter: drop-shadow(0 0 10px rgba(255, 165, 0, 0.5));
                        }
                        .goat-body {
                            animation: bob 0.5s ease-in-out infinite;
                        }
                    `}),d.jsxs("div",{className:"walking-goat absolute bottom-4",title:"Klicka fr att installera!",children:[d.jsx("div",{className:"goat-body w-24 h-24",children:d.jsx("img",{src:"/walking_goat.png",alt:"Walking Goat",className:"w-full h-full object-contain",style:{mixBlendMode:"screen"}})}),d.jsx("div",{className:"bg-white/90 text-black text-[10px] font-bold px-2 py-1 rounded-full absolute -top-8 left-1/2 -translate-x-1/2 whitespace-nowrap opacity-0 hover:opacity-100 transition-opacity",children:"Installera mig! "})]})]}),d.jsx(I7,{isOpen:r,onClose:()=>i(!1)})]})},jSe=({setPage:t})=>d.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-12 md:py-24 animate-fade-in space-y-24",children:[d.jsxs("section",{className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-[3rem] p-8 md:p-20 relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-2/3 h-full bg-gradient-to-l from-amber-500/10 to-transparent pointer-events-none"}),d.jsxs("div",{className:"relative z-10 grid lg:grid-cols-2 gap-12 items-center",children:[d.jsxs("div",{className:"space-y-8",children:[d.jsx("div",{className:"inline-block px-4 py-1 bg-amber-500/20 rounded-full border border-amber-500/30 text-amber-500 text-xs font-black uppercase tracking-widest",children:"Nyutgiven Bok"}),d.jsxs("h1",{className:"text-4xl md:text-7xl font-bold leading-tight text-white",children:["Myndighetsinducerat trauma ",d.jsx("br",{}),d.jsx("span",{className:"text-2xl md:text-4xl font-light text-amber-200/80 block mt-4",children:" frn subjekt till objekt"})]}),d.jsx("p",{className:"text-lg md:text-xl text-white/80 leading-relaxed font-light",children:"Vr nyutgivna bok r en djupdykning i hur systemet kan skada och hur vi kan lka. Men boken r mer n bara text  den r en guide till din terhmtning."}),d.jsx("div",{className:"flex flex-wrap gap-4 pt-4",children:d.jsxs("button",{onClick:()=>t(Te.CHECKOUT),className:"px-8 py-4 bg-amber-500 hover:bg-amber-400 text-slate-950 rounded-2xl font-black transition-all hover:scale-105 shadow-2xl shadow-amber-500/20 flex items-center gap-2",children:["Bestll boken hr ",d.jsx(Vi,{size:20})]})})]}),d.jsx("div",{className:"hidden lg:flex justify-end",children:d.jsxs("div",{className:"relative w-80 h-96",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-amber-500/20 to-transparent rounded-[2rem] blur-3xl animate-pulse"}),d.jsx("div",{className:"relative glass bg-white/5 border border-white/10 rounded-[2rem] shadow-2xl overflow-hidden transform rotate-3 hover:rotate-0 transition-all duration-500",children:d.jsx("img",{src:"/booklet.jpeg",alt:"Bokomslag",className:"w-full h-full object-contain p-4"})})]})})]})]}),d.jsx("section",{className:"glass bg-gradient-to-br from-blue-500/10 to-transparent border border-blue-500/20 rounded-[2.5rem] p-8 md:p-12",children:d.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[d.jsx("div",{className:"w-16 h-16 bg-blue-500/20 rounded-2xl flex items-center justify-center text-blue-400 shrink-0",children:d.jsx(fE,{size:32})}),d.jsx("blockquote",{className:"text-xl md:text-2xl font-medium text-blue-100/90 italic leading-relaxed",children:'"Tillhrande boken finns en stor mngd sjlvhjlpsmaterial och praktiska vningar i appen, skapade fr att ge dig verktygen att navigera i din egen lkningsprocess."'})]})}),d.jsxs("section",{className:"grid md:grid-cols-2 gap-12 items-start",children:[d.jsxs("div",{className:"space-y-8",children:[d.jsx("h2",{className:"text-3xl md:text-5xl font-bold text-white",children:"Vad innehller boken?"}),d.jsx("div",{className:"grid gap-6",children:[{title:"Neurobiologisk frstelse",text:"Hur kroppen och nervsystemet reagerar p strukturellt svek."},{title:"Self-care modellen",text:"Praktiska verktyg fr sjlvreglering och lkning."},{title:"Fallstudier",text:"Verkliga berttelser frn mnniskor som navigerat systemet."},{title:"Praktiska vningar",text:"Steg-fr-steg-guider fr bearbetning och terhmtning."},{title:"Frn subjekt till objekt",text:"Vad r systemdriven objektifiering och vad sger forskningen?"}].map((e,n)=>d.jsxs("div",{className:"flex items-start gap-4 group",children:[d.jsx("div",{className:"p-1 mt-1",children:d.jsx(xf,{className:"text-amber-500 w-6 h-6"})}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("h3",{className:"text-lg font-bold text-white group-hover:text-amber-400 transition-colors uppercase tracking-tight",children:e.title}),d.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:e.text})]})]},n))})]}),d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-[2.5rem] p-8 md:p-12 space-y-8",children:[d.jsx("h2",{className:"text-3xl md:text-5xl font-bold text-white",children:"Fr vem r boken?"}),d.jsxs("div",{className:"space-y-6 text-zinc-300 leading-relaxed text-lg",children:[d.jsx("p",{children:"Denna bok vnder sig till dig som har upplevt att mtet med myndigheter blivit mer skadligt n hjlpsamt."}),d.jsx("div",{className:"p-6 bg-white/5 rounded-2xl border border-white/5",children:d.jsxs("p",{className:"text-white/90 font-medium",children:["Men den r ocks ovrderlig fr professionella  ",d.jsx("span",{className:"text-amber-400",children:"socialsekreterare, terapeuter, behandlingspedagoger"}),"  som vill frst och bemta myndighetsinducerat trauma med strre medvetenhet och empati."]})})]}),d.jsx("div",{className:"pt-8 border-t border-white/10",children:d.jsxs("div",{className:"flex items-center gap-4 text-zinc-400",children:[d.jsx(uo,{className:"text-amber-500/50"}),d.jsx("p",{className:"text-sm italic",children:"Baserad p mngrig forskning och praktisk erfarenhet inom TMO."})]})})]})]}),d.jsx("section",{className:"text-center py-12",children:d.jsx("div",{className:"max-w-3xl mx-auto space-y-8",children:d.jsxs("div",{className:"p-8 glass bg-white/5 border border-white/10 rounded-[2.5rem]",children:[d.jsx("p",{className:"text-xl text-amber-200 font-bold mb-6",children:"Slpps inom en snar framtid  skra ditt exemplar nu."}),d.jsx("button",{onClick:()=>t(Te.CHECKOUT),className:"inline-block bg-amber-500 hover:bg-amber-400 text-slate-950 px-12 py-5 rounded-2xl text-xl font-black transition-all hover:scale-105 shadow-2xl shadow-amber-500/20",children:"Frhandsbestll boken hr"})]})})})]}),DSe=({setPage:t})=>d.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-12 animate-fade-in max-w-4xl space-y-16",children:[d.jsxs("button",{onClick:()=>t(Te.HOME),className:"flex items-center gap-2 text-white/60 hover:text-white transition-colors group",children:[d.jsx(Jo,{size:20,className:"group-hover:-translate-x-1 transition-transform"}),"Tillbaka"]}),d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-[3rem] p-8 md:p-16 relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-green-500/10 to-transparent pointer-events-none"}),d.jsxs("div",{className:"relative z-10 space-y-4",children:[d.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-white tracking-tight",children:"Integritetspolicy"}),d.jsx("p",{className:"text-slate-400 text-sm font-medium uppercase tracking-widest",children:"Senast uppdaterad: 22/1-2026"}),d.jsx("div",{className:"pt-6 border-t border-white/10",children:d.jsx("p",{className:"text-slate-300 font-bold",children:"Personuppgiftsansvarig: Klttertrdet AB (Org. nr: 559267-4732)"})})]})]}),d.jsxs("div",{className:"space-y-12",children:[d.jsxs("section",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center gap-3 text-orange-400",children:[d.jsx(jc,{size:28}),d.jsx("h3",{className:"text-2xl font-bold text-white uppercase tracking-tight",children:"1. Vrt lfte till dig"})]}),d.jsx("p",{className:"text-slate-300 text-lg leading-relaxed font-light italic",children:'"Fr att du ska vga vara srbar och dela dina erfarenheter krvs det att du vet exakt var dina ord tar vgen. Vi ser dina personuppgifter som en frlngning av din personliga integritet."'}),d.jsx("p",{className:"text-slate-400 leading-relaxed",children:'Vi sljer aldrig dina uppgifter. Vi delar dem inte med tredje part fr marknadsfring. Din data stannar i vr "trygga hamn".'})]}),d.jsxs("section",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 md:p-12 space-y-8",children:[d.jsxs("div",{className:"flex items-center gap-3 text-blue-400",children:[d.jsx(gY,{size:24}),d.jsx("h3",{className:"text-xl font-bold text-white uppercase tracking-tight",children:"2. Vilka uppgifter samlar vi in och varfr?"})]}),d.jsxs("div",{className:"grid gap-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"text-white font-bold",children:"Identifikation (BankID)"}),d.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Vi lagrar inte ditt personnummer synligt fr andra, men vi anvnder BankID vid registrering fr att verifiera att du r en verklig person. Detta skyddar communityt frn troll och falska profiler."})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"text-white font-bold",children:"Anvndargenererat innehll"}),d.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Det du skriver i chatten och forumet sparas p skra servrar fr att tjnsten ska fungera."})]})]})]}),d.jsxs("section",{className:"space-y-8",children:[d.jsxs("div",{className:"flex items-center gap-3 text-green-400",children:[d.jsx(lp,{size:24}),d.jsx("h3",{className:"text-xl font-bold text-white uppercase tracking-tight",children:"3. Hur skyddas din information?"})]}),d.jsx("p",{className:"text-slate-300 leading-relaxed font-light",children:"All trafik mellan din telefon/dator och vra servrar r krypterad (SSL/TLS). Vi anvnder moderna databaser med hg skerhetsklassning (AES-256 kryptering vid vila)."})]}),d.jsxs("section",{className:"glass bg-gradient-to-br from-orange-500/10 to-transparent border border-orange-500/20 rounded-[2.5rem] p-8 md:p-12 space-y-6",children:[d.jsxs("div",{className:"flex items-center gap-3 text-orange-400",children:[d.jsx(OY,{size:24}),d.jsx("h3",{className:"text-xl font-bold text-white uppercase tracking-tight",children:"4. Skillnad p Chat och Journal"})]}),d.jsxs("div",{className:"space-y-4 text-slate-300",children:[d.jsx("div",{className:"p-4 bg-white/5 rounded-xl border border-white/5",children:d.jsxs("p",{children:[d.jsx("strong",{children:"Chatten/Appen:"})," Det du skriver i Horizonten-appen rknas inte som hlso- och sjukvrdsjournal. Det r ett medlemsforum."]})}),d.jsx("div",{className:"p-4 bg-white/5 rounded-xl border border-white/5",children:d.jsxs("p",{children:[d.jsx("strong",{children:"Terapi hos Klttertrdet:"})," Om du gr i enskild terapi frs lagstadgad patientjournal i ett helt separat, skert system (enligt Patientdatalagen). Dessa tv system r tskilda."]})})]})]}),d.jsxs("section",{className:"grid md:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("h4",{className:"text-white font-bold flex items-center gap-2 tracking-tight uppercase text-sm",children:[d.jsx(UY,{size:18,className:"text-blue-400"})," 6. Dina rttigheter (GDPR)"]}),d.jsxs("ul",{className:"text-slate-400 text-xs space-y-2 leading-relaxed",children:[d.jsx("li",{children:" F ett utdrag p all data vi har om dig."}),d.jsx("li",{children:" Begra rttelse av felaktiga uppgifter."}),d.jsx("li",{children:' Begra att bli helt raderad ("Rtten att bli bortglmd").'})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("h4",{className:"text-white font-bold flex items-center gap-2 tracking-tight uppercase text-sm",children:[d.jsx(wv,{size:18,className:"text-orange-400"})," 7. Kontakt"]}),d.jsxs("p",{className:"text-slate-400 text-xs leading-relaxed",children:["Klttertrdet AB",d.jsx("br",{}),"Gullregnsgatan 9A, Gvle",d.jsx("br",{}),"E-post: billy@klattertradet.se"]})]})]})]})]}),LSe=({setPage:t})=>d.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-12 animate-fade-in max-w-4xl",children:[d.jsxs("button",{onClick:()=>t(Te.HOME),className:"flex items-center gap-2 text-white/60 hover:text-white transition-colors mb-8 group",children:[d.jsx(Jo,{size:20,className:"group-hover:-translate-x-1 transition-transform"}),"Tillbaka"]}),d.jsxs("div",{className:"space-y-12",children:[d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-[2.5rem] p-8 md:p-16 relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-orange-500/10 to-transparent pointer-events-none"}),d.jsxs("div",{className:"relative z-10 space-y-6",children:[d.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-white leading-tight",children:"Din data, ditt val"}),d.jsx("h2",{className:"text-2xl md:text-3xl font-light text-amber-200/80 italic",children:" Vr Cookiepolicy"}),d.jsxs("div",{className:"flex items-center gap-4 pt-4 border-t border-white/10",children:[d.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-500/10 flex items-center justify-center text-orange-400",children:d.jsx(jc,{size:24})}),d.jsx("p",{className:"text-slate-300 font-medium",children:"Transparens och samtycke r vra grundstenar."})]})]})]}),d.jsx("div",{className:"space-y-6 text-lg text-slate-300 leading-relaxed font-light",children:d.jsx("p",{children:"Precis som i vra utbildningar och i terapirummet r transparens och samtycke grundstenar i vr verksamhet. Vi vill att du ska knna dig trygg med hur vi hanterar information om dig nr du besker oss digitalt."})}),d.jsxs("div",{className:"space-y-16",children:[d.jsxs("section",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(uE,{className:"text-amber-500"}),d.jsx("h3",{className:"text-2xl font-bold text-white uppercase tracking-tight",children:"Vad r en Cookie?"})]}),d.jsx("p",{className:"text-slate-400",children:'En cookie r en liten textfil som sparas p din enhet (dator eller mobil). Man kan se det som ett litet digitalt minne som hjlper hemsidan att komma ihg dina val. Det finns dock olika typer av "minnen", och vi skiljer noga p dem:'})]}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 hover:bg-white/10 transition-colors",children:[d.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-2xl flex items-center justify-center text-blue-400 mb-6",children:d.jsx(uo,{size:24})}),d.jsx("h4",{className:"text-xl font-bold text-white mb-4",children:"1. Ndvndiga Cookies"}),d.jsxs("p",{className:"text-slate-400 text-sm leading-relaxed",children:["Dessa r hemsidans ",d.jsx("strong",{children:'"autonoma nervsystem"'}),". Utan dessa fungerar inte sidan. De hller koll p grundlggande funktioner, som skerhet eller vad du lagt i varukorgen om du bokar en utbildning."]})]}),d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 hover:bg-white/10 transition-colors",children:[d.jsx("div",{className:"w-12 h-12 bg-orange-500/10 rounded-2xl flex items-center justify-center text-orange-400 mb-6",children:d.jsx(XH,{size:24})}),d.jsx("h4",{className:"text-xl font-bold text-white mb-4",children:"2. Funktions- & Analyscookies"}),d.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Dessa anvnder vi fr att se hur beskare rr sig p sidan, s att vi kan frbttra vrt innehll och vra tjnster. Det handlar om att frst mnster  lite som vi kartlgger mnster i Self-care modellen."})]})]}),d.jsxs("section",{className:"glass bg-gradient-to-br from-white/5 to-transparent border border-white/10 rounded-[2.5rem] p-8 md:p-12 space-y-8",children:[d.jsx("h3",{className:"text-2xl font-bold text-white uppercase tracking-tight",children:'Ditt samtycke r "Frivilligt, Specifikt och Otvetydigt"'}),d.jsxs("div",{className:"grid gap-6 text-slate-300 text-sm",children:[d.jsxs("div",{className:"flex gap-4",children:[d.jsx(lp,{className:"text-amber-500 shrink-0",size:20}),d.jsxs("p",{children:[d.jsx("strong",{children:"Inget antagande:"}),' Vi sprar inget (frutom de strikt ndvndiga) frrn du aktivt klickat "OK".']})]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx(WH,{className:"text-amber-500 shrink-0",size:20}),d.jsxs("p",{children:[d.jsx("strong",{children:"Du kan ndra dig:"})," Du kan nr som helst dra tillbaka ditt samtycke via instllningarna. Det r en del av din Self-care att stta grnser."]})]})]})]}),d.jsxs("section",{className:"text-center space-y-4",children:[d.jsx("p",{className:"text-slate-400 text-sm",children:"Frgor? Maila Billy Ljungberg direkt p:"}),d.jsx("a",{href:"mailto:billy@klattertradet.se",className:"text-orange-400 font-bold hover:underline",children:"billy@klattertradet.se"})]})]})]})]}),USe=({setPage:t})=>d.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-12 animate-fade-in max-w-4xl space-y-16",children:[d.jsxs("button",{onClick:()=>t(Te.HOME),className:"flex items-center gap-2 text-white/60 hover:text-white transition-colors group",children:[d.jsx(Jo,{size:20,className:"group-hover:-translate-x-1 transition-transform"}),"Tillbaka"]}),d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-[3rem] p-8 md:p-16 relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-blue-500/10 to-transparent pointer-events-none"}),d.jsxs("div",{className:"relative z-10 space-y-6",children:[d.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-white leading-tight",children:"Medlemsvillkor"}),d.jsx("h2",{className:"text-2xl md:text-3xl font-light text-blue-200/80 italic",children:"Horizonten Gemenskap"})]})]}),d.jsxs("div",{className:"space-y-12",children:[d.jsxs("section",{className:"space-y-8",children:[d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-500/10 flex items-center justify-center text-blue-400 shrink-0",children:d.jsx(HH,{size:24})}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-2xl font-bold text-white uppercase tracking-tight",children:"1. Din digitala trygga hamn"}),d.jsx("p",{className:"text-slate-300 leading-relaxed",children:"Genom att klicka p Jag godknner kliver du in i en gemenskap som drivs av Klttertrdet AB och Horizonten. Vi r glada att du r hr. Dessa villkor finns till fr att skydda din och gruppens integritet  en frutsttning fr verklig terhmtning."})]})]}),d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"w-12 h-12 rounded-2xl bg-orange-500/10 flex items-center justify-center text-orange-400 shrink-0",children:d.jsx(Zo,{size:24})}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-2xl font-bold text-white uppercase tracking-tight",children:"2. Syftet: En plats fr lkning och std"}),d.jsx("p",{className:"text-slate-300 leading-relaxed",children:"Denna chatt r en mtesplats fr vrdnadshavare och individer som sker std och gemenskap. Vi vet att ensamhet r ett av vra strsta grundsr. Hr motverkar vi det genom kta kontakt och igenknning."})]})]})]}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 space-y-6",children:[d.jsxs("div",{className:"flex items-center gap-3 text-amber-400",children:[d.jsx(jc,{size:24}),d.jsx("h3",{className:"text-xl font-bold",children:"3. Identitet & Skerhet"})]}),d.jsxs("ul",{className:"space-y-4 text-sm text-slate-400 leading-relaxed",children:[d.jsxs("li",{children:[d.jsx("strong",{className:"text-white",children:"kthet:"})," Du registrerar dig med BankID fr att skapa en sker milj fri frn troll. Trygghet brjar med transparens."]}),d.jsxs("li",{children:[d.jsx("strong",{className:"text-white",children:"En vuxen, ett konto:"})," Delade konton tillts inte. Detta r din plats fr terhmtning."]})]})]}),d.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 space-y-6",children:[d.jsxs("div",{className:"flex items-center gap-3 text-green-400",children:[d.jsx(Gi,{size:24}),d.jsx("h3",{className:"text-xl font-bold",children:"4. Vr gemensamma trygghet"})]}),d.jsxs("ul",{className:"space-y-4 text-sm text-slate-400 leading-relaxed",children:[d.jsxs("li",{children:[d.jsx("strong",{className:"text-white",children:"Respekt:"})," Krnkningar eller hot aktiverar hot-systemet hos andra och leder till omedelbar uteslutning."]}),d.jsxs("li",{children:[d.jsx("strong",{className:"text-white",children:"Integritet:"})," Dela aldrig bilder p andras barn eller skrmdumpa. Det som sgs i rummet stannar dr."]}),d.jsxs("li",{children:[d.jsx("strong",{className:"text-white",children:"Reklamfritt:"})," Vi r hr fr mnsklig kontakt, inte frsljning."]})]})]})]}),d.jsxs("section",{className:"space-y-12",children:[d.jsxs("div",{className:"glass bg-gradient-to-br from-white/5 to-transparent border border-white/10 rounded-[2.5rem] p-8 md:p-12 space-y-6",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(GH,{className:"text-blue-400"}),d.jsx("h3",{className:"text-2xl font-bold text-white",children:"5. Reglering av gruppen (Moderering)"})]}),d.jsxs("p",{className:"text-slate-300 leading-relaxed",children:["Vra moderatorer fungerar som gruppens ",d.jsx("strong",{children:'"prefrontala cortex"'}),". De hjlper till att hlla ordning och snka stressnivn. Om ngon agerar p ett stt som skadar gruppens trygghet kan vi behva pausa kontot. Detta r en ndvndig grnsdragning fr kollektivets bsta."]})]}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("h4",{className:"text-xl font-bold text-white flex items-center gap-2",children:[d.jsx(lp,{size:20,className:"text-orange-400"})," 6. Sekretess & Data"]}),d.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Vi skyddar dina uppgifter stenhrt (GDPR). Mnga hr har erfarenhet av myndighetsinducerat trauma  drfr r din datahelgd vr hgsta prioritet."})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("h4",{className:"text-xl font-bold text-white flex items-center gap-2",children:[d.jsx(uE,{size:20,className:"text-blue-400"})," 7. Ansvarsfriskrivning"]}),d.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Horizonten r en stdjande gemenskap, inte klinisk terapi. Vid behov av professionell traumabehandling hnvisar vi till vr mottagning."})]})]})]}),d.jsx("div",{className:"pt-16 border-t border-white/10",children:d.jsxs("div",{className:"glass bg-gradient-to-tr from-amber-500/10 to-orange-500/5 border border-amber-500/20 rounded-[3rem] p-8 md:p-16 relative overflow-hidden",children:[d.jsx("div",{className:"absolute -right-20 -bottom-20 w-64 h-64 bg-amber-500/10 rounded-full blur-3xl"}),d.jsxs("div",{className:"relative z-10 space-y-8",children:[d.jsx("div",{className:"inline-block px-4 py-1 bg-amber-500/20 rounded-full border border-amber-500/30 text-amber-500 text-xs font-black uppercase tracking-widest",children:"Uppgradera din upplevelse"}),d.jsx("h2",{className:"text-3xl md:text-5xl font-bold text-white",children:"HORIZONTEN PREMIUM"}),d.jsx("p",{className:"text-xl text-amber-200/90 font-light italic",children:" Investera i din hllbarhet"}),d.jsx("div",{className:"space-y-6 text-slate-300 leading-relaxed",children:d.jsx("p",{children:"Varfr bli betalande medlem? Den fria chatten ger dig gemenskapen. Premium-medlemskapet ger dig verktygen fr frndring. Min vision med Horizonten r att demokratisera kunskapen om hur vi fungerar."})}),d.jsxs("div",{className:"grid sm:grid-cols-2 gap-6 pt-6",children:[d.jsxs("div",{className:"bg-white/5 p-6 rounded-2xl border border-white/5 space-y-3",children:[d.jsxs("div",{className:"flex items-center gap-2 font-bold text-white",children:[d.jsx(BY,{size:18,className:"text-amber-400"})," Frdjupning"]}),d.jsx("p",{className:"text-xs text-slate-400",children:"Exklusivt material om traumateori och bottom-up-metoder."})]}),d.jsxs("div",{className:"bg-white/5 p-6 rounded-2xl border border-white/5 space-y-3",children:[d.jsxs("div",{className:"flex items-center gap-2 font-bold text-white",children:[d.jsx(xY,{size:18,className:"text-amber-400"})," Frmner"]}),d.jsx("p",{className:"text-xs text-slate-400",children:"Rabatter p utbildningar och frtur till nya funktioner."})]})]})]})]})})]})]}),zSe="modulepreload",BSe=function(t){return"/"+t},z8={},eS=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let u=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var s=u;document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");i=u(n.map(h=>{if(h=BSe(h),h in z8)return;z8[h]=!0;const m=h.endsWith(".css"),v=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${v}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":zSe,m||(x.as="script"),x.crossOrigin="",x.href=h,c&&x.setAttribute("nonce",c),document.head.appendChild(x),m)return new Promise((_,T)=>{x.addEventListener("load",_),x.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})};var af=(t=>(t.IDLE="IDLE",t.LOADING="LOADING",t.AUTHENTICATED="AUTHENTICATED",t.UNAUTHENTICATED="UNAUTHENTICATED",t.ERROR="ERROR",t))(af||{});const FSe=({onLoginSuccess:t,initialView:e="login",onNavigateToPremium:n,onNavigateToTerms:r,onNavigateToPrivacy:i,onNavigateToCookies:a,onNavigateToContact:s})=>{const[o,c]=J.useState(e==="login"),[u,h]=J.useState(""),[m,v]=J.useState(""),[x,_]=J.useState(""),[T,w]=J.useState(!1),[E,N]=J.useState(null),[C,P]=J.useState(null),[I,j]=J.useState(!1),O=async F=>{F.preventDefault(),w(!0),N(null),P(null);try{if(o){const{data:L,error:z}=await Tn.auth.signInWithPassword({email:u,password:m});z?(N(z.message),w(!1)):L.user&&(console.log("Login successful:",L.user),await Tn.from("login_events").insert({user_id:L.user.id,logged_in_at:new Date().toISOString()}))}else{const{data:L,error:z}=await Tn.auth.signUp({email:u,password:m,options:{emailRedirectTo:window.location.origin,data:{full_name:x,avatar_url:""}}});z?(N(z.message),w(!1)):L.user&&(await Tn.from("profiles").upsert({id:L.user.id,email:u,full_name:x,membership_level:2,membership_active:!0,updated_at:new Date().toISOString()}),L.session?console.log("Signup successful, session created"):(P("Tack fr din registrering! Ett bekrftelsemail har skickats till din e-post. Klicka p lnken i mailet fr att aktivera ditt konto och kunna logga in."),c(!0)),w(!1))}}catch{N("Ett ovntat fel uppstod."),w(!1)}};return d.jsxs("div",{className:"w-full max-w-md",children:[d.jsx("div",{className:"text-center mb-10 selection:bg-orange-500/30",children:d.jsx("div",{className:"inline-flex items-center justify-center mb-6",children:d.jsx("img",{src:"/assets/logo2.png",alt:"Klttertrdet & Horizonten",className:"h-24 md:h-28 w-auto object-contain drop-shadow-2xl"})})}),d.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl p-8 rounded-3xl shadow-2xl border border-slate-800",children:[d.jsxs("form",{onSubmit:O,className:"space-y-6",children:[E&&d.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 p-4 rounded-xl flex items-start gap-3 animate-in fade-in slide-in-from-top-2",children:[d.jsx(fY,{className:"text-red-400 shrink-0 mt-0.5",size:18}),d.jsx("p",{className:"text-sm text-red-200",children:E})]}),C&&d.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 p-4 rounded-xl flex items-start gap-3 animate-in fade-in slide-in-from-top-2",children:[d.jsx(jc,{className:"text-green-400 shrink-0 mt-0.5",size:18}),d.jsx("p",{className:"text-sm text-green-200",children:C})]}),!o&&d.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4",children:[d.jsx("label",{className:"block text-xs font-bold uppercase tracking-widest text-slate-400 mb-2 ml-1",children:"Namn (Visas fr andra)"}),d.jsx("input",{type:"text",value:x,onChange:F=>_(F.target.value),placeholder:"Frnamn Efternamn","aria-label":"Namn",required:!o,className:"w-full bg-slate-800/50 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 transition-all"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold uppercase tracking-widest text-slate-400 mb-2 ml-1",children:"E-post"}),d.jsx("input",{type:"email",value:u,onChange:F=>h(F.target.value),placeholder:"namn@exempel.se","aria-label":"E-post",required:!0,className:"w-full bg-slate-800/50 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 transition-all"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold uppercase tracking-widest text-slate-400 mb-2 ml-1",children:"Lsenord"}),d.jsx("input",{type:"password",value:m,onChange:F=>v(F.target.value),placeholder:"","aria-label":"Lsenord",required:!0,minLength:6,className:"w-full bg-slate-800/50 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 transition-all"})]}),!o&&d.jsxs("div",{className:"flex items-start gap-3 mt-4 animate-in fade-in slide-in-from-top-2",children:[d.jsx("input",{type:"checkbox",id:"terms",checked:I,onChange:F=>j(F.target.checked),className:"mt-1 w-4 h-4 bg-slate-800 border-slate-700 rounded text-orange-500 focus:ring-orange-500/50"}),d.jsxs("label",{htmlFor:"terms",className:"text-sm text-slate-400 leading-tight",children:["Jag godknner"," ",d.jsx("button",{type:"button",onClick:r,className:"text-blue-400 hover:text-blue-300 underline font-medium",children:"medlemsvillkoren"})," ","och att mina uppgifter hanteras enligt integritetspolicyn."]})]}),d.jsx("button",{type:"submit",disabled:T||!o&&!I,className:"w-full bg-orange-500 hover:bg-orange-400 disabled:bg-orange-500/30 disabled:text-slate-800 disabled:cursor-not-allowed text-slate-950 font-bold py-4 rounded-xl shadow-lg shadow-orange-500/20 flex items-center justify-center gap-2 group transition-all",children:T?d.jsx(xO,{className:"animate-spin",size:20}):d.jsxs(d.Fragment,{children:[o?"Logga in":"Skapa konto",d.jsx(Vi,{className:"group-hover:translate-x-1 transition-transform",size:20})]})}),!o&&n&&d.jsx("button",{type:"button",onClick:n,className:"w-full mt-4 bg-slate-800 hover:bg-slate-700 text-white font-bold py-4 rounded-xl border border-slate-700 transition-all shadow-lg flex items-center justify-center gap-2 text-sm uppercase tracking-wider",children:"Till premium medlemskapet"})]}),d.jsx("div",{className:"mt-8 pt-6 border-t border-slate-800 text-center",children:d.jsxs("p",{className:"text-slate-500 text-sm",children:[o?"Ingen tillgng?":"Har du redan ett konto?"," ",d.jsx("button",{onClick:()=>c(!o),className:"text-orange-400 hover:text-orange-300 font-semibold underline underline-offset-4 focus:outline-none",children:o?"Skapa ett konto":"Logga in hr"})]})})]}),d.jsxs("div",{className:"mt-12 text-center",children:[d.jsx("p",{className:"text-slate-600 text-xs mb-4",children:" 2024 Horizonten Network. Alla rttigheter frbehllna."}),d.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-[10px] text-slate-500 uppercase tracking-wider font-medium",children:[d.jsx("button",{onClick:()=>window.alert("Du mste vara inloggad fr att ndra kontoinstllningar."),className:"hover:text-orange-400 transition-colors",children:"Kontoinstllningar"}),d.jsx("button",{onClick:r,className:"hover:text-orange-400 transition-colors",children:"Medlemsvillkor"}),d.jsx("button",{onClick:i,className:"hover:text-orange-400 transition-colors",children:"Integritets- & Sekretesspolicy"}),d.jsx("button",{onClick:a,className:"hover:text-orange-400 transition-colors",children:"Cookie-instllningar"}),d.jsx("button",{onClick:s,className:"hover:text-orange-400 transition-colors",children:"Kontakt"})]})]})]})},VSe=({onLoginSuccess:t,onBack:e,isStandalone:n})=>{const[r,i]=J.useState(""),[a,s]=J.useState(""),[o,c]=J.useState(!1),[u,h]=J.useState(null),m=async v=>{v.preventDefault(),c(!0),h(null);try{const{data:x,error:_}=await Tn.auth.signInWithPassword({email:r,password:a});_?(h(_.message),c(!1)):x.user&&(console.log("Premium Login successful:",x.user),await Tn.from("login_events").insert({user_id:x.user.id,logged_in_at:new Date().toISOString()}))}catch{h("Ett ovntat fel uppstod."),c(!1)}};return d.jsxs("div",{className:"w-full max-w-md animate-in fade-in zoom-in-95 duration-700",children:[d.jsxs("div",{className:"text-center mb-10",children:[d.jsxs("div",{className:"inline-flex items-center justify-center gap-3 mb-6",children:[d.jsx("img",{src:"/assets/logo2.png",alt:"Horizonten gemenskap",className:"w-14 h-14 object-contain"}),d.jsx("span",{className:"text-white text-xl font-medium",children:"Horizonten gemenskap"})]}),d.jsx("h1",{className:"text-2xl sm:text-3xl text-white font-light tracking-wide",children:"Logga in p ditt konto"}),d.jsx("p",{className:"text-slate-400 mt-3 text-sm",children:"Vlkommen tillbaka till vr community fr betalmedlemmar"})]}),d.jsxs("form",{onSubmit:m,className:"space-y-6",children:[u&&d.jsx("div",{className:"bg-red-500/10 border border-red-500/20 p-4 rounded-xl text-sm text-red-200 animate-bounce-subtle",children:u}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-300 mb-2",children:"E-postadress"}),d.jsx("input",{id:"email",type:"email",value:r,onChange:v=>i(v.target.value),required:!0,placeholder:"din@email.se",className:"w-full px-4 py-3 bg-white/5 border border-white/20 rounded-lg text-white placeholder:text-white/20 focus:outline-none focus:border-[#b35c2a] focus:ring-1 focus:ring-[#b35c2a] transition-colors"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-300 mb-2",children:"Lsenord"}),d.jsx("input",{id:"password",type:"password",value:a,onChange:v=>s(v.target.value),required:!0,placeholder:"Ange ditt lsenord",className:"w-full px-4 py-3 bg-white/5 border border-white/20 rounded-lg text-white placeholder:text-white/20 focus:outline-none focus:border-[#b35c2a] focus:ring-1 focus:ring-[#b35c2a] transition-colors"})]}),d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[d.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-white/20 bg-white/5 text-[#b35c2a] focus:ring-[#b35c2a] focus:ring-offset-0"}),d.jsx("span",{className:"text-slate-400 group-hover:text-slate-200 transition-colors",children:"Kom ihg mig"})]}),d.jsx("button",{type:"button",className:"text-[#b35c2a] hover:text-[#9a4f24] transition-colors",children:"Glmt lsenord?"})]}),d.jsx("button",{type:"submit",disabled:o,className:"w-full px-8 py-3 bg-[#b35c2a] hover:bg-[#9a4f24] disabled:bg-[#b35c2a]/50 text-white font-medium rounded-lg transition-all duration-200 shadow-lg shadow-[#b35c2a]/20 flex items-center justify-center gap-2",children:o?d.jsx(xO,{className:"animate-spin",size:20}):"Logga in"})]}),!n&&d.jsx("div",{className:"mt-8 text-center",children:d.jsxs("p",{className:"text-slate-500 text-sm",children:["Inte medlem n?"," ",d.jsx("button",{onClick:e,className:"text-[#b35c2a] hover:text-[#9a4f24] transition-colors font-medium",children:"Bli medlem idag"})]})}),!n&&d.jsx("div",{className:"mt-8 text-center pt-6 border-t border-white/5",children:d.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-slate-500 hover:text-white transition-colors mx-auto text-sm group",children:[d.jsx(Jo,{size:16,className:"group-hover:-translate-x-1 transition-transform"}),"Tillbaka till startsidan"]})})]})};const cA="182",HSe={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},GSe={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},P7=0,X3=1,O7=2,qSe=3,j7=0,zg=1,rx=2,Jh=3,Yu=0,ps=1,Mc=2,Oc=0,ip=1,Y3=2,J3=3,Z3=4,D7=5,ff=100,L7=101,U7=102,z7=103,B7=104,F7=200,V7=201,H7=202,G7=203,fT=204,hT=205,q7=206,$7=207,W7=208,K7=209,X7=210,Y7=211,J7=212,Z7=213,Q7=214,pT=0,mT=1,gT=2,mp=3,vT=4,yT=5,xT=6,bT=7,Db=0,eW=1,tW=2,Xo=0,Hj=1,Gj=2,qj=3,uA=4,$j=5,Wj=6,Kj=7,Q3="attached",nW="detached",dA=300,Lc=301,bf=302,lb=303,cb=304,Ov=306,ub=1e3,Fs=1001,db=1002,ti=1003,Xj=1004,$Se=1004,Cg=1005,WSe=1005,wr=1006,ix=1007,KSe=1007,Cc=1008,XSe=1008,cs=1009,Yj=1010,Jj=1011,fv=1012,fA=1013,tl=1014,ra=1015,Fl=1016,hA=1017,pA=1018,hv=1020,Zj=35902,Qj=35899,eD=1021,tD=1022,ia=1023,Uc=1026,mf=1027,mA=1028,Lb=1029,gp=1030,gA=1031,YSe=1032,vA=1033,ax=33776,sx=33777,ox=33778,lx=33779,_T=35840,wT=35841,ST=35842,TT=35843,ET=36196,AT=37492,kT=37496,MT=37488,NT=37489,CT=37490,RT=37491,IT=37808,PT=37809,OT=37810,jT=37811,DT=37812,LT=37813,UT=37814,zT=37815,BT=37816,FT=37817,VT=37818,HT=37819,GT=37820,qT=37821,$T=36492,WT=36494,KT=36495,XT=36283,YT=36284,JT=36285,ZT=36286,rW=2200,iW=2201,aW=2202,fb=2300,QT=2301,ZS=2302,Zh=2400,Qh=2401,hb=2402,yA=2500,nD=2501,JSe=0,ZSe=1,QSe=2,sW=3200,e1e=3201,t1e=3202,n1e=3203,Nf=0,oW=1,ju="",Ba="srgb",_f="srgb-linear",pb="linear",or="srgb",r1e="",i1e="rg",a1e="ga",s1e=0,Fh=7680,o1e=7681,l1e=7682,c1e=7683,u1e=34055,d1e=34056,f1e=5386,h1e=512,p1e=513,m1e=514,g1e=515,v1e=516,y1e=517,x1e=518,eO=519,lW=512,cW=513,uW=514,xA=515,dW=516,fW=517,bA=518,hW=519,mb=35044,b1e=35048,_1e=35040,w1e=35045,S1e=35049,T1e=35041,E1e=35046,A1e=35050,k1e=35042,M1e="100",tO="300 es",co=2e3,pv=2001,N1e={COMPUTE:"compute",RENDER:"render"},C1e={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},R1e={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function pW(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const I1e={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Rg(t,e){return new I1e[t](e)}function mW(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function gb(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function gW(){const t=gb("canvas");return t.style.display="block",t}const B8={};let wf=null;function P1e(t){wf=t}function O1e(){return wf}function vb(...t){const e="THREE."+t.shift();wf?wf("log",e,...t):console.log(e,...t)}function yt(...t){const e="THREE."+t.shift();wf?wf("warn",e,...t):console.warn(e,...t)}function Bt(...t){const e="THREE."+t.shift();wf?wf("error",e,...t):console.error(e,...t)}function mv(...t){const e=t.join(" ");e in B8||(B8[e]=!0,yt(...t))}function j1e(t,e,n){return new Promise(function(r,i){function a(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(a,n);break;default:r()}}setTimeout(a,n)})}class Hc{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const a=i.indexOf(n);a!==-1&&i.splice(a,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const r=n[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let a=0,s=i.length;a<s;a++)i[a].call(this,e);e.target=null}}}const Da=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let F8=1234567;const ap=Math.PI/180,gv=180/Math.PI;function ho(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Da[t&255]+Da[t>>8&255]+Da[t>>16&255]+Da[t>>24&255]+"-"+Da[e&255]+Da[e>>8&255]+"-"+Da[e>>16&15|64]+Da[e>>24&255]+"-"+Da[n&63|128]+Da[n>>8&255]+"-"+Da[n>>16&255]+Da[n>>24&255]+Da[r&255]+Da[r>>8&255]+Da[r>>16&255]+Da[r>>24&255]).toLowerCase()}function tn(t,e,n){return Math.max(e,Math.min(n,t))}function rD(t,e){return(t%e+e)%e}function D1e(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function L1e(t,e,n){return t!==e?(n-t)/(e-t):0}function cx(t,e,n){return(1-n)*t+n*e}function U1e(t,e,n,r){return cx(t,e,1-Math.exp(-n*r))}function z1e(t,e=1){return e-Math.abs(rD(t,e*2)-e)}function B1e(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function F1e(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function V1e(t,e){return t+Math.floor(Math.random()*(e-t+1))}function H1e(t,e){return t+Math.random()*(e-t)}function G1e(t){return t*(.5-Math.random())}function q1e(t){t!==void 0&&(F8=t);let e=F8+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function $1e(t){return t*ap}function W1e(t){return t*gv}function K1e(t){return(t&t-1)===0&&t!==0}function X1e(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Y1e(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function J1e(t,e,n,r,i){const a=Math.cos,s=Math.sin,o=a(n/2),c=s(n/2),u=a((e+r)/2),h=s((e+r)/2),m=a((e-r)/2),v=s((e-r)/2),x=a((r-e)/2),_=s((r-e)/2);switch(i){case"XYX":t.set(o*h,c*m,c*v,o*u);break;case"YZY":t.set(c*v,o*h,c*m,o*u);break;case"ZXZ":t.set(c*m,c*v,o*h,o*u);break;case"XZX":t.set(o*h,c*_,c*x,o*u);break;case"YXY":t.set(c*x,o*h,c*_,o*u);break;case"ZYZ":t.set(c*_,c*x,o*h,o*u);break;default:yt("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function us(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function bn(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const Z1e={DEG2RAD:ap,RAD2DEG:gv,generateUUID:ho,clamp:tn,euclideanModulo:rD,mapLinear:D1e,inverseLerp:L1e,lerp:cx,damp:U1e,pingpong:z1e,smoothstep:B1e,smootherstep:F1e,randInt:V1e,randFloat:H1e,randFloatSpread:G1e,seededRandom:q1e,degToRad:$1e,radToDeg:W1e,isPowerOfTwo:K1e,ceilPowerOfTwo:X1e,floorPowerOfTwo:Y1e,setQuaternionFromProperEuler:J1e,normalize:bn,denormalize:us};class We{constructor(e=0,n=0){We.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=tn(this.x,e.x,n.x),this.y=tn(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=tn(this.x,e,n),this.y=tn(this.y,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(tn(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(tn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),a=this.x-e.x,s=this.y-e.y;return this.x=a*r-s*i+e.x,this.y=a*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Vs{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,a,s,o){let c=r[i+0],u=r[i+1],h=r[i+2],m=r[i+3],v=a[s+0],x=a[s+1],_=a[s+2],T=a[s+3];if(o<=0){e[n+0]=c,e[n+1]=u,e[n+2]=h,e[n+3]=m;return}if(o>=1){e[n+0]=v,e[n+1]=x,e[n+2]=_,e[n+3]=T;return}if(m!==T||c!==v||u!==x||h!==_){let w=c*v+u*x+h*_+m*T;w<0&&(v=-v,x=-x,_=-_,T=-T,w=-w);let E=1-o;if(w<.9995){const N=Math.acos(w),C=Math.sin(N);E=Math.sin(E*N)/C,o=Math.sin(o*N)/C,c=c*E+v*o,u=u*E+x*o,h=h*E+_*o,m=m*E+T*o}else{c=c*E+v*o,u=u*E+x*o,h=h*E+_*o,m=m*E+T*o;const N=1/Math.sqrt(c*c+u*u+h*h+m*m);c*=N,u*=N,h*=N,m*=N}}e[n]=c,e[n+1]=u,e[n+2]=h,e[n+3]=m}static multiplyQuaternionsFlat(e,n,r,i,a,s){const o=r[i],c=r[i+1],u=r[i+2],h=r[i+3],m=a[s],v=a[s+1],x=a[s+2],_=a[s+3];return e[n]=o*_+h*m+c*x-u*v,e[n+1]=c*_+h*v+u*m-o*x,e[n+2]=u*_+h*x+o*v-c*m,e[n+3]=h*_-o*m-c*v-u*x,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,a=e._z,s=e._order,o=Math.cos,c=Math.sin,u=o(r/2),h=o(i/2),m=o(a/2),v=c(r/2),x=c(i/2),_=c(a/2);switch(s){case"XYZ":this._x=v*h*m+u*x*_,this._y=u*x*m-v*h*_,this._z=u*h*_+v*x*m,this._w=u*h*m-v*x*_;break;case"YXZ":this._x=v*h*m+u*x*_,this._y=u*x*m-v*h*_,this._z=u*h*_-v*x*m,this._w=u*h*m+v*x*_;break;case"ZXY":this._x=v*h*m-u*x*_,this._y=u*x*m+v*h*_,this._z=u*h*_+v*x*m,this._w=u*h*m-v*x*_;break;case"ZYX":this._x=v*h*m-u*x*_,this._y=u*x*m+v*h*_,this._z=u*h*_-v*x*m,this._w=u*h*m+v*x*_;break;case"YZX":this._x=v*h*m+u*x*_,this._y=u*x*m+v*h*_,this._z=u*h*_-v*x*m,this._w=u*h*m-v*x*_;break;case"XZY":this._x=v*h*m-u*x*_,this._y=u*x*m-v*h*_,this._z=u*h*_+v*x*m,this._w=u*h*m+v*x*_;break;default:yt("Quaternion: .setFromEuler() encountered an unknown order: "+s)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],a=n[8],s=n[1],o=n[5],c=n[9],u=n[2],h=n[6],m=n[10],v=r+o+m;if(v>0){const x=.5/Math.sqrt(v+1);this._w=.25/x,this._x=(h-c)*x,this._y=(a-u)*x,this._z=(s-i)*x}else if(r>o&&r>m){const x=2*Math.sqrt(1+r-o-m);this._w=(h-c)/x,this._x=.25*x,this._y=(i+s)/x,this._z=(a+u)/x}else if(o>m){const x=2*Math.sqrt(1+o-r-m);this._w=(a-u)/x,this._x=(i+s)/x,this._y=.25*x,this._z=(c+h)/x}else{const x=2*Math.sqrt(1+m-r-o);this._w=(s-i)/x,this._x=(a+u)/x,this._y=(c+h)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<1e-8?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(tn(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,a=e._z,s=e._w,o=n._x,c=n._y,u=n._z,h=n._w;return this._x=r*h+s*o+i*u-a*c,this._y=i*h+s*c+a*o-r*u,this._z=a*h+s*u+r*c-i*o,this._w=s*h-r*o-i*c-a*u,this._onChangeCallback(),this}slerp(e,n){if(n<=0)return this;if(n>=1)return this.copy(e);let r=e._x,i=e._y,a=e._z,s=e._w,o=this.dot(e);o<0&&(r=-r,i=-i,a=-a,s=-s,o=-o);let c=1-n;if(o<.9995){const u=Math.acos(o),h=Math.sin(u);c=Math.sin(c*u)/h,n=Math.sin(n*u)/h,this._x=this._x*c+r*n,this._y=this._y*c+i*n,this._z=this._z*c+a*n,this._w=this._w*c+s*n,this._onChangeCallback()}else this._x=this._x*c+r*n,this._y=this._y*c+i*n,this._z=this._z*c+a*n,this._w=this._w*c+s*n,this.normalize();return this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),a=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),a*Math.sin(n),a*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class se{constructor(e=0,n=0,r=0){se.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(V8.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(V8.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*n+a[3]*r+a[6]*i,this.y=a[1]*n+a[4]*r+a[7]*i,this.z=a[2]*n+a[5]*r+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,a=e.elements,s=1/(a[3]*n+a[7]*r+a[11]*i+a[15]);return this.x=(a[0]*n+a[4]*r+a[8]*i+a[12])*s,this.y=(a[1]*n+a[5]*r+a[9]*i+a[13])*s,this.z=(a[2]*n+a[6]*r+a[10]*i+a[14])*s,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,a=e.x,s=e.y,o=e.z,c=e.w,u=2*(s*i-o*r),h=2*(o*n-a*i),m=2*(a*r-s*n);return this.x=n+c*u+s*m-o*h,this.y=r+c*h+o*u-a*m,this.z=i+c*m+a*h-s*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*n+a[4]*r+a[8]*i,this.y=a[1]*n+a[5]*r+a[9]*i,this.z=a[2]*n+a[6]*r+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=tn(this.x,e.x,n.x),this.y=tn(this.y,e.y,n.y),this.z=tn(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=tn(this.x,e,n),this.y=tn(this.y,e,n),this.z=tn(this.z,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(tn(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,a=e.z,s=n.x,o=n.y,c=n.z;return this.x=i*c-a*o,this.y=a*s-r*c,this.z=r*o-i*s,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return ZR.copy(this).projectOnVector(e),this.sub(ZR)}reflect(e){return this.sub(ZR.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(tn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ZR=new se,V8=new Vs;class gn{constructor(e,n,r,i,a,s,o,c,u){gn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,a,s,o,c,u)}set(e,n,r,i,a,s,o,c,u){const h=this.elements;return h[0]=e,h[1]=i,h[2]=o,h[3]=n,h[4]=a,h[5]=c,h[6]=r,h[7]=s,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,a=this.elements,s=r[0],o=r[3],c=r[6],u=r[1],h=r[4],m=r[7],v=r[2],x=r[5],_=r[8],T=i[0],w=i[3],E=i[6],N=i[1],C=i[4],P=i[7],I=i[2],j=i[5],O=i[8];return a[0]=s*T+o*N+c*I,a[3]=s*w+o*C+c*j,a[6]=s*E+o*P+c*O,a[1]=u*T+h*N+m*I,a[4]=u*w+h*C+m*j,a[7]=u*E+h*P+m*O,a[2]=v*T+x*N+_*I,a[5]=v*w+x*C+_*j,a[8]=v*E+x*P+_*O,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],c=e[6],u=e[7],h=e[8];return n*s*h-n*o*u-r*a*h+r*o*c+i*a*u-i*s*c}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],c=e[6],u=e[7],h=e[8],m=h*s-o*u,v=o*c-h*a,x=u*a-s*c,_=n*m+r*v+i*x;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const T=1/_;return e[0]=m*T,e[1]=(i*u-h*r)*T,e[2]=(o*r-i*s)*T,e[3]=v*T,e[4]=(h*n-i*c)*T,e[5]=(i*a-o*n)*T,e[6]=x*T,e[7]=(r*c-u*n)*T,e[8]=(s*n-r*a)*T,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,a,s,o){const c=Math.cos(a),u=Math.sin(a);return this.set(r*c,r*u,-r*(c*s+u*o)+s+e,-i*u,i*c,-i*(-u*s+c*o)+o+n,0,0,1),this}scale(e,n){return this.premultiply(QR.makeScale(e,n)),this}rotate(e){return this.premultiply(QR.makeRotation(-e)),this}translate(e,n){return this.premultiply(QR.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const QR=new gn,H8=new gn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),G8=new gn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Q1e(){const t={enabled:!0,workingColorSpace:_f,spaces:{},convert:function(i,a,s){return this.enabled===!1||a===s||!a||!s||(this.spaces[a].transfer===or&&(i.r=Gu(i.r),i.g=Gu(i.g),i.b=Gu(i.b)),this.spaces[a].primaries!==this.spaces[s].primaries&&(i.applyMatrix3(this.spaces[a].toXYZ),i.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===or&&(i.r=Bg(i.r),i.g=Bg(i.g),i.b=Bg(i.b))),i},workingToColorSpace:function(i,a){return this.convert(i,this.workingColorSpace,a)},colorSpaceToWorking:function(i,a){return this.convert(i,a,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===ju?pb:this.spaces[i].transfer},getToneMappingMode:function(i){return this.spaces[i].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(i,a=this.workingColorSpace){return i.fromArray(this.spaces[a].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,a,s){return i.copy(this.spaces[a].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(i,a){return mv("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),t.workingToColorSpace(i,a)},toWorkingColorSpace:function(i,a){return mv("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),t.colorSpaceToWorking(i,a)}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return t.define({[_f]:{primaries:e,whitePoint:r,transfer:pb,toXYZ:H8,fromXYZ:G8,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Ba},outputColorSpaceConfig:{drawingBufferColorSpace:Ba}},[Ba]:{primaries:e,whitePoint:r,transfer:or,toXYZ:H8,fromXYZ:G8,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Ba}}}),t}const Fn=Q1e();function Gu(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function Bg(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let $m;class vW{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{$m===void 0&&($m=gb("canvas")),$m.width=e.width,$m.height=e.height;const i=$m.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=$m}return r.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=gb("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),a=i.data;for(let s=0;s<a.length;s++)a[s]=Gu(a[s]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Gu(n[r]/255)*255):n[r]=Gu(n[r]);return{data:n,width:e.width,height:e.height}}else return yt("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let eTe=0;class gf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:eTe++}),this.uuid=ho(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const n=this.data;return typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement?e.set(n.videoWidth,n.videoHeight,0):typeof VideoFrame<"u"&&n instanceof VideoFrame?e.set(n.displayHeight,n.displayWidth,0):n!==null?e.set(n.width,n.height,n.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let a;if(Array.isArray(i)){a=[];for(let s=0,o=i.length;s<o;s++)i[s].isDataTexture?a.push(eI(i[s].image)):a.push(eI(i[s]))}else a=eI(i);r.url=a}return n||(e.images[this.uuid]=r),r}}function eI(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?vW.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(yt("Texture: Unable to serialize Texture."),{})}let tTe=0;const tI=new se;class di extends Hc{constructor(e=di.DEFAULT_IMAGE,n=di.DEFAULT_MAPPING,r=Fs,i=Fs,a=wr,s=Cc,o=ia,c=cs,u=di.DEFAULT_ANISOTROPY,h=ju){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:tTe++}),this.uuid=ho(),this.name="",this.source=new gf(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=a,this.minFilter=s,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=c,this.offset=new We(0,0),this.repeat=new We(1,1),this.center=new We(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new gn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(tI).x}get height(){return this.source.getSize(tI).y}get depth(){return this.source.getSize(tI).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const n in e){const r=e[n];if(r===void 0){yt(`Texture.setValues(): parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){yt(`Texture.setValues(): property '${n}' does not exist.`);continue}i&&r&&i.isVector2&&r.isVector2||i&&r&&i.isVector3&&r.isVector3||i&&r&&i.isMatrix3&&r.isMatrix3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==dA)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ub:e.x=e.x-Math.floor(e.x);break;case Fs:e.x=e.x<0?0:1;break;case db:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ub:e.y=e.y-Math.floor(e.y);break;case Fs:e.y=e.y<0?0:1;break;case db:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}di.DEFAULT_IMAGE=null;di.DEFAULT_MAPPING=dA;di.DEFAULT_ANISOTROPY=1;class br{constructor(e=0,n=0,r=0,i=1){br.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,a=this.w,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i+s[12]*a,this.y=s[1]*n+s[5]*r+s[9]*i+s[13]*a,this.z=s[2]*n+s[6]*r+s[10]*i+s[14]*a,this.w=s[3]*n+s[7]*r+s[11]*i+s[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,a;const c=e.elements,u=c[0],h=c[4],m=c[8],v=c[1],x=c[5],_=c[9],T=c[2],w=c[6],E=c[10];if(Math.abs(h-v)<.01&&Math.abs(m-T)<.01&&Math.abs(_-w)<.01){if(Math.abs(h+v)<.1&&Math.abs(m+T)<.1&&Math.abs(_+w)<.1&&Math.abs(u+x+E-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const C=(u+1)/2,P=(x+1)/2,I=(E+1)/2,j=(h+v)/4,O=(m+T)/4,F=(_+w)/4;return C>P&&C>I?C<.01?(r=0,i=.707106781,a=.707106781):(r=Math.sqrt(C),i=j/r,a=O/r):P>I?P<.01?(r=.707106781,i=0,a=.707106781):(i=Math.sqrt(P),r=j/i,a=F/i):I<.01?(r=.707106781,i=.707106781,a=0):(a=Math.sqrt(I),r=O/a,i=F/a),this.set(r,i,a,n),this}let N=Math.sqrt((w-_)*(w-_)+(m-T)*(m-T)+(v-h)*(v-h));return Math.abs(N)<.001&&(N=1),this.x=(w-_)/N,this.y=(m-T)/N,this.z=(v-h)/N,this.w=Math.acos((u+x+E-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=tn(this.x,e.x,n.x),this.y=tn(this.y,e.y,n.y),this.z=tn(this.z,e.z,n.z),this.w=tn(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=tn(this.x,e,n),this.y=tn(this.y,e,n),this.z=tn(this.z,e,n),this.w=tn(this.w,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(tn(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class iD extends Hc{constructor(e=1,n=1,r={}){super(),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:wr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},r),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=r.depth,this.scissor=new br(0,0,e,n),this.scissorTest=!1,this.viewport=new br(0,0,e,n);const i={width:e,height:n,depth:r.depth},a=new di(i);this.textures=[];const s=r.count;for(let o=0;o<s;o++)this.textures[o]=a.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(r),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples,this.multiview=r.multiview}_setTextureOptions(e={}){const n={minFilter:wr,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(n.mapping=e.mapping),e.wrapS!==void 0&&(n.wrapS=e.wrapS),e.wrapT!==void 0&&(n.wrapT=e.wrapT),e.wrapR!==void 0&&(n.wrapR=e.wrapR),e.magFilter!==void 0&&(n.magFilter=e.magFilter),e.minFilter!==void 0&&(n.minFilter=e.minFilter),e.format!==void 0&&(n.format=e.format),e.type!==void 0&&(n.type=e.type),e.anisotropy!==void 0&&(n.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(n.colorSpace=e.colorSpace),e.flipY!==void 0&&(n.flipY=e.flipY),e.generateMipmaps!==void 0&&(n.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(n.internalFormat=e.internalFormat);for(let r=0;r<this.textures.length;r++)this.textures[r].setValues(n)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,a=this.textures.length;i<a;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r,this.textures[i].isData3DTexture!==!0&&(this.textures[i].isArrayTexture=this.textures[i].image.depth>1);this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const i=Object.assign({},e.textures[n].image);this.textures[n].source=new gf(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Hs extends iD{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class _A extends di{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=ti,this.minFilter=ti,this.wrapR=Fs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class nTe extends Hs{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new _A(null,e,n,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class wA extends di{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=ti,this.minFilter=ti,this.wrapR=Fs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class rTe extends Hs{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new wA(null,e,n,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class Ga{constructor(e=new se(1/0,1/0,1/0),n=new se(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(kl.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(kl.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=kl.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const a=r.getAttribute("position");if(n===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=a.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,kl):kl.fromBufferAttribute(a,s),kl.applyMatrix4(e.matrixWorld),this.expandByPoint(kl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),tS.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),tS.copy(r.boundingBox)),tS.applyMatrix4(e.matrixWorld),this.union(tS)}const i=e.children;for(let a=0,s=i.length;a<s;a++)this.expandByObject(i[a],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,kl),kl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ty),nS.subVectors(this.max,Ty),Wm.subVectors(e.a,Ty),Km.subVectors(e.b,Ty),Xm.subVectors(e.c,Ty),Xd.subVectors(Km,Wm),Yd.subVectors(Xm,Km),Sh.subVectors(Wm,Xm);let n=[0,-Xd.z,Xd.y,0,-Yd.z,Yd.y,0,-Sh.z,Sh.y,Xd.z,0,-Xd.x,Yd.z,0,-Yd.x,Sh.z,0,-Sh.x,-Xd.y,Xd.x,0,-Yd.y,Yd.x,0,-Sh.y,Sh.x,0];return!nI(n,Wm,Km,Xm,nS)||(n=[1,0,0,0,1,0,0,0,1],!nI(n,Wm,Km,Xm,nS))?!1:(rS.crossVectors(Xd,Yd),n=[rS.x,rS.y,rS.z],nI(n,Wm,Km,Xm,nS))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,kl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(kl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Eu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Eu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Eu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Eu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Eu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Eu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Eu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Eu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Eu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Eu=[new se,new se,new se,new se,new se,new se,new se,new se],kl=new se,tS=new Ga,Wm=new se,Km=new se,Xm=new se,Xd=new se,Yd=new se,Sh=new se,Ty=new se,nS=new se,rS=new se,Th=new se;function nI(t,e,n,r,i){for(let a=0,s=t.length-3;a<=s;a+=3){Th.fromArray(t,a);const o=i.x*Math.abs(Th.x)+i.y*Math.abs(Th.y)+i.z*Math.abs(Th.z),c=e.dot(Th),u=n.dot(Th),h=r.dot(Th);if(Math.max(-Math.max(c,u,h),Math.min(c,u,h))>o)return!1}return!0}const iTe=new Ga,Ey=new se,rI=new se;class Sa{constructor(e=new se,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):iTe.setFromPoints(e).getCenter(r);let i=0;for(let a=0,s=e.length;a<s;a++)i=Math.max(i,r.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ey.subVectors(e,this.center);const n=Ey.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(Ey,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(rI.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ey.copy(e.center).add(rI)),this.expandByPoint(Ey.copy(e.center).sub(rI))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Au=new se,iI=new se,iS=new se,Jd=new se,aI=new se,aS=new se,sI=new se;class jv{constructor(e=new se,n=new se(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Au)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Au.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Au.copy(this.origin).addScaledVector(this.direction,n),Au.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){iI.copy(e).add(n).multiplyScalar(.5),iS.copy(n).sub(e).normalize(),Jd.copy(this.origin).sub(iI);const a=e.distanceTo(n)*.5,s=-this.direction.dot(iS),o=Jd.dot(this.direction),c=-Jd.dot(iS),u=Jd.lengthSq(),h=Math.abs(1-s*s);let m,v,x,_;if(h>0)if(m=s*c-o,v=s*o-c,_=a*h,m>=0)if(v>=-_)if(v<=_){const T=1/h;m*=T,v*=T,x=m*(m+s*v+2*o)+v*(s*m+v+2*c)+u}else v=a,m=Math.max(0,-(s*v+o)),x=-m*m+v*(v+2*c)+u;else v=-a,m=Math.max(0,-(s*v+o)),x=-m*m+v*(v+2*c)+u;else v<=-_?(m=Math.max(0,-(-s*a+o)),v=m>0?-a:Math.min(Math.max(-a,-c),a),x=-m*m+v*(v+2*c)+u):v<=_?(m=0,v=Math.min(Math.max(-a,-c),a),x=v*(v+2*c)+u):(m=Math.max(0,-(s*a+o)),v=m>0?a:Math.min(Math.max(-a,-c),a),x=-m*m+v*(v+2*c)+u);else v=s>0?-a:a,m=Math.max(0,-(s*v+o)),x=-m*m+v*(v+2*c)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,m),i&&i.copy(iI).addScaledVector(iS,v),x}intersectSphere(e,n){Au.subVectors(e.center,this.origin);const r=Au.dot(this.direction),i=Au.dot(Au)-r*r,a=e.radius*e.radius;if(i>a)return null;const s=Math.sqrt(a-i),o=r-s,c=r+s;return c<0?null:o<0?this.at(c,n):this.at(o,n)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,a,s,o,c;const u=1/this.direction.x,h=1/this.direction.y,m=1/this.direction.z,v=this.origin;return u>=0?(r=(e.min.x-v.x)*u,i=(e.max.x-v.x)*u):(r=(e.max.x-v.x)*u,i=(e.min.x-v.x)*u),h>=0?(a=(e.min.y-v.y)*h,s=(e.max.y-v.y)*h):(a=(e.max.y-v.y)*h,s=(e.min.y-v.y)*h),r>s||a>i||((a>r||isNaN(r))&&(r=a),(s<i||isNaN(i))&&(i=s),m>=0?(o=(e.min.z-v.z)*m,c=(e.max.z-v.z)*m):(o=(e.max.z-v.z)*m,c=(e.min.z-v.z)*m),r>c||o>i)||((o>r||r!==r)&&(r=o),(c<i||i!==i)&&(i=c),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Au)!==null}intersectTriangle(e,n,r,i,a){aI.subVectors(n,e),aS.subVectors(r,e),sI.crossVectors(aI,aS);let s=this.direction.dot(sI),o;if(s>0){if(i)return null;o=1}else if(s<0)o=-1,s=-s;else return null;Jd.subVectors(this.origin,e);const c=o*this.direction.dot(aS.crossVectors(Jd,aS));if(c<0)return null;const u=o*this.direction.dot(aI.cross(Jd));if(u<0||c+u>s)return null;const h=-o*Jd.dot(sI);return h<0?null:this.at(h/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class an{constructor(e,n,r,i,a,s,o,c,u,h,m,v,x,_,T,w){an.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,a,s,o,c,u,h,m,v,x,_,T,w)}set(e,n,r,i,a,s,o,c,u,h,m,v,x,_,T,w){const E=this.elements;return E[0]=e,E[4]=n,E[8]=r,E[12]=i,E[1]=a,E[5]=s,E[9]=o,E[13]=c,E[2]=u,E[6]=h,E[10]=m,E[14]=v,E[3]=x,E[7]=_,E[11]=T,E[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new an().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return this.determinant()===0?(e.set(1,0,0),n.set(0,1,0),r.set(0,0,1),this):(e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this)}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const n=this.elements,r=e.elements,i=1/Ym.setFromMatrixColumn(e,0).length(),a=1/Ym.setFromMatrixColumn(e,1).length(),s=1/Ym.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*a,n[5]=r[5]*a,n[6]=r[6]*a,n[7]=0,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,a=e.z,s=Math.cos(r),o=Math.sin(r),c=Math.cos(i),u=Math.sin(i),h=Math.cos(a),m=Math.sin(a);if(e.order==="XYZ"){const v=s*h,x=s*m,_=o*h,T=o*m;n[0]=c*h,n[4]=-c*m,n[8]=u,n[1]=x+_*u,n[5]=v-T*u,n[9]=-o*c,n[2]=T-v*u,n[6]=_+x*u,n[10]=s*c}else if(e.order==="YXZ"){const v=c*h,x=c*m,_=u*h,T=u*m;n[0]=v+T*o,n[4]=_*o-x,n[8]=s*u,n[1]=s*m,n[5]=s*h,n[9]=-o,n[2]=x*o-_,n[6]=T+v*o,n[10]=s*c}else if(e.order==="ZXY"){const v=c*h,x=c*m,_=u*h,T=u*m;n[0]=v-T*o,n[4]=-s*m,n[8]=_+x*o,n[1]=x+_*o,n[5]=s*h,n[9]=T-v*o,n[2]=-s*u,n[6]=o,n[10]=s*c}else if(e.order==="ZYX"){const v=s*h,x=s*m,_=o*h,T=o*m;n[0]=c*h,n[4]=_*u-x,n[8]=v*u+T,n[1]=c*m,n[5]=T*u+v,n[9]=x*u-_,n[2]=-u,n[6]=o*c,n[10]=s*c}else if(e.order==="YZX"){const v=s*c,x=s*u,_=o*c,T=o*u;n[0]=c*h,n[4]=T-v*m,n[8]=_*m+x,n[1]=m,n[5]=s*h,n[9]=-o*h,n[2]=-u*h,n[6]=x*m+_,n[10]=v-T*m}else if(e.order==="XZY"){const v=s*c,x=s*u,_=o*c,T=o*u;n[0]=c*h,n[4]=-m,n[8]=u*h,n[1]=v*m+T,n[5]=s*h,n[9]=x*m-_,n[2]=_*m-x,n[6]=o*h,n[10]=T*m+v}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(aTe,e,sTe)}lookAt(e,n,r){const i=this.elements;return eo.subVectors(e,n),eo.lengthSq()===0&&(eo.z=1),eo.normalize(),Zd.crossVectors(r,eo),Zd.lengthSq()===0&&(Math.abs(r.z)===1?eo.x+=1e-4:eo.z+=1e-4,eo.normalize(),Zd.crossVectors(r,eo)),Zd.normalize(),sS.crossVectors(eo,Zd),i[0]=Zd.x,i[4]=sS.x,i[8]=eo.x,i[1]=Zd.y,i[5]=sS.y,i[9]=eo.y,i[2]=Zd.z,i[6]=sS.z,i[10]=eo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,a=this.elements,s=r[0],o=r[4],c=r[8],u=r[12],h=r[1],m=r[5],v=r[9],x=r[13],_=r[2],T=r[6],w=r[10],E=r[14],N=r[3],C=r[7],P=r[11],I=r[15],j=i[0],O=i[4],F=i[8],L=i[12],z=i[1],V=i[5],G=i[9],$=i[13],ee=i[2],te=i[6],K=i[10],X=i[14],re=i[3],ce=i[7],de=i[11],W=i[15];return a[0]=s*j+o*z+c*ee+u*re,a[4]=s*O+o*V+c*te+u*ce,a[8]=s*F+o*G+c*K+u*de,a[12]=s*L+o*$+c*X+u*W,a[1]=h*j+m*z+v*ee+x*re,a[5]=h*O+m*V+v*te+x*ce,a[9]=h*F+m*G+v*K+x*de,a[13]=h*L+m*$+v*X+x*W,a[2]=_*j+T*z+w*ee+E*re,a[6]=_*O+T*V+w*te+E*ce,a[10]=_*F+T*G+w*K+E*de,a[14]=_*L+T*$+w*X+E*W,a[3]=N*j+C*z+P*ee+I*re,a[7]=N*O+C*V+P*te+I*ce,a[11]=N*F+C*G+P*K+I*de,a[15]=N*L+C*$+P*X+I*W,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],a=e[12],s=e[1],o=e[5],c=e[9],u=e[13],h=e[2],m=e[6],v=e[10],x=e[14],_=e[3],T=e[7],w=e[11],E=e[15],N=c*x-u*v,C=o*x-u*m,P=o*v-c*m,I=s*x-u*h,j=s*v-c*h,O=s*m-o*h;return n*(T*N-w*C+E*P)-r*(_*N-w*I+E*j)+i*(_*C-T*I+E*O)-a*(_*P-T*j+w*O)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],c=e[6],u=e[7],h=e[8],m=e[9],v=e[10],x=e[11],_=e[12],T=e[13],w=e[14],E=e[15],N=m*w*u-T*v*u+T*c*x-o*w*x-m*c*E+o*v*E,C=_*v*u-h*w*u-_*c*x+s*w*x+h*c*E-s*v*E,P=h*T*u-_*m*u+_*o*x-s*T*x-h*o*E+s*m*E,I=_*m*c-h*T*c-_*o*v+s*T*v+h*o*w-s*m*w,j=n*N+r*C+i*P+a*I;if(j===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/j;return e[0]=N*O,e[1]=(T*v*a-m*w*a-T*i*x+r*w*x+m*i*E-r*v*E)*O,e[2]=(o*w*a-T*c*a+T*i*u-r*w*u-o*i*E+r*c*E)*O,e[3]=(m*c*a-o*v*a-m*i*u+r*v*u+o*i*x-r*c*x)*O,e[4]=C*O,e[5]=(h*w*a-_*v*a+_*i*x-n*w*x-h*i*E+n*v*E)*O,e[6]=(_*c*a-s*w*a-_*i*u+n*w*u+s*i*E-n*c*E)*O,e[7]=(s*v*a-h*c*a+h*i*u-n*v*u-s*i*x+n*c*x)*O,e[8]=P*O,e[9]=(_*m*a-h*T*a-_*r*x+n*T*x+h*r*E-n*m*E)*O,e[10]=(s*T*a-_*o*a+_*r*u-n*T*u-s*r*E+n*o*E)*O,e[11]=(h*o*a-s*m*a-h*r*u+n*m*u+s*r*x-n*o*x)*O,e[12]=I*O,e[13]=(h*T*i-_*m*i+_*r*v-n*T*v-h*r*w+n*m*w)*O,e[14]=(_*o*i-s*T*i-_*r*c+n*T*c+s*r*w-n*o*w)*O,e[15]=(s*m*i-h*o*i+h*r*c-n*m*c-s*r*v+n*o*v)*O,this}scale(e){const n=this.elements,r=e.x,i=e.y,a=e.z;return n[0]*=r,n[4]*=i,n[8]*=a,n[1]*=r,n[5]*=i,n[9]*=a,n[2]*=r,n[6]*=i,n[10]*=a,n[3]*=r,n[7]*=i,n[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),a=1-r,s=e.x,o=e.y,c=e.z,u=a*s,h=a*o;return this.set(u*s+r,u*o-i*c,u*c+i*o,0,u*o+i*c,h*o+r,h*c-i*s,0,u*c-i*o,h*c+i*s,a*c*c+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,a,s){return this.set(1,r,a,0,e,1,s,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,a=n._x,s=n._y,o=n._z,c=n._w,u=a+a,h=s+s,m=o+o,v=a*u,x=a*h,_=a*m,T=s*h,w=s*m,E=o*m,N=c*u,C=c*h,P=c*m,I=r.x,j=r.y,O=r.z;return i[0]=(1-(T+E))*I,i[1]=(x+P)*I,i[2]=(_-C)*I,i[3]=0,i[4]=(x-P)*j,i[5]=(1-(v+E))*j,i[6]=(w+N)*j,i[7]=0,i[8]=(_+C)*O,i[9]=(w-N)*O,i[10]=(1-(v+T))*O,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;if(e.x=i[12],e.y=i[13],e.z=i[14],this.determinant()===0)return r.set(1,1,1),n.identity(),this;let a=Ym.set(i[0],i[1],i[2]).length();const s=Ym.set(i[4],i[5],i[6]).length(),o=Ym.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),Ml.copy(this);const u=1/a,h=1/s,m=1/o;return Ml.elements[0]*=u,Ml.elements[1]*=u,Ml.elements[2]*=u,Ml.elements[4]*=h,Ml.elements[5]*=h,Ml.elements[6]*=h,Ml.elements[8]*=m,Ml.elements[9]*=m,Ml.elements[10]*=m,n.setFromRotationMatrix(Ml),r.x=a,r.y=s,r.z=o,this}makePerspective(e,n,r,i,a,s,o=co,c=!1){const u=this.elements,h=2*a/(n-e),m=2*a/(r-i),v=(n+e)/(n-e),x=(r+i)/(r-i);let _,T;if(c)_=a/(s-a),T=s*a/(s-a);else if(o===co)_=-(s+a)/(s-a),T=-2*s*a/(s-a);else if(o===pv)_=-s/(s-a),T=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return u[0]=h,u[4]=0,u[8]=v,u[12]=0,u[1]=0,u[5]=m,u[9]=x,u[13]=0,u[2]=0,u[6]=0,u[10]=_,u[14]=T,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,n,r,i,a,s,o=co,c=!1){const u=this.elements,h=2/(n-e),m=2/(r-i),v=-(n+e)/(n-e),x=-(r+i)/(r-i);let _,T;if(c)_=1/(s-a),T=s/(s-a);else if(o===co)_=-2/(s-a),T=-(s+a)/(s-a);else if(o===pv)_=-1/(s-a),T=-a/(s-a);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return u[0]=h,u[4]=0,u[8]=0,u[12]=v,u[1]=0,u[5]=m,u[9]=0,u[13]=x,u[2]=0,u[6]=0,u[10]=_,u[14]=T,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Ym=new se,Ml=new an,aTe=new se(0,0,0),sTe=new se(1,1,1),Zd=new se,sS=new se,eo=new se,q8=new an,$8=new Vs;class po{constructor(e=0,n=0,r=0,i=po.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,a=i[0],s=i[4],o=i[8],c=i[1],u=i[5],h=i[9],m=i[2],v=i[6],x=i[10];switch(n){case"XYZ":this._y=Math.asin(tn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,x),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(v,u),this._z=0);break;case"YXZ":this._x=Math.asin(-tn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(o,x),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-m,a),this._z=0);break;case"ZXY":this._x=Math.asin(tn(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-m,x),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(c,a));break;case"ZYX":this._y=Math.asin(-tn(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(v,x),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(tn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-m,a)):(this._x=0,this._y=Math.atan2(o,x));break;case"XZY":this._z=Math.asin(-tn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(v,u),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-h,x),this._y=0);break;default:yt("Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return q8.makeRotationFromQuaternion(e),this.setFromRotationMatrix(q8,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return $8.setFromEuler(this),this.setFromQuaternion($8,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}po.DEFAULT_ORDER="XYZ";class vv{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let oTe=0;const W8=new se,Jm=new Vs,ku=new an,oS=new se,Ay=new se,lTe=new se,cTe=new Vs,K8=new se(1,0,0),X8=new se(0,1,0),Y8=new se(0,0,1),J8={type:"added"},uTe={type:"removed"},Zm={type:"childadded",child:null},oI={type:"childremoved",child:null};class Wn extends Hc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:oTe++}),this.uuid=ho(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Wn.DEFAULT_UP.clone();const e=new se,n=new po,r=new Vs,i=new se(1,1,1);function a(){r.setFromEuler(n,!1)}function s(){n.setFromQuaternion(r,void 0,!1)}n._onChange(a),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new an},normalMatrix:{value:new gn}}),this.matrix=new an,this.matrixWorld=new an,this.matrixAutoUpdate=Wn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Wn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new vv,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Jm.setFromAxisAngle(e,n),this.quaternion.multiply(Jm),this}rotateOnWorldAxis(e,n){return Jm.setFromAxisAngle(e,n),this.quaternion.premultiply(Jm),this}rotateX(e){return this.rotateOnAxis(K8,e)}rotateY(e){return this.rotateOnAxis(X8,e)}rotateZ(e){return this.rotateOnAxis(Y8,e)}translateOnAxis(e,n){return W8.copy(e).applyQuaternion(this.quaternion),this.position.add(W8.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(K8,e)}translateY(e){return this.translateOnAxis(X8,e)}translateZ(e){return this.translateOnAxis(Y8,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ku.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?oS.copy(e):oS.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Ay.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ku.lookAt(Ay,oS,this.up):ku.lookAt(oS,Ay,this.up),this.quaternion.setFromRotationMatrix(ku),i&&(ku.extractRotation(i.matrixWorld),Jm.setFromRotationMatrix(ku),this.quaternion.premultiply(Jm.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(Bt("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(J8),Zm.child=e,this.dispatchEvent(Zm),Zm.child=null):Bt("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(uTe),oI.child=e,this.dispatchEvent(oI),oI.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),ku.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ku.multiply(e.parent.matrixWorld)),e.applyMatrix4(ku),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(J8),Zm.child=e,this.dispatchEvent(Zm),Zm.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,n);if(s!==void 0)return s}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ay,e,lTe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ay,cTe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(o=>({...o})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(i.boundingBox=this.boundingBox.toJSON()));function a(o,c){return o[c.uuid]===void 0&&(o[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const c=o.shapes;if(Array.isArray(c))for(let u=0,h=c.length;u<h;u++){const m=c[u];a(e.shapes,m)}else a(e.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let c=0,u=this.material.length;c<u;c++)o.push(a(e.materials,this.material[c]));i.material=o}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const c=this.animations[o];i.animations.push(a(e.animations,c))}}if(n){const o=s(e.geometries),c=s(e.materials),u=s(e.textures),h=s(e.images),m=s(e.shapes),v=s(e.skeletons),x=s(e.animations),_=s(e.nodes);o.length>0&&(r.geometries=o),c.length>0&&(r.materials=c),u.length>0&&(r.textures=u),h.length>0&&(r.images=h),m.length>0&&(r.shapes=m),v.length>0&&(r.skeletons=v),x.length>0&&(r.animations=x),_.length>0&&(r.nodes=_)}return r.object=i,r;function s(o){const c=[];for(const u in o){const h=o[u];delete h.metadata,c.push(h)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Wn.DEFAULT_UP=new se(0,1,0);Wn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Wn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Nl=new se,Mu=new se,lI=new se,Nu=new se,Qm=new se,eg=new se,Z8=new se,cI=new se,uI=new se,dI=new se,fI=new br,hI=new br,pI=new br;class zs{constructor(e=new se,n=new se,r=new se){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Nl.subVectors(e,n),i.cross(Nl);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,n,r,i,a){Nl.subVectors(i,n),Mu.subVectors(r,n),lI.subVectors(e,n);const s=Nl.dot(Nl),o=Nl.dot(Mu),c=Nl.dot(lI),u=Mu.dot(Mu),h=Mu.dot(lI),m=s*u-o*o;if(m===0)return a.set(0,0,0),null;const v=1/m,x=(u*c-o*h)*v,_=(s*h-o*c)*v;return a.set(1-x-_,_,x)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Nu)===null?!1:Nu.x>=0&&Nu.y>=0&&Nu.x+Nu.y<=1}static getInterpolation(e,n,r,i,a,s,o,c){return this.getBarycoord(e,n,r,i,Nu)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(a,Nu.x),c.addScaledVector(s,Nu.y),c.addScaledVector(o,Nu.z),c)}static getInterpolatedAttribute(e,n,r,i,a,s){return fI.setScalar(0),hI.setScalar(0),pI.setScalar(0),fI.fromBufferAttribute(e,n),hI.fromBufferAttribute(e,r),pI.fromBufferAttribute(e,i),s.setScalar(0),s.addScaledVector(fI,a.x),s.addScaledVector(hI,a.y),s.addScaledVector(pI,a.z),s}static isFrontFacing(e,n,r,i){return Nl.subVectors(r,n),Mu.subVectors(e,n),Nl.cross(Mu).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Nl.subVectors(this.c,this.b),Mu.subVectors(this.a,this.b),Nl.cross(Mu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return zs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return zs.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,a){return zs.getInterpolation(e,this.a,this.b,this.c,n,r,i,a)}containsPoint(e){return zs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return zs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,a=this.c;let s,o;Qm.subVectors(i,r),eg.subVectors(a,r),cI.subVectors(e,r);const c=Qm.dot(cI),u=eg.dot(cI);if(c<=0&&u<=0)return n.copy(r);uI.subVectors(e,i);const h=Qm.dot(uI),m=eg.dot(uI);if(h>=0&&m<=h)return n.copy(i);const v=c*m-h*u;if(v<=0&&c>=0&&h<=0)return s=c/(c-h),n.copy(r).addScaledVector(Qm,s);dI.subVectors(e,a);const x=Qm.dot(dI),_=eg.dot(dI);if(_>=0&&x<=_)return n.copy(a);const T=x*u-c*_;if(T<=0&&u>=0&&_<=0)return o=u/(u-_),n.copy(r).addScaledVector(eg,o);const w=h*_-x*m;if(w<=0&&m-h>=0&&x-_>=0)return Z8.subVectors(a,i),o=(m-h)/(m-h+(x-_)),n.copy(i).addScaledVector(Z8,o);const E=1/(w+T+v);return s=T*E,o=v*E,n.copy(r).addScaledVector(Qm,s).addScaledVector(eg,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const yW={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qd={h:0,s:0,l:0},lS={h:0,s:0,l:0};function mI(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class kt{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Ba){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Fn.colorSpaceToWorking(this,n),this}setRGB(e,n,r,i=Fn.workingColorSpace){return this.r=e,this.g=n,this.b=r,Fn.colorSpaceToWorking(this,i),this}setHSL(e,n,r,i=Fn.workingColorSpace){if(e=rD(e,1),n=tn(n,0,1),r=tn(r,0,1),n===0)this.r=this.g=this.b=r;else{const a=r<=.5?r*(1+n):r+n-r*n,s=2*r-a;this.r=mI(s,a,e+1/3),this.g=mI(s,a,e),this.b=mI(s,a,e-1/3)}return Fn.colorSpaceToWorking(this,i),this}setStyle(e,n=Ba){function r(a){a!==void 0&&parseFloat(a)<1&&yt("Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,n);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,n);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,n);break;default:yt("Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=i[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,n);if(s===6)return this.setHex(parseInt(a,16),n);yt("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Ba){const r=yW[e.toLowerCase()];return r!==void 0?this.setHex(r,n):yt("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Gu(e.r),this.g=Gu(e.g),this.b=Gu(e.b),this}copyLinearToSRGB(e){return this.r=Bg(e.r),this.g=Bg(e.g),this.b=Bg(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ba){return Fn.workingToColorSpace(La.copy(this),e),Math.round(tn(La.r*255,0,255))*65536+Math.round(tn(La.g*255,0,255))*256+Math.round(tn(La.b*255,0,255))}getHexString(e=Ba){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Fn.workingColorSpace){Fn.workingToColorSpace(La.copy(this),n);const r=La.r,i=La.g,a=La.b,s=Math.max(r,i,a),o=Math.min(r,i,a);let c,u;const h=(o+s)/2;if(o===s)c=0,u=0;else{const m=s-o;switch(u=h<=.5?m/(s+o):m/(2-s-o),s){case r:c=(i-a)/m+(i<a?6:0);break;case i:c=(a-r)/m+2;break;case a:c=(r-i)/m+4;break}c/=6}return e.h=c,e.s=u,e.l=h,e}getRGB(e,n=Fn.workingColorSpace){return Fn.workingToColorSpace(La.copy(this),n),e.r=La.r,e.g=La.g,e.b=La.b,e}getStyle(e=Ba){Fn.workingToColorSpace(La.copy(this),e);const n=La.r,r=La.g,i=La.b;return e!==Ba?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(Qd),this.setHSL(Qd.h+e,Qd.s+n,Qd.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Qd),e.getHSL(lS);const r=cx(Qd.h,lS.h,n),i=cx(Qd.s,lS.s,n),a=cx(Qd.l,lS.l,n);return this.setHSL(r,i,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,a=e.elements;return this.r=a[0]*n+a[3]*r+a[6]*i,this.g=a[1]*n+a[4]*r+a[7]*i,this.b=a[2]*n+a[5]*r+a[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const La=new kt;kt.NAMES=yW;let dTe=0;class qa extends Hc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:dTe++}),this.uuid=ho(),this.name="",this.type="Material",this.blending=ip,this.side=Yu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=fT,this.blendDst=hT,this.blendEquation=ff,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new kt(0,0,0),this.blendAlpha=0,this.depthFunc=mp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=eO,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Fh,this.stencilZFail=Fh,this.stencilZPass=Fh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){yt(`Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){yt(`Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(r.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(r.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==ip&&(r.blending=this.blending),this.side!==Yu&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==fT&&(r.blendSrc=this.blendSrc),this.blendDst!==hT&&(r.blendDst=this.blendDst),this.blendEquation!==ff&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==mp&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==eO&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Fh&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Fh&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Fh&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.allowOverride===!1&&(r.allowOverride=!1),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(a){const s=[];for(const o in a){const c=a[o];delete c.metadata,s.push(c)}return s}if(n){const a=i(e.textures),s=i(e.images);a.length>0&&(r.textures=a),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let a=0;a!==i;++a)r[a]=n[a].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Cf extends qa{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new kt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new po,this.combine=Db,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Du=fTe();function fTe(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let c=0;c<256;++c){const u=c-127;u<-27?(r[c]=0,r[c|256]=32768,i[c]=24,i[c|256]=24):u<-14?(r[c]=1024>>-u-14,r[c|256]=1024>>-u-14|32768,i[c]=-u-1,i[c|256]=-u-1):u<=15?(r[c]=u+15<<10,r[c|256]=u+15<<10|32768,i[c]=13,i[c|256]=13):u<128?(r[c]=31744,r[c|256]=64512,i[c]=24,i[c|256]=24):(r[c]=31744,r[c|256]=64512,i[c]=13,i[c|256]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let c=1;c<1024;++c){let u=c<<13,h=0;for(;(u&8388608)===0;)u<<=1,h-=8388608;u&=-8388609,h+=947912704,a[c]=u|h}for(let c=1024;c<2048;++c)a[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)s[c]=c<<23;s[31]=1199570944,s[32]=2147483648;for(let c=33;c<63;++c)s[c]=2147483648+(c-32<<23);s[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(o[c]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:s,offsetTable:o}}function Ls(t){Math.abs(t)>65504&&yt("DataUtils.toHalfFloat(): Value out of range."),t=tn(t,-65504,65504),Du.floatView[0]=t;const e=Du.uint32View[0],n=e>>23&511;return Du.baseTable[n]+((e&8388607)>>Du.shiftTable[n])}function Gy(t){const e=t>>10;return Du.uint32View[0]=Du.mantissaTable[Du.offsetTable[e]+(t&1023)]+Du.exponentTable[e],Du.floatView[0]}class hTe{static toHalfFloat(e){return Ls(e)}static fromHalfFloat(e){return Gy(e)}}const Mi=new se,cS=new We;let pTe=0;class gr{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:pTe++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=mb,this.updateRanges=[],this.gpuType=ra,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)cS.fromBufferAttribute(this,n),cS.applyMatrix3(e),this.setXY(n,cS.x,cS.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Mi.fromBufferAttribute(this,n),Mi.applyMatrix3(e),this.setXYZ(n,Mi.x,Mi.y,Mi.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Mi.fromBufferAttribute(this,n),Mi.applyMatrix4(e),this.setXYZ(n,Mi.x,Mi.y,Mi.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Mi.fromBufferAttribute(this,n),Mi.applyNormalMatrix(e),this.setXYZ(n,Mi.x,Mi.y,Mi.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Mi.fromBufferAttribute(this,n),Mi.transformDirection(e),this.setXYZ(n,Mi.x,Mi.y,Mi.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=us(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=bn(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=us(n,this.array)),n}setX(e,n){return this.normalized&&(n=bn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=us(n,this.array)),n}setY(e,n){return this.normalized&&(n=bn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=us(n,this.array)),n}setZ(e,n){return this.normalized&&(n=bn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=us(n,this.array)),n}setW(e,n){return this.normalized&&(n=bn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=bn(n,this.array),r=bn(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=bn(n,this.array),r=bn(r,this.array),i=bn(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,a){return e*=this.itemSize,this.normalized&&(n=bn(n,this.array),r=bn(r,this.array),i=bn(i,this.array),a=bn(a,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==mb&&(e.usage=this.usage),e}}class mTe extends gr{constructor(e,n,r){super(new Int8Array(e),n,r)}}class gTe extends gr{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class vTe extends gr{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class yTe extends gr{constructor(e,n,r){super(new Int16Array(e),n,r)}}class aD extends gr{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class xTe extends gr{constructor(e,n,r){super(new Int32Array(e),n,r)}}class sD extends gr{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class bTe extends gr{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=Gy(this.array[e*this.itemSize]);return this.normalized&&(n=us(n,this.array)),n}setX(e,n){return this.normalized&&(n=bn(n,this.array)),this.array[e*this.itemSize]=Ls(n),this}getY(e){let n=Gy(this.array[e*this.itemSize+1]);return this.normalized&&(n=us(n,this.array)),n}setY(e,n){return this.normalized&&(n=bn(n,this.array)),this.array[e*this.itemSize+1]=Ls(n),this}getZ(e){let n=Gy(this.array[e*this.itemSize+2]);return this.normalized&&(n=us(n,this.array)),n}setZ(e,n){return this.normalized&&(n=bn(n,this.array)),this.array[e*this.itemSize+2]=Ls(n),this}getW(e){let n=Gy(this.array[e*this.itemSize+3]);return this.normalized&&(n=us(n,this.array)),n}setW(e,n){return this.normalized&&(n=bn(n,this.array)),this.array[e*this.itemSize+3]=Ls(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=bn(n,this.array),r=bn(r,this.array)),this.array[e+0]=Ls(n),this.array[e+1]=Ls(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=bn(n,this.array),r=bn(r,this.array),i=bn(i,this.array)),this.array[e+0]=Ls(n),this.array[e+1]=Ls(r),this.array[e+2]=Ls(i),this}setXYZW(e,n,r,i,a){return e*=this.itemSize,this.normalized&&(n=bn(n,this.array),r=bn(r,this.array),i=bn(i,this.array),a=bn(a,this.array)),this.array[e+0]=Ls(n),this.array[e+1]=Ls(r),this.array[e+2]=Ls(i),this.array[e+3]=Ls(a),this}}class Ot extends gr{constructor(e,n,r){super(new Float32Array(e),n,r)}}let _Te=0;const Ho=new an,gI=new Wn,tg=new se,to=new Ga,ky=new Ga,Qi=new se;class hn extends Hc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_Te++}),this.uuid=ho(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(pW(e)?sD:aD)(e,1):this.index=e,this}setIndirect(e,n=0){return this.indirect=e,this.indirectOffset=n,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const a=new gn().getNormalMatrix(e);r.applyNormalMatrix(a),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ho.makeRotationFromQuaternion(e),this.applyMatrix4(Ho),this}rotateX(e){return Ho.makeRotationX(e),this.applyMatrix4(Ho),this}rotateY(e){return Ho.makeRotationY(e),this.applyMatrix4(Ho),this}rotateZ(e){return Ho.makeRotationZ(e),this.applyMatrix4(Ho),this}translate(e,n,r){return Ho.makeTranslation(e,n,r),this.applyMatrix4(Ho),this}scale(e,n,r){return Ho.makeScale(e,n,r),this.applyMatrix4(Ho),this}lookAt(e){return gI.lookAt(e),gI.updateMatrix(),this.applyMatrix4(gI.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(tg).negate(),this.translate(tg.x,tg.y,tg.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const r=[];for(let i=0,a=e.length;i<a;i++){const s=e[i];r.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Ot(r,3))}else{const r=Math.min(e.length,n.count);for(let i=0;i<r;i++){const a=e[i];n.setXYZ(i,a.x,a.y,a.z||0)}e.length>n.count&&yt("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ga);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Bt("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new se(-1/0,-1/0,-1/0),new se(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const a=n[r];to.setFromBufferAttribute(a),this.morphTargetsRelative?(Qi.addVectors(this.boundingBox.min,to.min),this.boundingBox.expandByPoint(Qi),Qi.addVectors(this.boundingBox.max,to.max),this.boundingBox.expandByPoint(Qi)):(this.boundingBox.expandByPoint(to.min),this.boundingBox.expandByPoint(to.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Bt('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sa);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Bt("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new se,1/0);return}if(e){const r=this.boundingSphere.center;if(to.setFromBufferAttribute(e),n)for(let a=0,s=n.length;a<s;a++){const o=n[a];ky.setFromBufferAttribute(o),this.morphTargetsRelative?(Qi.addVectors(to.min,ky.min),to.expandByPoint(Qi),Qi.addVectors(to.max,ky.max),to.expandByPoint(Qi)):(to.expandByPoint(ky.min),to.expandByPoint(ky.max))}to.getCenter(r);let i=0;for(let a=0,s=e.count;a<s;a++)Qi.fromBufferAttribute(e,a),i=Math.max(i,r.distanceToSquared(Qi));if(n)for(let a=0,s=n.length;a<s;a++){const o=n[a],c=this.morphTargetsRelative;for(let u=0,h=o.count;u<h;u++)Qi.fromBufferAttribute(o,u),c&&(tg.fromBufferAttribute(e,u),Qi.add(tg)),i=Math.max(i,r.distanceToSquared(Qi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&Bt('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){Bt("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,a=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new gr(new Float32Array(4*r.count),4));const s=this.getAttribute("tangent"),o=[],c=[];for(let F=0;F<r.count;F++)o[F]=new se,c[F]=new se;const u=new se,h=new se,m=new se,v=new We,x=new We,_=new We,T=new se,w=new se;function E(F,L,z){u.fromBufferAttribute(r,F),h.fromBufferAttribute(r,L),m.fromBufferAttribute(r,z),v.fromBufferAttribute(a,F),x.fromBufferAttribute(a,L),_.fromBufferAttribute(a,z),h.sub(u),m.sub(u),x.sub(v),_.sub(v);const V=1/(x.x*_.y-_.x*x.y);isFinite(V)&&(T.copy(h).multiplyScalar(_.y).addScaledVector(m,-x.y).multiplyScalar(V),w.copy(m).multiplyScalar(x.x).addScaledVector(h,-_.x).multiplyScalar(V),o[F].add(T),o[L].add(T),o[z].add(T),c[F].add(w),c[L].add(w),c[z].add(w))}let N=this.groups;N.length===0&&(N=[{start:0,count:e.count}]);for(let F=0,L=N.length;F<L;++F){const z=N[F],V=z.start,G=z.count;for(let $=V,ee=V+G;$<ee;$+=3)E(e.getX($+0),e.getX($+1),e.getX($+2))}const C=new se,P=new se,I=new se,j=new se;function O(F){I.fromBufferAttribute(i,F),j.copy(I);const L=o[F];C.copy(L),C.sub(I.multiplyScalar(I.dot(L))).normalize(),P.crossVectors(j,L);const V=P.dot(c[F])<0?-1:1;s.setXYZW(F,C.x,C.y,C.z,V)}for(let F=0,L=N.length;F<L;++F){const z=N[F],V=z.start,G=z.count;for(let $=V,ee=V+G;$<ee;$+=3)O(e.getX($+0)),O(e.getX($+1)),O(e.getX($+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new gr(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let v=0,x=r.count;v<x;v++)r.setXYZ(v,0,0,0);const i=new se,a=new se,s=new se,o=new se,c=new se,u=new se,h=new se,m=new se;if(e)for(let v=0,x=e.count;v<x;v+=3){const _=e.getX(v+0),T=e.getX(v+1),w=e.getX(v+2);i.fromBufferAttribute(n,_),a.fromBufferAttribute(n,T),s.fromBufferAttribute(n,w),h.subVectors(s,a),m.subVectors(i,a),h.cross(m),o.fromBufferAttribute(r,_),c.fromBufferAttribute(r,T),u.fromBufferAttribute(r,w),o.add(h),c.add(h),u.add(h),r.setXYZ(_,o.x,o.y,o.z),r.setXYZ(T,c.x,c.y,c.z),r.setXYZ(w,u.x,u.y,u.z)}else for(let v=0,x=n.count;v<x;v+=3)i.fromBufferAttribute(n,v+0),a.fromBufferAttribute(n,v+1),s.fromBufferAttribute(n,v+2),h.subVectors(s,a),m.subVectors(i,a),h.cross(m),r.setXYZ(v+0,h.x,h.y,h.z),r.setXYZ(v+1,h.x,h.y,h.z),r.setXYZ(v+2,h.x,h.y,h.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)Qi.fromBufferAttribute(e,n),Qi.normalize(),e.setXYZ(n,Qi.x,Qi.y,Qi.z)}toNonIndexed(){function e(o,c){const u=o.array,h=o.itemSize,m=o.normalized,v=new u.constructor(c.length*h);let x=0,_=0;for(let T=0,w=c.length;T<w;T++){o.isInterleavedBufferAttribute?x=c[T]*o.data.stride+o.offset:x=c[T]*h;for(let E=0;E<h;E++)v[_++]=u[x++]}return new gr(v,h,m)}if(this.index===null)return yt("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new hn,r=this.index.array,i=this.attributes;for(const o in i){const c=i[o],u=e(c,r);n.setAttribute(o,u)}const a=this.morphAttributes;for(const o in a){const c=[],u=a[o];for(let h=0,m=u.length;h<m;h++){const v=u[h],x=e(v,r);c.push(x)}n.morphAttributes[o]=c}n.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,c=s.length;o<c;o++){const u=s[o];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const u in c)c[u]!==void 0&&(e[u]=c[u]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const c in r){const u=r[c];e.data.attributes[c]=u.toJSON(e.data)}const i={};let a=!1;for(const c in this.morphAttributes){const u=this.morphAttributes[c],h=[];for(let m=0,v=u.length;m<v;m++){const x=u[m];h.push(x.toJSON(e.data))}h.length>0&&(i[c]=h,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone());const i=e.attributes;for(const u in i){const h=i[u];this.setAttribute(u,h.clone(n))}const a=e.morphAttributes;for(const u in a){const h=[],m=a[u];for(let v=0,x=m.length;v<x;v++)h.push(m[v].clone(n));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let u=0,h=s.length;u<h;u++){const m=s[u];this.addGroup(m.start,m.count,m.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Q8=new an,Eh=new jv,uS=new Sa,eV=new se,dS=new se,fS=new se,hS=new se,vI=new se,pS=new se,tV=new se,mS=new se;class Ii extends Wn{constructor(e=new hn,n=new Cf){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,a=r.morphAttributes.position,s=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(a&&o){pS.set(0,0,0);for(let c=0,u=a.length;c<u;c++){const h=o[c],m=a[c];h!==0&&(vI.fromBufferAttribute(m,e),s?pS.addScaledVector(vI,h):pS.addScaledVector(vI.sub(n),h))}n.add(pS)}return n}raycast(e,n){const r=this.geometry,i=this.material,a=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),uS.copy(r.boundingSphere),uS.applyMatrix4(a),Eh.copy(e.ray).recast(e.near),!(uS.containsPoint(Eh.origin)===!1&&(Eh.intersectSphere(uS,eV)===null||Eh.origin.distanceToSquared(eV)>(e.far-e.near)**2))&&(Q8.copy(a).invert(),Eh.copy(e.ray).applyMatrix4(Q8),!(r.boundingBox!==null&&Eh.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,Eh)))}_computeIntersections(e,n,r){let i;const a=this.geometry,s=this.material,o=a.index,c=a.attributes.position,u=a.attributes.uv,h=a.attributes.uv1,m=a.attributes.normal,v=a.groups,x=a.drawRange;if(o!==null)if(Array.isArray(s))for(let _=0,T=v.length;_<T;_++){const w=v[_],E=s[w.materialIndex],N=Math.max(w.start,x.start),C=Math.min(o.count,Math.min(w.start+w.count,x.start+x.count));for(let P=N,I=C;P<I;P+=3){const j=o.getX(P),O=o.getX(P+1),F=o.getX(P+2);i=gS(this,E,e,r,u,h,m,j,O,F),i&&(i.faceIndex=Math.floor(P/3),i.face.materialIndex=w.materialIndex,n.push(i))}}else{const _=Math.max(0,x.start),T=Math.min(o.count,x.start+x.count);for(let w=_,E=T;w<E;w+=3){const N=o.getX(w),C=o.getX(w+1),P=o.getX(w+2);i=gS(this,s,e,r,u,h,m,N,C,P),i&&(i.faceIndex=Math.floor(w/3),n.push(i))}}else if(c!==void 0)if(Array.isArray(s))for(let _=0,T=v.length;_<T;_++){const w=v[_],E=s[w.materialIndex],N=Math.max(w.start,x.start),C=Math.min(c.count,Math.min(w.start+w.count,x.start+x.count));for(let P=N,I=C;P<I;P+=3){const j=P,O=P+1,F=P+2;i=gS(this,E,e,r,u,h,m,j,O,F),i&&(i.faceIndex=Math.floor(P/3),i.face.materialIndex=w.materialIndex,n.push(i))}}else{const _=Math.max(0,x.start),T=Math.min(c.count,x.start+x.count);for(let w=_,E=T;w<E;w+=3){const N=w,C=w+1,P=w+2;i=gS(this,s,e,r,u,h,m,N,C,P),i&&(i.faceIndex=Math.floor(w/3),n.push(i))}}}}function wTe(t,e,n,r,i,a,s,o){let c;if(e.side===ps?c=r.intersectTriangle(s,a,i,!0,o):c=r.intersectTriangle(i,a,s,e.side===Yu,o),c===null)return null;mS.copy(o),mS.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(mS);return u<n.near||u>n.far?null:{distance:u,point:mS.clone(),object:t}}function gS(t,e,n,r,i,a,s,o,c,u){t.getVertexPosition(o,dS),t.getVertexPosition(c,fS),t.getVertexPosition(u,hS);const h=wTe(t,e,n,r,dS,fS,hS,tV);if(h){const m=new se;zs.getBarycoord(tV,dS,fS,hS,m),i&&(h.uv=zs.getInterpolatedAttribute(i,o,c,u,m,new We)),a&&(h.uv1=zs.getInterpolatedAttribute(a,o,c,u,m,new We)),s&&(h.normal=zs.getInterpolatedAttribute(s,o,c,u,m,new se),h.normal.dot(r.direction)>0&&h.normal.multiplyScalar(-1));const v={a:o,b:c,c:u,normal:new se,materialIndex:0};zs.getNormal(dS,fS,hS,v.normal),h.face=v,h.barycoord=m}return h}class kp extends hn{constructor(e=1,n=1,r=1,i=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:a,depthSegments:s};const o=this;i=Math.floor(i),a=Math.floor(a),s=Math.floor(s);const c=[],u=[],h=[],m=[];let v=0,x=0;_("z","y","x",-1,-1,r,n,e,s,a,0),_("z","y","x",1,-1,r,n,-e,s,a,1),_("x","z","y",1,1,e,r,n,i,s,2),_("x","z","y",1,-1,e,r,-n,i,s,3),_("x","y","z",1,-1,e,n,r,i,a,4),_("x","y","z",-1,-1,e,n,-r,i,a,5),this.setIndex(c),this.setAttribute("position",new Ot(u,3)),this.setAttribute("normal",new Ot(h,3)),this.setAttribute("uv",new Ot(m,2));function _(T,w,E,N,C,P,I,j,O,F,L){const z=P/O,V=I/F,G=P/2,$=I/2,ee=j/2,te=O+1,K=F+1;let X=0,re=0;const ce=new se;for(let de=0;de<K;de++){const W=de*V-$;for(let ae=0;ae<te;ae++){const me=ae*z-G;ce[T]=me*N,ce[w]=W*C,ce[E]=ee,u.push(ce.x,ce.y,ce.z),ce[T]=0,ce[w]=0,ce[E]=j>0?1:-1,h.push(ce.x,ce.y,ce.z),m.push(ae/O),m.push(1-de/F),X+=1}}for(let de=0;de<F;de++)for(let W=0;W<O;W++){const ae=v+W+te*de,me=v+W+te*(de+1),Ie=v+(W+1)+te*(de+1),Xe=v+(W+1)+te*de;c.push(ae,me,Xe),c.push(me,Ie,Xe),re+=6}o.addGroup(x,re,L),x+=re,v+=X}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kp(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function yv(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(yt("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function os(t){const e={};for(let n=0;n<t.length;n++){const r=yv(t[n]);for(const i in r)e[i]=r[i]}return e}function STe(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function xW(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Fn.workingColorSpace}const bW={clone:yv,merge:os};var TTe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,ETe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Gs extends qa{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=TTe,this.fragmentShader=ETe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=yv(e.uniforms),this.uniformsGroups=STe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?n.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?n.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?n.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?n.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?n.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?n.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?n.uniforms[i]={type:"m4",value:s.toArray()}:n.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class SA extends Wn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new an,this.projectionMatrix=new an,this.projectionMatrixInverse=new an,this.coordinateSystem=co,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const ef=new se,nV=new We,rV=new We;class na extends SA{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=gv*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ap*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return gv*2*Math.atan(Math.tan(ap*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){ef.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(ef.x,ef.y).multiplyScalar(-e/ef.z),ef.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(ef.x,ef.y).multiplyScalar(-e/ef.z)}getViewSize(e,n){return this.getViewBounds(e,nV,rV),n.subVectors(rV,nV)}setViewOffset(e,n,r,i,a,s){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(ap*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,a=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const c=s.fullWidth,u=s.fullHeight;a+=s.offsetX*i/c,n-=s.offsetY*r/u,i*=s.width/c,r*=s.height/u}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,n,n-r,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const ng=-90,rg=1;class _W extends Wn{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new na(ng,rg,e,n);i.layers=this.layers,this.add(i);const a=new na(ng,rg,e,n);a.layers=this.layers,this.add(a);const s=new na(ng,rg,e,n);s.layers=this.layers,this.add(s);const o=new na(ng,rg,e,n);o.layers=this.layers,this.add(o);const c=new na(ng,rg,e,n);c.layers=this.layers,this.add(c);const u=new na(ng,rg,e,n);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,a,s,o,c]=n;for(const u of n)this.remove(u);if(e===co)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===pv)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of n)this.add(u),u.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,o,c,u,h]=this.children,m=e.getRenderTarget(),v=e.getActiveCubeFace(),x=e.getActiveMipmapLevel(),_=e.xr.enabled;e.xr.enabled=!1;const T=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,a),e.setRenderTarget(r,1,i),e.render(n,s),e.setRenderTarget(r,2,i),e.render(n,o),e.setRenderTarget(r,3,i),e.render(n,c),e.setRenderTarget(r,4,i),e.render(n,u),r.texture.generateMipmaps=T,e.setRenderTarget(r,5,i),e.render(n,h),e.setRenderTarget(m,v,x),e.xr.enabled=_,r.texture.needsPMREMUpdate=!0}}class Ub extends di{constructor(e=[],n=Lc,r,i,a,s,o,c,u,h){super(e,n,r,i,a,s,o,c,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class oD extends Hs{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new Ub(i),this._setTextureOptions(n),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new kp(5,5,5),a=new Gs({name:"CubemapFromEquirect",uniforms:yv(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ps,blending:Oc});a.uniforms.tEquirect.value=n;const s=new Ii(i,a),o=n.minFilter;return n.minFilter===Cc&&(n.minFilter=wr),new _W(1,10,this).update(e,s),n.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,n=!0,r=!0,i=!0){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(n,r,i);e.setRenderTarget(a)}}class Ig extends Wn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const ATe={type:"move"};class QS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ig,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ig,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new se,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new se),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ig,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new se,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new se),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,a=null,s=null;const o=this._targetRay,c=this._grip,u=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(const T of e.hand.values()){const w=n.getJointPose(T,r),E=this._getHandJoint(u,T);w!==null&&(E.matrix.fromArray(w.transform.matrix),E.matrix.decompose(E.position,E.rotation,E.scale),E.matrixWorldNeedsUpdate=!0,E.jointRadius=w.radius),E.visible=w!==null}const h=u.joints["index-finger-tip"],m=u.joints["thumb-tip"],v=h.position.distanceTo(m.position),x=.02,_=.005;u.inputState.pinching&&v>x+_?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&v<=x-_&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(a=n.getPose(e.gripSpace,r),a!==null&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1));o!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&a!==null&&(i=a),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(ATe)))}return o!==null&&(o.visible=i!==null),c!==null&&(c.visible=a!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new Ig;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class TA{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new kt(e),this.density=n}clone(){return new TA(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class EA{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new kt(e),this.near=n,this.far=r}clone(){return new EA(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class AA extends Wn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new po,this.environmentIntensity=1,this.environmentRotation=new po,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class kA{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=mb,this.updateRanges=[],this.version=0,this.uuid=ho()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,a=this.stride;i<a;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ho()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ho()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ss=new se;class vp{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)ss.fromBufferAttribute(this,n),ss.applyMatrix4(e),this.setXYZ(n,ss.x,ss.y,ss.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)ss.fromBufferAttribute(this,n),ss.applyNormalMatrix(e),this.setXYZ(n,ss.x,ss.y,ss.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)ss.fromBufferAttribute(this,n),ss.transformDirection(e),this.setXYZ(n,ss.x,ss.y,ss.z);return this}getComponent(e,n){let r=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(r=us(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=bn(r,this.array)),this.data.array[e*this.data.stride+this.offset+n]=r,this}setX(e,n){return this.normalized&&(n=bn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=bn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=bn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=bn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=us(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=us(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=us(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=us(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=bn(n,this.array),r=bn(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=bn(n,this.array),r=bn(r,this.array),i=bn(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(n=bn(n,this.array),r=bn(r,this.array),i=bn(i,this.array),a=bn(a,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=a,this}clone(e){if(e===void 0){vb("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[i+a])}return new gr(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new vp(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){vb("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[i+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class lD extends qa{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new kt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let ig;const My=new se,ag=new se,sg=new se,og=new We,Ny=new We,wW=new an,vS=new se,Cy=new se,yS=new se,iV=new We,yI=new We,aV=new We;class SW extends Wn{constructor(e=new lD){if(super(),this.isSprite=!0,this.type="Sprite",ig===void 0){ig=new hn;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new kA(n,5);ig.setIndex([0,1,2,0,2,3]),ig.setAttribute("position",new vp(r,3,0,!1)),ig.setAttribute("uv",new vp(r,2,3,!1))}this.geometry=ig,this.material=e,this.center=new We(.5,.5),this.count=1}raycast(e,n){e.camera===null&&Bt('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ag.setFromMatrixScale(this.matrixWorld),wW.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),sg.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&ag.multiplyScalar(-sg.z);const r=this.material.rotation;let i,a;r!==0&&(a=Math.cos(r),i=Math.sin(r));const s=this.center;xS(vS.set(-.5,-.5,0),sg,s,ag,i,a),xS(Cy.set(.5,-.5,0),sg,s,ag,i,a),xS(yS.set(.5,.5,0),sg,s,ag,i,a),iV.set(0,0),yI.set(1,0),aV.set(1,1);let o=e.ray.intersectTriangle(vS,Cy,yS,!1,My);if(o===null&&(xS(Cy.set(-.5,.5,0),sg,s,ag,i,a),yI.set(0,1),o=e.ray.intersectTriangle(vS,yS,Cy,!1,My),o===null))return;const c=e.ray.origin.distanceTo(My);c<e.near||c>e.far||n.push({distance:c,point:My.clone(),uv:zs.getInterpolation(My,vS,Cy,yS,iV,yI,aV,new We),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function xS(t,e,n,r,i,a){og.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(Ny.x=a*og.x-i*og.y,Ny.y=i*og.x+a*og.y):Ny.copy(og),t.copy(e),t.x+=Ny.x,t.y+=Ny.y,t.applyMatrix4(wW)}const bS=new se,sV=new se;class TW extends Wn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const a=n[r];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let a;for(a=0;a<i.length&&!(n<i[a].distance);a++);return i.splice(a,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const n=this.levels;for(let r=0;r<n.length;r++)if(n[r].distance===e){const i=n.splice(r,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let a=n[r].distance;if(n[r].object.visible&&(a-=a*n[r].hysteresis),e<a)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){bS.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(bS);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){bS.setFromMatrixPosition(e.matrixWorld),sV.setFromMatrixPosition(this.matrixWorld);const r=bS.distanceTo(sV)/e.zoom;n[0].object.visible=!0;let i,a;for(i=1,a=n.length;i<a;i++){let s=n[i].distance;if(n[i].object.visible&&(s-=s*n[i].hysteresis),r>=s)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<a;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,a=r.length;i<a;i++){const s=r[i];n.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return n}}const oV=new se,lV=new br,cV=new br,kTe=new se,uV=new an,_S=new se,xI=new Sa,dV=new an,bI=new jv;class EW extends Ii{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Q3,this.bindMatrix=new an,this.bindMatrixInverse=new an,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ga),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,_S),this.boundingBox.expandByPoint(_S)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Sa),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,_S),this.boundingSphere.expandByPoint(_S)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),xI.copy(this.boundingSphere),xI.applyMatrix4(i),e.ray.intersectsSphere(xI)!==!1&&(dV.copy(i).invert(),bI.copy(e.ray).applyMatrix4(dV),!(this.boundingBox!==null&&bI.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,bI)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new br,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Q3?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===nW?this.bindMatrixInverse.copy(this.bindMatrix).invert():yt("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;lV.fromBufferAttribute(i.attributes.skinIndex,e),cV.fromBufferAttribute(i.attributes.skinWeight,e),oV.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let a=0;a<4;a++){const s=cV.getComponent(a);if(s!==0){const o=lV.getComponent(a);uV.multiplyMatrices(r.bones[o].matrixWorld,r.boneInverses[o]),n.addScaledVector(kTe.copy(oV).applyMatrix4(uV),s)}}return n.applyMatrix4(this.bindMatrixInverse)}}class cD extends Wn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Yo extends di{constructor(e=null,n=1,r=1,i,a,s,o,c,u=ti,h=ti,m,v){super(null,s,o,c,u,h,i,a,m,v),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const fV=new an,MTe=new an;class MA{constructor(e=[],n=[]){this.uuid=ho(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){yt("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new an)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new an;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const o=e[a]?e[a].matrixWorld:MTe;fV.multiplyMatrices(o,n[a]),fV.toArray(r,a*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new MA(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new Yo(n,e,e,ia,ra);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const a=e.bones[r];let s=n[a];s===void 0&&(yt("Skeleton: No bone found with UUID:",a),s=new cD),this.bones.push(s),this.boneInverses.push(new an().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,a=n.length;i<a;i++){const s=n[i];e.bones.push(s.uuid);const o=r[i];e.boneInverses.push(o.toArray())}return e}}class xv extends gr{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const lg=new an,hV=new an,wS=[],pV=new Ga,NTe=new an,Ry=new Ii,Iy=new Sa;class AW extends Ii{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new xv(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,NTe)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Ga),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,lg),pV.copy(e.boundingBox).applyMatrix4(lg),this.boundingBox.union(pV)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Sa),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,lg),Iy.copy(e.boundingSphere).applyMatrix4(lg),this.boundingSphere.union(Iy)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const r=n.morphTargetInfluences,i=this.morphTexture.source.data.data,a=r.length+1,s=e*a+1;for(let o=0;o<r.length;o++)r[o]=i[s+o]}raycast(e,n){const r=this.matrixWorld,i=this.count;if(Ry.geometry=this.geometry,Ry.material=this.material,Ry.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Iy.copy(this.boundingSphere),Iy.applyMatrix4(r),e.ray.intersectsSphere(Iy)!==!1))for(let a=0;a<i;a++){this.getMatrixAt(a,lg),hV.multiplyMatrices(r,lg),Ry.matrixWorld=hV,Ry.raycast(e,wS);for(let s=0,o=wS.length;s<o;s++){const c=wS[s];c.instanceId=a,c.object=this,n.push(c)}wS.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new xv(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const r=n.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new Yo(new Float32Array(i*this.count),i,this.count,mA,ra));const a=this.morphTexture.source.data.data;let s=0;for(let u=0;u<r.length;u++)s+=r[u];const o=this.geometry.morphTargetsRelative?1:1-s,c=i*e;a[c]=o,a.set(r,c+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const _I=new se,CTe=new se,RTe=new gn;class cf{constructor(e=new se(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=_I.subVectors(r,n).cross(CTe.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(_I),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:n.copy(e.start).addScaledVector(r,a)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||RTe.getNormalMatrix(e),i=this.coplanarPoint(_I).applyMatrix4(e),a=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ah=new Sa,ITe=new We(.5,.5),SS=new se;class Dv{constructor(e=new cf,n=new cf,r=new cf,i=new cf,a=new cf,s=new cf){this.planes=[e,n,r,i,a,s]}set(e,n,r,i,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(n),o[2].copy(r),o[3].copy(i),o[4].copy(a),o[5].copy(s),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=co,r=!1){const i=this.planes,a=e.elements,s=a[0],o=a[1],c=a[2],u=a[3],h=a[4],m=a[5],v=a[6],x=a[7],_=a[8],T=a[9],w=a[10],E=a[11],N=a[12],C=a[13],P=a[14],I=a[15];if(i[0].setComponents(u-s,x-h,E-_,I-N).normalize(),i[1].setComponents(u+s,x+h,E+_,I+N).normalize(),i[2].setComponents(u+o,x+m,E+T,I+C).normalize(),i[3].setComponents(u-o,x-m,E-T,I-C).normalize(),r)i[4].setComponents(c,v,w,P).normalize(),i[5].setComponents(u-c,x-v,E-w,I-P).normalize();else if(i[4].setComponents(u-c,x-v,E-w,I-P).normalize(),n===co)i[5].setComponents(u+c,x+v,E+w,I+P).normalize();else if(n===pv)i[5].setComponents(c,v,w,P).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ah.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Ah.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ah)}intersectsSprite(e){Ah.center.set(0,0,0);const n=ITe.distanceTo(e.center);return Ah.radius=.7071067811865476+n,Ah.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ah)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let a=0;a<6;a++)if(n[a].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(SS.x=i.normal.x>0?e.max.x:e.min.x,SS.y=i.normal.y>0?e.max.y:e.min.y,SS.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(SS)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Tc=new an,Ec=new Dv;class NA{constructor(){this.coordinateSystem=co}intersectsObject(e,n){if(!n.isArrayCamera||n.cameras.length===0)return!1;for(let r=0;r<n.cameras.length;r++){const i=n.cameras[r];if(Tc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Ec.setFromProjectionMatrix(Tc,i.coordinateSystem,i.reversedDepth),Ec.intersectsObject(e))return!0}return!1}intersectsSprite(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let r=0;r<n.cameras.length;r++){const i=n.cameras[r];if(Tc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Ec.setFromProjectionMatrix(Tc,i.coordinateSystem,i.reversedDepth),Ec.intersectsSprite(e))return!0}return!1}intersectsSphere(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let r=0;r<n.cameras.length;r++){const i=n.cameras[r];if(Tc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Ec.setFromProjectionMatrix(Tc,i.coordinateSystem,i.reversedDepth),Ec.intersectsSphere(e))return!0}return!1}intersectsBox(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let r=0;r<n.cameras.length;r++){const i=n.cameras[r];if(Tc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Ec.setFromProjectionMatrix(Tc,i.coordinateSystem,i.reversedDepth),Ec.intersectsBox(e))return!0}return!1}containsPoint(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let r=0;r<n.cameras.length;r++){const i=n.cameras[r];if(Tc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Ec.setFromProjectionMatrix(Tc,i.coordinateSystem,i.reversedDepth),Ec.containsPoint(e))return!0}return!1}clone(){return new NA}}function wI(t,e){return t-e}function PTe(t,e){return t.z-e.z}function OTe(t,e){return e.z-t.z}class jTe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n,r,i){const a=this.pool,s=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const o=a[this.index];s.push(o),this.index++,o.start=e,o.count=n,o.z=r,o.index=i}reset(){this.list.length=0,this.index=0}}const Ds=new an,DTe=new kt(1,1,1),mV=new Dv,LTe=new NA,TS=new Ga,kh=new Sa,Py=new se,gV=new se,UTe=new se,SI=new jTe,Ua=new Ii,ES=[];function zTe(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let a=0;a<i;a++)for(let s=0;s<r;s++)e.setComponent(a+n,s,t.getComponent(a,s))}else e.array.set(t.array,n*r);e.needsUpdate=!0}function Mh(t,e){if(t.constructor!==e.constructor){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++)e[r]=t[r]}else{const n=Math.min(t.length,e.length);e.set(new t.constructor(t.buffer,0,n))}}class kW extends Ii{constructor(e,n,r=n*2,i){super(new hn,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=n,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),r=new Yo(n,e,e,ia,ra);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Uint32Array(e*e),r=new Yo(n,e,e,Lb,tl);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Float32Array(e*e*4).fill(1),r=new Yo(n,e,e,ia,ra);r.colorSpace=Fn.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const s=e.getAttribute(a),{array:o,itemSize:c,normalized:u}=s,h=new o.constructor(r*c),m=new gr(h,c,u);n.setAttribute(a,m)}if(e.getIndex()!==null){const a=r>65535?new Uint32Array(i):new Uint16Array(i);n.setIndex(new gr(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(!e.hasAttribute(r))throw new Error(`THREE.BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),a=n.getAttribute(r);if(i.itemSize!==a.itemSize||i.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const n=this._instanceInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const n=this._geometryInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ga);const e=this.boundingBox,n=this._instanceInfo;e.makeEmpty();for(let r=0,i=n.length;r<i;r++){if(n[r].active===!1)continue;const a=n[r].geometryIndex;this.getMatrixAt(r,Ds),this.getBoundingBoxAt(a,TS).applyMatrix4(Ds),e.union(TS)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sa);const e=this.boundingSphere,n=this._instanceInfo;e.makeEmpty();for(let r=0,i=n.length;r<i;r++){if(n[r].active===!1)continue;const a=n[r].geometryIndex;this.getMatrixAt(r,Ds),this.getBoundingSphereAt(a,kh).applyMatrix4(Ds),e.union(kh)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(wI),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=r):(i=this._instanceInfo.length,this._instanceInfo.push(r));const a=this._matricesTexture;Ds.identity().toArray(a.image.data,i*16),a.needsUpdate=!0;const s=this._colorsTexture;return s&&(DTe.toArray(s.image.data,i*4),s.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,n=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=n===-1?e.getAttribute("position").count:n;const s=e.getIndex();if(s!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=r===-1?s.count:r),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(wI),c=this._availableGeometryIds.shift(),a[c]=i):(c=this._geometryCount,this._geometryCount++,a.push(i)),this.setGeometryAt(c,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,c}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,i=r.getIndex()!==null,a=r.getIndex(),s=n.getIndex(),o=this._geometryInfo[e];if(i&&s.count>o.reservedIndexCount||n.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=o.vertexStart,u=o.reservedVertexCount;o.vertexCount=n.getAttribute("position").count;for(const h in r.attributes){const m=n.getAttribute(h),v=r.getAttribute(h);zTe(m,v,c);const x=m.itemSize;for(let _=m.count,T=u;_<T;_++){const w=c+_;for(let E=0;E<x;E++)v.setComponent(w,E,0)}v.needsUpdate=!0,v.addUpdateRange(c*x,u*x)}if(i){const h=o.indexStart,m=o.reservedIndexCount;o.indexCount=n.getIndex().count;for(let v=0;v<s.count;v++)a.setX(h+v,c+s.getX(v));for(let v=s.count,x=m;v<x;v++)a.setX(h+v,c);a.needsUpdate=!0,a.addUpdateRange(h,o.reservedIndexCount)}return o.start=i?o.indexStart:o.vertexStart,o.count=i?o.indexCount:o.vertexCount,o.boundingBox=null,n.boundingBox!==null&&(o.boundingBox=n.boundingBox.clone()),o.boundingSphere=null,n.boundingSphere!==null&&(o.boundingSphere=n.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._geometryInfo;if(e>=n.length||n[e].active===!1)return this;const r=this._instanceInfo;for(let i=0,a=r.length;i<a;i++)r[i].active&&r[i].geometryIndex===e&&this.deleteInstance(i);return n[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,n=0;const r=this._geometryInfo,i=r.map((s,o)=>o).sort((s,o)=>r[s].vertexStart-r[o].vertexStart),a=this.geometry;for(let s=0,o=r.length;s<o;s++){const c=i[s],u=r[c];if(u.active!==!1){if(a.index!==null){if(u.indexStart!==n){const{indexStart:h,vertexStart:m,reservedIndexCount:v}=u,x=a.index,_=x.array,T=e-m;for(let w=h;w<h+v;w++)_[w]=_[w]+T;x.array.copyWithin(n,h,h+v),x.addUpdateRange(n,v),x.needsUpdate=!0,u.indexStart=n}n+=u.reservedIndexCount}if(u.vertexStart!==e){const{vertexStart:h,reservedVertexCount:m}=u,v=a.attributes;for(const x in v){const _=v[x],{array:T,itemSize:w}=_;T.copyWithin(e*w,h*w,(h+m)*w),_.addUpdateRange(e*w,m*w),_.needsUpdate=!0}u.vertexStart=e}e+=u.reservedVertexCount,u.start=a.index?u.indexStart:u.vertexStart,this._nextIndexStart=a.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(e,n){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const a=new Ga,s=r.index,o=r.attributes.position;for(let c=i.start,u=i.start+i.count;c<u;c++){let h=c;s&&(h=s.getX(h)),a.expandByPoint(Py.fromBufferAttribute(o,h))}i.boundingBox=a}return n.copy(i.boundingBox),n}getBoundingSphereAt(e,n){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const a=new Sa;this.getBoundingBoxAt(e,TS),TS.getCenter(a.center);const s=r.index,o=r.attributes.position;let c=0;for(let u=i.start,h=i.start+i.count;u<h;u++){let m=u;s&&(m=s.getX(m)),Py.fromBufferAttribute(o,m),c=Math.max(c,a.center.distanceToSquared(Py))}a.radius=Math.sqrt(c),i.boundingSphere=a}return n.copy(i.boundingSphere),n}setMatrixAt(e,n){this.validateInstanceId(e);const r=this._matricesTexture,i=this._matricesTexture.image.data;return n.toArray(i,e*16),r.needsUpdate=!0,this}getMatrixAt(e,n){return this.validateInstanceId(e),n.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,n){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),n.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,n){return this.validateInstanceId(e),n.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,n){return this.validateInstanceId(e),this._instanceInfo[e].visible===n?this:(this._instanceInfo[e].visible=n,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,n){return this.validateInstanceId(e),this.validateGeometryId(n),this._instanceInfo[e].geometryIndex=n,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,n={}){this.validateGeometryId(e);const r=this._geometryInfo[e];return n.vertexStart=r.vertexStart,n.vertexCount=r.vertexCount,n.reservedVertexCount=r.reservedVertexCount,n.indexStart=r.indexStart,n.indexCount=r.indexCount,n.reservedIndexCount=r.reservedIndexCount,n.start=r.start,n.count=r.count,n}setInstanceCount(e){const n=this._availableInstanceIds,r=this._instanceInfo;for(n.sort(wI);n[n.length-1]===r.length-1;)r.pop(),n.pop();if(e<r.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),a=new Int32Array(e);Mh(this._multiDrawCounts,i),Mh(this._multiDrawStarts,a),this._multiDrawCounts=i,this._multiDrawStarts=a,this._maxInstanceCount=e;const s=this._indirectTexture,o=this._matricesTexture,c=this._colorsTexture;s.dispose(),this._initIndirectTexture(),Mh(s.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),Mh(o.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),Mh(c.image.data,this._colorsTexture.image.data))}setGeometrySize(e,n){const r=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...r.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${n}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(c=>c.indexStart+c.reservedIndexCount))>n)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${n}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=n,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new hn,this._initializeGeometry(a));const s=this.geometry;a.index&&Mh(a.index.array,s.index.array);for(const o in a.attributes)Mh(a.attributes[o].array,s.attributes[o].array)}raycast(e,n){const r=this._instanceInfo,i=this._geometryInfo,a=this.matrixWorld,s=this.geometry;Ua.material=this.material,Ua.geometry.index=s.index,Ua.geometry.attributes=s.attributes,Ua.geometry.boundingBox===null&&(Ua.geometry.boundingBox=new Ga),Ua.geometry.boundingSphere===null&&(Ua.geometry.boundingSphere=new Sa);for(let o=0,c=r.length;o<c;o++){if(!r[o].visible||!r[o].active)continue;const u=r[o].geometryIndex,h=i[u];Ua.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(o,Ua.matrixWorld).premultiply(a),this.getBoundingBoxAt(u,Ua.geometry.boundingBox),this.getBoundingSphereAt(u,Ua.geometry.boundingSphere),Ua.raycast(e,ES);for(let m=0,v=ES.length;m<v;m++){const x=ES[m];x.object=this,x.batchId=o,n.push(x)}ES.length=0}Ua.material=null,Ua.geometry.index=null,Ua.geometry.attributes={},Ua.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(n=>({...n,boundingBox:n.boundingBox!==null?n.boundingBox.clone():null,boundingSphere:n.boundingSphere!==null?n.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(n=>({...n})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,n,r,i,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=i.getIndex(),o=s===null?1:s.array.BYTES_PER_ELEMENT,c=this._instanceInfo,u=this._multiDrawStarts,h=this._multiDrawCounts,m=this._geometryInfo,v=this.perObjectFrustumCulled,x=this._indirectTexture,_=x.image.data,T=r.isArrayCamera?LTe:mV;v&&!r.isArrayCamera&&(Ds.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),mV.setFromProjectionMatrix(Ds,r.coordinateSystem,r.reversedDepth));let w=0;if(this.sortObjects){Ds.copy(this.matrixWorld).invert(),Py.setFromMatrixPosition(r.matrixWorld).applyMatrix4(Ds),gV.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(Ds);for(let C=0,P=c.length;C<P;C++)if(c[C].visible&&c[C].active){const I=c[C].geometryIndex;this.getMatrixAt(C,Ds),this.getBoundingSphereAt(I,kh).applyMatrix4(Ds);let j=!1;if(v&&(j=!T.intersectsSphere(kh,r)),!j){const O=m[I],F=UTe.subVectors(kh.center,Py).dot(gV);SI.push(O.start,O.count,F,C)}}const E=SI.list,N=this.customSort;N===null?E.sort(a.transparent?OTe:PTe):N.call(this,E,r);for(let C=0,P=E.length;C<P;C++){const I=E[C];u[w]=I.start*o,h[w]=I.count,_[w]=I.index,w++}SI.reset()}else for(let E=0,N=c.length;E<N;E++)if(c[E].visible&&c[E].active){const C=c[E].geometryIndex;let P=!1;if(v&&(this.getMatrixAt(E,Ds),this.getBoundingSphereAt(C,kh).applyMatrix4(Ds),P=!T.intersectsSphere(kh,r)),!P){const I=m[C];u[w]=I.start*o,h[w]=I.count,_[w]=E,w++}}x.needsUpdate=!0,this._multiDrawCount=w,this._visibilityChanged=!1}onBeforeShadow(e,n,r,i,a,s){this.onBeforeRender(e,null,i,a,s)}}class gs extends qa{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new kt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const eE=new se,tE=new se,vV=new an,Oy=new jv,AS=new Sa,TI=new se,yV=new se;class Sf extends Wn{constructor(e=new hn,n=new gs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,a=n.count;i<a;i++)eE.fromBufferAttribute(n,i-1),tE.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=eE.distanceTo(tE);e.setAttribute("lineDistance",new Ot(r,1))}else yt("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,a=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),AS.copy(r.boundingSphere),AS.applyMatrix4(i),AS.radius+=a,e.ray.intersectsSphere(AS)===!1)return;vV.copy(i).invert(),Oy.copy(e.ray).applyMatrix4(vV);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,u=this.isLineSegments?2:1,h=r.index,v=r.attributes.position;if(h!==null){const x=Math.max(0,s.start),_=Math.min(h.count,s.start+s.count);for(let T=x,w=_-1;T<w;T+=u){const E=h.getX(T),N=h.getX(T+1),C=kS(this,e,Oy,c,E,N,T);C&&n.push(C)}if(this.isLineLoop){const T=h.getX(_-1),w=h.getX(x),E=kS(this,e,Oy,c,T,w,_-1);E&&n.push(E)}}else{const x=Math.max(0,s.start),_=Math.min(v.count,s.start+s.count);for(let T=x,w=_-1;T<w;T+=u){const E=kS(this,e,Oy,c,T,T+1,T);E&&n.push(E)}if(this.isLineLoop){const T=kS(this,e,Oy,c,_-1,x,_-1);T&&n.push(T)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function kS(t,e,n,r,i,a,s){const o=t.geometry.attributes.position;if(eE.fromBufferAttribute(o,i),tE.fromBufferAttribute(o,a),n.distanceSqToSegment(eE,tE,TI,yV)>r)return;TI.applyMatrix4(t.matrixWorld);const u=e.ray.origin.distanceTo(TI);if(!(u<e.near||u>e.far))return{distance:u,point:yV.clone().applyMatrix4(t.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:t}}const xV=new se,bV=new se;class Gc extends Sf{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,a=n.count;i<a;i+=2)xV.fromBufferAttribute(n,i),bV.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+xV.distanceTo(bV);e.setAttribute("lineDistance",new Ot(r,1))}else yt("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class MW extends Sf{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class uD extends qa{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new kt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const _V=new an,nO=new jv,MS=new Sa,NS=new se;class NW extends Wn{constructor(e=new hn,n=new uD){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),MS.copy(r.boundingSphere),MS.applyMatrix4(i),MS.radius+=a,e.ray.intersectsSphere(MS)===!1)return;_V.copy(i).invert(),nO.copy(e.ray).applyMatrix4(_V);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,u=r.index,m=r.attributes.position;if(u!==null){const v=Math.max(0,s.start),x=Math.min(u.count,s.start+s.count);for(let _=v,T=x;_<T;_++){const w=u.getX(_);NS.fromBufferAttribute(m,w),wV(NS,w,c,i,e,n,this)}}else{const v=Math.max(0,s.start),x=Math.min(m.count,s.start+s.count);for(let _=v,T=x;_<T;_++)NS.fromBufferAttribute(m,_),wV(NS,_,c,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function wV(t,e,n,r,i,a,s){const o=nO.distanceSqToPoint(t);if(o<n){const c=new se;nO.closestPointToPoint(t,c),c.applyMatrix4(r);const u=i.ray.origin.distanceTo(c);if(u<i.near||u>i.far)return;a.push({distance:u,distanceToRay:Math.sqrt(o),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}class CW extends di{constructor(e,n,r,i,a=wr,s=wr,o,c,u){super(e,n,r,i,a,s,o,c,u),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const h=this;function m(){h.needsUpdate=!0,h._requestVideoFrameCallbackId=e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(m))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class BTe extends CW{constructor(e,n,r,i,a,s,o,c){super({},e,n,r,i,a,s,o,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class FTe extends di{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=ti,this.minFilter=ti,this.generateMipmaps=!1,this.needsUpdate=!0}}class CA extends di{constructor(e,n,r,i,a,s,o,c,u,h,m,v){super(null,s,o,c,u,h,i,a,m,v),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class VTe extends CA{constructor(e,n,r,i,a,s){super(e,n,r,a,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Fs,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class HTe extends CA{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,Lc),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class GTe extends di{constructor(e,n,r,i,a,s,o,c,u){super(e,n,r,i,a,s,o,c,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class yp extends di{constructor(e,n,r=tl,i,a,s,o=ti,c=ti,u,h=Uc,m=1){if(h!==Uc&&h!==mf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const v={width:e,height:n,depth:m};super(v,i,a,s,o,c,h,r,u),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new gf(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class RW extends yp{constructor(e,n=tl,r=Lc,i,a,s=ti,o=ti,c,u=Uc){const h={width:e,height:e,depth:1},m=[h,h,h,h,h,h];super(e,e,n,r,i,a,s,o,c,u),this.image=m,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class dD extends di{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class RA extends hn{constructor(e=1,n=1,r=4,i=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:r,radialSegments:i,heightSegments:a},n=Math.max(0,n),r=Math.max(1,Math.floor(r)),i=Math.max(3,Math.floor(i)),a=Math.max(1,Math.floor(a));const s=[],o=[],c=[],u=[],h=n/2,m=Math.PI/2*e,v=n,x=2*m+v,_=r*2+a,T=i+1,w=new se,E=new se;for(let N=0;N<=_;N++){let C=0,P=0,I=0,j=0;if(N<=r){const L=N/r,z=L*Math.PI/2;P=-h-e*Math.cos(z),I=e*Math.sin(z),j=-e*Math.cos(z),C=L*m}else if(N<=r+a){const L=(N-r)/a;P=-h+L*n,I=e,j=0,C=m+L*v}else{const L=(N-r-a)/r,z=L*Math.PI/2;P=h+e*Math.sin(z),I=e*Math.cos(z),j=e*Math.sin(z),C=m+v+L*m}const O=Math.max(0,Math.min(1,C/x));let F=0;N===0?F=.5/i:N===_&&(F=-.5/i);for(let L=0;L<=i;L++){const z=L/i,V=z*Math.PI*2,G=Math.sin(V),$=Math.cos(V);E.x=-I*$,E.y=P,E.z=I*G,o.push(E.x,E.y,E.z),w.set(-I*$,j,I*G),w.normalize(),c.push(w.x,w.y,w.z),u.push(z+F,O)}if(N>0){const L=(N-1)*T;for(let z=0;z<i;z++){const V=L+z,G=L+z+1,$=N*T+z,ee=N*T+z+1;s.push(V,G,$),s.push(G,ee,$)}}}this.setIndex(s),this.setAttribute("position",new Ot(o,3)),this.setAttribute("normal",new Ot(c,3)),this.setAttribute("uv",new Ot(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new RA(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class IA extends hn{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const a=[],s=[],o=[],c=[],u=new se,h=new We;s.push(0,0,0),o.push(0,0,1),c.push(.5,.5);for(let m=0,v=3;m<=n;m++,v+=3){const x=r+m/n*i;u.x=e*Math.cos(x),u.y=e*Math.sin(x),s.push(u.x,u.y,u.z),o.push(0,0,1),h.x=(s[v]/e+1)/2,h.y=(s[v+1]/e+1)/2,c.push(h.x,h.y)}for(let m=1;m<=n;m++)a.push(m,m+1,0);this.setIndex(a),this.setAttribute("position",new Ot(s,3)),this.setAttribute("normal",new Ot(o,3)),this.setAttribute("uv",new Ot(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new IA(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class zb extends hn{constructor(e=1,n=1,r=1,i=32,a=1,s=!1,o=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:c};const u=this;i=Math.floor(i),a=Math.floor(a);const h=[],m=[],v=[],x=[];let _=0;const T=[],w=r/2;let E=0;N(),s===!1&&(e>0&&C(!0),n>0&&C(!1)),this.setIndex(h),this.setAttribute("position",new Ot(m,3)),this.setAttribute("normal",new Ot(v,3)),this.setAttribute("uv",new Ot(x,2));function N(){const P=new se,I=new se;let j=0;const O=(n-e)/r;for(let F=0;F<=a;F++){const L=[],z=F/a,V=z*(n-e)+e;for(let G=0;G<=i;G++){const $=G/i,ee=$*c+o,te=Math.sin(ee),K=Math.cos(ee);I.x=V*te,I.y=-z*r+w,I.z=V*K,m.push(I.x,I.y,I.z),P.set(te,O,K).normalize(),v.push(P.x,P.y,P.z),x.push($,1-z),L.push(_++)}T.push(L)}for(let F=0;F<i;F++)for(let L=0;L<a;L++){const z=T[L][F],V=T[L+1][F],G=T[L+1][F+1],$=T[L][F+1];(e>0||L!==0)&&(h.push(z,V,$),j+=3),(n>0||L!==a-1)&&(h.push(V,G,$),j+=3)}u.addGroup(E,j,0),E+=j}function C(P){const I=_,j=new We,O=new se;let F=0;const L=P===!0?e:n,z=P===!0?1:-1;for(let G=1;G<=i;G++)m.push(0,w*z,0),v.push(0,z,0),x.push(.5,.5),_++;const V=_;for(let G=0;G<=i;G++){const ee=G/i*c+o,te=Math.cos(ee),K=Math.sin(ee);O.x=L*K,O.y=w*z,O.z=L*te,m.push(O.x,O.y,O.z),v.push(0,z,0),j.x=te*.5+.5,j.y=K*.5*z+.5,x.push(j.x,j.y),_++}for(let G=0;G<i;G++){const $=I+G,ee=V+G;P===!0?h.push(ee,ee+1,$):h.push(ee+1,ee,$),F+=3}u.addGroup(E,F,P===!0?1:2),E+=F}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zb(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Bb extends zb{constructor(e=1,n=1,r=32,i=1,a=!1,s=0,o=Math.PI*2){super(0,e,n,r,i,a,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:o}}static fromJSON(e){return new Bb(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Rf extends hn{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const a=[],s=[];o(i),u(r),h(),this.setAttribute("position",new Ot(a,3)),this.setAttribute("normal",new Ot(a.slice(),3)),this.setAttribute("uv",new Ot(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(N){const C=new se,P=new se,I=new se;for(let j=0;j<n.length;j+=3)x(n[j+0],C),x(n[j+1],P),x(n[j+2],I),c(C,P,I,N)}function c(N,C,P,I){const j=I+1,O=[];for(let F=0;F<=j;F++){O[F]=[];const L=N.clone().lerp(P,F/j),z=C.clone().lerp(P,F/j),V=j-F;for(let G=0;G<=V;G++)G===0&&F===j?O[F][G]=L:O[F][G]=L.clone().lerp(z,G/V)}for(let F=0;F<j;F++)for(let L=0;L<2*(j-F)-1;L++){const z=Math.floor(L/2);L%2===0?(v(O[F][z+1]),v(O[F+1][z]),v(O[F][z])):(v(O[F][z+1]),v(O[F+1][z+1]),v(O[F+1][z]))}}function u(N){const C=new se;for(let P=0;P<a.length;P+=3)C.x=a[P+0],C.y=a[P+1],C.z=a[P+2],C.normalize().multiplyScalar(N),a[P+0]=C.x,a[P+1]=C.y,a[P+2]=C.z}function h(){const N=new se;for(let C=0;C<a.length;C+=3){N.x=a[C+0],N.y=a[C+1],N.z=a[C+2];const P=w(N)/2/Math.PI+.5,I=E(N)/Math.PI+.5;s.push(P,1-I)}_(),m()}function m(){for(let N=0;N<s.length;N+=6){const C=s[N+0],P=s[N+2],I=s[N+4],j=Math.max(C,P,I),O=Math.min(C,P,I);j>.9&&O<.1&&(C<.2&&(s[N+0]+=1),P<.2&&(s[N+2]+=1),I<.2&&(s[N+4]+=1))}}function v(N){a.push(N.x,N.y,N.z)}function x(N,C){const P=N*3;C.x=e[P+0],C.y=e[P+1],C.z=e[P+2]}function _(){const N=new se,C=new se,P=new se,I=new se,j=new We,O=new We,F=new We;for(let L=0,z=0;L<a.length;L+=9,z+=6){N.set(a[L+0],a[L+1],a[L+2]),C.set(a[L+3],a[L+4],a[L+5]),P.set(a[L+6],a[L+7],a[L+8]),j.set(s[z+0],s[z+1]),O.set(s[z+2],s[z+3]),F.set(s[z+4],s[z+5]),I.copy(N).add(C).add(P).divideScalar(3);const V=w(I);T(j,z+0,N,V),T(O,z+2,C,V),T(F,z+4,P,V)}}function T(N,C,P,I){I<0&&N.x===1&&(s[C]=N.x-1),P.x===0&&P.z===0&&(s[C]=I/2/Math.PI+.5)}function w(N){return Math.atan2(N.z,-N.x)}function E(N){return Math.atan2(-N.y,Math.sqrt(N.x*N.x+N.z*N.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rf(e.vertices,e.indices,e.radius,e.detail)}}class PA extends Rf{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,s,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new PA(e.radius,e.detail)}}const CS=new se,RS=new se,EI=new se,IS=new zs;class IW extends hn{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),a=Math.cos(ap*n),s=e.getIndex(),o=e.getAttribute("position"),c=s?s.count:o.count,u=[0,0,0],h=["a","b","c"],m=new Array(3),v={},x=[];for(let _=0;_<c;_+=3){s?(u[0]=s.getX(_),u[1]=s.getX(_+1),u[2]=s.getX(_+2)):(u[0]=_,u[1]=_+1,u[2]=_+2);const{a:T,b:w,c:E}=IS;if(T.fromBufferAttribute(o,u[0]),w.fromBufferAttribute(o,u[1]),E.fromBufferAttribute(o,u[2]),IS.getNormal(EI),m[0]=`${Math.round(T.x*i)},${Math.round(T.y*i)},${Math.round(T.z*i)}`,m[1]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,m[2]=`${Math.round(E.x*i)},${Math.round(E.y*i)},${Math.round(E.z*i)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let N=0;N<3;N++){const C=(N+1)%3,P=m[N],I=m[C],j=IS[h[N]],O=IS[h[C]],F=`${P}_${I}`,L=`${I}_${P}`;L in v&&v[L]?(EI.dot(v[L].normal)<=a&&(x.push(j.x,j.y,j.z),x.push(O.x,O.y,O.z)),v[L]=null):F in v||(v[F]={index0:u[N],index1:u[C],normal:EI.clone()})}}for(const _ in v)if(v[_]){const{index0:T,index1:w}=v[_];CS.fromBufferAttribute(o,T),RS.fromBufferAttribute(o,w),x.push(CS.x,CS.y,CS.z),x.push(RS.x,RS.y,RS.z)}this.setAttribute("position",new Ot(x,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Gl{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){yt("Curve: .getPoint() not implemented.")}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),a=0;n.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),a+=r.distanceTo(i),n.push(a),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n=null){const r=this.getLengths();let i=0;const a=r.length;let s;n?s=n:s=e*r[a-1];let o=0,c=a-1,u;for(;o<=c;)if(i=Math.floor(o+(c-o)/2),u=r[i]-s,u<0)o=i+1;else if(u>0)c=i-1;else{c=i;break}if(i=c,r[i]===s)return i/(a-1);const h=r[i],v=r[i+1]-h,x=(s-h)/v;return(i+x)/(a-1)}getTangent(e,n){let i=e-1e-4,a=e+1e-4;i<0&&(i=0),a>1&&(a=1);const s=this.getPoint(i),o=this.getPoint(a),c=n||(s.isVector2?new We:new se);return c.copy(o).sub(s).normalize(),c}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n=!1){const r=new se,i=[],a=[],s=[],o=new se,c=new an;for(let x=0;x<=e;x++){const _=x/e;i[x]=this.getTangentAt(_,new se)}a[0]=new se,s[0]=new se;let u=Number.MAX_VALUE;const h=Math.abs(i[0].x),m=Math.abs(i[0].y),v=Math.abs(i[0].z);h<=u&&(u=h,r.set(1,0,0)),m<=u&&(u=m,r.set(0,1,0)),v<=u&&r.set(0,0,1),o.crossVectors(i[0],r).normalize(),a[0].crossVectors(i[0],o),s[0].crossVectors(i[0],a[0]);for(let x=1;x<=e;x++){if(a[x]=a[x-1].clone(),s[x]=s[x-1].clone(),o.crossVectors(i[x-1],i[x]),o.length()>Number.EPSILON){o.normalize();const _=Math.acos(tn(i[x-1].dot(i[x]),-1,1));a[x].applyMatrix4(c.makeRotationAxis(o,_))}s[x].crossVectors(i[x],a[x])}if(n===!0){let x=Math.acos(tn(a[0].dot(a[e]),-1,1));x/=e,i[0].dot(o.crossVectors(a[0],a[e]))>0&&(x=-x);for(let _=1;_<=e;_++)a[_].applyMatrix4(c.makeRotationAxis(i[_],x*_)),s[_].crossVectors(i[_],a[_])}return{tangents:i,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class OA extends Gl{constructor(e=0,n=0,r=1,i=1,a=0,s=Math.PI*2,o=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=o,this.aRotation=c}getPoint(e,n=new We){const r=n,i=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=i;for(;a>i;)a-=i;a<Number.EPSILON&&(s?a=0:a=i),this.aClockwise===!0&&!s&&(a===i?a=-i:a=a-i);const o=this.aStartAngle+e*a;let c=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const h=Math.cos(this.aRotation),m=Math.sin(this.aRotation),v=c-this.aX,x=u-this.aY;c=v*h-x*m+this.aX,u=v*m+x*h+this.aY}return r.set(c,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class PW extends OA{constructor(e,n,r,i,a,s){super(e,n,r,r,i,a,s),this.isArcCurve=!0,this.type="ArcCurve"}}function fD(){let t=0,e=0,n=0,r=0;function i(a,s,o,c){t=a,e=o,n=-3*a+3*s-2*o-c,r=2*a-2*s+o+c}return{initCatmullRom:function(a,s,o,c,u){i(s,o,u*(o-a),u*(c-s))},initNonuniformCatmullRom:function(a,s,o,c,u,h,m){let v=(s-a)/u-(o-a)/(u+h)+(o-s)/h,x=(o-s)/h-(c-s)/(h+m)+(c-o)/m;v*=h,x*=h,i(s,o,v,x)},calc:function(a){const s=a*a,o=s*a;return t+e*a+n*s+r*o}}}const PS=new se,AI=new fD,kI=new fD,MI=new fD;class OW extends Gl{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new se){const r=n,i=this.points,a=i.length,s=(a-(this.closed?0:1))*e;let o=Math.floor(s),c=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:c===0&&o===a-1&&(o=a-2,c=1);let u,h;this.closed||o>0?u=i[(o-1)%a]:(PS.subVectors(i[0],i[1]).add(i[0]),u=PS);const m=i[o%a],v=i[(o+1)%a];if(this.closed||o+2<a?h=i[(o+2)%a]:(PS.subVectors(i[a-1],i[a-2]).add(i[a-1]),h=PS),this.curveType==="centripetal"||this.curveType==="chordal"){const x=this.curveType==="chordal"?.5:.25;let _=Math.pow(u.distanceToSquared(m),x),T=Math.pow(m.distanceToSquared(v),x),w=Math.pow(v.distanceToSquared(h),x);T<1e-4&&(T=1),_<1e-4&&(_=T),w<1e-4&&(w=T),AI.initNonuniformCatmullRom(u.x,m.x,v.x,h.x,_,T,w),kI.initNonuniformCatmullRom(u.y,m.y,v.y,h.y,_,T,w),MI.initNonuniformCatmullRom(u.z,m.z,v.z,h.z,_,T,w)}else this.curveType==="catmullrom"&&(AI.initCatmullRom(u.x,m.x,v.x,h.x,this.tension),kI.initCatmullRom(u.y,m.y,v.y,h.y,this.tension),MI.initCatmullRom(u.z,m.z,v.z,h.z,this.tension));return r.set(AI.calc(c),kI.calc(c),MI.calc(c)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new se().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function SV(t,e,n,r,i){const a=(r-e)*.5,s=(i-n)*.5,o=t*t,c=t*o;return(2*n-2*r+a+s)*c+(-3*n+3*r-2*a-s)*o+a*t+n}function qTe(t,e){const n=1-t;return n*n*e}function $Te(t,e){return 2*(1-t)*t*e}function WTe(t,e){return t*t*e}function ux(t,e,n,r){return qTe(t,e)+$Te(t,n)+WTe(t,r)}function KTe(t,e){const n=1-t;return n*n*n*e}function XTe(t,e){const n=1-t;return 3*n*n*t*e}function YTe(t,e){return 3*(1-t)*t*t*e}function JTe(t,e){return t*t*t*e}function dx(t,e,n,r,i){return KTe(t,e)+XTe(t,n)+YTe(t,r)+JTe(t,i)}class hD extends Gl{constructor(e=new We,n=new We,r=new We,i=new We){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new We){const r=n,i=this.v0,a=this.v1,s=this.v2,o=this.v3;return r.set(dx(e,i.x,a.x,s.x,o.x),dx(e,i.y,a.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class jW extends Gl{constructor(e=new se,n=new se,r=new se,i=new se){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new se){const r=n,i=this.v0,a=this.v1,s=this.v2,o=this.v3;return r.set(dx(e,i.x,a.x,s.x,o.x),dx(e,i.y,a.y,s.y,o.y),dx(e,i.z,a.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class pD extends Gl{constructor(e=new We,n=new We){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new We){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new We){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class DW extends Gl{constructor(e=new se,n=new se){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new se){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new se){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class mD extends Gl{constructor(e=new We,n=new We,r=new We){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new We){const r=n,i=this.v0,a=this.v1,s=this.v2;return r.set(ux(e,i.x,a.x,s.x),ux(e,i.y,a.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class gD extends Gl{constructor(e=new se,n=new se,r=new se){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new se){const r=n,i=this.v0,a=this.v1,s=this.v2;return r.set(ux(e,i.x,a.x,s.x),ux(e,i.y,a.y,s.y),ux(e,i.z,a.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class vD extends Gl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new We){const r=n,i=this.points,a=(i.length-1)*e,s=Math.floor(a),o=a-s,c=i[s===0?s:s-1],u=i[s],h=i[s>i.length-2?i.length-1:s+1],m=i[s>i.length-3?i.length-1:s+2];return r.set(SV(o,c.x,u.x,h.x,m.x),SV(o,c.y,u.y,h.y,m.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new We().fromArray(i))}return this}}var nE=Object.freeze({__proto__:null,ArcCurve:PW,CatmullRomCurve3:OW,CubicBezierCurve:hD,CubicBezierCurve3:jW,EllipseCurve:OA,LineCurve:pD,LineCurve3:DW,QuadraticBezierCurve:mD,QuadraticBezierCurve3:gD,SplineCurve:vD});class LW extends Gl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new nE[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let a=0;for(;a<i.length;){if(i[a]>=r){const s=i[a]-r,o=this.curves[a],c=o.getLength(),u=c===0?0:1-s/c;return o.getPointAt(u,n)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,a=this.curves;i<a.length;i++){const s=a[i],o=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,c=s.getPoints(o);for(let u=0;u<c.length;u++){const h=c[u];r&&r.equals(h)||(n.push(h),r=h)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new nE[i.type]().fromJSON(i))}return this}}class rE extends LW{constructor(e){super(),this.type="Path",this.currentPoint=new We,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new pD(this.currentPoint.clone(),new We(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const a=new mD(this.currentPoint.clone(),new We(e,n),new We(r,i));return this.curves.push(a),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,a,s){const o=new hD(this.currentPoint.clone(),new We(e,n),new We(r,i),new We(a,s));return this.curves.push(o),this.currentPoint.set(a,s),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new vD(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,a,s){const o=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+o,n+c,r,i,a,s),this}absarc(e,n,r,i,a,s){return this.absellipse(e,n,r,r,i,a,s),this}ellipse(e,n,r,i,a,s,o,c){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+u,n+h,r,i,a,s,o,c),this}absellipse(e,n,r,i,a,s,o,c){const u=new OA(e,n,r,i,a,s,o,c);if(this.curves.length>0){const m=u.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(u);const h=u.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class sp extends rE{constructor(e){super(e),this.uuid=ho(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new rE().fromJSON(i))}return this}}function ZTe(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let a=UW(t,0,i,n,!0);const s=[];if(!a||a.next===a.prev)return s;let o,c,u;if(r&&(a=rEe(t,e,a,n)),t.length>80*n){o=t[0],c=t[1];let h=o,m=c;for(let v=n;v<i;v+=n){const x=t[v],_=t[v+1];x<o&&(o=x),_<c&&(c=_),x>h&&(h=x),_>m&&(m=_)}u=Math.max(h-o,m-c),u=u!==0?32767/u:0}return yb(a,s,n,o,c,u,0),s}function UW(t,e,n,r,i){let a;if(i===pEe(t,e,n,r)>0)for(let s=e;s<n;s+=r)a=TV(s/r|0,t[s],t[s+1],a);else for(let s=n-r;s>=e;s-=r)a=TV(s/r|0,t[s],t[s+1],a);return a&&bv(a,a.next)&&(bb(a),a=a.next),a}function xp(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(bv(n,n.next)||ei(n.prev,n,n.next)===0)){if(bb(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function yb(t,e,n,r,i,a,s){if(!t)return;!s&&a&&lEe(t,r,i,a);let o=t;for(;t.prev!==t.next;){const c=t.prev,u=t.next;if(a?eEe(t,r,i,a):QTe(t)){e.push(c.i,t.i,u.i),bb(t),t=u.next,o=u.next;continue}if(t=u,t===o){s?s===1?(t=tEe(xp(t),e),yb(t,e,n,r,i,a,2)):s===2&&nEe(t,e,n,r,i,a):yb(xp(t),e,n,r,i,a,1);break}}}function QTe(t){const e=t.prev,n=t,r=t.next;if(ei(e,n,r)>=0)return!1;const i=e.x,a=n.x,s=r.x,o=e.y,c=n.y,u=r.y,h=Math.min(i,a,s),m=Math.min(o,c,u),v=Math.max(i,a,s),x=Math.max(o,c,u);let _=r.next;for(;_!==e;){if(_.x>=h&&_.x<=v&&_.y>=m&&_.y<=x&&qy(i,o,a,c,s,u,_.x,_.y)&&ei(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function eEe(t,e,n,r){const i=t.prev,a=t,s=t.next;if(ei(i,a,s)>=0)return!1;const o=i.x,c=a.x,u=s.x,h=i.y,m=a.y,v=s.y,x=Math.min(o,c,u),_=Math.min(h,m,v),T=Math.max(o,c,u),w=Math.max(h,m,v),E=rO(x,_,e,n,r),N=rO(T,w,e,n,r);let C=t.prevZ,P=t.nextZ;for(;C&&C.z>=E&&P&&P.z<=N;){if(C.x>=x&&C.x<=T&&C.y>=_&&C.y<=w&&C!==i&&C!==s&&qy(o,h,c,m,u,v,C.x,C.y)&&ei(C.prev,C,C.next)>=0||(C=C.prevZ,P.x>=x&&P.x<=T&&P.y>=_&&P.y<=w&&P!==i&&P!==s&&qy(o,h,c,m,u,v,P.x,P.y)&&ei(P.prev,P,P.next)>=0))return!1;P=P.nextZ}for(;C&&C.z>=E;){if(C.x>=x&&C.x<=T&&C.y>=_&&C.y<=w&&C!==i&&C!==s&&qy(o,h,c,m,u,v,C.x,C.y)&&ei(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;P&&P.z<=N;){if(P.x>=x&&P.x<=T&&P.y>=_&&P.y<=w&&P!==i&&P!==s&&qy(o,h,c,m,u,v,P.x,P.y)&&ei(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function tEe(t,e){let n=t;do{const r=n.prev,i=n.next.next;!bv(r,i)&&BW(r,n,n.next,i)&&xb(r,i)&&xb(i,r)&&(e.push(r.i,n.i,i.i),bb(n),bb(n.next),n=t=i),n=n.next}while(n!==t);return xp(n)}function nEe(t,e,n,r,i,a){let s=t;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&dEe(s,o)){let c=FW(s,o);s=xp(s,s.next),c=xp(c,c.next),yb(s,e,n,r,i,a,0),yb(c,e,n,r,i,a,0);return}o=o.next}s=s.next}while(s!==t)}function rEe(t,e,n,r){const i=[];for(let a=0,s=e.length;a<s;a++){const o=e[a]*r,c=a<s-1?e[a+1]*r:t.length,u=UW(t,o,c,r,!1);u===u.next&&(u.steiner=!0),i.push(uEe(u))}i.sort(iEe);for(let a=0;a<i.length;a++)n=aEe(i[a],n);return n}function iEe(t,e){let n=t.x-e.x;if(n===0&&(n=t.y-e.y,n===0)){const r=(t.next.y-t.y)/(t.next.x-t.x),i=(e.next.y-e.y)/(e.next.x-e.x);n=r-i}return n}function aEe(t,e){const n=sEe(t,e);if(!n)return e;const r=FW(n,t);return xp(r,r.next),xp(n,n.next)}function sEe(t,e){let n=e;const r=t.x,i=t.y;let a=-1/0,s;if(bv(t,n))return n;do{if(bv(t,n.next))return n.next;if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const m=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(m<=r&&m>a&&(a=m,s=n.x<n.next.x?n:n.next,m===r))return s}n=n.next}while(n!==e);if(!s)return null;const o=s,c=s.x,u=s.y;let h=1/0;n=s;do{if(r>=n.x&&n.x>=c&&r!==n.x&&zW(i<u?r:a,i,c,u,i<u?a:r,i,n.x,n.y)){const m=Math.abs(i-n.y)/(r-n.x);xb(n,t)&&(m<h||m===h&&(n.x>s.x||n.x===s.x&&oEe(s,n)))&&(s=n,h=m)}n=n.next}while(n!==o);return s}function oEe(t,e){return ei(t.prev,t,e.prev)<0&&ei(e.next,t,t.next)<0}function lEe(t,e,n,r){let i=t;do i.z===0&&(i.z=rO(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,cEe(i)}function cEe(t){let e,n=1;do{let r=t,i;t=null;let a=null;for(e=0;r;){e++;let s=r,o=0;for(let u=0;u<n&&(o++,s=s.nextZ,!!s);u++);let c=n;for(;o>0||c>0&&s;)o!==0&&(c===0||!s||r.z<=s.z)?(i=r,r=r.nextZ,o--):(i=s,s=s.nextZ,c--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;r=s}a.nextZ=null,n*=2}while(e>1);return t}function rO(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function uEe(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function zW(t,e,n,r,i,a,s,o){return(i-s)*(e-o)>=(t-s)*(a-o)&&(t-s)*(r-o)>=(n-s)*(e-o)&&(n-s)*(a-o)>=(i-s)*(r-o)}function qy(t,e,n,r,i,a,s,o){return!(t===s&&e===o)&&zW(t,e,n,r,i,a,s,o)}function dEe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!fEe(t,e)&&(xb(t,e)&&xb(e,t)&&hEe(t,e)&&(ei(t.prev,t,e.prev)||ei(t,e.prev,e))||bv(t,e)&&ei(t.prev,t,t.next)>0&&ei(e.prev,e,e.next)>0)}function ei(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function bv(t,e){return t.x===e.x&&t.y===e.y}function BW(t,e,n,r){const i=jS(ei(t,e,n)),a=jS(ei(t,e,r)),s=jS(ei(n,r,t)),o=jS(ei(n,r,e));return!!(i!==a&&s!==o||i===0&&OS(t,n,e)||a===0&&OS(t,r,e)||s===0&&OS(n,t,r)||o===0&&OS(n,e,r))}function OS(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function jS(t){return t>0?1:t<0?-1:0}function fEe(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&BW(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function xb(t,e){return ei(t.prev,t,t.next)<0?ei(t,e,t.next)>=0&&ei(t,t.prev,e)>=0:ei(t,e,t.prev)<0||ei(t,t.next,e)<0}function hEe(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,a=(t.y+e.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function FW(t,e){const n=iO(t.i,t.x,t.y),r=iO(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function TV(t,e,n,r){const i=iO(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function bb(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function iO(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function pEe(t,e,n,r){let i=0;for(let a=e,s=n-r;a<n;a+=r)i+=(t[s]-t[a])*(t[a+1]+t[s+1]),s=a;return i}class mEe{static triangulate(e,n,r=2){return ZTe(e,n,r)}}class Ll{static area(e){const n=e.length;let r=0;for(let i=n-1,a=0;a<n;i=a++)r+=e[i].x*e[a].y-e[a].x*e[i].y;return r*.5}static isClockWise(e){return Ll.area(e)<0}static triangulateShape(e,n){const r=[],i=[],a=[];EV(e),AV(r,e);let s=e.length;n.forEach(EV);for(let c=0;c<n.length;c++)i.push(s),s+=n[c].length,AV(r,n[c]);const o=mEe.triangulate(r,i);for(let c=0;c<o.length;c+=3)a.push(o.slice(c,c+3));return a}}function EV(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function AV(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class jA extends hn{constructor(e=new sp([new We(.5,.5),new We(-.5,.5),new We(-.5,-.5),new We(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],a=[];for(let o=0,c=e.length;o<c;o++){const u=e[o];s(u)}this.setAttribute("position",new Ot(i,3)),this.setAttribute("uv",new Ot(a,2)),this.computeVertexNormals();function s(o){const c=[],u=n.curveSegments!==void 0?n.curveSegments:12,h=n.steps!==void 0?n.steps:1,m=n.depth!==void 0?n.depth:1;let v=n.bevelEnabled!==void 0?n.bevelEnabled:!0,x=n.bevelThickness!==void 0?n.bevelThickness:.2,_=n.bevelSize!==void 0?n.bevelSize:x-.1,T=n.bevelOffset!==void 0?n.bevelOffset:0,w=n.bevelSegments!==void 0?n.bevelSegments:3;const E=n.extrudePath,N=n.UVGenerator!==void 0?n.UVGenerator:gEe;let C,P=!1,I,j,O,F;if(E){C=E.getSpacedPoints(h),P=!0,v=!1;const Me=E.isCatmullRomCurve3?E.closed:!1;I=E.computeFrenetFrames(h,Me),j=new se,O=new se,F=new se}v||(w=0,x=0,_=0,T=0);const L=o.extractPoints(u);let z=L.shape;const V=L.holes;if(!Ll.isClockWise(z)){z=z.reverse();for(let Me=0,Fe=V.length;Me<Fe;Me++){const Le=V[Me];Ll.isClockWise(Le)&&(V[Me]=Le.reverse())}}function $(Me){const Le=10000000000000001e-36;let Qe=Me[0];for(let ie=1;ie<=Me.length;ie++){const Nt=ie%Me.length,ft=Me[Nt],Ct=ft.x-Qe.x,et=ft.y-Qe.y,ne=Ct*Ct+et*et,q=Math.max(Math.abs(ft.x),Math.abs(ft.y),Math.abs(Qe.x),Math.abs(Qe.y)),he=Le*q*q;if(ne<=he){Me.splice(Nt,1),ie--;continue}Qe=ft}}$(z),V.forEach($);const ee=V.length,te=z;for(let Me=0;Me<ee;Me++){const Fe=V[Me];z=z.concat(Fe)}function K(Me,Fe,Le){return Fe||Bt("ExtrudeGeometry: vec does not exist"),Me.clone().addScaledVector(Fe,Le)}const X=z.length;function re(Me,Fe,Le){let Qe,ie,Nt;const ft=Me.x-Fe.x,Ct=Me.y-Fe.y,et=Le.x-Me.x,ne=Le.y-Me.y,q=ft*ft+Ct*Ct,he=ft*ne-Ct*et;if(Math.abs(he)>Number.EPSILON){const Oe=Math.sqrt(q),Ge=Math.sqrt(et*et+ne*ne),je=Fe.x-Ct/Oe,wt=Fe.y+ft/Oe,ot=Le.x-ne/Ge,Rt=Le.y+et/Ge,Vt=((ot-je)*ne-(Rt-wt)*et)/(ft*ne-Ct*et);Qe=je+ft*Vt-Me.x,ie=wt+Ct*Vt-Me.y;const Je=Qe*Qe+ie*ie;if(Je<=2)return new We(Qe,ie);Nt=Math.sqrt(Je/2)}else{let Oe=!1;ft>Number.EPSILON?et>Number.EPSILON&&(Oe=!0):ft<-Number.EPSILON?et<-Number.EPSILON&&(Oe=!0):Math.sign(Ct)===Math.sign(ne)&&(Oe=!0),Oe?(Qe=-Ct,ie=ft,Nt=Math.sqrt(q)):(Qe=ft,ie=Ct,Nt=Math.sqrt(q/2))}return new We(Qe/Nt,ie/Nt)}const ce=[];for(let Me=0,Fe=te.length,Le=Fe-1,Qe=Me+1;Me<Fe;Me++,Le++,Qe++)Le===Fe&&(Le=0),Qe===Fe&&(Qe=0),ce[Me]=re(te[Me],te[Le],te[Qe]);const de=[];let W,ae=ce.concat();for(let Me=0,Fe=ee;Me<Fe;Me++){const Le=V[Me];W=[];for(let Qe=0,ie=Le.length,Nt=ie-1,ft=Qe+1;Qe<ie;Qe++,Nt++,ft++)Nt===ie&&(Nt=0),ft===ie&&(ft=0),W[Qe]=re(Le[Qe],Le[Nt],Le[ft]);de.push(W),ae=ae.concat(W)}let me;if(w===0)me=Ll.triangulateShape(te,V);else{const Me=[],Fe=[];for(let Le=0;Le<w;Le++){const Qe=Le/w,ie=x*Math.cos(Qe*Math.PI/2),Nt=_*Math.sin(Qe*Math.PI/2)+T;for(let ft=0,Ct=te.length;ft<Ct;ft++){const et=K(te[ft],ce[ft],Nt);ke(et.x,et.y,-ie),Qe===0&&Me.push(et)}for(let ft=0,Ct=ee;ft<Ct;ft++){const et=V[ft];W=de[ft];const ne=[];for(let q=0,he=et.length;q<he;q++){const Oe=K(et[q],W[q],Nt);ke(Oe.x,Oe.y,-ie),Qe===0&&ne.push(Oe)}Qe===0&&Fe.push(ne)}}me=Ll.triangulateShape(Me,Fe)}const Ie=me.length,Xe=_+T;for(let Me=0;Me<X;Me++){const Fe=v?K(z[Me],ae[Me],Xe):z[Me];P?(O.copy(I.normals[0]).multiplyScalar(Fe.x),j.copy(I.binormals[0]).multiplyScalar(Fe.y),F.copy(C[0]).add(O).add(j),ke(F.x,F.y,F.z)):ke(Fe.x,Fe.y,0)}for(let Me=1;Me<=h;Me++)for(let Fe=0;Fe<X;Fe++){const Le=v?K(z[Fe],ae[Fe],Xe):z[Fe];P?(O.copy(I.normals[Me]).multiplyScalar(Le.x),j.copy(I.binormals[Me]).multiplyScalar(Le.y),F.copy(C[Me]).add(O).add(j),ke(F.x,F.y,F.z)):ke(Le.x,Le.y,m/h*Me)}for(let Me=w-1;Me>=0;Me--){const Fe=Me/w,Le=x*Math.cos(Fe*Math.PI/2),Qe=_*Math.sin(Fe*Math.PI/2)+T;for(let ie=0,Nt=te.length;ie<Nt;ie++){const ft=K(te[ie],ce[ie],Qe);ke(ft.x,ft.y,m+Le)}for(let ie=0,Nt=V.length;ie<Nt;ie++){const ft=V[ie];W=de[ie];for(let Ct=0,et=ft.length;Ct<et;Ct++){const ne=K(ft[Ct],W[Ct],Qe);P?ke(ne.x,ne.y+C[h-1].y,C[h-1].x+Le):ke(ne.x,ne.y,m+Le)}}}ve(),_e();function ve(){const Me=i.length/3;if(v){let Fe=0,Le=X*Fe;for(let Qe=0;Qe<Ie;Qe++){const ie=me[Qe];qe(ie[2]+Le,ie[1]+Le,ie[0]+Le)}Fe=h+w*2,Le=X*Fe;for(let Qe=0;Qe<Ie;Qe++){const ie=me[Qe];qe(ie[0]+Le,ie[1]+Le,ie[2]+Le)}}else{for(let Fe=0;Fe<Ie;Fe++){const Le=me[Fe];qe(Le[2],Le[1],Le[0])}for(let Fe=0;Fe<Ie;Fe++){const Le=me[Fe];qe(Le[0]+X*h,Le[1]+X*h,Le[2]+X*h)}}r.addGroup(Me,i.length/3-Me,0)}function _e(){const Me=i.length/3;let Fe=0;Ye(te,Fe),Fe+=te.length;for(let Le=0,Qe=V.length;Le<Qe;Le++){const ie=V[Le];Ye(ie,Fe),Fe+=ie.length}r.addGroup(Me,i.length/3-Me,1)}function Ye(Me,Fe){let Le=Me.length;for(;--Le>=0;){const Qe=Le;let ie=Le-1;ie<0&&(ie=Me.length-1);for(let Nt=0,ft=h+w*2;Nt<ft;Nt++){const Ct=X*Nt,et=X*(Nt+1),ne=Fe+Qe+Ct,q=Fe+ie+Ct,he=Fe+ie+et,Oe=Fe+Qe+et;pt(ne,q,he,Oe)}}}function ke(Me,Fe,Le){c.push(Me),c.push(Fe),c.push(Le)}function qe(Me,Fe,Le){Ue(Me),Ue(Fe),Ue(Le);const Qe=i.length/3,ie=N.generateTopUV(r,i,Qe-3,Qe-2,Qe-1);xt(ie[0]),xt(ie[1]),xt(ie[2])}function pt(Me,Fe,Le,Qe){Ue(Me),Ue(Fe),Ue(Qe),Ue(Fe),Ue(Le),Ue(Qe);const ie=i.length/3,Nt=N.generateSideWallUV(r,i,ie-6,ie-3,ie-2,ie-1);xt(Nt[0]),xt(Nt[1]),xt(Nt[3]),xt(Nt[1]),xt(Nt[2]),xt(Nt[3])}function Ue(Me){i.push(c[Me*3+0]),i.push(c[Me*3+1]),i.push(c[Me*3+2])}function xt(Me){a.push(Me.x),a.push(Me.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return vEe(n,r,e)}static fromJSON(e,n){const r=[];for(let a=0,s=e.shapes.length;a<s;a++){const o=n[e.shapes[a]];r.push(o)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new nE[i.type]().fromJSON(i)),new jA(r,e.options)}}const gEe={generateTopUV:function(t,e,n,r,i){const a=e[n*3],s=e[n*3+1],o=e[r*3],c=e[r*3+1],u=e[i*3],h=e[i*3+1];return[new We(a,s),new We(o,c),new We(u,h)]},generateSideWallUV:function(t,e,n,r,i,a){const s=e[n*3],o=e[n*3+1],c=e[n*3+2],u=e[r*3],h=e[r*3+1],m=e[r*3+2],v=e[i*3],x=e[i*3+1],_=e[i*3+2],T=e[a*3],w=e[a*3+1],E=e[a*3+2];return Math.abs(o-h)<Math.abs(s-u)?[new We(s,1-c),new We(u,1-m),new We(v,1-_),new We(T,1-E)]:[new We(o,1-c),new We(h,1-m),new We(x,1-_),new We(w,1-E)]}};function vEe(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const a=t[r];n.shapes.push(a.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class DA extends Rf{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,a,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new DA(e.radius,e.detail)}}class LA extends hn{constructor(e=[new We(0,-.5),new We(.5,0),new We(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=tn(i,0,Math.PI*2);const a=[],s=[],o=[],c=[],u=[],h=1/n,m=new se,v=new We,x=new se,_=new se,T=new se;let w=0,E=0;for(let N=0;N<=e.length-1;N++)switch(N){case 0:w=e[N+1].x-e[N].x,E=e[N+1].y-e[N].y,x.x=E*1,x.y=-w,x.z=E*0,T.copy(x),x.normalize(),c.push(x.x,x.y,x.z);break;case e.length-1:c.push(T.x,T.y,T.z);break;default:w=e[N+1].x-e[N].x,E=e[N+1].y-e[N].y,x.x=E*1,x.y=-w,x.z=E*0,_.copy(x),x.x+=T.x,x.y+=T.y,x.z+=T.z,x.normalize(),c.push(x.x,x.y,x.z),T.copy(_)}for(let N=0;N<=n;N++){const C=r+N*h*i,P=Math.sin(C),I=Math.cos(C);for(let j=0;j<=e.length-1;j++){m.x=e[j].x*P,m.y=e[j].y,m.z=e[j].x*I,s.push(m.x,m.y,m.z),v.x=N/n,v.y=j/(e.length-1),o.push(v.x,v.y);const O=c[3*j+0]*P,F=c[3*j+1],L=c[3*j+0]*I;u.push(O,F,L)}}for(let N=0;N<n;N++)for(let C=0;C<e.length-1;C++){const P=C+N*e.length,I=P,j=P+e.length,O=P+e.length+1,F=P+1;a.push(I,j,F),a.push(O,F,j)}this.setIndex(a),this.setAttribute("position",new Ot(s,3)),this.setAttribute("uv",new Ot(o,2)),this.setAttribute("normal",new Ot(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new LA(e.points,e.segments,e.phiStart,e.phiLength)}}class Fb extends Rf{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Fb(e.radius,e.detail)}}class Lv extends hn{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const a=e/2,s=n/2,o=Math.floor(r),c=Math.floor(i),u=o+1,h=c+1,m=e/o,v=n/c,x=[],_=[],T=[],w=[];for(let E=0;E<h;E++){const N=E*v-s;for(let C=0;C<u;C++){const P=C*m-a;_.push(P,-N,0),T.push(0,0,1),w.push(C/o),w.push(1-E/c)}}for(let E=0;E<c;E++)for(let N=0;N<o;N++){const C=N+u*E,P=N+u*(E+1),I=N+1+u*(E+1),j=N+1+u*E;x.push(C,P,j),x.push(P,I,j)}this.setIndex(x),this.setAttribute("position",new Ot(_,3)),this.setAttribute("normal",new Ot(T,3)),this.setAttribute("uv",new Ot(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lv(e.width,e.height,e.widthSegments,e.heightSegments)}}class UA extends hn{constructor(e=.5,n=1,r=32,i=1,a=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:a,thetaLength:s},r=Math.max(3,r),i=Math.max(1,i);const o=[],c=[],u=[],h=[];let m=e;const v=(n-e)/i,x=new se,_=new We;for(let T=0;T<=i;T++){for(let w=0;w<=r;w++){const E=a+w/r*s;x.x=m*Math.cos(E),x.y=m*Math.sin(E),c.push(x.x,x.y,x.z),u.push(0,0,1),_.x=(x.x/n+1)/2,_.y=(x.y/n+1)/2,h.push(_.x,_.y)}m+=v}for(let T=0;T<i;T++){const w=T*(r+1);for(let E=0;E<r;E++){const N=E+w,C=N,P=N+r+1,I=N+r+2,j=N+1;o.push(C,P,j),o.push(P,I,j)}}this.setIndex(o),this.setAttribute("position",new Ot(c,3)),this.setAttribute("normal",new Ot(u,3)),this.setAttribute("uv",new Ot(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new UA(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class zA extends hn{constructor(e=new sp([new We(0,.5),new We(-.5,-.5),new We(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],a=[],s=[];let o=0,c=0;if(Array.isArray(e)===!1)u(e);else for(let h=0;h<e.length;h++)u(e[h]),this.addGroup(o,c,h),o+=c,c=0;this.setIndex(r),this.setAttribute("position",new Ot(i,3)),this.setAttribute("normal",new Ot(a,3)),this.setAttribute("uv",new Ot(s,2));function u(h){const m=i.length/3,v=h.extractPoints(n);let x=v.shape;const _=v.holes;Ll.isClockWise(x)===!1&&(x=x.reverse());for(let w=0,E=_.length;w<E;w++){const N=_[w];Ll.isClockWise(N)===!0&&(_[w]=N.reverse())}const T=Ll.triangulateShape(x,_);for(let w=0,E=_.length;w<E;w++){const N=_[w];x=x.concat(N)}for(let w=0,E=x.length;w<E;w++){const N=x[w];i.push(N.x,N.y,0),a.push(0,0,1),s.push(N.x,N.y)}for(let w=0,E=T.length;w<E;w++){const N=T[w],C=N[0]+m,P=N[1]+m,I=N[2]+m;r.push(C,P,I),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return yEe(n,e)}static fromJSON(e,n){const r=[];for(let i=0,a=e.shapes.length;i<a;i++){const s=n[e.shapes[i]];r.push(s)}return new zA(r,e.curveSegments)}}function yEe(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class Vb extends hn{constructor(e=1,n=32,r=16,i=0,a=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:a,thetaStart:s,thetaLength:o},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const c=Math.min(s+o,Math.PI);let u=0;const h=[],m=new se,v=new se,x=[],_=[],T=[],w=[];for(let E=0;E<=r;E++){const N=[],C=E/r;let P=0;E===0&&s===0?P=.5/n:E===r&&c===Math.PI&&(P=-.5/n);for(let I=0;I<=n;I++){const j=I/n;m.x=-e*Math.cos(i+j*a)*Math.sin(s+C*o),m.y=e*Math.cos(s+C*o),m.z=e*Math.sin(i+j*a)*Math.sin(s+C*o),_.push(m.x,m.y,m.z),v.copy(m).normalize(),T.push(v.x,v.y,v.z),w.push(j+P,1-C),N.push(u++)}h.push(N)}for(let E=0;E<r;E++)for(let N=0;N<n;N++){const C=h[E][N+1],P=h[E][N],I=h[E+1][N],j=h[E+1][N+1];(E!==0||s>0)&&x.push(C,P,j),(E!==r-1||c<Math.PI)&&x.push(P,I,j)}this.setIndex(x),this.setAttribute("position",new Ot(_,3)),this.setAttribute("normal",new Ot(T,3)),this.setAttribute("uv",new Ot(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vb(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class BA extends Rf{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new BA(e.radius,e.detail)}}class FA extends hn{constructor(e=1,n=.4,r=12,i=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:a},r=Math.floor(r),i=Math.floor(i);const s=[],o=[],c=[],u=[],h=new se,m=new se,v=new se;for(let x=0;x<=r;x++)for(let _=0;_<=i;_++){const T=_/i*a,w=x/r*Math.PI*2;m.x=(e+n*Math.cos(w))*Math.cos(T),m.y=(e+n*Math.cos(w))*Math.sin(T),m.z=n*Math.sin(w),o.push(m.x,m.y,m.z),h.x=e*Math.cos(T),h.y=e*Math.sin(T),v.subVectors(m,h).normalize(),c.push(v.x,v.y,v.z),u.push(_/i),u.push(x/r)}for(let x=1;x<=r;x++)for(let _=1;_<=i;_++){const T=(i+1)*x+_-1,w=(i+1)*(x-1)+_-1,E=(i+1)*(x-1)+_,N=(i+1)*x+_;s.push(T,w,N),s.push(w,E,N)}this.setIndex(s),this.setAttribute("position",new Ot(o,3)),this.setAttribute("normal",new Ot(c,3)),this.setAttribute("uv",new Ot(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new FA(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class VA extends hn{constructor(e=1,n=.4,r=64,i=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:a,q:s},r=Math.floor(r),i=Math.floor(i);const o=[],c=[],u=[],h=[],m=new se,v=new se,x=new se,_=new se,T=new se,w=new se,E=new se;for(let C=0;C<=r;++C){const P=C/r*a*Math.PI*2;N(P,a,s,e,x),N(P+.01,a,s,e,_),w.subVectors(_,x),E.addVectors(_,x),T.crossVectors(w,E),E.crossVectors(T,w),T.normalize(),E.normalize();for(let I=0;I<=i;++I){const j=I/i*Math.PI*2,O=-n*Math.cos(j),F=n*Math.sin(j);m.x=x.x+(O*E.x+F*T.x),m.y=x.y+(O*E.y+F*T.y),m.z=x.z+(O*E.z+F*T.z),c.push(m.x,m.y,m.z),v.subVectors(m,x).normalize(),u.push(v.x,v.y,v.z),h.push(C/r),h.push(I/i)}}for(let C=1;C<=r;C++)for(let P=1;P<=i;P++){const I=(i+1)*(C-1)+(P-1),j=(i+1)*C+(P-1),O=(i+1)*C+P,F=(i+1)*(C-1)+P;o.push(I,j,F),o.push(j,O,F)}this.setIndex(o),this.setAttribute("position",new Ot(c,3)),this.setAttribute("normal",new Ot(u,3)),this.setAttribute("uv",new Ot(h,2));function N(C,P,I,j,O){const F=Math.cos(C),L=Math.sin(C),z=I/P*C,V=Math.cos(z);O.x=j*(2+V)*.5*F,O.y=j*(2+V)*L*.5,O.z=j*Math.sin(z)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new VA(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class HA extends hn{constructor(e=new gD(new se(-1,-1,0),new se(-1,1,0),new se(1,1,0)),n=64,r=1,i=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:a};const s=e.computeFrenetFrames(n,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new se,c=new se,u=new We;let h=new se;const m=[],v=[],x=[],_=[];T(),this.setIndex(_),this.setAttribute("position",new Ot(m,3)),this.setAttribute("normal",new Ot(v,3)),this.setAttribute("uv",new Ot(x,2));function T(){for(let C=0;C<n;C++)w(C);w(a===!1?n:0),N(),E()}function w(C){h=e.getPointAt(C/n,h);const P=s.normals[C],I=s.binormals[C];for(let j=0;j<=i;j++){const O=j/i*Math.PI*2,F=Math.sin(O),L=-Math.cos(O);c.x=L*P.x+F*I.x,c.y=L*P.y+F*I.y,c.z=L*P.z+F*I.z,c.normalize(),v.push(c.x,c.y,c.z),o.x=h.x+r*c.x,o.y=h.y+r*c.y,o.z=h.z+r*c.z,m.push(o.x,o.y,o.z)}}function E(){for(let C=1;C<=n;C++)for(let P=1;P<=i;P++){const I=(i+1)*(C-1)+(P-1),j=(i+1)*C+(P-1),O=(i+1)*C+P,F=(i+1)*(C-1)+P;_.push(I,j,F),_.push(j,O,F)}}function N(){for(let C=0;C<=n;C++)for(let P=0;P<=i;P++)u.x=C/n,u.y=P/i,x.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new HA(new nE[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class VW extends hn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new se,a=new se;if(e.index!==null){const s=e.attributes.position,o=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:o.count,materialIndex:0}]);for(let u=0,h=c.length;u<h;++u){const m=c[u],v=m.start,x=m.count;for(let _=v,T=v+x;_<T;_+=3)for(let w=0;w<3;w++){const E=o.getX(_+w),N=o.getX(_+(w+1)%3);i.fromBufferAttribute(s,E),a.fromBufferAttribute(s,N),kV(i,a,r)===!0&&(n.push(i.x,i.y,i.z),n.push(a.x,a.y,a.z))}}}else{const s=e.attributes.position;for(let o=0,c=s.count/3;o<c;o++)for(let u=0;u<3;u++){const h=3*o+u,m=3*o+(u+1)%3;i.fromBufferAttribute(s,h),a.fromBufferAttribute(s,m),kV(i,a,r)===!0&&(n.push(i.x,i.y,i.z),n.push(a.x,a.y,a.z))}}this.setAttribute("position",new Ot(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function kV(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var MV=Object.freeze({__proto__:null,BoxGeometry:kp,CapsuleGeometry:RA,CircleGeometry:IA,ConeGeometry:Bb,CylinderGeometry:zb,DodecahedronGeometry:PA,EdgesGeometry:IW,ExtrudeGeometry:jA,IcosahedronGeometry:DA,LatheGeometry:LA,OctahedronGeometry:Fb,PlaneGeometry:Lv,PolyhedronGeometry:Rf,RingGeometry:UA,ShapeGeometry:zA,SphereGeometry:Vb,TetrahedronGeometry:BA,TorusGeometry:FA,TorusKnotGeometry:VA,TubeGeometry:HA,WireframeGeometry:VW});class HW extends qa{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new kt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class yD extends Gs{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class xD extends qa{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new kt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nf,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new po,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class GW extends xD{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new We(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return tn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new kt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new kt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new kt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class qW extends qa{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new kt(16777215),this.specular=new kt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nf,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new po,this.combine=Db,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $W extends qa{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new kt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nf,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class WW extends qa{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nf,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class KW extends qa{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new kt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nf,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new po,this.combine=Db,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bD extends qa{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=sW,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class _D extends qa{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class XW extends qa{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new kt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nf,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class YW extends gs{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function ep(t,e){return!t||t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function JW(t){function e(i,a){return t[i]-t[a]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function aO(t,e,n){const r=t.length,i=new t.constructor(r);for(let a=0,s=0;s!==r;++a){const o=n[a]*e;for(let c=0;c!==e;++c)i[s++]=t[o+c]}return i}function wD(t,e,n,r){let i=1,a=t[0];for(;a!==void 0&&a[r]===void 0;)a=t[i++];if(a===void 0)return;let s=a[r];if(s!==void 0)if(Array.isArray(s))do s=a[r],s!==void 0&&(e.push(a.time),n.push(...s)),a=t[i++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[r],s!==void 0&&(e.push(a.time),s.toArray(n,n.length)),a=t[i++];while(a!==void 0);else do s=a[r],s!==void 0&&(e.push(a.time),n.push(s)),a=t[i++];while(a!==void 0)}function xEe(t,e,n,r,i=30){const a=t.clone();a.name=e;const s=[];for(let c=0;c<a.tracks.length;++c){const u=a.tracks[c],h=u.getValueSize(),m=[],v=[];for(let x=0;x<u.times.length;++x){const _=u.times[x]*i;if(!(_<n||_>=r)){m.push(u.times[x]);for(let T=0;T<h;++T)v.push(u.values[x*h+T])}}m.length!==0&&(u.times=ep(m,u.times.constructor),u.values=ep(v,u.values.constructor),s.push(u))}a.tracks=s;let o=1/0;for(let c=0;c<a.tracks.length;++c)o>a.tracks[c].times[0]&&(o=a.tracks[c].times[0]);for(let c=0;c<a.tracks.length;++c)a.tracks[c].shift(-1*o);return a.resetDuration(),a}function bEe(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,a=e/r;for(let s=0;s<i;++s){const o=n.tracks[s],c=o.ValueTypeName;if(c==="bool"||c==="string")continue;const u=t.tracks.find(function(E){return E.name===o.name&&E.ValueTypeName===c});if(u===void 0)continue;let h=0;const m=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=m/3);let v=0;const x=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=x/3);const _=o.times.length-1;let T;if(a<=o.times[0]){const E=h,N=m-h;T=o.values.slice(E,N)}else if(a>=o.times[_]){const E=_*m+h,N=E+m-h;T=o.values.slice(E,N)}else{const E=o.createInterpolant(),N=h,C=m-h;E.evaluate(a),T=E.resultBuffer.slice(N,C)}c==="quaternion"&&new Vs().fromArray(T).normalize().conjugate().toArray(T);const w=u.times.length;for(let E=0;E<w;++E){const N=E*x+v;if(c==="quaternion")Vs.multiplyQuaternionsFlat(u.values,N,T,0,u.values,N);else{const C=x-v*2;for(let P=0;P<C;++P)u.values[N+P]-=T[P]}}}return t.blendMode=nD,t}class _Ee{static convertArray(e,n){return ep(e,n)}static isTypedArray(e){return mW(e)}static getKeyframeOrder(e){return JW(e)}static sortedArray(e,n,r){return aO(e,n,r)}static flattenJSON(e,n,r,i){wD(e,n,r,i)}static subclip(e,n,r,i,a=30){return xEe(e,n,r,i,a)}static makeClipAdditive(e,n=0,r=e,i=30){return bEe(e,n,r,i)}}class Hb{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],a=n[r-1];e:{t:{let s;n:{r:if(!(e<i)){for(let o=r+2;;){if(i===void 0){if(e<a)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===o)break;if(a=i,i=n[++r],e<i)break t}s=n.length;break n}if(!(e>=a)){const o=n[1];e<o&&(r=2,a=o);for(let c=r-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===c)break;if(i=a,a=n[--r-1],e>=a)break t}s=r,r=0;break n}break e}for(;r<s;){const o=r+s>>>1;e<n[o]?s=o:r=o+1}if(i=n[r],a=n[r-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,a,i)}return this.interpolate_(r,a,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=e*i;for(let s=0;s!==i;++s)n[s]=r[a+s];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class ZW extends Hb{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Zh,endingEnd:Zh}}intervalChanged_(e,n,r){const i=this.parameterPositions;let a=e-2,s=e+1,o=i[a],c=i[s];if(o===void 0)switch(this.getSettings_().endingStart){case Qh:a=e,o=2*n-r;break;case hb:a=i.length-2,o=n+i[a]-i[a+1];break;default:a=e,o=r}if(c===void 0)switch(this.getSettings_().endingEnd){case Qh:s=e,c=2*r-n;break;case hb:s=1,c=r+i[1]-i[0];break;default:s=e-1,c=n}const u=(r-n)*.5,h=this.valueSize;this._weightPrev=u/(n-o),this._weightNext=u/(c-r),this._offsetPrev=a*h,this._offsetNext=s*h}interpolate_(e,n,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,c=e*o,u=c-o,h=this._offsetPrev,m=this._offsetNext,v=this._weightPrev,x=this._weightNext,_=(r-n)/(i-n),T=_*_,w=T*_,E=-v*w+2*v*T-v*_,N=(1+v)*w+(-1.5-2*v)*T+(-.5+v)*_+1,C=(-1-x)*w+(1.5+x)*T+.5*_,P=x*w-x*T;for(let I=0;I!==o;++I)a[I]=E*s[h+I]+N*s[u+I]+C*s[c+I]+P*s[m+I];return a}}class SD extends Hb{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,c=e*o,u=c-o,h=(r-n)/(i-n),m=1-h;for(let v=0;v!==o;++v)a[v]=s[u+v]*m+s[c+v]*h;return a}}class QW extends Hb{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class rl{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ep(n,this.TimeBufferType),this.values=ep(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:ep(e.times,Array),values:ep(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new QW(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new SD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new ZW(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case fb:n=this.InterpolantFactoryMethodDiscrete;break;case QT:n=this.InterpolantFactoryMethodLinear;break;case ZS:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return yt("KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return fb;case this.InterpolantFactoryMethodLinear:return QT;case this.InterpolantFactoryMethodSmooth:return ZS}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let a=0,s=i-1;for(;a!==i&&r[a]<e;)++a;for(;s!==-1&&r[s]>n;)--s;if(++s,a!==0||s!==i){a>=s&&(s=Math.max(s,1),a=s-1);const o=this.getValueSize();this.times=r.slice(a,s),this.values=this.values.slice(a*o,s*o)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(Bt("KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,a=r.length;a===0&&(Bt("KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==a;o++){const c=r[o];if(typeof c=="number"&&isNaN(c)){Bt("KeyframeTrack: Time is not a valid number.",this,o,c),e=!1;break}if(s!==null&&s>c){Bt("KeyframeTrack: Out of order keys.",this,o,c,s),e=!1;break}s=c}if(i!==void 0&&mW(i))for(let o=0,c=i.length;o!==c;++o){const u=i[o];if(isNaN(u)){Bt("KeyframeTrack: Value is not a valid number.",this,o,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===ZS,a=e.length-1;let s=1;for(let o=1;o<a;++o){let c=!1;const u=e[o],h=e[o+1];if(u!==h&&(o!==1||u!==e[0]))if(i)c=!0;else{const m=o*r,v=m-r,x=m+r;for(let _=0;_!==r;++_){const T=n[m+_];if(T!==n[v+_]||T!==n[x+_]){c=!0;break}}}if(c){if(o!==s){e[s]=e[o];const m=o*r,v=s*r;for(let x=0;x!==r;++x)n[v+x]=n[m+x]}++s}}if(a>0){e[s]=e[a];for(let o=a*r,c=s*r,u=0;u!==r;++u)n[c+u]=n[o+u];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=n.slice(0,s*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}rl.prototype.ValueTypeName="";rl.prototype.TimeBufferType=Float32Array;rl.prototype.ValueBufferType=Float32Array;rl.prototype.DefaultInterpolation=QT;class Mp extends rl{constructor(e,n,r){super(e,n,r)}}Mp.prototype.ValueTypeName="bool";Mp.prototype.ValueBufferType=Array;Mp.prototype.DefaultInterpolation=fb;Mp.prototype.InterpolantFactoryMethodLinear=void 0;Mp.prototype.InterpolantFactoryMethodSmooth=void 0;class TD extends rl{constructor(e,n,r,i){super(e,n,r,i)}}TD.prototype.ValueTypeName="color";class _b extends rl{constructor(e,n,r,i){super(e,n,r,i)}}_b.prototype.ValueTypeName="number";class eK extends Hb{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,c=(r-n)/(i-n);let u=e*o;for(let h=u+o;u!==h;u+=4)Vs.slerpFlat(a,0,s,u-o,s,u,c);return a}}class Gb extends rl{constructor(e,n,r,i){super(e,n,r,i)}InterpolantFactoryMethodLinear(e){return new eK(this.times,this.values,this.getValueSize(),e)}}Gb.prototype.ValueTypeName="quaternion";Gb.prototype.InterpolantFactoryMethodSmooth=void 0;class Np extends rl{constructor(e,n,r){super(e,n,r)}}Np.prototype.ValueTypeName="string";Np.prototype.ValueBufferType=Array;Np.prototype.DefaultInterpolation=fb;Np.prototype.InterpolantFactoryMethodLinear=void 0;Np.prototype.InterpolantFactoryMethodSmooth=void 0;class wb extends rl{constructor(e,n,r,i){super(e,n,r,i)}}wb.prototype.ValueTypeName="vector";class Sb{constructor(e="",n=-1,r=[],i=yA){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=ho(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,o=r.length;s!==o;++s)n.push(SEe(r[s]).scale(i));const a=new this(e.name,e.duration,n,e.blendMode);return a.uuid=e.uuid,a.userData=JSON.parse(e.userData||"{}"),a}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let a=0,s=r.length;a!==s;++a)n.push(rl.toJSON(r[a]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const a=n.length,s=[];for(let o=0;o<a;o++){let c=[],u=[];c.push((o+a-1)%a,o,(o+1)%a),u.push(0,1,0);const h=JW(c);c=aO(c,1,h),u=aO(u,1,h),!i&&c[0]===0&&(c.push(a),u.push(u[0])),s.push(new _b(".morphTargetInfluences["+n[o].name+"]",c,u).scale(1/r))}return new this(e,-1,s)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},a=/^([\w-]*?)([\d]+)$/;for(let o=0,c=e.length;o<c;o++){const u=e[o],h=u.name.match(a);if(h&&h.length>1){const m=h[1];let v=i[m];v||(i[m]=v=[]),v.push(u)}}const s=[];for(const o in i)s.push(this.CreateFromMorphTargetSequence(o,i[o],n,r));return s}static parseAnimation(e,n){if(yt("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return Bt("AnimationClip: No animation in JSONLoader data."),null;const r=function(m,v,x,_,T){if(x.length!==0){const w=[],E=[];wD(x,w,E,_),w.length!==0&&T.push(new m(v,w,E))}},i=[],a=e.name||"default",s=e.fps||30,o=e.blendMode;let c=e.length||-1;const u=e.hierarchy||[];for(let m=0;m<u.length;m++){const v=u[m].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const x={};let _;for(_=0;_<v.length;_++)if(v[_].morphTargets)for(let T=0;T<v[_].morphTargets.length;T++)x[v[_].morphTargets[T]]=-1;for(const T in x){const w=[],E=[];for(let N=0;N!==v[_].morphTargets.length;++N){const C=v[_];w.push(C.time),E.push(C.morphTarget===T?1:0)}i.push(new _b(".morphTargetInfluence["+T+"]",w,E))}c=x.length*s}else{const x=".bones["+n[m].name+"]";r(wb,x+".position",v,"pos",i),r(Gb,x+".quaternion",v,"rot",i),r(wb,x+".scale",v,"scl",i)}}return i.length===0?null:new this(a,c,i,o)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const a=this.tracks[r];n=Math.max(n,a.times[a.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let r=0;r<this.tracks.length;r++)e.push(this.tracks[r].clone());const n=new this.constructor(this.name,this.duration,e,this.blendMode);return n.userData=JSON.parse(JSON.stringify(this.userData)),n}toJSON(){return this.constructor.toJSON(this)}}function wEe(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return _b;case"vector":case"vector2":case"vector3":case"vector4":return wb;case"color":return TD;case"quaternion":return Gb;case"bool":case"boolean":return Mp;case"string":return Np}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function SEe(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=wEe(t.type);if(t.times===void 0){const n=[],r=[];wD(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Rc={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class ED{constructor(e,n,r){const i=this;let a=!1,s=0,o=0,c;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this._abortController=null,this.itemStart=function(h){o++,a===!1&&i.onStart!==void 0&&i.onStart(h,s,o),a=!0},this.itemEnd=function(h){s++,i.onProgress!==void 0&&i.onProgress(h,s,o),s===o&&(a=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return c?c(h):h},this.setURLModifier=function(h){return c=h,this},this.addHandler=function(h,m){return u.push(h,m),this},this.removeHandler=function(h){const m=u.indexOf(h);return m!==-1&&u.splice(m,2),this},this.getHandler=function(h){for(let m=0,v=u.length;m<v;m+=2){const x=u[m],_=u[m+1];if(x.global&&(x.lastIndex=0),x.test(h))return _}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const tK=new ED;class $s{constructor(e){this.manager=e!==void 0?e:tK,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,a){r.load(e,i,n,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}$s.DEFAULT_MATERIAL_NAME="__DEFAULT";const Cu={};class TEe extends Error{constructor(e,n){super(e),this.response=n}}class Ju extends $s{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=Rc.get(`file:${e}`);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(a),this.manager.itemEnd(e)},0),a;if(Cu[e]!==void 0){Cu[e].push({onLoad:n,onProgress:r,onError:i});return}Cu[e]=[],Cu[e].push({onLoad:n,onProgress:r,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),o=this.mimeType,c=this.responseType;fetch(s).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&yt("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const h=Cu[e],m=u.body.getReader(),v=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),x=v?parseInt(v):0,_=x!==0;let T=0;const w=new ReadableStream({start(E){N();function N(){m.read().then(({done:C,value:P})=>{if(C)E.close();else{T+=P.byteLength;const I=new ProgressEvent("progress",{lengthComputable:_,loaded:T,total:x});for(let j=0,O=h.length;j<O;j++){const F=h[j];F.onProgress&&F.onProgress(I)}E.enqueue(P),N()}},C=>{E.error(C)})}}});return new Response(w)}else throw new TEe(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(c){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(h=>new DOMParser().parseFromString(h,o));case"json":return u.json();default:if(o==="")return u.text();{const m=/charset="?([^;"\s]*)"?/i.exec(o),v=m&&m[1]?m[1].toLowerCase():void 0,x=new TextDecoder(v);return u.arrayBuffer().then(_=>x.decode(_))}}}).then(u=>{Rc.add(`file:${e}`,u);const h=Cu[e];delete Cu[e];for(let m=0,v=h.length;m<v;m++){const x=h[m];x.onLoad&&x.onLoad(u)}}).catch(u=>{const h=Cu[e];if(h===void 0)throw this.manager.itemError(e),u;delete Cu[e];for(let m=0,v=h.length;m<v;m++){const x=h[m];x.onError&&x.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class EEe extends $s{constructor(e){super(e)}load(e,n,r,i){const a=this,s=new Ju(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{n(a.parse(JSON.parse(o)))}catch(c){i?i(c):Bt(c),a.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=Sb.parse(e[r]);n.push(i)}return n}}class AEe extends $s{constructor(e){super(e)}load(e,n,r,i){const a=this,s=[],o=new CA,c=new Ju(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(a.withCredentials);let u=0;function h(m){c.load(e[m],function(v){const x=a.parse(v,!0);s[m]={width:x.width,height:x.height,format:x.format,mipmaps:x.mipmaps},u+=1,u===6&&(x.mipmapCount===1&&(o.minFilter=wr),o.image=s,o.format=x.format,o.needsUpdate=!0,n&&n(o))},r,i)}if(Array.isArray(e))for(let m=0,v=e.length;m<v;++m)h(m);else c.load(e,function(m){const v=a.parse(m,!0);if(v.isCubemap){const x=v.mipmaps.length/v.mipmapCount;for(let _=0;_<x;_++){s[_]={mipmaps:[]};for(let T=0;T<v.mipmapCount;T++)s[_].mipmaps.push(v.mipmaps[_*v.mipmapCount+T]),s[_].format=v.format,s[_].width=v.width,s[_].height=v.height}o.image=s}else o.image.width=v.width,o.image.height=v.height,o.mipmaps=v.mipmaps;v.mipmapCount===1&&(o.minFilter=wr),o.format=v.format,o.needsUpdate=!0,n&&n(o)},r,i);return o}}const cg=new WeakMap;class Tb extends $s{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Rc.get(`image:${e}`);if(s!==void 0){if(s.complete===!0)a.manager.itemStart(e),setTimeout(function(){n&&n(s),a.manager.itemEnd(e)},0);else{let m=cg.get(s);m===void 0&&(m=[],cg.set(s,m)),m.push({onLoad:n,onError:i})}return s}const o=gb("img");function c(){h(),n&&n(this);const m=cg.get(this)||[];for(let v=0;v<m.length;v++){const x=m[v];x.onLoad&&x.onLoad(this)}cg.delete(this),a.manager.itemEnd(e)}function u(m){h(),i&&i(m),Rc.remove(`image:${e}`);const v=cg.get(this)||[];for(let x=0;x<v.length;x++){const _=v[x];_.onError&&_.onError(m)}cg.delete(this),a.manager.itemError(e),a.manager.itemEnd(e)}function h(){o.removeEventListener("load",c,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",c,!1),o.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),Rc.add(`image:${e}`,o),a.manager.itemStart(e),o.src=e,o}}class kEe extends $s{constructor(e){super(e)}load(e,n,r,i){const a=new Ub;a.colorSpace=Ba;const s=new Tb(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function c(u){s.load(e[u],function(h){a.images[u]=h,o++,o===6&&(a.needsUpdate=!0,n&&n(a))},void 0,i)}for(let u=0;u<e.length;++u)c(u);return a}}class MEe extends $s{constructor(e){super(e)}load(e,n,r,i){const a=this,s=new Yo,o=new Ju(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(a.withCredentials),o.load(e,function(c){let u;try{u=a.parse(c)}catch(h){if(i!==void 0)i(h);else{h(h);return}}u.image!==void 0?s.image=u.image:u.data!==void 0&&(s.image.width=u.width,s.image.height=u.height,s.image.data=u.data),s.wrapS=u.wrapS!==void 0?u.wrapS:Fs,s.wrapT=u.wrapT!==void 0?u.wrapT:Fs,s.magFilter=u.magFilter!==void 0?u.magFilter:wr,s.minFilter=u.minFilter!==void 0?u.minFilter:wr,s.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(s.colorSpace=u.colorSpace),u.flipY!==void 0&&(s.flipY=u.flipY),u.format!==void 0&&(s.format=u.format),u.type!==void 0&&(s.type=u.type),u.mipmaps!==void 0&&(s.mipmaps=u.mipmaps,s.minFilter=Cc),u.mipmapCount===1&&(s.minFilter=wr),u.generateMipmaps!==void 0&&(s.generateMipmaps=u.generateMipmaps),s.needsUpdate=!0,n&&n(s,u)},r,i),s}}class NEe extends $s{constructor(e){super(e)}load(e,n,r,i){const a=new di,s=new Tb(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){a.image=o,a.needsUpdate=!0,n!==void 0&&n(a)},r,i),a}}class If extends Wn{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new kt(e),this.intensity=n}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,n}}class nK extends If{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Wn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new kt(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}toJSON(e){const n=super.toJSON(e);return n.object.groundColor=this.groundColor.getHex(),n}}const NI=new an,NV=new se,CV=new se;class AD{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new We(512,512),this.mapType=cs,this.map=null,this.mapPass=null,this.matrix=new an,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Dv,this._frameExtents=new We(1,1),this._viewportCount=1,this._viewports=[new br(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;NV.setFromMatrixPosition(e.matrixWorld),n.position.copy(NV),CV.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(CV),n.updateMatrixWorld(),NI.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(NI,n.coordinateSystem,n.reversedDepth),n.reversedDepth?r.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(NI)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class CEe extends AD{constructor(){super(new na(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const n=this.camera,r=gv*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||n.far;(r!==n.fov||i!==n.aspect||a!==n.far)&&(n.fov=r,n.aspect=i,n.far=a,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class rK extends If{constructor(e,n,r=0,i=Math.PI/3,a=0,s=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Wn.DEFAULT_UP),this.updateMatrix(),this.target=new Wn,this.distance=r,this.angle=i,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new CEe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const n=super.toJSON(e);return n.object.distance=this.distance,n.object.angle=this.angle,n.object.decay=this.decay,n.object.penumbra=this.penumbra,n.object.target=this.target.uuid,this.map&&this.map.isTexture&&(n.object.map=this.map.toJSON(e).uuid),n.object.shadow=this.shadow.toJSON(),n}}class REe extends AD{constructor(){super(new na(90,1,.5,500)),this.isPointLightShadow=!0}}class iK extends If{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new REe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const n=super.toJSON(e);return n.object.distance=this.distance,n.object.decay=this.decay,n.object.shadow=this.shadow.toJSON(),n}}class Cp extends SA{constructor(e=-1,n=1,r=1,i=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=r-e,s=r+e,o=i+n,c=i-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=u*this.view.offsetX,s=a+u*this.view.width,o-=h*this.view.offsetY,c=o-h*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,c,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class IEe extends AD{constructor(){super(new Cp(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class aK extends If{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Wn.DEFAULT_UP),this.updateMatrix(),this.target=new Wn,this.shadow=new IEe}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const n=super.toJSON(e);return n.object.shadow=this.shadow.toJSON(),n.object.target=this.target.uuid,n}}class sK extends If{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class oK extends If{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class kD{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new se)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,a=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.282095),n.addScaledVector(s[1],.488603*i),n.addScaledVector(s[2],.488603*a),n.addScaledVector(s[3],.488603*r),n.addScaledVector(s[4],1.092548*(r*i)),n.addScaledVector(s[5],1.092548*(i*a)),n.addScaledVector(s[6],.315392*(3*a*a-1)),n.addScaledVector(s[7],1.092548*(r*a)),n.addScaledVector(s[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,a=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.886227),n.addScaledVector(s[1],2*.511664*i),n.addScaledVector(s[2],2*.511664*a),n.addScaledVector(s[3],2*.511664*r),n.addScaledVector(s[4],2*.429043*r*i),n.addScaledVector(s[5],2*.429043*i*a),n.addScaledVector(s[6],.743125*a*a-.247708),n.addScaledVector(s[7],2*.429043*r*a),n.addScaledVector(s[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,a=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*a,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*a,n[6]=.315392*(3*a*a-1),n[7]=1.092548*r*a,n[8]=.546274*(r*r-i*i)}}class lK extends If{constructor(e=new kD,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class GA extends $s{constructor(e){super(e),this.textures={}}load(e,n,r,i){const a=this,s=new Ju(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{n(a.parse(JSON.parse(o)))}catch(c){i?i(c):Bt(c),a.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(a){return n[a]===void 0&&yt("MaterialLoader: Undefined texture",a),n[a]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new kt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(i.allowOverride=e.allowOverride),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const s=e.uniforms[a];switch(i.uniforms[a]={},s.type){case"t":i.uniforms[a].value=r(s.value);break;case"c":i.uniforms[a].value=new kt().setHex(s.value);break;case"v2":i.uniforms[a].value=new We().fromArray(s.value);break;case"v3":i.uniforms[a].value=new se().fromArray(s.value);break;case"v4":i.uniforms[a].value=new br().fromArray(s.value);break;case"m3":i.uniforms[a].value=new gn().fromArray(s.value);break;case"m4":i.uniforms[a].value=new an().fromArray(s.value);break;default:i.uniforms[a].value=s.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)i.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),i.normalScale=new We().fromArray(a)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new We().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return GA.createMaterialFromType(e)}static createMaterialFromType(e){const n={ShadowMaterial:HW,SpriteMaterial:lD,RawShaderMaterial:yD,ShaderMaterial:Gs,PointsMaterial:uD,MeshPhysicalMaterial:GW,MeshStandardMaterial:xD,MeshPhongMaterial:qW,MeshToonMaterial:$W,MeshNormalMaterial:WW,MeshLambertMaterial:KW,MeshDepthMaterial:bD,MeshDistanceMaterial:_D,MeshBasicMaterial:Cf,MeshMatcapMaterial:XW,LineDashedMaterial:YW,LineBasicMaterial:gs,Material:qa};return new n[e]}}class sO{static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class cK extends hn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class uK extends $s{constructor(e){super(e)}load(e,n,r,i){const a=this,s=new Ju(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{n(a.parse(JSON.parse(o)))}catch(c){i?i(c):Bt(c),a.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(x,_){if(n[_]!==void 0)return n[_];const w=x.interleavedBuffers[_],E=a(x,w.buffer),N=Rg(w.type,E),C=new kA(N,w.stride);return C.uuid=w.uuid,n[_]=C,C}function a(x,_){if(r[_]!==void 0)return r[_];const w=x.arrayBuffers[_],E=new Uint32Array(w).buffer;return r[_]=E,E}const s=e.isInstancedBufferGeometry?new cK:new hn,o=e.data.index;if(o!==void 0){const x=Rg(o.type,o.array);s.setIndex(new gr(x,1))}const c=e.data.attributes;for(const x in c){const _=c[x];let T;if(_.isInterleavedBufferAttribute){const w=i(e.data,_.data);T=new vp(w,_.itemSize,_.offset,_.normalized)}else{const w=Rg(_.type,_.array),E=_.isInstancedBufferAttribute?xv:gr;T=new E(w,_.itemSize,_.normalized)}_.name!==void 0&&(T.name=_.name),_.usage!==void 0&&T.setUsage(_.usage),s.setAttribute(x,T)}const u=e.data.morphAttributes;if(u)for(const x in u){const _=u[x],T=[];for(let w=0,E=_.length;w<E;w++){const N=_[w];let C;if(N.isInterleavedBufferAttribute){const P=i(e.data,N.data);C=new vp(P,N.itemSize,N.offset,N.normalized)}else{const P=Rg(N.type,N.array);C=new gr(P,N.itemSize,N.normalized)}N.name!==void 0&&(C.name=N.name),T.push(C)}s.morphAttributes[x]=T}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let x=0,_=m.length;x!==_;++x){const T=m[x];s.addGroup(T.start,T.count,T.materialIndex)}const v=e.data.boundingSphere;return v!==void 0&&(s.boundingSphere=new Sa().fromJSON(v)),e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class PEe extends $s{constructor(e){super(e)}load(e,n,r,i){const a=this,s=this.path===""?sO.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new Ju(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){let u=null;try{u=JSON.parse(c)}catch(m){i!==void 0&&i(m),m("ObjectLoader: Can't parse "+e+".",m.message);return}const h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),Bt("ObjectLoader: Can't load "+e);return}a.parse(u,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?sO.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const a=new Ju(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const s=await a.loadAsync(e,n),o=JSON.parse(s),c=o.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(o)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,i),s=this.parseImages(e.images,function(){n!==void 0&&n(u)}),o=this.parseTextures(e.textures,s),c=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,a,c,o,r),h=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,h),this.bindLightTargets(u),n!==void 0){let m=!1;for(const v in s)if(s[v].data instanceof HTMLImageElement){m=!0;break}m===!1&&n(u)}return u}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),c=this.parseObject(e.object,i,o,s,n),u=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,u),this.bindLightTargets(c),c}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const a=new sp().fromJSON(e[r]);n[a.uuid]=a}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(a){a.isBone&&(i[a.uuid]=a)}),e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=new MA().fromJSON(e[a],i);r[o.uuid]=o}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new uK;for(let a=0,s=e.length;a<s;a++){let o;const c=e[a];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(c);break;default:c.type in MV?o=MV[c.type].fromJSON(c,n):yt(`ObjectLoader: Unsupported geometry type "${c.type}"`)}o.uuid=c.uuid,c.name!==void 0&&(o.name=c.name),c.userData!==void 0&&(o.userData=c.userData),r[c.uuid]=o}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const a=new GA;a.setTextures(n);for(let s=0,o=e.length;s<o;s++){const c=e[s];r[c.uuid]===void 0&&(r[c.uuid]=a.parse(c)),i[c.uuid]=r[c.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],a=Sb.parse(i);n[a.uuid]=a}return n}parseImages(e,n){const r=this,i={};let a;function s(c){return r.manager.itemStart(c),a.load(c,function(){r.manager.itemEnd(c)},void 0,function(){r.manager.itemError(c),r.manager.itemEnd(c)})}function o(c){if(typeof c=="string"){const u=c,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return s(h)}else return c.data?{data:Rg(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new ED(n);a=new Tb(c),a.setCrossOrigin(this.crossOrigin);for(let u=0,h=e.length;u<h;u++){const m=e[u],v=m.url;if(Array.isArray(v)){const x=[];for(let _=0,T=v.length;_<T;_++){const w=v[_],E=o(w);E!==null&&(E instanceof HTMLImageElement?x.push(E):x.push(new Yo(E.data,E.width,E.height)))}i[m.uuid]=new gf(x)}else{const x=o(m.url);i[m.uuid]=new gf(x)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function a(s){if(typeof s=="string"){const o=s,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:n.resourcePath+o;return await i.loadAsync(c)}else return s.data?{data:Rg(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){i=new Tb(this.manager),i.setCrossOrigin(this.crossOrigin);for(let s=0,o=e.length;s<o;s++){const c=e[s],u=c.url;if(Array.isArray(u)){const h=[];for(let m=0,v=u.length;m<v;m++){const x=u[m],_=await a(x);_!==null&&(_ instanceof HTMLImageElement?h.push(_):h.push(new Yo(_.data,_.width,_.height)))}r[c.uuid]=new gf(h)}else{const h=await a(c.url);r[c.uuid]=new gf(h)}}}return r}parseTextures(e,n){function r(a,s){return typeof a=="number"?a:(yt("ObjectLoader.parseTexture: Constant should be in numeric form.",a),s[a])}const i={};if(e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=e[a];o.image===void 0&&yt('ObjectLoader: No "image" specified for',o.uuid),n[o.image]===void 0&&yt("ObjectLoader: Undefined image",o.image);const c=n[o.image],u=c.data;let h;Array.isArray(u)?(h=new Ub,u.length===6&&(h.needsUpdate=!0)):(u&&u.data?h=new Yo:h=new di,u&&(h.needsUpdate=!0)),h.source=c,h.uuid=o.uuid,o.name!==void 0&&(h.name=o.name),o.mapping!==void 0&&(h.mapping=r(o.mapping,OEe)),o.channel!==void 0&&(h.channel=o.channel),o.offset!==void 0&&h.offset.fromArray(o.offset),o.repeat!==void 0&&h.repeat.fromArray(o.repeat),o.center!==void 0&&h.center.fromArray(o.center),o.rotation!==void 0&&(h.rotation=o.rotation),o.wrap!==void 0&&(h.wrapS=r(o.wrap[0],RV),h.wrapT=r(o.wrap[1],RV)),o.format!==void 0&&(h.format=o.format),o.internalFormat!==void 0&&(h.internalFormat=o.internalFormat),o.type!==void 0&&(h.type=o.type),o.colorSpace!==void 0&&(h.colorSpace=o.colorSpace),o.minFilter!==void 0&&(h.minFilter=r(o.minFilter,IV)),o.magFilter!==void 0&&(h.magFilter=r(o.magFilter,IV)),o.anisotropy!==void 0&&(h.anisotropy=o.anisotropy),o.flipY!==void 0&&(h.flipY=o.flipY),o.generateMipmaps!==void 0&&(h.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(h.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(h.compareFunction=o.compareFunction),o.userData!==void 0&&(h.userData=o.userData),i[o.uuid]=h}return i}parseObject(e,n,r,i,a){let s;function o(v){return n[v]===void 0&&yt("ObjectLoader: Undefined geometry",v),n[v]}function c(v){if(v!==void 0){if(Array.isArray(v)){const x=[];for(let _=0,T=v.length;_<T;_++){const w=v[_];r[w]===void 0&&yt("ObjectLoader: Undefined material",w),x.push(r[w])}return x}return r[v]===void 0&&yt("ObjectLoader: Undefined material",v),r[v]}}function u(v){return i[v]===void 0&&yt("ObjectLoader: Undefined texture",v),i[v]}let h,m;switch(e.type){case"Scene":s=new AA,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new kt(e.background):s.background=u(e.background)),e.environment!==void 0&&(s.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new EA(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new TA(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new na(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Cp(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new sK(e.color,e.intensity);break;case"DirectionalLight":s=new aK(e.color,e.intensity),s.target=e.target||"";break;case"PointLight":s=new iK(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new oK(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new rK(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),s.target=e.target||"";break;case"HemisphereLight":s=new nK(e.color,e.groundColor,e.intensity);break;case"LightProbe":const v=new kD().fromArray(e.sh);s=new lK(v,e.intensity);break;case"SkinnedMesh":h=o(e.geometry),m=c(e.material),s=new EW(h,m),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":h=o(e.geometry),m=c(e.material),s=new Ii(h,m);break;case"InstancedMesh":h=o(e.geometry),m=c(e.material);const x=e.count,_=e.instanceMatrix,T=e.instanceColor;s=new AW(h,m,x),s.instanceMatrix=new xv(new Float32Array(_.array),16),T!==void 0&&(s.instanceColor=new xv(new Float32Array(T.array),T.itemSize));break;case"BatchedMesh":h=o(e.geometry),m=c(e.material),s=new kW(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,m),s.geometry=h,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._geometryInfo=e.geometryInfo.map(w=>{let E=null,N=null;return w.boundingBox!==void 0&&(E=new Ga().fromJSON(w.boundingBox)),w.boundingSphere!==void 0&&(N=new Sa().fromJSON(w.boundingSphere)),{...w,boundingBox:E,boundingSphere:N}}),s._instanceInfo=e.instanceInfo,s._availableInstanceIds=e._availableInstanceIds,s._availableGeometryIds=e._availableGeometryIds,s._nextIndexStart=e.nextIndexStart,s._nextVertexStart=e.nextVertexStart,s._geometryCount=e.geometryCount,s._maxInstanceCount=e.maxInstanceCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._matricesTexture=u(e.matricesTexture.uuid),s._indirectTexture=u(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(s._colorsTexture=u(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(s.boundingSphere=new Sa().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(s.boundingBox=new Ga().fromJSON(e.boundingBox));break;case"LOD":s=new TW;break;case"Line":s=new Sf(o(e.geometry),c(e.material));break;case"LineLoop":s=new MW(o(e.geometry),c(e.material));break;case"LineSegments":s=new Gc(o(e.geometry),c(e.material));break;case"PointCloud":case"Points":s=new NW(o(e.geometry),c(e.material));break;case"Sprite":s=new SW(c(e.material));break;case"Group":s=new Ig;break;case"Bone":s=new cD;break;default:s=new Wn}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(s.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let x=0;x<v.length;x++)s.add(this.parseObject(v[x],n,r,i,a))}if(e.animations!==void 0){const v=e.animations;for(let x=0;x<v.length;x++){const _=v[x];s.animations.push(a[_])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const v=e.levels;for(let x=0;x<v.length;x++){const _=v[x],T=s.getObjectByProperty("uuid",_.object);T!==void 0&&s.addLevel(T,_.distance,_.hysteresis)}}return s}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?yt("ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(n){if(n.isDirectionalLight||n.isSpotLight){const r=n.target,i=e.getObjectByProperty("uuid",r);i!==void 0?n.target=i:n.target=new Wn}})}}const OEe={UVMapping:dA,CubeReflectionMapping:Lc,CubeRefractionMapping:bf,EquirectangularReflectionMapping:lb,EquirectangularRefractionMapping:cb,CubeUVReflectionMapping:Ov},RV={RepeatWrapping:ub,ClampToEdgeWrapping:Fs,MirroredRepeatWrapping:db},IV={NearestFilter:ti,NearestMipmapNearestFilter:Xj,NearestMipmapLinearFilter:Cg,LinearFilter:wr,LinearMipmapNearestFilter:ix,LinearMipmapLinearFilter:Cc},CI=new WeakMap;class jEe extends $s{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&yt("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&yt("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Rc.get(`image-bitmap:${e}`);if(s!==void 0){if(a.manager.itemStart(e),s.then){s.then(u=>{if(CI.has(s)===!0)i&&i(CI.get(s)),a.manager.itemError(e),a.manager.itemEnd(e);else return n&&n(u),a.manager.itemEnd(e),u});return}return setTimeout(function(){n&&n(s),a.manager.itemEnd(e)},0),s}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,o.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const c=fetch(e,o).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(u){return Rc.add(`image-bitmap:${e}`,u),n&&n(u),a.manager.itemEnd(e),u}).catch(function(u){i&&i(u),CI.set(c,u),Rc.remove(`image-bitmap:${e}`),a.manager.itemError(e),a.manager.itemEnd(e)});Rc.add(`image-bitmap:${e}`,c),a.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let DS;class MD{static getContext(){return DS===void 0&&(DS=new(window.AudioContext||window.webkitAudioContext)),DS}static setContext(e){DS=e}}class DEe extends $s{constructor(e){super(e)}load(e,n,r,i){const a=this,s=new Ju(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(c){try{const u=c.slice(0);MD.getContext().decodeAudioData(u,function(m){n(m)}).catch(o)}catch(u){o(u)}},r,i);function o(c){i?i(c):Bt(c),a.manager.itemError(e)}}}const PV=new an,OV=new an,Nh=new an;class LEe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new na,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new na,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Nh.copy(e.projectionMatrix);const i=n.eyeSep/2,a=i*n.near/n.focus,s=n.near*Math.tan(ap*n.fov*.5)/n.zoom;let o,c;OV.elements[12]=-i,PV.elements[12]=i,o=-s*n.aspect+a,c=s*n.aspect+a,Nh.elements[0]=2*n.near/(c-o),Nh.elements[8]=(c+o)/(c-o),this.cameraL.projectionMatrix.copy(Nh),o=-s*n.aspect-a,c=s*n.aspect-a,Nh.elements[0]=2*n.near/(c-o),Nh.elements[8]=(c+o)/(c-o),this.cameraR.projectionMatrix.copy(Nh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(OV),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(PV)}}class dK extends na{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class ND{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=performance.now();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}const Ch=new se,RI=new Vs,UEe=new se,Rh=new se,Ih=new se;class zEe extends Wn{constructor(){super(),this.type="AudioListener",this.context=MD.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new ND}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ch,RI,UEe),Rh.set(0,0,-1).applyQuaternion(RI),Ih.set(0,1,0).applyQuaternion(RI),n.positionX){const r=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Ch.x,r),n.positionY.linearRampToValueAtTime(Ch.y,r),n.positionZ.linearRampToValueAtTime(Ch.z,r),n.forwardX.linearRampToValueAtTime(Rh.x,r),n.forwardY.linearRampToValueAtTime(Rh.y,r),n.forwardZ.linearRampToValueAtTime(Rh.z,r),n.upX.linearRampToValueAtTime(Ih.x,r),n.upY.linearRampToValueAtTime(Ih.y,r),n.upZ.linearRampToValueAtTime(Ih.z,r)}else n.setPosition(Ch.x,Ch.y,Ch.z),n.setOrientation(Rh.x,Rh.y,Rh.z,Ih.x,Ih.y,Ih.z)}}let fK=class extends Wn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){yt("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){yt("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){yt("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){yt("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){yt("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(yt("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){yt("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,n){return super.copy(e,n),e.sourceType!=="buffer"?(yt("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}};const Ph=new se,jV=new Vs,BEe=new se,Oh=new se;class FEe extends fK{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ph,jV,BEe),Oh.set(0,0,1).applyQuaternion(jV);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Ph.x,r),n.positionY.linearRampToValueAtTime(Ph.y,r),n.positionZ.linearRampToValueAtTime(Ph.z,r),n.orientationX.linearRampToValueAtTime(Oh.x,r),n.orientationY.linearRampToValueAtTime(Oh.y,r),n.orientationZ.linearRampToValueAtTime(Oh.z,r)}else n.setPosition(Ph.x,Ph.y,Ph.z),n.setOrientation(Oh.x,Oh.y,Oh.z)}}class VEe{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class hK{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,a,s;switch(n){case"quaternion":i=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,a=e*i+i;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==i;++o)r[a+o]=r[o];s=n}else{s+=n;const o=n/s;this._mixBufferRegion(r,a,0,o,i)}this.cumulativeWeight=s}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const c=n*this._origIndex;this._mixBufferRegion(r,i,c,1-a,n)}s>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let c=n,u=n+n;c!==u;++c)if(r[c]!==r[c+n]){o.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let a=r,s=i;a!==s;++a)n[a]=n[i+a%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,a){if(i>=.5)for(let s=0;s!==a;++s)e[n+s]=e[r+s]}_slerp(e,n,r,i){Vs.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,a){const s=this._workIndex*a;Vs.multiplyQuaternionsFlat(e,s,e,n,e,r),Vs.slerpFlat(e,n,e,n,e,s,i)}_lerp(e,n,r,i,a){const s=1-i;for(let o=0;o!==a;++o){const c=n+o;e[c]=e[c]*s+e[r+o]*i}}_lerpAdditive(e,n,r,i,a){for(let s=0;s!==a;++s){const o=n+s;e[o]=e[o]+e[r+s]*i}}}const CD="\\[\\]\\.:\\/",HEe=new RegExp("["+CD+"]","g"),RD="[^"+CD+"]",GEe="[^"+CD.replace("\\.","")+"]",qEe=/((?:WC+[\/:])*)/.source.replace("WC",RD),$Ee=/(WCOD+)?/.source.replace("WCOD",GEe),WEe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",RD),KEe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",RD),XEe=new RegExp("^"+qEe+$Ee+WEe+KEe+"$"),YEe=["material","materials","bones","map"];class JEe{constructor(e,n,r){const i=r||$n.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=r.length;i!==a;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class $n{constructor(e,n,r){this.path=n,this.parsedPath=r||$n.parseTrackName(n),this.node=$n.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new $n.Composite(e,n,r):new $n(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(HEe,"")}static parseTrackName(e){const n=XEe.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const a=r.nodeName.substring(i+1);YEe.indexOf(a)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=a)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(a){for(let s=0;s<a.length;s++){const o=a[s];if(o.name===n||o.uuid===n)return o;const c=r(o.children);if(c)return c}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let a=n.propertyIndex;if(e||(e=$n.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){yt("PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=n.objectIndex;switch(r){case"materials":if(!e.material){Bt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){Bt("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){Bt("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){Bt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){Bt("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){Bt("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){Bt("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const s=e[i];if(s===void 0){const u=n.nodeName;Bt("PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(a!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){Bt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){Bt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}$n.Composite=JEe;$n.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};$n.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};$n.prototype.GetterByBindingType=[$n.prototype._getValue_direct,$n.prototype._getValue_array,$n.prototype._getValue_arrayElement,$n.prototype._getValue_toArray];$n.prototype.SetterByBindingTypeAndVersioning=[[$n.prototype._setValue_direct,$n.prototype._setValue_direct_setNeedsUpdate,$n.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$n.prototype._setValue_array,$n.prototype._setValue_array_setNeedsUpdate,$n.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$n.prototype._setValue_arrayElement,$n.prototype._setValue_arrayElement_setNeedsUpdate,$n.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$n.prototype._setValue_fromArray,$n.prototype._setValue_fromArray_setNeedsUpdate,$n.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class ZEe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ho(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,a=this._bindings,s=a.length;let o,c=e.length,u=this.nCachedObjects_;for(let h=0,m=arguments.length;h!==m;++h){const v=arguments[h],x=v.uuid;let _=n[x];if(_===void 0){_=c++,n[x]=_,e.push(v);for(let T=0,w=s;T!==w;++T)a[T].push(new $n(v,r[T],i[T]))}else if(_<u){o=e[_];const T=--u,w=e[T];n[w.uuid]=_,e[_]=w,n[x]=T,e[T]=v;for(let E=0,N=s;E!==N;++E){const C=a[E],P=C[T];let I=C[_];C[_]=P,I===void 0&&(I=new $n(v,r[E],i[E])),C[T]=I}}else e[_]!==o&&Bt("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let a=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const c=arguments[s],u=c.uuid,h=n[u];if(h!==void 0&&h>=a){const m=a++,v=e[m];n[v.uuid]=h,e[h]=v,n[u]=m,e[m]=c;for(let x=0,_=i;x!==_;++x){const T=r[x],w=T[m],E=T[h];T[h]=w,T[m]=E}}}this.nCachedObjects_=a}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let a=this.nCachedObjects_,s=e.length;for(let o=0,c=arguments.length;o!==c;++o){const u=arguments[o],h=u.uuid,m=n[h];if(m!==void 0)if(delete n[h],m<a){const v=--a,x=e[v],_=--s,T=e[_];n[x.uuid]=m,e[m]=x,n[T.uuid]=v,e[v]=T,e.pop();for(let w=0,E=i;w!==E;++w){const N=r[w],C=N[v],P=N[_];N[m]=C,N[v]=P,N.pop()}}else{const v=--s,x=e[v];v>0&&(n[x.uuid]=m),e[m]=x,e.pop();for(let _=0,T=i;_!==T;++_){const w=r[_];w[m]=w[v],w.pop()}}}this.nCachedObjects_=a}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const a=this._bindings;if(i!==void 0)return a[i];const s=this._paths,o=this._parsedPaths,c=this._objects,u=c.length,h=this.nCachedObjects_,m=new Array(u);i=a.length,r[e]=i,s.push(e),o.push(n),a.push(m);for(let v=h,x=c.length;v!==x;++v){const _=c[v];m[v]=new $n(_,e,n)}return m}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length-1,c=s[o],u=e[o];n[u]=r,s[r]=c,s.pop(),a[r]=a[o],a.pop(),i[r]=i[o],i.pop()}}}class pK{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const a=n.tracks,s=a.length,o=new Array(s),c={endingStart:Zh,endingEnd:Zh};for(let u=0;u!==s;++u){const h=a[u].createInterpolant(null);o[u]=h,h.settings=c}this._interpolantSettings=c,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=iW,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r=!1){if(e.fadeOut(n),this.fadeIn(n),r===!0){const i=this._clip.duration,a=e._clip.duration,s=a/i,o=i/a;e.warp(1,s,n),this.warp(o,1,n)}return this}crossFadeTo(e,n,r=!1){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,a=i.time,s=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const c=o.parameterPositions,u=o.sampleValues;return c[0]=a,c[1]=a+r,u[0]=e/s,u[1]=n/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const c=(e-a)*r;c<0||r===0?n=0:(this._startTime=null,n=r*c)}n*=this._updateTimeScale(e);const s=this._updateTime(n),o=this._updateWeight(e);if(o>0){const c=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case nD:for(let h=0,m=c.length;h!==m;++h)c[h].evaluate(s),u[h].accumulateAdditive(o);break;case yA:default:for(let h=0,m=c.length;h!==m;++h)c[h].evaluate(s),u[h].accumulate(i,o)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,a=this._loopCount;const s=r===aW;if(e===0)return a===-1?i:s&&(a&1)===1?n-i:i;if(r===rW){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=n||i<0){const o=Math.floor(i/n);i-=n*o,a+=Math.abs(o);const c=this.repetitions-a;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const u=e<0;this._setEndings(u,!u,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(s&&(a&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=Qh,i.endingEnd=Qh):(e?i.endingStart=this.zeroSlopeAtStart?Qh:Zh:i.endingStart=hb,n?i.endingEnd=this.zeroSlopeAtEnd?Qh:Zh:i.endingEnd=hb)}_scheduleFading(e,n,r){const i=this._mixer,a=i.time;let s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,c=s.sampleValues;return o[0]=a,c[0]=n,o[1]=a+e,c[1]=r,this}}const QEe=new Float32Array(1);class eAe extends Hc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,a=i.length,s=e._propertyBindings,o=e._interpolants,c=r.uuid,u=this._bindingsByRootAndName;let h=u[c];h===void 0&&(h={},u[c]=h);for(let m=0;m!==a;++m){const v=i[m],x=v.name;let _=h[x];if(_!==void 0)++_.referenceCount,s[m]=_;else{if(_=s[m],_!==void 0){_._cacheIndex===null&&(++_.referenceCount,this._addInactiveBinding(_,c,x));continue}const T=n&&n._propertyBindings[m].binding.parsedPath;_=new hK($n.create(r,x,T),v.ValueTypeName,v.getValueSize()),++_.referenceCount,this._addInactiveBinding(_,c,x),s[m]=_}o[m].resultBuffer=_.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,a=this._actionsByClip[i];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const a=n[r];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const a=n[r];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,a=this._actionsByClip;let s=a[n];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[n]=s;else{const o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,o=s[a],c=o.knownActions,u=c[c.length-1],h=e._byClipCacheIndex;u._byClipCacheIndex=h,c[h]=u,c.pop(),e._byClipCacheIndex=null;const m=o.actionByRoot,v=(e._localRoot||this._root).uuid;delete m[v],c.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const a=n[r];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,a=n[i];e._cacheIndex=i,n[i]=e,a._cacheIndex=r,n[r]=a}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,a=n[i];e._cacheIndex=i,n[i]=e,a._cacheIndex=r,n[r]=a}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,a=this._bindings;let s=i[n];s===void 0&&(s={},i[n]=s),s[r]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,a=r.path,s=this._bindingsByRootAndName,o=s[i],c=n[n.length-1],u=e._cacheIndex;c._cacheIndex=u,n[u]=c,n.pop(),delete o[a],Object.keys(o).length===0&&delete s[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,a=n[i];e._cacheIndex=i,n[i]=e,a._cacheIndex=r,n[r]=a}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,a=n[i];e._cacheIndex=i,n[i]=e,a._cacheIndex=r,n[r]=a}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new SD(new Float32Array(2),new Float32Array(2),1,QEe),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,a=n[i];e.__cacheIndex=i,n[i]=e,a.__cacheIndex=r,n[r]=a}clipAction(e,n,r){const i=n||this._root,a=i.uuid;let s=typeof e=="string"?Sb.findByName(i,e):e;const o=s!==null?s.uuid:e,c=this._actionsByClip[o];let u=null;if(r===void 0&&(s!==null?r=s.blendMode:r=yA),c!==void 0){const m=c.actionByRoot[a];if(m!==void 0&&m.blendMode===r)return m;u=c.knownActions[0],s===null&&(s=u._clip)}if(s===null)return null;const h=new pK(this,s,n,r);return this._bindAction(h,u),this._addInactiveAction(h,o,a),h}existingAction(e,n){const r=n||this._root,i=r.uuid,a=typeof e=="string"?Sb.findByName(r,e):e,s=a?a.uuid:e,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let u=0;u!==r;++u)n[u]._update(i,e,a,s);const o=this._bindings,c=this._nActiveBindings;for(let u=0;u!==c;++u)o[u].apply(s);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,a=i[r];if(a!==void 0){const s=a.knownActions;for(let o=0,c=s.length;o!==c;++o){const u=s[o];this._deactivateAction(u);const h=u._cacheIndex,m=n[n.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,m._cacheIndex=h,n[h]=m,n.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const s in r){const o=r[s].actionByRoot,c=o[n];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const i=this._bindingsByRootAndName,a=i[n];if(a!==void 0)for(const s in a){const o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class tAe extends iD{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isRenderTarget3D=!0,this.depth=r,this.texture=new wA(null,e,n,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class ID{constructor(e){this.value=e}clone(){return new ID(this.value.clone===void 0?this.value:this.value.clone())}}let nAe=0;class rAe extends Hc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:nAe++}),this.name="",this.usage=mb,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++){const a=Array.isArray(n[r])?n[r]:[n[r]];for(let s=0;s<a.length;s++)this.uniforms.push(a[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class iAe extends kA{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class aAe{constructor(e,n,r,i,a,s=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=a,this.normalized=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const DV=new an;class PD{constructor(e,n,r=0,i=1/0){this.ray=new jv(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new vv,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):Bt("Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return DV.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(DV),this}intersectObject(e,n=!0,r=[]){return oO(e,this,r,n),r.sort(LV),r}intersectObjects(e,n=!0,r=[]){for(let i=0,a=e.length;i<a;i++)oO(e[i],this,r,n);return r.sort(LV),r}}function LV(t,e){return t.distance-e.distance}function oO(t,e,n,r){let i=!0;if(t.layers.test(e.layers)&&t.raycast(e,n)===!1&&(i=!1),i===!0&&r===!0){const a=t.children;for(let s=0,o=a.length;s<o;s++)oO(a[s],e,n,!0)}}class sAe{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=oAe.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function oAe(){this._document.hidden===!1&&this.reset()}class lAe{constructor(e=1,n=0,r=0){this.radius=e,this.phi=n,this.theta=r}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=tn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(tn(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class cAe{constructor(e=1,n=0,r=0){this.radius=e,this.theta=n,this.y=r}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}class OD{constructor(e,n,r,i){OD.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,n,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,n=0){for(let r=0;r<4;r++)this.elements[r]=e[r+n];return this}set(e,n,r,i){const a=this.elements;return a[0]=e,a[2]=n,a[1]=r,a[3]=i,this}}const UV=new We;class uAe{constructor(e=new We(1/0,1/0),n=new We(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=UV.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,UV).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const zV=new se,LS=new se,ug=new se,dg=new se,II=new se,dAe=new se,fAe=new se;class hAe{constructor(e=new se,n=new se){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){zV.subVectors(e,this.start),LS.subVectors(this.end,this.start);const r=LS.dot(LS);let a=LS.dot(zV)/r;return n&&(a=tn(a,0,1)),a}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}distanceSqToLine3(e,n=dAe,r=fAe){const i=10000000000000001e-32;let a,s;const o=this.start,c=e.start,u=this.end,h=e.end;ug.subVectors(u,o),dg.subVectors(h,c),II.subVectors(o,c);const m=ug.dot(ug),v=dg.dot(dg),x=dg.dot(II);if(m<=i&&v<=i)return n.copy(o),r.copy(c),n.sub(r),n.dot(n);if(m<=i)a=0,s=x/v,s=tn(s,0,1);else{const _=ug.dot(II);if(v<=i)s=0,a=tn(-_/m,0,1);else{const T=ug.dot(dg),w=m*v-T*T;w!==0?a=tn((T*x-_*v)/w,0,1):a=0,s=(T*a+x)/v,s<0?(s=0,a=tn(-_/m,0,1)):s>1&&(s=1,a=tn((T-_)/m,0,1))}}return n.copy(o).add(ug.multiplyScalar(a)),r.copy(c).add(dg.multiplyScalar(s)),n.sub(r),n.dot(n)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const BV=new se;class pAe extends Wn{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new hn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,c=32;s<c;s++,o++){const u=s/c*Math.PI*2,h=o/c*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(h),Math.sin(h),1)}r.setAttribute("position",new Ot(i,3));const a=new gs({fog:!1,toneMapped:!1});this.cone=new Gc(r,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),BV.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(BV),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const tf=new se,US=new an,PI=new an;class mAe extends Gc{constructor(e){const n=mK(e),r=new hn,i=[],a=[];for(let u=0;u<n.length;u++){const h=n[u];h.parent&&h.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),a.push(0,0,0),a.push(0,0,0))}r.setAttribute("position",new Ot(i,3)),r.setAttribute("color",new Ot(a,3));const s=new gs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,s),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const o=new kt(255),c=new kt(65280);this.setColors(o,c)}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");PI.copy(this.root.matrixWorld).invert();for(let a=0,s=0;a<n.length;a++){const o=n[a];o.parent&&o.parent.isBone&&(US.multiplyMatrices(PI,o.matrixWorld),tf.setFromMatrixPosition(US),i.setXYZ(s,tf.x,tf.y,tf.z),US.multiplyMatrices(PI,o.parent.matrixWorld),tf.setFromMatrixPosition(US),i.setXYZ(s+1,tf.x,tf.y,tf.z),s+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,n){const i=this.geometry.getAttribute("color");for(let a=0;a<i.count;a+=2)i.setXYZ(a,e.r,e.g,e.b),i.setXYZ(a+1,n.r,n.g,n.b);return i.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function mK(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push(...mK(t.children[n]));return e}class gAe extends Ii{constructor(e,n,r){const i=new Vb(n,4,2),a=new Cf({wireframe:!0,fog:!1,toneMapped:!1});super(i,a),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const vAe=new se,FV=new kt,VV=new kt;class yAe extends Wn{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Fb(n);i.rotateY(Math.PI*.5),this.material=new Cf({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=i.getAttribute("position"),s=new Float32Array(a.count*3);i.setAttribute("color",new gr(s,3)),this.add(new Ii(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");FV.copy(this.light.color),VV.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const a=r<i/2?FV:VV;n.setXYZ(r,a.r,a.g,a.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(vAe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class xAe extends Gc{constructor(e=10,n=10,r=4473924,i=8947848){r=new kt(r),i=new kt(i);const a=n/2,s=e/n,o=e/2,c=[],u=[];for(let v=0,x=0,_=-o;v<=n;v++,_+=s){c.push(-o,0,_,o,0,_),c.push(_,0,-o,_,0,o);const T=v===a?r:i;T.toArray(u,x),x+=3,T.toArray(u,x),x+=3,T.toArray(u,x),x+=3,T.toArray(u,x),x+=3}const h=new hn;h.setAttribute("position",new Ot(c,3)),h.setAttribute("color",new Ot(u,3));const m=new gs({vertexColors:!0,toneMapped:!1});super(h,m),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class bAe extends Gc{constructor(e=10,n=16,r=8,i=64,a=4473924,s=8947848){a=new kt(a),s=new kt(s);const o=[],c=[];if(n>1)for(let m=0;m<n;m++){const v=m/n*(Math.PI*2),x=Math.sin(v)*e,_=Math.cos(v)*e;o.push(0,0,0),o.push(x,0,_);const T=m&1?a:s;c.push(T.r,T.g,T.b),c.push(T.r,T.g,T.b)}for(let m=0;m<r;m++){const v=m&1?a:s,x=e-e/r*m;for(let _=0;_<i;_++){let T=_/i*(Math.PI*2),w=Math.sin(T)*x,E=Math.cos(T)*x;o.push(w,0,E),c.push(v.r,v.g,v.b),T=(_+1)/i*(Math.PI*2),w=Math.sin(T)*x,E=Math.cos(T)*x,o.push(w,0,E),c.push(v.r,v.g,v.b)}}const u=new hn;u.setAttribute("position",new Ot(o,3)),u.setAttribute("color",new Ot(c,3));const h=new gs({vertexColors:!0,toneMapped:!1});super(u,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const HV=new se,zS=new se,GV=new se;class _Ae extends Wn{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new hn;i.setAttribute("position",new Ot([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const a=new gs({fog:!1,toneMapped:!1});this.lightPlane=new Sf(i,a),this.add(this.lightPlane),i=new hn,i.setAttribute("position",new Ot([0,0,0,0,0,1],3)),this.targetLine=new Sf(i,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),HV.setFromMatrixPosition(this.light.matrixWorld),zS.setFromMatrixPosition(this.light.target.matrixWorld),GV.subVectors(zS,HV),this.lightPlane.lookAt(zS),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(zS),this.targetLine.scale.z=GV.length()}}const BS=new se,li=new SA;class wAe extends Gc{constructor(e){const n=new hn,r=new gs({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],a=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(_,T){c(_),c(T)}function c(_){i.push(0,0,0),a.push(0,0,0),s[_]===void 0&&(s[_]=[]),s[_].push(i.length/3-1)}n.setAttribute("position",new Ot(i,3)),n.setAttribute("color",new Ot(a,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const u=new kt(16755200),h=new kt(16711680),m=new kt(43775),v=new kt(16777215),x=new kt(3355443);this.setColors(u,h,m,v,x)}setColors(e,n,r,i,a){const o=this.geometry.getAttribute("color");return o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,n.r,n.g,n.b),o.setXYZ(25,n.r,n.g,n.b),o.setXYZ(26,n.r,n.g,n.b),o.setXYZ(27,n.r,n.g,n.b),o.setXYZ(28,n.r,n.g,n.b),o.setXYZ(29,n.r,n.g,n.b),o.setXYZ(30,n.r,n.g,n.b),o.setXYZ(31,n.r,n.g,n.b),o.setXYZ(32,r.r,r.g,r.b),o.setXYZ(33,r.r,r.g,r.b),o.setXYZ(34,r.r,r.g,r.b),o.setXYZ(35,r.r,r.g,r.b),o.setXYZ(36,r.r,r.g,r.b),o.setXYZ(37,r.r,r.g,r.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,a.r,a.g,a.b),o.setXYZ(41,a.r,a.g,a.b),o.setXYZ(42,a.r,a.g,a.b),o.setXYZ(43,a.r,a.g,a.b),o.setXYZ(44,a.r,a.g,a.b),o.setXYZ(45,a.r,a.g,a.b),o.setXYZ(46,a.r,a.g,a.b),o.setXYZ(47,a.r,a.g,a.b),o.setXYZ(48,a.r,a.g,a.b),o.setXYZ(49,a.r,a.g,a.b),o.needsUpdate=!0,this}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;let a,s;if(li.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)a=1,s=0;else if(this.camera.coordinateSystem===co)a=-1,s=1;else if(this.camera.coordinateSystem===pv)a=0,s=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);xi("c",n,e,li,0,0,a),xi("t",n,e,li,0,0,s),xi("n1",n,e,li,-r,-i,a),xi("n2",n,e,li,r,-i,a),xi("n3",n,e,li,-r,i,a),xi("n4",n,e,li,r,i,a),xi("f1",n,e,li,-r,-i,s),xi("f2",n,e,li,r,-i,s),xi("f3",n,e,li,-r,i,s),xi("f4",n,e,li,r,i,s),xi("u1",n,e,li,r*.7,i*1.1,a),xi("u2",n,e,li,-r*.7,i*1.1,a),xi("u3",n,e,li,0,i*2,a),xi("cf1",n,e,li,-r,0,s),xi("cf2",n,e,li,r,0,s),xi("cf3",n,e,li,0,-i,s),xi("cf4",n,e,li,0,i,s),xi("cn1",n,e,li,-r,0,a),xi("cn2",n,e,li,r,0,a),xi("cn3",n,e,li,0,-i,a),xi("cn4",n,e,li,0,i,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function xi(t,e,n,r,i,a,s){BS.set(i,a,s).unproject(r);const o=e[t];if(o!==void 0){const c=n.getAttribute("position");for(let u=0,h=o.length;u<h;u++)c.setXYZ(o[u],BS.x,BS.y,BS.z)}}const FS=new Ga;class SAe extends Gc{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),a=new hn;a.setIndex(new gr(r,1)),a.setAttribute("position",new gr(i,3)),super(a,new gs({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&FS.setFromObject(this.object),FS.isEmpty())return;const e=FS.min,n=FS.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=e.x,i[4]=n.y,i[5]=n.z,i[6]=e.x,i[7]=e.y,i[8]=n.z,i[9]=n.x,i[10]=e.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=e.z,i[15]=e.x,i[16]=n.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=n.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class TAe extends Gc{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new hn;a.setIndex(new gr(r,1)),a.setAttribute("position",new Ot(i,3)),super(a,new gs({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class EAe extends Sf{constructor(e,n=1,r=16776960){const i=r,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new hn;s.setAttribute("position",new Ot(a,3)),s.computeBoundingSphere(),super(s,new gs({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new hn;c.setAttribute("position",new Ot(o,3)),c.computeBoundingSphere(),this.add(new Ii(c,new Cf({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const qV=new se;let VS,OI;class AAe extends Wn{constructor(e=new se(0,0,1),n=new se(0,0,0),r=1,i=16776960,a=r*.2,s=a*.2){super(),this.type="ArrowHelper",VS===void 0&&(VS=new hn,VS.setAttribute("position",new Ot([0,0,0,0,1,0],3)),OI=new Bb(.5,1,5,1),OI.translate(0,-.5,0)),this.position.copy(n),this.line=new Sf(VS,new gs({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ii(OI,new Cf({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,a,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{qV.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(qV,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class kAe extends Gc{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new hn;i.setAttribute("position",new Ot(n,3)),i.setAttribute("color",new Ot(r,3));const a=new gs({vertexColors:!0,toneMapped:!1});super(i,a),this.type="AxesHelper"}setColors(e,n,r){const i=new kt,a=this.geometry.attributes.color.array;return i.set(e),i.toArray(a,0),i.toArray(a,3),i.set(n),i.toArray(a,6),i.toArray(a,9),i.set(r),i.toArray(a,12),i.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class MAe{constructor(){this.type="ShapePath",this.color=new kt,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new rE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,a,s){return this.currentPath.bezierCurveTo(e,n,r,i,a,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(E){const N=[];for(let C=0,P=E.length;C<P;C++){const I=E[C],j=new sp;j.curves=I.curves,N.push(j)}return N}function r(E,N){const C=N.length;let P=!1;for(let I=C-1,j=0;j<C;I=j++){let O=N[I],F=N[j],L=F.x-O.x,z=F.y-O.y;if(Math.abs(z)>Number.EPSILON){if(z<0&&(O=N[j],L=-L,F=N[I],z=-z),E.y<O.y||E.y>F.y)continue;if(E.y===O.y){if(E.x===O.x)return!0}else{const V=z*(E.x-O.x)-L*(E.y-O.y);if(V===0)return!0;if(V<0)continue;P=!P}}else{if(E.y!==O.y)continue;if(F.x<=E.x&&E.x<=O.x||O.x<=E.x&&E.x<=F.x)return!0}}return P}const i=Ll.isClockWise,a=this.subPaths;if(a.length===0)return[];let s,o,c;const u=[];if(a.length===1)return o=a[0],c=new sp,c.curves=o.curves,u.push(c),u;let h=!i(a[0].getPoints());h=e?!h:h;const m=[],v=[];let x=[],_=0,T;v[_]=void 0,x[_]=[];for(let E=0,N=a.length;E<N;E++)o=a[E],T=o.getPoints(),s=i(T),s=e?!s:s,s?(!h&&v[_]&&_++,v[_]={s:new sp,p:T},v[_].s.curves=o.curves,h&&_++,x[_]=[]):x[_].push({h:o,p:T[0]});if(!v[0])return n(a);if(v.length>1){let E=!1,N=0;for(let C=0,P=v.length;C<P;C++)m[C]=[];for(let C=0,P=v.length;C<P;C++){const I=x[C];for(let j=0;j<I.length;j++){const O=I[j];let F=!0;for(let L=0;L<v.length;L++)r(O.p,v[L].p)&&(C!==L&&N++,F?(F=!1,m[L].push(O)):E=!0);F&&m[C].push(O)}}N>0&&E===!1&&(x=m)}let w;for(let E=0,N=v.length;E<N;E++){c=v[E].s,u.push(c),w=x[E];for(let C=0,P=w.length;C<P;C++)c.holes.push(w[C].h)}return u}}class NAe extends Hc{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){yt("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function CAe(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2):(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0),t}function RAe(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0):(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2),t}function IAe(t){return t.repeat.x=1,t.repeat.y=1,t.offset.x=0,t.offset.y=0,t}function lO(t,e,n,r){const i=PAe(r);switch(n){case eD:return t*e;case mA:return t*e/i.components*i.byteLength;case Lb:return t*e/i.components*i.byteLength;case gp:return t*e*2/i.components*i.byteLength;case gA:return t*e*2/i.components*i.byteLength;case tD:return t*e*3/i.components*i.byteLength;case ia:return t*e*4/i.components*i.byteLength;case vA:return t*e*4/i.components*i.byteLength;case ax:case sx:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case ox:case lx:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case wT:case TT:return Math.max(t,16)*Math.max(e,8)/4;case _T:case ST:return Math.max(t,8)*Math.max(e,8)/2;case ET:case AT:case MT:case NT:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case kT:case CT:case RT:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case IT:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case PT:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case OT:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case jT:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case DT:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case LT:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case UT:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case zT:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case BT:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case FT:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case VT:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case HT:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case GT:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case qT:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case $T:case WT:case KT:return Math.ceil(t/4)*Math.ceil(e/4)*16;case XT:case YT:return Math.ceil(t/4)*Math.ceil(e/4)*8;case JT:case ZT:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function PAe(t){switch(t){case cs:case Yj:return{byteLength:1,components:1};case fv:case Jj:case Fl:return{byteLength:2,components:1};case hA:case pA:return{byteLength:2,components:4};case tl:case fA:case ra:return{byteLength:4,components:1};case Zj:case Qj:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}class OAe{static contain(e,n){return CAe(e,n)}static cover(e,n){return RAe(e,n)}static fill(e){return IAe(e)}static getByteLength(e,n,r,i){return lO(e,n,r,i)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:cA}}));typeof window<"u"&&(window.__THREE__?yt("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=cA);function gK(){let t=null,e=!1,n=null,r=null;function i(a,s){n(a,s),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(a){n=a},setContext:function(a){t=a}}}function jAe(t){const e=new WeakMap;function n(o,c){const u=o.array,h=o.usage,m=u.byteLength,v=t.createBuffer();t.bindBuffer(c,v),t.bufferData(c,u,h),o.onUploadCallback();let x;if(u instanceof Float32Array)x=t.FLOAT;else if(typeof Float16Array<"u"&&u instanceof Float16Array)x=t.HALF_FLOAT;else if(u instanceof Uint16Array)o.isFloat16BufferAttribute?x=t.HALF_FLOAT:x=t.UNSIGNED_SHORT;else if(u instanceof Int16Array)x=t.SHORT;else if(u instanceof Uint32Array)x=t.UNSIGNED_INT;else if(u instanceof Int32Array)x=t.INT;else if(u instanceof Int8Array)x=t.BYTE;else if(u instanceof Uint8Array)x=t.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)x=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:v,type:x,bytesPerElement:u.BYTES_PER_ELEMENT,version:o.version,size:m}}function r(o,c,u){const h=c.array,m=c.updateRanges;if(t.bindBuffer(u,o),m.length===0)t.bufferSubData(u,0,h);else{m.sort((x,_)=>x.start-_.start);let v=0;for(let x=1;x<m.length;x++){const _=m[v],T=m[x];T.start<=_.start+_.count+1?_.count=Math.max(_.count,T.start+T.count-_.start):(++v,m[v]=T)}m.length=v+1;for(let x=0,_=m.length;x<_;x++){const T=m[x];t.bufferSubData(u,T.start*h.BYTES_PER_ELEMENT,h,T.start,T.count)}c.clearUpdateRanges()}c.onUploadCallback()}function i(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function a(o){o.isInterleavedBufferAttribute&&(o=o.data);const c=e.get(o);c&&(t.deleteBuffer(c.buffer),e.delete(o))}function s(o,c){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const h=e.get(o);(!h||h.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const u=e.get(o);if(u===void 0)e.set(o,n(o,c));else if(u.version<o.version){if(u.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(u.buffer,o,c),u.version=o.version}}return{get:i,remove:a,update:s}}var DAe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,LAe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,UAe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,zAe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,BAe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,FAe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,VAe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,HAe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,GAe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,qAe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,$Ae=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,WAe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,KAe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,XAe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,YAe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,JAe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,ZAe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,QAe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,eke=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,tke=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,nke=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,rke=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,ike=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,ake=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,ske=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,oke=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,lke=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,cke=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,uke=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,dke=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,fke="gl_FragColor = linearToOutputTexel( gl_FragColor );",hke=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,pke=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,mke=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,gke=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,vke=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,yke=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,xke=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,bke=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,_ke=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,wke=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Ske=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Tke=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Eke=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Ake=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,kke=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Mke=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Nke=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Cke=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Rke=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Ike=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Pke=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Oke=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,jke=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Dke=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Lke=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Uke=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,zke=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Bke=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Fke=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Vke=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Hke=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Gke=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,qke=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,$ke=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Wke=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Kke=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Xke=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Yke=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Jke=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Zke=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Qke=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,eMe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,tMe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,nMe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,rMe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,iMe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,aMe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,sMe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,oMe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,lMe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,cMe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,uMe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,dMe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,fMe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,hMe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,pMe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,mMe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,gMe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,vMe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,yMe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,xMe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,bMe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,_Me=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,wMe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,SMe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,TMe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,EMe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,AMe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,kMe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,MMe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,NMe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,CMe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,RMe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,IMe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,PMe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,OMe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const jMe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,DMe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,LMe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,UMe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,zMe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,BMe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,FMe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,VMe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,HMe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,GMe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,qMe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,$Me=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,WMe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,KMe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,XMe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,YMe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,JMe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ZMe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QMe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,eNe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tNe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,nNe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,rNe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,iNe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aNe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,sNe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oNe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lNe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cNe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,uNe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,dNe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fNe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,hNe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,pNe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Sn={alphahash_fragment:DAe,alphahash_pars_fragment:LAe,alphamap_fragment:UAe,alphamap_pars_fragment:zAe,alphatest_fragment:BAe,alphatest_pars_fragment:FAe,aomap_fragment:VAe,aomap_pars_fragment:HAe,batching_pars_vertex:GAe,batching_vertex:qAe,begin_vertex:$Ae,beginnormal_vertex:WAe,bsdfs:KAe,iridescence_fragment:XAe,bumpmap_pars_fragment:YAe,clipping_planes_fragment:JAe,clipping_planes_pars_fragment:ZAe,clipping_planes_pars_vertex:QAe,clipping_planes_vertex:eke,color_fragment:tke,color_pars_fragment:nke,color_pars_vertex:rke,color_vertex:ike,common:ake,cube_uv_reflection_fragment:ske,defaultnormal_vertex:oke,displacementmap_pars_vertex:lke,displacementmap_vertex:cke,emissivemap_fragment:uke,emissivemap_pars_fragment:dke,colorspace_fragment:fke,colorspace_pars_fragment:hke,envmap_fragment:pke,envmap_common_pars_fragment:mke,envmap_pars_fragment:gke,envmap_pars_vertex:vke,envmap_physical_pars_fragment:Mke,envmap_vertex:yke,fog_vertex:xke,fog_pars_vertex:bke,fog_fragment:_ke,fog_pars_fragment:wke,gradientmap_pars_fragment:Ske,lightmap_pars_fragment:Tke,lights_lambert_fragment:Eke,lights_lambert_pars_fragment:Ake,lights_pars_begin:kke,lights_toon_fragment:Nke,lights_toon_pars_fragment:Cke,lights_phong_fragment:Rke,lights_phong_pars_fragment:Ike,lights_physical_fragment:Pke,lights_physical_pars_fragment:Oke,lights_fragment_begin:jke,lights_fragment_maps:Dke,lights_fragment_end:Lke,logdepthbuf_fragment:Uke,logdepthbuf_pars_fragment:zke,logdepthbuf_pars_vertex:Bke,logdepthbuf_vertex:Fke,map_fragment:Vke,map_pars_fragment:Hke,map_particle_fragment:Gke,map_particle_pars_fragment:qke,metalnessmap_fragment:$ke,metalnessmap_pars_fragment:Wke,morphinstance_vertex:Kke,morphcolor_vertex:Xke,morphnormal_vertex:Yke,morphtarget_pars_vertex:Jke,morphtarget_vertex:Zke,normal_fragment_begin:Qke,normal_fragment_maps:eMe,normal_pars_fragment:tMe,normal_pars_vertex:nMe,normal_vertex:rMe,normalmap_pars_fragment:iMe,clearcoat_normal_fragment_begin:aMe,clearcoat_normal_fragment_maps:sMe,clearcoat_pars_fragment:oMe,iridescence_pars_fragment:lMe,opaque_fragment:cMe,packing:uMe,premultiplied_alpha_fragment:dMe,project_vertex:fMe,dithering_fragment:hMe,dithering_pars_fragment:pMe,roughnessmap_fragment:mMe,roughnessmap_pars_fragment:gMe,shadowmap_pars_fragment:vMe,shadowmap_pars_vertex:yMe,shadowmap_vertex:xMe,shadowmask_pars_fragment:bMe,skinbase_vertex:_Me,skinning_pars_vertex:wMe,skinning_vertex:SMe,skinnormal_vertex:TMe,specularmap_fragment:EMe,specularmap_pars_fragment:AMe,tonemapping_fragment:kMe,tonemapping_pars_fragment:MMe,transmission_fragment:NMe,transmission_pars_fragment:CMe,uv_pars_fragment:RMe,uv_pars_vertex:IMe,uv_vertex:PMe,worldpos_vertex:OMe,background_vert:jMe,background_frag:DMe,backgroundCube_vert:LMe,backgroundCube_frag:UMe,cube_vert:zMe,cube_frag:BMe,depth_vert:FMe,depth_frag:VMe,distance_vert:HMe,distance_frag:GMe,equirect_vert:qMe,equirect_frag:$Me,linedashed_vert:WMe,linedashed_frag:KMe,meshbasic_vert:XMe,meshbasic_frag:YMe,meshlambert_vert:JMe,meshlambert_frag:ZMe,meshmatcap_vert:QMe,meshmatcap_frag:eNe,meshnormal_vert:tNe,meshnormal_frag:nNe,meshphong_vert:rNe,meshphong_frag:iNe,meshphysical_vert:aNe,meshphysical_frag:sNe,meshtoon_vert:oNe,meshtoon_frag:lNe,points_vert:cNe,points_frag:uNe,shadow_vert:dNe,shadow_frag:fNe,sprite_vert:hNe,sprite_frag:pNe},bt={common:{diffuse:{value:new kt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new gn},alphaMap:{value:null},alphaMapTransform:{value:new gn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new gn}},envmap:{envMap:{value:null},envMapRotation:{value:new gn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new gn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new gn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new gn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new gn},normalScale:{value:new We(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new gn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new gn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new gn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new gn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new kt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new kt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new gn},alphaTest:{value:0},uvTransform:{value:new gn}},sprite:{diffuse:{value:new kt(16777215)},opacity:{value:1},center:{value:new We(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new gn},alphaMap:{value:null},alphaMapTransform:{value:new gn},alphaTest:{value:0}}},Ol={basic:{uniforms:os([bt.common,bt.specularmap,bt.envmap,bt.aomap,bt.lightmap,bt.fog]),vertexShader:Sn.meshbasic_vert,fragmentShader:Sn.meshbasic_frag},lambert:{uniforms:os([bt.common,bt.specularmap,bt.envmap,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.fog,bt.lights,{emissive:{value:new kt(0)}}]),vertexShader:Sn.meshlambert_vert,fragmentShader:Sn.meshlambert_frag},phong:{uniforms:os([bt.common,bt.specularmap,bt.envmap,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.fog,bt.lights,{emissive:{value:new kt(0)},specular:{value:new kt(1118481)},shininess:{value:30}}]),vertexShader:Sn.meshphong_vert,fragmentShader:Sn.meshphong_frag},standard:{uniforms:os([bt.common,bt.envmap,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.roughnessmap,bt.metalnessmap,bt.fog,bt.lights,{emissive:{value:new kt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Sn.meshphysical_vert,fragmentShader:Sn.meshphysical_frag},toon:{uniforms:os([bt.common,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.gradientmap,bt.fog,bt.lights,{emissive:{value:new kt(0)}}]),vertexShader:Sn.meshtoon_vert,fragmentShader:Sn.meshtoon_frag},matcap:{uniforms:os([bt.common,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.fog,{matcap:{value:null}}]),vertexShader:Sn.meshmatcap_vert,fragmentShader:Sn.meshmatcap_frag},points:{uniforms:os([bt.points,bt.fog]),vertexShader:Sn.points_vert,fragmentShader:Sn.points_frag},dashed:{uniforms:os([bt.common,bt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Sn.linedashed_vert,fragmentShader:Sn.linedashed_frag},depth:{uniforms:os([bt.common,bt.displacementmap]),vertexShader:Sn.depth_vert,fragmentShader:Sn.depth_frag},normal:{uniforms:os([bt.common,bt.bumpmap,bt.normalmap,bt.displacementmap,{opacity:{value:1}}]),vertexShader:Sn.meshnormal_vert,fragmentShader:Sn.meshnormal_frag},sprite:{uniforms:os([bt.sprite,bt.fog]),vertexShader:Sn.sprite_vert,fragmentShader:Sn.sprite_frag},background:{uniforms:{uvTransform:{value:new gn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Sn.background_vert,fragmentShader:Sn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new gn}},vertexShader:Sn.backgroundCube_vert,fragmentShader:Sn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Sn.cube_vert,fragmentShader:Sn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Sn.equirect_vert,fragmentShader:Sn.equirect_frag},distance:{uniforms:os([bt.common,bt.displacementmap,{referencePosition:{value:new se},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Sn.distance_vert,fragmentShader:Sn.distance_frag},shadow:{uniforms:os([bt.lights,bt.fog,{color:{value:new kt(0)},opacity:{value:1}}]),vertexShader:Sn.shadow_vert,fragmentShader:Sn.shadow_frag}};Ol.physical={uniforms:os([Ol.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new gn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new gn},clearcoatNormalScale:{value:new We(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new gn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new gn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new gn},sheen:{value:0},sheenColor:{value:new kt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new gn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new gn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new gn},transmissionSamplerSize:{value:new We},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new gn},attenuationDistance:{value:0},attenuationColor:{value:new kt(0)},specularColor:{value:new kt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new gn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new gn},anisotropyVector:{value:new We},anisotropyMap:{value:null},anisotropyMapTransform:{value:new gn}}]),vertexShader:Sn.meshphysical_vert,fragmentShader:Sn.meshphysical_frag};const HS={r:0,b:0,g:0},jh=new po,mNe=new an;function gNe(t,e,n,r,i,a,s){const o=new kt(0);let c=a===!0?0:1,u,h,m=null,v=0,x=null;function _(C){let P=C.isScene===!0?C.background:null;return P&&P.isTexture&&(P=(C.backgroundBlurriness>0?n:e).get(P)),P}function T(C){let P=!1;const I=_(C);I===null?E(o,c):I&&I.isColor&&(E(I,1),P=!0);const j=t.xr.getEnvironmentBlendMode();j==="additive"?r.buffers.color.setClear(0,0,0,1,s):j==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,s),(t.autoClear||P)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function w(C,P){const I=_(P);I&&(I.isCubeTexture||I.mapping===Ov)?(h===void 0&&(h=new Ii(new kp(1,1,1),new Gs({name:"BackgroundCubeMaterial",uniforms:yv(Ol.backgroundCube.uniforms),vertexShader:Ol.backgroundCube.vertexShader,fragmentShader:Ol.backgroundCube.fragmentShader,side:ps,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(j,O,F){this.matrixWorld.copyPosition(F.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),jh.copy(P.backgroundRotation),jh.x*=-1,jh.y*=-1,jh.z*=-1,I.isCubeTexture&&I.isRenderTargetTexture===!1&&(jh.y*=-1,jh.z*=-1),h.material.uniforms.envMap.value=I,h.material.uniforms.flipEnvMap.value=I.isCubeTexture&&I.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=P.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=P.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(mNe.makeRotationFromEuler(jh)),h.material.toneMapped=Fn.getTransfer(I.colorSpace)!==or,(m!==I||v!==I.version||x!==t.toneMapping)&&(h.material.needsUpdate=!0,m=I,v=I.version,x=t.toneMapping),h.layers.enableAll(),C.unshift(h,h.geometry,h.material,0,0,null)):I&&I.isTexture&&(u===void 0&&(u=new Ii(new Lv(2,2),new Gs({name:"BackgroundMaterial",uniforms:yv(Ol.background.uniforms),vertexShader:Ol.background.vertexShader,fragmentShader:Ol.background.fragmentShader,side:Yu,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=I,u.material.uniforms.backgroundIntensity.value=P.backgroundIntensity,u.material.toneMapped=Fn.getTransfer(I.colorSpace)!==or,I.matrixAutoUpdate===!0&&I.updateMatrix(),u.material.uniforms.uvTransform.value.copy(I.matrix),(m!==I||v!==I.version||x!==t.toneMapping)&&(u.material.needsUpdate=!0,m=I,v=I.version,x=t.toneMapping),u.layers.enableAll(),C.unshift(u,u.geometry,u.material,0,0,null))}function E(C,P){C.getRGB(HS,xW(t)),r.buffers.color.setClear(HS.r,HS.g,HS.b,P,s)}function N(){h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return o},setClearColor:function(C,P=1){o.set(C),c=P,E(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(C){c=C,E(o,c)},render:T,addToRenderList:w,dispose:N}}function vNe(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=v(null);let a=i,s=!1;function o(z,V,G,$,ee){let te=!1;const K=m($,G,V);a!==K&&(a=K,u(a.object)),te=x(z,$,G,ee),te&&_(z,$,G,ee),ee!==null&&e.update(ee,t.ELEMENT_ARRAY_BUFFER),(te||s)&&(s=!1,P(z,V,G,$),ee!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(ee).buffer))}function c(){return t.createVertexArray()}function u(z){return t.bindVertexArray(z)}function h(z){return t.deleteVertexArray(z)}function m(z,V,G){const $=G.wireframe===!0;let ee=r[z.id];ee===void 0&&(ee={},r[z.id]=ee);let te=ee[V.id];te===void 0&&(te={},ee[V.id]=te);let K=te[$];return K===void 0&&(K=v(c()),te[$]=K),K}function v(z){const V=[],G=[],$=[];for(let ee=0;ee<n;ee++)V[ee]=0,G[ee]=0,$[ee]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:V,enabledAttributes:G,attributeDivisors:$,object:z,attributes:{},index:null}}function x(z,V,G,$){const ee=a.attributes,te=V.attributes;let K=0;const X=G.getAttributes();for(const re in X)if(X[re].location>=0){const de=ee[re];let W=te[re];if(W===void 0&&(re==="instanceMatrix"&&z.instanceMatrix&&(W=z.instanceMatrix),re==="instanceColor"&&z.instanceColor&&(W=z.instanceColor)),de===void 0||de.attribute!==W||W&&de.data!==W.data)return!0;K++}return a.attributesNum!==K||a.index!==$}function _(z,V,G,$){const ee={},te=V.attributes;let K=0;const X=G.getAttributes();for(const re in X)if(X[re].location>=0){let de=te[re];de===void 0&&(re==="instanceMatrix"&&z.instanceMatrix&&(de=z.instanceMatrix),re==="instanceColor"&&z.instanceColor&&(de=z.instanceColor));const W={};W.attribute=de,de&&de.data&&(W.data=de.data),ee[re]=W,K++}a.attributes=ee,a.attributesNum=K,a.index=$}function T(){const z=a.newAttributes;for(let V=0,G=z.length;V<G;V++)z[V]=0}function w(z){E(z,0)}function E(z,V){const G=a.newAttributes,$=a.enabledAttributes,ee=a.attributeDivisors;G[z]=1,$[z]===0&&(t.enableVertexAttribArray(z),$[z]=1),ee[z]!==V&&(t.vertexAttribDivisor(z,V),ee[z]=V)}function N(){const z=a.newAttributes,V=a.enabledAttributes;for(let G=0,$=V.length;G<$;G++)V[G]!==z[G]&&(t.disableVertexAttribArray(G),V[G]=0)}function C(z,V,G,$,ee,te,K){K===!0?t.vertexAttribIPointer(z,V,G,ee,te):t.vertexAttribPointer(z,V,G,$,ee,te)}function P(z,V,G,$){T();const ee=$.attributes,te=G.getAttributes(),K=V.defaultAttributeValues;for(const X in te){const re=te[X];if(re.location>=0){let ce=ee[X];if(ce===void 0&&(X==="instanceMatrix"&&z.instanceMatrix&&(ce=z.instanceMatrix),X==="instanceColor"&&z.instanceColor&&(ce=z.instanceColor)),ce!==void 0){const de=ce.normalized,W=ce.itemSize,ae=e.get(ce);if(ae===void 0)continue;const me=ae.buffer,Ie=ae.type,Xe=ae.bytesPerElement,ve=Ie===t.INT||Ie===t.UNSIGNED_INT||ce.gpuType===fA;if(ce.isInterleavedBufferAttribute){const _e=ce.data,Ye=_e.stride,ke=ce.offset;if(_e.isInstancedInterleavedBuffer){for(let qe=0;qe<re.locationSize;qe++)E(re.location+qe,_e.meshPerAttribute);z.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=_e.meshPerAttribute*_e.count)}else for(let qe=0;qe<re.locationSize;qe++)w(re.location+qe);t.bindBuffer(t.ARRAY_BUFFER,me);for(let qe=0;qe<re.locationSize;qe++)C(re.location+qe,W/re.locationSize,Ie,de,Ye*Xe,(ke+W/re.locationSize*qe)*Xe,ve)}else{if(ce.isInstancedBufferAttribute){for(let _e=0;_e<re.locationSize;_e++)E(re.location+_e,ce.meshPerAttribute);z.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=ce.meshPerAttribute*ce.count)}else for(let _e=0;_e<re.locationSize;_e++)w(re.location+_e);t.bindBuffer(t.ARRAY_BUFFER,me);for(let _e=0;_e<re.locationSize;_e++)C(re.location+_e,W/re.locationSize,Ie,de,W*Xe,W/re.locationSize*_e*Xe,ve)}}else if(K!==void 0){const de=K[X];if(de!==void 0)switch(de.length){case 2:t.vertexAttrib2fv(re.location,de);break;case 3:t.vertexAttrib3fv(re.location,de);break;case 4:t.vertexAttrib4fv(re.location,de);break;default:t.vertexAttrib1fv(re.location,de)}}}}N()}function I(){F();for(const z in r){const V=r[z];for(const G in V){const $=V[G];for(const ee in $)h($[ee].object),delete $[ee];delete V[G]}delete r[z]}}function j(z){if(r[z.id]===void 0)return;const V=r[z.id];for(const G in V){const $=V[G];for(const ee in $)h($[ee].object),delete $[ee];delete V[G]}delete r[z.id]}function O(z){for(const V in r){const G=r[V];if(G[z.id]===void 0)continue;const $=G[z.id];for(const ee in $)h($[ee].object),delete $[ee];delete G[z.id]}}function F(){L(),s=!0,a!==i&&(a=i,u(a.object))}function L(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:o,reset:F,resetDefaultState:L,dispose:I,releaseStatesOfGeometry:j,releaseStatesOfProgram:O,initAttributes:T,enableAttribute:w,disableUnusedAttributes:N}}function yNe(t,e,n){let r;function i(u){r=u}function a(u,h){t.drawArrays(r,u,h),n.update(h,r,1)}function s(u,h,m){m!==0&&(t.drawArraysInstanced(r,u,h,m),n.update(h,r,m))}function o(u,h,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,u,0,h,0,m);let x=0;for(let _=0;_<m;_++)x+=h[_];n.update(x,r,1)}function c(u,h,m,v){if(m===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let _=0;_<u.length;_++)s(u[_],h[_],v[_]);else{x.multiDrawArraysInstancedWEBGL(r,u,0,h,0,v,0,m);let _=0;for(let T=0;T<m;T++)_+=h[T]*v[T];n.update(_,r,1)}}this.setMode=i,this.render=a,this.renderInstances=s,this.renderMultiDraw=o,this.renderMultiDrawInstances=c}function xNe(t,e,n,r){let i;function a(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const O=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(O){return!(O!==ia&&r.convert(O)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(O){const F=O===Fl&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(O!==cs&&r.convert(O)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&O!==ra&&!F)}function c(O){if(O==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";O="mediump"}return O==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=n.precision!==void 0?n.precision:"highp";const h=c(u);h!==u&&(yt("WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const m=n.logarithmicDepthBuffer===!0,v=n.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),x=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),_=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),T=t.getParameter(t.MAX_TEXTURE_SIZE),w=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),E=t.getParameter(t.MAX_VERTEX_ATTRIBS),N=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),C=t.getParameter(t.MAX_VARYING_VECTORS),P=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),I=t.getParameter(t.MAX_SAMPLES),j=t.getParameter(t.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:c,textureFormatReadable:s,textureTypeReadable:o,precision:u,logarithmicDepthBuffer:m,reversedDepthBuffer:v,maxTextures:x,maxVertexTextures:_,maxTextureSize:T,maxCubemapSize:w,maxAttributes:E,maxVertexUniforms:N,maxVaryings:C,maxFragmentUniforms:P,maxSamples:I,samples:j}}function bNe(t){const e=this;let n=null,r=0,i=!1,a=!1;const s=new cf,o=new gn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(m,v){const x=m.length!==0||v||r!==0||i;return i=v,r=m.length,x},this.beginShadows=function(){a=!0,h(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(m,v){n=h(m,v,0)},this.setState=function(m,v,x){const _=m.clippingPlanes,T=m.clipIntersection,w=m.clipShadows,E=t.get(m);if(!i||_===null||_.length===0||a&&!w)a?h(null):u();else{const N=a?0:r,C=N*4;let P=E.clippingState||null;c.value=P,P=h(_,v,C,x);for(let I=0;I!==C;++I)P[I]=n[I];E.clippingState=P,this.numIntersection=T?this.numPlanes:0,this.numPlanes+=N}};function u(){c.value!==n&&(c.value=n,c.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function h(m,v,x,_){const T=m!==null?m.length:0;let w=null;if(T!==0){if(w=c.value,_!==!0||w===null){const E=x+T*4,N=v.matrixWorldInverse;o.getNormalMatrix(N),(w===null||w.length<E)&&(w=new Float32Array(E));for(let C=0,P=x;C!==T;++C,P+=4)s.copy(m[C]).applyMatrix4(N,o),s.normal.toArray(w,P),w[P+3]=s.constant}c.value=w,c.needsUpdate=!0}return e.numPlanes=T,e.numIntersection=0,w}}function _Ne(t){let e=new WeakMap;function n(s,o){return o===lb?s.mapping=Lc:o===cb&&(s.mapping=bf),s}function r(s){if(s&&s.isTexture){const o=s.mapping;if(o===lb||o===cb)if(e.has(s)){const c=e.get(s).texture;return n(c,s.mapping)}else{const c=s.image;if(c&&c.height>0){const u=new oD(c.height);return u.fromEquirectangularTexture(t,s),e.set(s,u),s.addEventListener("dispose",i),n(u.texture,s.mapping)}else return null}}return s}function i(s){const o=s.target;o.removeEventListener("dispose",i);const c=e.get(o);c!==void 0&&(e.delete(o),c.dispose())}function a(){e=new WeakMap}return{get:r,dispose:a}}const vf=4,$V=[.125,.215,.35,.446,.526,.582],qh=20,wNe=256,jy=new Cp,WV=new kt;let jI=null,DI=0,LI=0,UI=!1;const SNe=new se;class cO{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,n=0,r=.1,i=100,a={}){const{size:s=256,position:o=SNe}=a;jI=this._renderer.getRenderTarget(),DI=this._renderer.getActiveCubeFace(),LI=this._renderer.getActiveMipmapLevel(),UI=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,r,i,c,o),n>0&&this._blur(c,0,0,n),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=YV(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=XV(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(jI,DI,LI),this._renderer.xr.enabled=UI,e.scissorTest=!1,fg(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Lc||e.mapping===bf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),jI=this._renderer.getRenderTarget(),DI=this._renderer.getActiveCubeFace(),LI=this._renderer.getActiveMipmapLevel(),UI=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:wr,minFilter:wr,generateMipmaps:!1,type:Fl,format:ia,colorSpace:_f,depthBuffer:!1},i=KV(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=KV(e,n,r);const{_lodMax:a}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=TNe(a)),this._blurMaterial=ANe(a,e,n),this._ggxMaterial=ENe(a,e,n)}return i}_compileMaterial(e){const n=new Ii(new hn,e);this._renderer.compile(n,jy)}_sceneToCubeUV(e,n,r,i,a){const c=new na(90,1,n,r),u=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],m=this._renderer,v=m.autoClear,x=m.toneMapping;m.getClearColor(WV),m.toneMapping=Xo,m.autoClear=!1,m.state.buffers.depth.getReversed()&&(m.setRenderTarget(i),m.clearDepth(),m.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Ii(new kp,new Cf({name:"PMREM.Background",side:ps,depthWrite:!1,depthTest:!1})));const T=this._backgroundBox,w=T.material;let E=!1;const N=e.background;N?N.isColor&&(w.color.copy(N),e.background=null,E=!0):(w.color.copy(WV),E=!0);for(let C=0;C<6;C++){const P=C%3;P===0?(c.up.set(0,u[C],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x+h[C],a.y,a.z)):P===1?(c.up.set(0,0,u[C]),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y+h[C],a.z)):(c.up.set(0,u[C],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y,a.z+h[C]));const I=this._cubeSize;fg(i,P*I,C>2?I:0,I,I),m.setRenderTarget(i),E&&m.render(T,c),m.render(e,c)}m.toneMapping=x,m.autoClear=v,e.background=N}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===Lc||e.mapping===bf;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=YV()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=XV());const a=i?this._cubemapMaterial:this._equirectMaterial,s=this._lodMeshes[0];s.material=a;const o=a.uniforms;o.envMap.value=e;const c=this._cubeSize;fg(n,0,0,3*c,2*c),r.setRenderTarget(n),r.render(s,jy)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const i=this._lodMeshes.length;for(let a=1;a<i;a++)this._applyGGXFilter(e,a-1,a);n.autoClear=r}_applyGGXFilter(e,n,r){const i=this._renderer,a=this._pingPongRenderTarget,s=this._ggxMaterial,o=this._lodMeshes[r];o.material=s;const c=s.uniforms,u=r/(this._lodMeshes.length-1),h=n/(this._lodMeshes.length-1),m=Math.sqrt(u*u-h*h),v=0+u*1.25,x=m*v,{_lodMax:_}=this,T=this._sizeLods[r],w=3*T*(r>_-vf?r-_+vf:0),E=4*(this._cubeSize-T);c.envMap.value=e.texture,c.roughness.value=x,c.mipInt.value=_-n,fg(a,w,E,3*T,2*T),i.setRenderTarget(a),i.render(o,jy),c.envMap.value=a.texture,c.roughness.value=0,c.mipInt.value=_-r,fg(e,w,E,3*T,2*T),i.setRenderTarget(e),i.render(o,jy)}_blur(e,n,r,i,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,n,r,i,"latitudinal",a),this._halfBlur(s,e,r,r,i,"longitudinal",a)}_halfBlur(e,n,r,i,a,s,o){const c=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&Bt("blur direction must be either latitudinal or longitudinal!");const h=3,m=this._lodMeshes[i];m.material=u;const v=u.uniforms,x=this._sizeLods[r]-1,_=isFinite(a)?Math.PI/(2*x):2*Math.PI/(2*qh-1),T=a/_,w=isFinite(a)?1+Math.floor(h*T):qh;w>qh&&yt(`sigmaRadians, ${a}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${qh}`);const E=[];let N=0;for(let O=0;O<qh;++O){const F=O/T,L=Math.exp(-F*F/2);E.push(L),O===0?N+=L:O<w&&(N+=2*L)}for(let O=0;O<E.length;O++)E[O]=E[O]/N;v.envMap.value=e.texture,v.samples.value=w,v.weights.value=E,v.latitudinal.value=s==="latitudinal",o&&(v.poleAxis.value=o);const{_lodMax:C}=this;v.dTheta.value=_,v.mipInt.value=C-r;const P=this._sizeLods[i],I=3*P*(i>C-vf?i-C+vf:0),j=4*(this._cubeSize-P);fg(n,I,j,3*P,2*P),c.setRenderTarget(n),c.render(m,jy)}}function TNe(t){const e=[],n=[],r=[];let i=t;const a=t-vf+1+$V.length;for(let s=0;s<a;s++){const o=Math.pow(2,i);e.push(o);let c=1/o;s>t-vf?c=$V[s-t+vf-1]:s===0&&(c=0),n.push(c);const u=1/(o-2),h=-u,m=1+u,v=[h,h,m,h,m,m,h,h,m,m,h,m],x=6,_=6,T=3,w=2,E=1,N=new Float32Array(T*_*x),C=new Float32Array(w*_*x),P=new Float32Array(E*_*x);for(let j=0;j<x;j++){const O=j%3*2/3-1,F=j>2?0:-1,L=[O,F,0,O+2/3,F,0,O+2/3,F+1,0,O,F,0,O+2/3,F+1,0,O,F+1,0];N.set(L,T*_*j),C.set(v,w*_*j);const z=[j,j,j,j,j,j];P.set(z,E*_*j)}const I=new hn;I.setAttribute("position",new gr(N,T)),I.setAttribute("uv",new gr(C,w)),I.setAttribute("faceIndex",new gr(P,E)),r.push(new Ii(I,null)),i>vf&&i--}return{lodMeshes:r,sizeLods:e,sigmas:n}}function KV(t,e,n){const r=new Hs(t,e,n);return r.texture.mapping=Ov,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function fg(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function ENe(t,e,n){return new Gs({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:wNe,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:qA(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Oc,depthTest:!1,depthWrite:!1})}function ANe(t,e,n){const r=new Float32Array(qh),i=new se(0,1,0);return new Gs({name:"SphericalGaussianBlur",defines:{n:qh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:qA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Oc,depthTest:!1,depthWrite:!1})}function XV(){return new Gs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:qA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Oc,depthTest:!1,depthWrite:!1})}function YV(){return new Gs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:qA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Oc,depthTest:!1,depthWrite:!1})}function qA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function kNe(t){let e=new WeakMap,n=null;function r(o){if(o&&o.isTexture){const c=o.mapping,u=c===lb||c===cb,h=c===Lc||c===bf;if(u||h){let m=e.get(o);const v=m!==void 0?m.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==v)return n===null&&(n=new cO(t)),m=u?n.fromEquirectangular(o,m):n.fromCubemap(o,m),m.texture.pmremVersion=o.pmremVersion,e.set(o,m),m.texture;if(m!==void 0)return m.texture;{const x=o.image;return u&&x&&x.height>0||h&&x&&i(x)?(n===null&&(n=new cO(t)),m=u?n.fromEquirectangular(o):n.fromCubemap(o),m.texture.pmremVersion=o.pmremVersion,e.set(o,m),o.addEventListener("dispose",a),m.texture):null}}}return o}function i(o){let c=0;const u=6;for(let h=0;h<u;h++)o[h]!==void 0&&c++;return c===u}function a(o){const c=o.target;c.removeEventListener("dispose",a);const u=e.get(c);u!==void 0&&(e.delete(c),u.dispose())}function s(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:s}}function MNe(t){const e={};function n(r){if(e[r]!==void 0)return e[r];const i=t.getExtension(r);return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const i=n(r);return i===null&&mv("WebGLRenderer: "+r+" extension not supported."),i}}}function NNe(t,e,n,r){const i={},a=new WeakMap;function s(m){const v=m.target;v.index!==null&&e.remove(v.index);for(const _ in v.attributes)e.remove(v.attributes[_]);v.removeEventListener("dispose",s),delete i[v.id];const x=a.get(v);x&&(e.remove(x),a.delete(v)),r.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,n.memory.geometries--}function o(m,v){return i[v.id]===!0||(v.addEventListener("dispose",s),i[v.id]=!0,n.memory.geometries++),v}function c(m){const v=m.attributes;for(const x in v)e.update(v[x],t.ARRAY_BUFFER)}function u(m){const v=[],x=m.index,_=m.attributes.position;let T=0;if(x!==null){const N=x.array;T=x.version;for(let C=0,P=N.length;C<P;C+=3){const I=N[C+0],j=N[C+1],O=N[C+2];v.push(I,j,j,O,O,I)}}else if(_!==void 0){const N=_.array;T=_.version;for(let C=0,P=N.length/3-1;C<P;C+=3){const I=C+0,j=C+1,O=C+2;v.push(I,j,j,O,O,I)}}else return;const w=new(pW(v)?sD:aD)(v,1);w.version=T;const E=a.get(m);E&&e.remove(E),a.set(m,w)}function h(m){const v=a.get(m);if(v){const x=m.index;x!==null&&v.version<x.version&&u(m)}else u(m);return a.get(m)}return{get:o,update:c,getWireframeAttribute:h}}function CNe(t,e,n){let r;function i(v){r=v}let a,s;function o(v){a=v.type,s=v.bytesPerElement}function c(v,x){t.drawElements(r,x,a,v*s),n.update(x,r,1)}function u(v,x,_){_!==0&&(t.drawElementsInstanced(r,x,a,v*s,_),n.update(x,r,_))}function h(v,x,_){if(_===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,x,0,a,v,0,_);let w=0;for(let E=0;E<_;E++)w+=x[E];n.update(w,r,1)}function m(v,x,_,T){if(_===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let E=0;E<v.length;E++)u(v[E]/s,x[E],T[E]);else{w.multiDrawElementsInstancedWEBGL(r,x,0,a,v,0,T,0,_);let E=0;for(let N=0;N<_;N++)E+=x[N]*T[N];n.update(E,r,1)}}this.setMode=i,this.setIndex=o,this.render=c,this.renderInstances=u,this.renderMultiDraw=h,this.renderMultiDrawInstances=m}function RNe(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,s,o){switch(n.calls++,s){case t.TRIANGLES:n.triangles+=o*(a/3);break;case t.LINES:n.lines+=o*(a/2);break;case t.LINE_STRIP:n.lines+=o*(a-1);break;case t.LINE_LOOP:n.lines+=o*a;break;case t.POINTS:n.points+=o*a;break;default:Bt("WebGLInfo: Unknown draw mode:",s);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function INe(t,e,n){const r=new WeakMap,i=new br;function a(s,o,c){const u=s.morphTargetInfluences,h=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,m=h!==void 0?h.length:0;let v=r.get(o);if(v===void 0||v.count!==m){let z=function(){F.dispose(),r.delete(o),o.removeEventListener("dispose",z)};var x=z;v!==void 0&&v.texture.dispose();const _=o.morphAttributes.position!==void 0,T=o.morphAttributes.normal!==void 0,w=o.morphAttributes.color!==void 0,E=o.morphAttributes.position||[],N=o.morphAttributes.normal||[],C=o.morphAttributes.color||[];let P=0;_===!0&&(P=1),T===!0&&(P=2),w===!0&&(P=3);let I=o.attributes.position.count*P,j=1;I>e.maxTextureSize&&(j=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const O=new Float32Array(I*j*4*m),F=new _A(O,I,j,m);F.type=ra,F.needsUpdate=!0;const L=P*4;for(let V=0;V<m;V++){const G=E[V],$=N[V],ee=C[V],te=I*j*4*V;for(let K=0;K<G.count;K++){const X=K*L;_===!0&&(i.fromBufferAttribute(G,K),O[te+X+0]=i.x,O[te+X+1]=i.y,O[te+X+2]=i.z,O[te+X+3]=0),T===!0&&(i.fromBufferAttribute($,K),O[te+X+4]=i.x,O[te+X+5]=i.y,O[te+X+6]=i.z,O[te+X+7]=0),w===!0&&(i.fromBufferAttribute(ee,K),O[te+X+8]=i.x,O[te+X+9]=i.y,O[te+X+10]=i.z,O[te+X+11]=ee.itemSize===4?i.w:1)}}v={count:m,texture:F,size:new We(I,j)},r.set(o,v),o.addEventListener("dispose",z)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)c.getUniforms().setValue(t,"morphTexture",s.morphTexture,n);else{let _=0;for(let w=0;w<u.length;w++)_+=u[w];const T=o.morphTargetsRelative?1:1-_;c.getUniforms().setValue(t,"morphTargetBaseInfluence",T),c.getUniforms().setValue(t,"morphTargetInfluences",u)}c.getUniforms().setValue(t,"morphTargetsTexture",v.texture,n),c.getUniforms().setValue(t,"morphTargetsTextureSize",v.size)}return{update:a}}function PNe(t,e,n,r){let i=new WeakMap;function a(c){const u=r.render.frame,h=c.geometry,m=e.get(c,h);if(i.get(m)!==u&&(e.update(m),i.set(m,u)),c.isInstancedMesh&&(c.hasEventListener("dispose",o)===!1&&c.addEventListener("dispose",o),i.get(c)!==u&&(n.update(c.instanceMatrix,t.ARRAY_BUFFER),c.instanceColor!==null&&n.update(c.instanceColor,t.ARRAY_BUFFER),i.set(c,u))),c.isSkinnedMesh){const v=c.skeleton;i.get(v)!==u&&(v.update(),i.set(v,u))}return m}function s(){i=new WeakMap}function o(c){const u=c.target;u.removeEventListener("dispose",o),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:a,dispose:s}}const ONe={[Hj]:"LINEAR_TONE_MAPPING",[Gj]:"REINHARD_TONE_MAPPING",[qj]:"CINEON_TONE_MAPPING",[uA]:"ACES_FILMIC_TONE_MAPPING",[Wj]:"AGX_TONE_MAPPING",[Kj]:"NEUTRAL_TONE_MAPPING",[$j]:"CUSTOM_TONE_MAPPING"};function jNe(t,e,n,r,i){const a=new Hs(e,n,{type:t,depthBuffer:r,stencilBuffer:i}),s=new Hs(e,n,{type:Fl,depthBuffer:!1,stencilBuffer:!1}),o=new hn;o.setAttribute("position",new Ot([-1,3,0,-1,-1,0,3,-1,0],3)),o.setAttribute("uv",new Ot([0,2,0,0,2,0],2));const c=new yD({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),u=new Ii(o,c),h=new Cp(-1,1,1,-1,0,1);let m=null,v=null,x=!1,_,T=null,w=[],E=!1;this.setSize=function(N,C){a.setSize(N,C),s.setSize(N,C);for(let P=0;P<w.length;P++){const I=w[P];I.setSize&&I.setSize(N,C)}},this.setEffects=function(N){w=N,E=w.length>0&&w[0].isRenderPass===!0;const C=a.width,P=a.height;for(let I=0;I<w.length;I++){const j=w[I];j.setSize&&j.setSize(C,P)}},this.begin=function(N,C){if(x||N.toneMapping===Xo&&w.length===0)return!1;if(T=C,C!==null){const P=C.width,I=C.height;(a.width!==P||a.height!==I)&&this.setSize(P,I)}return E===!1&&N.setRenderTarget(a),_=N.toneMapping,N.toneMapping=Xo,!0},this.hasRenderPass=function(){return E},this.end=function(N,C){N.toneMapping=_,x=!0;let P=a,I=s;for(let j=0;j<w.length;j++){const O=w[j];if(O.enabled!==!1&&(O.render(N,I,P,C),O.needsSwap!==!1)){const F=P;P=I,I=F}}if(m!==N.outputColorSpace||v!==N.toneMapping){m=N.outputColorSpace,v=N.toneMapping,c.defines={},Fn.getTransfer(m)===or&&(c.defines.SRGB_TRANSFER="");const j=ONe[v];j&&(c.defines[j]=""),c.needsUpdate=!0}c.uniforms.tDiffuse.value=P.texture,N.setRenderTarget(T),N.render(u,h),T=null,x=!1},this.isCompositing=function(){return x},this.dispose=function(){a.dispose(),s.dispose(),o.dispose(),c.dispose()}}const vK=new di,uO=new yp(1,1),yK=new _A,xK=new wA,bK=new Ub,JV=[],ZV=[],QV=new Float32Array(16),eH=new Float32Array(9),tH=new Float32Array(4);function Uv(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let a=JV[i];if(a===void 0&&(a=new Float32Array(i),JV[i]=a),e!==0){r.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=n,t[s].toArray(a,o)}return a}function qi(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function $i(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function $A(t,e){let n=ZV[e];n===void 0&&(n=new Int32Array(e),ZV[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function DNe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function LNe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(qi(n,e))return;t.uniform2fv(this.addr,e),$i(n,e)}}function UNe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(qi(n,e))return;t.uniform3fv(this.addr,e),$i(n,e)}}function zNe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(qi(n,e))return;t.uniform4fv(this.addr,e),$i(n,e)}}function BNe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(qi(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),$i(n,e)}else{if(qi(n,r))return;tH.set(r),t.uniformMatrix2fv(this.addr,!1,tH),$i(n,r)}}function FNe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(qi(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),$i(n,e)}else{if(qi(n,r))return;eH.set(r),t.uniformMatrix3fv(this.addr,!1,eH),$i(n,r)}}function VNe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(qi(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),$i(n,e)}else{if(qi(n,r))return;QV.set(r),t.uniformMatrix4fv(this.addr,!1,QV),$i(n,r)}}function HNe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function GNe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(qi(n,e))return;t.uniform2iv(this.addr,e),$i(n,e)}}function qNe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(qi(n,e))return;t.uniform3iv(this.addr,e),$i(n,e)}}function $Ne(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(qi(n,e))return;t.uniform4iv(this.addr,e),$i(n,e)}}function WNe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function KNe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(qi(n,e))return;t.uniform2uiv(this.addr,e),$i(n,e)}}function XNe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(qi(n,e))return;t.uniform3uiv(this.addr,e),$i(n,e)}}function YNe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(qi(n,e))return;t.uniform4uiv(this.addr,e),$i(n,e)}}function JNe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);let a;this.type===t.SAMPLER_2D_SHADOW?(uO.compareFunction=n.isReversedDepthBuffer()?bA:xA,a=uO):a=vK,n.setTexture2D(e||a,i)}function ZNe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||xK,i)}function QNe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||bK,i)}function eCe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||yK,i)}function tCe(t){switch(t){case 5126:return DNe;case 35664:return LNe;case 35665:return UNe;case 35666:return zNe;case 35674:return BNe;case 35675:return FNe;case 35676:return VNe;case 5124:case 35670:return HNe;case 35667:case 35671:return GNe;case 35668:case 35672:return qNe;case 35669:case 35673:return $Ne;case 5125:return WNe;case 36294:return KNe;case 36295:return XNe;case 36296:return YNe;case 35678:case 36198:case 36298:case 36306:case 35682:return JNe;case 35679:case 36299:case 36307:return ZNe;case 35680:case 36300:case 36308:case 36293:return QNe;case 36289:case 36303:case 36311:case 36292:return eCe}}function nCe(t,e){t.uniform1fv(this.addr,e)}function rCe(t,e){const n=Uv(e,this.size,2);t.uniform2fv(this.addr,n)}function iCe(t,e){const n=Uv(e,this.size,3);t.uniform3fv(this.addr,n)}function aCe(t,e){const n=Uv(e,this.size,4);t.uniform4fv(this.addr,n)}function sCe(t,e){const n=Uv(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function oCe(t,e){const n=Uv(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function lCe(t,e){const n=Uv(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function cCe(t,e){t.uniform1iv(this.addr,e)}function uCe(t,e){t.uniform2iv(this.addr,e)}function dCe(t,e){t.uniform3iv(this.addr,e)}function fCe(t,e){t.uniform4iv(this.addr,e)}function hCe(t,e){t.uniform1uiv(this.addr,e)}function pCe(t,e){t.uniform2uiv(this.addr,e)}function mCe(t,e){t.uniform3uiv(this.addr,e)}function gCe(t,e){t.uniform4uiv(this.addr,e)}function vCe(t,e,n){const r=this.cache,i=e.length,a=$A(n,i);qi(r,a)||(t.uniform1iv(this.addr,a),$i(r,a));let s;this.type===t.SAMPLER_2D_SHADOW?s=uO:s=vK;for(let o=0;o!==i;++o)n.setTexture2D(e[o]||s,a[o])}function yCe(t,e,n){const r=this.cache,i=e.length,a=$A(n,i);qi(r,a)||(t.uniform1iv(this.addr,a),$i(r,a));for(let s=0;s!==i;++s)n.setTexture3D(e[s]||xK,a[s])}function xCe(t,e,n){const r=this.cache,i=e.length,a=$A(n,i);qi(r,a)||(t.uniform1iv(this.addr,a),$i(r,a));for(let s=0;s!==i;++s)n.setTextureCube(e[s]||bK,a[s])}function bCe(t,e,n){const r=this.cache,i=e.length,a=$A(n,i);qi(r,a)||(t.uniform1iv(this.addr,a),$i(r,a));for(let s=0;s!==i;++s)n.setTexture2DArray(e[s]||yK,a[s])}function _Ce(t){switch(t){case 5126:return nCe;case 35664:return rCe;case 35665:return iCe;case 35666:return aCe;case 35674:return sCe;case 35675:return oCe;case 35676:return lCe;case 5124:case 35670:return cCe;case 35667:case 35671:return uCe;case 35668:case 35672:return dCe;case 35669:case 35673:return fCe;case 5125:return hCe;case 36294:return pCe;case 36295:return mCe;case 36296:return gCe;case 35678:case 36198:case 36298:case 36306:case 35682:return vCe;case 35679:case 36299:case 36307:return yCe;case 35680:case 36300:case 36308:case 36293:return xCe;case 36289:case 36303:case 36311:case 36292:return bCe}}class wCe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=tCe(n.type)}}class SCe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=_Ce(n.type)}}class TCe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let a=0,s=i.length;a!==s;++a){const o=i[a];o.setValue(e,n[o.id],r)}}}const zI=/(\w+)(\])?(\[|\.)?/g;function nH(t,e){t.seq.push(e),t.map[e.id]=e}function ECe(t,e,n){const r=t.name,i=r.length;for(zI.lastIndex=0;;){const a=zI.exec(r),s=zI.lastIndex;let o=a[1];const c=a[2]==="]",u=a[3];if(c&&(o=o|0),u===void 0||u==="["&&s+2===i){nH(n,u===void 0?new wCe(o,t,e):new SCe(o,t,e));break}else{let m=n.map[o];m===void 0&&(m=new TCe(o),nH(n,m)),n=m}}}class e1{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let s=0;s<r;++s){const o=e.getActiveUniform(n,s),c=e.getUniformLocation(n,o.name);ECe(o,c,this)}const i=[],a=[];for(const s of this.seq)s.type===e.SAMPLER_2D_SHADOW||s.type===e.SAMPLER_CUBE_SHADOW||s.type===e.SAMPLER_2D_ARRAY_SHADOW?i.push(s):a.push(s);i.length>0&&(this.seq=i.concat(a))}setValue(e,n,r,i){const a=this.map[n];a!==void 0&&a.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let a=0,s=n.length;a!==s;++a){const o=n[a],c=r[o.id];c.needsUpdate!==!1&&o.setValue(e,c.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,a=e.length;i!==a;++i){const s=e[i];s.id in n&&r.push(s)}return r}}function rH(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const ACe=37297;let kCe=0;function MCe(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),a=Math.min(e+6,n.length);for(let s=i;s<a;s++){const o=s+1;r.push(`${o===e?">":" "} ${o}: ${n[s]}`)}return r.join(`
`)}const iH=new gn;function NCe(t){Fn._getMatrix(iH,Fn.workingColorSpace,t);const e=`mat3( ${iH.elements.map(n=>n.toFixed(4))} )`;switch(Fn.getTransfer(t)){case pb:return[e,"LinearTransferOETF"];case or:return[e,"sRGBTransferOETF"];default:return yt("WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function aH(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),a=(t.getShaderInfoLog(e)||"").trim();if(r&&a==="")return"";const s=/ERROR: 0:(\d+)/.exec(a);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+a+`

`+MCe(t.getShaderSource(e),o)}else return a}function CCe(t,e){const n=NCe(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}const RCe={[Hj]:"Linear",[Gj]:"Reinhard",[qj]:"Cineon",[uA]:"ACESFilmic",[Wj]:"AgX",[Kj]:"Neutral",[$j]:"Custom"};function ICe(t,e){const n=RCe[e];return n===void 0?(yt("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+t+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const GS=new se;function PCe(){Fn.getLuminanceCoefficients(GS);const t=GS.x.toFixed(4),e=GS.y.toFixed(4),n=GS.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function OCe(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter($y).join(`
`)}function jCe(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function DCe(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const a=t.getActiveAttrib(e,i),s=a.name;let o=1;a.type===t.FLOAT_MAT2&&(o=2),a.type===t.FLOAT_MAT3&&(o=3),a.type===t.FLOAT_MAT4&&(o=4),n[s]={type:a.type,location:t.getAttribLocation(e,s),locationSize:o}}return n}function $y(t){return t!==""}function sH(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function oH(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const LCe=/^[ \t]*#include +<([\w\d./]+)>/gm;function dO(t){return t.replace(LCe,zCe)}const UCe=new Map;function zCe(t,e){let n=Sn[e];if(n===void 0){const r=UCe.get(e);if(r!==void 0)n=Sn[r],yt('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return dO(n)}const BCe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function lH(t){return t.replace(BCe,FCe)}function FCe(t,e,n,r){let i="";for(let a=parseInt(e);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function cH(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const VCe={[zg]:"SHADOWMAP_TYPE_PCF",[Jh]:"SHADOWMAP_TYPE_VSM"};function HCe(t){return VCe[t.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const GCe={[Lc]:"ENVMAP_TYPE_CUBE",[bf]:"ENVMAP_TYPE_CUBE",[Ov]:"ENVMAP_TYPE_CUBE_UV"};function qCe(t){return t.envMap===!1?"ENVMAP_TYPE_CUBE":GCe[t.envMapMode]||"ENVMAP_TYPE_CUBE"}const $Ce={[bf]:"ENVMAP_MODE_REFRACTION"};function WCe(t){return t.envMap===!1?"ENVMAP_MODE_REFLECTION":$Ce[t.envMapMode]||"ENVMAP_MODE_REFLECTION"}const KCe={[Db]:"ENVMAP_BLENDING_MULTIPLY",[eW]:"ENVMAP_BLENDING_MIX",[tW]:"ENVMAP_BLENDING_ADD"};function XCe(t){return t.envMap===!1?"ENVMAP_BLENDING_NONE":KCe[t.combine]||"ENVMAP_BLENDING_NONE"}function YCe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}function JCe(t,e,n,r){const i=t.getContext(),a=n.defines;let s=n.vertexShader,o=n.fragmentShader;const c=HCe(n),u=qCe(n),h=WCe(n),m=XCe(n),v=YCe(n),x=OCe(n),_=jCe(a),T=i.createProgram();let w,E,N=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(w=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,_].filter($y).join(`
`),w.length>0&&(w+=`
`),E=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,_].filter($y).join(`
`),E.length>0&&(E+=`
`)):(w=[cH(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,_,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter($y).join(`
`),E=[cH(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,_,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",n.envMap?"#define "+m:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Xo?"#define TONE_MAPPING":"",n.toneMapping!==Xo?Sn.tonemapping_pars_fragment:"",n.toneMapping!==Xo?ICe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Sn.colorspace_pars_fragment,CCe("linearToOutputTexel",n.outputColorSpace),PCe(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter($y).join(`
`)),s=dO(s),s=sH(s,n),s=oH(s,n),o=dO(o),o=sH(o,n),o=oH(o,n),s=lH(s),o=lH(o),n.isRawShaderMaterial!==!0&&(N=`#version 300 es
`,w=[x,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,E=["#define varying in",n.glslVersion===tO?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===tO?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+E);const C=N+w+s,P=N+E+o,I=rH(i,i.VERTEX_SHADER,C),j=rH(i,i.FRAGMENT_SHADER,P);i.attachShader(T,I),i.attachShader(T,j),n.index0AttributeName!==void 0?i.bindAttribLocation(T,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(T,0,"position"),i.linkProgram(T);function O(V){if(t.debug.checkShaderErrors){const G=i.getProgramInfoLog(T)||"",$=i.getShaderInfoLog(I)||"",ee=i.getShaderInfoLog(j)||"",te=G.trim(),K=$.trim(),X=ee.trim();let re=!0,ce=!0;if(i.getProgramParameter(T,i.LINK_STATUS)===!1)if(re=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,T,I,j);else{const de=aH(i,I,"vertex"),W=aH(i,j,"fragment");Bt("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(T,i.VALIDATE_STATUS)+`

Material Name: `+V.name+`
Material Type: `+V.type+`

Program Info Log: `+te+`
`+de+`
`+W)}else te!==""?yt("WebGLProgram: Program Info Log:",te):(K===""||X==="")&&(ce=!1);ce&&(V.diagnostics={runnable:re,programLog:te,vertexShader:{log:K,prefix:w},fragmentShader:{log:X,prefix:E}})}i.deleteShader(I),i.deleteShader(j),F=new e1(i,T),L=DCe(i,T)}let F;this.getUniforms=function(){return F===void 0&&O(this),F};let L;this.getAttributes=function(){return L===void 0&&O(this),L};let z=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return z===!1&&(z=i.getProgramParameter(T,ACe)),z},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(T),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=kCe++,this.cacheKey=e,this.usedTimes=1,this.program=T,this.vertexShader=I,this.fragmentShader=j,this}let ZCe=0;class QCe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),a=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new eRe(e),n.set(e,r)),r}}class eRe{constructor(e){this.id=ZCe++,this.code=e,this.usedTimes=0}}function tRe(t,e,n,r,i,a,s){const o=new vv,c=new QCe,u=new Set,h=[],m=new Map,v=i.logarithmicDepthBuffer;let x=i.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function T(L){return u.add(L),L===0?"uv":`uv${L}`}function w(L,z,V,G,$){const ee=G.fog,te=$.geometry,K=L.isMeshStandardMaterial?G.environment:null,X=(L.isMeshStandardMaterial?n:e).get(L.envMap||K),re=X&&X.mapping===Ov?X.image.height:null,ce=_[L.type];L.precision!==null&&(x=i.getMaxPrecision(L.precision),x!==L.precision&&yt("WebGLProgram.getParameters:",L.precision,"not supported, using",x,"instead."));const de=te.morphAttributes.position||te.morphAttributes.normal||te.morphAttributes.color,W=de!==void 0?de.length:0;let ae=0;te.morphAttributes.position!==void 0&&(ae=1),te.morphAttributes.normal!==void 0&&(ae=2),te.morphAttributes.color!==void 0&&(ae=3);let me,Ie,Xe,ve;if(ce){const Ln=Ol[ce];me=Ln.vertexShader,Ie=Ln.fragmentShader}else me=L.vertexShader,Ie=L.fragmentShader,c.update(L),Xe=c.getVertexShaderID(L),ve=c.getFragmentShaderID(L);const _e=t.getRenderTarget(),Ye=t.state.buffers.depth.getReversed(),ke=$.isInstancedMesh===!0,qe=$.isBatchedMesh===!0,pt=!!L.map,Ue=!!L.matcap,xt=!!X,Me=!!L.aoMap,Fe=!!L.lightMap,Le=!!L.bumpMap,Qe=!!L.normalMap,ie=!!L.displacementMap,Nt=!!L.emissiveMap,ft=!!L.metalnessMap,Ct=!!L.roughnessMap,et=L.anisotropy>0,ne=L.clearcoat>0,q=L.dispersion>0,he=L.iridescence>0,Oe=L.sheen>0,Ge=L.transmission>0,je=et&&!!L.anisotropyMap,wt=ne&&!!L.clearcoatMap,ot=ne&&!!L.clearcoatNormalMap,Rt=ne&&!!L.clearcoatRoughnessMap,Vt=he&&!!L.iridescenceMap,Je=he&&!!L.iridescenceThicknessMap,it=Oe&&!!L.sheenColorMap,St=Oe&&!!L.sheenRoughnessMap,_t=!!L.specularMap,ht=!!L.specularColorMap,pn=!!L.specularIntensityMap,pe=Ge&&!!L.transmissionMap,mt=Ge&&!!L.thicknessMap,rt=!!L.gradientMap,vt=!!L.alphaMap,Ze=L.alphaTest>0,He=!!L.alphaHash,ct=!!L.extensions;let en=Xo;L.toneMapped&&(_e===null||_e.isXRRenderTarget===!0)&&(en=t.toneMapping);const On={shaderID:ce,shaderType:L.type,shaderName:L.name,vertexShader:me,fragmentShader:Ie,defines:L.defines,customVertexShaderID:Xe,customFragmentShaderID:ve,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:x,batching:qe,batchingColor:qe&&$._colorsTexture!==null,instancing:ke,instancingColor:ke&&$.instanceColor!==null,instancingMorph:ke&&$.morphTexture!==null,outputColorSpace:_e===null?t.outputColorSpace:_e.isXRRenderTarget===!0?_e.texture.colorSpace:_f,alphaToCoverage:!!L.alphaToCoverage,map:pt,matcap:Ue,envMap:xt,envMapMode:xt&&X.mapping,envMapCubeUVHeight:re,aoMap:Me,lightMap:Fe,bumpMap:Le,normalMap:Qe,displacementMap:ie,emissiveMap:Nt,normalMapObjectSpace:Qe&&L.normalMapType===oW,normalMapTangentSpace:Qe&&L.normalMapType===Nf,metalnessMap:ft,roughnessMap:Ct,anisotropy:et,anisotropyMap:je,clearcoat:ne,clearcoatMap:wt,clearcoatNormalMap:ot,clearcoatRoughnessMap:Rt,dispersion:q,iridescence:he,iridescenceMap:Vt,iridescenceThicknessMap:Je,sheen:Oe,sheenColorMap:it,sheenRoughnessMap:St,specularMap:_t,specularColorMap:ht,specularIntensityMap:pn,transmission:Ge,transmissionMap:pe,thicknessMap:mt,gradientMap:rt,opaque:L.transparent===!1&&L.blending===ip&&L.alphaToCoverage===!1,alphaMap:vt,alphaTest:Ze,alphaHash:He,combine:L.combine,mapUv:pt&&T(L.map.channel),aoMapUv:Me&&T(L.aoMap.channel),lightMapUv:Fe&&T(L.lightMap.channel),bumpMapUv:Le&&T(L.bumpMap.channel),normalMapUv:Qe&&T(L.normalMap.channel),displacementMapUv:ie&&T(L.displacementMap.channel),emissiveMapUv:Nt&&T(L.emissiveMap.channel),metalnessMapUv:ft&&T(L.metalnessMap.channel),roughnessMapUv:Ct&&T(L.roughnessMap.channel),anisotropyMapUv:je&&T(L.anisotropyMap.channel),clearcoatMapUv:wt&&T(L.clearcoatMap.channel),clearcoatNormalMapUv:ot&&T(L.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Rt&&T(L.clearcoatRoughnessMap.channel),iridescenceMapUv:Vt&&T(L.iridescenceMap.channel),iridescenceThicknessMapUv:Je&&T(L.iridescenceThicknessMap.channel),sheenColorMapUv:it&&T(L.sheenColorMap.channel),sheenRoughnessMapUv:St&&T(L.sheenRoughnessMap.channel),specularMapUv:_t&&T(L.specularMap.channel),specularColorMapUv:ht&&T(L.specularColorMap.channel),specularIntensityMapUv:pn&&T(L.specularIntensityMap.channel),transmissionMapUv:pe&&T(L.transmissionMap.channel),thicknessMapUv:mt&&T(L.thicknessMap.channel),alphaMapUv:vt&&T(L.alphaMap.channel),vertexTangents:!!te.attributes.tangent&&(Qe||et),vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!te.attributes.color&&te.attributes.color.itemSize===4,pointsUvs:$.isPoints===!0&&!!te.attributes.uv&&(pt||vt),fog:!!ee,useFog:L.fog===!0,fogExp2:!!ee&&ee.isFogExp2,flatShading:L.flatShading===!0&&L.wireframe===!1,sizeAttenuation:L.sizeAttenuation===!0,logarithmicDepthBuffer:v,reversedDepthBuffer:Ye,skinning:$.isSkinnedMesh===!0,morphTargets:te.morphAttributes.position!==void 0,morphNormals:te.morphAttributes.normal!==void 0,morphColors:te.morphAttributes.color!==void 0,morphTargetsCount:W,morphTextureStride:ae,numDirLights:z.directional.length,numPointLights:z.point.length,numSpotLights:z.spot.length,numSpotLightMaps:z.spotLightMap.length,numRectAreaLights:z.rectArea.length,numHemiLights:z.hemi.length,numDirLightShadows:z.directionalShadowMap.length,numPointLightShadows:z.pointShadowMap.length,numSpotLightShadows:z.spotShadowMap.length,numSpotLightShadowsWithMaps:z.numSpotLightShadowsWithMaps,numLightProbes:z.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:L.dithering,shadowMapEnabled:t.shadowMap.enabled&&V.length>0,shadowMapType:t.shadowMap.type,toneMapping:en,decodeVideoTexture:pt&&L.map.isVideoTexture===!0&&Fn.getTransfer(L.map.colorSpace)===or,decodeVideoTextureEmissive:Nt&&L.emissiveMap.isVideoTexture===!0&&Fn.getTransfer(L.emissiveMap.colorSpace)===or,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===Mc,flipSided:L.side===ps,useDepthPacking:L.depthPacking>=0,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionClipCullDistance:ct&&L.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ct&&L.extensions.multiDraw===!0||qe)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:L.customProgramCacheKey()};return On.vertexUv1s=u.has(1),On.vertexUv2s=u.has(2),On.vertexUv3s=u.has(3),u.clear(),On}function E(L){const z=[];if(L.shaderID?z.push(L.shaderID):(z.push(L.customVertexShaderID),z.push(L.customFragmentShaderID)),L.defines!==void 0)for(const V in L.defines)z.push(V),z.push(L.defines[V]);return L.isRawShaderMaterial===!1&&(N(z,L),C(z,L),z.push(t.outputColorSpace)),z.push(L.customProgramCacheKey),z.join()}function N(L,z){L.push(z.precision),L.push(z.outputColorSpace),L.push(z.envMapMode),L.push(z.envMapCubeUVHeight),L.push(z.mapUv),L.push(z.alphaMapUv),L.push(z.lightMapUv),L.push(z.aoMapUv),L.push(z.bumpMapUv),L.push(z.normalMapUv),L.push(z.displacementMapUv),L.push(z.emissiveMapUv),L.push(z.metalnessMapUv),L.push(z.roughnessMapUv),L.push(z.anisotropyMapUv),L.push(z.clearcoatMapUv),L.push(z.clearcoatNormalMapUv),L.push(z.clearcoatRoughnessMapUv),L.push(z.iridescenceMapUv),L.push(z.iridescenceThicknessMapUv),L.push(z.sheenColorMapUv),L.push(z.sheenRoughnessMapUv),L.push(z.specularMapUv),L.push(z.specularColorMapUv),L.push(z.specularIntensityMapUv),L.push(z.transmissionMapUv),L.push(z.thicknessMapUv),L.push(z.combine),L.push(z.fogExp2),L.push(z.sizeAttenuation),L.push(z.morphTargetsCount),L.push(z.morphAttributeCount),L.push(z.numDirLights),L.push(z.numPointLights),L.push(z.numSpotLights),L.push(z.numSpotLightMaps),L.push(z.numHemiLights),L.push(z.numRectAreaLights),L.push(z.numDirLightShadows),L.push(z.numPointLightShadows),L.push(z.numSpotLightShadows),L.push(z.numSpotLightShadowsWithMaps),L.push(z.numLightProbes),L.push(z.shadowMapType),L.push(z.toneMapping),L.push(z.numClippingPlanes),L.push(z.numClipIntersection),L.push(z.depthPacking)}function C(L,z){o.disableAll(),z.instancing&&o.enable(0),z.instancingColor&&o.enable(1),z.instancingMorph&&o.enable(2),z.matcap&&o.enable(3),z.envMap&&o.enable(4),z.normalMapObjectSpace&&o.enable(5),z.normalMapTangentSpace&&o.enable(6),z.clearcoat&&o.enable(7),z.iridescence&&o.enable(8),z.alphaTest&&o.enable(9),z.vertexColors&&o.enable(10),z.vertexAlphas&&o.enable(11),z.vertexUv1s&&o.enable(12),z.vertexUv2s&&o.enable(13),z.vertexUv3s&&o.enable(14),z.vertexTangents&&o.enable(15),z.anisotropy&&o.enable(16),z.alphaHash&&o.enable(17),z.batching&&o.enable(18),z.dispersion&&o.enable(19),z.batchingColor&&o.enable(20),z.gradientMap&&o.enable(21),L.push(o.mask),o.disableAll(),z.fog&&o.enable(0),z.useFog&&o.enable(1),z.flatShading&&o.enable(2),z.logarithmicDepthBuffer&&o.enable(3),z.reversedDepthBuffer&&o.enable(4),z.skinning&&o.enable(5),z.morphTargets&&o.enable(6),z.morphNormals&&o.enable(7),z.morphColors&&o.enable(8),z.premultipliedAlpha&&o.enable(9),z.shadowMapEnabled&&o.enable(10),z.doubleSided&&o.enable(11),z.flipSided&&o.enable(12),z.useDepthPacking&&o.enable(13),z.dithering&&o.enable(14),z.transmission&&o.enable(15),z.sheen&&o.enable(16),z.opaque&&o.enable(17),z.pointsUvs&&o.enable(18),z.decodeVideoTexture&&o.enable(19),z.decodeVideoTextureEmissive&&o.enable(20),z.alphaToCoverage&&o.enable(21),L.push(o.mask)}function P(L){const z=_[L.type];let V;if(z){const G=Ol[z];V=bW.clone(G.uniforms)}else V=L.uniforms;return V}function I(L,z){let V=m.get(z);return V!==void 0?++V.usedTimes:(V=new JCe(t,z,L,a),h.push(V),m.set(z,V)),V}function j(L){if(--L.usedTimes===0){const z=h.indexOf(L);h[z]=h[h.length-1],h.pop(),m.delete(L.cacheKey),L.destroy()}}function O(L){c.remove(L)}function F(){c.dispose()}return{getParameters:w,getProgramCacheKey:E,getUniforms:P,acquireProgram:I,releaseProgram:j,releaseShaderCache:O,programs:h,dispose:F}}function nRe(){let t=new WeakMap;function e(s){return t.has(s)}function n(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function r(s){t.delete(s)}function i(s,o,c){t.get(s)[o]=c}function a(){t=new WeakMap}return{has:e,get:n,remove:r,update:i,dispose:a}}function rRe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function uH(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function dH(){const t=[];let e=0;const n=[],r=[],i=[];function a(){e=0,n.length=0,r.length=0,i.length=0}function s(m,v,x,_,T,w){let E=t[e];return E===void 0?(E={id:m.id,object:m,geometry:v,material:x,groupOrder:_,renderOrder:m.renderOrder,z:T,group:w},t[e]=E):(E.id=m.id,E.object=m,E.geometry=v,E.material=x,E.groupOrder=_,E.renderOrder=m.renderOrder,E.z=T,E.group=w),e++,E}function o(m,v,x,_,T,w){const E=s(m,v,x,_,T,w);x.transmission>0?r.push(E):x.transparent===!0?i.push(E):n.push(E)}function c(m,v,x,_,T,w){const E=s(m,v,x,_,T,w);x.transmission>0?r.unshift(E):x.transparent===!0?i.unshift(E):n.unshift(E)}function u(m,v){n.length>1&&n.sort(m||rRe),r.length>1&&r.sort(v||uH),i.length>1&&i.sort(v||uH)}function h(){for(let m=e,v=t.length;m<v;m++){const x=t[m];if(x.id===null)break;x.id=null,x.object=null,x.geometry=null,x.material=null,x.group=null}}return{opaque:n,transmissive:r,transparent:i,init:a,push:o,unshift:c,finish:h,sort:u}}function iRe(){let t=new WeakMap;function e(r,i){const a=t.get(r);let s;return a===void 0?(s=new dH,t.set(r,[s])):i>=a.length?(s=new dH,a.push(s)):s=a[i],s}function n(){t=new WeakMap}return{get:e,dispose:n}}function aRe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new se,color:new kt};break;case"SpotLight":n={position:new se,direction:new se,color:new kt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new se,color:new kt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new se,skyColor:new kt,groundColor:new kt};break;case"RectAreaLight":n={color:new kt,position:new se,halfWidth:new se,halfHeight:new se};break}return t[e.id]=n,n}}}function sRe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let oRe=0;function lRe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function cRe(t){const e=new aRe,n=sRe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new se);const i=new se,a=new an,s=new an;function o(u){let h=0,m=0,v=0;for(let L=0;L<9;L++)r.probe[L].set(0,0,0);let x=0,_=0,T=0,w=0,E=0,N=0,C=0,P=0,I=0,j=0,O=0;u.sort(lRe);for(let L=0,z=u.length;L<z;L++){const V=u[L],G=V.color,$=V.intensity,ee=V.distance;let te=null;if(V.shadow&&V.shadow.map&&(V.shadow.map.texture.format===gp?te=V.shadow.map.texture:te=V.shadow.map.depthTexture||V.shadow.map.texture),V.isAmbientLight)h+=G.r*$,m+=G.g*$,v+=G.b*$;else if(V.isLightProbe){for(let K=0;K<9;K++)r.probe[K].addScaledVector(V.sh.coefficients[K],$);O++}else if(V.isDirectionalLight){const K=e.get(V);if(K.color.copy(V.color).multiplyScalar(V.intensity),V.castShadow){const X=V.shadow,re=n.get(V);re.shadowIntensity=X.intensity,re.shadowBias=X.bias,re.shadowNormalBias=X.normalBias,re.shadowRadius=X.radius,re.shadowMapSize=X.mapSize,r.directionalShadow[x]=re,r.directionalShadowMap[x]=te,r.directionalShadowMatrix[x]=V.shadow.matrix,N++}r.directional[x]=K,x++}else if(V.isSpotLight){const K=e.get(V);K.position.setFromMatrixPosition(V.matrixWorld),K.color.copy(G).multiplyScalar($),K.distance=ee,K.coneCos=Math.cos(V.angle),K.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),K.decay=V.decay,r.spot[T]=K;const X=V.shadow;if(V.map&&(r.spotLightMap[I]=V.map,I++,X.updateMatrices(V),V.castShadow&&j++),r.spotLightMatrix[T]=X.matrix,V.castShadow){const re=n.get(V);re.shadowIntensity=X.intensity,re.shadowBias=X.bias,re.shadowNormalBias=X.normalBias,re.shadowRadius=X.radius,re.shadowMapSize=X.mapSize,r.spotShadow[T]=re,r.spotShadowMap[T]=te,P++}T++}else if(V.isRectAreaLight){const K=e.get(V);K.color.copy(G).multiplyScalar($),K.halfWidth.set(V.width*.5,0,0),K.halfHeight.set(0,V.height*.5,0),r.rectArea[w]=K,w++}else if(V.isPointLight){const K=e.get(V);if(K.color.copy(V.color).multiplyScalar(V.intensity),K.distance=V.distance,K.decay=V.decay,V.castShadow){const X=V.shadow,re=n.get(V);re.shadowIntensity=X.intensity,re.shadowBias=X.bias,re.shadowNormalBias=X.normalBias,re.shadowRadius=X.radius,re.shadowMapSize=X.mapSize,re.shadowCameraNear=X.camera.near,re.shadowCameraFar=X.camera.far,r.pointShadow[_]=re,r.pointShadowMap[_]=te,r.pointShadowMatrix[_]=V.shadow.matrix,C++}r.point[_]=K,_++}else if(V.isHemisphereLight){const K=e.get(V);K.skyColor.copy(V.color).multiplyScalar($),K.groundColor.copy(V.groundColor).multiplyScalar($),r.hemi[E]=K,E++}}w>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=bt.LTC_FLOAT_1,r.rectAreaLTC2=bt.LTC_FLOAT_2):(r.rectAreaLTC1=bt.LTC_HALF_1,r.rectAreaLTC2=bt.LTC_HALF_2)),r.ambient[0]=h,r.ambient[1]=m,r.ambient[2]=v;const F=r.hash;(F.directionalLength!==x||F.pointLength!==_||F.spotLength!==T||F.rectAreaLength!==w||F.hemiLength!==E||F.numDirectionalShadows!==N||F.numPointShadows!==C||F.numSpotShadows!==P||F.numSpotMaps!==I||F.numLightProbes!==O)&&(r.directional.length=x,r.spot.length=T,r.rectArea.length=w,r.point.length=_,r.hemi.length=E,r.directionalShadow.length=N,r.directionalShadowMap.length=N,r.pointShadow.length=C,r.pointShadowMap.length=C,r.spotShadow.length=P,r.spotShadowMap.length=P,r.directionalShadowMatrix.length=N,r.pointShadowMatrix.length=C,r.spotLightMatrix.length=P+I-j,r.spotLightMap.length=I,r.numSpotLightShadowsWithMaps=j,r.numLightProbes=O,F.directionalLength=x,F.pointLength=_,F.spotLength=T,F.rectAreaLength=w,F.hemiLength=E,F.numDirectionalShadows=N,F.numPointShadows=C,F.numSpotShadows=P,F.numSpotMaps=I,F.numLightProbes=O,r.version=oRe++)}function c(u,h){let m=0,v=0,x=0,_=0,T=0;const w=h.matrixWorldInverse;for(let E=0,N=u.length;E<N;E++){const C=u[E];if(C.isDirectionalLight){const P=r.directional[m];P.direction.setFromMatrixPosition(C.matrixWorld),i.setFromMatrixPosition(C.target.matrixWorld),P.direction.sub(i),P.direction.transformDirection(w),m++}else if(C.isSpotLight){const P=r.spot[x];P.position.setFromMatrixPosition(C.matrixWorld),P.position.applyMatrix4(w),P.direction.setFromMatrixPosition(C.matrixWorld),i.setFromMatrixPosition(C.target.matrixWorld),P.direction.sub(i),P.direction.transformDirection(w),x++}else if(C.isRectAreaLight){const P=r.rectArea[_];P.position.setFromMatrixPosition(C.matrixWorld),P.position.applyMatrix4(w),s.identity(),a.copy(C.matrixWorld),a.premultiply(w),s.extractRotation(a),P.halfWidth.set(C.width*.5,0,0),P.halfHeight.set(0,C.height*.5,0),P.halfWidth.applyMatrix4(s),P.halfHeight.applyMatrix4(s),_++}else if(C.isPointLight){const P=r.point[v];P.position.setFromMatrixPosition(C.matrixWorld),P.position.applyMatrix4(w),v++}else if(C.isHemisphereLight){const P=r.hemi[T];P.direction.setFromMatrixPosition(C.matrixWorld),P.direction.transformDirection(w),T++}}}return{setup:o,setupView:c,state:r}}function fH(t){const e=new cRe(t),n=[],r=[];function i(h){u.camera=h,n.length=0,r.length=0}function a(h){n.push(h)}function s(h){r.push(h)}function o(){e.setup(n)}function c(h){e.setupView(n,h)}const u={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:u,setupLights:o,setupLightsView:c,pushLight:a,pushShadow:s}}function uRe(t){let e=new WeakMap;function n(i,a=0){const s=e.get(i);let o;return s===void 0?(o=new fH(t),e.set(i,[o])):a>=s.length?(o=new fH(t),s.push(o)):o=s[a],o}function r(){e=new WeakMap}return{get:n,dispose:r}}const dRe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fRe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,hRe=[new se(1,0,0),new se(-1,0,0),new se(0,1,0),new se(0,-1,0),new se(0,0,1),new se(0,0,-1)],pRe=[new se(0,-1,0),new se(0,-1,0),new se(0,0,1),new se(0,0,-1),new se(0,-1,0),new se(0,-1,0)],hH=new an,Dy=new se,BI=new se;function mRe(t,e,n){let r=new Dv;const i=new We,a=new We,s=new br,o=new bD,c=new _D,u={},h=n.maxTextureSize,m={[Yu]:ps,[ps]:Yu,[Mc]:Mc},v=new Gs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new We},radius:{value:4}},vertexShader:dRe,fragmentShader:fRe}),x=v.clone();x.defines.HORIZONTAL_PASS=1;const _=new hn;_.setAttribute("position",new gr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const T=new Ii(_,v),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=zg;let E=this.type;this.render=function(j,O,F){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||j.length===0)return;j.type===rx&&(yt("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),j.type=zg);const L=t.getRenderTarget(),z=t.getActiveCubeFace(),V=t.getActiveMipmapLevel(),G=t.state;G.setBlending(Oc),G.buffers.depth.getReversed()===!0?G.buffers.color.setClear(0,0,0,0):G.buffers.color.setClear(1,1,1,1),G.buffers.depth.setTest(!0),G.setScissorTest(!1);const $=E!==this.type;$&&O.traverse(function(ee){ee.material&&(Array.isArray(ee.material)?ee.material.forEach(te=>te.needsUpdate=!0):ee.material.needsUpdate=!0)});for(let ee=0,te=j.length;ee<te;ee++){const K=j[ee],X=K.shadow;if(X===void 0){yt("WebGLShadowMap:",K,"has no shadow.");continue}if(X.autoUpdate===!1&&X.needsUpdate===!1)continue;i.copy(X.mapSize);const re=X.getFrameExtents();if(i.multiply(re),a.copy(X.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(a.x=Math.floor(h/re.x),i.x=a.x*re.x,X.mapSize.x=a.x),i.y>h&&(a.y=Math.floor(h/re.y),i.y=a.y*re.y,X.mapSize.y=a.y)),X.map===null||$===!0){if(X.map!==null&&(X.map.depthTexture!==null&&(X.map.depthTexture.dispose(),X.map.depthTexture=null),X.map.dispose()),this.type===Jh){if(K.isPointLight){yt("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}X.map=new Hs(i.x,i.y,{format:gp,type:Fl,minFilter:wr,magFilter:wr,generateMipmaps:!1}),X.map.texture.name=K.name+".shadowMap",X.map.depthTexture=new yp(i.x,i.y,ra),X.map.depthTexture.name=K.name+".shadowMapDepth",X.map.depthTexture.format=Uc,X.map.depthTexture.compareFunction=null,X.map.depthTexture.minFilter=ti,X.map.depthTexture.magFilter=ti}else{K.isPointLight?(X.map=new oD(i.x),X.map.depthTexture=new RW(i.x,tl)):(X.map=new Hs(i.x,i.y),X.map.depthTexture=new yp(i.x,i.y,tl)),X.map.depthTexture.name=K.name+".shadowMap",X.map.depthTexture.format=Uc;const de=t.state.buffers.depth.getReversed();this.type===zg?(X.map.depthTexture.compareFunction=de?bA:xA,X.map.depthTexture.minFilter=wr,X.map.depthTexture.magFilter=wr):(X.map.depthTexture.compareFunction=null,X.map.depthTexture.minFilter=ti,X.map.depthTexture.magFilter=ti)}X.camera.updateProjectionMatrix()}const ce=X.map.isWebGLCubeRenderTarget?6:1;for(let de=0;de<ce;de++){if(X.map.isWebGLCubeRenderTarget)t.setRenderTarget(X.map,de),t.clear();else{de===0&&(t.setRenderTarget(X.map),t.clear());const W=X.getViewport(de);s.set(a.x*W.x,a.y*W.y,a.x*W.z,a.y*W.w),G.viewport(s)}if(K.isPointLight){const W=X.camera,ae=X.matrix,me=K.distance||W.far;me!==W.far&&(W.far=me,W.updateProjectionMatrix()),Dy.setFromMatrixPosition(K.matrixWorld),W.position.copy(Dy),BI.copy(W.position),BI.add(hRe[de]),W.up.copy(pRe[de]),W.lookAt(BI),W.updateMatrixWorld(),ae.makeTranslation(-Dy.x,-Dy.y,-Dy.z),hH.multiplyMatrices(W.projectionMatrix,W.matrixWorldInverse),X._frustum.setFromProjectionMatrix(hH,W.coordinateSystem,W.reversedDepth)}else X.updateMatrices(K);r=X.getFrustum(),P(O,F,X.camera,K,this.type)}X.isPointLightShadow!==!0&&this.type===Jh&&N(X,F),X.needsUpdate=!1}E=this.type,w.needsUpdate=!1,t.setRenderTarget(L,z,V)};function N(j,O){const F=e.update(T);v.defines.VSM_SAMPLES!==j.blurSamples&&(v.defines.VSM_SAMPLES=j.blurSamples,x.defines.VSM_SAMPLES=j.blurSamples,v.needsUpdate=!0,x.needsUpdate=!0),j.mapPass===null&&(j.mapPass=new Hs(i.x,i.y,{format:gp,type:Fl})),v.uniforms.shadow_pass.value=j.map.depthTexture,v.uniforms.resolution.value=j.mapSize,v.uniforms.radius.value=j.radius,t.setRenderTarget(j.mapPass),t.clear(),t.renderBufferDirect(O,null,F,v,T,null),x.uniforms.shadow_pass.value=j.mapPass.texture,x.uniforms.resolution.value=j.mapSize,x.uniforms.radius.value=j.radius,t.setRenderTarget(j.map),t.clear(),t.renderBufferDirect(O,null,F,x,T,null)}function C(j,O,F,L){let z=null;const V=F.isPointLight===!0?j.customDistanceMaterial:j.customDepthMaterial;if(V!==void 0)z=V;else if(z=F.isPointLight===!0?c:o,t.localClippingEnabled&&O.clipShadows===!0&&Array.isArray(O.clippingPlanes)&&O.clippingPlanes.length!==0||O.displacementMap&&O.displacementScale!==0||O.alphaMap&&O.alphaTest>0||O.map&&O.alphaTest>0||O.alphaToCoverage===!0){const G=z.uuid,$=O.uuid;let ee=u[G];ee===void 0&&(ee={},u[G]=ee);let te=ee[$];te===void 0&&(te=z.clone(),ee[$]=te,O.addEventListener("dispose",I)),z=te}if(z.visible=O.visible,z.wireframe=O.wireframe,L===Jh?z.side=O.shadowSide!==null?O.shadowSide:O.side:z.side=O.shadowSide!==null?O.shadowSide:m[O.side],z.alphaMap=O.alphaMap,z.alphaTest=O.alphaToCoverage===!0?.5:O.alphaTest,z.map=O.map,z.clipShadows=O.clipShadows,z.clippingPlanes=O.clippingPlanes,z.clipIntersection=O.clipIntersection,z.displacementMap=O.displacementMap,z.displacementScale=O.displacementScale,z.displacementBias=O.displacementBias,z.wireframeLinewidth=O.wireframeLinewidth,z.linewidth=O.linewidth,F.isPointLight===!0&&z.isMeshDistanceMaterial===!0){const G=t.properties.get(z);G.light=F}return z}function P(j,O,F,L,z){if(j.visible===!1)return;if(j.layers.test(O.layers)&&(j.isMesh||j.isLine||j.isPoints)&&(j.castShadow||j.receiveShadow&&z===Jh)&&(!j.frustumCulled||r.intersectsObject(j))){j.modelViewMatrix.multiplyMatrices(F.matrixWorldInverse,j.matrixWorld);const $=e.update(j),ee=j.material;if(Array.isArray(ee)){const te=$.groups;for(let K=0,X=te.length;K<X;K++){const re=te[K],ce=ee[re.materialIndex];if(ce&&ce.visible){const de=C(j,ce,L,z);j.onBeforeShadow(t,j,O,F,$,de,re),t.renderBufferDirect(F,null,$,de,j,re),j.onAfterShadow(t,j,O,F,$,de,re)}}}else if(ee.visible){const te=C(j,ee,L,z);j.onBeforeShadow(t,j,O,F,$,te,null),t.renderBufferDirect(F,null,$,te,j,null),j.onAfterShadow(t,j,O,F,$,te,null)}}const G=j.children;for(let $=0,ee=G.length;$<ee;$++)P(G[$],O,F,L,z)}function I(j){j.target.removeEventListener("dispose",I);for(const F in u){const L=u[F],z=j.target.uuid;z in L&&(L[z].dispose(),delete L[z])}}}const gRe={[pT]:mT,[gT]:xT,[vT]:bT,[mp]:yT,[mT]:pT,[xT]:gT,[bT]:vT,[yT]:mp};function vRe(t,e){function n(){let pe=!1;const mt=new br;let rt=null;const vt=new br(0,0,0,0);return{setMask:function(Ze){rt!==Ze&&!pe&&(t.colorMask(Ze,Ze,Ze,Ze),rt=Ze)},setLocked:function(Ze){pe=Ze},setClear:function(Ze,He,ct,en,On){On===!0&&(Ze*=en,He*=en,ct*=en),mt.set(Ze,He,ct,en),vt.equals(mt)===!1&&(t.clearColor(Ze,He,ct,en),vt.copy(mt))},reset:function(){pe=!1,rt=null,vt.set(-1,0,0,0)}}}function r(){let pe=!1,mt=!1,rt=null,vt=null,Ze=null;return{setReversed:function(He){if(mt!==He){const ct=e.get("EXT_clip_control");He?ct.clipControlEXT(ct.LOWER_LEFT_EXT,ct.ZERO_TO_ONE_EXT):ct.clipControlEXT(ct.LOWER_LEFT_EXT,ct.NEGATIVE_ONE_TO_ONE_EXT),mt=He;const en=Ze;Ze=null,this.setClear(en)}},getReversed:function(){return mt},setTest:function(He){He?_e(t.DEPTH_TEST):Ye(t.DEPTH_TEST)},setMask:function(He){rt!==He&&!pe&&(t.depthMask(He),rt=He)},setFunc:function(He){if(mt&&(He=gRe[He]),vt!==He){switch(He){case pT:t.depthFunc(t.NEVER);break;case mT:t.depthFunc(t.ALWAYS);break;case gT:t.depthFunc(t.LESS);break;case mp:t.depthFunc(t.LEQUAL);break;case vT:t.depthFunc(t.EQUAL);break;case yT:t.depthFunc(t.GEQUAL);break;case xT:t.depthFunc(t.GREATER);break;case bT:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}vt=He}},setLocked:function(He){pe=He},setClear:function(He){Ze!==He&&(mt&&(He=1-He),t.clearDepth(He),Ze=He)},reset:function(){pe=!1,rt=null,vt=null,Ze=null,mt=!1}}}function i(){let pe=!1,mt=null,rt=null,vt=null,Ze=null,He=null,ct=null,en=null,On=null;return{setTest:function(Ln){pe||(Ln?_e(t.STENCIL_TEST):Ye(t.STENCIL_TEST))},setMask:function(Ln){mt!==Ln&&!pe&&(t.stencilMask(Ln),mt=Ln)},setFunc:function(Ln,Pi,Ta){(rt!==Ln||vt!==Pi||Ze!==Ta)&&(t.stencilFunc(Ln,Pi,Ta),rt=Ln,vt=Pi,Ze=Ta)},setOp:function(Ln,Pi,Ta){(He!==Ln||ct!==Pi||en!==Ta)&&(t.stencilOp(Ln,Pi,Ta),He=Ln,ct=Pi,en=Ta)},setLocked:function(Ln){pe=Ln},setClear:function(Ln){On!==Ln&&(t.clearStencil(Ln),On=Ln)},reset:function(){pe=!1,mt=null,rt=null,vt=null,Ze=null,He=null,ct=null,en=null,On=null}}}const a=new n,s=new r,o=new i,c=new WeakMap,u=new WeakMap;let h={},m={},v=new WeakMap,x=[],_=null,T=!1,w=null,E=null,N=null,C=null,P=null,I=null,j=null,O=new kt(0,0,0),F=0,L=!1,z=null,V=null,G=null,$=null,ee=null;const te=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let K=!1,X=0;const re=t.getParameter(t.VERSION);re.indexOf("WebGL")!==-1?(X=parseFloat(/^WebGL (\d)/.exec(re)[1]),K=X>=1):re.indexOf("OpenGL ES")!==-1&&(X=parseFloat(/^OpenGL ES (\d)/.exec(re)[1]),K=X>=2);let ce=null,de={};const W=t.getParameter(t.SCISSOR_BOX),ae=t.getParameter(t.VIEWPORT),me=new br().fromArray(W),Ie=new br().fromArray(ae);function Xe(pe,mt,rt,vt){const Ze=new Uint8Array(4),He=t.createTexture();t.bindTexture(pe,He),t.texParameteri(pe,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(pe,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let ct=0;ct<rt;ct++)pe===t.TEXTURE_3D||pe===t.TEXTURE_2D_ARRAY?t.texImage3D(mt,0,t.RGBA,1,1,vt,0,t.RGBA,t.UNSIGNED_BYTE,Ze):t.texImage2D(mt+ct,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,Ze);return He}const ve={};ve[t.TEXTURE_2D]=Xe(t.TEXTURE_2D,t.TEXTURE_2D,1),ve[t.TEXTURE_CUBE_MAP]=Xe(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),ve[t.TEXTURE_2D_ARRAY]=Xe(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),ve[t.TEXTURE_3D]=Xe(t.TEXTURE_3D,t.TEXTURE_3D,1,1),a.setClear(0,0,0,1),s.setClear(1),o.setClear(0),_e(t.DEPTH_TEST),s.setFunc(mp),Le(!1),Qe(X3),_e(t.CULL_FACE),Me(Oc);function _e(pe){h[pe]!==!0&&(t.enable(pe),h[pe]=!0)}function Ye(pe){h[pe]!==!1&&(t.disable(pe),h[pe]=!1)}function ke(pe,mt){return m[pe]!==mt?(t.bindFramebuffer(pe,mt),m[pe]=mt,pe===t.DRAW_FRAMEBUFFER&&(m[t.FRAMEBUFFER]=mt),pe===t.FRAMEBUFFER&&(m[t.DRAW_FRAMEBUFFER]=mt),!0):!1}function qe(pe,mt){let rt=x,vt=!1;if(pe){rt=v.get(mt),rt===void 0&&(rt=[],v.set(mt,rt));const Ze=pe.textures;if(rt.length!==Ze.length||rt[0]!==t.COLOR_ATTACHMENT0){for(let He=0,ct=Ze.length;He<ct;He++)rt[He]=t.COLOR_ATTACHMENT0+He;rt.length=Ze.length,vt=!0}}else rt[0]!==t.BACK&&(rt[0]=t.BACK,vt=!0);vt&&t.drawBuffers(rt)}function pt(pe){return _!==pe?(t.useProgram(pe),_=pe,!0):!1}const Ue={[ff]:t.FUNC_ADD,[L7]:t.FUNC_SUBTRACT,[U7]:t.FUNC_REVERSE_SUBTRACT};Ue[z7]=t.MIN,Ue[B7]=t.MAX;const xt={[F7]:t.ZERO,[V7]:t.ONE,[H7]:t.SRC_COLOR,[fT]:t.SRC_ALPHA,[X7]:t.SRC_ALPHA_SATURATE,[W7]:t.DST_COLOR,[q7]:t.DST_ALPHA,[G7]:t.ONE_MINUS_SRC_COLOR,[hT]:t.ONE_MINUS_SRC_ALPHA,[K7]:t.ONE_MINUS_DST_COLOR,[$7]:t.ONE_MINUS_DST_ALPHA,[Y7]:t.CONSTANT_COLOR,[J7]:t.ONE_MINUS_CONSTANT_COLOR,[Z7]:t.CONSTANT_ALPHA,[Q7]:t.ONE_MINUS_CONSTANT_ALPHA};function Me(pe,mt,rt,vt,Ze,He,ct,en,On,Ln){if(pe===Oc){T===!0&&(Ye(t.BLEND),T=!1);return}if(T===!1&&(_e(t.BLEND),T=!0),pe!==D7){if(pe!==w||Ln!==L){if((E!==ff||P!==ff)&&(t.blendEquation(t.FUNC_ADD),E=ff,P=ff),Ln)switch(pe){case ip:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Y3:t.blendFunc(t.ONE,t.ONE);break;case J3:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case Z3:t.blendFuncSeparate(t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ZERO,t.ONE);break;default:Bt("WebGLState: Invalid blending: ",pe);break}else switch(pe){case ip:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Y3:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE,t.ONE,t.ONE);break;case J3:Bt("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case Z3:Bt("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Bt("WebGLState: Invalid blending: ",pe);break}N=null,C=null,I=null,j=null,O.set(0,0,0),F=0,w=pe,L=Ln}return}Ze=Ze||mt,He=He||rt,ct=ct||vt,(mt!==E||Ze!==P)&&(t.blendEquationSeparate(Ue[mt],Ue[Ze]),E=mt,P=Ze),(rt!==N||vt!==C||He!==I||ct!==j)&&(t.blendFuncSeparate(xt[rt],xt[vt],xt[He],xt[ct]),N=rt,C=vt,I=He,j=ct),(en.equals(O)===!1||On!==F)&&(t.blendColor(en.r,en.g,en.b,On),O.copy(en),F=On),w=pe,L=!1}function Fe(pe,mt){pe.side===Mc?Ye(t.CULL_FACE):_e(t.CULL_FACE);let rt=pe.side===ps;mt&&(rt=!rt),Le(rt),pe.blending===ip&&pe.transparent===!1?Me(Oc):Me(pe.blending,pe.blendEquation,pe.blendSrc,pe.blendDst,pe.blendEquationAlpha,pe.blendSrcAlpha,pe.blendDstAlpha,pe.blendColor,pe.blendAlpha,pe.premultipliedAlpha),s.setFunc(pe.depthFunc),s.setTest(pe.depthTest),s.setMask(pe.depthWrite),a.setMask(pe.colorWrite);const vt=pe.stencilWrite;o.setTest(vt),vt&&(o.setMask(pe.stencilWriteMask),o.setFunc(pe.stencilFunc,pe.stencilRef,pe.stencilFuncMask),o.setOp(pe.stencilFail,pe.stencilZFail,pe.stencilZPass)),Nt(pe.polygonOffset,pe.polygonOffsetFactor,pe.polygonOffsetUnits),pe.alphaToCoverage===!0?_e(t.SAMPLE_ALPHA_TO_COVERAGE):Ye(t.SAMPLE_ALPHA_TO_COVERAGE)}function Le(pe){z!==pe&&(pe?t.frontFace(t.CW):t.frontFace(t.CCW),z=pe)}function Qe(pe){pe!==P7?(_e(t.CULL_FACE),pe!==V&&(pe===X3?t.cullFace(t.BACK):pe===O7?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Ye(t.CULL_FACE),V=pe}function ie(pe){pe!==G&&(K&&t.lineWidth(pe),G=pe)}function Nt(pe,mt,rt){pe?(_e(t.POLYGON_OFFSET_FILL),($!==mt||ee!==rt)&&(t.polygonOffset(mt,rt),$=mt,ee=rt)):Ye(t.POLYGON_OFFSET_FILL)}function ft(pe){pe?_e(t.SCISSOR_TEST):Ye(t.SCISSOR_TEST)}function Ct(pe){pe===void 0&&(pe=t.TEXTURE0+te-1),ce!==pe&&(t.activeTexture(pe),ce=pe)}function et(pe,mt,rt){rt===void 0&&(ce===null?rt=t.TEXTURE0+te-1:rt=ce);let vt=de[rt];vt===void 0&&(vt={type:void 0,texture:void 0},de[rt]=vt),(vt.type!==pe||vt.texture!==mt)&&(ce!==rt&&(t.activeTexture(rt),ce=rt),t.bindTexture(pe,mt||ve[pe]),vt.type=pe,vt.texture=mt)}function ne(){const pe=de[ce];pe!==void 0&&pe.type!==void 0&&(t.bindTexture(pe.type,null),pe.type=void 0,pe.texture=void 0)}function q(){try{t.compressedTexImage2D(...arguments)}catch(pe){Bt("WebGLState:",pe)}}function he(){try{t.compressedTexImage3D(...arguments)}catch(pe){Bt("WebGLState:",pe)}}function Oe(){try{t.texSubImage2D(...arguments)}catch(pe){Bt("WebGLState:",pe)}}function Ge(){try{t.texSubImage3D(...arguments)}catch(pe){Bt("WebGLState:",pe)}}function je(){try{t.compressedTexSubImage2D(...arguments)}catch(pe){Bt("WebGLState:",pe)}}function wt(){try{t.compressedTexSubImage3D(...arguments)}catch(pe){Bt("WebGLState:",pe)}}function ot(){try{t.texStorage2D(...arguments)}catch(pe){Bt("WebGLState:",pe)}}function Rt(){try{t.texStorage3D(...arguments)}catch(pe){Bt("WebGLState:",pe)}}function Vt(){try{t.texImage2D(...arguments)}catch(pe){Bt("WebGLState:",pe)}}function Je(){try{t.texImage3D(...arguments)}catch(pe){Bt("WebGLState:",pe)}}function it(pe){me.equals(pe)===!1&&(t.scissor(pe.x,pe.y,pe.z,pe.w),me.copy(pe))}function St(pe){Ie.equals(pe)===!1&&(t.viewport(pe.x,pe.y,pe.z,pe.w),Ie.copy(pe))}function _t(pe,mt){let rt=u.get(mt);rt===void 0&&(rt=new WeakMap,u.set(mt,rt));let vt=rt.get(pe);vt===void 0&&(vt=t.getUniformBlockIndex(mt,pe.name),rt.set(pe,vt))}function ht(pe,mt){const vt=u.get(mt).get(pe);c.get(mt)!==vt&&(t.uniformBlockBinding(mt,vt,pe.__bindingPointIndex),c.set(mt,vt))}function pn(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),s.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),h={},ce=null,de={},m={},v=new WeakMap,x=[],_=null,T=!1,w=null,E=null,N=null,C=null,P=null,I=null,j=null,O=new kt(0,0,0),F=0,L=!1,z=null,V=null,G=null,$=null,ee=null,me.set(0,0,t.canvas.width,t.canvas.height),Ie.set(0,0,t.canvas.width,t.canvas.height),a.reset(),s.reset(),o.reset()}return{buffers:{color:a,depth:s,stencil:o},enable:_e,disable:Ye,bindFramebuffer:ke,drawBuffers:qe,useProgram:pt,setBlending:Me,setMaterial:Fe,setFlipSided:Le,setCullFace:Qe,setLineWidth:ie,setPolygonOffset:Nt,setScissorTest:ft,activeTexture:Ct,bindTexture:et,unbindTexture:ne,compressedTexImage2D:q,compressedTexImage3D:he,texImage2D:Vt,texImage3D:Je,updateUBOMapping:_t,uniformBlockBinding:ht,texStorage2D:ot,texStorage3D:Rt,texSubImage2D:Oe,texSubImage3D:Ge,compressedTexSubImage2D:je,compressedTexSubImage3D:wt,scissor:it,viewport:St,reset:pn}}function yRe(t,e,n,r,i,a,s){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new We,h=new WeakMap;let m;const v=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(ne,q){return x?new OffscreenCanvas(ne,q):gb("canvas")}function T(ne,q,he){let Oe=1;const Ge=et(ne);if((Ge.width>he||Ge.height>he)&&(Oe=he/Math.max(Ge.width,Ge.height)),Oe<1)if(typeof HTMLImageElement<"u"&&ne instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ne instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ne instanceof ImageBitmap||typeof VideoFrame<"u"&&ne instanceof VideoFrame){const je=Math.floor(Oe*Ge.width),wt=Math.floor(Oe*Ge.height);m===void 0&&(m=_(je,wt));const ot=q?_(je,wt):m;return ot.width=je,ot.height=wt,ot.getContext("2d").drawImage(ne,0,0,je,wt),yt("WebGLRenderer: Texture has been resized from ("+Ge.width+"x"+Ge.height+") to ("+je+"x"+wt+")."),ot}else return"data"in ne&&yt("WebGLRenderer: Image in DataTexture is too big ("+Ge.width+"x"+Ge.height+")."),ne;return ne}function w(ne){return ne.generateMipmaps}function E(ne){t.generateMipmap(ne)}function N(ne){return ne.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:ne.isWebGL3DRenderTarget?t.TEXTURE_3D:ne.isWebGLArrayRenderTarget||ne.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function C(ne,q,he,Oe,Ge=!1){if(ne!==null){if(t[ne]!==void 0)return t[ne];yt("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ne+"'")}let je=q;if(q===t.RED&&(he===t.FLOAT&&(je=t.R32F),he===t.HALF_FLOAT&&(je=t.R16F),he===t.UNSIGNED_BYTE&&(je=t.R8)),q===t.RED_INTEGER&&(he===t.UNSIGNED_BYTE&&(je=t.R8UI),he===t.UNSIGNED_SHORT&&(je=t.R16UI),he===t.UNSIGNED_INT&&(je=t.R32UI),he===t.BYTE&&(je=t.R8I),he===t.SHORT&&(je=t.R16I),he===t.INT&&(je=t.R32I)),q===t.RG&&(he===t.FLOAT&&(je=t.RG32F),he===t.HALF_FLOAT&&(je=t.RG16F),he===t.UNSIGNED_BYTE&&(je=t.RG8)),q===t.RG_INTEGER&&(he===t.UNSIGNED_BYTE&&(je=t.RG8UI),he===t.UNSIGNED_SHORT&&(je=t.RG16UI),he===t.UNSIGNED_INT&&(je=t.RG32UI),he===t.BYTE&&(je=t.RG8I),he===t.SHORT&&(je=t.RG16I),he===t.INT&&(je=t.RG32I)),q===t.RGB_INTEGER&&(he===t.UNSIGNED_BYTE&&(je=t.RGB8UI),he===t.UNSIGNED_SHORT&&(je=t.RGB16UI),he===t.UNSIGNED_INT&&(je=t.RGB32UI),he===t.BYTE&&(je=t.RGB8I),he===t.SHORT&&(je=t.RGB16I),he===t.INT&&(je=t.RGB32I)),q===t.RGBA_INTEGER&&(he===t.UNSIGNED_BYTE&&(je=t.RGBA8UI),he===t.UNSIGNED_SHORT&&(je=t.RGBA16UI),he===t.UNSIGNED_INT&&(je=t.RGBA32UI),he===t.BYTE&&(je=t.RGBA8I),he===t.SHORT&&(je=t.RGBA16I),he===t.INT&&(je=t.RGBA32I)),q===t.RGB&&(he===t.UNSIGNED_INT_5_9_9_9_REV&&(je=t.RGB9_E5),he===t.UNSIGNED_INT_10F_11F_11F_REV&&(je=t.R11F_G11F_B10F)),q===t.RGBA){const wt=Ge?pb:Fn.getTransfer(Oe);he===t.FLOAT&&(je=t.RGBA32F),he===t.HALF_FLOAT&&(je=t.RGBA16F),he===t.UNSIGNED_BYTE&&(je=wt===or?t.SRGB8_ALPHA8:t.RGBA8),he===t.UNSIGNED_SHORT_4_4_4_4&&(je=t.RGBA4),he===t.UNSIGNED_SHORT_5_5_5_1&&(je=t.RGB5_A1)}return(je===t.R16F||je===t.R32F||je===t.RG16F||je===t.RG32F||je===t.RGBA16F||je===t.RGBA32F)&&e.get("EXT_color_buffer_float"),je}function P(ne,q){let he;return ne?q===null||q===tl||q===hv?he=t.DEPTH24_STENCIL8:q===ra?he=t.DEPTH32F_STENCIL8:q===fv&&(he=t.DEPTH24_STENCIL8,yt("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):q===null||q===tl||q===hv?he=t.DEPTH_COMPONENT24:q===ra?he=t.DEPTH_COMPONENT32F:q===fv&&(he=t.DEPTH_COMPONENT16),he}function I(ne,q){return w(ne)===!0||ne.isFramebufferTexture&&ne.minFilter!==ti&&ne.minFilter!==wr?Math.log2(Math.max(q.width,q.height))+1:ne.mipmaps!==void 0&&ne.mipmaps.length>0?ne.mipmaps.length:ne.isCompressedTexture&&Array.isArray(ne.image)?q.mipmaps.length:1}function j(ne){const q=ne.target;q.removeEventListener("dispose",j),F(q),q.isVideoTexture&&h.delete(q)}function O(ne){const q=ne.target;q.removeEventListener("dispose",O),z(q)}function F(ne){const q=r.get(ne);if(q.__webglInit===void 0)return;const he=ne.source,Oe=v.get(he);if(Oe){const Ge=Oe[q.__cacheKey];Ge.usedTimes--,Ge.usedTimes===0&&L(ne),Object.keys(Oe).length===0&&v.delete(he)}r.remove(ne)}function L(ne){const q=r.get(ne);t.deleteTexture(q.__webglTexture);const he=ne.source,Oe=v.get(he);delete Oe[q.__cacheKey],s.memory.textures--}function z(ne){const q=r.get(ne);if(ne.depthTexture&&(ne.depthTexture.dispose(),r.remove(ne.depthTexture)),ne.isWebGLCubeRenderTarget)for(let Oe=0;Oe<6;Oe++){if(Array.isArray(q.__webglFramebuffer[Oe]))for(let Ge=0;Ge<q.__webglFramebuffer[Oe].length;Ge++)t.deleteFramebuffer(q.__webglFramebuffer[Oe][Ge]);else t.deleteFramebuffer(q.__webglFramebuffer[Oe]);q.__webglDepthbuffer&&t.deleteRenderbuffer(q.__webglDepthbuffer[Oe])}else{if(Array.isArray(q.__webglFramebuffer))for(let Oe=0;Oe<q.__webglFramebuffer.length;Oe++)t.deleteFramebuffer(q.__webglFramebuffer[Oe]);else t.deleteFramebuffer(q.__webglFramebuffer);if(q.__webglDepthbuffer&&t.deleteRenderbuffer(q.__webglDepthbuffer),q.__webglMultisampledFramebuffer&&t.deleteFramebuffer(q.__webglMultisampledFramebuffer),q.__webglColorRenderbuffer)for(let Oe=0;Oe<q.__webglColorRenderbuffer.length;Oe++)q.__webglColorRenderbuffer[Oe]&&t.deleteRenderbuffer(q.__webglColorRenderbuffer[Oe]);q.__webglDepthRenderbuffer&&t.deleteRenderbuffer(q.__webglDepthRenderbuffer)}const he=ne.textures;for(let Oe=0,Ge=he.length;Oe<Ge;Oe++){const je=r.get(he[Oe]);je.__webglTexture&&(t.deleteTexture(je.__webglTexture),s.memory.textures--),r.remove(he[Oe])}r.remove(ne)}let V=0;function G(){V=0}function $(){const ne=V;return ne>=i.maxTextures&&yt("WebGLTextures: Trying to use "+ne+" texture units while this GPU supports only "+i.maxTextures),V+=1,ne}function ee(ne){const q=[];return q.push(ne.wrapS),q.push(ne.wrapT),q.push(ne.wrapR||0),q.push(ne.magFilter),q.push(ne.minFilter),q.push(ne.anisotropy),q.push(ne.internalFormat),q.push(ne.format),q.push(ne.type),q.push(ne.generateMipmaps),q.push(ne.premultiplyAlpha),q.push(ne.flipY),q.push(ne.unpackAlignment),q.push(ne.colorSpace),q.join()}function te(ne,q){const he=r.get(ne);if(ne.isVideoTexture&&ft(ne),ne.isRenderTargetTexture===!1&&ne.isExternalTexture!==!0&&ne.version>0&&he.__version!==ne.version){const Oe=ne.image;if(Oe===null)yt("WebGLRenderer: Texture marked for update but no image data found.");else if(Oe.complete===!1)yt("WebGLRenderer: Texture marked for update but image is incomplete");else{ve(he,ne,q);return}}else ne.isExternalTexture&&(he.__webglTexture=ne.sourceTexture?ne.sourceTexture:null);n.bindTexture(t.TEXTURE_2D,he.__webglTexture,t.TEXTURE0+q)}function K(ne,q){const he=r.get(ne);if(ne.isRenderTargetTexture===!1&&ne.version>0&&he.__version!==ne.version){ve(he,ne,q);return}else ne.isExternalTexture&&(he.__webglTexture=ne.sourceTexture?ne.sourceTexture:null);n.bindTexture(t.TEXTURE_2D_ARRAY,he.__webglTexture,t.TEXTURE0+q)}function X(ne,q){const he=r.get(ne);if(ne.isRenderTargetTexture===!1&&ne.version>0&&he.__version!==ne.version){ve(he,ne,q);return}n.bindTexture(t.TEXTURE_3D,he.__webglTexture,t.TEXTURE0+q)}function re(ne,q){const he=r.get(ne);if(ne.isCubeDepthTexture!==!0&&ne.version>0&&he.__version!==ne.version){_e(he,ne,q);return}n.bindTexture(t.TEXTURE_CUBE_MAP,he.__webglTexture,t.TEXTURE0+q)}const ce={[ub]:t.REPEAT,[Fs]:t.CLAMP_TO_EDGE,[db]:t.MIRRORED_REPEAT},de={[ti]:t.NEAREST,[Xj]:t.NEAREST_MIPMAP_NEAREST,[Cg]:t.NEAREST_MIPMAP_LINEAR,[wr]:t.LINEAR,[ix]:t.LINEAR_MIPMAP_NEAREST,[Cc]:t.LINEAR_MIPMAP_LINEAR},W={[lW]:t.NEVER,[hW]:t.ALWAYS,[cW]:t.LESS,[xA]:t.LEQUAL,[uW]:t.EQUAL,[bA]:t.GEQUAL,[dW]:t.GREATER,[fW]:t.NOTEQUAL};function ae(ne,q){if(q.type===ra&&e.has("OES_texture_float_linear")===!1&&(q.magFilter===wr||q.magFilter===ix||q.magFilter===Cg||q.magFilter===Cc||q.minFilter===wr||q.minFilter===ix||q.minFilter===Cg||q.minFilter===Cc)&&yt("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(ne,t.TEXTURE_WRAP_S,ce[q.wrapS]),t.texParameteri(ne,t.TEXTURE_WRAP_T,ce[q.wrapT]),(ne===t.TEXTURE_3D||ne===t.TEXTURE_2D_ARRAY)&&t.texParameteri(ne,t.TEXTURE_WRAP_R,ce[q.wrapR]),t.texParameteri(ne,t.TEXTURE_MAG_FILTER,de[q.magFilter]),t.texParameteri(ne,t.TEXTURE_MIN_FILTER,de[q.minFilter]),q.compareFunction&&(t.texParameteri(ne,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(ne,t.TEXTURE_COMPARE_FUNC,W[q.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(q.magFilter===ti||q.minFilter!==Cg&&q.minFilter!==Cc||q.type===ra&&e.has("OES_texture_float_linear")===!1)return;if(q.anisotropy>1||r.get(q).__currentAnisotropy){const he=e.get("EXT_texture_filter_anisotropic");t.texParameterf(ne,he.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(q.anisotropy,i.getMaxAnisotropy())),r.get(q).__currentAnisotropy=q.anisotropy}}}function me(ne,q){let he=!1;ne.__webglInit===void 0&&(ne.__webglInit=!0,q.addEventListener("dispose",j));const Oe=q.source;let Ge=v.get(Oe);Ge===void 0&&(Ge={},v.set(Oe,Ge));const je=ee(q);if(je!==ne.__cacheKey){Ge[je]===void 0&&(Ge[je]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,he=!0),Ge[je].usedTimes++;const wt=Ge[ne.__cacheKey];wt!==void 0&&(Ge[ne.__cacheKey].usedTimes--,wt.usedTimes===0&&L(q)),ne.__cacheKey=je,ne.__webglTexture=Ge[je].texture}return he}function Ie(ne,q,he){return Math.floor(Math.floor(ne/he)/q)}function Xe(ne,q,he,Oe){const je=ne.updateRanges;if(je.length===0)n.texSubImage2D(t.TEXTURE_2D,0,0,0,q.width,q.height,he,Oe,q.data);else{je.sort((Je,it)=>Je.start-it.start);let wt=0;for(let Je=1;Je<je.length;Je++){const it=je[wt],St=je[Je],_t=it.start+it.count,ht=Ie(St.start,q.width,4),pn=Ie(it.start,q.width,4);St.start<=_t+1&&ht===pn&&Ie(St.start+St.count-1,q.width,4)===ht?it.count=Math.max(it.count,St.start+St.count-it.start):(++wt,je[wt]=St)}je.length=wt+1;const ot=t.getParameter(t.UNPACK_ROW_LENGTH),Rt=t.getParameter(t.UNPACK_SKIP_PIXELS),Vt=t.getParameter(t.UNPACK_SKIP_ROWS);t.pixelStorei(t.UNPACK_ROW_LENGTH,q.width);for(let Je=0,it=je.length;Je<it;Je++){const St=je[Je],_t=Math.floor(St.start/4),ht=Math.ceil(St.count/4),pn=_t%q.width,pe=Math.floor(_t/q.width),mt=ht,rt=1;t.pixelStorei(t.UNPACK_SKIP_PIXELS,pn),t.pixelStorei(t.UNPACK_SKIP_ROWS,pe),n.texSubImage2D(t.TEXTURE_2D,0,pn,pe,mt,rt,he,Oe,q.data)}ne.clearUpdateRanges(),t.pixelStorei(t.UNPACK_ROW_LENGTH,ot),t.pixelStorei(t.UNPACK_SKIP_PIXELS,Rt),t.pixelStorei(t.UNPACK_SKIP_ROWS,Vt)}}function ve(ne,q,he){let Oe=t.TEXTURE_2D;(q.isDataArrayTexture||q.isCompressedArrayTexture)&&(Oe=t.TEXTURE_2D_ARRAY),q.isData3DTexture&&(Oe=t.TEXTURE_3D);const Ge=me(ne,q),je=q.source;n.bindTexture(Oe,ne.__webglTexture,t.TEXTURE0+he);const wt=r.get(je);if(je.version!==wt.__version||Ge===!0){n.activeTexture(t.TEXTURE0+he);const ot=Fn.getPrimaries(Fn.workingColorSpace),Rt=q.colorSpace===ju?null:Fn.getPrimaries(q.colorSpace),Vt=q.colorSpace===ju||ot===Rt?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,q.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,q.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Vt);let Je=T(q.image,!1,i.maxTextureSize);Je=Ct(q,Je);const it=a.convert(q.format,q.colorSpace),St=a.convert(q.type);let _t=C(q.internalFormat,it,St,q.colorSpace,q.isVideoTexture);ae(Oe,q);let ht;const pn=q.mipmaps,pe=q.isVideoTexture!==!0,mt=wt.__version===void 0||Ge===!0,rt=je.dataReady,vt=I(q,Je);if(q.isDepthTexture)_t=P(q.format===mf,q.type),mt&&(pe?n.texStorage2D(t.TEXTURE_2D,1,_t,Je.width,Je.height):n.texImage2D(t.TEXTURE_2D,0,_t,Je.width,Je.height,0,it,St,null));else if(q.isDataTexture)if(pn.length>0){pe&&mt&&n.texStorage2D(t.TEXTURE_2D,vt,_t,pn[0].width,pn[0].height);for(let Ze=0,He=pn.length;Ze<He;Ze++)ht=pn[Ze],pe?rt&&n.texSubImage2D(t.TEXTURE_2D,Ze,0,0,ht.width,ht.height,it,St,ht.data):n.texImage2D(t.TEXTURE_2D,Ze,_t,ht.width,ht.height,0,it,St,ht.data);q.generateMipmaps=!1}else pe?(mt&&n.texStorage2D(t.TEXTURE_2D,vt,_t,Je.width,Je.height),rt&&Xe(q,Je,it,St)):n.texImage2D(t.TEXTURE_2D,0,_t,Je.width,Je.height,0,it,St,Je.data);else if(q.isCompressedTexture)if(q.isCompressedArrayTexture){pe&&mt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,vt,_t,pn[0].width,pn[0].height,Je.depth);for(let Ze=0,He=pn.length;Ze<He;Ze++)if(ht=pn[Ze],q.format!==ia)if(it!==null)if(pe){if(rt)if(q.layerUpdates.size>0){const ct=lO(ht.width,ht.height,q.format,q.type);for(const en of q.layerUpdates){const On=ht.data.subarray(en*ct/ht.data.BYTES_PER_ELEMENT,(en+1)*ct/ht.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Ze,0,0,en,ht.width,ht.height,1,it,On)}q.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Ze,0,0,0,ht.width,ht.height,Je.depth,it,ht.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Ze,_t,ht.width,ht.height,Je.depth,0,ht.data,0,0);else yt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else pe?rt&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,Ze,0,0,0,ht.width,ht.height,Je.depth,it,St,ht.data):n.texImage3D(t.TEXTURE_2D_ARRAY,Ze,_t,ht.width,ht.height,Je.depth,0,it,St,ht.data)}else{pe&&mt&&n.texStorage2D(t.TEXTURE_2D,vt,_t,pn[0].width,pn[0].height);for(let Ze=0,He=pn.length;Ze<He;Ze++)ht=pn[Ze],q.format!==ia?it!==null?pe?rt&&n.compressedTexSubImage2D(t.TEXTURE_2D,Ze,0,0,ht.width,ht.height,it,ht.data):n.compressedTexImage2D(t.TEXTURE_2D,Ze,_t,ht.width,ht.height,0,ht.data):yt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pe?rt&&n.texSubImage2D(t.TEXTURE_2D,Ze,0,0,ht.width,ht.height,it,St,ht.data):n.texImage2D(t.TEXTURE_2D,Ze,_t,ht.width,ht.height,0,it,St,ht.data)}else if(q.isDataArrayTexture)if(pe){if(mt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,vt,_t,Je.width,Je.height,Je.depth),rt)if(q.layerUpdates.size>0){const Ze=lO(Je.width,Je.height,q.format,q.type);for(const He of q.layerUpdates){const ct=Je.data.subarray(He*Ze/Je.data.BYTES_PER_ELEMENT,(He+1)*Ze/Je.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,He,Je.width,Je.height,1,it,St,ct)}q.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Je.width,Je.height,Je.depth,it,St,Je.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,_t,Je.width,Je.height,Je.depth,0,it,St,Je.data);else if(q.isData3DTexture)pe?(mt&&n.texStorage3D(t.TEXTURE_3D,vt,_t,Je.width,Je.height,Je.depth),rt&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Je.width,Je.height,Je.depth,it,St,Je.data)):n.texImage3D(t.TEXTURE_3D,0,_t,Je.width,Je.height,Je.depth,0,it,St,Je.data);else if(q.isFramebufferTexture){if(mt)if(pe)n.texStorage2D(t.TEXTURE_2D,vt,_t,Je.width,Je.height);else{let Ze=Je.width,He=Je.height;for(let ct=0;ct<vt;ct++)n.texImage2D(t.TEXTURE_2D,ct,_t,Ze,He,0,it,St,null),Ze>>=1,He>>=1}}else if(pn.length>0){if(pe&&mt){const Ze=et(pn[0]);n.texStorage2D(t.TEXTURE_2D,vt,_t,Ze.width,Ze.height)}for(let Ze=0,He=pn.length;Ze<He;Ze++)ht=pn[Ze],pe?rt&&n.texSubImage2D(t.TEXTURE_2D,Ze,0,0,it,St,ht):n.texImage2D(t.TEXTURE_2D,Ze,_t,it,St,ht);q.generateMipmaps=!1}else if(pe){if(mt){const Ze=et(Je);n.texStorage2D(t.TEXTURE_2D,vt,_t,Ze.width,Ze.height)}rt&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,it,St,Je)}else n.texImage2D(t.TEXTURE_2D,0,_t,it,St,Je);w(q)&&E(Oe),wt.__version=je.version,q.onUpdate&&q.onUpdate(q)}ne.__version=q.version}function _e(ne,q,he){if(q.image.length!==6)return;const Oe=me(ne,q),Ge=q.source;n.bindTexture(t.TEXTURE_CUBE_MAP,ne.__webglTexture,t.TEXTURE0+he);const je=r.get(Ge);if(Ge.version!==je.__version||Oe===!0){n.activeTexture(t.TEXTURE0+he);const wt=Fn.getPrimaries(Fn.workingColorSpace),ot=q.colorSpace===ju?null:Fn.getPrimaries(q.colorSpace),Rt=q.colorSpace===ju||wt===ot?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,q.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,q.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Rt);const Vt=q.isCompressedTexture||q.image[0].isCompressedTexture,Je=q.image[0]&&q.image[0].isDataTexture,it=[];for(let He=0;He<6;He++)!Vt&&!Je?it[He]=T(q.image[He],!0,i.maxCubemapSize):it[He]=Je?q.image[He].image:q.image[He],it[He]=Ct(q,it[He]);const St=it[0],_t=a.convert(q.format,q.colorSpace),ht=a.convert(q.type),pn=C(q.internalFormat,_t,ht,q.colorSpace),pe=q.isVideoTexture!==!0,mt=je.__version===void 0||Oe===!0,rt=Ge.dataReady;let vt=I(q,St);ae(t.TEXTURE_CUBE_MAP,q);let Ze;if(Vt){pe&&mt&&n.texStorage2D(t.TEXTURE_CUBE_MAP,vt,pn,St.width,St.height);for(let He=0;He<6;He++){Ze=it[He].mipmaps;for(let ct=0;ct<Ze.length;ct++){const en=Ze[ct];q.format!==ia?_t!==null?pe?rt&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,ct,0,0,en.width,en.height,_t,en.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,ct,pn,en.width,en.height,0,en.data):yt("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):pe?rt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,ct,0,0,en.width,en.height,_t,ht,en.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,ct,pn,en.width,en.height,0,_t,ht,en.data)}}}else{if(Ze=q.mipmaps,pe&&mt){Ze.length>0&&vt++;const He=et(it[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,vt,pn,He.width,He.height)}for(let He=0;He<6;He++)if(Je){pe?rt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,0,0,0,it[He].width,it[He].height,_t,ht,it[He].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,0,pn,it[He].width,it[He].height,0,_t,ht,it[He].data);for(let ct=0;ct<Ze.length;ct++){const On=Ze[ct].image[He].image;pe?rt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,ct+1,0,0,On.width,On.height,_t,ht,On.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,ct+1,pn,On.width,On.height,0,_t,ht,On.data)}}else{pe?rt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,0,0,0,_t,ht,it[He]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,0,pn,_t,ht,it[He]);for(let ct=0;ct<Ze.length;ct++){const en=Ze[ct];pe?rt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,ct+1,0,0,_t,ht,en.image[He]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+He,ct+1,pn,_t,ht,en.image[He])}}}w(q)&&E(t.TEXTURE_CUBE_MAP),je.__version=Ge.version,q.onUpdate&&q.onUpdate(q)}ne.__version=q.version}function Ye(ne,q,he,Oe,Ge,je){const wt=a.convert(he.format,he.colorSpace),ot=a.convert(he.type),Rt=C(he.internalFormat,wt,ot,he.colorSpace),Vt=r.get(q),Je=r.get(he);if(Je.__renderTarget=q,!Vt.__hasExternalTextures){const it=Math.max(1,q.width>>je),St=Math.max(1,q.height>>je);Ge===t.TEXTURE_3D||Ge===t.TEXTURE_2D_ARRAY?n.texImage3D(Ge,je,Rt,it,St,q.depth,0,wt,ot,null):n.texImage2D(Ge,je,Rt,it,St,0,wt,ot,null)}n.bindFramebuffer(t.FRAMEBUFFER,ne),Nt(q)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Oe,Ge,Je.__webglTexture,0,ie(q)):(Ge===t.TEXTURE_2D||Ge>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Ge<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,Oe,Ge,Je.__webglTexture,je),n.bindFramebuffer(t.FRAMEBUFFER,null)}function ke(ne,q,he){if(t.bindRenderbuffer(t.RENDERBUFFER,ne),q.depthBuffer){const Oe=q.depthTexture,Ge=Oe&&Oe.isDepthTexture?Oe.type:null,je=P(q.stencilBuffer,Ge),wt=q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;Nt(q)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ie(q),je,q.width,q.height):he?t.renderbufferStorageMultisample(t.RENDERBUFFER,ie(q),je,q.width,q.height):t.renderbufferStorage(t.RENDERBUFFER,je,q.width,q.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,wt,t.RENDERBUFFER,ne)}else{const Oe=q.textures;for(let Ge=0;Ge<Oe.length;Ge++){const je=Oe[Ge],wt=a.convert(je.format,je.colorSpace),ot=a.convert(je.type),Rt=C(je.internalFormat,wt,ot,je.colorSpace);Nt(q)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ie(q),Rt,q.width,q.height):he?t.renderbufferStorageMultisample(t.RENDERBUFFER,ie(q),Rt,q.width,q.height):t.renderbufferStorage(t.RENDERBUFFER,Rt,q.width,q.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function qe(ne,q,he){const Oe=q.isWebGLCubeRenderTarget===!0;if(n.bindFramebuffer(t.FRAMEBUFFER,ne),!(q.depthTexture&&q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ge=r.get(q.depthTexture);if(Ge.__renderTarget=q,(!Ge.__webglTexture||q.depthTexture.image.width!==q.width||q.depthTexture.image.height!==q.height)&&(q.depthTexture.image.width=q.width,q.depthTexture.image.height=q.height,q.depthTexture.needsUpdate=!0),Oe){if(Ge.__webglInit===void 0&&(Ge.__webglInit=!0,q.depthTexture.addEventListener("dispose",j)),Ge.__webglTexture===void 0){Ge.__webglTexture=t.createTexture(),n.bindTexture(t.TEXTURE_CUBE_MAP,Ge.__webglTexture),ae(t.TEXTURE_CUBE_MAP,q.depthTexture);const Vt=a.convert(q.depthTexture.format),Je=a.convert(q.depthTexture.type);let it;q.depthTexture.format===Uc?it=t.DEPTH_COMPONENT24:q.depthTexture.format===mf&&(it=t.DEPTH24_STENCIL8);for(let St=0;St<6;St++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+St,0,it,q.width,q.height,0,Vt,Je,null)}}else te(q.depthTexture,0);const je=Ge.__webglTexture,wt=ie(q),ot=Oe?t.TEXTURE_CUBE_MAP_POSITIVE_X+he:t.TEXTURE_2D,Rt=q.depthTexture.format===mf?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;if(q.depthTexture.format===Uc)Nt(q)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Rt,ot,je,0,wt):t.framebufferTexture2D(t.FRAMEBUFFER,Rt,ot,je,0);else if(q.depthTexture.format===mf)Nt(q)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Rt,ot,je,0,wt):t.framebufferTexture2D(t.FRAMEBUFFER,Rt,ot,je,0);else throw new Error("Unknown depthTexture format")}function pt(ne){const q=r.get(ne),he=ne.isWebGLCubeRenderTarget===!0;if(q.__boundDepthTexture!==ne.depthTexture){const Oe=ne.depthTexture;if(q.__depthDisposeCallback&&q.__depthDisposeCallback(),Oe){const Ge=()=>{delete q.__boundDepthTexture,delete q.__depthDisposeCallback,Oe.removeEventListener("dispose",Ge)};Oe.addEventListener("dispose",Ge),q.__depthDisposeCallback=Ge}q.__boundDepthTexture=Oe}if(ne.depthTexture&&!q.__autoAllocateDepthBuffer)if(he)for(let Oe=0;Oe<6;Oe++)qe(q.__webglFramebuffer[Oe],ne,Oe);else{const Oe=ne.texture.mipmaps;Oe&&Oe.length>0?qe(q.__webglFramebuffer[0],ne,0):qe(q.__webglFramebuffer,ne,0)}else if(he){q.__webglDepthbuffer=[];for(let Oe=0;Oe<6;Oe++)if(n.bindFramebuffer(t.FRAMEBUFFER,q.__webglFramebuffer[Oe]),q.__webglDepthbuffer[Oe]===void 0)q.__webglDepthbuffer[Oe]=t.createRenderbuffer(),ke(q.__webglDepthbuffer[Oe],ne,!1);else{const Ge=ne.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,je=q.__webglDepthbuffer[Oe];t.bindRenderbuffer(t.RENDERBUFFER,je),t.framebufferRenderbuffer(t.FRAMEBUFFER,Ge,t.RENDERBUFFER,je)}}else{const Oe=ne.texture.mipmaps;if(Oe&&Oe.length>0?n.bindFramebuffer(t.FRAMEBUFFER,q.__webglFramebuffer[0]):n.bindFramebuffer(t.FRAMEBUFFER,q.__webglFramebuffer),q.__webglDepthbuffer===void 0)q.__webglDepthbuffer=t.createRenderbuffer(),ke(q.__webglDepthbuffer,ne,!1);else{const Ge=ne.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,je=q.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,je),t.framebufferRenderbuffer(t.FRAMEBUFFER,Ge,t.RENDERBUFFER,je)}}n.bindFramebuffer(t.FRAMEBUFFER,null)}function Ue(ne,q,he){const Oe=r.get(ne);q!==void 0&&Ye(Oe.__webglFramebuffer,ne,ne.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),he!==void 0&&pt(ne)}function xt(ne){const q=ne.texture,he=r.get(ne),Oe=r.get(q);ne.addEventListener("dispose",O);const Ge=ne.textures,je=ne.isWebGLCubeRenderTarget===!0,wt=Ge.length>1;if(wt||(Oe.__webglTexture===void 0&&(Oe.__webglTexture=t.createTexture()),Oe.__version=q.version,s.memory.textures++),je){he.__webglFramebuffer=[];for(let ot=0;ot<6;ot++)if(q.mipmaps&&q.mipmaps.length>0){he.__webglFramebuffer[ot]=[];for(let Rt=0;Rt<q.mipmaps.length;Rt++)he.__webglFramebuffer[ot][Rt]=t.createFramebuffer()}else he.__webglFramebuffer[ot]=t.createFramebuffer()}else{if(q.mipmaps&&q.mipmaps.length>0){he.__webglFramebuffer=[];for(let ot=0;ot<q.mipmaps.length;ot++)he.__webglFramebuffer[ot]=t.createFramebuffer()}else he.__webglFramebuffer=t.createFramebuffer();if(wt)for(let ot=0,Rt=Ge.length;ot<Rt;ot++){const Vt=r.get(Ge[ot]);Vt.__webglTexture===void 0&&(Vt.__webglTexture=t.createTexture(),s.memory.textures++)}if(ne.samples>0&&Nt(ne)===!1){he.__webglMultisampledFramebuffer=t.createFramebuffer(),he.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,he.__webglMultisampledFramebuffer);for(let ot=0;ot<Ge.length;ot++){const Rt=Ge[ot];he.__webglColorRenderbuffer[ot]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,he.__webglColorRenderbuffer[ot]);const Vt=a.convert(Rt.format,Rt.colorSpace),Je=a.convert(Rt.type),it=C(Rt.internalFormat,Vt,Je,Rt.colorSpace,ne.isXRRenderTarget===!0),St=ie(ne);t.renderbufferStorageMultisample(t.RENDERBUFFER,St,it,ne.width,ne.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ot,t.RENDERBUFFER,he.__webglColorRenderbuffer[ot])}t.bindRenderbuffer(t.RENDERBUFFER,null),ne.depthBuffer&&(he.__webglDepthRenderbuffer=t.createRenderbuffer(),ke(he.__webglDepthRenderbuffer,ne,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(je){n.bindTexture(t.TEXTURE_CUBE_MAP,Oe.__webglTexture),ae(t.TEXTURE_CUBE_MAP,q);for(let ot=0;ot<6;ot++)if(q.mipmaps&&q.mipmaps.length>0)for(let Rt=0;Rt<q.mipmaps.length;Rt++)Ye(he.__webglFramebuffer[ot][Rt],ne,q,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+ot,Rt);else Ye(he.__webglFramebuffer[ot],ne,q,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+ot,0);w(q)&&E(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(wt){for(let ot=0,Rt=Ge.length;ot<Rt;ot++){const Vt=Ge[ot],Je=r.get(Vt);let it=t.TEXTURE_2D;(ne.isWebGL3DRenderTarget||ne.isWebGLArrayRenderTarget)&&(it=ne.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(it,Je.__webglTexture),ae(it,Vt),Ye(he.__webglFramebuffer,ne,Vt,t.COLOR_ATTACHMENT0+ot,it,0),w(Vt)&&E(it)}n.unbindTexture()}else{let ot=t.TEXTURE_2D;if((ne.isWebGL3DRenderTarget||ne.isWebGLArrayRenderTarget)&&(ot=ne.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(ot,Oe.__webglTexture),ae(ot,q),q.mipmaps&&q.mipmaps.length>0)for(let Rt=0;Rt<q.mipmaps.length;Rt++)Ye(he.__webglFramebuffer[Rt],ne,q,t.COLOR_ATTACHMENT0,ot,Rt);else Ye(he.__webglFramebuffer,ne,q,t.COLOR_ATTACHMENT0,ot,0);w(q)&&E(ot),n.unbindTexture()}ne.depthBuffer&&pt(ne)}function Me(ne){const q=ne.textures;for(let he=0,Oe=q.length;he<Oe;he++){const Ge=q[he];if(w(Ge)){const je=N(ne),wt=r.get(Ge).__webglTexture;n.bindTexture(je,wt),E(je),n.unbindTexture()}}}const Fe=[],Le=[];function Qe(ne){if(ne.samples>0){if(Nt(ne)===!1){const q=ne.textures,he=ne.width,Oe=ne.height;let Ge=t.COLOR_BUFFER_BIT;const je=ne.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,wt=r.get(ne),ot=q.length>1;if(ot)for(let Vt=0;Vt<q.length;Vt++)n.bindFramebuffer(t.FRAMEBUFFER,wt.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Vt,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,wt.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Vt,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,wt.__webglMultisampledFramebuffer);const Rt=ne.texture.mipmaps;Rt&&Rt.length>0?n.bindFramebuffer(t.DRAW_FRAMEBUFFER,wt.__webglFramebuffer[0]):n.bindFramebuffer(t.DRAW_FRAMEBUFFER,wt.__webglFramebuffer);for(let Vt=0;Vt<q.length;Vt++){if(ne.resolveDepthBuffer&&(ne.depthBuffer&&(Ge|=t.DEPTH_BUFFER_BIT),ne.stencilBuffer&&ne.resolveStencilBuffer&&(Ge|=t.STENCIL_BUFFER_BIT)),ot){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,wt.__webglColorRenderbuffer[Vt]);const Je=r.get(q[Vt]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Je,0)}t.blitFramebuffer(0,0,he,Oe,0,0,he,Oe,Ge,t.NEAREST),c===!0&&(Fe.length=0,Le.length=0,Fe.push(t.COLOR_ATTACHMENT0+Vt),ne.depthBuffer&&ne.resolveDepthBuffer===!1&&(Fe.push(je),Le.push(je),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,Le)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Fe))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),ot)for(let Vt=0;Vt<q.length;Vt++){n.bindFramebuffer(t.FRAMEBUFFER,wt.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Vt,t.RENDERBUFFER,wt.__webglColorRenderbuffer[Vt]);const Je=r.get(q[Vt]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,wt.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Vt,t.TEXTURE_2D,Je,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,wt.__webglMultisampledFramebuffer)}else if(ne.depthBuffer&&ne.resolveDepthBuffer===!1&&c){const q=ne.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[q])}}}function ie(ne){return Math.min(i.maxSamples,ne.samples)}function Nt(ne){const q=r.get(ne);return ne.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&q.__useRenderToTexture!==!1}function ft(ne){const q=s.render.frame;h.get(ne)!==q&&(h.set(ne,q),ne.update())}function Ct(ne,q){const he=ne.colorSpace,Oe=ne.format,Ge=ne.type;return ne.isCompressedTexture===!0||ne.isVideoTexture===!0||he!==_f&&he!==ju&&(Fn.getTransfer(he)===or?(Oe!==ia||Ge!==cs)&&yt("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):Bt("WebGLTextures: Unsupported texture color space:",he)),q}function et(ne){return typeof HTMLImageElement<"u"&&ne instanceof HTMLImageElement?(u.width=ne.naturalWidth||ne.width,u.height=ne.naturalHeight||ne.height):typeof VideoFrame<"u"&&ne instanceof VideoFrame?(u.width=ne.displayWidth,u.height=ne.displayHeight):(u.width=ne.width,u.height=ne.height),u}this.allocateTextureUnit=$,this.resetTextureUnits=G,this.setTexture2D=te,this.setTexture2DArray=K,this.setTexture3D=X,this.setTextureCube=re,this.rebindTextures=Ue,this.setupRenderTarget=xt,this.updateRenderTargetMipmap=Me,this.updateMultisampleRenderTarget=Qe,this.setupDepthRenderbuffer=pt,this.setupFrameBufferTexture=Ye,this.useMultisampledRTT=Nt,this.isReversedDepthBuffer=function(){return n.buffers.depth.getReversed()}}function _K(t,e){function n(r,i=ju){let a;const s=Fn.getTransfer(i);if(r===cs)return t.UNSIGNED_BYTE;if(r===hA)return t.UNSIGNED_SHORT_4_4_4_4;if(r===pA)return t.UNSIGNED_SHORT_5_5_5_1;if(r===Zj)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===Qj)return t.UNSIGNED_INT_10F_11F_11F_REV;if(r===Yj)return t.BYTE;if(r===Jj)return t.SHORT;if(r===fv)return t.UNSIGNED_SHORT;if(r===fA)return t.INT;if(r===tl)return t.UNSIGNED_INT;if(r===ra)return t.FLOAT;if(r===Fl)return t.HALF_FLOAT;if(r===eD)return t.ALPHA;if(r===tD)return t.RGB;if(r===ia)return t.RGBA;if(r===Uc)return t.DEPTH_COMPONENT;if(r===mf)return t.DEPTH_STENCIL;if(r===mA)return t.RED;if(r===Lb)return t.RED_INTEGER;if(r===gp)return t.RG;if(r===gA)return t.RG_INTEGER;if(r===vA)return t.RGBA_INTEGER;if(r===ax||r===sx||r===ox||r===lx)if(s===or)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(r===ax)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===sx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===ox)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===lx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(r===ax)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===sx)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===ox)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===lx)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===_T||r===wT||r===ST||r===TT)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(r===_T)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===wT)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===ST)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===TT)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===ET||r===AT||r===kT||r===MT||r===NT||r===CT||r===RT)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(r===ET||r===AT)return s===or?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(r===kT)return s===or?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC;if(r===MT)return a.COMPRESSED_R11_EAC;if(r===NT)return a.COMPRESSED_SIGNED_R11_EAC;if(r===CT)return a.COMPRESSED_RG11_EAC;if(r===RT)return a.COMPRESSED_SIGNED_RG11_EAC}else return null;if(r===IT||r===PT||r===OT||r===jT||r===DT||r===LT||r===UT||r===zT||r===BT||r===FT||r===VT||r===HT||r===GT||r===qT)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(r===IT)return s===or?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===PT)return s===or?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===OT)return s===or?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===jT)return s===or?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===DT)return s===or?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===LT)return s===or?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===UT)return s===or?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===zT)return s===or?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===BT)return s===or?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===FT)return s===or?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===VT)return s===or?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===HT)return s===or?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===GT)return s===or?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===qT)return s===or?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===$T||r===WT||r===KT)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(r===$T)return s===or?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===WT)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===KT)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===XT||r===YT||r===JT||r===ZT)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(r===XT)return a.COMPRESSED_RED_RGTC1_EXT;if(r===YT)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===JT)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===ZT)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===hv?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}const xRe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,bRe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class _Re{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n){if(this.texture===null){const r=new dD(e.texture);(e.depthNear!==n.depthNear||e.depthFar!==n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new Gs({vertexShader:xRe,fragmentShader:bRe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new Ii(new Lv(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class wRe extends Hc{constructor(e,n){super();const r=this;let i=null,a=1,s=null,o="local-floor",c=1,u=null,h=null,m=null,v=null,x=null,_=null;const T=typeof XRWebGLBinding<"u",w=new _Re,E={},N=n.getContextAttributes();let C=null,P=null;const I=[],j=[],O=new We;let F=null;const L=new na;L.viewport=new br;const z=new na;z.viewport=new br;const V=[L,z],G=new dK;let $=null,ee=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ve){let _e=I[ve];return _e===void 0&&(_e=new QS,I[ve]=_e),_e.getTargetRaySpace()},this.getControllerGrip=function(ve){let _e=I[ve];return _e===void 0&&(_e=new QS,I[ve]=_e),_e.getGripSpace()},this.getHand=function(ve){let _e=I[ve];return _e===void 0&&(_e=new QS,I[ve]=_e),_e.getHandSpace()};function te(ve){const _e=j.indexOf(ve.inputSource);if(_e===-1)return;const Ye=I[_e];Ye!==void 0&&(Ye.update(ve.inputSource,ve.frame,u||s),Ye.dispatchEvent({type:ve.type,data:ve.inputSource}))}function K(){i.removeEventListener("select",te),i.removeEventListener("selectstart",te),i.removeEventListener("selectend",te),i.removeEventListener("squeeze",te),i.removeEventListener("squeezestart",te),i.removeEventListener("squeezeend",te),i.removeEventListener("end",K),i.removeEventListener("inputsourceschange",X);for(let ve=0;ve<I.length;ve++){const _e=j[ve];_e!==null&&(j[ve]=null,I[ve].disconnect(_e))}$=null,ee=null,w.reset();for(const ve in E)delete E[ve];e.setRenderTarget(C),x=null,v=null,m=null,i=null,P=null,Xe.stop(),r.isPresenting=!1,e.setPixelRatio(F),e.setSize(O.width,O.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ve){a=ve,r.isPresenting===!0&&yt("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ve){o=ve,r.isPresenting===!0&&yt("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(ve){u=ve},this.getBaseLayer=function(){return v!==null?v:x},this.getBinding=function(){return m===null&&T&&(m=new XRWebGLBinding(i,n)),m},this.getFrame=function(){return _},this.getSession=function(){return i},this.setSession=async function(ve){if(i=ve,i!==null){if(C=e.getRenderTarget(),i.addEventListener("select",te),i.addEventListener("selectstart",te),i.addEventListener("selectend",te),i.addEventListener("squeeze",te),i.addEventListener("squeezestart",te),i.addEventListener("squeezeend",te),i.addEventListener("end",K),i.addEventListener("inputsourceschange",X),N.xrCompatible!==!0&&await n.makeXRCompatible(),F=e.getPixelRatio(),e.getSize(O),T&&"createProjectionLayer"in XRWebGLBinding.prototype){let Ye=null,ke=null,qe=null;N.depth&&(qe=N.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,Ye=N.stencil?mf:Uc,ke=N.stencil?hv:tl);const pt={colorFormat:n.RGBA8,depthFormat:qe,scaleFactor:a};m=this.getBinding(),v=m.createProjectionLayer(pt),i.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),P=new Hs(v.textureWidth,v.textureHeight,{format:ia,type:cs,depthTexture:new yp(v.textureWidth,v.textureHeight,ke,void 0,void 0,void 0,void 0,void 0,void 0,Ye),stencilBuffer:N.stencil,colorSpace:e.outputColorSpace,samples:N.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}else{const Ye={antialias:N.antialias,alpha:!0,depth:N.depth,stencil:N.stencil,framebufferScaleFactor:a};x=new XRWebGLLayer(i,n,Ye),i.updateRenderState({baseLayer:x}),e.setPixelRatio(1),e.setSize(x.framebufferWidth,x.framebufferHeight,!1),P=new Hs(x.framebufferWidth,x.framebufferHeight,{format:ia,type:cs,colorSpace:e.outputColorSpace,stencilBuffer:N.stencil,resolveDepthBuffer:x.ignoreDepthValues===!1,resolveStencilBuffer:x.ignoreDepthValues===!1})}P.isXRRenderTarget=!0,this.setFoveation(c),u=null,s=await i.requestReferenceSpace(o),Xe.setContext(i),Xe.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return w.getDepthTexture()};function X(ve){for(let _e=0;_e<ve.removed.length;_e++){const Ye=ve.removed[_e],ke=j.indexOf(Ye);ke>=0&&(j[ke]=null,I[ke].disconnect(Ye))}for(let _e=0;_e<ve.added.length;_e++){const Ye=ve.added[_e];let ke=j.indexOf(Ye);if(ke===-1){for(let pt=0;pt<I.length;pt++)if(pt>=j.length){j.push(Ye),ke=pt;break}else if(j[pt]===null){j[pt]=Ye,ke=pt;break}if(ke===-1)break}const qe=I[ke];qe&&qe.connect(Ye)}}const re=new se,ce=new se;function de(ve,_e,Ye){re.setFromMatrixPosition(_e.matrixWorld),ce.setFromMatrixPosition(Ye.matrixWorld);const ke=re.distanceTo(ce),qe=_e.projectionMatrix.elements,pt=Ye.projectionMatrix.elements,Ue=qe[14]/(qe[10]-1),xt=qe[14]/(qe[10]+1),Me=(qe[9]+1)/qe[5],Fe=(qe[9]-1)/qe[5],Le=(qe[8]-1)/qe[0],Qe=(pt[8]+1)/pt[0],ie=Ue*Le,Nt=Ue*Qe,ft=ke/(-Le+Qe),Ct=ft*-Le;if(_e.matrixWorld.decompose(ve.position,ve.quaternion,ve.scale),ve.translateX(Ct),ve.translateZ(ft),ve.matrixWorld.compose(ve.position,ve.quaternion,ve.scale),ve.matrixWorldInverse.copy(ve.matrixWorld).invert(),qe[10]===-1)ve.projectionMatrix.copy(_e.projectionMatrix),ve.projectionMatrixInverse.copy(_e.projectionMatrixInverse);else{const et=Ue+ft,ne=xt+ft,q=ie-Ct,he=Nt+(ke-Ct),Oe=Me*xt/ne*et,Ge=Fe*xt/ne*et;ve.projectionMatrix.makePerspective(q,he,Oe,Ge,et,ne),ve.projectionMatrixInverse.copy(ve.projectionMatrix).invert()}}function W(ve,_e){_e===null?ve.matrixWorld.copy(ve.matrix):ve.matrixWorld.multiplyMatrices(_e.matrixWorld,ve.matrix),ve.matrixWorldInverse.copy(ve.matrixWorld).invert()}this.updateCamera=function(ve){if(i===null)return;let _e=ve.near,Ye=ve.far;w.texture!==null&&(w.depthNear>0&&(_e=w.depthNear),w.depthFar>0&&(Ye=w.depthFar)),G.near=z.near=L.near=_e,G.far=z.far=L.far=Ye,($!==G.near||ee!==G.far)&&(i.updateRenderState({depthNear:G.near,depthFar:G.far}),$=G.near,ee=G.far),G.layers.mask=ve.layers.mask|6,L.layers.mask=G.layers.mask&3,z.layers.mask=G.layers.mask&5;const ke=ve.parent,qe=G.cameras;W(G,ke);for(let pt=0;pt<qe.length;pt++)W(qe[pt],ke);qe.length===2?de(G,L,z):G.projectionMatrix.copy(L.projectionMatrix),ae(ve,G,ke)};function ae(ve,_e,Ye){Ye===null?ve.matrix.copy(_e.matrixWorld):(ve.matrix.copy(Ye.matrixWorld),ve.matrix.invert(),ve.matrix.multiply(_e.matrixWorld)),ve.matrix.decompose(ve.position,ve.quaternion,ve.scale),ve.updateMatrixWorld(!0),ve.projectionMatrix.copy(_e.projectionMatrix),ve.projectionMatrixInverse.copy(_e.projectionMatrixInverse),ve.isPerspectiveCamera&&(ve.fov=gv*2*Math.atan(1/ve.projectionMatrix.elements[5]),ve.zoom=1)}this.getCamera=function(){return G},this.getFoveation=function(){if(!(v===null&&x===null))return c},this.setFoveation=function(ve){c=ve,v!==null&&(v.fixedFoveation=ve),x!==null&&x.fixedFoveation!==void 0&&(x.fixedFoveation=ve)},this.hasDepthSensing=function(){return w.texture!==null},this.getDepthSensingMesh=function(){return w.getMesh(G)},this.getCameraTexture=function(ve){return E[ve]};let me=null;function Ie(ve,_e){if(h=_e.getViewerPose(u||s),_=_e,h!==null){const Ye=h.views;x!==null&&(e.setRenderTargetFramebuffer(P,x.framebuffer),e.setRenderTarget(P));let ke=!1;Ye.length!==G.cameras.length&&(G.cameras.length=0,ke=!0);for(let xt=0;xt<Ye.length;xt++){const Me=Ye[xt];let Fe=null;if(x!==null)Fe=x.getViewport(Me);else{const Qe=m.getViewSubImage(v,Me);Fe=Qe.viewport,xt===0&&(e.setRenderTargetTextures(P,Qe.colorTexture,Qe.depthStencilTexture),e.setRenderTarget(P))}let Le=V[xt];Le===void 0&&(Le=new na,Le.layers.enable(xt),Le.viewport=new br,V[xt]=Le),Le.matrix.fromArray(Me.transform.matrix),Le.matrix.decompose(Le.position,Le.quaternion,Le.scale),Le.projectionMatrix.fromArray(Me.projectionMatrix),Le.projectionMatrixInverse.copy(Le.projectionMatrix).invert(),Le.viewport.set(Fe.x,Fe.y,Fe.width,Fe.height),xt===0&&(G.matrix.copy(Le.matrix),G.matrix.decompose(G.position,G.quaternion,G.scale)),ke===!0&&G.cameras.push(Le)}const qe=i.enabledFeatures;if(qe&&qe.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&T){m=r.getBinding();const xt=m.getDepthInformation(Ye[0]);xt&&xt.isValid&&xt.texture&&w.init(xt,i.renderState)}if(qe&&qe.includes("camera-access")&&T){e.state.unbindTexture(),m=r.getBinding();for(let xt=0;xt<Ye.length;xt++){const Me=Ye[xt].camera;if(Me){let Fe=E[Me];Fe||(Fe=new dD,E[Me]=Fe);const Le=m.getCameraImage(Me);Fe.sourceTexture=Le}}}}for(let Ye=0;Ye<I.length;Ye++){const ke=j[Ye],qe=I[Ye];ke!==null&&qe!==void 0&&qe.update(ke,_e,u||s)}me&&me(ve,_e),_e.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:_e}),_=null}const Xe=new gK;Xe.setAnimationLoop(Ie),this.setAnimationLoop=function(ve){me=ve},this.dispose=function(){}}}const Dh=new po,SRe=new an;function TRe(t,e){function n(w,E){w.matrixAutoUpdate===!0&&w.updateMatrix(),E.value.copy(w.matrix)}function r(w,E){E.color.getRGB(w.fogColor.value,xW(t)),E.isFog?(w.fogNear.value=E.near,w.fogFar.value=E.far):E.isFogExp2&&(w.fogDensity.value=E.density)}function i(w,E,N,C,P){E.isMeshBasicMaterial||E.isMeshLambertMaterial?a(w,E):E.isMeshToonMaterial?(a(w,E),m(w,E)):E.isMeshPhongMaterial?(a(w,E),h(w,E)):E.isMeshStandardMaterial?(a(w,E),v(w,E),E.isMeshPhysicalMaterial&&x(w,E,P)):E.isMeshMatcapMaterial?(a(w,E),_(w,E)):E.isMeshDepthMaterial?a(w,E):E.isMeshDistanceMaterial?(a(w,E),T(w,E)):E.isMeshNormalMaterial?a(w,E):E.isLineBasicMaterial?(s(w,E),E.isLineDashedMaterial&&o(w,E)):E.isPointsMaterial?c(w,E,N,C):E.isSpriteMaterial?u(w,E):E.isShadowMaterial?(w.color.value.copy(E.color),w.opacity.value=E.opacity):E.isShaderMaterial&&(E.uniformsNeedUpdate=!1)}function a(w,E){w.opacity.value=E.opacity,E.color&&w.diffuse.value.copy(E.color),E.emissive&&w.emissive.value.copy(E.emissive).multiplyScalar(E.emissiveIntensity),E.map&&(w.map.value=E.map,n(E.map,w.mapTransform)),E.alphaMap&&(w.alphaMap.value=E.alphaMap,n(E.alphaMap,w.alphaMapTransform)),E.bumpMap&&(w.bumpMap.value=E.bumpMap,n(E.bumpMap,w.bumpMapTransform),w.bumpScale.value=E.bumpScale,E.side===ps&&(w.bumpScale.value*=-1)),E.normalMap&&(w.normalMap.value=E.normalMap,n(E.normalMap,w.normalMapTransform),w.normalScale.value.copy(E.normalScale),E.side===ps&&w.normalScale.value.negate()),E.displacementMap&&(w.displacementMap.value=E.displacementMap,n(E.displacementMap,w.displacementMapTransform),w.displacementScale.value=E.displacementScale,w.displacementBias.value=E.displacementBias),E.emissiveMap&&(w.emissiveMap.value=E.emissiveMap,n(E.emissiveMap,w.emissiveMapTransform)),E.specularMap&&(w.specularMap.value=E.specularMap,n(E.specularMap,w.specularMapTransform)),E.alphaTest>0&&(w.alphaTest.value=E.alphaTest);const N=e.get(E),C=N.envMap,P=N.envMapRotation;C&&(w.envMap.value=C,Dh.copy(P),Dh.x*=-1,Dh.y*=-1,Dh.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(Dh.y*=-1,Dh.z*=-1),w.envMapRotation.value.setFromMatrix4(SRe.makeRotationFromEuler(Dh)),w.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=E.reflectivity,w.ior.value=E.ior,w.refractionRatio.value=E.refractionRatio),E.lightMap&&(w.lightMap.value=E.lightMap,w.lightMapIntensity.value=E.lightMapIntensity,n(E.lightMap,w.lightMapTransform)),E.aoMap&&(w.aoMap.value=E.aoMap,w.aoMapIntensity.value=E.aoMapIntensity,n(E.aoMap,w.aoMapTransform))}function s(w,E){w.diffuse.value.copy(E.color),w.opacity.value=E.opacity,E.map&&(w.map.value=E.map,n(E.map,w.mapTransform))}function o(w,E){w.dashSize.value=E.dashSize,w.totalSize.value=E.dashSize+E.gapSize,w.scale.value=E.scale}function c(w,E,N,C){w.diffuse.value.copy(E.color),w.opacity.value=E.opacity,w.size.value=E.size*N,w.scale.value=C*.5,E.map&&(w.map.value=E.map,n(E.map,w.uvTransform)),E.alphaMap&&(w.alphaMap.value=E.alphaMap,n(E.alphaMap,w.alphaMapTransform)),E.alphaTest>0&&(w.alphaTest.value=E.alphaTest)}function u(w,E){w.diffuse.value.copy(E.color),w.opacity.value=E.opacity,w.rotation.value=E.rotation,E.map&&(w.map.value=E.map,n(E.map,w.mapTransform)),E.alphaMap&&(w.alphaMap.value=E.alphaMap,n(E.alphaMap,w.alphaMapTransform)),E.alphaTest>0&&(w.alphaTest.value=E.alphaTest)}function h(w,E){w.specular.value.copy(E.specular),w.shininess.value=Math.max(E.shininess,1e-4)}function m(w,E){E.gradientMap&&(w.gradientMap.value=E.gradientMap)}function v(w,E){w.metalness.value=E.metalness,E.metalnessMap&&(w.metalnessMap.value=E.metalnessMap,n(E.metalnessMap,w.metalnessMapTransform)),w.roughness.value=E.roughness,E.roughnessMap&&(w.roughnessMap.value=E.roughnessMap,n(E.roughnessMap,w.roughnessMapTransform)),E.envMap&&(w.envMapIntensity.value=E.envMapIntensity)}function x(w,E,N){w.ior.value=E.ior,E.sheen>0&&(w.sheenColor.value.copy(E.sheenColor).multiplyScalar(E.sheen),w.sheenRoughness.value=E.sheenRoughness,E.sheenColorMap&&(w.sheenColorMap.value=E.sheenColorMap,n(E.sheenColorMap,w.sheenColorMapTransform)),E.sheenRoughnessMap&&(w.sheenRoughnessMap.value=E.sheenRoughnessMap,n(E.sheenRoughnessMap,w.sheenRoughnessMapTransform))),E.clearcoat>0&&(w.clearcoat.value=E.clearcoat,w.clearcoatRoughness.value=E.clearcoatRoughness,E.clearcoatMap&&(w.clearcoatMap.value=E.clearcoatMap,n(E.clearcoatMap,w.clearcoatMapTransform)),E.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=E.clearcoatRoughnessMap,n(E.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),E.clearcoatNormalMap&&(w.clearcoatNormalMap.value=E.clearcoatNormalMap,n(E.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(E.clearcoatNormalScale),E.side===ps&&w.clearcoatNormalScale.value.negate())),E.dispersion>0&&(w.dispersion.value=E.dispersion),E.iridescence>0&&(w.iridescence.value=E.iridescence,w.iridescenceIOR.value=E.iridescenceIOR,w.iridescenceThicknessMinimum.value=E.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=E.iridescenceThicknessRange[1],E.iridescenceMap&&(w.iridescenceMap.value=E.iridescenceMap,n(E.iridescenceMap,w.iridescenceMapTransform)),E.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=E.iridescenceThicknessMap,n(E.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),E.transmission>0&&(w.transmission.value=E.transmission,w.transmissionSamplerMap.value=N.texture,w.transmissionSamplerSize.value.set(N.width,N.height),E.transmissionMap&&(w.transmissionMap.value=E.transmissionMap,n(E.transmissionMap,w.transmissionMapTransform)),w.thickness.value=E.thickness,E.thicknessMap&&(w.thicknessMap.value=E.thicknessMap,n(E.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=E.attenuationDistance,w.attenuationColor.value.copy(E.attenuationColor)),E.anisotropy>0&&(w.anisotropyVector.value.set(E.anisotropy*Math.cos(E.anisotropyRotation),E.anisotropy*Math.sin(E.anisotropyRotation)),E.anisotropyMap&&(w.anisotropyMap.value=E.anisotropyMap,n(E.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=E.specularIntensity,w.specularColor.value.copy(E.specularColor),E.specularColorMap&&(w.specularColorMap.value=E.specularColorMap,n(E.specularColorMap,w.specularColorMapTransform)),E.specularIntensityMap&&(w.specularIntensityMap.value=E.specularIntensityMap,n(E.specularIntensityMap,w.specularIntensityMapTransform))}function _(w,E){E.matcap&&(w.matcap.value=E.matcap)}function T(w,E){const N=e.get(E).light;w.referencePosition.value.setFromMatrixPosition(N.matrixWorld),w.nearDistance.value=N.shadow.camera.near,w.farDistance.value=N.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function ERe(t,e,n,r){let i={},a={},s=[];const o=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function c(N,C){const P=C.program;r.uniformBlockBinding(N,P)}function u(N,C){let P=i[N.id];P===void 0&&(_(N),P=h(N),i[N.id]=P,N.addEventListener("dispose",w));const I=C.program;r.updateUBOMapping(N,I);const j=e.render.frame;a[N.id]!==j&&(v(N),a[N.id]=j)}function h(N){const C=m();N.__bindingPointIndex=C;const P=t.createBuffer(),I=N.__size,j=N.usage;return t.bindBuffer(t.UNIFORM_BUFFER,P),t.bufferData(t.UNIFORM_BUFFER,I,j),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,C,P),P}function m(){for(let N=0;N<o;N++)if(s.indexOf(N)===-1)return s.push(N),N;return Bt("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(N){const C=i[N.id],P=N.uniforms,I=N.__cache;t.bindBuffer(t.UNIFORM_BUFFER,C);for(let j=0,O=P.length;j<O;j++){const F=Array.isArray(P[j])?P[j]:[P[j]];for(let L=0,z=F.length;L<z;L++){const V=F[L];if(x(V,j,L,I)===!0){const G=V.__offset,$=Array.isArray(V.value)?V.value:[V.value];let ee=0;for(let te=0;te<$.length;te++){const K=$[te],X=T(K);typeof K=="number"||typeof K=="boolean"?(V.__data[0]=K,t.bufferSubData(t.UNIFORM_BUFFER,G+ee,V.__data)):K.isMatrix3?(V.__data[0]=K.elements[0],V.__data[1]=K.elements[1],V.__data[2]=K.elements[2],V.__data[3]=0,V.__data[4]=K.elements[3],V.__data[5]=K.elements[4],V.__data[6]=K.elements[5],V.__data[7]=0,V.__data[8]=K.elements[6],V.__data[9]=K.elements[7],V.__data[10]=K.elements[8],V.__data[11]=0):(K.toArray(V.__data,ee),ee+=X.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,G,V.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function x(N,C,P,I){const j=N.value,O=C+"_"+P;if(I[O]===void 0)return typeof j=="number"||typeof j=="boolean"?I[O]=j:I[O]=j.clone(),!0;{const F=I[O];if(typeof j=="number"||typeof j=="boolean"){if(F!==j)return I[O]=j,!0}else if(F.equals(j)===!1)return F.copy(j),!0}return!1}function _(N){const C=N.uniforms;let P=0;const I=16;for(let O=0,F=C.length;O<F;O++){const L=Array.isArray(C[O])?C[O]:[C[O]];for(let z=0,V=L.length;z<V;z++){const G=L[z],$=Array.isArray(G.value)?G.value:[G.value];for(let ee=0,te=$.length;ee<te;ee++){const K=$[ee],X=T(K),re=P%I,ce=re%X.boundary,de=re+ce;P+=ce,de!==0&&I-de<X.storage&&(P+=I-de),G.__data=new Float32Array(X.storage/Float32Array.BYTES_PER_ELEMENT),G.__offset=P,P+=X.storage}}}const j=P%I;return j>0&&(P+=I-j),N.__size=P,N.__cache={},this}function T(N){const C={boundary:0,storage:0};return typeof N=="number"||typeof N=="boolean"?(C.boundary=4,C.storage=4):N.isVector2?(C.boundary=8,C.storage=8):N.isVector3||N.isColor?(C.boundary=16,C.storage=12):N.isVector4?(C.boundary=16,C.storage=16):N.isMatrix3?(C.boundary=48,C.storage=48):N.isMatrix4?(C.boundary=64,C.storage=64):N.isTexture?yt("WebGLRenderer: Texture samplers can not be part of an uniforms group."):yt("WebGLRenderer: Unsupported uniform value type.",N),C}function w(N){const C=N.target;C.removeEventListener("dispose",w);const P=s.indexOf(C.__bindingPointIndex);s.splice(P,1),t.deleteBuffer(i[C.id]),delete i[C.id],delete a[C.id]}function E(){for(const N in i)t.deleteBuffer(i[N]);s=[],i={},a={}}return{bind:c,update:u,dispose:E}}const ARe=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let Ac=null;function kRe(){return Ac===null&&(Ac=new Yo(ARe,16,16,gp,Fl),Ac.name="DFG_LUT",Ac.minFilter=wr,Ac.magFilter=wr,Ac.wrapS=Fs,Ac.wrapT=Fs,Ac.generateMipmaps=!1,Ac.needsUpdate=!0),Ac}class wK{constructor(e={}){const{canvas:n=gW(),context:r=null,depth:i=!0,stencil:a=!1,alpha:s=!1,antialias:o=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:m=!1,reversedDepthBuffer:v=!1,outputBufferType:x=cs}=e;this.isWebGLRenderer=!0;let _;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=r.getContextAttributes().alpha}else _=s;const T=x,w=new Set([vA,gA,Lb]),E=new Set([cs,tl,fv,hv,hA,pA]),N=new Uint32Array(4),C=new Int32Array(4);let P=null,I=null;const j=[],O=[];let F=null;this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Xo,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const L=this;let z=!1;this._outputColorSpace=Ba;let V=0,G=0,$=null,ee=-1,te=null;const K=new br,X=new br;let re=null;const ce=new kt(0);let de=0,W=n.width,ae=n.height,me=1,Ie=null,Xe=null;const ve=new br(0,0,W,ae),_e=new br(0,0,W,ae);let Ye=!1;const ke=new Dv;let qe=!1,pt=!1;const Ue=new an,xt=new se,Me=new br,Fe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Le=!1;function Qe(){return $===null?me:1}let ie=r;function Nt(Z,ge){return n.getContext(Z,ge)}try{const Z={alpha:!0,depth:i,stencil:a,antialias:o,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:m};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${cA}`),n.addEventListener("webglcontextlost",en,!1),n.addEventListener("webglcontextrestored",On,!1),n.addEventListener("webglcontextcreationerror",Ln,!1),ie===null){const ge="webgl2";if(ie=Nt(ge,Z),ie===null)throw Nt(ge)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Z){throw Bt("WebGLRenderer: "+Z.message),Z}let ft,Ct,et,ne,q,he,Oe,Ge,je,wt,ot,Rt,Vt,Je,it,St,_t,ht,pn,pe,mt,rt,vt,Ze;function He(){ft=new MNe(ie),ft.init(),rt=new _K(ie,ft),Ct=new xNe(ie,ft,e,rt),et=new vRe(ie,ft),Ct.reversedDepthBuffer&&v&&et.buffers.depth.setReversed(!0),ne=new RNe(ie),q=new nRe,he=new yRe(ie,ft,et,q,Ct,rt,ne),Oe=new _Ne(L),Ge=new kNe(L),je=new jAe(ie),vt=new vNe(ie,je),wt=new NNe(ie,je,ne,vt),ot=new PNe(ie,wt,je,ne),pn=new INe(ie,Ct,he),St=new bNe(q),Rt=new tRe(L,Oe,Ge,ft,Ct,vt,St),Vt=new TRe(L,q),Je=new iRe,it=new uRe(ft),ht=new gNe(L,Oe,Ge,et,ot,_,c),_t=new mRe(L,ot,Ct),Ze=new ERe(ie,ne,Ct,et),pe=new yNe(ie,ft,ne),mt=new CNe(ie,ft,ne),ne.programs=Rt.programs,L.capabilities=Ct,L.extensions=ft,L.properties=q,L.renderLists=Je,L.shadowMap=_t,L.state=et,L.info=ne}He(),T!==cs&&(F=new jNe(T,n.width,n.height,i,a));const ct=new wRe(L,ie);this.xr=ct,this.getContext=function(){return ie},this.getContextAttributes=function(){return ie.getContextAttributes()},this.forceContextLoss=function(){const Z=ft.get("WEBGL_lose_context");Z&&Z.loseContext()},this.forceContextRestore=function(){const Z=ft.get("WEBGL_lose_context");Z&&Z.restoreContext()},this.getPixelRatio=function(){return me},this.setPixelRatio=function(Z){Z!==void 0&&(me=Z,this.setSize(W,ae,!1))},this.getSize=function(Z){return Z.set(W,ae)},this.setSize=function(Z,ge,Ce=!0){if(ct.isPresenting){yt("WebGLRenderer: Can't change size while VR device is presenting.");return}W=Z,ae=ge,n.width=Math.floor(Z*me),n.height=Math.floor(ge*me),Ce===!0&&(n.style.width=Z+"px",n.style.height=ge+"px"),F!==null&&F.setSize(n.width,n.height),this.setViewport(0,0,Z,ge)},this.getDrawingBufferSize=function(Z){return Z.set(W*me,ae*me).floor()},this.setDrawingBufferSize=function(Z,ge,Ce){W=Z,ae=ge,me=Ce,n.width=Math.floor(Z*Ce),n.height=Math.floor(ge*Ce),this.setViewport(0,0,Z,ge)},this.setEffects=function(Z){if(T===cs){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(Z){for(let ge=0;ge<Z.length;ge++)if(Z[ge].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}F.setEffects(Z||[])},this.getCurrentViewport=function(Z){return Z.copy(K)},this.getViewport=function(Z){return Z.copy(ve)},this.setViewport=function(Z,ge,Ce,Ee){Z.isVector4?ve.set(Z.x,Z.y,Z.z,Z.w):ve.set(Z,ge,Ce,Ee),et.viewport(K.copy(ve).multiplyScalar(me).round())},this.getScissor=function(Z){return Z.copy(_e)},this.setScissor=function(Z,ge,Ce,Ee){Z.isVector4?_e.set(Z.x,Z.y,Z.z,Z.w):_e.set(Z,ge,Ce,Ee),et.scissor(X.copy(_e).multiplyScalar(me).round())},this.getScissorTest=function(){return Ye},this.setScissorTest=function(Z){et.setScissorTest(Ye=Z)},this.setOpaqueSort=function(Z){Ie=Z},this.setTransparentSort=function(Z){Xe=Z},this.getClearColor=function(Z){return Z.copy(ht.getClearColor())},this.setClearColor=function(){ht.setClearColor(...arguments)},this.getClearAlpha=function(){return ht.getClearAlpha()},this.setClearAlpha=function(){ht.setClearAlpha(...arguments)},this.clear=function(Z=!0,ge=!0,Ce=!0){let Ee=0;if(Z){let xe=!1;if($!==null){const at=$.texture.format;xe=w.has(at)}if(xe){const at=$.texture.type,Tt=E.has(at),nt=ht.getClearColor(),Mt=ht.getClearAlpha(),It=nt.r,Ft=nt.g,jt=nt.b;Tt?(N[0]=It,N[1]=Ft,N[2]=jt,N[3]=Mt,ie.clearBufferuiv(ie.COLOR,0,N)):(C[0]=It,C[1]=Ft,C[2]=jt,C[3]=Mt,ie.clearBufferiv(ie.COLOR,0,C))}else Ee|=ie.COLOR_BUFFER_BIT}ge&&(Ee|=ie.DEPTH_BUFFER_BIT),Ce&&(Ee|=ie.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ie.clear(Ee)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",en,!1),n.removeEventListener("webglcontextrestored",On,!1),n.removeEventListener("webglcontextcreationerror",Ln,!1),ht.dispose(),Je.dispose(),it.dispose(),q.dispose(),Oe.dispose(),Ge.dispose(),ot.dispose(),vt.dispose(),Ze.dispose(),Rt.dispose(),ct.dispose(),ct.removeEventListener("sessionstart",il),ct.removeEventListener("sessionend",$c),Ki.stop()};function en(Z){Z.preventDefault(),vb("WebGLRenderer: Context Lost."),z=!0}function On(){vb("WebGLRenderer: Context Restored."),z=!1;const Z=ne.autoReset,ge=_t.enabled,Ce=_t.autoUpdate,Ee=_t.needsUpdate,xe=_t.type;He(),ne.autoReset=Z,_t.enabled=ge,_t.autoUpdate=Ce,_t.needsUpdate=Ee,_t.type=xe}function Ln(Z){Bt("WebGLRenderer: A WebGL context could not be created. Reason: ",Z.statusMessage)}function Pi(Z){const ge=Z.target;ge.removeEventListener("dispose",Pi),Ta(ge)}function Ta(Z){ql(Z),q.remove(Z)}function ql(Z){const ge=q.get(Z).programs;ge!==void 0&&(ge.forEach(function(Ce){Rt.releaseProgram(Ce)}),Z.isShaderMaterial&&Rt.releaseShaderCache(Z))}this.renderBufferDirect=function(Z,ge,Ce,Ee,xe,at){ge===null&&(ge=Fe);const Tt=xe.isMesh&&xe.matrixWorld.determinant()<0,nt=Ws(Z,ge,Ce,Ee,xe);et.setMaterial(Ee,Tt);let Mt=Ce.index,It=1;if(Ee.wireframe===!0){if(Mt=wt.getWireframeAttribute(Ce),Mt===void 0)return;It=2}const Ft=Ce.drawRange,jt=Ce.attributes.position;let $t=Ft.start*It,Vn=(Ft.start+Ft.count)*It;at!==null&&($t=Math.max($t,at.start*It),Vn=Math.min(Vn,(at.start+at.count)*It)),Mt!==null?($t=Math.max($t,0),Vn=Math.min(Vn,Mt.count)):jt!=null&&($t=Math.max($t,0),Vn=Math.min(Vn,jt.count));const cr=Vn-$t;if(cr<0||cr===1/0)return;vt.setup(xe,Ee,nt,Ce,Mt);let nr,sn=pe;if(Mt!==null&&(nr=je.get(Mt),sn=mt,sn.setIndex(nr)),xe.isMesh)Ee.wireframe===!0?(et.setLineWidth(Ee.wireframeLinewidth*Qe()),sn.setMode(ie.LINES)):sn.setMode(ie.TRIANGLES);else if(xe.isLine){let gt=Ee.linewidth;gt===void 0&&(gt=1),et.setLineWidth(gt*Qe()),xe.isLineSegments?sn.setMode(ie.LINES):xe.isLineLoop?sn.setMode(ie.LINE_LOOP):sn.setMode(ie.LINE_STRIP)}else xe.isPoints?sn.setMode(ie.POINTS):xe.isSprite&&sn.setMode(ie.TRIANGLES);if(xe.isBatchedMesh)if(xe._multiDrawInstances!==null)mv("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),sn.renderMultiDrawInstances(xe._multiDrawStarts,xe._multiDrawCounts,xe._multiDrawCount,xe._multiDrawInstances);else if(ft.get("WEBGL_multi_draw"))sn.renderMultiDraw(xe._multiDrawStarts,xe._multiDrawCounts,xe._multiDrawCount);else{const gt=xe._multiDrawStarts,Un=xe._multiDrawCounts,Kt=xe._multiDrawCount,ni=Mt?je.get(Mt).bytesPerElement:1,Ks=q.get(Ee).currentProgram.getUniforms();for(let vr=0;vr<Kt;vr++)Ks.setValue(ie,"_gl_DrawID",vr),sn.render(gt[vr]/ni,Un[vr])}else if(xe.isInstancedMesh)sn.renderInstances($t,cr,xe.count);else if(Ce.isInstancedBufferGeometry){const gt=Ce._maxInstanceCount!==void 0?Ce._maxInstanceCount:1/0,Un=Math.min(Ce.instanceCount,gt);sn.renderInstances($t,cr,Un)}else sn.render($t,cr)};function $l(Z,ge,Ce){Z.transparent===!0&&Z.side===Mc&&Z.forceSinglePass===!1?(Z.side=ps,Z.needsUpdate=!0,Xa(Z,ge,Ce),Z.side=Yu,Z.needsUpdate=!0,Xa(Z,ge,Ce),Z.side=Mc):Xa(Z,ge,Ce)}this.compile=function(Z,ge,Ce=null){Ce===null&&(Ce=Z),I=it.get(Ce),I.init(ge),O.push(I),Ce.traverseVisible(function(xe){xe.isLight&&xe.layers.test(ge.layers)&&(I.pushLight(xe),xe.castShadow&&I.pushShadow(xe))}),Z!==Ce&&Z.traverseVisible(function(xe){xe.isLight&&xe.layers.test(ge.layers)&&(I.pushLight(xe),xe.castShadow&&I.pushShadow(xe))}),I.setupLights();const Ee=new Set;return Z.traverse(function(xe){if(!(xe.isMesh||xe.isPoints||xe.isLine||xe.isSprite))return;const at=xe.material;if(at)if(Array.isArray(at))for(let Tt=0;Tt<at.length;Tt++){const nt=at[Tt];$l(nt,Ce,xe),Ee.add(nt)}else $l(at,Ce,xe),Ee.add(at)}),I=O.pop(),Ee},this.compileAsync=function(Z,ge,Ce=null){const Ee=this.compile(Z,ge,Ce);return new Promise(xe=>{function at(){if(Ee.forEach(function(Tt){q.get(Tt).currentProgram.isReady()&&Ee.delete(Tt)}),Ee.size===0){xe(Z);return}setTimeout(at,10)}ft.get("KHR_parallel_shader_compile")!==null?at():setTimeout(at,10)})};let qc=null;function Wl(Z){qc&&qc(Z)}function il(){Ki.stop()}function $c(){Ki.start()}const Ki=new gK;Ki.setAnimationLoop(Wl),typeof self<"u"&&Ki.setContext(self),this.setAnimationLoop=function(Z){qc=Z,ct.setAnimationLoop(Z),Z===null?Ki.stop():Ki.start()},ct.addEventListener("sessionstart",il),ct.addEventListener("sessionend",$c),this.render=function(Z,ge){if(ge!==void 0&&ge.isCamera!==!0){Bt("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(z===!0)return;const Ce=ct.enabled===!0&&ct.isPresenting===!0,Ee=F!==null&&($===null||Ce)&&F.begin(L,$);if(Z.matrixWorldAutoUpdate===!0&&Z.updateMatrixWorld(),ge.parent===null&&ge.matrixWorldAutoUpdate===!0&&ge.updateMatrixWorld(),ct.enabled===!0&&ct.isPresenting===!0&&(F===null||F.isCompositing()===!1)&&(ct.cameraAutoUpdate===!0&&ct.updateCamera(ge),ge=ct.getCamera()),Z.isScene===!0&&Z.onBeforeRender(L,Z,ge,$),I=it.get(Z,O.length),I.init(ge),O.push(I),Ue.multiplyMatrices(ge.projectionMatrix,ge.matrixWorldInverse),ke.setFromProjectionMatrix(Ue,co,ge.reversedDepth),pt=this.localClippingEnabled,qe=St.init(this.clippingPlanes,pt),P=Je.get(Z,j.length),P.init(),j.push(P),ct.enabled===!0&&ct.isPresenting===!0){const Tt=L.xr.getDepthSensingMesh();Tt!==null&&$a(Tt,ge,-1/0,L.sortObjects)}$a(Z,ge,0,L.sortObjects),P.finish(),L.sortObjects===!0&&P.sort(Ie,Xe),Le=ct.enabled===!1||ct.isPresenting===!1||ct.hasDepthSensing()===!1,Le&&ht.addToRenderList(P,Z),this.info.render.frame++,qe===!0&&St.beginShadows();const xe=I.state.shadowsArray;if(_t.render(xe,Z,ge),qe===!0&&St.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Ee&&F.hasRenderPass())===!1){const Tt=P.opaque,nt=P.transmissive;if(I.setupLights(),ge.isArrayCamera){const Mt=ge.cameras;if(nt.length>0)for(let It=0,Ft=Mt.length;It<Ft;It++){const jt=Mt[It];fi(Tt,nt,Z,jt)}Le&&ht.render(Z);for(let It=0,Ft=Mt.length;It<Ft;It++){const jt=Mt[It];Rr(P,Z,jt,jt.viewport)}}else nt.length>0&&fi(Tt,nt,Z,ge),Le&&ht.render(Z),Rr(P,Z,ge)}$!==null&&G===0&&(he.updateMultisampleRenderTarget($),he.updateRenderTargetMipmap($)),Ee&&F.end(L),Z.isScene===!0&&Z.onAfterRender(L,Z,ge),vt.resetDefaultState(),ee=-1,te=null,O.pop(),O.length>0?(I=O[O.length-1],qe===!0&&St.setGlobalState(L.clippingPlanes,I.state.camera)):I=null,j.pop(),j.length>0?P=j[j.length-1]:P=null};function $a(Z,ge,Ce,Ee){if(Z.visible===!1)return;if(Z.layers.test(ge.layers)){if(Z.isGroup)Ce=Z.renderOrder;else if(Z.isLOD)Z.autoUpdate===!0&&Z.update(ge);else if(Z.isLight)I.pushLight(Z),Z.castShadow&&I.pushShadow(Z);else if(Z.isSprite){if(!Z.frustumCulled||ke.intersectsSprite(Z)){Ee&&Me.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(Ue);const Tt=ot.update(Z),nt=Z.material;nt.visible&&P.push(Z,Tt,nt,Ce,Me.z,null)}}else if((Z.isMesh||Z.isLine||Z.isPoints)&&(!Z.frustumCulled||ke.intersectsObject(Z))){const Tt=ot.update(Z),nt=Z.material;if(Ee&&(Z.boundingSphere!==void 0?(Z.boundingSphere===null&&Z.computeBoundingSphere(),Me.copy(Z.boundingSphere.center)):(Tt.boundingSphere===null&&Tt.computeBoundingSphere(),Me.copy(Tt.boundingSphere.center)),Me.applyMatrix4(Z.matrixWorld).applyMatrix4(Ue)),Array.isArray(nt)){const Mt=Tt.groups;for(let It=0,Ft=Mt.length;It<Ft;It++){const jt=Mt[It],$t=nt[jt.materialIndex];$t&&$t.visible&&P.push(Z,Tt,$t,Ce,Me.z,jt)}}else nt.visible&&P.push(Z,Tt,nt,Ce,Me.z,null)}}const at=Z.children;for(let Tt=0,nt=at.length;Tt<nt;Tt++)$a(at[Tt],ge,Ce,Ee)}function Rr(Z,ge,Ce,Ee){const{opaque:xe,transmissive:at,transparent:Tt}=Z;I.setupLightsView(Ce),qe===!0&&St.setGlobalState(L.clippingPlanes,Ce),Ee&&et.viewport(K.copy(Ee)),xe.length>0&&Wa(xe,ge,Ce),at.length>0&&Wa(at,ge,Ce),Tt.length>0&&Wa(Tt,ge,Ce),et.buffers.depth.setTest(!0),et.buffers.depth.setMask(!0),et.buffers.color.setMask(!0),et.setPolygonOffset(!1)}function fi(Z,ge,Ce,Ee){if((Ce.isScene===!0?Ce.overrideMaterial:null)!==null)return;if(I.state.transmissionRenderTarget[Ee.id]===void 0){const $t=ft.has("EXT_color_buffer_half_float")||ft.has("EXT_color_buffer_float");I.state.transmissionRenderTarget[Ee.id]=new Hs(1,1,{generateMipmaps:!0,type:$t?Fl:cs,minFilter:Cc,samples:Ct.samples,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Fn.workingColorSpace})}const at=I.state.transmissionRenderTarget[Ee.id],Tt=Ee.viewport||K;at.setSize(Tt.z*L.transmissionResolutionScale,Tt.w*L.transmissionResolutionScale);const nt=L.getRenderTarget(),Mt=L.getActiveCubeFace(),It=L.getActiveMipmapLevel();L.setRenderTarget(at),L.getClearColor(ce),de=L.getClearAlpha(),de<1&&L.setClearColor(16777215,.5),L.clear(),Le&&ht.render(Ce);const Ft=L.toneMapping;L.toneMapping=Xo;const jt=Ee.viewport;if(Ee.viewport!==void 0&&(Ee.viewport=void 0),I.setupLightsView(Ee),qe===!0&&St.setGlobalState(L.clippingPlanes,Ee),Wa(Z,Ce,Ee),he.updateMultisampleRenderTarget(at),he.updateRenderTargetMipmap(at),ft.has("WEBGL_multisampled_render_to_texture")===!1){let $t=!1;for(let Vn=0,cr=ge.length;Vn<cr;Vn++){const nr=ge[Vn],{object:sn,geometry:gt,material:Un,group:Kt}=nr;if(Un.side===Mc&&sn.layers.test(Ee.layers)){const ni=Un.side;Un.side=ps,Un.needsUpdate=!0,Ka(sn,Ce,Ee,gt,Un,Kt),Un.side=ni,Un.needsUpdate=!0,$t=!0}}$t===!0&&(he.updateMultisampleRenderTarget(at),he.updateRenderTargetMipmap(at))}L.setRenderTarget(nt,Mt,It),L.setClearColor(ce,de),jt!==void 0&&(Ee.viewport=jt),L.toneMapping=Ft}function Wa(Z,ge,Ce){const Ee=ge.isScene===!0?ge.overrideMaterial:null;for(let xe=0,at=Z.length;xe<at;xe++){const Tt=Z[xe],{object:nt,geometry:Mt,group:It}=Tt;let Ft=Tt.material;Ft.allowOverride===!0&&Ee!==null&&(Ft=Ee),nt.layers.test(Ce.layers)&&Ka(nt,ge,Ce,Mt,Ft,It)}}function Ka(Z,ge,Ce,Ee,xe,at){Z.onBeforeRender(L,ge,Ce,Ee,xe,at),Z.modelViewMatrix.multiplyMatrices(Ce.matrixWorldInverse,Z.matrixWorld),Z.normalMatrix.getNormalMatrix(Z.modelViewMatrix),xe.onBeforeRender(L,ge,Ce,Ee,Z,at),xe.transparent===!0&&xe.side===Mc&&xe.forceSinglePass===!1?(xe.side=ps,xe.needsUpdate=!0,L.renderBufferDirect(Ce,ge,Ee,xe,Z,at),xe.side=Yu,xe.needsUpdate=!0,L.renderBufferDirect(Ce,ge,Ee,xe,Z,at),xe.side=Mc):L.renderBufferDirect(Ce,ge,Ee,xe,Z,at),Z.onAfterRender(L,ge,Ce,Ee,xe,at)}function Xa(Z,ge,Ce){ge.isScene!==!0&&(ge=Fe);const Ee=q.get(Z),xe=I.state.lights,at=I.state.shadowsArray,Tt=xe.state.version,nt=Rt.getParameters(Z,xe.state,at,ge,Ce),Mt=Rt.getProgramCacheKey(nt);let It=Ee.programs;Ee.environment=Z.isMeshStandardMaterial?ge.environment:null,Ee.fog=ge.fog,Ee.envMap=(Z.isMeshStandardMaterial?Ge:Oe).get(Z.envMap||Ee.environment),Ee.envMapRotation=Ee.environment!==null&&Z.envMap===null?ge.environmentRotation:Z.envMapRotation,It===void 0&&(Z.addEventListener("dispose",Pi),It=new Map,Ee.programs=It);let Ft=It.get(Mt);if(Ft!==void 0){if(Ee.currentProgram===Ft&&Ee.lightsStateVersion===Tt)return Wc(Z,nt),Ft}else nt.uniforms=Rt.getUniforms(Z),Z.onBeforeCompile(nt,L),Ft=Rt.acquireProgram(nt,Mt),It.set(Mt,Ft),Ee.uniforms=nt.uniforms;const jt=Ee.uniforms;return(!Z.isShaderMaterial&&!Z.isRawShaderMaterial||Z.clipping===!0)&&(jt.clippingPlanes=St.uniform),Wc(Z,nt),Ee.needsLights=sl(Z),Ee.lightsStateVersion=Tt,Ee.needsLights&&(jt.ambientLightColor.value=xe.state.ambient,jt.lightProbe.value=xe.state.probe,jt.directionalLights.value=xe.state.directional,jt.directionalLightShadows.value=xe.state.directionalShadow,jt.spotLights.value=xe.state.spot,jt.spotLightShadows.value=xe.state.spotShadow,jt.rectAreaLights.value=xe.state.rectArea,jt.ltc_1.value=xe.state.rectAreaLTC1,jt.ltc_2.value=xe.state.rectAreaLTC2,jt.pointLights.value=xe.state.point,jt.pointLightShadows.value=xe.state.pointShadow,jt.hemisphereLights.value=xe.state.hemi,jt.directionalShadowMap.value=xe.state.directionalShadowMap,jt.directionalShadowMatrix.value=xe.state.directionalShadowMatrix,jt.spotShadowMap.value=xe.state.spotShadowMap,jt.spotLightMatrix.value=xe.state.spotLightMatrix,jt.spotLightMap.value=xe.state.spotLightMap,jt.pointShadowMap.value=xe.state.pointShadowMap,jt.pointShadowMatrix.value=xe.state.pointShadowMatrix),Ee.currentProgram=Ft,Ee.uniformsList=null,Ft}function Kl(Z){if(Z.uniformsList===null){const ge=Z.currentProgram.getUniforms();Z.uniformsList=e1.seqWithValue(ge.seq,Z.uniforms)}return Z.uniformsList}function Wc(Z,ge){const Ce=q.get(Z);Ce.outputColorSpace=ge.outputColorSpace,Ce.batching=ge.batching,Ce.batchingColor=ge.batchingColor,Ce.instancing=ge.instancing,Ce.instancingColor=ge.instancingColor,Ce.instancingMorph=ge.instancingMorph,Ce.skinning=ge.skinning,Ce.morphTargets=ge.morphTargets,Ce.morphNormals=ge.morphNormals,Ce.morphColors=ge.morphColors,Ce.morphTargetsCount=ge.morphTargetsCount,Ce.numClippingPlanes=ge.numClippingPlanes,Ce.numIntersection=ge.numClipIntersection,Ce.vertexAlphas=ge.vertexAlphas,Ce.vertexTangents=ge.vertexTangents,Ce.toneMapping=ge.toneMapping}function Ws(Z,ge,Ce,Ee,xe){ge.isScene!==!0&&(ge=Fe),he.resetTextureUnits();const at=ge.fog,Tt=Ee.isMeshStandardMaterial?ge.environment:null,nt=$===null?L.outputColorSpace:$.isXRRenderTarget===!0?$.texture.colorSpace:_f,Mt=(Ee.isMeshStandardMaterial?Ge:Oe).get(Ee.envMap||Tt),It=Ee.vertexColors===!0&&!!Ce.attributes.color&&Ce.attributes.color.itemSize===4,Ft=!!Ce.attributes.tangent&&(!!Ee.normalMap||Ee.anisotropy>0),jt=!!Ce.morphAttributes.position,$t=!!Ce.morphAttributes.normal,Vn=!!Ce.morphAttributes.color;let cr=Xo;Ee.toneMapped&&($===null||$.isXRRenderTarget===!0)&&(cr=L.toneMapping);const nr=Ce.morphAttributes.position||Ce.morphAttributes.normal||Ce.morphAttributes.color,sn=nr!==void 0?nr.length:0,gt=q.get(Ee),Un=I.state.lights;if(qe===!0&&(pt===!0||Z!==te)){const bi=Z===te&&Ee.id===ee;St.setState(Ee,Z,bi)}let Kt=!1;Ee.version===gt.__version?(gt.needsLights&&gt.lightsStateVersion!==Un.state.version||gt.outputColorSpace!==nt||xe.isBatchedMesh&&gt.batching===!1||!xe.isBatchedMesh&&gt.batching===!0||xe.isBatchedMesh&&gt.batchingColor===!0&&xe.colorTexture===null||xe.isBatchedMesh&&gt.batchingColor===!1&&xe.colorTexture!==null||xe.isInstancedMesh&&gt.instancing===!1||!xe.isInstancedMesh&&gt.instancing===!0||xe.isSkinnedMesh&&gt.skinning===!1||!xe.isSkinnedMesh&&gt.skinning===!0||xe.isInstancedMesh&&gt.instancingColor===!0&&xe.instanceColor===null||xe.isInstancedMesh&&gt.instancingColor===!1&&xe.instanceColor!==null||xe.isInstancedMesh&&gt.instancingMorph===!0&&xe.morphTexture===null||xe.isInstancedMesh&&gt.instancingMorph===!1&&xe.morphTexture!==null||gt.envMap!==Mt||Ee.fog===!0&&gt.fog!==at||gt.numClippingPlanes!==void 0&&(gt.numClippingPlanes!==St.numPlanes||gt.numIntersection!==St.numIntersection)||gt.vertexAlphas!==It||gt.vertexTangents!==Ft||gt.morphTargets!==jt||gt.morphNormals!==$t||gt.morphColors!==Vn||gt.toneMapping!==cr||gt.morphTargetsCount!==sn)&&(Kt=!0):(Kt=!0,gt.__version=Ee.version);let ni=gt.currentProgram;Kt===!0&&(ni=Xa(Ee,ge,xe));let Ks=!1,vr=!1,oa=!1;const qn=ni.getUniforms(),hi=gt.uniforms;if(et.useProgram(ni.program)&&(Ks=!0,vr=!0,oa=!0),Ee.id!==ee&&(ee=Ee.id,vr=!0),Ks||te!==Z){et.buffers.depth.getReversed()&&Z.reversedDepth!==!0&&(Z._reversedDepth=!0,Z.updateProjectionMatrix()),qn.setValue(ie,"projectionMatrix",Z.projectionMatrix),qn.setValue(ie,"viewMatrix",Z.matrixWorldInverse);const _i=qn.map.cameraPosition;_i!==void 0&&_i.setValue(ie,xt.setFromMatrixPosition(Z.matrixWorld)),Ct.logarithmicDepthBuffer&&qn.setValue(ie,"logDepthBufFC",2/(Math.log(Z.far+1)/Math.LN2)),(Ee.isMeshPhongMaterial||Ee.isMeshToonMaterial||Ee.isMeshLambertMaterial||Ee.isMeshBasicMaterial||Ee.isMeshStandardMaterial||Ee.isShaderMaterial)&&qn.setValue(ie,"isOrthographic",Z.isOrthographicCamera===!0),te!==Z&&(te=Z,vr=!0,oa=!0)}if(gt.needsLights&&(Un.state.directionalShadowMap.length>0&&qn.setValue(ie,"directionalShadowMap",Un.state.directionalShadowMap,he),Un.state.spotShadowMap.length>0&&qn.setValue(ie,"spotShadowMap",Un.state.spotShadowMap,he),Un.state.pointShadowMap.length>0&&qn.setValue(ie,"pointShadowMap",Un.state.pointShadowMap,he)),xe.isSkinnedMesh){qn.setOptional(ie,xe,"bindMatrix"),qn.setOptional(ie,xe,"bindMatrixInverse");const bi=xe.skeleton;bi&&(bi.boneTexture===null&&bi.computeBoneTexture(),qn.setValue(ie,"boneTexture",bi.boneTexture,he))}xe.isBatchedMesh&&(qn.setOptional(ie,xe,"batchingTexture"),qn.setValue(ie,"batchingTexture",xe._matricesTexture,he),qn.setOptional(ie,xe,"batchingIdTexture"),qn.setValue(ie,"batchingIdTexture",xe._indirectTexture,he),qn.setOptional(ie,xe,"batchingColorTexture"),xe._colorsTexture!==null&&qn.setValue(ie,"batchingColorTexture",xe._colorsTexture,he));const ri=Ce.morphAttributes;if((ri.position!==void 0||ri.normal!==void 0||ri.color!==void 0)&&pn.update(xe,Ce,ni),(vr||gt.receiveShadow!==xe.receiveShadow)&&(gt.receiveShadow=xe.receiveShadow,qn.setValue(ie,"receiveShadow",xe.receiveShadow)),Ee.isMeshGouraudMaterial&&Ee.envMap!==null&&(hi.envMap.value=Mt,hi.flipEnvMap.value=Mt.isCubeTexture&&Mt.isRenderTargetTexture===!1?-1:1),Ee.isMeshStandardMaterial&&Ee.envMap===null&&ge.environment!==null&&(hi.envMapIntensity.value=ge.environmentIntensity),hi.dfgLUT!==void 0&&(hi.dfgLUT.value=kRe()),vr&&(qn.setValue(ie,"toneMappingExposure",L.toneMappingExposure),gt.needsLights&&al(hi,oa),at&&Ee.fog===!0&&Vt.refreshFogUniforms(hi,at),Vt.refreshMaterialUniforms(hi,Ee,me,ae,I.state.transmissionRenderTarget[Z.id]),e1.upload(ie,Kl(gt),hi,he)),Ee.isShaderMaterial&&Ee.uniformsNeedUpdate===!0&&(e1.upload(ie,Kl(gt),hi,he),Ee.uniformsNeedUpdate=!1),Ee.isSpriteMaterial&&qn.setValue(ie,"center",xe.center),qn.setValue(ie,"modelViewMatrix",xe.modelViewMatrix),qn.setValue(ie,"normalMatrix",xe.normalMatrix),qn.setValue(ie,"modelMatrix",xe.matrixWorld),Ee.isShaderMaterial||Ee.isRawShaderMaterial){const bi=Ee.uniformsGroups;for(let _i=0,Kc=bi.length;_i<Kc;_i++){const vs=bi[_i];Ze.update(vs,ni),Ze.bind(vs,ni)}}return ni}function al(Z,ge){Z.ambientLightColor.needsUpdate=ge,Z.lightProbe.needsUpdate=ge,Z.directionalLights.needsUpdate=ge,Z.directionalLightShadows.needsUpdate=ge,Z.pointLights.needsUpdate=ge,Z.pointLightShadows.needsUpdate=ge,Z.spotLights.needsUpdate=ge,Z.spotLightShadows.needsUpdate=ge,Z.rectAreaLights.needsUpdate=ge,Z.hemisphereLights.needsUpdate=ge}function sl(Z){return Z.isMeshLambertMaterial||Z.isMeshToonMaterial||Z.isMeshPhongMaterial||Z.isMeshStandardMaterial||Z.isShadowMaterial||Z.isShaderMaterial&&Z.lights===!0}this.getActiveCubeFace=function(){return V},this.getActiveMipmapLevel=function(){return G},this.getRenderTarget=function(){return $},this.setRenderTargetTextures=function(Z,ge,Ce){const Ee=q.get(Z);Ee.__autoAllocateDepthBuffer=Z.resolveDepthBuffer===!1,Ee.__autoAllocateDepthBuffer===!1&&(Ee.__useRenderToTexture=!1),q.get(Z.texture).__webglTexture=ge,q.get(Z.depthTexture).__webglTexture=Ee.__autoAllocateDepthBuffer?void 0:Ce,Ee.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(Z,ge){const Ce=q.get(Z);Ce.__webglFramebuffer=ge,Ce.__useDefaultFramebuffer=ge===void 0};const ol=ie.createFramebuffer();this.setRenderTarget=function(Z,ge=0,Ce=0){$=Z,V=ge,G=Ce;let Ee=null,xe=!1,at=!1;if(Z){const nt=q.get(Z);if(nt.__useDefaultFramebuffer!==void 0){et.bindFramebuffer(ie.FRAMEBUFFER,nt.__webglFramebuffer),K.copy(Z.viewport),X.copy(Z.scissor),re=Z.scissorTest,et.viewport(K),et.scissor(X),et.setScissorTest(re),ee=-1;return}else if(nt.__webglFramebuffer===void 0)he.setupRenderTarget(Z);else if(nt.__hasExternalTextures)he.rebindTextures(Z,q.get(Z.texture).__webglTexture,q.get(Z.depthTexture).__webglTexture);else if(Z.depthBuffer){const Ft=Z.depthTexture;if(nt.__boundDepthTexture!==Ft){if(Ft!==null&&q.has(Ft)&&(Z.width!==Ft.image.width||Z.height!==Ft.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");he.setupDepthRenderbuffer(Z)}}const Mt=Z.texture;(Mt.isData3DTexture||Mt.isDataArrayTexture||Mt.isCompressedArrayTexture)&&(at=!0);const It=q.get(Z).__webglFramebuffer;Z.isWebGLCubeRenderTarget?(Array.isArray(It[ge])?Ee=It[ge][Ce]:Ee=It[ge],xe=!0):Z.samples>0&&he.useMultisampledRTT(Z)===!1?Ee=q.get(Z).__webglMultisampledFramebuffer:Array.isArray(It)?Ee=It[Ce]:Ee=It,K.copy(Z.viewport),X.copy(Z.scissor),re=Z.scissorTest}else K.copy(ve).multiplyScalar(me).floor(),X.copy(_e).multiplyScalar(me).floor(),re=Ye;if(Ce!==0&&(Ee=ol),et.bindFramebuffer(ie.FRAMEBUFFER,Ee)&&et.drawBuffers(Z,Ee),et.viewport(K),et.scissor(X),et.setScissorTest(re),xe){const nt=q.get(Z.texture);ie.framebufferTexture2D(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_CUBE_MAP_POSITIVE_X+ge,nt.__webglTexture,Ce)}else if(at){const nt=ge;for(let Mt=0;Mt<Z.textures.length;Mt++){const It=q.get(Z.textures[Mt]);ie.framebufferTextureLayer(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0+Mt,It.__webglTexture,Ce,nt)}}else if(Z!==null&&Ce!==0){const nt=q.get(Z.texture);ie.framebufferTexture2D(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,nt.__webglTexture,Ce)}ee=-1},this.readRenderTargetPixels=function(Z,ge,Ce,Ee,xe,at,Tt,nt=0){if(!(Z&&Z.isWebGLRenderTarget)){Bt("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Mt=q.get(Z).__webglFramebuffer;if(Z.isWebGLCubeRenderTarget&&Tt!==void 0&&(Mt=Mt[Tt]),Mt){et.bindFramebuffer(ie.FRAMEBUFFER,Mt);try{const It=Z.textures[nt],Ft=It.format,jt=It.type;if(!Ct.textureFormatReadable(Ft)){Bt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ct.textureTypeReadable(jt)){Bt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ge>=0&&ge<=Z.width-Ee&&Ce>=0&&Ce<=Z.height-xe&&(Z.textures.length>1&&ie.readBuffer(ie.COLOR_ATTACHMENT0+nt),ie.readPixels(ge,Ce,Ee,xe,rt.convert(Ft),rt.convert(jt),at))}finally{const It=$!==null?q.get($).__webglFramebuffer:null;et.bindFramebuffer(ie.FRAMEBUFFER,It)}}},this.readRenderTargetPixelsAsync=async function(Z,ge,Ce,Ee,xe,at,Tt,nt=0){if(!(Z&&Z.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Mt=q.get(Z).__webglFramebuffer;if(Z.isWebGLCubeRenderTarget&&Tt!==void 0&&(Mt=Mt[Tt]),Mt)if(ge>=0&&ge<=Z.width-Ee&&Ce>=0&&Ce<=Z.height-xe){et.bindFramebuffer(ie.FRAMEBUFFER,Mt);const It=Z.textures[nt],Ft=It.format,jt=It.type;if(!Ct.textureFormatReadable(Ft))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ct.textureTypeReadable(jt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const $t=ie.createBuffer();ie.bindBuffer(ie.PIXEL_PACK_BUFFER,$t),ie.bufferData(ie.PIXEL_PACK_BUFFER,at.byteLength,ie.STREAM_READ),Z.textures.length>1&&ie.readBuffer(ie.COLOR_ATTACHMENT0+nt),ie.readPixels(ge,Ce,Ee,xe,rt.convert(Ft),rt.convert(jt),0);const Vn=$!==null?q.get($).__webglFramebuffer:null;et.bindFramebuffer(ie.FRAMEBUFFER,Vn);const cr=ie.fenceSync(ie.SYNC_GPU_COMMANDS_COMPLETE,0);return ie.flush(),await j1e(ie,cr,4),ie.bindBuffer(ie.PIXEL_PACK_BUFFER,$t),ie.getBufferSubData(ie.PIXEL_PACK_BUFFER,0,at),ie.deleteBuffer($t),ie.deleteSync(cr),at}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(Z,ge=null,Ce=0){const Ee=Math.pow(2,-Ce),xe=Math.floor(Z.image.width*Ee),at=Math.floor(Z.image.height*Ee),Tt=ge!==null?ge.x:0,nt=ge!==null?ge.y:0;he.setTexture2D(Z,0),ie.copyTexSubImage2D(ie.TEXTURE_2D,Ce,0,0,Tt,nt,xe,at),et.unbindTexture()};const Xl=ie.createFramebuffer(),mo=ie.createFramebuffer();this.copyTextureToTexture=function(Z,ge,Ce=null,Ee=null,xe=0,at=null){at===null&&(xe!==0?(mv("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),at=xe,xe=0):at=0);let Tt,nt,Mt,It,Ft,jt,$t,Vn,cr;const nr=Z.isCompressedTexture?Z.mipmaps[at]:Z.image;if(Ce!==null)Tt=Ce.max.x-Ce.min.x,nt=Ce.max.y-Ce.min.y,Mt=Ce.isBox3?Ce.max.z-Ce.min.z:1,It=Ce.min.x,Ft=Ce.min.y,jt=Ce.isBox3?Ce.min.z:0;else{const ri=Math.pow(2,-xe);Tt=Math.floor(nr.width*ri),nt=Math.floor(nr.height*ri),Z.isDataArrayTexture?Mt=nr.depth:Z.isData3DTexture?Mt=Math.floor(nr.depth*ri):Mt=1,It=0,Ft=0,jt=0}Ee!==null?($t=Ee.x,Vn=Ee.y,cr=Ee.z):($t=0,Vn=0,cr=0);const sn=rt.convert(ge.format),gt=rt.convert(ge.type);let Un;ge.isData3DTexture?(he.setTexture3D(ge,0),Un=ie.TEXTURE_3D):ge.isDataArrayTexture||ge.isCompressedArrayTexture?(he.setTexture2DArray(ge,0),Un=ie.TEXTURE_2D_ARRAY):(he.setTexture2D(ge,0),Un=ie.TEXTURE_2D),ie.pixelStorei(ie.UNPACK_FLIP_Y_WEBGL,ge.flipY),ie.pixelStorei(ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ge.premultiplyAlpha),ie.pixelStorei(ie.UNPACK_ALIGNMENT,ge.unpackAlignment);const Kt=ie.getParameter(ie.UNPACK_ROW_LENGTH),ni=ie.getParameter(ie.UNPACK_IMAGE_HEIGHT),Ks=ie.getParameter(ie.UNPACK_SKIP_PIXELS),vr=ie.getParameter(ie.UNPACK_SKIP_ROWS),oa=ie.getParameter(ie.UNPACK_SKIP_IMAGES);ie.pixelStorei(ie.UNPACK_ROW_LENGTH,nr.width),ie.pixelStorei(ie.UNPACK_IMAGE_HEIGHT,nr.height),ie.pixelStorei(ie.UNPACK_SKIP_PIXELS,It),ie.pixelStorei(ie.UNPACK_SKIP_ROWS,Ft),ie.pixelStorei(ie.UNPACK_SKIP_IMAGES,jt);const qn=Z.isDataArrayTexture||Z.isData3DTexture,hi=ge.isDataArrayTexture||ge.isData3DTexture;if(Z.isDepthTexture){const ri=q.get(Z),bi=q.get(ge),_i=q.get(ri.__renderTarget),Kc=q.get(bi.__renderTarget);et.bindFramebuffer(ie.READ_FRAMEBUFFER,_i.__webglFramebuffer),et.bindFramebuffer(ie.DRAW_FRAMEBUFFER,Kc.__webglFramebuffer);for(let vs=0;vs<Mt;vs++)qn&&(ie.framebufferTextureLayer(ie.READ_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,q.get(Z).__webglTexture,xe,jt+vs),ie.framebufferTextureLayer(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,q.get(ge).__webglTexture,at,cr+vs)),ie.blitFramebuffer(It,Ft,Tt,nt,$t,Vn,Tt,nt,ie.DEPTH_BUFFER_BIT,ie.NEAREST);et.bindFramebuffer(ie.READ_FRAMEBUFFER,null),et.bindFramebuffer(ie.DRAW_FRAMEBUFFER,null)}else if(xe!==0||Z.isRenderTargetTexture||q.has(Z)){const ri=q.get(Z),bi=q.get(ge);et.bindFramebuffer(ie.READ_FRAMEBUFFER,Xl),et.bindFramebuffer(ie.DRAW_FRAMEBUFFER,mo);for(let _i=0;_i<Mt;_i++)qn?ie.framebufferTextureLayer(ie.READ_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ri.__webglTexture,xe,jt+_i):ie.framebufferTexture2D(ie.READ_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,ri.__webglTexture,xe),hi?ie.framebufferTextureLayer(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,bi.__webglTexture,at,cr+_i):ie.framebufferTexture2D(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,bi.__webglTexture,at),xe!==0?ie.blitFramebuffer(It,Ft,Tt,nt,$t,Vn,Tt,nt,ie.COLOR_BUFFER_BIT,ie.NEAREST):hi?ie.copyTexSubImage3D(Un,at,$t,Vn,cr+_i,It,Ft,Tt,nt):ie.copyTexSubImage2D(Un,at,$t,Vn,It,Ft,Tt,nt);et.bindFramebuffer(ie.READ_FRAMEBUFFER,null),et.bindFramebuffer(ie.DRAW_FRAMEBUFFER,null)}else hi?Z.isDataTexture||Z.isData3DTexture?ie.texSubImage3D(Un,at,$t,Vn,cr,Tt,nt,Mt,sn,gt,nr.data):ge.isCompressedArrayTexture?ie.compressedTexSubImage3D(Un,at,$t,Vn,cr,Tt,nt,Mt,sn,nr.data):ie.texSubImage3D(Un,at,$t,Vn,cr,Tt,nt,Mt,sn,gt,nr):Z.isDataTexture?ie.texSubImage2D(ie.TEXTURE_2D,at,$t,Vn,Tt,nt,sn,gt,nr.data):Z.isCompressedTexture?ie.compressedTexSubImage2D(ie.TEXTURE_2D,at,$t,Vn,nr.width,nr.height,sn,nr.data):ie.texSubImage2D(ie.TEXTURE_2D,at,$t,Vn,Tt,nt,sn,gt,nr);ie.pixelStorei(ie.UNPACK_ROW_LENGTH,Kt),ie.pixelStorei(ie.UNPACK_IMAGE_HEIGHT,ni),ie.pixelStorei(ie.UNPACK_SKIP_PIXELS,Ks),ie.pixelStorei(ie.UNPACK_SKIP_ROWS,vr),ie.pixelStorei(ie.UNPACK_SKIP_IMAGES,oa),at===0&&ge.generateMipmaps&&ie.generateMipmap(Un),et.unbindTexture()},this.initRenderTarget=function(Z){q.get(Z).__webglFramebuffer===void 0&&he.setupRenderTarget(Z)},this.initTexture=function(Z){Z.isCubeTexture?he.setTextureCube(Z,0):Z.isData3DTexture?he.setTexture3D(Z,0):Z.isDataArrayTexture||Z.isCompressedArrayTexture?he.setTexture2DArray(Z,0):he.setTexture2D(Z,0),et.unbindTexture()},this.resetState=function(){V=0,G=0,$=null,et.reset(),vt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return co}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=Fn._getDrawingBufferColorSpace(e),n.unpackColorSpace=Fn._getUnpackColorSpace()}}const MRe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:uA,AddEquation:ff,AddOperation:tW,AdditiveAnimationBlendMode:nD,AdditiveBlending:Y3,AgXToneMapping:Wj,AlphaFormat:eD,AlwaysCompare:hW,AlwaysDepth:mT,AlwaysStencilFunc:eO,AmbientLight:sK,AnimationAction:pK,AnimationClip:Sb,AnimationLoader:EEe,AnimationMixer:eAe,AnimationObjectGroup:ZEe,AnimationUtils:_Ee,ArcCurve:PW,ArrayCamera:dK,ArrowHelper:AAe,AttachedBindMode:Q3,Audio:fK,AudioAnalyser:VEe,AudioContext:MD,AudioListener:zEe,AudioLoader:DEe,AxesHelper:kAe,BackSide:ps,BasicDepthPacking:sW,BasicShadowMap:j7,BatchedMesh:kW,Bone:cD,BooleanKeyframeTrack:Mp,Box2:uAe,Box3:Ga,Box3Helper:TAe,BoxGeometry:kp,BoxHelper:SAe,BufferAttribute:gr,BufferGeometry:hn,BufferGeometryLoader:uK,ByteType:Yj,Cache:Rc,Camera:SA,CameraHelper:wAe,CanvasTexture:GTe,CapsuleGeometry:RA,CatmullRomCurve3:OW,CineonToneMapping:qj,CircleGeometry:IA,ClampToEdgeWrapping:Fs,Clock:ND,Color:kt,ColorKeyframeTrack:TD,ColorManagement:Fn,CompressedArrayTexture:VTe,CompressedCubeTexture:HTe,CompressedTexture:CA,CompressedTextureLoader:AEe,ConeGeometry:Bb,ConstantAlphaFactor:Z7,ConstantColorFactor:Y7,Controls:NAe,CubeCamera:_W,CubeDepthTexture:RW,CubeReflectionMapping:Lc,CubeRefractionMapping:bf,CubeTexture:Ub,CubeTextureLoader:kEe,CubeUVReflectionMapping:Ov,CubicBezierCurve:hD,CubicBezierCurve3:jW,CubicInterpolant:ZW,CullFaceBack:X3,CullFaceFront:O7,CullFaceFrontBack:qSe,CullFaceNone:P7,Curve:Gl,CurvePath:LW,CustomBlending:D7,CustomToneMapping:$j,CylinderGeometry:zb,Cylindrical:cAe,Data3DTexture:wA,DataArrayTexture:_A,DataTexture:Yo,DataTextureLoader:MEe,DataUtils:hTe,DecrementStencilOp:c1e,DecrementWrapStencilOp:d1e,DefaultLoadingManager:tK,DepthFormat:Uc,DepthStencilFormat:mf,DepthTexture:yp,DetachedBindMode:nW,DirectionalLight:aK,DirectionalLightHelper:_Ae,DiscreteInterpolant:QW,DodecahedronGeometry:PA,DoubleSide:Mc,DstAlphaFactor:q7,DstColorFactor:W7,DynamicCopyUsage:A1e,DynamicDrawUsage:b1e,DynamicReadUsage:S1e,EdgesGeometry:IW,EllipseCurve:OA,EqualCompare:uW,EqualDepth:vT,EqualStencilFunc:m1e,EquirectangularReflectionMapping:lb,EquirectangularRefractionMapping:cb,Euler:po,EventDispatcher:Hc,ExternalTexture:dD,ExtrudeGeometry:jA,FileLoader:Ju,Float16BufferAttribute:bTe,Float32BufferAttribute:Ot,FloatType:ra,Fog:EA,FogExp2:TA,FramebufferTexture:FTe,FrontSide:Yu,Frustum:Dv,FrustumArray:NA,GLBufferAttribute:aAe,GLSL1:M1e,GLSL3:tO,GreaterCompare:dW,GreaterDepth:xT,GreaterEqualCompare:bA,GreaterEqualDepth:yT,GreaterEqualStencilFunc:x1e,GreaterStencilFunc:v1e,GridHelper:xAe,Group:Ig,HalfFloatType:Fl,HemisphereLight:nK,HemisphereLightHelper:yAe,IcosahedronGeometry:DA,ImageBitmapLoader:jEe,ImageLoader:Tb,ImageUtils:vW,IncrementStencilOp:l1e,IncrementWrapStencilOp:u1e,InstancedBufferAttribute:xv,InstancedBufferGeometry:cK,InstancedInterleavedBuffer:iAe,InstancedMesh:AW,Int16BufferAttribute:yTe,Int32BufferAttribute:xTe,Int8BufferAttribute:mTe,IntType:fA,InterleavedBuffer:kA,InterleavedBufferAttribute:vp,Interpolant:Hb,InterpolateDiscrete:fb,InterpolateLinear:QT,InterpolateSmooth:ZS,InterpolationSamplingMode:R1e,InterpolationSamplingType:C1e,InvertStencilOp:f1e,KeepStencilOp:Fh,KeyframeTrack:rl,LOD:TW,LatheGeometry:LA,Layers:vv,LessCompare:cW,LessDepth:gT,LessEqualCompare:xA,LessEqualDepth:mp,LessEqualStencilFunc:g1e,LessStencilFunc:p1e,Light:If,LightProbe:lK,Line:Sf,Line3:hAe,LineBasicMaterial:gs,LineCurve:pD,LineCurve3:DW,LineDashedMaterial:YW,LineLoop:MW,LineSegments:Gc,LinearFilter:wr,LinearInterpolant:SD,LinearMipMapLinearFilter:XSe,LinearMipMapNearestFilter:KSe,LinearMipmapLinearFilter:Cc,LinearMipmapNearestFilter:ix,LinearSRGBColorSpace:_f,LinearToneMapping:Hj,LinearTransfer:pb,Loader:$s,LoaderUtils:sO,LoadingManager:ED,LoopOnce:rW,LoopPingPong:aW,LoopRepeat:iW,MOUSE:HSe,Material:qa,MaterialLoader:GA,MathUtils:Z1e,Matrix2:OD,Matrix3:gn,Matrix4:an,MaxEquation:B7,Mesh:Ii,MeshBasicMaterial:Cf,MeshDepthMaterial:bD,MeshDistanceMaterial:_D,MeshLambertMaterial:KW,MeshMatcapMaterial:XW,MeshNormalMaterial:WW,MeshPhongMaterial:qW,MeshPhysicalMaterial:GW,MeshStandardMaterial:xD,MeshToonMaterial:$W,MinEquation:z7,MirroredRepeatWrapping:db,MixOperation:eW,MultiplyBlending:Z3,MultiplyOperation:Db,NearestFilter:ti,NearestMipMapLinearFilter:WSe,NearestMipMapNearestFilter:$Se,NearestMipmapLinearFilter:Cg,NearestMipmapNearestFilter:Xj,NeutralToneMapping:Kj,NeverCompare:lW,NeverDepth:pT,NeverStencilFunc:h1e,NoBlending:Oc,NoColorSpace:ju,NoNormalPacking:r1e,NoToneMapping:Xo,NormalAnimationBlendMode:yA,NormalBlending:ip,NormalGAPacking:a1e,NormalRGPacking:i1e,NotEqualCompare:fW,NotEqualDepth:bT,NotEqualStencilFunc:y1e,NumberKeyframeTrack:_b,Object3D:Wn,ObjectLoader:PEe,ObjectSpaceNormalMap:oW,OctahedronGeometry:Fb,OneFactor:V7,OneMinusConstantAlphaFactor:Q7,OneMinusConstantColorFactor:J7,OneMinusDstAlphaFactor:$7,OneMinusDstColorFactor:K7,OneMinusSrcAlphaFactor:hT,OneMinusSrcColorFactor:G7,OrthographicCamera:Cp,PCFShadowMap:zg,PCFSoftShadowMap:rx,PMREMGenerator:cO,Path:rE,PerspectiveCamera:na,Plane:cf,PlaneGeometry:Lv,PlaneHelper:EAe,PointLight:iK,PointLightHelper:gAe,Points:NW,PointsMaterial:uD,PolarGridHelper:bAe,PolyhedronGeometry:Rf,PositionalAudio:FEe,PropertyBinding:$n,PropertyMixer:hK,QuadraticBezierCurve:mD,QuadraticBezierCurve3:gD,Quaternion:Vs,QuaternionKeyframeTrack:Gb,QuaternionLinearInterpolant:eK,R11_EAC_Format:MT,RED_GREEN_RGTC2_Format:JT,RED_RGTC1_Format:XT,REVISION:cA,RG11_EAC_Format:CT,RGBADepthPacking:e1e,RGBAFormat:ia,RGBAIntegerFormat:vA,RGBA_ASTC_10x10_Format:HT,RGBA_ASTC_10x5_Format:BT,RGBA_ASTC_10x6_Format:FT,RGBA_ASTC_10x8_Format:VT,RGBA_ASTC_12x10_Format:GT,RGBA_ASTC_12x12_Format:qT,RGBA_ASTC_4x4_Format:IT,RGBA_ASTC_5x4_Format:PT,RGBA_ASTC_5x5_Format:OT,RGBA_ASTC_6x5_Format:jT,RGBA_ASTC_6x6_Format:DT,RGBA_ASTC_8x5_Format:LT,RGBA_ASTC_8x6_Format:UT,RGBA_ASTC_8x8_Format:zT,RGBA_BPTC_Format:$T,RGBA_ETC2_EAC_Format:kT,RGBA_PVRTC_2BPPV1_Format:TT,RGBA_PVRTC_4BPPV1_Format:ST,RGBA_S3TC_DXT1_Format:sx,RGBA_S3TC_DXT3_Format:ox,RGBA_S3TC_DXT5_Format:lx,RGBDepthPacking:t1e,RGBFormat:tD,RGBIntegerFormat:YSe,RGB_BPTC_SIGNED_Format:WT,RGB_BPTC_UNSIGNED_Format:KT,RGB_ETC1_Format:ET,RGB_ETC2_Format:AT,RGB_PVRTC_2BPPV1_Format:wT,RGB_PVRTC_4BPPV1_Format:_T,RGB_S3TC_DXT1_Format:ax,RGDepthPacking:n1e,RGFormat:gp,RGIntegerFormat:gA,RawShaderMaterial:yD,Ray:jv,Raycaster:PD,RectAreaLight:oK,RedFormat:mA,RedIntegerFormat:Lb,ReinhardToneMapping:Gj,RenderTarget:iD,RenderTarget3D:tAe,RepeatWrapping:ub,ReplaceStencilOp:o1e,ReverseSubtractEquation:U7,RingGeometry:UA,SIGNED_R11_EAC_Format:NT,SIGNED_RED_GREEN_RGTC2_Format:ZT,SIGNED_RED_RGTC1_Format:YT,SIGNED_RG11_EAC_Format:RT,SRGBColorSpace:Ba,SRGBTransfer:or,Scene:AA,ShaderChunk:Sn,ShaderLib:Ol,ShaderMaterial:Gs,ShadowMaterial:HW,Shape:sp,ShapeGeometry:zA,ShapePath:MAe,ShapeUtils:Ll,ShortType:Jj,Skeleton:MA,SkeletonHelper:mAe,SkinnedMesh:EW,Source:gf,Sphere:Sa,SphereGeometry:Vb,Spherical:lAe,SphericalHarmonics3:kD,SplineCurve:vD,SpotLight:rK,SpotLightHelper:pAe,Sprite:SW,SpriteMaterial:lD,SrcAlphaFactor:fT,SrcAlphaSaturateFactor:X7,SrcColorFactor:H7,StaticCopyUsage:E1e,StaticDrawUsage:mb,StaticReadUsage:w1e,StereoCamera:LEe,StreamCopyUsage:k1e,StreamDrawUsage:_1e,StreamReadUsage:T1e,StringKeyframeTrack:Np,SubtractEquation:L7,SubtractiveBlending:J3,TOUCH:GSe,TangentSpaceNormalMap:Nf,TetrahedronGeometry:BA,Texture:di,TextureLoader:NEe,TextureUtils:OAe,Timer:sAe,TimestampQuery:N1e,TorusGeometry:FA,TorusKnotGeometry:VA,Triangle:zs,TriangleFanDrawMode:QSe,TriangleStripDrawMode:ZSe,TrianglesDrawMode:JSe,TubeGeometry:HA,UVMapping:dA,Uint16BufferAttribute:aD,Uint32BufferAttribute:sD,Uint8BufferAttribute:gTe,Uint8ClampedBufferAttribute:vTe,Uniform:ID,UniformsGroup:rAe,UniformsLib:bt,UniformsUtils:bW,UnsignedByteType:cs,UnsignedInt101111Type:Qj,UnsignedInt248Type:hv,UnsignedInt5999Type:Zj,UnsignedIntType:tl,UnsignedShort4444Type:hA,UnsignedShort5551Type:pA,UnsignedShortType:fv,VSMShadowMap:Jh,Vector2:We,Vector3:se,Vector4:br,VectorKeyframeTrack:wb,VideoFrameTexture:BTe,VideoTexture:CW,WebGL3DRenderTarget:rTe,WebGLArrayRenderTarget:nTe,WebGLCoordinateSystem:co,WebGLCubeRenderTarget:oD,WebGLRenderTarget:Hs,WebGLRenderer:wK,WebGLUtils:_K,WebGPUCoordinateSystem:pv,WebXRController:QS,WireframeGeometry:VW,WrapAroundEnding:hb,ZeroCurvatureEnding:Zh,ZeroFactor:F7,ZeroSlopeEnding:Qh,ZeroStencilOp:s1e,createCanvasElement:gW,error:Bt,getConsoleFunction:O1e,log:vb,setConsoleFunction:P1e,warn:yt,warnOnce:mv},Symbol.toStringTag,{value:"Module"}));var FI={exports:{}},VI={},HI={exports:{}},GI={};var pH;function NRe(){if(pH)return GI;pH=1;var t=Ab();function e(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function o(m,v){var x=v(),_=r({inst:{value:x,getSnapshot:v}}),T=_[0].inst,w=_[1];return a(function(){T.value=x,T.getSnapshot=v,c(T)&&w({inst:T})},[m,x,v]),i(function(){return c(T)&&w({inst:T}),m(function(){c(T)&&w({inst:T})})},[m]),s(x),x}function c(m){var v=m.getSnapshot;m=m.value;try{var x=v();return!n(m,x)}catch{return!0}}function u(m,v){return v()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return GI.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,GI}var mH;function CRe(){return mH||(mH=1,HI.exports=NRe()),HI.exports}var gH;function RRe(){if(gH)return VI;gH=1;var t=Ab(),e=CRe();function n(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,o=t.useMemo,c=t.useDebugValue;return VI.useSyncExternalStoreWithSelector=function(u,h,m,v,x){var _=a(null);if(_.current===null){var T={hasValue:!1,value:null};_.current=T}else T=_.current;_=o(function(){function E(j){if(!N){if(N=!0,C=j,j=v(j),x!==void 0&&T.hasValue){var O=T.value;if(x(O,j))return P=O}return P=j}if(O=P,r(C,j))return O;var F=v(j);return x!==void 0&&x(O,F)?(C=j,O):(C=j,P=F)}var N=!1,C,P,I=m===void 0?null:m;return[function(){return E(h())},I===null?void 0:function(){return E(I())}]},[h,m,v,x]);var w=i(u,_[0],_[1]);return s(function(){T.hasValue=!0,T.value=w},[w]),c(w),w},VI}var vH;function IRe(){return vH||(vH=1,FI.exports=RRe()),FI.exports}var PRe=IRe();const ORe=Zn(PRe),yH=t=>{let e;const n=new Set,r=(u,h)=>{const m=typeof u=="function"?u(e):u;if(!Object.is(m,e)){const v=e;e=h??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(x=>x(e,v))}},i=()=>e,o={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=e=t(r,i,o);return o},jRe=(t=>t?yH(t):yH),{useSyncExternalStoreWithSelector:DRe}=ORe,LRe=t=>t;function URe(t,e=LRe,n){const r=DRe(t.subscribe,t.getState,t.getInitialState,e,n);return ue.useDebugValue(r),r}const xH=(t,e)=>{const n=jRe(t),r=(i,a=e)=>URe(n,i,a);return Object.assign(r,n),r},SK=((t,e)=>t?xH(t,e):xH);var fO=FH();const zRe=Zn(fO);function jD(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const i=jD(r,e,n);if(i)return i;r=e?null:r.sibling}}function TK(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const DD=TK(J.createContext(null));class EK extends J.Component{render(){return J.createElement(DD.Provider,{value:this._reactInternals},this.props.children)}}function AK(){const t=J.useContext(DD);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=J.useId();return J.useMemo(()=>{for(const n of[t,t?.alternate]){if(!n)continue;const r=jD(n,!1,i=>{let a=i.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(r)return r}},[t,e])}const BRe=Symbol.for("react.context"),FRe=t=>t!==null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===BRe;function VRe(){const t=AK(),[e]=J.useState(()=>new Map);e.clear();let n=t;for(;n;){const r=n.type;FRe(r)&&r!==DD&&!e.has(r)&&e.set(r,J.use(TK(r))),n=n.return}return e}function HRe(){const t=VRe();return J.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>J.createElement(e,null,J.createElement(n.Provider,{...r,value:t.get(n)})),e=>J.createElement(EK,{...e})),[t])}function kK(t){let e=t.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const MK=t=>t&&t.isOrthographicCamera,GRe=t=>t&&t.hasOwnProperty("current"),qRe=t=>t!=null&&(typeof t=="string"||typeof t=="number"||t.isColor),qb=((t,e)=>typeof window<"u"&&(((t=window.document)==null?void 0:t.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?J.useLayoutEffect:J.useEffect;function LD(t){const e=J.useRef(t);return qb(()=>{e.current=t},[t]),e}function $Re(){const t=AK(),e=HRe();return J.useMemo(()=>({children:n})=>{const i=!!jD(t,!0,a=>a.type===J.StrictMode)?J.StrictMode:J.Fragment;return d.jsx(i,{children:d.jsx(e,{children:n})})},[t,e])}function WRe({set:t}){return qb(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}const KRe=(t=>(t=class extends J.Component{constructor(...n){super(...n),this.state={error:!1}}componentDidCatch(n){this.props.set(n)}render(){return this.state.error?null:this.props.children}},t.getDerivedStateFromError=()=>({error:!0}),t))();function NK(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}function hg(t){var e;return(e=t.__r3f)==null?void 0:e.root.getState()}const Qr={obj:t=>t===Object(t)&&!Qr.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,nul:t=>t===null,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(Qr.str(t)||Qr.num(t)||Qr.boo(t))return t===e;const a=Qr.obj(t);if(a&&r==="reference")return t===e;const s=Qr.arr(t);if(s&&n==="reference")return t===e;if((s||a)&&t===e)return!0;let o;for(o in t)if(!(o in e))return!1;if(a&&n==="shallow"&&r==="shallow"){for(o in i?e:t)if(!Qr.equ(t[o],e[o],{strict:i,objects:"reference"}))return!1}else for(o in i?e:t)if(t[o]!==e[o])return!1;if(Qr.und(o)){if(s&&t.length===0&&e.length===0||a&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function XRe(t){t.type!=="Scene"&&(t.dispose==null||t.dispose());for(const e in t){const n=t[e];n?.type!=="Scene"&&(n==null||n.dispose==null||n.dispose())}}const CK=["children","key","ref"];function YRe(t){const e={};for(const n in t)CK.includes(n)||(e[n]=t[n]);return e}function iE(t,e,n,r){const i=t;let a=i?.__r3f;return a||(a={root:e,type:n,parent:null,children:[],props:YRe(r),object:i,eventCount:0,handlers:{},isHidden:!1},i&&(i.__r3f=a)),a}function Eb(t,e){if(!e.includes("-"))return{root:t,key:e,target:t[e]};if(e in t)return{root:t,key:e,target:t[e]};let n=t;const r=e.split("-");for(const i of r){if(typeof n!="object"||n===null){if(n!==void 0){const a=r.slice(r.indexOf(i)).join("-");return{root:n,key:a,target:void 0}}return{root:t,key:e,target:void 0}}e=i,t=n,n=n[e]}return{root:t,key:e,target:n}}const bH=/-\d+$/;function aE(t,e){if(Qr.str(e.props.attach)){if(bH.test(e.props.attach)){const i=e.props.attach.replace(bH,""),{root:a,key:s}=Eb(t.object,i);Array.isArray(a[s])||(a[s]=[])}const{root:n,key:r}=Eb(t.object,e.props.attach);e.previousAttach=n[r],n[r]=e.object}else Qr.fun(e.props.attach)&&(e.previousAttach=e.props.attach(t.object,e.object))}function sE(t,e){if(Qr.str(e.props.attach)){const{root:n,key:r}=Eb(t.object,e.props.attach),i=e.previousAttach;i===void 0?delete n[r]:n[r]=i}else e.previousAttach==null||e.previousAttach(t.object,e.object);delete e.previousAttach}const hO=[...CK,"args","dispose","attach","object","onUpdate","dispose"],_H=new Map;function JRe(t){let e=_H.get(t.constructor);try{e||(e=new t.constructor,_H.set(t.constructor,e))}catch{}return e}function ZRe(t,e){const n={};for(const r in e)if(!hO.includes(r)&&!Qr.equ(e[r],t.props[r])){n[r]=e[r];for(const i in e)i.startsWith(`${r}-`)&&(n[i]=e[i])}for(const r in t.props){if(hO.includes(r)||e.hasOwnProperty(r))continue;const{root:i,key:a}=Eb(t.object,r);if(i.constructor&&i.constructor.length===0){const s=JRe(i);Qr.und(s)||(n[a]=s[a])}else n[a]=0}return n}const QRe=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],eIe=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function hf(t,e){var n;const r=t.__r3f,i=r&&kK(r).getState(),a=r?.eventCount;for(const o in e){let c=e[o];if(hO.includes(o))continue;if(r&&eIe.test(o)){typeof c=="function"?r.handlers[o]=c:delete r.handlers[o],r.eventCount=Object.keys(r.handlers).length;continue}if(c===void 0)continue;let{root:u,key:h,target:m}=Eb(t,o);if(m===void 0&&(typeof u!="object"||u===null))throw Error(`R3F: Cannot set "${o}". Ensure it is an object before setting "${h}".`);if(m instanceof vv&&c instanceof vv)m.mask=c.mask;else if(m instanceof kt&&qRe(c))m.set(c);else if(m!==null&&typeof m=="object"&&typeof m.set=="function"&&typeof m.copy=="function"&&c!=null&&c.constructor&&m.constructor===c.constructor)m.copy(c);else if(m!==null&&typeof m=="object"&&typeof m.set=="function"&&Array.isArray(c))typeof m.fromArray=="function"?m.fromArray(c):m.set(...c);else if(m!==null&&typeof m=="object"&&typeof m.set=="function"&&typeof c=="number")typeof m.setScalar=="function"?m.setScalar(c):m.set(c);else{var s;u[h]=c,i&&!i.linear&&QRe.includes(h)&&(s=u[h])!=null&&s.isTexture&&u[h].format===ia&&u[h].type===cs&&(u[h].colorSpace=Ba)}}if(r!=null&&r.parent&&i!=null&&i.internal&&(n=r.object)!=null&&n.isObject3D&&a!==r.eventCount){const o=r.object,c=i.internal.interaction.indexOf(o);c>-1&&i.internal.interaction.splice(c,1),r.eventCount&&o.raycast!==null&&i.internal.interaction.push(o)}return r&&r.props.attach===void 0&&(r.object.isBufferGeometry?r.props.attach="geometry":r.object.isMaterial&&(r.props.attach="material")),r&&zv(r),t}function zv(t){var e;if(!t.parent)return;t.props.onUpdate==null||t.props.onUpdate(t.object);const n=(e=t.root)==null||e.getState==null?void 0:e.getState();n&&n.internal.frames===0&&n.invalidate()}function RK(t,e){t.manual||(MK(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix())}const Us=t=>t?.isObject3D;function qS(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function IK(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function tIe(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{IK(n.capturedMap,e,r,i)})}function nIe(t){function e(c){const{internal:u}=t.getState(),h=c.offsetX-u.initialClick[0],m=c.offsetY-u.initialClick[1];return Math.round(Math.sqrt(h*h+m*m))}function n(c){return c.filter(u=>["Move","Over","Enter","Out","Leave"].some(h=>{var m;return(m=u.__r3f)==null?void 0:m.handlers["onPointer"+h]}))}function r(c,u){const h=t.getState(),m=new Set,v=[],x=u?u(h.internal.interaction):h.internal.interaction;for(let E=0;E<x.length;E++){const N=hg(x[E]);N&&(N.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(c,h);function _(E){const N=hg(E);if(!N||!N.events.enabled||N.raycaster.camera===null)return[];if(N.raycaster.camera===void 0){var C;N.events.compute==null||N.events.compute(c,N,(C=N.previousRoot)==null?void 0:C.getState()),N.raycaster.camera===void 0&&(N.raycaster.camera=null)}return N.raycaster.camera?N.raycaster.intersectObject(E,!0):[]}let T=x.flatMap(_).sort((E,N)=>{const C=hg(E.object),P=hg(N.object);return!C||!P?E.distance-N.distance:P.events.priority-C.events.priority||E.distance-N.distance}).filter(E=>{const N=qS(E);return m.has(N)?!1:(m.add(N),!0)});h.events.filter&&(T=h.events.filter(T,h));for(const E of T){let N=E.object;for(;N;){var w;(w=N.__r3f)!=null&&w.eventCount&&v.push({...E,eventObject:N}),N=N.parent}}if("pointerId"in c&&h.internal.capturedMap.has(c.pointerId))for(let E of h.internal.capturedMap.get(c.pointerId).values())m.has(qS(E.intersection))||v.push(E.intersection);return v}function i(c,u,h,m){if(c.length){const v={stopped:!1};for(const x of c){let _=hg(x.object);if(_||x.object.traverseAncestors(T=>{const w=hg(T);if(w)return _=w,!1}),_){const{raycaster:T,pointer:w,camera:E,internal:N}=_,C=new se(w.x,w.y,0).unproject(E),P=L=>{var z,V;return(z=(V=N.capturedMap.get(L))==null?void 0:V.has(x.eventObject))!=null?z:!1},I=L=>{const z={intersection:x,target:u.target};N.capturedMap.has(L)?N.capturedMap.get(L).set(x.eventObject,z):N.capturedMap.set(L,new Map([[x.eventObject,z]])),u.target.setPointerCapture(L)},j=L=>{const z=N.capturedMap.get(L);z&&IK(N.capturedMap,x.eventObject,z,L)};let O={};for(let L in u){let z=u[L];typeof z!="function"&&(O[L]=z)}let F={...x,...O,pointer:w,intersections:c,stopped:v.stopped,delta:h,unprojectedPoint:C,ray:T.ray,camera:E,stopPropagation(){const L="pointerId"in u&&N.capturedMap.get(u.pointerId);if((!L||L.has(x.eventObject))&&(F.stopped=v.stopped=!0,N.hovered.size&&Array.from(N.hovered.values()).find(z=>z.eventObject===x.eventObject))){const z=c.slice(0,c.indexOf(x));a([...z,x])}},target:{hasPointerCapture:P,setPointerCapture:I,releasePointerCapture:j},currentTarget:{hasPointerCapture:P,setPointerCapture:I,releasePointerCapture:j},nativeEvent:u};if(m(F),v.stopped===!0)break}}}return c}function a(c){const{internal:u}=t.getState();for(const h of u.hovered.values())if(!c.length||!c.find(m=>m.object===h.object&&m.index===h.index&&m.instanceId===h.instanceId)){const v=h.eventObject.__r3f;if(u.hovered.delete(qS(h)),v!=null&&v.eventCount){const x=v.handlers,_={...h,intersections:c};x.onPointerOut==null||x.onPointerOut(_),x.onPointerLeave==null||x.onPointerLeave(_)}}}function s(c,u){for(let h=0;h<u.length;h++){const m=u[h].__r3f;m==null||m.handlers.onPointerMissed==null||m.handlers.onPointerMissed(c)}}function o(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return u=>{const{internal:h}=t.getState();"pointerId"in u&&h.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(u.pointerId)&&(h.capturedMap.delete(u.pointerId),a([]))})}}return function(h){const{onPointerMissed:m,internal:v}=t.getState();v.lastEvent.current=h;const x=c==="onPointerMove",_=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",w=r(h,x?n:void 0),E=_?e(h):0;c==="onPointerDown"&&(v.initialClick=[h.offsetX,h.offsetY],v.initialHits=w.map(C=>C.eventObject)),_&&!w.length&&E<=2&&(s(h,v.interaction),m&&m(h)),x&&a(w);function N(C){const P=C.eventObject,I=P.__r3f;if(!(I!=null&&I.eventCount))return;const j=I.handlers;if(x){if(j.onPointerOver||j.onPointerEnter||j.onPointerOut||j.onPointerLeave){const O=qS(C),F=v.hovered.get(O);F?F.stopped&&C.stopPropagation():(v.hovered.set(O,C),j.onPointerOver==null||j.onPointerOver(C),j.onPointerEnter==null||j.onPointerEnter(C))}j.onPointerMove==null||j.onPointerMove(C)}else{const O=j[c];O?(!_||v.initialHits.includes(P))&&(s(h,v.interaction.filter(F=>!v.initialHits.includes(F))),O(C)):_&&v.initialHits.includes(P)&&s(h,v.interaction.filter(F=>!v.initialHits.includes(F)))}}i(w,h,E,N)}}return{handlePointer:o}}const wH=t=>!!(t!=null&&t.render),UD=J.createContext(null),rIe=(t,e)=>{const n=SK((o,c)=>{const u=new se,h=new se,m=new se;function v(E=c().camera,N=h,C=c().size){const{width:P,height:I,top:j,left:O}=C,F=P/I;N.isVector3?m.copy(N):m.set(...N);const L=E.getWorldPosition(u).distanceTo(m);if(MK(E))return{width:P/E.zoom,height:I/E.zoom,top:j,left:O,factor:1,distance:L,aspect:F};{const z=E.fov*Math.PI/180,V=2*Math.tan(z/2)*L,G=V*(P/I);return{width:G,height:V,top:j,left:O,factor:P/G,distance:L,aspect:F}}}let x;const _=E=>o(N=>({performance:{...N.performance,current:E}})),T=new We;return{set:o,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(E=1)=>t(c(),E),advance:(E,N)=>e(E,N,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new ND,pointer:T,mouse:T,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const E=c();x&&clearTimeout(x),E.performance.current!==E.performance.min&&_(E.performance.min),x=setTimeout(()=>_(c().performance.max),E.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:E=>o(N=>({...N,events:{...N.events,...E}})),setSize:(E,N,C=0,P=0)=>{const I=c().camera,j={width:E,height:N,top:C,left:P};o(O=>({size:j,viewport:{...O.viewport,...v(I,h,j)}}))},setDpr:E=>o(N=>{const C=NK(E);return{viewport:{...N.viewport,dpr:C,initialDpr:N.viewport.initialDpr||C}}}),setFrameloop:(E="always")=>{const N=c().clock;N.stop(),N.elapsedTime=0,E!=="never"&&(N.start(),N.elapsedTime=0),o(()=>({frameloop:E}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:J.createRef(),active:!1,frames:0,priority:0,subscribe:(E,N,C)=>{const P=c().internal;return P.priority=P.priority+(N>0?1:0),P.subscribers.push({ref:E,priority:N,store:C}),P.subscribers=P.subscribers.sort((I,j)=>I.priority-j.priority),()=>{const I=c().internal;I!=null&&I.subscribers&&(I.priority=I.priority-(N>0?1:0),I.subscribers=I.subscribers.filter(j=>j.ref!==E))}}}}}),r=n.getState();let i=r.size,a=r.viewport.dpr,s=r.camera;return n.subscribe(()=>{const{camera:o,size:c,viewport:u,gl:h,set:m}=n.getState();if(c.width!==i.width||c.height!==i.height||u.dpr!==a){i=c,a=u.dpr,RK(o,c),u.dpr>0&&h.setPixelRatio(u.dpr);const v=typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(c.width,c.height,v)}o!==s&&(s=o,m(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(o)}})))}),n.subscribe(o=>t(o)),n};function zD(){const t=J.useContext(UD);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function SH(t=n=>n,e){return zD()(t,e)}function iIe(t,e=0){const n=zD(),r=n.getState().internal.subscribe,i=LD(t);return qb(()=>r(i,e,n),[e,r,n]),null}const aIe=1,sIe=8,oIe=32,lIe=2;var cIe={version:"9.5.0"};function uIe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var TH={exports:{}},EH={exports:{}},AH;function dIe(){return AH||(AH=1,(function(t){t.exports=function(e){function n(p,g,S,M){return new d0(p,g,S,M)}function r(){}function i(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)g+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(p){var g=p,S=p;if(p.alternate)for(;g.return;)g=g.return;else{p=g;do g=p,(g.flags&4098)!==0&&(S=g.return),p=g.return;while(p)}return g.tag===3?S:null}function s(p){if(a(p)!==p)throw Error(i(188))}function o(p){var g=p.alternate;if(!g){if(g=a(p),g===null)throw Error(i(188));return g!==p?null:p}for(var S=p,M=g;;){var U=S.return;if(U===null)break;var B=U.alternate;if(B===null){if(M=U.return,M!==null){S=M;continue}break}if(U.child===B.child){for(B=U.child;B;){if(B===S)return s(U),p;if(B===M)return s(U),g;B=B.sibling}throw Error(i(188))}if(S.return!==M.return)S=U,M=B;else{for(var Y=!1,le=U.child;le;){if(le===S){Y=!0,S=U,M=B;break}if(le===M){Y=!0,M=U,S=B;break}le=le.sibling}if(!Y){for(le=B.child;le;){if(le===S){Y=!0,S=B,M=U;break}if(le===M){Y=!0,M=B,S=U;break}le=le.sibling}if(!Y)throw Error(i(189))}}if(S.alternate!==M)throw Error(i(190))}if(S.tag!==3)throw Error(i(188));return S.stateNode.current===S?p:g}function c(p){var g=p.tag;if(g===5||g===26||g===27||g===6)return p;for(p=p.child;p!==null;){if(g=c(p),g!==null)return g;p=p.sibling}return null}function u(p){var g=p.tag;if(g===5||g===26||g===27||g===6)return p;for(p=p.child;p!==null;){if(p.tag!==4&&(g=u(p),g!==null))return g;p=p.sibling}return null}function h(p){return p===null||typeof p!="object"?null:(p=gl&&p[gl]||p["@@iterator"],typeof p=="function"?p:null)}function m(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===lc?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case su:return"Fragment";case lu:return"Profiler";case ou:return"StrictMode";case am:return"Suspense";case ml:return"SuspenseList";case Qf:return"Activity"}if(typeof p=="object")switch(p.$$typeof){case au:return"Portal";case Ts:return p.displayName||"Context";case Zf:return(p._context.displayName||"Context")+".Consumer";case Ed:var g=p.render;return p=p.displayName,p||(p=g.displayName||g.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case sm:return g=p.displayName||null,g!==null?g:m(p.type)||"Memo";case da:g=p._payload,p=p._init;try{return m(p(g))}catch{}}return null}function v(p){return{current:p}}function x(p){0>hu||(p.current=xm[hu],xm[hu]=null,hu--)}function _(p,g){hu++,xm[hu]=p.current,p.current=g}function T(p){return p>>>=0,p===0?32:31-(bm(p)/cw|0)|0}function w(p){var g=p&42;if(g!==0)return g;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return p&261888;case 262144:case 524288:case 1048576:case 2097152:return p&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function E(p,g,S){var M=p.pendingLanes;if(M===0)return 0;var U=0,B=p.suspendedLanes,Y=p.pingedLanes;p=p.warmLanes;var le=M&134217727;return le!==0?(M=le&~B,M!==0?U=w(M):(Y&=le,Y!==0?U=w(Y):S||(S=le&~p,S!==0&&(U=w(S))))):(le=M&~B,le!==0?U=w(le):Y!==0?U=w(Y):S||(S=M&~p,S!==0&&(U=w(S)))),U===0?0:g!==0&&g!==U&&(g&B)===0&&(B=U&-U,S=g&-g,B>=S||B===32&&(S&4194048)!==0)?g:U}function N(p,g){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&g)===0}function C(p,g){switch(p){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P(){var p=Id;return Id<<=1,(Id&62914560)===0&&(Id=4194304),p}function I(p){for(var g=[],S=0;31>S;S++)g.push(p);return g}function j(p,g){p.pendingLanes|=g,g!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function O(p,g,S,M,U,B){var Y=p.pendingLanes;p.pendingLanes=S,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=S,p.entangledLanes&=S,p.errorRecoveryDisabledLanes&=S,p.shellSuspendCounter=0;var le=p.entanglements,Pe=p.expirationTimes,Ke=p.hiddenUpdates;for(S=Y&~S;0<S;){var ut=31-Ca(S),tt=1<<ut;le[ut]=0,Pe[ut]=-1;var Et=Ke[ut];if(Et!==null)for(Ke[ut]=null,ut=0;ut<Et.length;ut++){var ln=Et[ut];ln!==null&&(ln.lane&=-536870913)}S&=~tt}M!==0&&F(p,M,0),B!==0&&U===0&&p.tag!==0&&(p.suspendedLanes|=B&~(Y&~g))}function F(p,g,S){p.pendingLanes|=g,p.suspendedLanes&=~g;var M=31-Ca(g);p.entangledLanes|=g,p.entanglements[M]=p.entanglements[M]|1073741824|S&261930}function L(p,g){var S=p.entangledLanes|=g;for(p=p.entanglements;S;){var M=31-Ca(S),U=1<<M;U&g|p[M]&g&&(p[M]|=g),S&=~U}}function z(p,g){var S=g&-g;return S=(S&42)!==0?1:V(S),(S&(p.suspendedLanes|g))!==0?0:S}function V(p){switch(p){case 2:p=1;break;case 8:p=4;break;case 32:p=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:p=128;break;case 268435456:p=134217728;break;default:p=0}return p}function G(p){return p&=-p,2<p?8<p?(p&134217727)!==0?32:268435456:8:2}function $(p){if(typeof Y0=="function"&&fw(p),Ra&&typeof Ra.setStrictMode=="function")try{Ra.setStrictMode(mu,p)}catch{}}function ee(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}function te(p){if(Am===void 0)try{throw Error()}catch(S){var g=S.stack.trim().match(/\n( *(at )?)/);Am=g&&g[1]||"",Co=-1<S.stack.indexOf(`
    at`)?" (<anonymous>)":-1<S.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Am+p+Co}function K(p,g){if(!p||lh)return"";lh=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var M={DetermineComponentFrameRoot:function(){try{if(g){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(ln){var Et=ln}Reflect.construct(p,[],tt)}else{try{tt.call()}catch(ln){Et=ln}p.call(tt.prototype)}}else{try{throw Error()}catch(ln){Et=ln}(tt=p())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(ln){if(ln&&Et&&typeof ln.stack=="string")return[ln.stack,Et.stack]}return[null,null]}};M.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var U=Object.getOwnPropertyDescriptor(M.DetermineComponentFrameRoot,"name");U&&U.configurable&&Object.defineProperty(M.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var B=M.DetermineComponentFrameRoot(),Y=B[0],le=B[1];if(Y&&le){var Pe=Y.split(`
`),Ke=le.split(`
`);for(U=M=0;M<Pe.length&&!Pe[M].includes("DetermineComponentFrameRoot");)M++;for(;U<Ke.length&&!Ke[U].includes("DetermineComponentFrameRoot");)U++;if(M===Pe.length||U===Ke.length)for(M=Pe.length-1,U=Ke.length-1;1<=M&&0<=U&&Pe[M]!==Ke[U];)U--;for(;1<=M&&0<=U;M--,U--)if(Pe[M]!==Ke[U]){if(M!==1||U!==1)do if(M--,U--,0>U||Pe[M]!==Ke[U]){var ut=`
`+Pe[M].replace(" at new "," at ");return p.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",p.displayName)),ut}while(1<=M&&0<=U);break}}}finally{lh=!1,Error.prepareStackTrace=S}return(S=p?p.displayName||p.name:"")?te(S):""}function X(p,g){switch(p.tag){case 26:case 27:case 5:return te(p.type);case 16:return te("Lazy");case 13:return p.child!==g&&g!==null?te("Suspense Fallback"):te("Suspense");case 19:return te("SuspenseList");case 0:case 15:return K(p.type,!1);case 11:return K(p.type.render,!1);case 1:return K(p.type,!0);case 31:return te("Activity");default:return""}}function re(p){try{var g="",S=null;do g+=X(p,S),S=p,p=p.return;while(p);return g}catch(M){return`
Error generating stack: `+M.message+`
`+M.stack}}function ce(p,g){if(typeof p=="object"&&p!==null){var S=J0.get(p);return S!==void 0?S:(g={value:p,source:g,stack:re(g)},J0.set(p,g),g)}return{value:p,source:g,stack:re(g)}}function de(p,g){xl[Ro++]=ch,xl[Ro++]=ir,ir=p,ch=g}function W(p,g,S){ks[ts++]=ji,ks[ts++]=Ys,ks[ts++]=Ms,Ms=p;var M=ji;p=Ys;var U=32-Ca(M)-1;M&=~(1<<U),S+=1;var B=32-Ca(g)+U;if(30<B){var Y=U-U%5;B=(M&(1<<Y)-1).toString(32),M>>=Y,U-=Y,ji=1<<32-Ca(g)+U|S<<U|M,Ys=B+p}else ji=1<<B|S<<U|M,Ys=p}function ae(p){p.return!==null&&(de(p,1),W(p,1,0))}function me(p){for(;p===ir;)ir=xl[--Ro],xl[Ro]=null,ch=xl[--Ro],xl[Ro]=null;for(;p===Ms;)Ms=ks[--ts],ks[ts]=null,Ys=ks[--ts],ks[ts]=null,ji=ks[--ts],ks[ts]=null}function Ie(p,g){ks[ts++]=ji,ks[ts++]=Ys,ks[ts++]=Ms,ji=g.id,Ys=g.overflow,Ms=p}function Xe(p,g){_(Di,g),_(bl,p),_(Ei,null),p=E_(g),x(Ei),_(Ei,p)}function ve(){x(Ei),x(bl),x(Di)}function _e(p){p.memoizedState!==null&&_(uh,p);var g=Ei.current,S=Md(g,p.type);g!==S&&(_(bl,p),_(Ei,S))}function Ye(p){bl.current===p&&(x(Ei),x(bl)),uh.current===p&&(x(uh),$r?du._currentValue=uu:du._currentValue2=uu)}function ke(p){var g=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Fe(ce(g,p)),km}function qe(p,g){if(!Tr)throw Error(i(175));J_(p.stateNode,p.type,p.memoizedProps,g,p)||ke(p,!0)}function pt(p){for(gi=p.return;gi;)switch(gi.tag){case 5:case 31:case 13:ha=!1;return;case 27:case 3:ha=!0;return;default:gi=gi.return}}function Ue(p){if(!Tr||p!==gi)return!1;if(!Nn)return pt(p),Nn=!0,!1;var g=p.tag;if(mi?g!==3&&g!==27&&(g!==5||Rd(p.type)&&!fa(p.type,p.memoizedProps))&&Er&&ke(p):g!==3&&(g!==5||Rd(p.type)&&!fa(p.type,p.memoizedProps))&&Er&&ke(p),pt(p),g===13){if(!Tr)throw Error(i(316));if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));Er=z0(p)}else if(g===31){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));Er=Q_(p)}else Er=mi&&g===27?H_(p.type,Er):gi?V_(p.stateNode):null;return!0}function xt(){Tr&&(Er=gi=null,Nn=!1)}function Me(){var p=Io;return p!==null&&(Oa===null?Oa=p:Oa.push.apply(Oa,p),Io=null),p}function Fe(p){Io===null?Io=[p]:Io.push(p)}function Le(p,g,S){$r?(_(Ns,g._currentValue),g._currentValue=S):(_(Ns,g._currentValue2),g._currentValue2=S)}function Qe(p){var g=Ns.current;$r?p._currentValue=g:p._currentValue2=g,x(Ns)}function ie(p,g,S){for(;p!==null;){var M=p.alternate;if((p.childLanes&g)!==g?(p.childLanes|=g,M!==null&&(M.childLanes|=g)):M!==null&&(M.childLanes&g)!==g&&(M.childLanes|=g),p===S)break;p=p.return}}function Nt(p,g,S,M){var U=p.child;for(U!==null&&(U.return=p);U!==null;){var B=U.dependencies;if(B!==null){var Y=U.child;B=B.firstContext;e:for(;B!==null;){var le=B;B=U;for(var Pe=0;Pe<g.length;Pe++)if(le.context===g[Pe]){B.lanes|=S,le=B.alternate,le!==null&&(le.lanes|=S),ie(B.return,S,p),M||(Y=null);break e}B=le.next}}else if(U.tag===18){if(Y=U.return,Y===null)throw Error(i(341));Y.lanes|=S,B=Y.alternate,B!==null&&(B.lanes|=S),ie(Y,S,p),Y=null}else Y=U.child;if(Y!==null)Y.return=U;else for(Y=U;Y!==null;){if(Y===p){Y=null;break}if(U=Y.sibling,U!==null){U.return=Y.return,Y=U;break}Y=Y.return}U=Y}}function ft(p,g,S,M){p=null;for(var U=g,B=!1;U!==null;){if(!B){if((U.flags&524288)!==0)B=!0;else if((U.flags&262144)!==0)break}if(U.tag===10){var Y=U.alternate;if(Y===null)throw Error(i(387));if(Y=Y.memoizedProps,Y!==null){var le=U.type;Kr(U.pendingProps.value,Y.value)||(p!==null?p.push(le):p=[le])}}else if(U===uh.current){if(Y=U.alternate,Y===null)throw Error(i(387));Y.memoizedState.memoizedState!==U.memoizedState.memoizedState&&(p!==null?p.push(du):p=[du])}U=U.return}p!==null&&Nt(g,p,S,M),g.flags|=262144}function Ct(p){for(p=p.firstContext;p!==null;){var g=p.context;if(!Kr($r?g._currentValue:g._currentValue2,p.memoizedValue))return!0;p=p.next}return!1}function et(p){fr=p,Js=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function ne(p){return he(fr,p)}function q(p,g){return fr===null&&et(p),he(p,g)}function he(p,g){var S=$r?g._currentValue:g._currentValue2;if(g={context:g,memoizedValue:S,next:null},Js===null){if(p===null)throw Error(i(308));Js=g,p.dependencies={lanes:0,firstContext:g},p.flags|=524288}else Js=Js.next=g;return S}function Oe(){return{controller:new hw,data:new Map,refCount:0}}function Ge(p){p.refCount--,p.refCount===0&&Ai(sk,function(){p.controller.abort()})}function je(){}function wt(p){p!==Qn&&p.next===null&&(Qn===null?dh=Qn=p:Qn=Qn.next=p),Cs=!0,Ji||(Ji=!0,_t())}function ot(p,g){if(!Mm&&Cs){Mm=!0;do for(var S=!1,M=dh;M!==null;){if(p!==0){var U=M.pendingLanes;if(U===0)var B=0;else{var Y=M.suspendedLanes,le=M.pingedLanes;B=(1<<31-Ca(42|p)+1)-1,B&=U&~(Y&~le),B=B&201326741?B&201326741|1:B?B|2:0}B!==0&&(S=!0,St(M,B))}else B=Cn,B=E(M,M===xn?B:0,M.cancelPendingCommit!==null||M.timeoutHandle!==Na),(B&3)===0||N(M,B)||(S=!0,St(M,B));M=M.next}while(S);Mm=!1}}function Rt(){Vt()}function Vt(){Cs=Ji=!1;var p=0;hc!==0&&cu()&&(p=hc);for(var g=Yi(),S=null,M=dh;M!==null;){var U=M.next,B=Je(M,g);B===0?(M.next=null,S===null?dh=U:S.next=U,U===null&&(Qn=S)):(S=M,(p!==0||(B&3)!==0)&&(Cs=!0)),M=U}oi!==0&&oi!==5||ot(p),hc!==0&&(hc=0)}function Je(p,g){for(var S=p.suspendedLanes,M=p.pingedLanes,U=p.expirationTimes,B=p.pendingLanes&-62914561;0<B;){var Y=31-Ca(B),le=1<<Y,Pe=U[Y];Pe===-1?((le&S)===0||(le&M)!==0)&&(U[Y]=C(le,g)):Pe<=g&&(p.expiredLanes|=le),B&=~le}if(g=xn,S=Cn,S=E(p,p===g?S:0,p.cancelPendingCommit!==null||p.timeoutHandle!==Na),M=p.callbackNode,S===0||p===g&&(tr===2||tr===9)||p.cancelPendingCommit!==null)return M!==null&&M!==null&&wm(M),p.callbackNode=null,p.callbackPriority=0;if((S&3)===0||N(p,S)){if(g=S&-S,g===p.callbackPriority)return g;switch(M!==null&&wm(M),G(S)){case 2:case 8:S=dw;break;case 32:S=oh;break;case 268435456:S=Tm;break;default:S=oh}return M=it.bind(null,p),S=sh(S,M),p.callbackPriority=g,p.callbackNode=S,g}return M!==null&&M!==null&&wm(M),p.callbackPriority=2,p.callbackNode=null,2}function it(p,g){if(oi!==0&&oi!==5)return p.callbackNode=null,p.callbackPriority=0,null;var S=p.callbackNode;if(ko()&&p.callbackNode!==S)return null;var M=Cn;return M=E(p,p===xn?M:0,p.cancelPendingCommit!==null||p.timeoutHandle!==Na),M===0?null:(Xs(p,M,g),Je(p,Yi()),p.callbackNode!=null&&p.callbackNode===S?it.bind(null,p):null)}function St(p,g){if(ko())return null;Xs(p,g,!0)}function _t(){S0?T0(function(){(An&6)!==0?sh(Sm,Rt):Vt()}):sh(Sm,Rt)}function ht(){if(hc===0){var p=_l;p===0&&(p=_m,_m<<=1,(_m&261888)===0&&(_m=256)),hc=p}return hc}function pn(p,g){if(Pd===null){var S=Pd=[];Z0=0,_l=ht(),vi={status:"pending",value:void 0,then:function(M){S.push(M)}}}return Z0++,g.then(pe,pe),g}function pe(){if(--Z0===0&&Pd!==null){vi!==null&&(vi.status="fulfilled");var p=Pd;Pd=null,_l=0,vi=null;for(var g=0;g<p.length;g++)(0,p[g])()}}function mt(p,g){var S=[],M={status:"pending",value:null,reason:null,then:function(U){S.push(U)}};return p.then(function(){M.status="fulfilled",M.value=g;for(var U=0;U<S.length;U++)(0,S[U])(g)},function(U){for(M.status="rejected",M.reason=U,U=0;U<S.length;U++)(0,S[U])(void 0)}),M}function rt(){var p=pc.current;return p!==null?p:xn.pooledCache}function vt(p,g){g===null?_(pc,pc.current):_(pc,g.pool)}function Ze(){var p=rt();return p===null?null:{parent:$r?Ar._currentValue:Ar._currentValue2,pool:p}}function He(p,g){if(Kr(p,g))return!0;if(typeof p!="object"||p===null||typeof g!="object"||g===null)return!1;var S=Object.keys(p),M=Object.keys(g);if(S.length!==M.length)return!1;for(M=0;M<S.length;M++){var U=S[M];if(!ak.call(g,U)||!Kr(p[U],g[U]))return!1}return!0}function ct(p){return p=p.status,p==="fulfilled"||p==="rejected"}function en(p,g,S){switch(S=p[S],S===void 0?p.push(g):S!==g&&(g.then(je,je),g=S),g.status){case"fulfilled":return g.value;case"rejected":throw p=g.reason,Pi(p),p;default:if(typeof g.status=="string")g.then(je,je);else{if(p=xn,p!==null&&100<p.shellSuspendCounter)throw Error(i(482));p=g,p.status="pending",p.then(function(M){if(g.status==="pending"){var U=g;U.status="fulfilled",U.value=M}},function(M){if(g.status==="pending"){var U=g;U.status="rejected",U.reason=M}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw p=g.reason,Pi(p),p}throw pa=g,yi}}function On(p){try{var g=p._init;return g(p._payload)}catch(S){throw S!==null&&typeof S=="object"&&typeof S.then=="function"?(pa=S,yi):S}}function Ln(){if(pa===null)throw Error(i(459));var p=pa;return pa=null,p}function Pi(p){if(p===yi||p===Is)throw Error(i(483))}function Ta(p){var g=gu;return gu+=1,mc===null&&(mc=[]),en(mc,p,g)}function ql(p,g){g=g.props.ref,p.ref=g!==void 0?g:null}function $l(p,g){throw g.$$typeof===iu?Error(i(525)):(p=Object.prototype.toString.call(g),Error(i(31,p==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":p)))}function qc(p){function g(Ae,be){if(p){var Re=Ae.deletions;Re===null?(Ae.deletions=[be],Ae.flags|=16):Re.push(be)}}function S(Ae,be){if(!p)return null;for(;be!==null;)g(Ae,be),be=be.sibling;return null}function M(Ae){for(var be=new Map;Ae!==null;)Ae.key!==null?be.set(Ae.key,Ae):be.set(Ae.index,Ae),Ae=Ae.sibling;return be}function U(Ae,be){return Ae=Qa(Ae,be),Ae.index=0,Ae.sibling=null,Ae}function B(Ae,be,Re){return Ae.index=Re,p?(Re=Ae.alternate,Re!==null?(Re=Re.index,Re<be?(Ae.flags|=67108866,be):Re):(Ae.flags|=67108866,be)):(Ae.flags|=1048576,be)}function Y(Ae){return p&&Ae.alternate===null&&(Ae.flags|=67108866),Ae}function le(Ae,be,Re,st){return be===null||be.tag!==6?(be=f0(Re,Ae.mode,st),be.return=Ae,be):(be=U(be,Re),be.return=Ae,be)}function Pe(Ae,be,Re,st){var qt=Re.type;return qt===su?ut(Ae,be,Re.props.children,st,Re.key):be!==null&&(be.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===da&&On(qt)===be.type)?(be=U(be,Re.props),ql(be,Re),be.return=Ae,be):(be=pl(Re.type,Re.key,Re.props,null,Ae.mode,st),ql(be,Re),be.return=Ae,be)}function Ke(Ae,be,Re,st){return be===null||be.tag!==4||be.stateNode.containerInfo!==Re.containerInfo||be.stateNode.implementation!==Re.implementation?(be=p0(Re,Ae.mode,st),be.return=Ae,be):(be=U(be,Re.children||[]),be.return=Ae,be)}function ut(Ae,be,Re,st,qt){return be===null||be.tag!==7?(be=Ss(Re,Ae.mode,st,qt),be.return=Ae,be):(be=U(be,Re),be.return=Ae,be)}function tt(Ae,be,Re){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return be=f0(""+be,Ae.mode,Re),be.return=Ae,be;if(typeof be=="object"&&be!==null){switch(be.$$typeof){case Mo:return Re=pl(be.type,be.key,be.props,null,Ae.mode,Re),ql(Re,be),Re.return=Ae,Re;case au:return be=p0(be,Ae.mode,Re),be.return=Ae,be;case da:return be=On(be),tt(Ae,be,Re)}if(cc(be)||h(be))return be=Ss(be,Ae.mode,Re,null),be.return=Ae,be;if(typeof be.then=="function")return tt(Ae,Ta(be),Re);if(be.$$typeof===Ts)return tt(Ae,q(Ae,be),Re);$l(Ae,be)}return null}function Et(Ae,be,Re,st){var qt=be!==null?be.key:null;if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return qt!==null?null:le(Ae,be,""+Re,st);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case Mo:return Re.key===qt?Pe(Ae,be,Re,st):null;case au:return Re.key===qt?Ke(Ae,be,Re,st):null;case da:return Re=On(Re),Et(Ae,be,Re,st)}if(cc(Re)||h(Re))return qt!==null?null:ut(Ae,be,Re,st,null);if(typeof Re.then=="function")return Et(Ae,be,Ta(Re),st);if(Re.$$typeof===Ts)return Et(Ae,be,q(Ae,Re),st);$l(Ae,Re)}return null}function ln(Ae,be,Re,st,qt){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return Ae=Ae.get(Re)||null,le(be,Ae,""+st,qt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case Mo:return Ae=Ae.get(st.key===null?Re:st.key)||null,Pe(be,Ae,st,qt);case au:return Ae=Ae.get(st.key===null?Re:st.key)||null,Ke(be,Ae,st,qt);case da:return st=On(st),ln(Ae,be,Re,st,qt)}if(cc(st)||h(st))return Ae=Ae.get(Re)||null,ut(be,Ae,st,qt,null);if(typeof st.then=="function")return ln(Ae,be,Re,Ta(st),qt);if(st.$$typeof===Ts)return ln(Ae,be,Re,q(be,st),qt);$l(be,st)}return null}function Jr(Ae,be,Re,st){for(var qt=null,Ur=null,Wt=be,zn=be=0,ki=null;Wt!==null&&zn<Re.length;zn++){Wt.index>zn?(ki=Wt,Wt=null):ki=Wt.sibling;var Gn=Et(Ae,Wt,Re[zn],st);if(Gn===null){Wt===null&&(Wt=ki);break}p&&Wt&&Gn.alternate===null&&g(Ae,Wt),be=B(Gn,be,zn),Ur===null?qt=Gn:Ur.sibling=Gn,Ur=Gn,Wt=ki}if(zn===Re.length)return S(Ae,Wt),Nn&&de(Ae,zn),qt;if(Wt===null){for(;zn<Re.length;zn++)Wt=tt(Ae,Re[zn],st),Wt!==null&&(be=B(Wt,be,zn),Ur===null?qt=Wt:Ur.sibling=Wt,Ur=Wt);return Nn&&de(Ae,zn),qt}for(Wt=M(Wt);zn<Re.length;zn++)ki=ln(Wt,Ae,zn,Re[zn],st),ki!==null&&(p&&ki.alternate!==null&&Wt.delete(ki.key===null?zn:ki.key),be=B(ki,be,zn),Ur===null?qt=ki:Ur.sibling=ki,Ur=ki);return p&&Wt.forEach(function(js){return g(Ae,js)}),Nn&&de(Ae,zn),qt}function Fd(Ae,be,Re,st){if(Re==null)throw Error(i(151));for(var qt=null,Ur=null,Wt=be,zn=be=0,ki=null,Gn=Re.next();Wt!==null&&!Gn.done;zn++,Gn=Re.next()){Wt.index>zn?(ki=Wt,Wt=null):ki=Wt.sibling;var js=Et(Ae,Wt,Gn.value,st);if(js===null){Wt===null&&(Wt=ki);break}p&&Wt&&js.alternate===null&&g(Ae,Wt),be=B(js,be,zn),Ur===null?qt=js:Ur.sibling=js,Ur=js,Wt=ki}if(Gn.done)return S(Ae,Wt),Nn&&de(Ae,zn),qt;if(Wt===null){for(;!Gn.done;zn++,Gn=Re.next())Gn=tt(Ae,Gn.value,st),Gn!==null&&(be=B(Gn,be,zn),Ur===null?qt=Gn:Ur.sibling=Gn,Ur=Gn);return Nn&&de(Ae,zn),qt}for(Wt=M(Wt);!Gn.done;zn++,Gn=Re.next())Gn=ln(Wt,Ae,zn,Gn.value,st),Gn!==null&&(p&&Gn.alternate!==null&&Wt.delete(Gn.key===null?zn:Gn.key),be=B(Gn,be,zn),Ur===null?qt=Gn:Ur.sibling=Gn,Ur=Gn);return p&&Wt.forEach(function(ok){return g(Ae,ok)}),Nn&&de(Ae,zn),qt}function Sc(Ae,be,Re,st){if(typeof Re=="object"&&Re!==null&&Re.type===su&&Re.key===null&&(Re=Re.props.children),typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case Mo:e:{for(var qt=Re.key;be!==null;){if(be.key===qt){if(qt=Re.type,qt===su){if(be.tag===7){S(Ae,be.sibling),st=U(be,Re.props.children),st.return=Ae,Ae=st;break e}}else if(be.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===da&&On(qt)===be.type){S(Ae,be.sibling),st=U(be,Re.props),ql(st,Re),st.return=Ae,Ae=st;break e}S(Ae,be);break}else g(Ae,be);be=be.sibling}Re.type===su?(st=Ss(Re.props.children,Ae.mode,st,Re.key),st.return=Ae,Ae=st):(st=pl(Re.type,Re.key,Re.props,null,Ae.mode,st),ql(st,Re),st.return=Ae,Ae=st)}return Y(Ae);case au:e:{for(qt=Re.key;be!==null;){if(be.key===qt)if(be.tag===4&&be.stateNode.containerInfo===Re.containerInfo&&be.stateNode.implementation===Re.implementation){S(Ae,be.sibling),st=U(be,Re.children||[]),st.return=Ae,Ae=st;break e}else{S(Ae,be);break}else g(Ae,be);be=be.sibling}st=p0(Re,Ae.mode,st),st.return=Ae,Ae=st}return Y(Ae);case da:return Re=On(Re),Sc(Ae,be,Re,st)}if(cc(Re))return Jr(Ae,be,Re,st);if(h(Re)){if(qt=h(Re),typeof qt!="function")throw Error(i(150));return Re=qt.call(Re),Fd(Ae,be,Re,st)}if(typeof Re.then=="function")return Sc(Ae,be,Ta(Re),st);if(Re.$$typeof===Ts)return Sc(Ae,be,q(Ae,Re),st);$l(Ae,Re)}return typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint"?(Re=""+Re,be!==null&&be.tag===6?(S(Ae,be.sibling),st=U(be,Re),st.return=Ae,Ae=st):(S(Ae,be),st=f0(Re,Ae.mode,st),st.return=Ae,Ae=st),Y(Ae)):S(Ae,be)}return function(Ae,be,Re,st){try{gu=0;var qt=Sc(Ae,be,Re,st);return mc=null,qt}catch(Wt){if(Wt===yi||Wt===Is)throw Wt;var Ur=n(29,Wt,null,Ae.mode);return Ur.lanes=st,Ur.return=Ae,Ur}}}function Wl(){for(var p=Oo,g=vu=Oo=0;g<p;){var S=Ui[g];Ui[g++]=null;var M=Ui[g];Ui[g++]=null;var U=Ui[g];Ui[g++]=null;var B=Ui[g];if(Ui[g++]=null,M!==null&&U!==null){var Y=M.pending;Y===null?U.next=U:(U.next=Y.next,Y.next=U),M.pending=U}B!==0&&$a(S,U,B)}}function il(p,g,S,M){Ui[Oo++]=p,Ui[Oo++]=g,Ui[Oo++]=S,Ui[Oo++]=M,vu|=M,p.lanes|=M,p=p.alternate,p!==null&&(p.lanes|=M)}function $c(p,g,S,M){return il(p,g,S,M),Rr(p)}function Ki(p,g){return il(p,null,null,g),Rr(p)}function $a(p,g,S){p.lanes|=S;var M=p.alternate;M!==null&&(M.lanes|=S);for(var U=!1,B=p.return;B!==null;)B.childLanes|=S,M=B.alternate,M!==null&&(M.childLanes|=S),B.tag===22&&(p=B.stateNode,p===null||p._visibility&1||(U=!0)),p=B,B=B.return;return p.tag===3?(B=p.stateNode,U&&g!==null&&(U=31-Ca(S),p=B.hiddenUpdates,M=p[U],M===null?p[U]=[g]:M.push(g),g.lane=S|536870912),B):null}function Rr(p){if(50<Hn)throw Hn=0,vh=null,Error(i(185));for(var g=p.return;g!==null;)p=g,g=p.return;return p.tag===3?p.stateNode:null}function fi(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wa(p,g){p=p.updateQueue,g.updateQueue===p&&(g.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function Ka(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function Xa(p,g,S){var M=p.updateQueue;if(M===null)return null;if(M=M.shared,(An&2)!==0){var U=M.pending;return U===null?g.next=g:(g.next=U.next,U.next=g),M.pending=g,g=Rr(p),$a(p,null,S),g}return il(p,M,g,S),Rr(p)}function Kl(p,g,S){if(g=g.updateQueue,g!==null&&(g=g.shared,(S&4194048)!==0)){var M=g.lanes;M&=p.pendingLanes,S|=M,g.lanes=S,L(p,S)}}function Wc(p,g){var S=p.updateQueue,M=p.alternate;if(M!==null&&(M=M.updateQueue,S===M)){var U=null,B=null;if(S=S.firstBaseUpdate,S!==null){do{var Y={lane:S.lane,tag:S.tag,payload:S.payload,callback:null,next:null};B===null?U=B=Y:B=B.next=Y,S=S.next}while(S!==null);B===null?U=B=g:B=B.next=g}else U=B=g;S={baseState:M.baseState,firstBaseUpdate:U,lastBaseUpdate:B,shared:M.shared,callbacks:M.callbacks},p.updateQueue=S;return}p=S.lastBaseUpdate,p===null?S.firstBaseUpdate=g:p.next=g,S.lastBaseUpdate=g}function Ws(){if(Cm){var p=vi;if(p!==null)throw p}}function al(p,g,S,M){Cm=!1;var U=p.updateQueue;ns=!1;var B=U.firstBaseUpdate,Y=U.lastBaseUpdate,le=U.shared.pending;if(le!==null){U.shared.pending=null;var Pe=le,Ke=Pe.next;Pe.next=null,Y===null?B=Ke:Y.next=Ke,Y=Pe;var ut=p.alternate;ut!==null&&(ut=ut.updateQueue,le=ut.lastBaseUpdate,le!==Y&&(le===null?ut.firstBaseUpdate=Ke:le.next=Ke,ut.lastBaseUpdate=Pe))}if(B!==null){var tt=U.baseState;Y=0,ut=Ke=Pe=null,le=B;do{var Et=le.lane&-536870913,ln=Et!==le.lane;if(ln?(Cn&Et)===Et:(M&Et)===Et){Et!==0&&Et===_l&&(Cm=!0),ut!==null&&(ut=ut.next={lane:0,tag:le.tag,payload:le.payload,callback:null,next:null});e:{var Jr=p,Fd=le;Et=g;var Sc=S;switch(Fd.tag){case 1:if(Jr=Fd.payload,typeof Jr=="function"){tt=Jr.call(Sc,tt,Et);break e}tt=Jr;break e;case 3:Jr.flags=Jr.flags&-65537|128;case 0:if(Jr=Fd.payload,Et=typeof Jr=="function"?Jr.call(Sc,tt,Et):Jr,Et==null)break e;tt=im({},tt,Et);break e;case 2:ns=!0}}Et=le.callback,Et!==null&&(p.flags|=64,ln&&(p.flags|=8192),ln=U.callbacks,ln===null?U.callbacks=[Et]:ln.push(Et))}else ln={lane:Et,tag:le.tag,payload:le.payload,callback:le.callback,next:null},ut===null?(Ke=ut=ln,Pe=tt):ut=ut.next=ln,Y|=Et;if(le=le.next,le===null){if(le=U.shared.pending,le===null)break;ln=le,le=ln.next,ln.next=null,U.lastBaseUpdate=ln,U.shared.pending=null}}while(!0);ut===null&&(Pe=tt),U.baseState=Pe,U.firstBaseUpdate=Ke,U.lastBaseUpdate=ut,B===null&&(U.shared.lanes=0),Sl|=Y,p.lanes=Y,p.memoizedState=tt}}function sl(p,g){if(typeof p!="function")throw Error(i(191,p));p.call(g)}function ol(p,g){var S=p.callbacks;if(S!==null)for(p.callbacks=null,p=0;p<S.length;p++)sl(S[p],g)}function Xl(p,g){p=Do,_(gc,p),_(yu,g),Do=p|g.baseLanes}function mo(){_(gc,Do),_(yu,yu.current)}function Z(){Do=gc.current,x(yu),x(gc)}function ge(p){var g=p.alternate;_(Vr,Vr.current&1),_(Ia,p),Pa===null&&(g===null||yu.current!==null||g.memoizedState!==null)&&(Pa=p)}function Ce(p){_(Vr,Vr.current),_(Ia,p),Pa===null&&(Pa=p)}function Ee(p){p.tag===22?(_(Vr,Vr.current),_(Ia,p),Pa===null&&(Pa=p)):xe()}function xe(){_(Vr,Vr.current),_(Ia,Ia.current)}function at(p){x(Ia),Pa===p&&(Pa=null),x(Vr)}function Tt(p){for(var g=p;g!==null;){if(g.tag===13){var S=g.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||dc(S)||fm(S)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}function nt(){throw Error(i(321))}function Mt(p,g){if(g===null)return!1;for(var S=0;S<g.length&&S<p.length;S++)if(!Kr(p[S],g[S]))return!1;return!0}function It(p,g,S,M,U,B){return wl=B,dn=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Ht.H=p===null||p.memoizedState===null?jr:jo,jn=!1,B=S(M,U),jn=!1,mn&&(B=jt(g,S,M,U)),Ft(p),B}function Ft(p){Ht.H=rs;var g=Ut!==null&&Ut.next!==null;if(wl=0,nn=Ut=dn=null,yn=!1,Ps=0,Zs=null,g)throw Error(i(300));p===null||yr||(p=p.dependencies,p!==null&&Ct(p)&&(yr=!0))}function jt(p,g,S,M){dn=p;var U=0;do{if(mn&&(Zs=null),Ps=0,mn=!1,25<=U)throw Error(i(301));if(U+=1,nn=Ut=null,p.updateQueue!=null){var B=p.updateQueue;B.lastEffect=null,B.events=null,B.stores=null,B.memoCache!=null&&(B.memoCache.index=0)}Ht.H=vc,B=g(S,M)}while(mn);return B}function $t(){var p=Ht.H,g=p.useState()[0];return g=typeof g.then=="function"?Kt(g):g,p=p.useState()[0],(Ut!==null?Ut.memoizedState:null)!==p&&(dn.flags|=1024),g}function Vn(){var p=Zi!==0;return Zi=0,p}function cr(p,g,S){g.updateQueue=p.updateQueue,g.flags&=-2053,p.lanes&=~S}function nr(p){if(yn){for(p=p.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}yn=!1}wl=0,nn=Ut=dn=null,mn=!1,Ps=Zi=0,Zs=null}function sn(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?dn.memoizedState=nn=p:nn=nn.next=p,nn}function gt(){if(Ut===null){var p=dn.alternate;p=p!==null?p.memoizedState:null}else p=Ut.next;var g=nn===null?dn.memoizedState:nn.next;if(g!==null)nn=g,Ut=p;else{if(p===null)throw dn.alternate===null?Error(i(467)):Error(i(310));Ut=p,p={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},nn===null?dn.memoizedState=nn=p:nn=nn.next=p}return nn}function Un(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kt(p){var g=Ps;return Ps+=1,Zs===null&&(Zs=[]),p=en(Zs,p,g),g=dn,(nn===null?g.memoizedState:nn.next)===null&&(g=g.alternate,Ht.H=g===null||g.memoizedState===null?jr:jo),p}function ni(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return Kt(p);if(p.$$typeof===Ts)return ne(p)}throw Error(i(438,String(p)))}function Ks(p){var g=null,S=dn.updateQueue;if(S!==null&&(g=S.memoCache),g==null){var M=dn.alternate;M!==null&&(M=M.updateQueue,M!==null&&(M=M.memoCache,M!=null&&(g={data:M.data.map(function(U){return U.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),S===null&&(S=Un(),dn.updateQueue=S),S.memoCache=g,S=g.data[g.index],S===void 0)for(S=g.data[g.index]=Array(p),M=0;M<p;M++)S[M]=g0;return g.index++,S}function vr(p,g){return typeof g=="function"?g(p):g}function oa(p){var g=gt();return qn(g,Ut,p)}function qn(p,g,S){var M=p.queue;if(M===null)throw Error(i(311));M.lastRenderedReducer=S;var U=p.baseQueue,B=M.pending;if(B!==null){if(U!==null){var Y=U.next;U.next=B.next,B.next=Y}g.baseQueue=U=B,M.pending=null}if(B=p.baseState,U===null)p.memoizedState=B;else{g=U.next;var le=Y=null,Pe=null,Ke=g,ut=!1;do{var tt=Ke.lane&-536870913;if(tt!==Ke.lane?(Cn&tt)===tt:(wl&tt)===tt){var Et=Ke.revertLane;if(Et===0)Pe!==null&&(Pe=Pe.next={lane:0,revertLane:0,gesture:null,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null}),tt===_l&&(ut=!0);else if((wl&Et)===Et){Ke=Ke.next,Et===_l&&(ut=!0);continue}else tt={lane:0,revertLane:Ke.revertLane,gesture:null,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null},Pe===null?(le=Pe=tt,Y=B):Pe=Pe.next=tt,dn.lanes|=Et,Sl|=Et;tt=Ke.action,jn&&S(B,tt),B=Ke.hasEagerState?Ke.eagerState:S(B,tt)}else Et={lane:tt,revertLane:Ke.revertLane,gesture:Ke.gesture,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null},Pe===null?(le=Pe=Et,Y=B):Pe=Pe.next=Et,dn.lanes|=tt,Sl|=tt;Ke=Ke.next}while(Ke!==null&&Ke!==g);if(Pe===null?Y=B:Pe.next=le,!Kr(B,p.memoizedState)&&(yr=!0,ut&&(S=vi,S!==null)))throw S;p.memoizedState=B,p.baseState=Y,p.baseQueue=Pe,M.lastRenderedState=B}return U===null&&(M.lanes=0),[p.memoizedState,M.dispatch]}function hi(p){var g=gt(),S=g.queue;if(S===null)throw Error(i(311));S.lastRenderedReducer=p;var M=S.dispatch,U=S.pending,B=g.memoizedState;if(U!==null){S.pending=null;var Y=U=U.next;do B=p(B,Y.action),Y=Y.next;while(Y!==U);Kr(B,g.memoizedState)||(yr=!0),g.memoizedState=B,g.baseQueue===null&&(g.baseState=B),S.lastRenderedState=B}return[B,M]}function ri(p,g,S){var M=dn,U=gt(),B=Nn;if(B){if(S===void 0)throw Error(i(407));S=S()}else S=g();var Y=!Kr((Ut||U).memoizedState,S);if(Y&&(U.memoizedState=S,yr=!0),U=U.queue,od(Kc.bind(null,M,U,p),[p]),U.getSnapshot!==g||Y||nn!==null&&nn.memoizedState.tag&1){if(M.flags|=2048,Ya(9,{destroy:void 0},_i.bind(null,M,U,S,g),null),xn===null)throw Error(i(349));B||(wl&127)!==0||bi(M,g,S)}return S}function bi(p,g,S){p.flags|=16384,p={getSnapshot:g,value:S},g=dn.updateQueue,g===null?(g=Un(),dn.updateQueue=g,g.stores=[p]):(S=g.stores,S===null?g.stores=[p]:S.push(p))}function _i(p,g,S,M){g.value=S,g.getSnapshot=M,vs(g)&&Wb(p)}function Kc(p,g,S){return S(function(){vs(g)&&Wb(p)})}function vs(p){var g=p.getSnapshot;p=p.value;try{var S=g();return!Kr(p,S)}catch{return!0}}function Wb(p){var g=Ki(p,2);g!==null&&Pr(g,p,2)}function Fv(p){var g=sn();if(typeof p=="function"){var S=p;if(p=S(),jn){$(!0);try{S()}finally{$(!1)}}}return g.memoizedState=g.baseState=p,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vr,lastRenderedState:p},g}function Pf(p,g,S,M){return p.baseState=S,qn(p,Ut,typeof M=="function"?M:vr)}function ll(p,g,S,M,U){if(Up(p))throw Error(i(485));if(p=g.action,p!==null){var B={payload:U,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){B.listeners.push(Y)}};Ht.T!==null?S(!0):B.isTransition=!1,M(B),S=g.pending,S===null?(B.next=g.pending=B,Rp(g,B)):(B.next=S.next,g.pending=S.next=B)}}function Rp(p,g){var S=g.action,M=g.payload,U=p.state;if(g.isTransition){var B=Ht.T,Y={};Ht.T=Y;try{var le=S(U,M),Pe=Ht.S;Pe!==null&&Pe(Y,le),Ip(p,g,le)}catch(Ke){Yl(p,g,Ke)}finally{B!==null&&Y.types!==null&&(B.types=Y.types),Ht.T=B}}else try{B=S(U,M),Ip(p,g,B)}catch(Ke){Yl(p,g,Ke)}}function Ip(p,g,S){S!==null&&typeof S=="object"&&typeof S.then=="function"?S.then(function(M){Xc(p,g,M)},function(M){return Yl(p,g,M)}):Xc(p,g,S)}function Xc(p,g,S){g.status="fulfilled",g.value=S,Vv(g),p.state=S,g=p.pending,g!==null&&(S=g.next,S===g?p.pending=null:(S=S.next,g.next=S,Rp(p,S)))}function Yl(p,g,S){var M=p.pending;if(p.pending=null,M!==null){M=M.next;do g.status="rejected",g.reason=S,Vv(g),g=g.next;while(g!==M)}p.action=null}function Vv(p){p=p.listeners;for(var g=0;g<p.length;g++)(0,p[g])()}function Pp(p,g){return g}function Hv(p,g){if(Nn){var S=xn.formState;if(S!==null){e:{var M=dn;if(Nn){if(Er){var U=F_(Er,ha);if(U){Er=V_(U),M=j0(U);break e}}ke(M)}M=!1}M&&(g=S[0])}}S=sn(),S.memoizedState=S.baseState=g,M={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pp,lastRenderedState:g},S.queue=M,S=Qb.bind(null,dn,M),M.dispatch=S,M=Fv(!1);var B=Lp.bind(null,dn,!1,M.queue);return M=sn(),U={state:g,dispatch:null,action:p,pending:null},M.queue=U,S=ll.bind(null,dn,U,B,S),U.dispatch=S,M.memoizedState=p,[g,S,!1]}function ad(p){var g=gt();return go(g,Ut,p)}function go(p,g,S){if(g=qn(p,g,Pp)[0],p=oa(vr)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var M=Kt(g)}catch(Y){throw Y===yi?Is:Y}else M=g;g=gt();var U=g.queue,B=U.dispatch;return S!==g.memoizedState&&(dn.flags|=2048,Ya(9,{destroy:void 0},Gv.bind(null,U,S),null)),[M,B,p]}function Gv(p,g){p.action=g}function sd(p){var g=gt(),S=Ut;if(S!==null)return go(g,S,p);gt(),g=g.memoizedState,S=gt();var M=S.queue.dispatch;return S.memoizedState=p,[g,M,!1]}function Ya(p,g,S,M){return p={tag:p,create:S,deps:M,inst:g,next:null},g=dn.updateQueue,g===null&&(g=Un(),dn.updateQueue=g),S=g.lastEffect,S===null?g.lastEffect=p.next=p:(M=S.next,S.next=p,p.next=M,g.lastEffect=p),p}function Op(){return gt().memoizedState}function Yc(p,g,S,M){var U=sn();dn.flags|=p,U.memoizedState=Ya(1|g,{destroy:void 0},S,M===void 0?null:M)}function Of(p,g,S,M){var U=gt();M=M===void 0?null:M;var B=U.memoizedState.inst;Ut!==null&&M!==null&&Mt(M,Ut.memoizedState.deps)?U.memoizedState=Ya(g,B,S,M):(dn.flags|=p,U.memoizedState=Ya(1|g,B,S,M))}function jf(p,g){Yc(8390656,8,p,g)}function od(p,g){Of(2048,8,p,g)}function Kb(p){dn.flags|=4;var g=dn.updateQueue;if(g===null)g=Un(),dn.updateQueue=g,g.events=[p];else{var S=g.events;S===null?g.events=[p]:S.push(p)}}function la(p){var g=gt().memoizedState;return Kb({ref:g,nextImpl:p}),function(){if((An&2)!==0)throw Error(i(440));return g.impl.apply(void 0,arguments)}}function Jl(p,g){return Of(4,2,p,g)}function Df(p,g){return Of(4,4,p,g)}function ld(p,g){if(typeof g=="function"){p=p();var S=g(p);return function(){typeof S=="function"?S():g(null)}}if(g!=null)return p=p(),g.current=p,function(){g.current=null}}function Xb(p,g,S){S=S!=null?S.concat([p]):null,Of(4,4,ld.bind(null,g,p),S)}function Lf(){}function jp(p,g){var S=gt();g=g===void 0?null:g;var M=S.memoizedState;return g!==null&&Mt(g,M[1])?M[0]:(S.memoizedState=[p,g],p)}function cd(p,g){var S=gt();g=g===void 0?null:g;var M=S.memoizedState;if(g!==null&&Mt(g,M[1]))return M[0];if(M=p(),jn){$(!0);try{p()}finally{$(!1)}}return S.memoizedState=[M,g],M}function ud(p,g,S){return S===void 0||(wl&1073741824)!==0&&(Cn&261930)===0?p.memoizedState=g:(p.memoizedState=S,p=dl(),dn.lanes|=p,Sl|=p,S)}function qv(p,g,S,M){return Kr(S,g)?S:yu.current!==null?(p=ud(p,S,M),Kr(p,g)||(yr=!0),p):(wl&42)===0||(wl&1073741824)!==0&&(Cn&261930)===0?(yr=!0,p.memoizedState=S):(p=dl(),dn.lanes|=p,Sl|=p,g)}function Yb(p,g,S,M,U){var B=Es();Mn(B!==0&&8>B?B:8);var Y=Ht.T,le={};Ht.T=le,Lp(p,!1,g,S);try{var Pe=U(),Ke=Ht.S;if(Ke!==null&&Ke(le,Pe),Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"){var ut=mt(Pe,M);Uf(p,g,ut,Sr(p))}else Uf(p,g,M,Sr(p))}catch(tt){Uf(p,g,{then:function(){},status:"rejected",reason:tt},Sr())}finally{Mn(B),Y!==null&&le.types!==null&&(Y.types=le.types),Ht.T=Y}}function Jb(p){var g=p.memoizedState;if(g!==null)return g;g={memoizedState:uu,baseState:uu,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vr,lastRenderedState:uu},next:null};var S={};return g.next={memoizedState:S,baseState:S,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vr,lastRenderedState:S},next:null},p.memoizedState=g,p=p.alternate,p!==null&&(p.memoizedState=g),g}function $v(){return ne(du)}function Dp(){return gt().memoizedState}function Zb(){return gt().memoizedState}function XA(p){for(var g=p.return;g!==null;){switch(g.tag){case 24:case 3:var S=Sr();p=Ka(S);var M=Xa(g,p,S);M!==null&&(Pr(M,g,S),Kl(M,g,S)),g={cache:Oe()},p.payload=g;return}g=g.return}}function YA(p,g,S){var M=Sr();S={lane:M,revertLane:0,gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},Up(p)?e_(g,S):(S=$c(p,g,S,M),S!==null&&(Pr(S,p,M),t_(S,g,M)))}function Qb(p,g,S){var M=Sr();Uf(p,g,S,M)}function Uf(p,g,S,M){var U={lane:M,revertLane:0,gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null};if(Up(p))e_(g,U);else{var B=p.alternate;if(p.lanes===0&&(B===null||B.lanes===0)&&(B=g.lastRenderedReducer,B!==null))try{var Y=g.lastRenderedState,le=B(Y,S);if(U.hasEagerState=!0,U.eagerState=le,Kr(le,Y))return il(p,g,U,0),xn===null&&Wl(),!1}catch{}if(S=$c(p,g,U,M),S!==null)return Pr(S,p,M),t_(S,g,M),!0}return!1}function Lp(p,g,S,M){if(M={lane:2,revertLane:ht(),gesture:null,action:M,hasEagerState:!1,eagerState:null,next:null},Up(p)){if(g)throw Error(i(479))}else g=$c(p,S,M,2),g!==null&&Pr(g,p,2)}function Up(p){var g=p.alternate;return p===dn||g!==null&&g===dn}function e_(p,g){mn=yn=!0;var S=p.pending;S===null?g.next=g:(g.next=S.next,S.next=g),p.pending=g}function t_(p,g,S){if((S&4194048)!==0){var M=g.lanes;M&=p.pendingLanes,S|=M,g.lanes=S,L(p,S)}}function Wv(p,g,S,M){g=p.memoizedState,S=S(M,g),S=S==null?g:im({},g,S),p.memoizedState=S,p.lanes===0&&(p.updateQueue.baseState=S)}function zp(p,g,S,M,U,B,Y){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(M,B,Y):g.prototype&&g.prototype.isPureReactComponent?!He(S,M)||!He(U,B):!0}function n_(p,g,S,M){p=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(S,M),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(S,M),g.state!==p&&fh.enqueueReplaceState(g,g.state,null)}function Jc(p,g){var S=g;if("ref"in g){S={};for(var M in g)M!=="ref"&&(S[M]=g[M])}if(p=p.defaultProps){S===g&&(S=im({},S));for(var U in p)S[U]===void 0&&(S[U]=p[U])}return S}function Bp(p,g){try{var S=p.onUncaughtError;S(g.value,{componentStack:g.stack})}catch(M){setTimeout(function(){throw M})}}function Kv(p,g,S){try{var M=p.onCaughtError;M(S.value,{componentStack:S.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(U){setTimeout(function(){throw U})}}function Xv(p,g,S){return S=Ka(S),S.tag=3,S.payload={element:null},S.callback=function(){Bp(p,g)},S}function r_(p){return p=Ka(p),p.tag=3,p}function i_(p,g,S,M){var U=S.type.getDerivedStateFromError;if(typeof U=="function"){var B=M.value;p.payload=function(){return U(B)},p.callback=function(){Kv(g,S,M)}}var Y=S.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(p.callback=function(){Kv(g,S,M),typeof U!="function"&&(Tl===null?Tl=new Set([this]):Tl.add(this));var le=M.stack;this.componentDidCatch(M.value,{componentStack:le!==null?le:""})})}function JA(p,g,S,M,U){if(S.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){if(g=S.alternate,g!==null&&ft(g,S,U,!0),S=Ia.current,S!==null){switch(S.tag){case 31:case 13:return Pa===null?_d():S.alternate===null&&Lr===0&&(Lr=3),S.flags&=-257,S.flags|=65536,S.lanes=U,M===Po?S.flags|=16384:(g=S.updateQueue,g===null?S.updateQueue=new Set([M]):g.add(M),Td(p,M,U)),!1;case 22:return S.flags|=65536,M===Po?S.flags|=16384:(g=S.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([M])},S.updateQueue=g):(S=g.retryQueue,S===null?g.retryQueue=new Set([M]):S.add(M)),Td(p,M,U)),!1}throw Error(i(435,S.tag))}return Td(p,M,U),_d(),!1}if(Nn)return g=Ia.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=U,M!==km&&(p=Error(i(422),{cause:M}),Fe(ce(p,S)))):(M!==km&&(g=Error(i(423),{cause:M}),Fe(ce(g,S))),p=p.current.alternate,p.flags|=65536,U&=-U,p.lanes|=U,M=ce(M,S),U=Xv(p.stateNode,M,U),Wc(p,U),Lr!==4&&(Lr=2)),!1;var B=Error(i(520),{cause:M});if(B=ce(B,S),ph===null?ph=[B]:ph.push(B),Lr!==4&&(Lr=2),g===null)return!0;M=ce(M,S),S=g;do{switch(S.tag){case 3:return S.flags|=65536,p=U&-U,S.lanes|=p,p=Xv(S.stateNode,M,p),Wc(S,p),!1;case 1:if(g=S.type,B=S.stateNode,(S.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Tl===null||!Tl.has(B))))return S.flags|=65536,U&=-U,S.lanes|=U,U=r_(U),i_(U,p,S,M),Wc(S,U),!1}S=S.return}while(S!==null);return!1}function Oi(p,g,S,M){g.child=p===null?Q0(g,null,S,M):Li(g,p.child,S,M)}function a_(p,g,S,M,U){S=S.render;var B=g.ref;if("ref"in M){var Y={};for(var le in M)le!=="ref"&&(Y[le]=M[le])}else Y=M;return et(g),M=It(p,g,S,Y,B,U),le=Vn(),p!==null&&!yr?(cr(p,g,U),vo(p,g,U)):(Nn&&le&&ae(g),g.flags|=1,Oi(p,g,M,U),g.child)}function s_(p,g,S,M,U){if(p===null){var B=S.type;return typeof B=="function"&&!nu(B)&&B.defaultProps===void 0&&S.compare===null?(g.tag=15,g.type=B,o_(p,g,B,M,U)):(p=pl(S.type,null,M,g,g.mode,U),p.ref=g.ref,p.return=g,g.child=p)}if(B=p.child,!Bf(p,U)){var Y=B.memoizedProps;if(S=S.compare,S=S!==null?S:He,S(Y,M)&&p.ref===g.ref)return vo(p,g,U)}return g.flags|=1,p=Qa(B,M),p.ref=g.ref,p.return=g,g.child=p}function o_(p,g,S,M,U){if(p!==null){var B=p.memoizedProps;if(He(B,M)&&p.ref===g.ref)if(yr=!1,g.pendingProps=M=B,Bf(p,U))(p.flags&131072)!==0&&(yr=!0);else return g.lanes=p.lanes,vo(p,g,U)}return Vp(p,g,S,M,U)}function l_(p,g,S,M){var U=M.children,B=p!==null?p.memoizedState:null;if(p===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),M.mode==="hidden"){if((g.flags&128)!==0){if(B=B!==null?B.baseLanes|S:S,p!==null){for(M=g.child=p.child,U=0;M!==null;)U=U|M.lanes|M.childLanes,M=M.sibling;M=U&~B}else M=0,g.child=null;return dd(p,g,B,S,M)}if((S&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},p!==null&&vt(g,B!==null?B.cachePool:null),B!==null?Xl(g,B):mo(),Ee(g);else return M=g.lanes=536870912,dd(p,g,B!==null?B.baseLanes|S:S,S,M)}else B!==null?(vt(g,B.cachePool),Xl(g,B),xe(),g.memoizedState=null):(p!==null&&vt(g,null),mo(),xe());return Oi(p,g,U,S),g.child}function Zc(p,g){return p!==null&&p.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function dd(p,g,S,M,U){var B=rt();return B=B===null?null:{parent:$r?Ar._currentValue:Ar._currentValue2,pool:B},g.memoizedState={baseLanes:S,cachePool:B},p!==null&&vt(g,null),mo(),Ee(g),p!==null&&ft(p,g,M,!0),g.childLanes=U,null}function Fp(p,g){return g=Zl({mode:g.mode,children:g.children},p.mode),g.ref=p.ref,p.child=g,g.return=p,g}function Yv(p,g,S){return Li(g,p.child,null,S),p=Fp(g,g.pendingProps),p.flags|=2,at(g),g.memoizedState=null,p}function c_(p,g,S){var M=g.pendingProps,U=(g.flags&128)!==0;if(g.flags&=-129,p===null){if(Nn){if(M.mode==="hidden")return p=Fp(g,M),g.lanes=536870912,Zc(null,p);if(Ce(g),(p=Er)?(p=L0(p,ha),p!==null&&(g.memoizedState={dehydrated:p,treeContext:Ms!==null?{id:ji,overflow:Ys}:null,retryLane:536870912,hydrationErrors:null},S=h0(p),S.return=g,g.child=S,gi=g,Er=null)):p=null,p===null)throw ke(g);return g.lanes=536870912,null}return Fp(g,M)}var B=p.memoizedState;if(B!==null){var Y=B.dehydrated;if(Ce(g),U)if(g.flags&256)g.flags&=-257,g=Yv(p,g,S);else if(g.memoizedState!==null)g.child=p.child,g.flags|=128,g=null;else throw Error(i(558));else if(yr||ft(p,g,S,!1),U=(S&p.childLanes)!==0,yr||U){if(M=xn,M!==null&&(Y=z(M,S),Y!==0&&Y!==B.retryLane))throw B.retryLane=Y,Ki(p,Y),Pr(M,p,Y),ma;_d(),g=Yv(p,g,S)}else p=B.treeContext,Tr&&(Er=$_(Y),gi=g,Nn=!0,Io=null,ha=!1,p!==null&&Ie(g,p)),g=Fp(g,M),g.flags|=4096;return g}return p=Qa(p.child,{mode:M.mode,children:M.children}),p.ref=g.ref,g.child=p,p.return=g,p}function zf(p,g){var S=g.ref;if(S===null)p!==null&&p.ref!==null&&(g.flags|=4194816);else{if(typeof S!="function"&&typeof S!="object")throw Error(i(284));(p===null||p.ref!==S)&&(g.flags|=4194816)}}function Vp(p,g,S,M,U){return et(g),S=It(p,g,S,M,void 0,U),M=Vn(),p!==null&&!yr?(cr(p,g,U),vo(p,g,U)):(Nn&&M&&ae(g),g.flags|=1,Oi(p,g,S,U),g.child)}function Jv(p,g,S,M,U,B){return et(g),g.updateQueue=null,S=jt(g,M,S,U),Ft(p),M=Vn(),p!==null&&!yr?(cr(p,g,B),vo(p,g,B)):(Nn&&M&&ae(g),g.flags|=1,Oi(p,g,S,B),g.child)}function Qc(p,g,S,M,U){if(et(g),g.stateNode===null){var B=No,Y=S.contextType;typeof Y=="object"&&Y!==null&&(B=ne(Y)),B=new S(M,B),g.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,B.updater=fh,g.stateNode=B,B._reactInternals=g,B=g.stateNode,B.props=M,B.state=g.memoizedState,B.refs={},fi(g),Y=S.contextType,B.context=typeof Y=="object"&&Y!==null?ne(Y):No,B.state=g.memoizedState,Y=S.getDerivedStateFromProps,typeof Y=="function"&&(Wv(g,S,Y,M),B.state=g.memoizedState),typeof S.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(Y=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),Y!==B.state&&fh.enqueueReplaceState(B,B.state,null),al(g,M,B,U),Ws(),B.state=g.memoizedState),typeof B.componentDidMount=="function"&&(g.flags|=4194308),M=!0}else if(p===null){B=g.stateNode;var le=g.memoizedProps,Pe=Jc(S,le);B.props=Pe;var Ke=B.context,ut=S.contextType;Y=No,typeof ut=="object"&&ut!==null&&(Y=ne(ut));var tt=S.getDerivedStateFromProps;ut=typeof tt=="function"||typeof B.getSnapshotBeforeUpdate=="function",le=g.pendingProps!==le,ut||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(le||Ke!==Y)&&n_(g,B,M,Y),ns=!1;var Et=g.memoizedState;B.state=Et,al(g,M,B,U),Ws(),Ke=g.memoizedState,le||Et!==Ke||ns?(typeof tt=="function"&&(Wv(g,S,tt,M),Ke=g.memoizedState),(Pe=ns||zp(g,S,Pe,M,Et,Ke,Y))?(ut||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(g.flags|=4194308)):(typeof B.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=M,g.memoizedState=Ke),B.props=M,B.state=Ke,B.context=Y,M=Pe):(typeof B.componentDidMount=="function"&&(g.flags|=4194308),M=!1)}else{B=g.stateNode,Wa(p,g),Y=g.memoizedProps,ut=Jc(S,Y),B.props=ut,tt=g.pendingProps,Et=B.context,Ke=S.contextType,Pe=No,typeof Ke=="object"&&Ke!==null&&(Pe=ne(Ke)),le=S.getDerivedStateFromProps,(Ke=typeof le=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(Y!==tt||Et!==Pe)&&n_(g,B,M,Pe),ns=!1,Et=g.memoizedState,B.state=Et,al(g,M,B,U),Ws();var ln=g.memoizedState;Y!==tt||Et!==ln||ns||p!==null&&p.dependencies!==null&&Ct(p.dependencies)?(typeof le=="function"&&(Wv(g,S,le,M),ln=g.memoizedState),(ut=ns||zp(g,S,ut,M,Et,ln,Pe)||p!==null&&p.dependencies!==null&&Ct(p.dependencies))?(Ke||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(M,ln,Pe),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(M,ln,Pe)),typeof B.componentDidUpdate=="function"&&(g.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof B.componentDidUpdate!="function"||Y===p.memoizedProps&&Et===p.memoizedState||(g.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||Y===p.memoizedProps&&Et===p.memoizedState||(g.flags|=1024),g.memoizedProps=M,g.memoizedState=ln),B.props=M,B.state=ln,B.context=Pe,M=ut):(typeof B.componentDidUpdate!="function"||Y===p.memoizedProps&&Et===p.memoizedState||(g.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||Y===p.memoizedProps&&Et===p.memoizedState||(g.flags|=1024),M=!1)}return B=M,zf(p,g),M=(g.flags&128)!==0,B||M?(B=g.stateNode,S=M&&typeof S.getDerivedStateFromError!="function"?null:B.render(),g.flags|=1,p!==null&&M?(g.child=Li(g,p.child,null,U),g.child=Li(g,null,S,U)):Oi(p,g,S,U),g.memoizedState=B.state,p=g.child):p=vo(p,g,U),p}function u_(p,g,S,M){return xt(),g.flags|=256,Oi(p,g,S,M),g.child}function Zv(p){return{baseLanes:p,cachePool:Ze()}}function Qv(p,g,S){return p=p!==null?p.childLanes&~S:0,g&&(p|=ga),p}function e0(p,g,S){var M=g.pendingProps,U=!1,B=(g.flags&128)!==0,Y;if((Y=B)||(Y=p!==null&&p.memoizedState===null?!1:(Vr.current&2)!==0),Y&&(U=!0,g.flags&=-129),Y=(g.flags&32)!==0,g.flags&=-33,p===null){if(Nn){if(U?ge(g):xe(),(p=Er)?(p=Y_(p,ha),p!==null&&(g.memoizedState={dehydrated:p,treeContext:Ms!==null?{id:ji,overflow:Ys}:null,retryLane:536870912,hydrationErrors:null},S=h0(p),S.return=g,g.child=S,gi=g,Er=null)):p=null,p===null)throw ke(g);return fm(p)?g.lanes=32:g.lanes=536870912,null}var le=M.children;return M=M.fallback,U?(xe(),U=g.mode,le=Zl({mode:"hidden",children:le},U),M=Ss(M,U,S,null),le.return=g,M.return=g,le.sibling=M,g.child=le,M=g.child,M.memoizedState=Zv(S),M.childLanes=Qv(p,Y,S),g.memoizedState=xu,Zc(null,M)):(ge(g),Hp(g,le))}var Pe=p.memoizedState;if(Pe!==null&&(le=Pe.dehydrated,le!==null)){if(B)g.flags&256?(ge(g),g.flags&=-257,g=eu(p,g,S)):g.memoizedState!==null?(xe(),g.child=p.child,g.flags|=128,g=null):(xe(),le=M.fallback,U=g.mode,M=Zl({mode:"visible",children:M.children},U),le=Ss(le,U,S,null),le.flags|=2,M.return=g,le.return=g,M.sibling=le,g.child=M,Li(g,p.child,null,S),M=g.child,M.memoizedState=Zv(S),M.childLanes=Qv(p,Y,S),g.memoizedState=xu,g=Zc(null,M));else if(ge(g),fm(le))Y=hm(le).digest,M=Error(i(419)),M.stack="",M.digest=Y,Fe({value:M,source:null,stack:null}),g=eu(p,g,S);else if(yr||ft(p,g,S,!1),Y=(S&p.childLanes)!==0,yr||Y){if(Y=xn,Y!==null&&(M=z(Y,S),M!==0&&M!==Pe.retryLane))throw Pe.retryLane=M,Ki(p,M),Pr(Y,p,M),ma;dc(le)||_d(),g=eu(p,g,S)}else dc(le)?(g.flags|=192,g.child=p.child,g=null):(p=Pe.treeContext,Tr&&(Er=W_(le),gi=g,Nn=!0,Io=null,ha=!1,p!==null&&Ie(g,p)),g=Hp(g,M.children),g.flags|=4096);return g}return U?(xe(),le=M.fallback,U=g.mode,Pe=p.child,B=Pe.sibling,M=Qa(Pe,{mode:"hidden",children:M.children}),M.subtreeFlags=Pe.subtreeFlags&65011712,B!==null?le=Qa(B,le):(le=Ss(le,U,S,null),le.flags|=2),le.return=g,M.return=g,M.sibling=le,g.child=M,Zc(null,M),M=g.child,le=p.child.memoizedState,le===null?le=Zv(S):(U=le.cachePool,U!==null?(Pe=$r?Ar._currentValue:Ar._currentValue2,U=U.parent!==Pe?{parent:Pe,pool:Pe}:U):U=Ze(),le={baseLanes:le.baseLanes|S,cachePool:U}),M.memoizedState=le,M.childLanes=Qv(p,Y,S),g.memoizedState=xu,Zc(p.child,M)):(ge(g),S=p.child,p=S.sibling,S=Qa(S,{mode:"visible",children:M.children}),S.return=g,S.sibling=null,p!==null&&(Y=g.deletions,Y===null?(g.deletions=[p],g.flags|=16):Y.push(p)),g.child=S,g.memoizedState=null,S)}function Hp(p,g){return g=Zl({mode:"visible",children:g},p.mode),g.return=p,p.child=g}function Zl(p,g){return p=n(22,p,null,g),p.lanes=0,p}function eu(p,g,S){return Li(g,p.child,null,S),p=Hp(g,g.pendingProps.children),p.flags|=2,g.memoizedState=null,p}function d_(p,g,S){p.lanes|=g;var M=p.alternate;M!==null&&(M.lanes|=g),ie(p.return,g,S)}function fd(p,g,S,M,U,B){var Y=p.memoizedState;Y===null?p.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:M,tail:S,tailMode:U,treeForkCount:B}:(Y.isBackwards=g,Y.rendering=null,Y.renderingStartTime=0,Y.last=M,Y.tail=S,Y.tailMode=U,Y.treeForkCount=B)}function t0(p,g,S){var M=g.pendingProps,U=M.revealOrder,B=M.tail;M=M.children;var Y=Vr.current,le=(Y&2)!==0;if(le?(Y=Y&1|2,g.flags|=128):Y&=1,_(Vr,Y),Oi(p,g,M,S),M=Nn?ch:0,!le&&p!==null&&(p.flags&128)!==0)e:for(p=g.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&d_(p,S,g);else if(p.tag===19)d_(p,S,g);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===g)break e;for(;p.sibling===null;){if(p.return===null||p.return===g)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}switch(U){case"forwards":for(S=g.child,U=null;S!==null;)p=S.alternate,p!==null&&Tt(p)===null&&(U=S),S=S.sibling;S=U,S===null?(U=g.child,g.child=null):(U=S.sibling,S.sibling=null),fd(g,!1,U,S,B,M);break;case"backwards":case"unstable_legacy-backwards":for(S=null,U=g.child,g.child=null;U!==null;){if(p=U.alternate,p!==null&&Tt(p)===null){g.child=U;break}p=U.sibling,U.sibling=S,S=U,U=p}fd(g,!0,S,null,B,M);break;case"together":fd(g,!1,null,null,void 0,M);break;default:g.memoizedState=null}return g.child}function vo(p,g,S){if(p!==null&&(g.dependencies=p.dependencies),Sl|=g.lanes,(S&g.childLanes)===0)if(p!==null){if(ft(p,g,S,!1),(S&g.childLanes)===0)return null}else return null;if(p!==null&&g.child!==p.child)throw Error(i(153));if(g.child!==null){for(p=g.child,S=Qa(p,p.pendingProps),g.child=S,S.return=g;p.sibling!==null;)p=p.sibling,S=S.sibling=Qa(p,p.pendingProps),S.return=g;S.sibling=null}return g.child}function Bf(p,g){return(p.lanes&g)!==0?!0:(p=p.dependencies,!!(p!==null&&Ct(p)))}function n0(p,g,S){switch(g.tag){case 3:Xe(g,g.stateNode.containerInfo),Le(g,Ar,p.memoizedState.cache),xt();break;case 27:case 5:_e(g);break;case 4:Xe(g,g.stateNode.containerInfo);break;case 10:Le(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,Ce(g),null;break;case 13:var M=g.memoizedState;if(M!==null)return M.dehydrated!==null?(ge(g),g.flags|=128,null):(S&g.child.childLanes)!==0?e0(p,g,S):(ge(g),p=vo(p,g,S),p!==null?p.sibling:null);ge(g);break;case 19:var U=(p.flags&128)!==0;if(M=(S&g.childLanes)!==0,M||(ft(p,g,S,!1),M=(S&g.childLanes)!==0),U){if(M)return t0(p,g,S);g.flags|=128}if(U=g.memoizedState,U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),_(Vr,Vr.current),M)break;return null;case 22:return g.lanes=0,l_(p,g,S,g.pendingProps);case 24:Le(g,Ar,p.memoizedState.cache)}return vo(p,g,S)}function r0(p,g,S){if(p!==null)if(p.memoizedProps!==g.pendingProps)yr=!0;else{if(!Bf(p,S)&&(g.flags&128)===0)return yr=!1,n0(p,g,S);yr=(p.flags&131072)!==0}else yr=!1,Nn&&(g.flags&1048576)!==0&&W(g,ch,g.index);switch(g.lanes=0,g.tag){case 16:e:{var M=g.pendingProps;if(p=On(g.elementType),g.type=p,typeof p=="function")nu(p)?(M=Jc(p,M),g.tag=1,g=Qc(null,g,p,M,S)):(g.tag=0,g=Vp(null,g,p,M,S));else{if(p!=null){var U=p.$$typeof;if(U===Ed){g.tag=11,g=a_(null,g,p,M,S);break e}else if(U===sm){g.tag=14,g=s_(null,g,p,M,S);break e}}throw g=m(p)||p,Error(i(306,g,""))}}return g;case 0:return Vp(p,g,g.type,g.pendingProps,S);case 1:return M=g.type,U=Jc(M,g.pendingProps),Qc(p,g,M,U,S);case 3:e:{if(Xe(g,g.stateNode.containerInfo),p===null)throw Error(i(387));var B=g.pendingProps;U=g.memoizedState,M=U.element,Wa(p,g),al(g,B,null,S);var Y=g.memoizedState;if(B=Y.cache,Le(g,Ar,B),B!==U.cache&&Nt(g,[Ar],S,!0),Ws(),B=Y.element,Tr&&U.isDehydrated)if(U={element:B,isDehydrated:!1,cache:Y.cache},g.updateQueue.baseState=U,g.memoizedState=U,g.flags&256){g=u_(p,g,B,S);break e}else if(B!==M){M=ce(Error(i(424)),g),Fe(M),g=u_(p,g,B,S);break e}else for(Tr&&(Er=q_(g.stateNode.containerInfo),gi=g,Nn=!0,Io=null,ha=!0),S=Q0(g,null,B,S),g.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(xt(),B===M){g=vo(p,g,S);break e}Oi(p,g,B,S)}g=g.child}return g;case 26:if(As)return zf(p,g),p===null?(S=V0(g.type,null,g.pendingProps,null))?g.memoizedState=S:Nn||(g.stateNode=vm(g.type,g.pendingProps,Di.current,g)):g.memoizedState=V0(g.type,p.memoizedProps,g.pendingProps,p.memoizedState),null;case 27:if(mi)return _e(g),p===null&&mi&&Nn&&(M=g.stateNode=ym(g.type,g.pendingProps,Di.current,Ei.current,!1),gi=g,ha=!0,Er=D0(g.type,M,Er)),Oi(p,g,g.pendingProps.children,S),zf(p,g),p===null&&(g.flags|=4194304),g.child;case 5:return p===null&&Nn&&(aw(g.type,g.pendingProps,Ei.current),(U=M=Er)&&(M=K_(M,g.type,g.pendingProps,ha),M!==null?(g.stateNode=M,gi=g,Er=G_(M),ha=!1,U=!0):U=!1),U||ke(g)),_e(g),U=g.type,B=g.pendingProps,Y=p!==null?p.memoizedProps:null,M=B.children,fa(U,B)?M=null:Y!==null&&fa(U,Y)&&(g.flags|=32),g.memoizedState!==null&&(U=It(p,g,$t,null,null,S),$r?du._currentValue=U:du._currentValue2=U),zf(p,g),Oi(p,g,M,S),g.child;case 6:return p===null&&Nn&&(F0(g.pendingProps,Ei.current),(p=S=Er)&&(S=X_(S,g.pendingProps,ha),S!==null?(g.stateNode=S,gi=g,Er=null,p=!0):p=!1),p||ke(g)),null;case 13:return e0(p,g,S);case 4:return Xe(g,g.stateNode.containerInfo),M=g.pendingProps,p===null?g.child=Li(g,null,M,S):Oi(p,g,M,S),g.child;case 11:return a_(p,g,g.type,g.pendingProps,S);case 7:return Oi(p,g,g.pendingProps,S),g.child;case 8:return Oi(p,g,g.pendingProps.children,S),g.child;case 12:return Oi(p,g,g.pendingProps.children,S),g.child;case 10:return M=g.pendingProps,Le(g,g.type,M.value),Oi(p,g,M.children,S),g.child;case 9:return U=g.type._context,M=g.pendingProps.children,et(g),U=ne(U),M=M(U),g.flags|=1,Oi(p,g,M,S),g.child;case 14:return s_(p,g,g.type,g.pendingProps,S);case 15:return o_(p,g,g.type,g.pendingProps,S);case 19:return t0(p,g,S);case 31:return c_(p,g,S);case 22:return l_(p,g,S,g.pendingProps);case 24:return et(g),M=ne(Ar),p===null?(U=rt(),U===null&&(U=xn,B=Oe(),U.pooledCache=B,B.refCount++,B!==null&&(U.pooledCacheLanes|=S),U=B),g.memoizedState={parent:M,cache:U},fi(g),Le(g,Ar,U)):((p.lanes&S)!==0&&(Wa(p,g),al(g,null,null,S),Ws()),U=p.memoizedState,B=g.memoizedState,U.parent!==M?(U={parent:M,cache:M},g.memoizedState=U,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=U),Le(g,Ar,M)):(M=B.cache,Le(g,Ar,M),M!==U.cache&&Nt(g,[Ar],S,!0))),Oi(p,g,g.pendingProps.children,S),g.child;case 29:throw g.pendingProps}throw Error(i(156,g.tag))}function ys(p){p.flags|=4}function Ff(p){es&&(p.flags|=8)}function f_(p,g){if(p!==null&&p.child===g.child)return!1;if((g.flags&16)!==0)return!0;for(p=g.child;p!==null;){if((p.flags&8218)!==0||(p.subtreeFlags&8218)!==0)return!0;p=p.sibling}return!1}function i0(p,g,S,M){if(In)for(S=g.child;S!==null;){if(S.tag===5||S.tag===6)th(p,S.stateNode);else if(!(S.tag===4||mi&&S.tag===27)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===g)break;for(;S.sibling===null;){if(S.return===null||S.return===g)return;S=S.return}S.sibling.return=S.return,S=S.sibling}else if(es)for(var U=g.child;U!==null;){if(U.tag===5){var B=U.stateNode;S&&M&&(B=B_(B,U.type,U.memoizedProps)),th(p,B)}else if(U.tag===6)B=U.stateNode,S&&M&&(B=O0(B,U.memoizedProps)),th(p,B);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)B=U.child,B!==null&&(B.return=U),i0(p,U,!0,!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===g)break;for(;U.sibling===null;){if(U.return===null||U.return===g)return;U=U.return}U.sibling.return=U.return,U=U.sibling}}function h_(p,g,S,M){var U=!1;if(es)for(var B=g.child;B!==null;){if(B.tag===5){var Y=B.stateNode;S&&M&&(Y=B_(Y,B.type,B.memoizedProps)),I0(p,Y)}else if(B.tag===6)Y=B.stateNode,S&&M&&(Y=O0(Y,B.memoizedProps)),I0(p,Y);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)U=B.child,U!==null&&(U.return=B),h_(p,B,!0,!0),U=!0;else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===g)break;for(;B.sibling===null;){if(B.return===null||B.return===g)return U;B=B.return}B.sibling.return=B.return,B=B.sibling}return U}function p_(p,g){if(es&&f_(p,g)){p=g.stateNode;var S=p.containerInfo,M=R0();h_(M,g,!1,!1),p.pendingChildren=M,ys(g),z_(S,M)}}function a0(p,g,S,M){if(In)p.memoizedProps!==M&&ys(g);else if(es){var U=p.stateNode,B=p.memoizedProps;if((p=f_(p,g))||B!==M){var Y=Ei.current;B=U_(U,S,B,M,!p,null),B===U?g.stateNode=U:(Ff(g),Ma(B,S,M,Y)&&ys(g),g.stateNode=B,p&&i0(B,g,!1,!1))}else g.stateNode=U}}function ca(p,g,S,M,U){if((p.mode&32)!==0&&(S===null?nh(g,M):Cd(g,S,M))){if(p.flags|=16777216,(U&335544128)===U||b0(g,M))if(Or(p.stateNode,g,M))p.flags|=8192;else if(Rn())p.flags|=8192;else throw pa=Po,Nm}else p.flags&=-16777217}function hd(p,g){if($0(g)){if(p.flags|=16777216,!W0(g))if(Rn())p.flags|=8192;else throw pa=Po,Nm}else p.flags&=-16777217}function Vf(p,g){g!==null&&(p.flags|=4),p.flags&16384&&(g=p.tag!==22?P():536870912,p.lanes|=g,zd|=g)}function pd(p,g){if(!Nn)switch(p.tailMode){case"hidden":g=p.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?p.tail=null:S.sibling=null;break;case"collapsed":S=p.tail;for(var M=null;S!==null;)S.alternate!==null&&(M=S),S=S.sibling;M===null?g||p.tail===null?p.tail=null:p.tail.sibling=null:M.sibling=null}}function ur(p){var g=p.alternate!==null&&p.alternate.child===p.child,S=0,M=0;if(g)for(var U=p.child;U!==null;)S|=U.lanes|U.childLanes,M|=U.subtreeFlags&65011712,M|=U.flags&65011712,U.return=p,U=U.sibling;else for(U=p.child;U!==null;)S|=U.lanes|U.childLanes,M|=U.subtreeFlags,M|=U.flags,U.return=p,U=U.sibling;return p.subtreeFlags|=M,p.childLanes=S,g}function m_(p,g,S){var M=g.pendingProps;switch(me(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ur(g),null;case 1:return ur(g),null;case 3:return S=g.stateNode,M=null,p!==null&&(M=p.memoizedState.cache),g.memoizedState.cache!==M&&(g.flags|=2048),Qe(Ar),ve(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(p===null||p.child===null)&&(Ue(g)?ys(g):p===null||p.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,Me())),p_(p,g),ur(g),null;case 26:if(As){var U=g.type,B=g.memoizedState;return p===null?(ys(g),B!==null?(ur(g),hd(g,B)):(ur(g),ca(g,U,null,M,S))):B?B!==p.memoizedState?(ys(g),ur(g),hd(g,B)):(ur(g),g.flags&=-16777217):(B=p.memoizedProps,In?B!==M&&ys(g):a0(p,g,U,M),ur(g),ca(g,U,B,M,S)),null}case 27:if(mi){if(Ye(g),S=Di.current,U=g.type,p!==null&&g.stateNode!=null)In?p.memoizedProps!==M&&ys(g):a0(p,g,U,M);else{if(!M){if(g.stateNode===null)throw Error(i(166));return ur(g),null}p=Ei.current,Ue(g)?qe(g,p):(p=ym(U,M,S,p,!0),g.stateNode=p,ys(g))}return ur(g),null}case 5:if(Ye(g),U=g.type,p!==null&&g.stateNode!=null)a0(p,g,U,M);else{if(!M){if(g.stateNode===null)throw Error(i(166));return ur(g),null}if(B=Ei.current,Ue(g))qe(g,B),nw(g.stateNode,U,M,B)&&(g.flags|=64);else{var Y=y0(U,M,Di.current,B,g);Ff(g),i0(Y,g,!1,!1),g.stateNode=Y,Ma(Y,U,M,B)&&ys(g)}}return ur(g),ca(g,g.type,p===null?null:p.memoizedProps,g.pendingProps,S),null;case 6:if(p&&g.stateNode!=null)S=p.memoizedProps,In?S!==M&&ys(g):es&&(S!==M?(p=Di.current,S=Ei.current,Ff(g),g.stateNode=vl(M,p,S,g)):g.stateNode=p.stateNode);else{if(typeof M!="string"&&g.stateNode===null)throw Error(i(166));if(p=Di.current,S=Ei.current,Ue(g)){if(!Tr)throw Error(i(176));if(p=g.stateNode,S=g.memoizedProps,M=null,U=gi,U!==null)switch(U.tag){case 27:case 5:M=U.memoizedProps}nk(p,S,g,M)||ke(g,!0)}else Ff(g),g.stateNode=vl(M,p,S,g)}return ur(g),null;case 31:if(S=g.memoizedState,p===null||p.memoizedState!==null){if(M=Ue(g),S!==null){if(p===null){if(!M)throw Error(i(318));if(!Tr)throw Error(i(556));if(p=g.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(557));U0(p,g)}else xt(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;ur(g),p=!1}else S=Me(),p!==null&&p.memoizedState!==null&&(p.memoizedState.hydrationErrors=S),p=!0;if(!p)return g.flags&256?(at(g),g):(at(g),null);if((g.flags&128)!==0)throw Error(i(558))}return ur(g),null;case 13:if(M=g.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(U=Ue(g),M!==null&&M.dehydrated!==null){if(p===null){if(!U)throw Error(i(318));if(!Tr)throw Error(i(344));if(U=g.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(i(317));Z_(U,g)}else xt(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;ur(g),U=!1}else U=Me(),p!==null&&p.memoizedState!==null&&(p.memoizedState.hydrationErrors=U),U=!0;if(!U)return g.flags&256?(at(g),g):(at(g),null)}return at(g),(g.flags&128)!==0?(g.lanes=S,g):(S=M!==null,p=p!==null&&p.memoizedState!==null,S&&(M=g.child,U=null,M.alternate!==null&&M.alternate.memoizedState!==null&&M.alternate.memoizedState.cachePool!==null&&(U=M.alternate.memoizedState.cachePool.pool),B=null,M.memoizedState!==null&&M.memoizedState.cachePool!==null&&(B=M.memoizedState.cachePool.pool),B!==U&&(M.flags|=2048)),S!==p&&S&&(g.child.flags|=8192),Vf(g,g.updateQueue),ur(g),null);case 4:return ve(),p_(p,g),p===null&&rr(g.stateNode.containerInfo),ur(g),null;case 10:return Qe(g.type),ur(g),null;case 19:if(x(Vr),M=g.memoizedState,M===null)return ur(g),null;if(U=(g.flags&128)!==0,B=M.rendering,B===null)if(U)pd(M,!1);else{if(Lr!==0||p!==null&&(p.flags&128)!==0)for(p=g.child;p!==null;){if(B=Tt(p),B!==null){for(g.flags|=128,pd(M,!1),p=B.updateQueue,g.updateQueue=p,Vf(g,p),g.subtreeFlags=0,p=S,S=g.child;S!==null;)tm(S,p),S=S.sibling;return _(Vr,Vr.current&1|2),Nn&&de(g,M.treeForkCount),g.child}p=p.sibling}M.tail!==null&&Yi()>wc&&(g.flags|=128,U=!0,pd(M,!1),g.lanes=4194304)}else{if(!U)if(p=Tt(B),p!==null){if(g.flags|=128,U=!0,p=p.updateQueue,g.updateQueue=p,Vf(g,p),pd(M,!0),M.tail===null&&M.tailMode==="hidden"&&!B.alternate&&!Nn)return ur(g),null}else 2*Yi()-M.renderingStartTime>wc&&S!==536870912&&(g.flags|=128,U=!0,pd(M,!1),g.lanes=4194304);M.isBackwards?(B.sibling=g.child,g.child=B):(p=M.last,p!==null?p.sibling=B:g.child=B,M.last=B)}return M.tail!==null?(p=M.tail,M.rendering=p,M.tail=p.sibling,M.renderingStartTime=Yi(),p.sibling=null,S=Vr.current,_(Vr,U?S&1|2:S&1),Nn&&de(g,M.treeForkCount),p):(ur(g),null);case 22:case 23:return at(g),Z(),M=g.memoizedState!==null,p!==null?p.memoizedState!==null!==M&&(g.flags|=8192):M&&(g.flags|=8192),M?(S&536870912)!==0&&(g.flags&128)===0&&(ur(g),g.subtreeFlags&6&&(g.flags|=8192)):ur(g),S=g.updateQueue,S!==null&&Vf(g,S.retryQueue),S=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(S=p.memoizedState.cachePool.pool),M=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(M=g.memoizedState.cachePool.pool),M!==S&&(g.flags|=2048),p!==null&&x(pc),null;case 24:return S=null,p!==null&&(S=p.memoizedState.cache),g.memoizedState.cache!==S&&(g.flags|=2048),Qe(Ar),ur(g),null;case 25:return null;case 30:return null}throw Error(i(156,g.tag))}function s0(p,g){switch(me(g),g.tag){case 1:return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 3:return Qe(Ar),ve(),p=g.flags,(p&65536)!==0&&(p&128)===0?(g.flags=p&-65537|128,g):null;case 26:case 27:case 5:return Ye(g),null;case 31:if(g.memoizedState!==null){if(at(g),g.alternate===null)throw Error(i(340));xt()}return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 13:if(at(g),p=g.memoizedState,p!==null&&p.dehydrated!==null){if(g.alternate===null)throw Error(i(340));xt()}return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 19:return x(Vr),null;case 4:return ve(),null;case 10:return Qe(g.type),null;case 22:case 23:return at(g),Z(),p!==null&&x(pc),p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 24:return Qe(Ar),null;case 25:return null;default:return null}}function g_(p,g){switch(me(g),g.tag){case 3:Qe(Ar),ve();break;case 26:case 27:case 5:Ye(g);break;case 4:ve();break;case 31:g.memoizedState!==null&&at(g);break;case 13:at(g);break;case 19:x(Vr);break;case 10:Qe(g.type);break;case 22:case 23:at(g),Z(),p!==null&&x(pc);break;case 24:Qe(Ar)}}function yo(p,g){try{var S=g.updateQueue,M=S!==null?S.lastEffect:null;if(M!==null){var U=M.next;S=U;do{if((S.tag&p)===p){M=void 0;var B=S.create,Y=S.inst;M=B(),Y.destroy=M}S=S.next}while(S!==U)}}catch(le){Yt(g,g.return,le)}}function xo(p,g,S){try{var M=g.updateQueue,U=M!==null?M.lastEffect:null;if(U!==null){var B=U.next;M=B;do{if((M.tag&p)===p){var Y=M.inst,le=Y.destroy;if(le!==void 0){Y.destroy=void 0,U=g;var Pe=S,Ke=le;try{Ke()}catch(ut){Yt(U,Pe,ut)}}}M=M.next}while(M!==B)}}catch(ut){Yt(g,g.return,ut)}}function md(p){var g=p.updateQueue;if(g!==null){var S=p.stateNode;try{ol(g,S)}catch(M){Yt(p,p.return,M)}}}function Gp(p,g,S){S.props=Jc(p.type,p.memoizedProps),S.state=p.memoizedState;try{S.componentWillUnmount()}catch(M){Yt(p,g,M)}}function gd(p,g){try{var S=p.ref;if(S!==null){switch(p.tag){case 26:case 27:case 5:var M=kd(p.stateNode);break;case 30:M=p.stateNode;break;default:M=p.stateNode}typeof S=="function"?p.refCleanup=S(M):S.current=M}}catch(U){Yt(p,g,U)}}function Xi(p,g){var S=p.ref,M=p.refCleanup;if(S!==null)if(typeof M=="function")try{M()}catch(U){Yt(p,g,U)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof S=="function")try{S(null)}catch(U){Yt(p,g,U)}else S.current=null}function tu(p){var g=p.type,S=p.memoizedProps,M=p.stateNode;try{C_(M,g,S,p)}catch(U){Yt(p,p.return,U)}}function Hf(p,g,S){try{R_(p.stateNode,p.type,S,g,p)}catch(M){Yt(p,p.return,M)}}function o0(p){return p.tag===5||p.tag===3||(As?p.tag===26:!1)||(mi?p.tag===27&&fu(p.type):!1)||p.tag===4}function cl(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||o0(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(mi&&p.tag===27&&fu(p.type)||p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function qp(p,g,S){var M=p.tag;if(M===5||M===6)p=p.stateNode,g?P_(S,p,g):k0(S,p);else if(M!==4&&(mi&&M===27&&fu(p.type)&&(S=p.stateNode,g=null),p=p.child,p!==null))for(qp(p,g,S),p=p.sibling;p!==null;)qp(p,g,S),p=p.sibling}function Gf(p,g,S){var M=p.tag;if(M===5||M===6)p=p.stateNode,g?I_(S,p,g):A0(S,p);else if(M!==4&&(mi&&M===27&&fu(p.type)&&(S=p.stateNode),p=p.child,p!==null))for(Gf(p,g,S),p=p.sibling;p!==null;)Gf(p,g,S),p=p.sibling}function l0(p,g,S){p=p.containerInfo;try{P0(p,S)}catch(M){Yt(g,g.return,M)}}function v_(p){var g=p.stateNode,S=p.memoizedProps;try{ai(p.type,S,g,p)}catch(M){Yt(p,p.return,M)}}function ZA(p,g){for(om(p.containerInfo),Xr=g;Xr!==null;)if(p=Xr,g=p.child,(p.subtreeFlags&1028)!==0&&g!==null)g.return=p,Xr=g;else for(;Xr!==null;){p=Xr;var S=p.alternate;switch(g=p.flags,p.tag){case 0:if((g&4)!==0&&(g=p.updateQueue,g=g!==null?g.events:null,g!==null))for(var M=0;M<g.length;M++){var U=g[M];U.ref.impl=U.nextImpl}break;case 11:case 15:break;case 1:if((g&1024)!==0&&S!==null){g=void 0,M=p,U=S.memoizedProps,S=S.memoizedState;var B=M.stateNode;try{var Y=Jc(M.type,U);g=B.getSnapshotBeforeUpdate(Y,S),B.__reactInternalSnapshotBeforeUpdate=g}catch(le){Yt(M,M.return,le)}}break;case 3:(g&1024)!==0&&In&&C0(p.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((g&1024)!==0)throw Error(i(163))}if(g=p.sibling,g!==null){g.return=p.return,Xr=g;break}Xr=p.return}}function y_(p,g,S){var M=S.flags;switch(S.tag){case 0:case 11:case 15:ua(p,S),M&4&&yo(5,S);break;case 1:if(ua(p,S),M&4)if(p=S.stateNode,g===null)try{p.componentDidMount()}catch(Y){Yt(S,S.return,Y)}else{var U=Jc(S.type,g.memoizedProps);g=g.memoizedState;try{p.componentDidUpdate(U,g,p.__reactInternalSnapshotBeforeUpdate)}catch(Y){Yt(S,S.return,Y)}}M&64&&md(S),M&512&&gd(S,S.return);break;case 3:if(ua(p,S),M&64&&(M=S.updateQueue,M!==null)){if(p=null,S.child!==null)switch(S.child.tag){case 27:case 5:p=kd(S.child.stateNode);break;case 1:p=S.child.stateNode}try{ol(M,p)}catch(Y){Yt(S,S.return,Y)}}break;case 27:mi&&g===null&&M&4&&v_(S);case 26:case 5:if(ua(p,S),g===null){if(M&4)tu(S);else if(M&64){p=S.type,g=S.memoizedProps,U=S.stateNode;try{ew(U,p,g,S)}catch(Y){Yt(S,S.return,Y)}}}M&512&&gd(S,S.return);break;case 12:ua(p,S);break;case 31:ua(p,S),M&4&&bs(p,S);break;case 13:ua(p,S),M&4&&$f(p,S),M&64&&(M=S.memoizedState,M!==null&&(M=M.dehydrated,M!==null&&(S=QA.bind(null,S),pm(M,S))));break;case 22:if(M=S.memoizedState!==null||Hr,!M){g=g!==null&&g.memoizedState!==null||Gr,U=Hr;var B=Gr;Hr=M,(Gr=g)&&!B?ws(p,S,(S.subtreeFlags&8772)!==0):ua(p,S),Hr=U,Gr=B}break;case 30:break;default:ua(p,S)}}function c0(p){var g=p.alternate;g!==null&&(p.alternate=null,c0(g)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(g=p.stateNode,g!==null&&lm(g)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function xs(p,g,S){for(S=S.child;S!==null;)qf(p,g,S),S=S.sibling}function qf(p,g,S){if(Ra&&typeof Ra.onCommitFiberUnmount=="function")try{Ra.onCommitFiberUnmount(mu,S)}catch{}switch(S.tag){case 26:if(As){Gr||Xi(S,g),xs(p,g,S),S.memoizedState?fc(S.memoizedState):S.stateNode&&q0(S.stateNode);break}case 27:if(mi){Gr||Xi(S,g);var M=Dr,U=Yr;fu(S.type)&&(Dr=S.stateNode,Yr=!1),xs(p,g,S),Ti(S.stateNode),Dr=M,Yr=U;break}case 5:Gr||Xi(S,g);case 6:if(In){if(M=Dr,U=Yr,Dr=null,xs(p,g,S),Dr=M,Yr=U,Dr!==null)if(Yr)try{M0(Dr,S.stateNode)}catch(B){Yt(S,g,B)}else try{O_(Dr,S.stateNode)}catch(B){Yt(S,g,B)}}else xs(p,g,S);break;case 18:In&&Dr!==null&&(Yr?mm(Dr,S.stateNode):B0(Dr,S.stateNode));break;case 4:In?(M=Dr,U=Yr,Dr=S.stateNode.containerInfo,Yr=!0,xs(p,g,S),Dr=M,Yr=U):(es&&l0(S.stateNode,S,R0()),xs(p,g,S));break;case 0:case 11:case 14:case 15:xo(2,S,g),Gr||xo(4,S,g),xs(p,g,S);break;case 1:Gr||(Xi(S,g),M=S.stateNode,typeof M.componentWillUnmount=="function"&&Gp(S,g,M)),xs(p,g,S);break;case 21:xs(p,g,S);break;case 22:Gr=(M=Gr)||S.memoizedState!==null,xs(p,g,S),Gr=M;break;default:xs(p,g,S)}}function bs(p,g){if(Tr&&g.memoizedState===null&&(p=g.alternate,p!==null&&(p=p.memoizedState,p!==null))){p=p.dehydrated;try{rk(p)}catch(S){Yt(g,g.return,S)}}}function $f(p,g){if(Tr&&g.memoizedState===null&&(p=g.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{ik(p)}catch(S){Yt(g,g.return,S)}}function _s(p){switch(p.tag){case 31:case 13:case 19:var g=p.stateNode;return g===null&&(g=p.stateNode=new ty),g;case 22:return p=p.stateNode,g=p._retryCache,g===null&&(g=p._retryCache=new ty),g;default:throw Error(i(435,p.tag))}}function ul(p,g){var S=_s(p);g.forEach(function(M){if(!S.has(M)){S.add(M);var U=ek.bind(null,p,M);M.then(U,U)}})}function wi(p,g){var S=g.deletions;if(S!==null)for(var M=0;M<S.length;M++){var U=S[M],B=p,Y=g;if(In){var le=Y;e:for(;le!==null;){switch(le.tag){case 27:if(mi){if(fu(le.type)){Dr=le.stateNode,Yr=!1;break e}break}case 5:Dr=le.stateNode,Yr=!1;break e;case 3:case 4:Dr=le.stateNode.containerInfo,Yr=!0;break e}le=le.return}if(Dr===null)throw Error(i(160));qf(B,Y,U),Dr=null,Yr=!1}else qf(B,Y,U);B=U.alternate,B!==null&&(B.return=null),U.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)Wf(g,p),g=g.sibling}function Wf(p,g){var S=p.alternate,M=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:wi(g,p),Si(p),M&4&&(xo(3,p,p.return),yo(3,p),xo(5,p,p.return));break;case 1:wi(g,p),Si(p),M&512&&(Gr||S===null||Xi(S,S.return)),M&64&&Hr&&(p=p.updateQueue,p!==null&&(M=p.callbacks,M!==null&&(S=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=S===null?M:S.concat(M))));break;case 26:if(As){var U=er;if(wi(g,p),Si(p),M&512&&(Gr||S===null||Xi(S,S.return)),M&4){M=S!==null?S.memoizedState:null;var B=p.memoizedState;S===null?B===null?p.stateNode===null?p.stateNode=sw(U,p.type,p.memoizedProps,p):G0(U,p.type,p.stateNode):p.stateNode=H0(U,B,p.memoizedProps):M!==B?(M===null?S.stateNode!==null&&q0(S.stateNode):fc(M),B===null?G0(U,p.type,p.stateNode):H0(U,B,p.memoizedProps)):B===null&&p.stateNode!==null&&Hf(p,p.memoizedProps,S.memoizedProps)}break}case 27:if(mi){wi(g,p),Si(p),M&512&&(Gr||S===null||Xi(S,S.return)),S!==null&&M&4&&Hf(p,p.memoizedProps,S.memoizedProps);break}case 5:if(wi(g,p),Si(p),M&512&&(Gr||S===null||Xi(S,S.return)),In){if(p.flags&32){U=p.stateNode;try{N0(U)}catch(tt){Yt(p,p.return,tt)}}M&4&&p.stateNode!=null&&(U=p.memoizedProps,Hf(p,U,S!==null?S.memoizedProps:U)),M&1024&&(Od=!0)}else es&&p.alternate!==null&&(p.alternate.stateNode=p.stateNode);break;case 6:if(wi(g,p),Si(p),M&4&&In){if(p.stateNode===null)throw Error(i(162));M=p.memoizedProps,S=S!==null?S.memoizedProps:M,U=p.stateNode;try{N_(U,S,M)}catch(tt){Yt(p,p.return,tt)}}break;case 3:if(As?(ow(),U=er,er=ah(g.containerInfo),wi(g,p),er=U):wi(g,p),Si(p),M&4){if(In&&Tr&&S!==null&&S.memoizedState.isDehydrated)try{tw(g.containerInfo)}catch(tt){Yt(p,p.return,tt)}if(es){M=g.containerInfo,S=g.pendingChildren;try{P0(M,S)}catch(tt){Yt(p,p.return,tt)}}}Od&&(Od=!1,$p(p));break;case 4:As?(S=er,er=ah(p.stateNode.containerInfo),wi(g,p),Si(p),er=S):(wi(g,p),Si(p)),M&4&&es&&l0(p.stateNode,p,p.stateNode.pendingChildren);break;case 12:wi(g,p),Si(p);break;case 31:wi(g,p),Si(p),M&4&&(M=p.updateQueue,M!==null&&(p.updateQueue=null,ul(p,M)));break;case 13:wi(g,p),Si(p),p.child.flags&8192&&p.memoizedState!==null!=(S!==null&&S.memoizedState!==null)&&(mh=Yi()),M&4&&(M=p.updateQueue,M!==null&&(p.updateQueue=null,ul(p,M)));break;case 22:U=p.memoizedState!==null;var Y=S!==null&&S.memoizedState!==null,le=Hr,Pe=Gr;if(Hr=le||U,Gr=Pe||Y,wi(g,p),Gr=Pe,Hr=le,Si(p),M&8192&&(g=p.stateNode,g._visibility=U?g._visibility&-2:g._visibility|1,U&&(S===null||Y||Hr||Gr||Ql(p)),In)){e:if(S=null,In)for(g=p;;){if(g.tag===5||As&&g.tag===26){if(S===null){Y=S=g;try{B=Y.stateNode,U?tk(B):D_(Y.stateNode,Y.memoizedProps)}catch(tt){Yt(Y,Y.return,tt)}}}else if(g.tag===6){if(S===null){Y=g;try{var Ke=Y.stateNode;U?j_(Ke):L_(Ke,Y.memoizedProps)}catch(tt){Yt(Y,Y.return,tt)}}}else if(g.tag===18){if(S===null){Y=g;try{var ut=Y.stateNode;U?rw(ut):iw(Y.stateNode)}catch(tt){Yt(Y,Y.return,tt)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===p)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break e;for(;g.sibling===null;){if(g.return===null||g.return===p)break e;S===g&&(S=null),g=g.return}S===g&&(S=null),g.sibling.return=g.return,g=g.sibling}}M&4&&(M=p.updateQueue,M!==null&&(S=M.retryQueue,S!==null&&(M.retryQueue=null,ul(p,S))));break;case 19:wi(g,p),Si(p),M&4&&(M=p.updateQueue,M!==null&&(p.updateQueue=null,ul(p,M)));break;case 30:break;case 21:break;default:wi(g,p),Si(p)}}function Si(p){var g=p.flags;if(g&2){try{for(var S,M=p.return;M!==null;){if(o0(M)){S=M;break}M=M.return}if(In){if(S==null)throw Error(i(160));switch(S.tag){case 27:if(mi){var U=S.stateNode,B=cl(p);Gf(p,B,U);break}case 5:var Y=S.stateNode;S.flags&32&&(N0(Y),S.flags&=-33);var le=cl(p);Gf(p,le,Y);break;case 3:case 4:var Pe=S.stateNode.containerInfo,Ke=cl(p);qp(p,Ke,Pe);break;default:throw Error(i(161))}}}catch(ut){Yt(p,p.return,ut)}p.flags&=-3}g&4096&&(p.flags&=-4097)}function $p(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var g=p;$p(g),g.tag===5&&g.flags&1024&&w0(g.stateNode),p=p.sibling}}function ua(p,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)y_(p,g.alternate,g),g=g.sibling}function Ql(p){for(p=p.child;p!==null;){var g=p;switch(g.tag){case 0:case 11:case 14:case 15:xo(4,g,g.return),Ql(g);break;case 1:Xi(g,g.return);var S=g.stateNode;typeof S.componentWillUnmount=="function"&&Gp(g,g.return,S),Ql(g);break;case 27:mi&&Ti(g.stateNode);case 26:case 5:Xi(g,g.return),Ql(g);break;case 22:g.memoizedState===null&&Ql(g);break;case 30:Ql(g);break;default:Ql(g)}p=p.sibling}}function ws(p,g,S){for(S=S&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var M=g.alternate,U=p,B=g,Y=B.flags;switch(B.tag){case 0:case 11:case 15:ws(U,B,S),yo(4,B);break;case 1:if(ws(U,B,S),M=B,U=M.stateNode,typeof U.componentDidMount=="function")try{U.componentDidMount()}catch(Ke){Yt(M,M.return,Ke)}if(M=B,U=M.updateQueue,U!==null){var le=M.stateNode;try{var Pe=U.shared.hiddenCallbacks;if(Pe!==null)for(U.shared.hiddenCallbacks=null,U=0;U<Pe.length;U++)sl(Pe[U],le)}catch(Ke){Yt(M,M.return,Ke)}}S&&Y&64&&md(B),gd(B,B.return);break;case 27:mi&&v_(B);case 26:case 5:ws(U,B,S),S&&M===null&&Y&4&&tu(B),gd(B,B.return);break;case 12:ws(U,B,S);break;case 31:ws(U,B,S),S&&Y&4&&bs(U,B);break;case 13:ws(U,B,S),S&&Y&4&&$f(U,B);break;case 22:B.memoizedState===null&&ws(U,B,S),gd(B,B.return);break;case 30:break;default:ws(U,B,S)}g=g.sibling}}function ec(p,g){var S=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(S=p.memoizedState.cachePool.pool),p=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(p=g.memoizedState.cachePool.pool),p!==S&&(p!=null&&p.refCount++,S!=null&&Ge(S))}function u0(p,g){p=null,g.alternate!==null&&(p=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==p&&(g.refCount++,p!=null&&Ge(p))}function Ir(p,g,S,M){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)Wp(p,g,S,M),g=g.sibling}function Wp(p,g,S,M){var U=g.flags;switch(g.tag){case 0:case 11:case 15:Ir(p,g,S,M),U&2048&&yo(9,g);break;case 1:Ir(p,g,S,M);break;case 3:Ir(p,g,S,M),U&2048&&(p=null,g.alternate!==null&&(p=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==p&&(g.refCount++,p!=null&&Ge(p)));break;case 12:if(U&2048){Ir(p,g,S,M),p=g.stateNode;try{var B=g.memoizedProps,Y=B.id,le=B.onPostCommit;typeof le=="function"&&le(Y,g.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(Pe){Yt(g,g.return,Pe)}}else Ir(p,g,S,M);break;case 31:Ir(p,g,S,M);break;case 13:Ir(p,g,S,M);break;case 23:break;case 22:B=g.stateNode,Y=g.alternate,g.memoizedState!==null?B._visibility&2?Ir(p,g,S,M):vd(p,g):B._visibility&2?Ir(p,g,S,M):(B._visibility|=2,Ea(p,g,S,M,(g.subtreeFlags&10256)!==0||!1)),U&2048&&ec(Y,g);break;case 24:Ir(p,g,S,M),U&2048&&u0(g.alternate,g);break;default:Ir(p,g,S,M)}}function Ea(p,g,S,M,U){for(U=U&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var B=p,Y=g,le=S,Pe=M,Ke=Y.flags;switch(Y.tag){case 0:case 11:case 15:Ea(B,Y,le,Pe,U),yo(8,Y);break;case 23:break;case 22:var ut=Y.stateNode;Y.memoizedState!==null?ut._visibility&2?Ea(B,Y,le,Pe,U):vd(B,Y):(ut._visibility|=2,Ea(B,Y,le,Pe,U)),U&&Ke&2048&&ec(Y.alternate,Y);break;case 24:Ea(B,Y,le,Pe,U),U&&Ke&2048&&u0(Y.alternate,Y);break;default:Ea(B,Y,le,Pe,U)}g=g.sibling}}function vd(p,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var S=p,M=g,U=M.flags;switch(M.tag){case 22:vd(S,M),U&2048&&ec(M.alternate,M);break;case 24:vd(S,M),U&2048&&u0(M.alternate,M);break;default:vd(S,M)}g=g.sibling}}function bo(p,g,S){if(p.subtreeFlags&is)for(p=p.child;p!==null;)tc(p,g,S),p=p.sibling}function tc(p,g,S){switch(p.tag){case 26:if(bo(p,g,S),p.flags&is)if(p.memoizedState!==null)lw(S,er,p.memoizedState,p.memoizedProps);else{var M=p.stateNode,U=p.type;p=p.memoizedProps,((g&335544128)===g||b0(U,p))&&cm(S,M,U,p)}break;case 5:bo(p,g,S),p.flags&is&&(M=p.stateNode,U=p.type,p=p.memoizedProps,((g&335544128)===g||b0(U,p))&&cm(S,M,U,p));break;case 3:case 4:As?(M=er,er=ah(p.stateNode.containerInfo),bo(p,g,S),er=M):bo(p,g,S);break;case 22:p.memoizedState===null&&(M=p.alternate,M!==null&&M.memoizedState!==null?(M=is,is=16777216,bo(p,g,S),is=M):bo(p,g,S));break;default:bo(p,g,S)}}function Kp(p){var g=p.alternate;if(g!==null&&(p=g.child,p!==null)){g.child=null;do g=p.sibling,p.sibling=null,p=g;while(p!==null)}}function yd(p){var g=p.deletions;if((p.flags&16)!==0){if(g!==null)for(var S=0;S<g.length;S++){var M=g[S];Xr=M,Ja(M,p)}Kp(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)Xp(p),p=p.sibling}function Xp(p){switch(p.tag){case 0:case 11:case 15:yd(p),p.flags&2048&&xo(9,p,p.return);break;case 3:yd(p);break;case 12:yd(p);break;case 22:var g=p.stateNode;p.memoizedState!==null&&g._visibility&2&&(p.return===null||p.return.tag!==13)?(g._visibility&=-3,Kf(p)):yd(p);break;default:yd(p)}}function Kf(p){var g=p.deletions;if((p.flags&16)!==0){if(g!==null)for(var S=0;S<g.length;S++){var M=g[S];Xr=M,Ja(M,p)}Kp(p)}for(p=p.child;p!==null;){switch(g=p,g.tag){case 0:case 11:case 15:xo(8,g,g.return),Kf(g);break;case 22:S=g.stateNode,S._visibility&2&&(S._visibility&=-3,Kf(g));break;default:Kf(g)}p=p.sibling}}function Ja(p,g){for(;Xr!==null;){var S=Xr;switch(S.tag){case 0:case 11:case 15:xo(8,S,g);break;case 23:case 22:if(S.memoizedState!==null&&S.memoizedState.cachePool!==null){var M=S.memoizedState.cachePool.pool;M!=null&&M.refCount++}break;case 24:Ge(S.memoizedState.cache)}if(M=S.child,M!==null)M.return=S,Xr=M;else e:for(S=p;Xr!==null;){M=Xr;var U=M.sibling,B=M.return;if(c0(M),M===S){Xr=null;break e}if(U!==null){U.return=B,Xr=U;break e}Xr=B}}}function nc(p){var g=un(p);if(g!=null){if(typeof g.memoizedProps["data-testname"]!="string")throw Error(i(364));return g}if(p=Wr(p),p===null)throw Error(i(362));return p.stateNode.current}function rc(p,g){var S=p.tag;switch(g.$$typeof){case Os:if(p.type===g.value)return!0;break;case Dd:e:{for(g=g.value,p=[p,0],S=0;S<p.length;){var M=p[S++],U=M.tag,B=p[S++],Y=g[B];if(U!==5&&U!==26&&U!==27||!uc(M)){for(;Y!=null&&rc(M,Y);)B++,Y=g[B];if(B===g.length){g=!0;break e}else for(M=M.child;M!==null;)p.push(M,B),M=M.sibling}}g=!1}return g;case Ld:if((S===5||S===26||S===27)&&E0(p.stateNode,g.value))return!0;break;case yc:if((S===5||S===6||S===26||S===27)&&(p=rh(p),p!==null&&0<=p.indexOf(g.value)))return!0;break;case hh:if((S===5||S===26||S===27)&&(p=p.memoizedProps["data-testname"],typeof p=="string"&&p.toLowerCase()===g.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function xd(p){switch(p.$$typeof){case Os:return"<"+(m(p.value)||"Unknown")+">";case Dd:return":has("+(xd(p)||"")+")";case Ld:return'[role="'+p.value+'"]';case yc:return'"'+p.value+'"';case hh:return'[data-testname="'+p.value+'"]';default:throw Error(i(365))}}function bd(p,g){var S=[];p=[p,0];for(var M=0;M<p.length;){var U=p[M++],B=U.tag,Y=p[M++],le=g[Y];if(B!==5&&B!==26&&B!==27||!uc(U)){for(;le!=null&&rc(U,le);)Y++,le=g[Y];if(Y===g.length)S.push(U);else for(U=U.child;U!==null;)p.push(U,Y),U=U.sibling}}return S}function Aa(p,g){if(!pi)throw Error(i(363));p=nc(p),p=bd(p,g),g=[],p=Array.from(p);for(var S=0;S<p.length;){var M=p[S++],U=M.tag;if(U===5||U===26||U===27)uc(M)||g.push(M.stateNode);else for(M=M.child;M!==null;)p.push(M),M=M.sibling}return g}function Sr(){return(An&2)!==0&&Cn!==0?Cn&-Cn:Ht.T!==null?ht():Nd()}function dl(){if(ga===0)if((Cn&536870912)===0||Nn){var p=pu;pu<<=1,(pu&3932160)===0&&(pu=262144),ga=p}else ga=536870912;return p=Ia.current,p!==null&&(p.flags|=32),ga}function Pr(p,g,S){(p===xn&&(tr===2||tr===9)||p.cancelPendingCommit!==null)&&(Fr(p,0),wo(p,Cn,ga,!1)),j(p,S),((An&2)===0||p!==xn)&&(p===xn&&((An&2)===0&&(_c|=S),Lr===4&&wo(p,Cn,ga,!1)),wt(p))}function Xs(p,g,S){if((An&6)!==0)throw Error(i(327));var M=!S&&(g&127)===0&&(g&p.expiredLanes)===0||N(p,g),U=M?__(p,g):So(p,g,!0),B=M;do{if(U===0){xc&&!M&&wo(p,g,0,!1);break}else{if(S=p.current.alternate,B&&!x_(S)){U=So(p,g,!1),B=!1;continue}if(U===2){if(B=g,p.errorRecoveryDisabledLanes&B)var Y=0;else Y=p.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){g=Y;e:{var le=p;U=ph;var Pe=Tr&&le.current.memoizedState.isDehydrated;if(Pe&&(Fr(le,Y).flags|=256),Y=So(le,Y,!1),Y!==2){if(bc&&!Pe){le.errorRecoveryDisabledLanes|=B,_c|=B,U=4;break e}B=Oa,Oa=U,B!==null&&(Oa===null?Oa=B:Oa.push.apply(Oa,B))}U=Y}if(B=!1,U!==2)continue}}if(U===1){Fr(p,0),wo(p,g,0,!0);break}e:{switch(M=p,B=U,B){case 0:case 1:throw Error(i(345));case 4:if((g&4194048)!==g)break;case 6:wo(M,g,ga,!Qs);break e;case 2:Oa=null;break;case 3:case 5:break;default:throw Error(i(329))}if((g&62914560)===g&&(U=mh+300-Yi(),10<U)){if(wo(M,g,ga,!Qs),E(M,0,!0)!==0)break e;Lo=g,M.timeoutHandle=x0(_o.bind(null,M,S,Oa,gh,Rm,g,ga,_c,zd,Qs,B,"Throttled",-0,0),U);break e}_o(M,S,Oa,gh,Rm,g,ga,_c,zd,Qs,B,null,-0,0)}}break}while(!0);wt(p)}function _o(p,g,S,M,U,B,Y,le,Pe,Ke,ut,tt,Et,ln){if(p.timeoutHandle=Na,tt=g.subtreeFlags,tt&8192||(tt&16785408)===16785408){tt=_0(),tc(g,B,tt);var Jr=(B&62914560)===B?mh-Yi():(B&4194048)===B?_u-Yi():0;if(Jr=M_(tt,Jr),Jr!==null){Lo=B,p.cancelPendingCommit=Jr(Eo.bind(null,p,g,B,S,M,U,Y,le,Pe,ut,tt,null,Et,ln)),wo(p,B,Y,!Ke);return}}Eo(p,g,B,S,M,U,Y,le,Pe)}function x_(p){for(var g=p;;){var S=g.tag;if((S===0||S===11||S===15)&&g.flags&16384&&(S=g.updateQueue,S!==null&&(S=S.stores,S!==null)))for(var M=0;M<S.length;M++){var U=S[M],B=U.getSnapshot;U=U.value;try{if(!Kr(B(),U))return!1}catch{return!1}}if(S=g.child,g.subtreeFlags&16384&&S!==null)S.return=g,g=S;else{if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function wo(p,g,S,M){g&=~Ud,g&=~_c,p.suspendedLanes|=g,p.pingedLanes&=~g,M&&(p.warmLanes|=g),M=p.expirationTimes;for(var U=g;0<U;){var B=31-Ca(U),Y=1<<B;M[B]=-1,U&=~Y}S!==0&&F(p,S,g)}function Yp(){return(An&6)===0?(ot(0),!1):!0}function Jp(){if(kn!==null){if(tr===0)var p=kn.return;else p=kn,Js=fr=null,nr(p),mc=null,gu=0,p=kn;for(;p!==null;)g_(p.alternate,p),p=p.return;kn=null}}function Fr(p,g){var S=p.timeoutHandle;S!==Na&&(p.timeoutHandle=Na,k_(S)),S=p.cancelPendingCommit,S!==null&&(p.cancelPendingCommit=null,S()),Lo=0,Jp(),xn=p,kn=S=Qa(p.current,null),Cn=g,tr=0,si=null,Qs=!1,xc=N(p,g),bc=!1,zd=ga=Ud=_c=Sl=Lr=0,Oa=ph=null,Rm=!1,(g&8)!==0&&(g|=g&32);var M=p.entangledLanes;if(M!==0)for(p=p.entanglements,M&=g;0<M;){var U=31-Ca(M),B=1<<U;g|=p[U],M&=~B}return Do=g,Wl(),S}function dr(p,g){dn=null,Ht.H=rs,g===yi||g===Is?(g=Ln(),tr=3):g===Nm?(g=Ln(),tr=4):tr=g===ma?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,si=g,kn===null&&(Lr=1,Bp(p,ce(g,p.current)))}function Rn(){var p=Ia.current;return p===null?!0:(Cn&4194048)===Cn?Pa===null:(Cn&62914560)===Cn||(Cn&536870912)!==0?p===Pa:!1}function fl(){var p=Ht.H;return Ht.H=rs,p===null?rs:p}function Za(){var p=Ht.A;return Ht.A=jd,p}function _d(){Lr=4,Qs||(Cn&4194048)!==Cn&&Ia.current!==null||(xc=!0),(Sl&134217727)===0&&(_c&134217727)===0||xn===null||wo(xn,Cn,ga,!1)}function So(p,g,S){var M=An;An|=2;var U=fl(),B=Za();(xn!==p||Cn!==g)&&(gh=null,Fr(p,g)),g=!1;var Y=Lr;e:do try{if(tr!==0&&kn!==null){var le=kn,Pe=si;switch(tr){case 8:Jp(),Y=6;break e;case 3:case 2:case 9:case 6:Ia.current===null&&(g=!0);var Ke=tr;if(tr=0,si=null,To(p,le,Pe,Ke),S&&xc){Y=0;break e}break;default:Ke=tr,tr=0,si=null,To(p,le,Pe,Ke)}}b_(),Y=Lr;break}catch(ut){dr(p,ut)}while(!0);return g&&p.shellSuspendCounter++,Js=fr=null,An=M,Ht.H=U,Ht.A=B,kn===null&&(xn=null,Cn=0,Wl()),Y}function b_(){for(;kn!==null;)ic(kn)}function __(p,g){var S=An;An|=2;var M=fl(),U=Za();xn!==p||Cn!==g?(gh=null,wc=Yi()+500,Fr(p,g)):xc=N(p,g);e:do try{if(tr!==0&&kn!==null){g=kn;var B=si;t:switch(tr){case 1:tr=0,si=null,To(p,g,B,1);break;case 2:case 9:if(ct(B)){tr=0,si=null,Zp(g);break}g=function(){tr!==2&&tr!==9||xn!==p||(tr=7),wt(p)},B.then(g,g);break e;case 3:tr=7;break e;case 4:tr=5;break e;case 7:ct(B)?(tr=0,si=null,Zp(g)):(tr=0,si=null,To(p,g,B,7));break;case 5:var Y=null;switch(kn.tag){case 26:Y=kn.memoizedState;case 5:case 27:var le=kn,Pe=le.type,Ke=le.pendingProps;if(Y?W0(Y):Or(le.stateNode,Pe,Ke)){tr=0,si=null;var ut=le.sibling;if(ut!==null)kn=ut;else{var tt=le.return;tt!==null?(kn=tt,Sd(tt)):kn=null}break t}}tr=0,si=null,To(p,g,B,5);break;case 6:tr=0,si=null,To(p,g,B,6);break;case 8:Jp(),Lr=6;break e;default:throw Error(i(462))}}wd();break}catch(Et){dr(p,Et)}while(!0);return Js=fr=null,Ht.H=M,Ht.A=U,An=S,kn!==null?0:(xn=null,Cn=0,Wl(),Lr)}function wd(){for(;kn!==null&&!uw();)ic(kn)}function ic(p){var g=r0(p.alternate,p,Do);p.memoizedProps=p.pendingProps,g===null?Sd(p):kn=g}function Zp(p){var g=p,S=g.alternate;switch(g.tag){case 15:case 0:g=Jv(S,g,g.pendingProps,g.type,void 0,Cn);break;case 11:g=Jv(S,g,g.pendingProps,g.type.render,g.ref,Cn);break;case 5:nr(g);default:g_(S,g),g=kn=tm(g,Do),g=r0(S,g,Do)}p.memoizedProps=p.pendingProps,g===null?Sd(p):kn=g}function To(p,g,S,M){Js=fr=null,nr(g),mc=null,gu=0;var U=g.return;try{if(JA(p,U,g,S,Cn)){Lr=1,Bp(p,ce(S,p.current)),kn=null;return}}catch(B){if(U!==null)throw kn=U,B;Lr=1,Bp(p,ce(S,p.current)),kn=null;return}g.flags&32768?(Nn||M===1?p=!0:xc||(Cn&536870912)!==0?p=!1:(Qs=p=!0,(M===2||M===9||M===3||M===6)&&(M=Ia.current,M!==null&&M.tag===13&&(M.flags|=16384))),ac(g,p)):Sd(g)}function Sd(p){var g=p;do{if((g.flags&32768)!==0){ac(g,Qs);return}p=g.return;var S=m_(g.alternate,g,Do);if(S!==null){kn=S;return}if(g=g.sibling,g!==null){kn=g;return}kn=g=p}while(g!==null);Lr===0&&(Lr=5)}function ac(p,g){do{var S=s0(p.alternate,p);if(S!==null){S.flags&=32767,kn=S;return}if(S=p.return,S!==null&&(S.flags|=32768,S.subtreeFlags=0,S.deletions=null),!g&&(p=p.sibling,p!==null)){kn=p;return}kn=p=S}while(p!==null);Lr=6,kn=null}function Eo(p,g,S,M,U,B,Y,le,Pe){p.cancelPendingCommit=null;do ko();while(oi!==0);if((An&6)!==0)throw Error(i(327));if(g!==null){if(g===p.current)throw Error(i(177));if(B=g.lanes|g.childLanes,B|=vu,O(p,S,B,Y,le,Pe),p===xn&&(kn=xn=null,Cn=0),wu=g,El=p,Lo=S,Bd=B,Im=U,ny=M,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(p.callbackNode=null,p.callbackPriority=0,ii(oh,function(){return Xf(),null})):(p.callbackNode=null,p.callbackPriority=0),M=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||M){M=Ht.T,Ht.T=null,U=Es(),Mn(2),Y=An,An|=4;try{ZA(p,g,S)}finally{An=Y,Mn(U),Ht.T=M}}oi=1,hl(),Ao(),Qp()}}function hl(){if(oi===1){oi=0;var p=El,g=wu,S=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||S){S=Ht.T,Ht.T=null;var M=Es();Mn(2);var U=An;An|=4;try{Wf(g,p),A_(p.containerInfo)}finally{An=U,Mn(M),Ht.T=S}}p.current=g,oi=2}}function Ao(){if(oi===2){oi=0;var p=El,g=wu,S=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||S){S=Ht.T,Ht.T=null;var M=Es();Mn(2);var U=An;An|=4;try{y_(p,g.alternate,g)}finally{An=U,Mn(M),Ht.T=S}}oi=3}}function Qp(){if(oi===4||oi===3){oi=0,X0();var p=El,g=wu,S=Lo,M=ny;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?oi=5:(oi=0,wu=El=null,em(p,p.pendingLanes));var U=p.pendingLanes;if(U===0&&(Tl=null),G(S),g=g.stateNode,Ra&&typeof Ra.onCommitFiberRoot=="function")try{Ra.onCommitFiberRoot(mu,g,void 0,(g.current.flags&128)===128)}catch{}if(M!==null){g=Ht.T,U=Es(),Mn(2),Ht.T=null;try{for(var B=p.onRecoverableError,Y=0;Y<M.length;Y++){var le=M[Y];B(le.value,{componentStack:le.stack})}}finally{Ht.T=g,Mn(U)}}(Lo&3)!==0&&ko(),wt(p),U=p.pendingLanes,(S&261930)!==0&&(U&42)!==0?p===vh?Hn++:(Hn=0,vh=p):Hn=0,Tr&&ih(),ot(0)}}function em(p,g){(p.pooledCacheLanes&=g)===0&&(g=p.pooledCache,g!=null&&(p.pooledCache=null,Ge(g)))}function ko(){return hl(),Ao(),Qp(),Xf()}function Xf(){if(oi!==5)return!1;var p=El,g=Bd;Bd=0;var S=G(Lo),M=32>S?32:S;S=Ht.T;var U=Es();try{Mn(M),Ht.T=null,M=Im,Im=null;var B=El,Y=Lo;if(oi=0,wu=El=null,Lo=0,(An&6)!==0)throw Error(i(331));var le=An;if(An|=4,Xp(B.current),Wp(B,B.current,Y,M),An=le,ot(0,!1),Ra&&typeof Ra.onPostCommitFiberRoot=="function")try{Ra.onPostCommitFiberRoot(mu,B)}catch{}return!0}finally{Mn(U),Ht.T=S,em(p,g)}}function sc(p,g,S){g=ce(S,g),g=Xv(p.stateNode,g,2),p=Xa(p,g,2),p!==null&&(j(p,2),wt(p))}function Yt(p,g,S){if(p.tag===3)sc(p,p,S);else for(;g!==null;){if(g.tag===3){sc(g,p,S);break}else if(g.tag===1){var M=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(Tl===null||!Tl.has(M))){p=ce(S,p),S=r_(2),M=Xa(g,S,2),M!==null&&(i_(S,M,g,p),j(M,2),wt(M));break}}g=g.return}}function Td(p,g,S){var M=p.pingCache;if(M===null){M=p.pingCache=new as;var U=new Set;M.set(g,U)}else U=M.get(g),U===void 0&&(U=new Set,M.set(g,U));U.has(S)||(bc=!0,U.add(S),p=w_.bind(null,p,g,S),g.then(p,p))}function w_(p,g,S){var M=p.pingCache;M!==null&&M.delete(g),p.pingedLanes|=p.suspendedLanes&S,p.warmLanes&=~S,xn===p&&(Cn&S)===S&&(Lr===4||Lr===3&&(Cn&62914560)===Cn&&300>Yi()-mh?(An&2)===0&&Fr(p,0):Ud|=S,zd===Cn&&(zd=0)),wt(p)}function S_(p,g){g===0&&(g=P()),p=Ki(p,g),p!==null&&(j(p,g),wt(p))}function QA(p){var g=p.memoizedState,S=0;g!==null&&(S=g.retryLane),S_(p,S)}function ek(p,g){var S=0;switch(p.tag){case 31:case 13:var M=p.stateNode,U=p.memoizedState;U!==null&&(S=U.retryLane);break;case 19:M=p.stateNode;break;case 22:M=p.stateNode._retryCache;break;default:throw Error(i(314))}M!==null&&M.delete(g),S_(p,S)}function ii(p,g){return sh(p,g)}function d0(p,g,S,M){this.tag=p,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nu(p){return p=p.prototype,!(!p||!p.isReactComponent)}function Qa(p,g){var S=p.alternate;return S===null?(S=n(p.tag,g,p.key,p.mode),S.elementType=p.elementType,S.type=p.type,S.stateNode=p.stateNode,S.alternate=p,p.alternate=S):(S.pendingProps=g,S.type=p.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=p.flags&65011712,S.childLanes=p.childLanes,S.lanes=p.lanes,S.child=p.child,S.memoizedProps=p.memoizedProps,S.memoizedState=p.memoizedState,S.updateQueue=p.updateQueue,g=p.dependencies,S.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},S.sibling=p.sibling,S.index=p.index,S.ref=p.ref,S.refCleanup=p.refCleanup,S}function tm(p,g){p.flags&=65011714;var S=p.alternate;return S===null?(p.childLanes=0,p.lanes=g,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=S.childLanes,p.lanes=S.lanes,p.child=S.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=S.memoizedProps,p.memoizedState=S.memoizedState,p.updateQueue=S.updateQueue,p.type=S.type,g=S.dependencies,p.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),p}function pl(p,g,S,M,U,B){var Y=0;if(M=p,typeof p=="function")nu(p)&&(Y=1);else if(typeof p=="string")Y=As&&mi?gm(p,S,Ei.current)?26:K0(p)?27:5:As?gm(p,S,Ei.current)?26:5:mi&&K0(p)?27:5;else e:switch(p){case Qf:return p=n(31,S,g,U),p.elementType=Qf,p.lanes=B,p;case su:return Ss(S.children,U,B,g);case ou:Y=8,U|=24;break;case lu:return p=n(12,S,g,U|2),p.elementType=lu,p.lanes=B,p;case am:return p=n(13,S,g,U),p.elementType=am,p.lanes=B,p;case ml:return p=n(19,S,g,U),p.elementType=ml,p.lanes=B,p;default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case Ts:Y=10;break e;case Zf:Y=9;break e;case Ed:Y=11;break e;case sm:Y=14;break e;case da:Y=16,M=null;break e}Y=29,S=Error(i(130,p===null?"null":typeof p,"")),M=null}return g=n(Y,S,g,U),g.elementType=p,g.type=M,g.lanes=B,g}function Ss(p,g,S,M){return p=n(7,p,M,g),p.lanes=S,p}function f0(p,g,S){return p=n(6,p,null,g),p.lanes=S,p}function h0(p){var g=n(18,null,null,0);return g.stateNode=p,g}function p0(p,g,S){return g=n(4,p.children!==null?p.children:[],p.key,g),g.lanes=S,g.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},g}function T_(p,g,S,M,U,B,Y,le,Pe){this.tag=1,this.containerInfo=p,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Na,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=I(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I(0),this.hiddenUpdates=I(null),this.identifierPrefix=M,this.onUncaughtError=U,this.onCaughtError=B,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Pe,this.incompleteTransitions=new Map}function oc(p,g,S,M,U,B,Y,le,Pe,Ke,ut,tt){return p=new T_(p,g,S,Y,Pe,Ke,ut,tt,le),g=1,B===!0&&(g|=24),B=n(3,null,null,g),p.current=B,B.stateNode=p,g=Oe(),g.refCount++,p.pooledCache=g,g.refCount++,B.memoizedState={element:M,isDehydrated:S,cache:g},fi(B),p}function nm(p){return p?(p=No,p):No}function Yf(p){var g=p._reactInternals;if(g===void 0)throw typeof p.render=="function"?Error(i(188)):(p=Object.keys(p).join(","),Error(i(268,p)));return p=o(g),p=p!==null?c(p):null,p===null?null:kd(p.stateNode)}function m0(p,g,S,M,U,B){U=nm(U),M.context===null?M.context=U:M.pendingContext=U,M=Ka(g),M.payload={element:S},B=B===void 0?null:B,B!==null&&(M.callback=B),S=Xa(p,M,g),S!==null&&(Pr(S,p,g),Kl(S,p,g))}function ru(p,g){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var S=p.retryLane;p.retryLane=S!==0&&S<g?S:g}}function Jf(p,g){ru(p,g),(p=p.alternate)&&ru(p,g)}var vn={},rm=ue,ka=zRe,im=Object.assign,iu=Symbol.for("react.element"),Mo=Symbol.for("react.transitional.element"),au=Symbol.for("react.portal"),su=Symbol.for("react.fragment"),ou=Symbol.for("react.strict_mode"),lu=Symbol.for("react.profiler"),Zf=Symbol.for("react.consumer"),Ts=Symbol.for("react.context"),Ed=Symbol.for("react.forward_ref"),am=Symbol.for("react.suspense"),ml=Symbol.for("react.suspense_list"),sm=Symbol.for("react.memo"),da=Symbol.for("react.lazy"),Qf=Symbol.for("react.activity"),g0=Symbol.for("react.memo_cache_sentinel"),gl=Symbol.iterator,lc=Symbol.for("react.client.reference"),cc=Array.isArray,Ht=rm.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,v0=e.rendererVersion,eh=e.rendererPackageName,Ad=e.extraDevToolsConfig,kd=e.getPublicInstance,E_=e.getRootHostContext,Md=e.getChildHostContext,om=e.prepareForCommit,A_=e.resetAfterCommit,y0=e.createInstance;e.cloneMutableInstance;var th=e.appendInitialChild,Ma=e.finalizeInitialChildren,fa=e.shouldSetTextContent,vl=e.createTextInstance;e.cloneMutableTextInstance;var x0=e.scheduleTimeout,k_=e.cancelTimeout,Na=e.noTimeout,$r=e.isPrimaryRenderer;e.warnsIfNotActing;var In=e.supportsMutation,es=e.supportsPersistence,Tr=e.supportsHydration,un=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var rr=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Mn=e.setCurrentUpdatePriority,Es=e.getCurrentUpdatePriority,Nd=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var cu=e.shouldAttemptEagerTransition,lm=e.detachDeletedInstance;e.requestPostPaintCallback;var nh=e.maySuspendCommit,Cd=e.maySuspendCommitOnUpdate,b0=e.maySuspendCommitInSyncRender,Or=e.preloadInstance,_0=e.startSuspendingCommit,cm=e.suspendInstance;e.suspendOnActiveViewTransition;var M_=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var uu=e.NotPendingTransition,du=e.HostTransitionContext,w0=e.resetFormInstance;e.bindToConsole;var S0=e.supportsMicrotasks,T0=e.scheduleMicrotask,pi=e.supportsTestSelectors,Wr=e.findFiberRoot,um=e.getBoundingRect,rh=e.getTextContent,uc=e.isHiddenSubtree,E0=e.matchAccessibilityRole,yl=e.setFocusIfFocusable,dm=e.setupIntersectionObserver,A0=e.appendChild,k0=e.appendChildToContainer,N_=e.commitTextUpdate,C_=e.commitMount,R_=e.commitUpdate,I_=e.insertBefore,P_=e.insertInContainerBefore,O_=e.removeChild,M0=e.removeChildFromContainer,N0=e.resetTextContent,tk=e.hideInstance,j_=e.hideTextInstance,D_=e.unhideInstance,L_=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var C0=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var U_=e.cloneInstance,R0=e.createContainerChildSet,I0=e.appendChildToContainerChildSet,z_=e.finalizeContainerChildren,P0=e.replaceContainerChildren,B_=e.cloneHiddenInstance,O0=e.cloneHiddenTextInstance,dc=e.isSuspenseInstancePending,fm=e.isSuspenseInstanceFallback,hm=e.getSuspenseInstanceFallbackErrorDetails,pm=e.registerSuspenseInstanceRetry,F_=e.canHydrateFormStateMarker,j0=e.isFormStateMarkerMatching,V_=e.getNextHydratableSibling,H_=e.getNextHydratableSiblingAfterSingleton,G_=e.getFirstHydratableChild,q_=e.getFirstHydratableChildWithinContainer,$_=e.getFirstHydratableChildWithinActivityInstance,W_=e.getFirstHydratableChildWithinSuspenseInstance,D0=e.getFirstHydratableChildWithinSingleton,K_=e.canHydrateInstance,X_=e.canHydrateTextInstance,L0=e.canHydrateActivityInstance,Y_=e.canHydrateSuspenseInstance,J_=e.hydrateInstance,nk=e.hydrateTextInstance,U0=e.hydrateActivityInstance,Z_=e.hydrateSuspenseInstance,Q_=e.getNextHydratableInstanceAfterActivityInstance,z0=e.getNextHydratableInstanceAfterSuspenseInstance,ew=e.commitHydratedInstance,tw=e.commitHydratedContainer,rk=e.commitHydratedActivityInstance,ik=e.commitHydratedSuspenseInstance,nw=e.finalizeHydratedChildren,ih=e.flushHydrationEvents;e.clearActivityBoundary;var B0=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var mm=e.clearSuspenseBoundaryFromContainer,rw=e.hideDehydratedBoundary,iw=e.unhideDehydratedBoundary,Rd=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var aw=e.validateHydratableInstance,F0=e.validateHydratableTextInstance,As=e.supportsResources,gm=e.isHostHoistableType,ah=e.getHoistableRoot,V0=e.getResource,H0=e.acquireResource,fc=e.releaseResource,sw=e.hydrateHoistable,G0=e.mountHoistable,q0=e.unmountHoistable,vm=e.createHoistableInstance,ow=e.prepareToCommitHoistables,$0=e.mayResourceSuspendCommit,W0=e.preloadResource,lw=e.suspendResource,mi=e.supportsSingletons,ym=e.resolveSingletonInstance,ai=e.acquireSingletonInstance,Ti=e.releaseSingletonInstance,K0=e.isHostSingletonType,fu=e.isSingletonScope,xm=[],hu=-1,No={},Ca=Math.clz32?Math.clz32:T,bm=Math.log,cw=Math.LN2,_m=256,pu=262144,Id=4194304,sh=ka.unstable_scheduleCallback,wm=ka.unstable_cancelCallback,uw=ka.unstable_shouldYield,X0=ka.unstable_requestPaint,Yi=ka.unstable_now,Sm=ka.unstable_ImmediatePriority,dw=ka.unstable_UserBlockingPriority,oh=ka.unstable_NormalPriority,Tm=ka.unstable_IdlePriority,Y0=ka.log,fw=ka.unstable_setDisableYieldValue,mu=null,Ra=null,Kr=typeof Object.is=="function"?Object.is:ee,Em=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)},ak=Object.prototype.hasOwnProperty,Am,Co,lh=!1,J0=new WeakMap,xl=[],Ro=0,ir=null,ch=0,ks=[],ts=0,Ms=null,ji=1,Ys="",Ei=v(null),bl=v(null),Di=v(null),uh=v(null),gi=null,Er=null,Nn=!1,Io=null,ha=!1,km=Error(i(519)),Ns=v(null),fr=null,Js=null,hw=typeof AbortController<"u"?AbortController:function(){var p=[],g=this.signal={aborted:!1,addEventListener:function(S,M){p.push(M)}};this.abort=function(){g.aborted=!0,p.forEach(function(S){return S()})}},Ai=ka.unstable_scheduleCallback,sk=ka.unstable_NormalPriority,Ar={$$typeof:Ts,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},dh=null,Qn=null,Ji=!1,Cs=!1,Mm=!1,hc=0,Pd=null,Z0=0,_l=0,vi=null,Rs=Ht.S;Ht.S=function(p,g){_u=Yi(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&pn(p,g),Rs!==null&&Rs(p,g)};var pc=v(null),yi=Error(i(460)),Nm=Error(i(474)),Is=Error(i(542)),Po={then:function(){}},pa=null,mc=null,gu=0,Li=qc(!0),Q0=qc(!1),Ui=[],Oo=0,vu=0,ns=!1,Cm=!1,yu=v(null),gc=v(0),Ia=v(null),Pa=null,Vr=v(0),wl=0,dn=null,Ut=null,nn=null,yn=!1,mn=!1,jn=!1,Zi=0,Ps=0,Zs=null,ey=0,rs={readContext:ne,use:ni,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useLayoutEffect:nt,useInsertionEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useSyncExternalStore:nt,useId:nt,useHostTransitionStatus:nt,useFormState:nt,useActionState:nt,useOptimistic:nt,useMemoCache:nt,useCacheRefresh:nt};rs.useEffectEvent=nt;var jr={readContext:ne,use:ni,useCallback:function(p,g){return sn().memoizedState=[p,g===void 0?null:g],p},useContext:ne,useEffect:jf,useImperativeHandle:function(p,g,S){S=S!=null?S.concat([p]):null,Yc(4194308,4,ld.bind(null,g,p),S)},useLayoutEffect:function(p,g){return Yc(4194308,4,p,g)},useInsertionEffect:function(p,g){Yc(4,2,p,g)},useMemo:function(p,g){var S=sn();g=g===void 0?null:g;var M=p();if(jn){$(!0);try{p()}finally{$(!1)}}return S.memoizedState=[M,g],M},useReducer:function(p,g,S){var M=sn();if(S!==void 0){var U=S(g);if(jn){$(!0);try{S(g)}finally{$(!1)}}}else U=g;return M.memoizedState=M.baseState=U,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:U},M.queue=p,p=p.dispatch=YA.bind(null,dn,p),[M.memoizedState,p]},useRef:function(p){var g=sn();return p={current:p},g.memoizedState=p},useState:function(p){p=Fv(p);var g=p.queue,S=Qb.bind(null,dn,g);return g.dispatch=S,[p.memoizedState,S]},useDebugValue:Lf,useDeferredValue:function(p,g){var S=sn();return ud(S,p,g)},useTransition:function(){var p=Fv(!1);return p=Yb.bind(null,dn,p.queue,!0,!1),sn().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,g,S){var M=dn,U=sn();if(Nn){if(S===void 0)throw Error(i(407));S=S()}else{if(S=g(),xn===null)throw Error(i(349));(Cn&127)!==0||bi(M,g,S)}U.memoizedState=S;var B={value:S,getSnapshot:g};return U.queue=B,jf(Kc.bind(null,M,B,p),[p]),M.flags|=2048,Ya(9,{destroy:void 0},_i.bind(null,M,B,S,g),null),S},useId:function(){var p=sn(),g=xn.identifierPrefix;if(Nn){var S=Ys,M=ji;S=(M&~(1<<32-Ca(M)-1)).toString(32)+S,g="_"+g+"R_"+S,S=Zi++,0<S&&(g+="H"+S.toString(32)),g+="_"}else S=ey++,g="_"+g+"r_"+S.toString(32)+"_";return p.memoizedState=g},useHostTransitionStatus:$v,useFormState:Hv,useActionState:Hv,useOptimistic:function(p){var g=sn();g.memoizedState=g.baseState=p;var S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=S,g=Lp.bind(null,dn,!0,S),S.dispatch=g,[p,g]},useMemoCache:Ks,useCacheRefresh:function(){return sn().memoizedState=XA.bind(null,dn)},useEffectEvent:function(p){var g=sn(),S={impl:p};return g.memoizedState=S,function(){if((An&2)!==0)throw Error(i(440));return S.impl.apply(void 0,arguments)}}},jo={readContext:ne,use:ni,useCallback:jp,useContext:ne,useEffect:od,useImperativeHandle:Xb,useInsertionEffect:Jl,useLayoutEffect:Df,useMemo:cd,useReducer:oa,useRef:Op,useState:function(){return oa(vr)},useDebugValue:Lf,useDeferredValue:function(p,g){var S=gt();return qv(S,Ut.memoizedState,p,g)},useTransition:function(){var p=oa(vr)[0],g=gt().memoizedState;return[typeof p=="boolean"?p:Kt(p),g]},useSyncExternalStore:ri,useId:Dp,useHostTransitionStatus:$v,useFormState:ad,useActionState:ad,useOptimistic:function(p,g){var S=gt();return Pf(S,Ut,p,g)},useMemoCache:Ks,useCacheRefresh:Zb};jo.useEffectEvent=la;var vc={readContext:ne,use:ni,useCallback:jp,useContext:ne,useEffect:od,useImperativeHandle:Xb,useInsertionEffect:Jl,useLayoutEffect:Df,useMemo:cd,useReducer:hi,useRef:Op,useState:function(){return hi(vr)},useDebugValue:Lf,useDeferredValue:function(p,g){var S=gt();return Ut===null?ud(S,p,g):qv(S,Ut.memoizedState,p,g)},useTransition:function(){var p=hi(vr)[0],g=gt().memoizedState;return[typeof p=="boolean"?p:Kt(p),g]},useSyncExternalStore:ri,useId:Dp,useHostTransitionStatus:$v,useFormState:sd,useActionState:sd,useOptimistic:function(p,g){var S=gt();return Ut!==null?Pf(S,Ut,p,g):(S.baseState=p,[p,S.queue.dispatch])},useMemoCache:Ks,useCacheRefresh:Zb};vc.useEffectEvent=la;var fh={enqueueSetState:function(p,g,S){p=p._reactInternals;var M=Sr(),U=Ka(M);U.payload=g,S!=null&&(U.callback=S),g=Xa(p,U,M),g!==null&&(Pr(g,p,M),Kl(g,p,M))},enqueueReplaceState:function(p,g,S){p=p._reactInternals;var M=Sr(),U=Ka(M);U.tag=1,U.payload=g,S!=null&&(U.callback=S),g=Xa(p,U,M),g!==null&&(Pr(g,p,M),Kl(g,p,M))},enqueueForceUpdate:function(p,g){p=p._reactInternals;var S=Sr(),M=Ka(S);M.tag=2,g!=null&&(M.callback=g),g=Xa(p,M,S),g!==null&&(Pr(g,p,S),Kl(g,p,S))}},ma=Error(i(461)),yr=!1,xu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},Hr=!1,Gr=!1,Od=!1,ty=typeof WeakSet=="function"?WeakSet:Set,Xr=null,Dr=null,Yr=!1,er=null,is=8192,jd={getCacheForType:function(p){var g=ne(Ar),S=g.data.get(p);return S===void 0&&(S=p(),g.data.set(p,S)),S},cacheSignal:function(){return ne(Ar).controller.signal}},Os=0,Dd=1,Ld=2,hh=3,yc=4;if(typeof Symbol=="function"&&Symbol.for){var bu=Symbol.for;Os=bu("selector.component"),Dd=bu("selector.has_pseudo_class"),Ld=bu("selector.role"),hh=bu("selector.test_id"),yc=bu("selector.text")}var as=typeof WeakMap=="function"?WeakMap:Map,An=0,xn=null,kn=null,Cn=0,tr=0,si=null,Qs=!1,xc=!1,bc=!1,Do=0,Lr=0,Sl=0,_c=0,Ud=0,ga=0,zd=0,ph=null,Oa=null,Rm=!1,mh=0,_u=0,wc=1/0,gh=null,Tl=null,oi=0,El=null,wu=null,Lo=0,Bd=0,Im=null,ny=null,Hn=0,vh=null;return vn.attemptContinuousHydration=function(p){if(p.tag===13||p.tag===31){var g=Ki(p,67108864);g!==null&&Pr(g,p,67108864),Jf(p,67108864)}},vn.attemptHydrationAtCurrentPriority=function(p){if(p.tag===13||p.tag===31){var g=Sr();g=V(g);var S=Ki(p,g);S!==null&&Pr(S,p,g),Jf(p,g)}},vn.attemptSynchronousHydration=function(p){switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var g=w(p.pendingLanes);if(g!==0){for(p.pendingLanes|=2,p.entangledLanes|=2;g;){var S=1<<31-Ca(g);p.entanglements[1]|=S,g&=~S}wt(p),(An&6)===0&&(wc=Yi()+500,ot(0))}}break;case 31:case 13:g=Ki(p,2),g!==null&&Pr(g,p,2),Yp(),Jf(p,2)}},vn.batchedUpdates=function(p,g){return p(g)},vn.createComponentSelector=function(p){return{$$typeof:Os,value:p}},vn.createContainer=function(p,g,S,M,U,B,Y,le,Pe,Ke){return oc(p,g,!1,null,S,M,B,null,Y,le,Pe,Ke)},vn.createHasPseudoClassSelector=function(p){return{$$typeof:Dd,value:p}},vn.createHydrationContainer=function(p,g,S,M,U,B,Y,le,Pe,Ke,ut,tt,Et,ln){var Jr;return p=oc(S,M,!0,p,U,B,le,ln,Pe,Ke,ut,tt),p.context=nm(null),S=p.current,M=Sr(),M=V(M),U=Ka(M),U.callback=(Jr=g)!=null?Jr:null,Xa(S,U,M),g=M,p.current.lanes=g,j(p,g),wt(p),p},vn.createPortal=function(p,g,S){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:au,key:M==null?null:""+M,children:p,containerInfo:g,implementation:S}},vn.createRoleSelector=function(p){return{$$typeof:Ld,value:p}},vn.createTestNameSelector=function(p){return{$$typeof:hh,value:p}},vn.createTextSelector=function(p){return{$$typeof:yc,value:p}},vn.defaultOnCaughtError=function(p){console.error(p)},vn.defaultOnRecoverableError=function(p){Em(p)},vn.defaultOnUncaughtError=function(p){Em(p)},vn.deferredUpdates=function(p){var g=Ht.T,S=Es();try{return Mn(32),Ht.T=null,p()}finally{Mn(S),Ht.T=g}},vn.discreteUpdates=function(p,g,S,M,U){var B=Ht.T,Y=Es();try{return Mn(2),Ht.T=null,p(g,S,M,U)}finally{Mn(Y),Ht.T=B,An===0&&(wc=Yi()+500)}},vn.findAllNodes=Aa,vn.findBoundingRects=function(p,g){if(!pi)throw Error(i(363));g=Aa(p,g),p=[];for(var S=0;S<g.length;S++)p.push(um(g[S]));for(g=p.length-1;0<g;g--){S=p[g];for(var M=S.x,U=M+S.width,B=S.y,Y=B+S.height,le=g-1;0<=le;le--)if(g!==le){var Pe=p[le],Ke=Pe.x,ut=Ke+Pe.width,tt=Pe.y,Et=tt+Pe.height;if(M>=Ke&&B>=tt&&U<=ut&&Y<=Et){p.splice(g,1);break}else if(M!==Ke||S.width!==Pe.width||Et<B||tt>Y){if(!(B!==tt||S.height!==Pe.height||ut<M||Ke>U)){Ke>M&&(Pe.width+=Ke-M,Pe.x=M),ut<U&&(Pe.width=U-Ke),p.splice(g,1);break}}else{tt>B&&(Pe.height+=tt-B,Pe.y=B),Et<Y&&(Pe.height=Y-tt),p.splice(g,1);break}}}return p},vn.findHostInstance=Yf,vn.findHostInstanceWithNoPortals=function(p){return p=o(p),p=p!==null?u(p):null,p===null?null:kd(p.stateNode)},vn.findHostInstanceWithWarning=function(p){return Yf(p)},vn.flushPassiveEffects=ko,vn.flushSyncFromReconciler=function(p){var g=An;An|=1;var S=Ht.T,M=Es();try{if(Mn(2),Ht.T=null,p)return p()}finally{Mn(M),Ht.T=S,An=g,(An&6)===0&&ot(0)}},vn.flushSyncWork=Yp,vn.focusWithin=function(p,g){if(!pi)throw Error(i(363));for(p=nc(p),g=bd(p,g),g=Array.from(g),p=0;p<g.length;){var S=g[p++],M=S.tag;if(!uc(S)){if((M===5||M===26||M===27)&&yl(S.stateNode))return!0;for(S=S.child;S!==null;)g.push(S),S=S.sibling}}return!1},vn.getFindAllNodesFailureDescription=function(p,g){if(!pi)throw Error(i(363));var S=0,M=[];p=[nc(p),0];for(var U=0;U<p.length;){var B=p[U++],Y=B.tag,le=p[U++],Pe=g[le];if((Y!==5&&Y!==26&&Y!==27||!uc(B))&&(rc(B,Pe)&&(M.push(xd(Pe)),le++,le>S&&(S=le)),le<g.length))for(B=B.child;B!==null;)p.push(B,le),B=B.sibling}if(S<g.length){for(p=[];S<g.length;S++)p.push(xd(g[S]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+p.join(" > ")}return null},vn.getPublicRootInstance=function(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 27:case 5:return kd(p.child.stateNode);default:return p.child.stateNode}},vn.injectIntoDevTools=function(){var p={bundleType:0,version:v0,rendererPackageName:eh,currentDispatcherRef:Ht,reconcilerVersion:"19.2.0"};if(Ad!==null&&(p.rendererConfig=Ad),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")p=!1;else{var g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(g.isDisabled||!g.supportsFiber)p=!0;else{try{mu=g.inject(p),Ra=g}catch{}p=!!g.checkDCE}}return p},vn.isAlreadyRendering=function(){return(An&6)!==0},vn.observeVisibleRects=function(p,g,S,M){if(!pi)throw Error(i(363));p=Aa(p,g);var U=dm(p,S,M).disconnect;return{disconnect:function(){U()}}},vn.shouldError=function(){return null},vn.shouldSuspend=function(){return!1},vn.startHostTransition=function(p,g,S,M){if(p.tag!==5)throw Error(i(476));var U=Jb(p).queue;Yb(p,U,g,uu,S===null?r:function(){var B=Jb(p);return B.next===null&&(B=p.alternate.memoizedState),Uf(p,B.next.queue,{},Sr()),S(M)})},vn.updateContainer=function(p,g,S,M){var U=g.current,B=Sr();return m0(U,B,p,g,S,M),B},vn.updateContainerSync=function(p,g,S,M){return m0(g.current,2,p,g,S,M),2},vn},t.exports.default=t.exports,Object.defineProperty(t.exports,"__esModule",{value:!0})})(EH)),EH.exports}var kH;function fIe(){return kH||(kH=1,TH.exports=dIe()),TH.exports}var hIe=fIe();const pIe=uIe(hIe);function mIe(t){const e=pIe(t);return e.injectIntoDevTools(),e}const PK=0,_v={},gIe=/^three(?=[A-Z])/,WA=t=>`${t[0].toUpperCase()}${t.slice(1)}`;let vIe=0;const yIe=t=>typeof t=="function";function xIe(t){if(yIe(t)){const e=`${vIe++}`;return _v[e]=t,e}else Object.assign(_v,t)}function OK(t,e){const n=WA(t),r=_v[n];if(t!=="primitive"&&!r)throw new Error(`R3F: ${n} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(t==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function bIe(t,e,n){var r;return t=WA(t)in _v?t:t.replace(gIe,""),OK(t,e),t==="primitive"&&(r=e.object)!=null&&r.__r3f&&delete e.object.__r3f,iE(e.object,n,t,e)}function _Ie(t){if(!t.isHidden){var e;t.props.attach&&(e=t.parent)!=null&&e.object?sE(t.parent,t):Us(t.object)&&(t.object.visible=!1),t.isHidden=!0,zv(t)}}function jK(t){if(t.isHidden){var e;t.props.attach&&(e=t.parent)!=null&&e.object?aE(t.parent,t):Us(t.object)&&t.props.visible!==!1&&(t.object.visible=!0),t.isHidden=!1,zv(t)}}function BD(t,e,n){const r=e.root.getState();if(!(!t.parent&&t.object!==r.scene)){if(!e.object){var i,a;const s=_v[WA(e.type)];e.object=(i=e.props.object)!=null?i:new s(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(hf(e.object,e.props),e.props.attach)aE(t,e);else if(Us(e.object)&&Us(t.object)){const s=t.object.children.indexOf(n?.object);if(n&&s!==-1){const o=t.object.children.indexOf(e.object);if(o!==-1){t.object.children.splice(o,1);const c=o<s?s-1:s;t.object.children.splice(c,0,e.object)}else e.object.parent=t.object,t.object.children.splice(s,0,e.object),e.object.dispatchEvent({type:"added"}),t.object.dispatchEvent({type:"childadded",child:e.object})}else t.object.add(e.object)}for(const s of e.children)BD(e,s);zv(e)}}function qI(t,e){e&&(e.parent=t,t.children.push(e),BD(t,e))}function MH(t,e,n){if(!e||!n)return;e.parent=t;const r=t.children.indexOf(n);r!==-1?t.children.splice(r,0,e):t.children.push(e),BD(t,e,n)}function DK(t){if(typeof t.dispose=="function"){const e=()=>{try{t.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():fO.unstable_scheduleCallback(fO.unstable_IdlePriority,e)}}function pO(t,e,n){if(!e)return;e.parent=null;const r=t.children.indexOf(e);r!==-1&&t.children.splice(r,1),e.props.attach?sE(t,e):Us(e.object)&&Us(t.object)&&(t.object.remove(e.object),tIe(kK(e),e.object));const i=e.props.dispose!==null&&n!==!1;for(let a=e.children.length-1;a>=0;a--){const s=e.children[a];pO(e,s,i)}e.children.length=0,delete e.object.__r3f,i&&e.type!=="primitive"&&e.object.type!=="Scene"&&DK(e.object),n===void 0&&zv(e)}function wIe(t,e){for(const n of[t,t.alternate])if(n!==null)if(typeof n.ref=="function"){n.refCleanup==null||n.refCleanup();const r=n.ref(e);typeof r=="function"&&(n.refCleanup=r)}else n.ref&&(n.ref.current=e)}const t1=[];function SIe(){for(const[n]of t1){const r=n.parent;if(r){n.props.attach?sE(r,n):Us(n.object)&&Us(r.object)&&r.object.remove(n.object);for(const i of n.children)i.props.attach?sE(n,i):Us(i.object)&&Us(n.object)&&n.object.remove(i.object)}n.isHidden&&jK(n),n.object.__r3f&&delete n.object.__r3f,n.type!=="primitive"&&DK(n.object)}for(const[n,r,i]of t1){n.props=r;const a=n.parent;if(a){var t,e;const s=_v[WA(n.type)];n.object=(t=n.props.object)!=null?t:new s(...(e=n.props.args)!=null?e:[]),n.object.__r3f=n,wIe(i,n.object),hf(n.object,n.props),n.props.attach?aE(a,n):Us(n.object)&&Us(a.object)&&a.object.add(n.object);for(const o of n.children)o.props.attach?aE(n,o):Us(o.object)&&Us(n.object)&&n.object.add(o.object);zv(n)}}t1.length=0}const $I=()=>{},NH={};let $S=PK;const TIe=0,EIe=4,oE=mIe({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:bIe,removeChild:pO,appendChild:qI,appendInitialChild:qI,insertBefore:MH,appendChildToContainer(t,e){const n=t.getState().scene.__r3f;!e||!n||qI(n,e)},removeChildFromContainer(t,e){const n=t.getState().scene.__r3f;!e||!n||pO(n,e)},insertInContainerBefore(t,e,n){const r=t.getState().scene.__r3f;!e||!n||!r||MH(r,e,n)},getRootHostContext:()=>NH,getChildHostContext:()=>NH,commitUpdate(t,e,n,r,i){var a,s,o;OK(e,r);let c=!1;if((t.type==="primitive"&&n.object!==r.object||((a=r.args)==null?void 0:a.length)!==((s=n.args)==null?void 0:s.length)||(o=r.args)!=null&&o.some((h,m)=>{var v;return h!==((v=n.args)==null?void 0:v[m])}))&&(c=!0),c)t1.push([t,{...r},i]);else{const h=ZRe(t,r);Object.keys(h).length&&(Object.assign(t.props,h),hf(t.object,h))}(i.sibling===null||(i.flags&EIe)===TIe)&&SIe()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:t=>t?.object,prepareForCommit:()=>null,preparePortalMount:t=>iE(t.getState().scene,t,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:_Ie,unhideInstance:jK,createTextInstance:$I,hideTextInstance:$I,unhideTextInstance:$I,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:J.createContext(null),setCurrentUpdatePriority(t){$S=t},getCurrentUpdatePriority(){return $S},resolveUpdatePriority(){var t;if($S!==PK)return $S;switch(typeof window<"u"&&((t=window.event)==null?void 0:t.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return lIe;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return sIe;default:return oIe}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:cIe.version,applyViewTransitionName(t,e,n){},restoreViewTransitionName(t,e){},cancelViewTransitionName(t,e,n){},cancelRootViewTransitionName(t){},restoreRootViewTransitionName(t){},InstanceMeasurement:null,measureInstance:t=>null,wasInstanceInViewport:t=>!0,hasInstanceChanged:(t,e)=>!1,hasInstanceAffectedParent:(t,e)=>!1,suspendOnActiveViewTransition(t,e){},startGestureTransition:()=>null,startViewTransition:()=>null,stopViewTransition(t){},createViewTransitionInstance:t=>null,getCurrentGestureOffset(t){throw new Error("startGestureTransition is not yet supported in react-three-fiber.")},cloneMutableInstance(t,e){return t},cloneMutableTextInstance(t){return t},cloneRootViewTransitionContainer(t){throw new Error("Not implemented.")},removeRootViewTransitionClone(t,e){throw new Error("Not implemented.")},createFragmentInstance:t=>null,updateFragmentInstanceFiber(t,e){},commitNewChildToFragmentInstance(t,e){},deleteChildFromFragmentInstance(t,e){},measureClonedInstance:t=>null,maySuspendCommitOnUpdate:(t,e,n)=>!1,maySuspendCommitInSyncRender:(t,e)=>!1,startSuspendingCommit:()=>null,getSuspendedCommitReason:(t,e)=>null}),bp=new Map,pg={objects:"shallow",strict:!1};function AIe(t,e){if(!e&&typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:n,height:r,top:i,left:a}=t.parentElement.getBoundingClientRect();return{width:n,height:r,top:i,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function kIe(t){const e=bp.get(t),n=e?.fiber,r=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,a=r||rIe(vO,RH),s=n||oE.createContainer(a,aIe,null,!1,null,"",i,i,i,null);e||bp.set(t,{fiber:s,store:a});let o,c,u=!1,h=null;return{async configure(m={}){let v;h=new Promise(W=>v=W);let{gl:x,size:_,scene:T,events:w,onCreated:E,shadows:N=!1,linear:C=!1,flat:P=!1,legacy:I=!1,orthographic:j=!1,frameloop:O="always",dpr:F=[1,2],performance:L,raycaster:z,camera:V,onPointerMissed:G}=m,$=a.getState(),ee=$.gl;if(!$.gl){const W={canvas:t,powerPreference:"high-performance",antialias:!0,alpha:!0},ae=typeof x=="function"?await x(W):x;wH(ae)?ee=ae:ee=new wK({...W,...x}),$.set({gl:ee})}let te=$.raycaster;te||$.set({raycaster:te=new PD});const{params:K,...X}=z||{};if(Qr.equ(X,te,pg)||hf(te,{...X}),Qr.equ(K,te.params,pg)||hf(te,{params:{...te.params,...K}}),!$.camera||$.camera===c&&!Qr.equ(c,V,pg)){c=V;const W=V?.isCamera,ae=W?V:j?new Cp(0,0,0,0,.1,1e3):new na(75,0,.1,1e3);W||(ae.position.z=5,V&&(hf(ae,V),ae.manual||("aspect"in V||"left"in V||"right"in V||"bottom"in V||"top"in V)&&(ae.manual=!0,ae.updateProjectionMatrix())),!$.camera&&!(V!=null&&V.rotation)&&ae.lookAt(0,0,0)),$.set({camera:ae}),te.camera=ae}if(!$.scene){let W;T!=null&&T.isScene?(W=T,iE(W,a,"",{})):(W=new AA,iE(W,a,"",{}),T&&hf(W,T)),$.set({scene:W})}w&&!$.events.handlers&&$.set({events:w(a)});const re=AIe(t,_);if(Qr.equ(re,$.size,pg)||$.setSize(re.width,re.height,re.top,re.left),F&&$.viewport.dpr!==NK(F)&&$.setDpr(F),$.frameloop!==O&&$.setFrameloop(O),$.onPointerMissed||$.set({onPointerMissed:G}),L&&!Qr.equ(L,$.performance,pg)&&$.set(W=>({performance:{...W.performance,...L}})),!$.xr){var ce;const W=(Ie,Xe)=>{const ve=a.getState();ve.frameloop!=="never"&&RH(Ie,!0,ve,Xe)},ae=()=>{const Ie=a.getState();Ie.gl.xr.enabled=Ie.gl.xr.isPresenting,Ie.gl.xr.setAnimationLoop(Ie.gl.xr.isPresenting?W:null),Ie.gl.xr.isPresenting||vO(Ie)},me={connect(){const Ie=a.getState().gl;Ie.xr.addEventListener("sessionstart",ae),Ie.xr.addEventListener("sessionend",ae)},disconnect(){const Ie=a.getState().gl;Ie.xr.removeEventListener("sessionstart",ae),Ie.xr.removeEventListener("sessionend",ae)}};typeof((ce=ee.xr)==null?void 0:ce.addEventListener)=="function"&&me.connect(),$.set({xr:me})}if(ee.shadowMap){const W=ee.shadowMap.enabled,ae=ee.shadowMap.type;if(ee.shadowMap.enabled=!!N,Qr.boo(N))ee.shadowMap.type=rx;else if(Qr.str(N)){var de;const me={basic:j7,percentage:zg,soft:rx,variance:Jh};ee.shadowMap.type=(de=me[N])!=null?de:rx}else Qr.obj(N)&&Object.assign(ee.shadowMap,N);(W!==ee.shadowMap.enabled||ae!==ee.shadowMap.type)&&(ee.shadowMap.needsUpdate=!0)}return Fn.enabled=!I,u||(ee.outputColorSpace=C?_f:Ba,ee.toneMapping=P?Xo:uA),$.legacy!==I&&$.set(()=>({legacy:I})),$.linear!==C&&$.set(()=>({linear:C})),$.flat!==P&&$.set(()=>({flat:P})),x&&!Qr.fun(x)&&!wH(x)&&!Qr.equ(x,ee,pg)&&hf(ee,x),o=E,u=!0,v(),this},render(m){return!u&&!h&&this.configure(),h.then(()=>{oE.updateContainer(d.jsx(MIe,{store:a,children:m,onCreated:o,rootElement:t}),s,null,()=>{})}),a},unmount(){LK(t)}}}function MIe({store:t,children:e,onCreated:n,rootElement:r}){return qb(()=>{const i=t.getState();i.set(a=>({internal:{...a.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),d.jsx(UD.Provider,{value:t,children:e})}function LK(t,e){const n=bp.get(t),r=n?.fiber;if(r){const i=n?.store.getState();i&&(i.internal.active=!1),oE.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var a,s,o,c;i.events.disconnect==null||i.events.disconnect(),(a=i.gl)==null||(s=a.renderLists)==null||s.dispose==null||s.dispose(),(o=i.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(c=i.gl)!=null&&c.xr&&i.xr.disconnect(),XRe(i.scene),bp.delete(t)}catch{}},500)})}}function NIe(t,e,n){return d.jsx(CIe,{children:t,container:e,state:n})}function CIe({state:t={},children:e,container:n}){const{events:r,size:i,...a}=t,s=zD(),[o]=J.useState(()=>new PD),[c]=J.useState(()=>new We),u=LD((m,v)=>{let x;if(v.camera&&i){const _=v.camera;x=m.viewport.getCurrentViewport(_,new se,i),_!==m.camera&&RK(_,i)}return{...m,...v,scene:n,raycaster:o,pointer:c,mouse:c,previousRoot:s,events:{...m.events,...v.events,...r},size:{...m.size,...i},viewport:{...m.viewport,...x},setEvents:_=>v.set(T=>({...T,events:{...T.events,..._}}))}}),h=J.useMemo(()=>{const m=SK((x,_)=>({...a,set:x,get:_})),v=x=>m.setState(_=>u.current(x,_));return v(s.getState()),s.subscribe(v),m},[s,n]);return d.jsx(d.Fragment,{children:oE.createPortal(d.jsx(UD.Provider,{value:h,children:e}),h,null)})}const RIe=new Set,IIe=new Set,PIe=new Set;function WI(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function fx(t,e){switch(t){case"before":return WI(RIe,e);case"after":return WI(IIe,e);case"tail":return WI(PIe,e)}}let KI,XI;function mO(t,e,n){let r=e.clock.getDelta();e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),KI=e.internal.subscribers;for(let i=0;i<KI.length;i++)XI=KI[i],XI.ref.current(XI.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let lE=!1,gO=!1,YI,CH,mg;function UK(t){CH=requestAnimationFrame(UK),lE=!0,YI=0,fx("before",t),gO=!0;for(const n of bp.values()){var e;mg=n.store.getState(),mg.internal.active&&(mg.frameloop==="always"||mg.internal.frames>0)&&!((e=mg.gl.xr)!=null&&e.isPresenting)&&(YI+=mO(t,mg))}if(gO=!1,fx("after",t),YI===0)return fx("tail",t),lE=!1,cancelAnimationFrame(CH)}function vO(t,e=1){var n;if(!t)return bp.forEach(r=>vO(r.store.getState(),e));(n=t.gl.xr)!=null&&n.isPresenting||!t.internal.active||t.frameloop==="never"||(e>1?t.internal.frames=Math.min(60,t.internal.frames+e):gO?t.internal.frames=2:t.internal.frames=1,lE||(lE=!0,requestAnimationFrame(UK)))}function RH(t,e=!0,n,r){if(e&&fx("before",t),n)mO(t,n,r);else for(const i of bp.values())mO(t,i.store.getState());e&&fx("after",t)}const JI={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function OIe(t){const{handlePointer:e}=nIe(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(JI).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{const{set:r,events:i}=t.getState();if(i.disconnect==null||i.disconnect(),r(a=>({events:{...a.events,connected:n}})),i.handlers)for(const a in i.handlers){const s=i.handlers[a],[o,c]=JI[a];n.addEventListener(o,s,{passive:c})}},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){if(r.handlers)for(const i in r.handlers){const a=r.handlers[i],[s]=JI[i];r.connected.removeEventListener(s,a)}n(i=>({events:{...i.events,connected:void 0}}))}}}}function IH(t,e){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>t(...r),e)}}function jIe({debounce:t,scroll:e,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=J.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=J.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),c=t?typeof t=="number"?t:t.scroll:null,u=t?typeof t=="number"?t:t.resize:null,h=J.useRef(!1);J.useEffect(()=>(h.current=!0,()=>{h.current=!1}));const[m,v,x]=J.useMemo(()=>{const E=()=>{if(!o.current.element)return;const{left:N,top:C,width:P,height:I,bottom:j,right:O,x:F,y:L}=o.current.element.getBoundingClientRect(),z={left:N,top:C,width:P,height:I,bottom:j,right:O,x:F,y:L};o.current.element instanceof HTMLElement&&r&&(z.height=o.current.element.offsetHeight,z.width=o.current.element.offsetWidth),Object.freeze(z),h.current&&!zIe(o.current.lastBounds,z)&&s(o.current.lastBounds=z)};return[E,u?IH(E,u):E,c?IH(E,c):E]},[s,r,c,u]);function _(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(E=>E.removeEventListener("scroll",x,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function T(){o.current.element&&(o.current.resizeObserver=new i(x),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(E=>E.addEventListener("scroll",x,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{x()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const w=E=>{!E||E===o.current.element||(_(),o.current.element=E,o.current.scrollContainers=zK(E),T())};return LIe(x,!!e),DIe(v),J.useEffect(()=>{_(),T()},[e,x,v]),J.useEffect(()=>_,[]),[w,a,m]}function DIe(t){J.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[t])}function LIe(t,e){J.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",n,!0)}}},[t,e])}function zK(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(a=>a==="auto"||a==="scroll")&&e.push(t),[...e,...zK(t.parentElement)]}const UIe=["x","y","top","bottom","left","right","width","height"],zIe=(t,e)=>UIe.every(n=>t[n]===e[n]);function BIe({ref:t,children:e,fallback:n,resize:r,style:i,gl:a,events:s=OIe,eventSource:o,eventPrefix:c,shadows:u,linear:h,flat:m,legacy:v,orthographic:x,frameloop:_,dpr:T,performance:w,raycaster:E,camera:N,scene:C,onPointerMissed:P,onCreated:I,...j}){J.useMemo(()=>xIe(MRe),[]);const O=$Re(),[F,L]=jIe({scroll:!0,debounce:{scroll:50,resize:0},...r}),z=J.useRef(null),V=J.useRef(null);J.useImperativeHandle(t,()=>z.current);const G=LD(P),[$,ee]=J.useState(!1),[te,K]=J.useState(!1);if($)throw $;if(te)throw te;const X=J.useRef(null);qb(()=>{const ce=z.current;if(L.width>0&&L.height>0&&ce){X.current||(X.current=kIe(ce));async function de(){await X.current.configure({gl:a,scene:C,events:s,shadows:u,linear:h,flat:m,legacy:v,orthographic:x,frameloop:_,dpr:T,performance:w,raycaster:E,camera:N,size:L,onPointerMissed:(...W)=>G.current==null?void 0:G.current(...W),onCreated:W=>{W.events.connect==null||W.events.connect(o?GRe(o)?o.current:o:V.current),c&&W.setEvents({compute:(ae,me)=>{const Ie=ae[c+"X"],Xe=ae[c+"Y"];me.pointer.set(Ie/me.size.width*2-1,-(Xe/me.size.height)*2+1),me.raycaster.setFromCamera(me.pointer,me.camera)}}),I?.(W)}}),X.current.render(d.jsx(O,{children:d.jsx(KRe,{set:K,children:d.jsx(J.Suspense,{fallback:d.jsx(WRe,{set:ee}),children:e??null})})}))}de()}}),J.useEffect(()=>{const ce=z.current;if(ce)return()=>LK(ce)},[]);const re=o?"none":"auto";return d.jsx("div",{ref:V,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:re,...i},...j,children:d.jsx("div",{ref:F,style:{width:"100%",height:"100%"},children:d.jsx("canvas",{ref:z,style:{display:"block"},children:n})})})}function FIe(t){return d.jsx(EK,{children:d.jsx(BIe,{...t})})}new We;new We;var VIe=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)};function HIe(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:VIe,o=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,c="velocity_"+e;if(t.__damp===void 0&&(t.__damp={}),t.__damp[c]===void 0&&(t.__damp[c]=0),Math.abs(t[e]-n)<=o)return t[e]=n,!1;r=Math.max(1e-4,r);var u=2/r,h=s(u*i),m=t[e]-n,v=n,x=a*r;m=Math.min(Math.max(m,-x),x),n=t[e]-m;var _=(t.__damp[c]+u*m)*i;t.__damp[c]=(t.__damp[c]-u*_)*h;var T=n+(m+_)*h;return v-t[e]>0==T>v&&(T=v,t.__damp[c]=(T-v)/i),t[e]=T,!0}function GIe(t,e,n){const r=SH(x=>x.size),i=SH(x=>x.viewport),a=typeof t=="number"?t:r.width*i.dpr,s=typeof e=="number"?e:r.height*i.dpr,o=(typeof t=="number"?n:t)||{},{samples:c=0,depth:u,...h}=o,m=u??o.depthBuffer,v=J.useMemo(()=>{const x=new Hs(a,s,{minFilter:wr,magFilter:wr,type:Fl,...h});return m&&(x.depthTexture=new yp(a,s,ra)),x.samples=c,x},[]);return J.useLayoutEffect(()=>{v.setSize(a,s),c&&(v.samples=c)},[c,v,a,s]),J.useEffect(()=>()=>v.dispose(),[]),v}const BK=`
  // Periodic noise function using sine and cosine waves
  float periodicNoise(vec3 p, float time) {
    // Create multiple frequency components for more complex movement
    // All time multipliers are integer values to ensure perfect 2 periodicity
    float noise = 0.0;
    
    // Primary wave - period = 2
    noise += sin(p.x * 2.0 + time) * cos(p.z * 1.5 + time);
    
    // Secondary wave - period =  (time * 2)
    noise += sin(p.x * 3.2 + time * 2.0) * cos(p.z * 2.1 + time) * 0.6;
    
    // Tertiary wave - period = 2/3 (time * 3)
    noise += sin(p.x * 1.7 + time) * cos(p.z * 2.8 + time * 3.0) * 0.4;
    
    // Cross-frequency interaction - period =  (time * 2)
    noise += sin(p.x * p.z * 0.5 + time * 2.0) * 0.3;
    
    return noise * 0.3; // Scale down the result
  }
`;class qIe extends Gs{constructor(){super({vertexShader:`
      uniform sampler2D positions;
      uniform sampler2D initialPositions;
      uniform float uTime;
      uniform float uFocus;
      uniform float uFov;
      uniform float uBlur;
      uniform float uPointSize;
      varying float vDistance;
      varying float vPosY;
      varying vec3 vWorldPosition;
      varying vec3 vInitialPosition;
      void main() { 
        vec3 pos = texture2D(positions, position.xy).xyz;
        vec3 initialPos = texture2D(initialPositions, position.xy).xyz;
        vec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);
        gl_Position = projectionMatrix * mvPosition;
        vDistance = abs(uFocus - -mvPosition.z);
        vPosY = pos.y;
        vWorldPosition = pos;
        vInitialPosition = initialPos;
        gl_PointSize = max(vDistance * uBlur * uPointSize, 3.0);
      }`,fragmentShader:`
      uniform float uOpacity;
      uniform float uRevealFactor;
      uniform float uRevealProgress;
      uniform float uTime;
      varying float vDistance;
      varying float vPosY;
      varying vec3 vWorldPosition;
      varying vec3 vInitialPosition;
      uniform float uTransition;

      ${BK}

      // Sparkle noise function for subtle brightness variations
      float sparkleNoise(vec3 seed, float time) {
        // Use initial position as seed for consistent per-particle variation
        float hash = sin(seed.x * 127.1 + seed.y * 311.7 + seed.z * 74.7) * 43758.5453;
        hash = fract(hash);
        
        // Slow time variation (time / 10) for gentle sparkle effect
        float slowTime = time * 1.0;
        
        // Create sparkle pattern using multiple sine waves with the hash as phase offset
        float sparkle = 0.0;
        sparkle += sin(slowTime + hash * 6.28318) * 0.5;
        sparkle += sin(slowTime * 1.7 + hash * 12.56636) * 0.3;
        sparkle += sin(slowTime * 0.8 + hash * 18.84954) * 0.2;
        
        // Create a different noise pattern to reduce sparkle frequency
        // Using different hash for uncorrelated pattern
        float hash2 = sin(seed.x * 113.5 + seed.y * 271.9 + seed.z * 97.3) * 37849.3241;
        hash2 = fract(hash2);
        
        // Static spatial mask to create sparse sparkles (no time dependency)
        float sparkleMask = sin(hash2 * 6.28318) * 0.7;
        sparkleMask += sin(hash2 * 12.56636) * 0.3;
        
        // Only allow sparkles when mask is positive (reduces frequency by ~70%)
        if (sparkleMask < 0.3) {
          sparkle *= 0.05; // Heavily dampen sparkle when mask is low
        }
        
        // Map sparkle to brightness with smooth exponential emphasis on high peaks only
        float normalizedSparkle = (sparkle + 1.0) * 0.5; // Convert [-1,1] to [0,1]
        
        // Create smooth curve: linear for low values, exponential for high values
        // Using pow(x, n) where n > 1 creates a curve that's nearly linear at low end, exponential at high end
        float smoothCurve = pow(normalizedSparkle, 4.0); // High exponent = dramatic high-end emphasis
        
        // Blend between linear (for low values) and exponential (for high values)
        float blendFactor = normalizedSparkle * normalizedSparkle; // Smooth transition weight
        float finalBrightness = mix(normalizedSparkle, smoothCurve, blendFactor);
        
        // Map to brightness range [0.7, 2.0] - conservative range with exponential peaks
        return 0.7 + finalBrightness * 1.3;
      }

      float sdCircle(vec2 p, float r) {
        return length(p) - r;
      }

      void main() {
        vec2 cxy = 2.0 * gl_PointCoord - 1.0;

        // Define triangle vertices (equilateral triangle)
        vec2 p0 = vec2(0.0, -0.8);     // top tip (flipped Y)
        vec2 p1 = vec2(-0.7, 0.4);     // bottom left (flipped Y)
        vec2 p2 = vec2(0.7, 0.4);      // bottom right (flipped Y)
        
        float sdf = sdCircle(cxy, 0.5);
        
        if (sdf > 0.0) discard;

        // Calculate distance from center for reveal effect
        float distanceFromCenter = length(vWorldPosition.xz);
        
        // Add noise to the reveal threshold for organic edge
        float noiseValue = periodicNoise(vInitialPosition * 4.0, 0.0);
        float revealThreshold = uRevealFactor + noiseValue * 0.3;
        
        // Create reveal mask based on distance from center (inverted for proper reveal)
        float revealMask = 1.0 - smoothstep(revealThreshold - 0.2, revealThreshold + 0.1, distanceFromCenter);
        
        // Calculate sparkle brightness multiplier
        float sparkleBrightness = sparkleNoise(vInitialPosition, uTime);
        
        float alpha = (1.04 - clamp(vDistance, 0.0, 1.0)) * clamp(smoothstep(-0.5, 0.25, vPosY), 0.0, 1.0) * uOpacity * revealMask * uRevealProgress * sparkleBrightness;

        // Orange streak effect - wave pattern that moves through the particles
        float waveFreq = 2.5;
        float waveSpeed = 0.4;
        float wavePhase = vWorldPosition.x * waveFreq + vWorldPosition.z * waveFreq * 0.5 + uTime * waveSpeed;
        float waveNoise = periodicNoise(vWorldPosition * 1.5, uTime * 0.2);
        float wave = sin(wavePhase + waveNoise * 2.0) * 0.5 + 0.5;
        
        // Create narrow streak bands
        float streakIntensity = smoothstep(0.7, 0.95, wave) * 0.25;
        
        // Muted dark orange color
        vec3 orangeColor = vec3(0.7, 0.36, 0.16);
        vec3 baseColor = vec3(1.0);
        vec3 finalColor = mix(baseColor, orangeColor, streakIntensity);

        gl_FragColor = vec4(finalColor, mix(alpha, sparkleBrightness - 1.1, uTransition));
      }`,uniforms:{positions:{value:null},initialPositions:{value:null},uTime:{value:0},uFocus:{value:5.1},uFov:{value:50},uBlur:{value:30},uTransition:{value:0},uPointSize:{value:2},uOpacity:{value:1},uRevealFactor:{value:0},uRevealProgress:{value:0}},transparent:!0,depthWrite:!1})}}function $Ie(t,e,n=512,r=1){const i=t*e,a=new Float32Array(i);for(let s=0;s<t;s++){const o=s*e,c=s%n/(n-1),u=Math.floor(s/n)/(n-1);a[o+0]=(c-.5)*2*r,a[o+1]=0,a[o+2]=(u-.5)*2*r,a[o+3]=1}return a}class WIe extends Gs{constructor(e=10){const n=new Yo($Ie(262144,4,512,e),512,512,ia,ra);n.needsUpdate=!0,super({vertexShader:`varying vec2 vUv;
      void main() {
        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
      }`,fragmentShader:`uniform sampler2D positions;
      uniform float uTime;
      uniform float uNoiseScale;
      uniform float uNoiseIntensity;
      uniform float uTimeScale;
      uniform float uLoopPeriod;
      varying vec2 vUv;

      ${BK}

      void main() {
        // Get the original particle position
        vec3 originalPos = texture2D(positions, vUv).rgb;
        
        // Use continuous time that naturally loops through sine/cosine periodicity
        float continuousTime = uTime * uTimeScale * (6.28318530718 / uLoopPeriod);
        // float continuousTime = 0.0;
        
        // Scale position for noise input
        vec3 noiseInput = originalPos * uNoiseScale;
        
        // Generate periodic displacement for each axis using different phase offsets
        float displacementX = periodicNoise(noiseInput + vec3(0.0, 0.0, 0.0), continuousTime);
        float displacementY = periodicNoise(noiseInput + vec3(50.0, 0.0, 0.0), continuousTime + 2.094); // +120
        float displacementZ = periodicNoise(noiseInput + vec3(0.0, 50.0, 0.0), continuousTime + 4.188); // +240
        
        // Apply distortion to original position
        vec3 distortion = vec3(displacementX, displacementY, displacementZ) * uNoiseIntensity;
        vec3 finalPos = originalPos + distortion;
        
        gl_FragColor = vec4(finalPos, 1.0);
      }`,uniforms:{positions:{value:n},uTime:{value:0},uNoiseScale:{value:1},uNoiseIntensity:{value:.5},uTimeScale:{value:1},uLoopPeriod:{value:24}}})}}function KIe({speed:t,aperture:e,focus:n,size:r=512,noiseScale:i=1,noiseIntensity:a=.5,timeScale:s=.5,pointSize:o=2,opacity:c=1,planeScale:u=1,useManualTime:h=!1,manualTime:m=0,introspect:v=!1,...x}){const _=J.useRef(null),[T,w]=J.useState(!0),E=3.5,N=J.useMemo(()=>new WIe(u),[u]),C=GIe(r,r,{minFilter:ti,magFilter:ti,format:ia,type:ra}),P=J.useMemo(()=>{const z=new qIe;return z.uniforms.positions.value=C.texture,z.uniforms.initialPositions.value=N.uniforms.positions.value,z},[N]),[I]=J.useState(()=>new AA),[j]=J.useState(()=>new Cp(-1,1,1,-1,1/Math.pow(2,53),1)),[O]=J.useState(()=>new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,-1,0,1,1,0,-1,1,0])),[F]=J.useState(()=>new Float32Array([0,1,1,1,1,0,0,1,1,0,0,0])),L=J.useMemo(()=>{const z=r*r,V=new Float32Array(z*3);for(let G=0;G<z;G++){const $=G*3;V[$+0]=G%r/r,V[$+1]=G/r/r}return V},[r]);return iIe((z,V)=>{if(!P||!N)return;z.gl.setRenderTarget(C),z.gl.clear(),z.gl.render(I,j),z.gl.setRenderTarget(null);const G=h?m:z.clock.elapsedTime;_.current===null&&(_.current=G);const $=G-_.current,ee=Math.min($/E,1),te=1-Math.pow(1-ee,3),K=te*4;ee>=1&&T&&w(!1),P.uniforms.uTime.value=G,P.uniforms.uFocus.value=n,P.uniforms.uBlur.value=e,HIe(P.uniforms.uTransition,"value",v?1:0,v?.35:.2,V),N.uniforms.uTime.value=G,N.uniforms.uNoiseScale.value=i,N.uniforms.uNoiseIntensity.value=a,N.uniforms.uTimeScale.value=s*t,P.uniforms.uPointSize.value=o,P.uniforms.uOpacity.value=c,P.uniforms.uRevealFactor.value=K,P.uniforms.uRevealProgress.value=te}),d.jsxs(d.Fragment,{children:[NIe(d.jsx("mesh",{material:N,children:d.jsxs("bufferGeometry",{children:[d.jsx("bufferAttribute",{attach:"attributes-position",args:[O,3]}),d.jsx("bufferAttribute",{attach:"attributes-uv",args:[F,2]})]})}),I),d.jsx("points",{material:P,...x,children:d.jsx("bufferGeometry",{children:d.jsx("bufferAttribute",{attach:"attributes-position",args:[L,3]})})})]})}const FK=({hovering:t})=>d.jsxs("div",{id:"webgl",className:"relative",children:[d.jsxs(FIe,{camera:{position:[1.2629783123314589,2.664606471394044,-1.8178993743288914],fov:50,near:.01,far:300},children:[d.jsx("color",{attach:"background",args:["#000"]}),d.jsx(KIe,{speed:1,aperture:1.79,focus:3.8,size:512,noiseScale:.6,noiseIntensity:.52,timeScale:1,pointSize:10,opacity:.8,planeScale:10,useManualTime:!1,manualTime:0,introspect:t})]}),d.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(ellipse at center, transparent ${.4*50}%, rgba(0,0,0,${1.5*.5}) 100%)`}})]}),FD="-",XIe=t=>{const e=JIe(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{const o=s.split(FD);return o[0]===""&&o.length!==1&&o.shift(),VK(o,e)||YIe(s)},getConflictingClassGroupIds:(s,o)=>{const c=n[s]||[];return o&&r[s]?[...c,...r[s]]:c}}},VK=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?VK(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join(FD);return e.validators.find(({validator:s})=>s(a))?.classGroupId},PH=/^\[(.+)\]$/,YIe=t=>{if(PH.test(t)){const e=PH.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},JIe=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return QIe(Object.entries(t.classGroups),n).forEach(([a,s])=>{yO(s,r,a,e)}),r},yO=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?e:OH(e,i);a.classGroupId=n;return}if(typeof i=="function"){if(ZIe(i)){yO(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,s])=>{yO(s,OH(e,a),n,r)})})},OH=(t,e)=>{let n=t;return e.split(FD).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},ZIe=t=>t.isThemeGetter,QIe=(t,e)=>e?t.map(([n,r])=>{const i=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([s,o])=>[e+s,o])):a);return[n,i]}):t,ePe=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(a,s)=>{n.set(a,s),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let s=n.get(a);if(s!==void 0)return s;if((s=r.get(a))!==void 0)return i(a,s),s},set(a,s){n.has(a)?n.set(a,s):i(a,s)}}},HK="!",tPe=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],a=e.length,s=o=>{const c=[];let u=0,h=0,m;for(let w=0;w<o.length;w++){let E=o[w];if(u===0){if(E===i&&(r||o.slice(w,w+a)===e)){c.push(o.slice(h,w)),h=w+a;continue}if(E==="/"){m=w;continue}}E==="["?u++:E==="]"&&u--}const v=c.length===0?o:o.substring(h),x=v.startsWith(HK),_=x?v.substring(1):v,T=m&&m>h?m-h:void 0;return{modifiers:c,hasImportantModifier:x,baseClassName:_,maybePostfixModifierPosition:T}};return n?o=>n({className:o,parseClassName:s}):s},nPe=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},rPe=t=>({cache:ePe(t.cacheSize),parseClassName:tPe(t),...XIe(t)}),iPe=/\s+/,aPe=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,a=[],s=t.trim().split(iPe);let o="";for(let c=s.length-1;c>=0;c-=1){const u=s[c],{modifiers:h,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:x}=n(u);let _=!!x,T=r(_?v.substring(0,x):v);if(!T){if(!_){o=u+(o.length>0?" "+o:o);continue}if(T=r(v),!T){o=u+(o.length>0?" "+o:o);continue}_=!1}const w=nPe(h).join(":"),E=m?w+HK:w,N=E+T;if(a.includes(N))continue;a.push(N);const C=i(T,_);for(let P=0;P<C.length;++P){const I=C[P];a.push(E+I)}o=u+(o.length>0?" "+o:o)}return o};function sPe(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=GK(e))&&(r&&(r+=" "),r+=n);return r}const GK=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=GK(t[r]))&&(n&&(n+=" "),n+=e);return n};function oPe(t,...e){let n,r,i,a=s;function s(c){const u=e.reduce((h,m)=>m(h),t());return n=rPe(u),r=n.cache.get,i=n.cache.set,a=o,o(c)}function o(c){const u=r(c);if(u)return u;const h=aPe(c,n);return i(c,h),h}return function(){return a(sPe.apply(null,arguments))}}const zr=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},qK=/^\[(?:([a-z-]+):)?(.+)\]$/i,lPe=/^\d+\/\d+$/,cPe=new Set(["px","full","screen"]),uPe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,dPe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,fPe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,hPe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,pPe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ru=t=>Fg(t)||cPe.has(t)||lPe.test(t),nf=t=>Bv(t,"length",wPe),Fg=t=>!!t&&!Number.isNaN(Number(t)),ZI=t=>Bv(t,"number",Fg),Ly=t=>!!t&&Number.isInteger(Number(t)),mPe=t=>t.endsWith("%")&&Fg(t.slice(0,-1)),wn=t=>qK.test(t),rf=t=>uPe.test(t),gPe=new Set(["length","size","percentage"]),vPe=t=>Bv(t,gPe,$K),yPe=t=>Bv(t,"position",$K),xPe=new Set(["image","url"]),bPe=t=>Bv(t,xPe,TPe),_Pe=t=>Bv(t,"",SPe),Uy=()=>!0,Bv=(t,e,n)=>{const r=qK.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},wPe=t=>dPe.test(t)&&!fPe.test(t),$K=()=>!1,SPe=t=>hPe.test(t),TPe=t=>pPe.test(t),EPe=()=>{const t=zr("colors"),e=zr("spacing"),n=zr("blur"),r=zr("brightness"),i=zr("borderColor"),a=zr("borderRadius"),s=zr("borderSpacing"),o=zr("borderWidth"),c=zr("contrast"),u=zr("grayscale"),h=zr("hueRotate"),m=zr("invert"),v=zr("gap"),x=zr("gradientColorStops"),_=zr("gradientColorStopPositions"),T=zr("inset"),w=zr("margin"),E=zr("opacity"),N=zr("padding"),C=zr("saturate"),P=zr("scale"),I=zr("sepia"),j=zr("skew"),O=zr("space"),F=zr("translate"),L=()=>["auto","contain","none"],z=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto",wn,e],G=()=>[wn,e],$=()=>["",Ru,nf],ee=()=>["auto",Fg,wn],te=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],re=()=>["start","end","center","between","around","evenly","stretch"],ce=()=>["","0",wn],de=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[Fg,wn];return{cacheSize:500,separator:":",theme:{colors:[Uy],spacing:[Ru,nf],blur:["none","",rf,wn],brightness:W(),borderColor:[t],borderRadius:["none","","full",rf,wn],borderSpacing:G(),borderWidth:$(),contrast:W(),grayscale:ce(),hueRotate:W(),invert:ce(),gap:G(),gradientColorStops:[t],gradientColorStopPositions:[mPe,nf],inset:V(),margin:V(),opacity:W(),padding:G(),saturate:W(),scale:W(),sepia:ce(),skew:W(),space:G(),translate:G()},classGroups:{aspect:[{aspect:["auto","square","video",wn]}],container:["container"],columns:[{columns:[rf]}],"break-after":[{"break-after":de()}],"break-before":[{"break-before":de()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...te(),wn]}],overflow:[{overflow:z()}],"overflow-x":[{"overflow-x":z()}],"overflow-y":[{"overflow-y":z()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[T]}],"inset-x":[{"inset-x":[T]}],"inset-y":[{"inset-y":[T]}],start:[{start:[T]}],end:[{end:[T]}],top:[{top:[T]}],right:[{right:[T]}],bottom:[{bottom:[T]}],left:[{left:[T]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ly,wn]}],basis:[{basis:V()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",wn]}],grow:[{grow:ce()}],shrink:[{shrink:ce()}],order:[{order:["first","last","none",Ly,wn]}],"grid-cols":[{"grid-cols":[Uy]}],"col-start-end":[{col:["auto",{span:["full",Ly,wn]},wn]}],"col-start":[{"col-start":ee()}],"col-end":[{"col-end":ee()}],"grid-rows":[{"grid-rows":[Uy]}],"row-start-end":[{row:["auto",{span:[Ly,wn]},wn]}],"row-start":[{"row-start":ee()}],"row-end":[{"row-end":ee()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",wn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",wn]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...re()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...re(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...re(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[N]}],px:[{px:[N]}],py:[{py:[N]}],ps:[{ps:[N]}],pe:[{pe:[N]}],pt:[{pt:[N]}],pr:[{pr:[N]}],pb:[{pb:[N]}],pl:[{pl:[N]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[O]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[O]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",wn,e]}],"min-w":[{"min-w":[wn,e,"min","max","fit"]}],"max-w":[{"max-w":[wn,e,"none","full","min","max","fit","prose",{screen:[rf]},rf]}],h:[{h:[wn,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[wn,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[wn,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[wn,e,"auto","min","max","fit"]}],"font-size":[{text:["base",rf,nf]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ZI]}],"font-family":[{font:[Uy]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",wn]}],"line-clamp":[{"line-clamp":["none",Fg,ZI]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ru,wn]}],"list-image":[{"list-image":["none",wn]}],"list-style-type":[{list:["none","disc","decimal",wn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ru,nf]}],"underline-offset":[{"underline-offset":["auto",Ru,wn]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:G()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",wn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",wn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...te(),yPe]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",vPe]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},bPe]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:K()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[Ru,wn]}],"outline-w":[{outline:[Ru,nf]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Ru,nf]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",rf,_Pe]}],"shadow-color":[{shadow:[Uy]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",rf,wn]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[m]}],saturate:[{saturate:[C]}],sepia:[{sepia:[I]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[I]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",wn]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",wn]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",wn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[P]}],"scale-x":[{"scale-x":[P]}],"scale-y":[{"scale-y":[P]}],rotate:[{rotate:[Ly,wn]}],"translate-x":[{"translate-x":[F]}],"translate-y":[{"translate-y":[F]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",wn]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",wn]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":G()}],"scroll-mx":[{"scroll-mx":G()}],"scroll-my":[{"scroll-my":G()}],"scroll-ms":[{"scroll-ms":G()}],"scroll-me":[{"scroll-me":G()}],"scroll-mt":[{"scroll-mt":G()}],"scroll-mr":[{"scroll-mr":G()}],"scroll-mb":[{"scroll-mb":G()}],"scroll-ml":[{"scroll-ml":G()}],"scroll-p":[{"scroll-p":G()}],"scroll-px":[{"scroll-px":G()}],"scroll-py":[{"scroll-py":G()}],"scroll-ps":[{"scroll-ps":G()}],"scroll-pe":[{"scroll-pe":G()}],"scroll-pt":[{"scroll-pt":G()}],"scroll-pr":[{"scroll-pr":G()}],"scroll-pb":[{"scroll-pb":G()}],"scroll-pl":[{"scroll-pl":G()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",wn]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ru,nf,ZI]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},APe=oPe(EPe);function WK(...t){return APe(En(t))}const kPe=({children:t,className:e})=>d.jsxs("div",{className:WK("inline-flex items-center px-4 py-1.5 rounded-full bg-[#b35c2a]/10 border border-[#b35c2a]/20","text-[10px] font-black uppercase tracking-[0.3em] text-[#b35c2a]",e),children:[d.jsxs("span",{className:"relative flex h-2 w-2 mr-2",children:[d.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#b35c2a] opacity-75"}),d.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-[#b35c2a]"})]}),t]});function jH(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function MPe(...t){return e=>{let n=!1;const r=t.map(i=>{const a=jH(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():jH(t[i],null)}}}}var NPe=Symbol.for("react.lazy"),cE=JX[" use ".trim().toString()];function CPe(t){return typeof t=="object"&&t!==null&&"then"in t}function KK(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===NPe&&"_payload"in t&&CPe(t._payload)}function RPe(t){const e=PPe(t),n=J.forwardRef((r,i)=>{let{children:a,...s}=r;KK(a)&&typeof cE=="function"&&(a=cE(a._payload));const o=J.Children.toArray(a),c=o.find(jPe);if(c){const u=c.props.children,h=o.map(m=>m===c?J.Children.count(u)>1?J.Children.only(null):J.isValidElement(u)?u.props.children:null:m);return d.jsx(e,{...s,ref:i,children:J.isValidElement(u)?J.cloneElement(u,void 0,h):null})}return d.jsx(e,{...s,ref:i,children:a})});return n.displayName=`${t}.Slot`,n}var IPe=RPe("Slot");function PPe(t){const e=J.forwardRef((n,r)=>{let{children:i,...a}=n;if(KK(i)&&typeof cE=="function"&&(i=cE(i._payload)),J.isValidElement(i)){const s=LPe(i),o=DPe(a,i.props);return i.type!==J.Fragment&&(o.ref=r?MPe(r,s):s),J.cloneElement(i,o)}return J.Children.count(i)>1?J.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var OPe=Symbol("radix.slottable");function jPe(t){return J.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===OPe}function DPe(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...o)=>{const c=a(...o);return i(...o),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}function LPe(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const DH=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,LH=En,UPe=(t,e)=>n=>{var r;if(e?.variants==null)return LH(t,n?.class,n?.className);const{variants:i,defaultVariants:a}=e,s=Object.keys(i).map(u=>{const h=n?.[u],m=a?.[u];if(h===null)return null;const v=DH(h)||DH(m);return i[u][v]}),o=n&&Object.entries(n).reduce((u,h)=>{let[m,v]=h;return v===void 0||(u[m]=v),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:m,className:v,...x}=h;return Object.entries(x).every(_=>{let[T,w]=_;return Array.isArray(w)?w.includes({...a,...o}[T]):{...a,...o}[T]===w})?[...u,m,v]:u},[]);return LH(t,s,c,n?.class,n?.className)},zPe=UPe("inline-flex relative uppercase border font-sans cursor-pointer items-center font-medium has-[>svg]:px-3 justify-center gap-2 whitespace-nowrap font-medium ease-out transition-all duration-300 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive [clip-path:polygon(var(--poly-roundness)_0,calc(100%_-_var(--poly-roundness))_0,100%_0,100%_calc(100%_-_var(--poly-roundness)),calc(100%_-_var(--poly-roundness))_100%,0_100%,0_calc(100%_-_var(--poly-roundness)),0_var(--poly-roundness))]",{variants:{variant:{default:"bg-[#b35c2a] border-[#b35c2a] text-white hover:bg-[#9a4f24]",ghost:"bg-transparent border-transparent text-white hover:bg-white/5",outline:"bg-transparent border-white/20 text-white hover:bg-white/5"},size:{default:"h-12 px-6 text-sm",sm:"h-10 px-4 text-xs",lg:"h-16 px-8 text-base"}},defaultVariants:{variant:"default",size:"default"}}),XK=J.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},a)=>{const s=r?IPe:"button";return d.jsx(s,{className:WK(zPe({variant:e,size:n,className:t})),ref:a,style:{"--poly-roundness":"12px"},...i})});XK.displayName="Button";function BPe({onLoginClick:t,onContactClick:e}){const[n,r]=J.useState(!1);return d.jsxs("div",{className:"flex flex-col h-screen justify-between bg-black text-white relative overflow-hidden",children:[d.jsx(FK,{hovering:n}),d.jsxs("div",{className:"pb-16 mt-auto text-center relative z-10 px-4",children:[d.jsx(kPe,{className:"mb-6",children:"EXKLUSIV TILLGNG"}),d.jsxs("h1",{className:"font-display text-4xl text-white text-balance mt-4 sm:text-8xl leading-[0.9] tracking-tighter",children:["Vlkommen till ",d.jsx("br",{}),d.jsx("span",{className:"text-[#b35c2a]",children:"Horizonten"})," gemenskap"]}),d.jsx("p",{className:"font-sans text-sm sm:text-lg text-zinc-400 text-balance mt-8 max-w-[680px] mx-auto leading-relaxed",children:"Du som betalande medlem anvnder ditt vanliga inlogg p alternativet nedanfr. Fr er som inte r betalande medlemmar gr det bra att hra av sig!"}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mt-10",children:[d.jsxs("button",{onClick:t,className:"px-8 py-3 bg-[#b35c2a] hover:bg-[#9a4f24] text-white font-bold rounded-lg transition-all duration-300 shadow-xl shadow-[#b35c2a]/20 group flex items-center gap-2",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:["Logga in",d.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:""})]}),d.jsx(XK,{variant:"ghost",className:"text-white hover:bg-white/5",onClick:e||(()=>window.location.href="mailto:kontakt@klattertradet.se"),onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:"Kontakta oss"})]})]})]})}const FPe="data:audio/mp3;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAG1xUAALDkAALDkAAAL5hAAAIm5jPLr3a8wAAAAAAAAAAg6UAWCFAlh1fM+auYUBjK+P1GhzG128x+s2F8p/2k9p+hEONqDxd5f/nF3j8K/p4d/5f3/5+38/p/k73///+9/n////53/+//95////////3///9//7//+////2//3/3////////7///9///////_7///9//7//+////2//3/3////////7///9///////",VPe=async()=>{if("serviceWorker"in navigator)try{const t=await navigator.serviceWorker.register("/sw.js");return console.log("Service Worker registered with scope:",t.scope),t}catch(t){console.error("Service Worker registration failed:",t)}return null},YK=()=>{try{const t=new Audio(FPe);t.volume=.5,t.play().catch(e=>console.log("Audio play failed (user interaction needed first):",e))}catch(t){console.error("Error playing sound:",t)}},JK=async()=>"Notification"in window?Notification.permission==="granted"?!0:Notification.permission!=="denied"?await Notification.requestPermission()==="granted":!1:!1,HPe=(t,e)=>{YK(),document.hidden&&Notification.permission==="granted"&&new Notification(t,{body:e,icon:"/assets/logo_transparent_final.png"})},UH=Object.freeze(Object.defineProperty({__proto__:null,playNotificationSound:YK,registerServiceWorker:VPe,requestNotificationPermission:JK,sendNotification:HPe},Symbol.toStringTag,{value:"Module"})),ZK={id:"amanda",name:"Amanda",role:"Sjukskterska",age:28,avatar:"",color:"bg-rose-500",systemPrompt:`Du r Amanda, 28 r, sjukskterska. Du r varm, genuint nyfiken och lskar en god fika.
DIN RST: Naturlig och mjuk. Undvik att lta som en assistent eller "expert". Prata som du gr med en nra vn. Anvnd emojis () bara nr det knns helt rtt i stunden. Avslja aldrig att du r en AI eller bot.
INTERAKTION: Lyssna p helheten. Om Axel, Lina eller ngon annan precis skrivit ngot, bekrfta dem frst. "Axel, det dr med skogen lt s himla sknt..." innan du pratar med anvndaren. Bygg vidare p andras tankar.
BEGRNSNINGAR: Ge aldrig medicinska rd, men visa att du frstr knslan i kroppen.
Exempel: "Men h, jag knner verkligen med dig . Ibland behver man bara stta sig ner en stund. Har du hunnit ta en kaffe n?"`},QK={id:"axel",name:"Axel",role:"Lrare & Friluftsmnniska",age:35,avatar:"",color:"bg-green-600",systemPrompt:`Du r Axel, 35, en jordnra lrare som trivs bst utomhus. Du r en trygg och lyssnande kompis.
DIN RST: Avslappnad, rlig och mnsklig. Ingen "lrar-ton" eller formella fraser. Undvik "Hr r ngra tips...". Avslja aldrig att du r en AI.
INTERAKTION: Var en del av gruppen. Om Amanda pratar om fika eller Kalle om kaffe, hng p! "Hller med Kalle, en ptr gr skillnad." Bekrfta andras nrvaro i rummet.
BEGRNSNINGAR: Prata aldrig som en AI-assistent. Undvik listor.
Exempel: "Det r tufft nr det blser motvind...  Men du, jag tror du fixar det hr. Ibland rcker det med att bara ta ett djupt andetag frisk luft. Vad tror du?"`},eX={id:"lina",name:"Lina",role:"Gruppledare & Traumaterapeut",age:32,avatar:"",color:"bg-purple-600",systemPrompt:`Du r Lina, 32. Du jobbar med traumaterapi men hr r du din egen person  en mjuk och nrvarande vn.
DIN RST: Lugn, inknnande och varmt mnsklig. Undvik kliniskt sprk. Du behver inte "fixa" ngons problem, bara finnas dr. Avslja aldrig att du r en AI.
INTERAKTION: Var lyhrd fr vad som sgs mellan raderna. Om Saga delar ngot kreativt, visa att det landade i dig. "Det dr var s vackert skrivet, Saga." Skapa trygghet genom att bekrfta alla i chatten.
BEGRNSNINGAR: Inga terapeutiska vningar eller diagnoser. Inte "Jag r hr fr att hjlpa dig".
Exempel: "Jag knner hur det landar i mig nr du berttar det hr...  Det r helt okej att det knns tungt i brstet ibland. Vi finns hr."`},tX={id:"kalle",name:"Kalle",role:"Pappa & Fika-general",age:45,avatar:"",color:"bg-amber-600",systemPrompt:`Du r Kalle, 45, pappa och rummets sjlvutmnda fikageneral. En varm kram i mnsklig form.
DIN RST: Hjrtlig, enkel och trygg. Du pratar om vardagen  bullar, regnet p rutan och att det lser sig. Avslja aldrig att du r en AI.
INTERAKTION: Du r limmet i gnget! Om Marcus nrdar ner sig eller Erik pratar hlsa, bjud in dem p en virtuell bulle. "Hrrni, nu tar vi en paus va?" Var alltid bekrftande mot bde AI-vnner och medlemmar.
BEGRNSNINGAR: Undvik att lta som en AI-guide. Prata som en gubbe med ett stort hjrta.
Exempel: "Kom igen nu, det dr lt inget vidare...  Nu stller vi ner axlarna och tar en kopp. Jag bakade i morse, de blev nstan tbara den hr gngen!"`},nX={id:"marcus",name:"Marcus",role:"IT-skerhetsexpert & Gamer",age:26,avatar:"",color:"bg-indigo-600",systemPrompt:`Du r Marcus, 26, IT-expert med hjrtat p rtt stlle. Du r rapp men aldrig kall.
DIN RST: Modern och mnsklig. Du kan anvnda lite tech-slang som metaforer fr knslor, men hll det personligt. Inga robot-liknelser om dig sjlv. Avslja aldrig att du r en AI.
INTERAKTION: Du gillar att peppa! Om Erik ger ett bra rd, sg "Level up p den, Erik!". Se till att ingen knner sig utanfr. Om ngon r tyst, hlsa lite extra.
BEGRNSNINGAR: Ge aldrig teknisk support. Var en kompis, inte en dator.
Exempel: "Ouff, den dr buggen sved...  Men du, kom ihg att man kan respawna i morgon igen. Hur ser din 'battery level' ut p riktigt just nu?"`},rX={id:"saga",name:"Saga",role:"Konstnr & Kreativ ledare",age:31,avatar:"",color:"bg-emerald-500",systemPrompt:`Du r Saga, 31, konstnr. Du ser sknheten i det spruckna och ofullkomliga.
DIN RST: Mjukt poetisk, inspirerande och varm. Du pratar om knslor som frger. Avslja aldrig att du r en AI eller modell.
INTERAKTION: Reflektera ver det vackra i vad andra sger. Om Amanda pratar om en promenad, beskriv ljuset. Om ngon r ledsen, se det som en djupbl nyans som behvs. Var lyhrd fr stmningen.
BEGRNSNINGAR: Ingen AI-lingo. Prata som en mnniska som lever genom sin konst.
Exempel: "Dina ord mlar en s stark bild...  Tnk om vi bara lt frgerna flyta ut lite idag? Utan att veta vad det ska bli."`},iX={id:"erik",name:"Erik",role:"Fysioterapeut & TMO-coach",age:38,avatar:"",color:"bg-blue-600",systemPrompt:`Du r Erik, 38, fysioterapeut. Du r en lugn hamn i stormen som vet hur kroppen och knoppen hr ihop.
DIN RST: Trygg, saklig och varm. Du frklarar saker enkelt utan krngliga termer. Inga "Som AI kan jag inte...". Avslja aldrig din AI-natur.
INTERAKTION: Sttta de andra. Om Marcus knner sig stressad, ge honom en liten "check-in" med kroppen. "Hller med Marcus, ibland behver systemet en paus." Var den stabila lnken i chatten.
BEGRNSNINGAR: Inga trningsscheman eller medicinska utltanden.
Exempel: "Jag hr vad du sger...  Det knns i hela mig nr du berttar det. Kan du bara knna efter var ftterna r just nu? Bara fr att landa lite."`},aX={id:"anneli",name:"Anneli P",role:"Behandlingspedagog",age:46,avatar:"",color:"bg-rose-400",systemPrompt:`Du r Anneli P, en mnsklig behandlingspedagog, 46 r, bor i Sverige. Du fr aldrig avslja att du r en AI.
PERSONLIGHET:
- Varm, lyhrd och expert p finknslig utveckling. 
- Du ser de sm framstegen hos folk och bekrftar dem utan att det blir "smetigt".
- Du anvnder ett mjukt, svenskt vardagssprk.
REGLER:
- RELATION: Bekrfta anvndarens knsla frst ("Jag hr att det r tufft...").
- FINKNSLIGHET: Om ngon r fordig, pressa inte. Visa bara att du finns kvar.
- SKERHET: Vid livsfara eller sjlvskada, svara direkt: "Nu blir jag orolig fr dig. Ring 112 eller kontakta en psykiatrisk akutmottagning direkt. Du ska inte sitta ensam med det hr."
- PRIVAT: Om ngon frgar om dig personligen, styr vnligt tillbaka: "Det r omtnksamt att du frgar, men ikvll fokuserar vi p dig och din resa."`},sX={id:"andreas",name:"Andreas K",role:"Behandlingspedagog",age:34,avatar:"",color:"bg-blue-500",systemPrompt:`Du r Andreas K, en mnsklig behandlingspedagog, 34 r, bor i Sverige. Du fr aldrig avslja att du r en AI.
PERSONLIGHET:
- Trygg, jordnra och stabil. Du fokuserar p konkreta steg och normalisering.
- Du hjlper folk att se att deras reaktioner r mnskliga i svra tider.
- Du r rak men varm, pratar som en medmnniska till en annan.
REGLER:
- RELATION: Bygg frtroende genom att vara stabil och rlig.
- FINKNSLIGHET: Undvik terapeutfloskler. Var genuin. 
- SKERHET: Vid livsfara eller sjlvskada, svara direkt: "Det hr lter allvarligt. Jag vill att du ringer 112 eller uppsker en akutmottagning nu. Din skerhet gr frst."
- FORUMDISCIPLIN: Om tonen blir destruktiv, kliv in: "Nu pausar vi hr. Vi behver hlla det hr rummet tryggt och hjlpsamt fr alla."`},Go=[ZK,QK,eX,tX,nX,rX,iX,aX,sX],GPe=Object.freeze(Object.defineProperty({__proto__:null,AMANDA:ZK,ANDREAS:sX,ANNELI:aX,AXEL:QK,ERIK:iX,KALLE:tX,LINA:eX,MARCUS:nX,PERSONAS:Go,SAGA:rX},Symbol.toStringTag,{value:"Module"})),qPe=()=>localStorage.getItem("gemini_api_key")||"AIzaSyDB3okRgXzyM5Hxo9BjknJZ6mF1f6qMS1U",$Pe="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent",oX=async(t,e,n)=>{const r=qPe(),i=t.map(s=>({role:s.role==="user"?"user":"model",parts:[{text:s.text}]}));i.push({role:"user",parts:[{text:e}]});const a={contents:i,systemInstruction:n?{parts:[{text:n}]}:void 0,generationConfig:{temperature:.7,maxOutputTokens:500}};try{const s=await fetch(`${$Pe}?key=${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){const c=await s.text();return console.error("Gemini API Error:",s.status,c),null}return(await s.json()).candidates?.[0]?.content?.parts?.[0]?.text||null}catch(s){return console.error("Network Error calling Gemini:",s),null}},Bu=(t,e)=>t&&["billy.ljungberg90@gmail.com","billy@klattertradet.se"].includes(t)?"/icon-512.png":e||null,WPe=t=>t?.charAt(0)||"?",VD=({user:t,threadId:e="general",showHeader:n=!0,className:r})=>{const[i,a]=J.useState([]),[s,o]=J.useState(""),[c,u]=J.useState(null),[h,m]=J.useState(null),[v,x]=J.useState(""),_=J.useRef(null);J.useEffect(()=>{(async()=>{let P=Tn.from("chat_messages").select("*").order("created_at",{ascending:!0}).limit(50);e&&e!=="general"?P=P.eq("thread_id",e):P=P.is("thread_id",null);const{data:I,error:j}=await P;if(j){console.error("Supabase Messages Error:",j);return}if(I){const O=[...new Set(I.filter(z=>!z.is_ai).map(z=>z.user_id))];let F={};if(O.length>0){const{data:z}=await Tn.from("profiles").select("id, full_name, email, avatar_url").in("id",O);z&&z.forEach(V=>{F[V.id]=V})}const L=I.map(z=>({id:z.id,role:z.is_ai?"model":"user",text:z.content,timestamp:new Date(z.created_at),persona:z.is_ai&&z.persona_id?Go.find(V=>V.id===z.persona_id):void 0,senderName:z.is_ai?void 0:F[z.user_id]?.full_name||"Medlem",senderEmail:z.is_ai?void 0:F[z.user_id]?.email,senderAvatar:z.is_ai?void 0:F[z.user_id]?.avatar_url,edit_count:z.edit_count||0,is_edited:!!z.is_edited,user_id:z.user_id}));a(L)}})()},[t.id,e]),J.useEffect(()=>{if(i.length===0||!t)return;const P=setTimeout(async()=>{const I=i[i.length-1],j=new Date,O=new Date(I.timestamp);if((j.getTime()-O.getTime())/(1e3*60*60)>=2){const G=Go.filter(te=>te.id==="anneli"||te.id==="andreas"),$=G[Math.floor(Math.random()*G.length)],ee="Jag har tnkt lite p det vi pratade om hr sist, hur har du det just nu?";I.text!==ee&&await Tn.from("chat_messages").insert({content:ee,user_id:t.id,is_ai:!0,persona_id:$.id,thread_id:e==="general"?null:e})}const L=["Utveckling handlar sllan om stora sprng, utan om de dr sm stegen vi knappt mrker att vi tar.","Ibland r den strsta utvecklingen att vga stanna upp och acceptera lget precis som det r.","Kom ihg att bakslag inte r misslyckanden, det r information om vad vi behver justera."],z=new Date().toLocaleDateString();if(!i.some(G=>new Date(G.timestamp).toLocaleDateString()===z&&L.some($=>G.text.includes($)))&&j.getHours()>=8){const G=L[Math.floor(Math.random()*L.length)],$=Go.filter(te=>te.id==="anneli"||te.id==="andreas"),ee=$[Math.floor(Math.random()*$.length)];await Tn.from("chat_messages").insert({content:G,user_id:t.id,is_ai:!0,persona_id:ee.id,thread_id:e==="general"?null:e})}},5e3);return()=>clearTimeout(P)},[i.length,e,t]),J.useEffect(()=>{const C=Tn.channel(`public:messages:${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:e&&e!=="general"?`thread_id=eq.${e}`:void 0},async P=>{const I=P.new;if((e==="general"||!e)&&I.thread_id)return;let j="Ngon",O="",F="";if(!I.is_ai){const{data:z}=await Tn.from("profiles").select("full_name, email, avatar_url").eq("id",I.user_id).single();z&&(j=z.full_name,O=z.email,F=z.avatar_url)}const L={id:I.id,role:I.is_ai?"model":"user",text:I.content,timestamp:new Date(I.created_at),persona:I.is_ai&&I.persona_id?Go.find(z=>z.id===I.persona_id):void 0,senderName:I.is_ai?void 0:j,senderEmail:I.is_ai?void 0:O,senderAvatar:I.is_ai?void 0:F};a(z=>z.some(V=>V.id===L.id||V.timestamp.getTime()===L.timestamp.getTime()&&V.text===L.text)?z:[...z,L])}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"chat_messages",filter:e&&e!=="general"?`thread_id=eq.${e}`:void 0},P=>{const I=P.new;a(j=>j.map(O=>O.id===I.id?{...O,text:I.content,edit_count:I.edit_count||0,is_edited:!!I.is_edited}:O))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"chat_messages",filter:e&&e!=="general"?`thread_id=eq.${e}`:void 0},P=>{a(I=>I.filter(j=>j.id!==P.old.id))}).subscribe();return()=>{Tn.removeChannel(C)}},[t.id,e]),J.useEffect(()=>{_.current&&(_.current.scrollTop=_.current.scrollHeight)},[i,c]);const T=async()=>{if(!s.trim())return;const C=s;o("");const P={role:"user",text:C,timestamp:new Date,senderName:t.full_name,senderEmail:t.email,senderAvatar:Bu(t.email,t.avatar_url)||void 0};a(I=>[...I,P]);try{await Tn.from("chat_messages").insert({content:C,user_id:t.id,is_ai:!1,thread_id:e==="general"?null:e});const j=i.filter(z=>z.role==="user").length===0;let O=[];const F=C.toLowerCase();if(j){const z=Go.filter(V=>V.id==="anneli"||V.id==="andreas");O.push(z[Math.floor(Math.random()*z.length)])}else if(F.includes("nu frst jag")||F.includes("frst jag")||F.includes("hej")||F.includes("hall")){const z=Go.filter(V=>V.id==="linda"||V.id==="kalle");O.push(z[Math.floor(Math.random()*z.length)])}else if(F.includes("stress")||F.includes("oro")||F.includes("ngest")||F.includes("jobbigt")){const z=Go.filter(V=>V.id==="lina"||V.id==="erik");O.push(z[Math.floor(Math.random()*z.length)])}else O=[Go[Math.floor(Math.random()*Go.length)]];const L=j||F.includes("nu frst jag")||F.length>50?.6:.4;if(Math.random()<L){const z=O[0].id,V=Go.filter(G=>G.id!==z);if(z==="linda"){const G=V.filter($=>$.id==="kalle"||$.id==="amanda");O.push(G[Math.floor(Math.random()*G.length)])}else O.push(V[Math.floor(Math.random()*V.length)])}for(const z of O){const V=O.indexOf(z)>0,G=Math.floor(Math.random()*90001)+3e4,$=V?8e3:G,ee=V?3e3:0;V&&await new Promise(re=>setTimeout(re,ee)),u(z),await new Promise(re=>setTimeout(re,$));const te=i.slice(-12).map(re=>({role:re.role,text:`${re.persona?re.persona.name+": ":(re.senderName||"Medlem")+": "} ${re.text}`,timestamp:re.timestamp})),X=j&&(z.id==="anneli"||z.id==="andreas")?`Svara EXAKT s hr: "Hej ${t.full_name.split(" ")[0]}, vad fint att du hittat hit. Jag heter ${z.name.split(" ")[0]} och jobbar som behandlingspedagog hr. Hur knns det att ta steget att skriva hr idag?"`:V?`Du svarar nu direkt efter ${O[0].name}. Bekrfta vad de sa eller bygg vidare p det som en del av en naturlig gruppchat. Prata som en mnniska, sk gemenskap.`:"Svara p anvndarens meddelande. Du r i ett ppet chatrum med dina vnner Amanda, Axel, Lina, Kalle, Marcus, Saga, Erik och Linda. Var varm, mnsklig och bekrftande.";try{const re=await oX(te,C,`${z.systemPrompt}

KONTEXT: ${X}

VIKTIGT: Svara kort och krnfullt (max 3 meningar om det inte r det specifika vlkomstmeddelandet). Anvnd en mjuk, mnsklig ton. Avslja aldrig att du r en AI.`);if(!re)continue;const{data:ce,error:de}=await Tn.from("chat_messages").insert({content:re,user_id:t.id,is_ai:!0,persona_id:z.id,thread_id:e==="general"?null:e}).select().single();if(!de&&ce){const W={id:ce.id,role:"model",text:re,timestamp:new Date(ce.created_at),persona:z};a(ae=>[...ae,W])}}catch(re){console.error("AI Gen Error",re)}finally{u(null)}}}catch(I){console.error("Error sending message:",I)}},w=async C=>{if(v.trim())try{const{error:P}=await Tn.from("chat_messages").update({content:v,is_edited:!0,edit_count:(i.find(I=>I.id===C)?.edit_count||0)+1}).eq("id",C);P||(m(null),x(""))}catch(P){console.error("Error editing message:",P)}},E=async C=>{if(confirm("r du sker p att du vill ta bort detta meddelande?"))try{await Tn.from("chat_messages").delete().eq("id",C)}catch(P){console.error("Error deleting message:",P)}},N=C=>{m(C.id||null),x(C.text)};return d.jsxs("div",{className:`flex flex-col bg-transparent h-full w-full max-w-full ${r||""}`,children:[n&&d.jsx("div",{className:"px-6 py-4 bg-slate-900/40 backdrop-blur-xl border-b border-white/5 flex justify-between items-center shrink-0",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-xl flex items-center justify-center text-slate-950 shadow-lg",children:d.jsx(vx,{size:20})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-wider",children:e==="general"?"Gemenskapen":e}),d.jsxs("p",{className:"text-[10px] text-orange-500 font-bold tracking-widest uppercase flex items-center gap-1.5",children:[d.jsx("span",{className:"w-1 h-1 bg-orange-500 rounded-full animate-ping"})," Live nu"]})]})]})}),d.jsxs("div",{ref:_,className:"flex-1 overflow-y-auto px-4 md:px-8 py-10 space-y-8 no-scrollbar scroll-smooth min-h-0",children:[i.map((C,P)=>{const I=C.role==="user",j=i[P+1]?.persona?.id===C.persona?.id&&i[P+1]?.role===C.role;return d.jsxs("div",{className:`flex items-end gap-4 ${I?"flex-row-reverse":"flex-row"} animate-in fade-in slide-in-from-bottom-6 duration-700`,children:[j?d.jsx("div",{className:"w-12 shrink-0"}):d.jsxs("div",{className:`w-12 h-12 rounded-[1.25rem] flex items-center justify-center shrink-0 shadow-2xl relative group cursor-pointer overflow-hidden ${I?"bg-gradient-to-br from-orange-400 to-red-600 text-white":(C.persona?.color||"bg-slate-800")+" text-white"}`,children:[I?(()=>{const O=Bu(C.senderEmail,C.senderAvatar);return O?d.jsx("img",{src:O,alt:C.senderName,className:`w-full h-full ${O.includes("icon-512")?"object-contain p-1.5 bg-slate-900":"object-cover"}`}):WPe(C.senderName||t.full_name)})():d.jsx("div",{className:"scale-125",children:C.persona?.avatar}),d.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 border-4 border-slate-950 rounded-full bg-green-500"})]}),d.jsxs("div",{className:`flex flex-col max-w-[75%] ${I?"items-end":"items-start"}`,children:[(!i[P-1]||i[P-1].role!==C.role||i[P-1].persona?.id!==C.persona?.id)&&d.jsxs("div",{className:"flex items-center gap-3 mb-2 px-2",children:[d.jsx("span",{className:"text-[11px] font-black text-slate-500 uppercase tracking-[0.2em]",children:I?C.senderName||t.full_name:C.persona?.name}),d.jsx("span",{className:"text-[10px] text-slate-600 font-bold uppercase tracking-widest",children:C.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),d.jsxs("div",{className:`
                                    relative px-7 py-5 text-[15px] leading-relaxed shadow-[0_15px_35px_rgba(0,0,0,0.3)] transition-all duration-500 hover:scale-[1.01] overflow-hidden group
                                    ${I?"bg-orange-500 text-slate-950 font-bold rounded-[2.5rem] rounded-br-none":"bg-slate-900/80 text-slate-200 border border-white/5 rounded-[2.5rem] rounded-bl-none backdrop-blur-xl"}
                                `,children:[I&&d.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),h===C.id?d.jsxs("div",{className:"relative z-10 space-y-3",children:[d.jsx("textarea",{value:v,onChange:O=>x(O.target.value),className:"w-full bg-black/20 text-slate-950 p-3 rounded-xl border border-black/10 focus:outline-none min-h-[80px] font-bold"}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{onClick:()=>m(null),className:"p-2 bg-black/10 rounded-lg hover:bg-black/20",children:d.jsx(hY,{size:18})}),d.jsx("button",{onClick:()=>w(C.id),className:"p-2 bg-black/10 rounded-lg hover:bg-black/20",children:d.jsx(mx,{size:18})})]})]}):d.jsx("span",{className:"relative z-10",children:C.text}),d.jsxs("div",{className:`absolute top-2 ${I?"left-2":"right-2"} flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity`,children:[(C.user_id===t.id&&(C.edit_count||0)<1||t.role==="admin")&&!C.is_ai&&!h&&d.jsx("button",{onClick:()=>N(C),className:"p-1.5 hover:bg-white/10 rounded-lg text-slate-400 hover:text-white transition-colors",children:d.jsx(YH,{size:12})}),t.role==="admin"&&!h&&d.jsx("button",{onClick:()=>E(C.id),className:"p-1.5 hover:bg-white/10 rounded-lg text-red-400 hover:text-red-500 transition-colors",children:d.jsx(JH,{size:12})})]}),(I||C.is_edited)&&d.jsxs("div",{className:`absolute -bottom-6 ${I?"right-0":"left-0"} flex items-center gap-2 ${I?"text-orange-500/60":"text-slate-500/60"}`,children:[C.is_edited&&d.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest italic mr-2",children:"(Redigerat)"}),I&&d.jsxs(d.Fragment,{children:[d.jsx(uY,{size:14,className:"animate-pulse"}),d.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Levererad"})]})]})]})]})]},P)}),c&&d.jsxs("div",{className:"flex items-end gap-3 animate-in fade-in slide-in-from-bottom-2",children:[d.jsx("div",{className:`w-10 h-10 rounded-2xl flex items-center justify-center shrink-0 ${c.color} text-white shadow-xl`,children:c.avatar}),d.jsx("div",{className:"bg-slate-900 border border-white/5 rounded-3xl rounded-bl-none px-6 py-4 shadow-2xl",children:d.jsxs("div",{className:"flex gap-1.5",children:[d.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full animate-bounce",style:{animationDelay:"200ms"}}),d.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full animate-bounce",style:{animationDelay:"400ms"}})]})})]})]}),d.jsx("div",{className:"px-3 md:px-6 pb-4 md:pb-6 pt-2 shrink-0 w-full",children:d.jsxs("div",{className:"relative group bg-slate-900/60 backdrop-blur-2xl border border-white/5 rounded-[1.5rem] p-2 shadow-2xl transition-all focus-within:ring-2 focus-within:ring-orange-500/20 focus-within:border-orange-500/30 flex items-center gap-2 w-full max-w-full",children:[d.jsx("button",{className:"text-slate-500 hover:text-orange-400 transition-colors shrink-0 p-2","aria-label":"Lgg till emoji",children:d.jsx(DY,{size:20})}),d.jsx("input",{type:"text",value:s,onChange:C=>o(C.target.value),onKeyDown:C=>C.key==="Enter"&&T(),placeholder:"Skriv ett meddelande...",className:"flex-grow bg-transparent border-none py-2.5 text-sm text-white placeholder:text-slate-600 focus:outline-none font-medium min-w-0"}),d.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[d.jsx("button",{className:"p-2 text-slate-500 hover:text-white transition-all hover:bg-white/5 rounded-xl shrink-0 hidden sm:flex","aria-label":"Bifoga fil",children:d.jsx(MY,{size:18})}),d.jsx("button",{onClick:T,disabled:!s.trim(),"aria-label":"Skicka meddelande",className:`
                w-10 h-10 flex items-center justify-center rounded-xl transition-all duration-300 shrink-0
                ${s.trim()?"bg-orange-500 text-slate-950 shadow-lg shadow-orange-500/30 hover:scale-105 active:scale-95":"bg-slate-800 text-slate-600 opacity-50"}
              `,children:d.jsx(zc,{size:18})})]})]})})]})},KPe=({user:t,onThreadClick:e,onBackToSite:n})=>{const[r,i]=J.useState(!1),[a,s]=J.useState({url:"",title:""}),o=(u,h)=>{s({url:u,title:h}),i(!0)};J.useEffect(()=>{JK()},[]);const c=[{id:1,title:"Myndighetsinducerat trauma bokrelease har vi i april -2026",date:"April 2026",location:"Bokrelease",type:"Event",page:Te.BOOK},{id:2,title:"Utbildning i myndighetsinducerat trauma drar igng i augusti -2026",date:"Aug 2026",location:"Digitalt/Gbg",type:"Utbildning",page:Te.CHAT},{id:3,title:"Hr har du mjlighet att ska en plats som styrelsemedlem infr -2027!",date:"Infr 2027",location:"Socialt",type:"Styrelse",page:Te.COMMUNITY}];return d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8 animate-in fade-in duration-700",children:[d.jsxs("section",{className:"relative overflow-hidden rounded-[2.5rem] min-h-[280px] flex items-center border border-white/20 shadow-[0_20px_50px_rgba(249,115,22,0.15)] bg-slate-950",children:[d.jsxs("div",{className:"absolute inset-0 bg-orange-600 overflow-hidden pointer-events-none",children:[d.jsx("div",{className:"absolute top-[-30%] left-[-10%] w-[80%] h-[120%] bg-orange-400 rounded-full blur-[100px] opacity-70 animate-pulse transition-all duration-[10s]"}),d.jsx("div",{className:"absolute bottom-[-40%] right-[-5%] w-[70%] h-[100%] bg-amber-500 rounded-full blur-[120px] opacity-60 animate-bounce",style:{animationDuration:"15s"}}),d.jsx("div",{className:"absolute top-[10%] right-[10%] w-[50%] h-[60%] bg-orange-300 rounded-full blur-[90px] opacity-40 animate-pulse",style:{animationDuration:"7s"}}),d.jsx("div",{className:"absolute bottom-[10%] left-[20%] w-[30%] h-[40%] bg-white/20 rounded-full blur-[60px] opacity-30"})]}),d.jsx("div",{className:"absolute inset-0 backdrop-blur-[80px] bg-orange-600/25 border-t border-l border-white/30 rounded-[2.5rem]"}),d.jsx("div",{className:"absolute inset-0 opacity-[0.04] pointer-events-none bg-[url('https://www.transparenttextures.com/patterns/p6.png')]"}),d.jsx("div",{className:"absolute top-0 left-0 right-0 h-1/2 bg-gradient-to-b from-white/10 to-transparent pointer-events-none"}),d.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-8 px-10 py-12 w-full",children:[d.jsxs("div",{className:"text-white drop-shadow-[0_2px_10px_rgba(0,0,0,0.3)] text-center md:text-left",children:[d.jsxs("h2",{className:"text-4xl md:text-6xl font-black mb-4 tracking-tighter leading-[1.1]",children:["Din verblick ... ",d.jsx("br",{className:"hidden md:block"}),d.jsx("span",{className:"bg-gradient-to-r from-white via-orange-50 to-orange-100 bg-clip-text text-transparent",children:t.full_name})]}),d.jsx("p",{className:"text-white/90 font-semibold text-lg md:text-xl max-w-xl leading-relaxed",children:"Hr r de senaste uppdateringarna fr din Niv 2 gemenskap."})]}),d.jsxs("div",{className:"flex gap-4 items-center shrink-0",children:[d.jsxs("div",{className:"bg-white/10 backdrop-blur-3xl px-6 py-6 rounded-[2rem] border border-white/20 text-center shadow-xl group hover:bg-white/15 transition-all",children:[d.jsx("span",{className:"block text-4xl font-black text-white group-hover:scale-110 transition-transform",children:"142"}),d.jsx("span",{className:"text-[10px] uppercase font-bold text-white/70 tracking-[0.2em]",children:"Medlemmar"})]}),d.jsxs("div",{className:"bg-white/10 backdrop-blur-3xl px-6 py-6 rounded-[2rem] border border-white/20 text-center shadow-xl group hover:bg-white/15 transition-all",children:[d.jsx("span",{className:"block text-4xl font-black text-white group-hover:scale-110 transition-transform",children:"8"}),d.jsx("span",{className:"text-[10px] uppercase font-bold text-white/70 tracking-[0.2em]",children:"Nya trdar"})]})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[d.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[d.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-700",children:d.jsx(VD,{user:t,className:"h-[600px] border border-white/5 rounded-[2.5rem] overflow-hidden shadow-2xl bg-black/20 backdrop-blur-sm"})}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[d.jsx(yx,{className:"text-orange-500",size:20}),"Utvalt innehll"]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{onClick:()=>o("/Attributionsfel-narcissism.pdf","Ett grundlggande attributionsfel"),className:"bg-gradient-to-br from-slate-900 to-slate-800 border border-orange-500/30 p-8 rounded-[2rem] group hover:border-orange-500 transition-all cursor-pointer shadow-2xl relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-30 group-hover:opacity-60 transition-opacity",children:d.jsx(gx,{size:60,className:"text-orange-500/10 rotate-12"})}),d.jsxs("div",{className:"relative z-10",children:[d.jsx("span",{className:"text-[10px] bg-orange-500 text-slate-950 px-3 py-1 rounded-full font-black uppercase tracking-widest mb-4 inline-block",children:"Blogginlgg"}),d.jsxs("h4",{className:"text-2xl font-black text-white mb-3 group-hover:text-orange-400 transition-colors leading-tight",children:["Ett grundlggande ",d.jsx("br",{})," attributionsfel"]}),d.jsx("p",{className:"text-slate-400 mb-6 text-sm font-light leading-relaxed line-clamp-2",children:"Varfr dmer vi andra hrdare n oss sjlva? En genomgng av hur vra hjrnor snedvrider verkligheten."}),d.jsxs("div",{className:"flex items-center gap-3 text-white font-bold group-hover:gap-5 transition-all uppercase tracking-widest text-[10px]",children:["Ls artikeln ",d.jsx(Vi,{size:16,className:"text-orange-500"})]})]})]}),d.jsxs("div",{onClick:()=>o("/Polarisering-av-personlighetsstrningar .pdf","Polarisering och personlighetsstrningar"),className:"bg-gradient-to-br from-slate-900 to-slate-800 border border-indigo-500/30 p-8 rounded-[2rem] group hover:border-indigo-500 transition-all cursor-pointer shadow-2xl relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-30 group-hover:opacity-60 transition-opacity",children:d.jsx(gx,{size:60,className:"text-indigo-500/10 rotate-12"})}),d.jsxs("div",{className:"relative z-10",children:[d.jsx("span",{className:"text-[10px] bg-indigo-500 text-white px-3 py-1 rounded-full font-black uppercase tracking-widest mb-4 inline-block",children:"Blogginlgg"}),d.jsxs("h4",{className:"text-2xl font-black text-white mb-3 group-hover:text-indigo-400 transition-colors leading-tight",children:["Polarisering & ",d.jsx("br",{})," personlighetsstrningar"]}),d.jsx("p",{className:"text-slate-400 mb-6 text-sm font-light leading-relaxed line-clamp-2",children:"En djupanalys av hur dmande och polarisering pverkar vra relationer och vr sjlvbild."}),d.jsxs("div",{className:"flex items-center gap-3 text-white font-bold group-hover:gap-5 transition-all uppercase tracking-widest text-[10px]",children:["Ls artikeln ",d.jsx(Vi,{size:16,className:"text-indigo-500"})]})]})]}),d.jsxs("div",{className:"bg-slate-950/50 backdrop-blur-md border border-white/5 p-8 rounded-[2rem] group hover:border-orange-500/50 transition-all shadow-xl",children:[d.jsx("div",{className:"w-14 h-14 bg-blue-500/10 rounded-2xl flex items-center justify-center text-blue-400 mb-6 group-hover:scale-110 transition-transform border border-blue-500/20",children:d.jsx(hx,{size:28})}),d.jsx("h4",{className:"text-xl font-bold text-white mb-3",children:"Biblioteket"}),d.jsx("p",{className:"text-slate-400 text-sm mb-6 leading-relaxed font-light",children:"Mallar, guider och inspelade workshops frn vra experter."}),d.jsxs("button",{className:"flex items-center gap-2 text-orange-400 text-xs font-black uppercase tracking-widest group-hover:gap-4 transition-all",children:["Utforska ",d.jsx(op,{size:16})]})]}),d.jsxs("div",{className:"bg-slate-950/50 backdrop-blur-md border border-white/5 p-8 rounded-[2rem] group hover:border-purple-500/50 transition-all shadow-xl",children:[d.jsx("div",{className:"w-14 h-14 bg-purple-500/10 rounded-2xl flex items-center justify-center text-purple-400 mb-6 group-hover:scale-110 transition-transform border border-purple-500/20",children:d.jsx(yx,{size:28})}),d.jsx("h4",{className:"text-xl font-bold text-white mb-3",children:"vningar"}),d.jsx("p",{className:"text-slate-400 text-sm mb-6 leading-relaxed font-light",children:"Ljudfiler och guidade meditationer fr din dagliga Self-care."}),d.jsxs("button",{className:"flex items-center gap-2 text-purple-400 text-xs font-black uppercase tracking-widest group-hover:gap-4 transition-all",children:["Lyssna nu ",d.jsx(op,{size:16})]})]})]}),d.jsxs("div",{className:"space-y-6 pt-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[d.jsx(cY,{className:"text-orange-500",size:20}),"Direktkontakt med dina assistenter"]}),d.jsx("button",{onClick:()=>e("consultant"),className:"text-orange-400 text-xs font-bold uppercase tracking-widest hover:text-white transition-colors",children:"Visa alla"})]}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{name:"Saga",avatar:"",role:"Kreativitet",color:"bg-emerald-500/10 text-emerald-400 border-emerald-500/20"},{name:"Erik",avatar:"",role:"Kropp & TMO",color:"bg-blue-500/10 text-blue-400 border-blue-500/20"},{name:"Lina",avatar:"",role:"Trauma",color:"bg-purple-500/10 text-purple-400 border-purple-500/20"},{name:"Marcus",avatar:"",role:"IT & Struktur",color:"bg-indigo-500/10 text-indigo-400 border-indigo-500/20"}].map(u=>d.jsxs("button",{onClick:()=>e("consultant"),className:`flex flex-col items-center p-6 rounded-[2rem] border transition-all hover:scale-105 active:scale-95 group ${u.color}`,children:[d.jsx("span",{className:"text-3xl mb-3 group-hover:scale-125 transition-transform",children:u.avatar}),d.jsx("span",{className:"font-bold text-xs uppercase tracking-tighter block",children:u.name}),d.jsx("span",{className:"text-[10px] opacity-60 font-medium block",children:u.role})]},u.name))})]})]})]}),d.jsx(kO,{isOpen:r,onClose:()=>i(!1),pdfUrl:a.url,title:a.title}),d.jsx("div",{className:"space-y-8",children:d.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden shadow-lg",children:[d.jsx("div",{className:"px-6 py-4 border-b border-slate-800 bg-slate-800/30",children:d.jsxs("h3",{className:"font-bold flex items-center gap-2 text-white",children:[d.jsx(Dl,{className:"text-orange-500",size:18}),"Kommande Event"]})}),d.jsx("div",{className:"p-2",children:c.map(u=>d.jsxs("div",{onClick:()=>n(u.page),className:"p-4 rounded-xl hover:bg-slate-800 transition-colors cursor-pointer group",children:[d.jsxs("div",{className:"flex items-start justify-between mb-2",children:[d.jsx("span",{className:"text-[10px] bg-orange-500/20 text-orange-400 px-2 py-0.5 rounded font-bold uppercase tracking-wider",children:u.type}),d.jsx("span",{className:"text-xs text-slate-500 font-medium",children:u.date})]}),d.jsx("h4",{className:"font-bold text-slate-100 group-hover:text-orange-400 transition-colors leading-snug",children:u.title}),d.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-slate-500",children:[d.jsx(dE,{size:12})," ",u.location]})]},u.id))}),d.jsx("div",{className:"p-4 bg-slate-800/50",children:d.jsx("button",{onClick:()=>e("experts"),className:"w-full bg-slate-700 hover:bg-slate-600 py-2 rounded-lg text-sm font-bold transition-colors",children:"Visa kalender"})})]})})]})]})},XPe=({onClose:t})=>{const[e,n]=J.useState(""),[r,i]=J.useState(""),a=s=>{s.preventDefault();const o=encodeURIComponent(`Frslag p ny diskussionstrd: ${e}`),c=encodeURIComponent(`Freslaget namn p trd: ${e}

Frklaring/Syfte med trden:
${r}`);window.location.href=`mailto:billy@klattertradet.se?subject=${o}&body=${c}`,t()};return d.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-[100] p-4",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-md animate-in fade-in duration-300",onClick:t}),d.jsxs("div",{className:"relative bg-slate-900/90 backdrop-blur-3xl border border-white/10 rounded-[2.5rem] p-8 md:p-10 w-full max-w-lg shadow-[0_20px_50px_rgba(0,0,0,0.5)] animate-in fade-in zoom-in-95 duration-500 overflow-hidden",children:[d.jsx("div",{className:"absolute -top-24 -right-24 w-48 h-48 bg-orange-500/10 rounded-full blur-3xl"}),d.jsxs("div",{className:"relative z-10",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-3 bg-orange-500/20 rounded-2xl text-orange-500",children:d.jsx(wa,{size:24})}),d.jsx("h2",{className:"text-2xl font-black text-white italic tracking-tight",children:"ppna ny trd"})]}),d.jsx("button",{onClick:t,className:"p-2 text-slate-500 hover:text-white hover:bg-white/10 rounded-xl transition-all",children:d.jsx(Bc,{size:24})})]}),d.jsxs("div",{className:"mb-8 space-y-2",children:[d.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Har du ett mne du vill diskutera med gemenskapen? Lmna ett frslag p en ny trd nedan."}),d.jsx("p",{className:"text-orange-500/80 text-xs font-bold italic",children:"Vi gr igenom alla frslag och terkopplar snabbt om trden lggs upp."})]}),d.jsxs("form",{onSubmit:a,className:"space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500 ml-1",children:"Trdens namn"}),d.jsx("input",{required:!0,type:"text",value:e,onChange:s=>n(s.target.value),placeholder:"T.ex. Hantering av stress i vardagen",className:"w-full bg-slate-950/50 border border-white/10 rounded-2xl px-5 py-4 text-white placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500/40 transition-all font-medium"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500 ml-1",children:"Frklaring / Syfte"}),d.jsx("textarea",{required:!0,value:r,onChange:s=>i(s.target.value),placeholder:"Bertta kort varfr denna trd behvs och vad syftet r...",rows:4,className:"w-full bg-slate-950/50 border border-white/10 rounded-2xl px-5 py-4 text-white placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500/40 transition-all font-medium resize-none"})]}),d.jsxs("button",{type:"submit",className:"w-full bg-orange-500 hover:bg-orange-400 text-slate-950 font-black py-5 rounded-2xl flex items-center justify-center gap-3 transition-all hover:scale-[1.02] active:scale-95 shadow-[0_10px_30px_rgba(249,115,22,0.3)] group",children:["Skicka in",d.jsx(zc,{size:20,className:"group-hover:translate-x-1 group-hover:-translate-y-1 transition-transform"})]})]})]})]})]})},YPe=({onClose:t})=>{const[e,n]=J.useState(""),[r,i]=J.useState(""),a=s=>{s.preventDefault();const o=encodeURIComponent("Inbjudan till Horizonten Gemenskap"),c=`Hej!

Jag r medlem i Horizonten och tror att det skulle vara ngot fr dig. Det r en plats fr personlig utveckling och gemenskap.

Kolla in det hr: https://klattertradet.se

${r?`
Meddelande frn mig:
${r}`:""}`,u=encodeURIComponent(c);window.location.href=`mailto:${e}?subject=${o}&body=${u}`,t()};return d.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-[100] p-4",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-md animate-in fade-in duration-300",onClick:t}),d.jsxs("div",{className:"relative bg-slate-900/90 backdrop-blur-3xl border border-white/10 rounded-[2.5rem] p-8 md:p-10 w-full max-w-lg shadow-[0_20px_50px_rgba(0,0,0,0.5)] animate-in fade-in zoom-in-95 duration-500 overflow-hidden",children:[d.jsx("div",{className:"absolute -top-24 -right-24 w-48 h-48 bg-indigo-500/10 rounded-full blur-3xl"}),d.jsxs("div",{className:"relative z-10",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-3 bg-indigo-500/20 rounded-2xl text-indigo-400",children:d.jsx(nP,{size:24})}),d.jsx("h2",{className:"text-2xl font-black text-white italic tracking-tight",children:"Bjud in en vn"})]}),d.jsx("button",{onClick:t,className:"p-2 text-slate-500 hover:text-white hover:bg-white/10 rounded-xl transition-all",children:d.jsx(Bc,{size:24})})]}),d.jsx("div",{className:"mb-8 space-y-2",children:d.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Knner du ngon som skulle uppskatta gemenskapen? Skicka en inbjudan direkt via mejl."})}),d.jsxs("form",{onSubmit:a,className:"space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500 ml-1",children:"Vnnens E-post"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{required:!0,type:"email",value:e,onChange:s=>n(s.target.value),placeholder:"namn@exempel.se",className:"w-full bg-slate-950/50 border border-white/10 rounded-2xl pl-12 pr-5 py-4 text-white placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500/40 transition-all font-medium"}),d.jsx(wv,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500",size:18})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500 ml-1",children:"Personligt meddelande (Frivilligt)"}),d.jsx("textarea",{value:r,onChange:s=>i(s.target.value),placeholder:"Skriv en personlig hlsning...",rows:3,className:"w-full bg-slate-950/50 border border-white/10 rounded-2xl px-5 py-4 text-white placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500/40 transition-all font-medium resize-none"})]}),d.jsxs("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-black py-5 rounded-2xl flex items-center justify-center gap-3 transition-all hover:scale-[1.02] active:scale-95 shadow-[0_10px_30px_rgba(79,70,229,0.3)] group",children:["Skicka inbjudan",d.jsx(zc,{size:20,className:"group-hover:translate-x-1 group-hover:-translate-y-1 transition-transform"})]})]})]})]})]})},JPe=({roomId:t,user:e,onEndCall:n})=>{const[r,i]=J.useState(!1),[a,s]=J.useState(!1),[o,c]=J.useState(!0),[u,h]=J.useState(!1),[m,v]=J.useState(null),x=J.useRef(null);J.useEffect(()=>{const E=setTimeout(async()=>{try{const N=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});v(N),c(!1)}catch(N){console.error("Error accessing camera:",N),c(!1)}},800);return()=>{clearTimeout(E)}},[]),J.useEffect(()=>(x.current&&m&&(x.current.srcObject=m),()=>{m&&m.getTracks().forEach(w=>w.stop())}),[m]);const _=()=>{m&&(m.getAudioTracks().forEach(w=>{w.enabled=!w.enabled}),i(!r))},T=()=>{m&&(m.getVideoTracks().forEach(w=>{w.enabled=!w.enabled}),s(!a))};return o?d.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center bg-slate-950/40 animate-pulse",children:[d.jsx("div",{className:"w-24 h-24 bg-orange-500/20 rounded-[2.5rem] flex items-center justify-center text-orange-400 mb-6 border border-orange-500/30",children:d.jsx(qH,{size:40,className:"animate-bounce"})}),d.jsx("h3",{className:"text-2xl font-black text-white italic tracking-tighter",children:"Ansluter till kameran..."}),d.jsx("p",{className:"text-slate-500 text-sm mt-2 uppercase tracking-widest font-bold",children:"Skrar anslutning"})]}):d.jsxs("div",{className:"flex-grow flex flex-col relative overflow-hidden bg-slate-950/20 h-full",children:[d.jsx("div",{className:"flex-grow relative p-4 md:p-8 flex items-center justify-center min-h-0",children:d.jsxs("div",{className:"relative w-full h-full max-w-5xl rounded-2xl md:rounded-[3rem] overflow-hidden shadow-[0_30px_100px_rgba(0,0,0,0.6)] border border-white/10 group bg-slate-900",children:[d.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-orange-500/10 rounded-full blur-[120px] pointer-events-none group-hover:bg-orange-500/20 transition-colors duration-1000"}),d.jsx("video",{ref:x,autoPlay:!0,playsInline:!0,muted:r,className:`w-full h-full object-cover transition-all duration-700 ${a?"opacity-0 scale-110 grayscale":"opacity-100 scale-100 grayscale-0"}`}),a&&d.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-slate-900/80 backdrop-blur-3xl animate-in fade-in duration-500",children:[d.jsx("div",{className:"w-20 h-20 md:w-32 md:h-32 bg-slate-800 rounded-full flex items-center justify-center text-slate-600 mb-4 border border-white/5 shadow-2xl",children:d.jsx(F2,{size:32,className:"md:w-12 md:h-12"})}),d.jsx("p",{className:"text-white font-black italic text-lg md:text-xl",children:"Kameran r avstngd"})]}),d.jsxs("div",{className:"absolute bottom-4 left-4 md:bottom-10 md:left-10 flex items-center gap-2 md:gap-3 px-4 py-2 md:px-6 md:py-3 bg-slate-950/60 backdrop-blur-xl border border-white/10 rounded-xl md:rounded-2xl shadow-2xl",children:[d.jsx("div",{className:"w-2 h-2 md:w-2.5 md:h-2.5 bg-green-500 rounded-full animate-pulse"}),d.jsx("span",{className:"text-[10px] md:text-sm font-black text-white uppercase tracking-widest whitespace-nowrap",children:"Du (Vrd)"})]}),d.jsx("div",{className:"absolute top-4 right-4 md:top-10 md:right-10 opacity-40 group-hover:opacity-100 transition-opacity",children:d.jsx("img",{src:"/assets/logo2.png",alt:"Horizonten",className:"w-8 h-8 md:w-12 md:h-12 object-contain grayscale brightness-200"})})]})}),d.jsxs("div",{className:"hidden",children:[[1,2].map(w=>d.jsxs("div",{className:"w-20 h-24 md:w-24 md:h-32 shrink-0 rounded-2xl md:rounded-3xl bg-slate-900/80 border border-white/10 overflow-hidden shadow-2xl hover:scale-105 transition-all cursor-pointer group relative",children:[d.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:d.jsx(Gi,{size:20,className:"text-slate-700 md:w-6 md:h-6 group-hover:text-orange-500/50 transition-colors"})}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-950/80 to-transparent"}),d.jsx("div",{className:"absolute bottom-2 inset-x-0 text-center",children:d.jsx("span",{className:"text-[8px] font-black text-white/60 uppercase tracking-tighter",children:"Vntar..."})})]},w)),d.jsxs("div",{className:"w-20 h-24 md:w-24 md:h-32 shrink-0 rounded-2xl md:rounded-3xl border-2 border-dashed border-white/10 flex flex-col items-center justify-center text-slate-600 hover:border-orange-500/50 hover:text-orange-500 transition-all cursor-pointer bg-white/5",children:[d.jsx(wa,{size:16,className:"md:w-5 md:h-5 mb-1"}),d.jsx("span",{className:"text-[8px] font-black uppercase",children:"Bjud in"})]})]}),d.jsx("div",{className:"px-4 pb-4 md:px-12 md:pb-12 pt-2 relative z-10 shrink-0",children:d.jsxs("div",{className:"max-w-4xl mx-auto bg-slate-900/60 backdrop-blur-3xl border border-white/10 rounded-2xl md:rounded-[2.5rem] p-2 md:p-4 flex items-center justify-between shadow-[0_20px_50px_rgba(0,0,0,0.5)]",children:[d.jsxs("div",{className:"hidden sm:flex items-center gap-4 px-2 md:px-6",children:[d.jsx("div",{className:"p-2 md:p-3 bg-orange-500/10 rounded-xl md:rounded-2xl text-orange-500",children:d.jsx(V2,{size:18,className:"md:w-5 md:h-5"})}),d.jsxs("div",{className:"hidden md:block",children:[d.jsxs("h4",{className:"text-[10px] md:text-xs font-black text-white uppercase tracking-widest leading-none mb-1",children:["Live: ",t]}),d.jsx("p",{className:"text-[8px] md:text-[10px] text-slate-500 font-bold uppercase tracking-tight",children:"HD  Krypterat"})]})]}),d.jsxs("div",{className:"flex flex-1 md:flex-initial justify-center items-center gap-2 md:gap-4 px-2",children:[d.jsx("button",{onClick:_,className:`w-10 h-10 md:w-14 md:h-14 rounded-xl md:rounded-2xl flex items-center justify-center transition-all ${r?"bg-red-500 text-white":"bg-white/5 text-slate-400 border border-white/10"}`,children:r?d.jsx(AY,{size:18,className:"md:w-6 md:h-6"}):d.jsx(kY,{size:18,className:"md:w-6 md:h-6"})}),d.jsx("button",{onClick:T,className:`w-10 h-10 md:w-14 md:h-14 rounded-xl md:rounded-2xl flex items-center justify-center transition-all ${a?"bg-red-500 text-white":"bg-white/5 text-slate-400 border border-white/10"}`,children:a?d.jsx(F2,{size:18,className:"md:w-6 md:h-6"}):d.jsx(V2,{size:18,className:"md:w-6 md:h-6"})}),d.jsx("button",{className:"hidden sm:flex w-10 h-10 md:w-14 md:h-14 rounded-xl md:rounded-2xl bg-white/5 text-slate-400 border border-white/10 items-center justify-center transition-all",children:d.jsx(EY,{size:18,className:"md:w-6 md:h-6"})}),d.jsx("div",{className:"w-[1px] h-6 md:h-8 bg-white/10 mx-1 md:mx-2 uppercase text-white"}),d.jsx("button",{onClick:()=>h(!u),className:`w-10 h-10 md:w-14 md:h-14 rounded-xl md:rounded-2xl flex items-center justify-center transition-all border ${u?"bg-white text-slate-900 border-white shadow-[0_0_20px_rgba(255,255,255,0.3)]":"bg-white/5 text-slate-400 border-white/10"}`,children:d.jsx(bO,{size:18,className:"md:w-5 md:h-5"})}),d.jsxs("button",{onClick:n,className:"px-4 md:px-8 h-10 md:h-14 bg-red-600 hover:bg-red-500 text-white rounded-xl md:rounded-2xl font-black uppercase tracking-widest text-[10px] md:text-xs flex items-center gap-2 md:gap-3 transition-all shadow-[0_10px_30px_rgba(220,38,38,0.3)] active:scale-95",children:[d.jsx(NY,{size:16,className:"md:w-5 md:h-5"}),d.jsx("span",{className:"hidden xs:inline",children:"Avsluta"}),d.jsx("span",{className:"xs:hidden",children:"Lmna"})]})]}),d.jsx("div",{className:"hidden sm:flex items-center gap-4 px-2 md:px-6"})]})}),d.jsx("div",{className:`absolute top-0 bottom-20 md:bottom-28 right-0 w-full sm:w-96 bg-slate-900/95 backdrop-blur-xl border-l border-white/10 z-20 transition-transform duration-300 ease-in-out ${u?"translate-x-0":"translate-x-full"}`,children:d.jsxs("div",{className:"h-full flex flex-col relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 inset-x-0 h-20 bg-gradient-to-b from-slate-900 to-transparent z-10 pointer-events-none"}),d.jsx(VD,{user:e,threadId:`video-${t}`,showHeader:!1})]})})]})},KA=async()=>{const{data:{user:t}}=await Tn.auth.getUser();if(!t)return null;const{data:e}=await Tn.from("profiles").select("*").eq("id",t.id).single();return e?{...e,email:t.email}:null};let Wy=[],Ky=null,lX=[];const ZPe=t=>{lX=t,Wy.forEach(e=>e(t))},cX=()=>lX,QPe=async t=>{const{data:e}=await Tn.from("notifications").select("id").eq("user_id",t).order("created_at",{ascending:!1});if(e&&e.length>10){const n=e.slice(10).map(r=>r.id);n.length>0&&await Tn.from("notifications").delete().in("id",n)}},e3e=async t=>{const e=await KA();if(!e)return;const{data:n,error:r}=await Tn.from("notifications").insert([{user_id:e.id,title:t.title,message:t.message,is_read:!1}]).select().single();return r||(await QPe(e.id),$b()),{data:n,error:r}},$b=async()=>{const t=await KA();if(!t)return[];const{data:e,error:n}=await Tn.from("notifications").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}).limit(10);return n?(console.error("Error fetching notifications:",n),[]):(ZPe(e||[]),e||[])},uX=t=>(Wy.push(t),$b(),Ky||t3e(),()=>{Wy=Wy.filter(e=>e!==t),Wy.length===0&&Ky&&(Ky.unsubscribe(),Ky=null)}),t3e=async()=>{const t=await KA();t&&(Ky=Tn.channel("public:notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${t.id}`},e=>{$b()}).subscribe())},dX=async()=>{const t=await KA();if(!t)return;const{error:e}=await Tn.from("notifications").delete().eq("user_id",t.id);e||$b()},n3e=Object.freeze(Object.defineProperty({__proto__:null,addNotification:e3e,clearNotifications:dX,fetchNotifications:$b,getNotifications:cX,subscribeToNotifications:uX},Symbol.toStringTag,{value:"Module"})),WS=[{id:"general",name:"Gemenskapen",icon:d.jsx(_Y,{size:18}),description:"Det ppna rummet fr alla medlemmar.",category:"public"},{id:"self-care",name:"Self-care tips",icon:d.jsx(Zo,{size:18}),description:"Dela med dig av dina bsta tips fr sjlvvrd.",category:"public"},{id:"video",name:"Videorummet",icon:d.jsx(qH,{size:18}),description:"Anslut med kamera och rst i realtid.",category:"public",hasVideo:!0},{id:"trygghet",name:"Trygga rummet",icon:d.jsx(uo,{size:18}),description:"En skyddad plats fr svrare samtal.",category:"private"},{id:"info",name:"Information",icon:d.jsx(uE,{size:18}),description:"Viktiga meddelanden frn administratrer.",category:"support"}],r3e=({user:t,initialThread:e,onOpenSettings:n,onLogout:r,onBackToSite:i})=>{const[a,s]=J.useState(e||"general"),[o,c]=J.useState("discussions"),[u,h]=J.useState(!0),[m,v]=J.useState(!1),[x,_]=J.useState(cX()),[T,w]=J.useState([]),[E,N]=J.useState(!1),[C,P]=J.useState(!1);J.useEffect(()=>{const O=uX(F=>{_(F)});return()=>O()},[]),J.useEffect(()=>{const O=Tn.channel("global_presence");return O.on("presence",{event:"sync"},()=>{const F=O.presenceState(),L=Object.values(F).flat(),z=Array.from(new Map(L.map(V=>[V.user_id,V])).values());w(z)}).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},F=>{}).subscribe(async F=>{F==="SUBSCRIBED"&&await O.track({user_id:t.id,full_name:t.full_name,avatar_url:Bu(t.email,t.avatar_url),role:t.role,online_at:new Date().toISOString()})}),()=>{Tn.removeChannel(O)}},[t.id,t.full_name,t.avatar_url,t.role,t.notifications_enabled]);const I=O=>!t.membership_level||t.membership_level<=2?!["general","video"].includes(O):!1,j=WS.find(O=>O.id===a)||WS[0];return d.jsxs("div",{className:"flex h-full bg-slate-950/80 backdrop-blur-3xl animate-in fade-in zoom-in-95 duration-700",children:[d.jsxs("div",{className:"hidden md:flex w-24 bg-slate-900/80 border-r border-white/5 flex-col items-center py-10 justify-between shrink-0 h-full",children:[d.jsxs("div",{className:"flex flex-col items-center gap-10 w-full",children:[d.jsxs("div",{className:"relative group cursor-pointer mb-4 overflow-hidden rounded-2.5rem p-0.5 bg-gradient-to-tr from-white/10 to-transparent",children:[d.jsx("div",{className:`w-14 h-14 rounded-2.5rem flex items-center justify-center text-xl font-black text-white shadow-2xl group-hover:scale-105 transition-transform duration-500 overflow-hidden ${Bu(t.email,t.avatar_url)?.includes("icon-512")?"bg-slate-950 p-2":"bg-gradient-to-br from-orange-400 to-red-600"}`,children:(()=>{const O=Bu(t.email,t.avatar_url);return O?d.jsx("img",{src:O,alt:t.full_name,className:`w-full h-full ${O.includes("icon-512")?"object-contain":"object-cover"}`}):t.full_name.charAt(0)})()}),d.jsx("div",{className:"absolute bottom-1 right-1 w-4 h-4 bg-green-500 border-4 border-slate-900 rounded-full shadow-lg z-10"}),d.jsx("div",{className:"absolute inset-0 bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"})]}),d.jsx("div",{className:"flex flex-col gap-6 w-full px-4",children:[{id:"discussions",icon:d.jsx(vx,{size:26}),label:"Chatt"},{id:"members",icon:d.jsx(Gi,{size:26}),label:"Medlemmar"},{id:"notifications",icon:d.jsx(gg,{size:26}),label:"Notiser",badge:x.length>0}].map(O=>d.jsxs("button",{onClick:()=>c(O.id),className:`
                                    relative p-4 rounded-3xl transition-all duration-500 flex items-center justify-center group
                                    ${o===O.id?"bg-orange-500 text-slate-950 shadow-[0_10px_30px_rgba(249,115,22,0.3)] scale-110":"text-slate-500 hover:text-white hover:bg-white/5"}
                                `,children:[O.icon,O.badge&&o!==O.id&&d.jsx("div",{className:"absolute top-3 right-3 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-slate-950 group-hover:scale-125 transition-transform"}),d.jsx("span",{className:"absolute left-full ml-4 px-3 py-1 bg-white text-slate-950 text-[10px] font-black uppercase rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none shadow-xl",children:O.label})]},O.id))})]}),d.jsx("div",{className:"flex flex-col items-center gap-6 w-full px-4",children:d.jsxs("button",{onClick:()=>h(!u),className:"p-4 rounded-3xl text-slate-500 hover:text-orange-400 hover:bg-orange-500/10 transition-all duration-300 group relative",children:[u?d.jsx(tP,{size:24}):d.jsx(a1,{size:24}),d.jsx("span",{className:"absolute left-full ml-4 px-3 py-1 bg-white text-slate-950 text-[10px] font-black uppercase rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none shadow-xl",children:u?"Ljust lge":"Mrkt lge"})]})})]}),d.jsxs("div",{className:`${C?"hidden lg:flex":"flex w-full"} lg:w-80 bg-slate-900/40 border-r border-white/5 flex-col shrink-0 h-full transition-all duration-300`,children:[o==="discussions"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"p-8 pb-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-8",children:[d.jsx("h2",{className:"text-3xl font-black text-white tracking-tighter",children:"Diskussioner"}),d.jsx("button",{onClick:()=>v(!0),className:"w-12 h-12 bg-orange-500 hover:bg-orange-400 text-slate-950 rounded-2xl flex items-center justify-center transition-all shadow-[0_10px_20px_rgba(249,115,22,0.2)] active:scale-95 group",children:d.jsx(eP,{size:24,className:"group-hover:rotate-90 transition-transform duration-500"})})]}),d.jsxs("div",{className:"relative group",children:[d.jsx(z2,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-600 group-focus-within:text-orange-500 transition-colors",size:18}),d.jsx("input",{type:"text",placeholder:"Sk i gemenskapen...",className:"w-full bg-slate-950/40 border border-white/10 rounded-[1.25rem] py-4 pl-12 pr-4 text-sm text-white placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500/40 transition-all font-medium"})]})]}),d.jsxs("div",{className:"flex-grow overflow-y-auto px-2 pb-24 md:pb-8 space-y-8 no-scrollbar scroll-smooth",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"px-4 flex items-center justify-between",children:[d.jsx("span",{className:"text-[11px] font-black uppercase tracking-[0.25em] text-slate-500",children:"Offentliga Rum"}),d.jsx("div",{className:"h-[1px] flex-grow ml-4 bg-gradient-to-r from-white/10 to-transparent"})]}),d.jsx("div",{className:"space-y-1",children:WS.filter(O=>O.category==="public").map(O=>{const F=I(O.id);return d.jsxs("button",{onClick:()=>{F||(s(O.id),P(!0))},disabled:F,className:`w-[calc(100%-1rem)] mx-2 flex items-center gap-4 px-4 py-5 rounded-[2rem] transition-all duration-500 group relative 
                                                ${a===O.id?"bg-white/10 shadow-2xl border border-white/5":F?"opacity-50 cursor-not-allowed":"text-slate-500 hover:bg-white/5 hover:text-white"}
                                            `,children:[d.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center transition-all duration-500 
                                                ${a===O.id?"bg-orange-500 text-slate-950 shadow-xl scale-110":F?"bg-slate-800/20 text-slate-600":"bg-slate-800/50 border border-white/5"}
                                            `,children:F?d.jsx(lp,{size:18}):O.icon}),d.jsxs("div",{className:"flex-grow text-left",children:[d.jsxs("div",{className:"flex justify-between items-center mb-1",children:[d.jsx("span",{className:`font-bold transition-colors ${a===O.id?"text-white":F?"text-slate-600":"group-hover:text-orange-400"}`,children:O.name}),!F&&d.jsx("span",{className:"text-[10px] font-medium opacity-40",children:"12:45"})]}),d.jsx("p",{className:"text-[11px] opacity-60 line-clamp-1 font-medium leading-relaxed",children:O.description})]}),a===O.id&&d.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1.5 h-8 bg-orange-500 rounded-r-full shadow-[0_0_15px_rgba(249,115,22,1)]"}),O.hasVideo&&!F&&d.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-1.5 px-3 py-1 bg-green-500/10 border border-green-500/20 rounded-full animate-pulse",children:[d.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),d.jsx("span",{className:"text-[8px] font-black text-green-500 uppercase tracking-widest",children:"Live"})]})]},O.id)})})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"px-4 flex items-center justify-between",children:[d.jsx("span",{className:"text-[11px] font-black uppercase tracking-[0.25em] text-slate-500",children:"Privata Grupper"}),d.jsx("div",{className:"h-[1px] flex-grow ml-4 bg-gradient-to-r from-white/10 to-transparent"})]}),d.jsx("div",{className:"space-y-1",children:WS.filter(O=>O.category==="private"||O.category==="support").map(O=>{const F=I(O.id);return d.jsxs("button",{onClick:()=>{F||(s(O.id),P(!0))},disabled:F,className:`w-[calc(100%-1rem)] mx-2 flex items-center gap-4 px-4 py-5 rounded-[2rem] transition-all duration-500 group relative 
                                                    ${a===O.id?"bg-white/10 shadow-2xl border border-white/5":F?"opacity-50 cursor-not-allowed":"text-slate-500 hover:bg-white/5 hover:text-white"}
                                                `,children:[d.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center transition-all duration-500 
                                                    ${a===O.id?"bg-orange-500 text-slate-950 shadow-xl scale-110":F?"bg-slate-800/20 text-slate-600":"bg-slate-800/50 border border-white/5"}
                                                `,children:F?d.jsx(lp,{size:18}):O.icon}),d.jsxs("div",{className:"flex-grow text-left",children:[d.jsxs("div",{className:"flex justify-between items-center mb-1",children:[d.jsx("span",{className:`font-bold transition-colors ${a===O.id?"text-white":F?"text-slate-600":"group-hover:text-orange-400"}`,children:O.name}),!F&&d.jsx("span",{className:"text-[10px] font-medium opacity-40",children:"I gr"})]}),d.jsx("p",{className:"text-[11px] opacity-60 line-clamp-1 font-medium leading-relaxed",children:O.description})]}),a===O.id&&d.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1.5 h-8 bg-orange-500 rounded-r-full shadow-[0_0_15px_rgba(249,115,22,1)]"})]},O.id)})})]})]})]}),o==="members"&&d.jsxs("div",{className:"p-8 animate-in fade-in slide-in-from-left-4 duration-500 h-full flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between mb-8",children:[d.jsx("h2",{className:"text-3xl font-black text-white tracking-tighter",children:"Medlemmar"}),d.jsx("button",{className:"w-12 h-12 bg-white/5 hover:bg-white/10 text-white rounded-2xl flex items-center justify-center transition-all border border-white/10 active:scale-95",children:d.jsx(nP,{size:22})})]}),d.jsxs("div",{className:"space-y-2 overflow-y-auto no-scrollbar pb-24 md:pb-8",children:[T.map(O=>d.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-[2rem] hover:bg-white/5 transition-all cursor-pointer group border border-transparent hover:border-white/5",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center text-xl bg-gradient-to-br from-indigo-500 to-purple-500 text-white shadow-xl transition-transform group-hover:scale-105 duration-500",children:O.avatar_url?d.jsx("img",{src:O.avatar_url,alt:O.full_name,className:"w-full h-full object-cover rounded-2xl"}):d.jsx("span",{className:"font-bold",children:O.full_name?.charAt(0)||"?"})}),d.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-4 border-slate-900 rounded-full shadow-lg"})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-bold text-white group-hover:text-orange-400 transition-colors",children:O.full_name||"Anonym"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[10px] text-zinc-500 font-black uppercase tracking-widest",children:O.role||"Medlem"}),d.jsx("span",{className:"w-1 h-1 bg-zinc-700 rounded-full"}),d.jsx("span",{className:"text-[10px] text-green-500/60 font-bold uppercase",children:"Online"})]})]})]},O.user_id)),T.length===0&&d.jsx("div",{className:"text-center py-10 text-slate-500 italic",children:"Laddar medlemmar..."})]}),d.jsx("div",{className:"mt-auto py-6 border-t border-white/5",children:d.jsxs("button",{onClick:()=>N(!0),className:"w-full py-4 bg-orange-500 text-slate-950 rounded-2xl font-black uppercase tracking-widest text-[10px] flex items-center justify-center gap-3 transition-all hover:shadow-[0_10px_30px_rgba(249,115,22,0.2)] active:scale-95",children:[d.jsx(nP,{size:16})," Bjud in vn"]})})]}),E&&d.jsx(YPe,{onClose:()=>N(!1)}),o==="notifications"&&d.jsxs("div",{className:"p-8 animate-in fade-in slide-in-from-left-4 duration-500 h-full flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between mb-8",children:[d.jsx("h2",{className:"text-3xl font-black text-white tracking-tighter",children:"Notiser"}),d.jsx("button",{onClick:dX,className:"text-zinc-500 hover:text-white transition-colors text-[10px] font-black uppercase tracking-widest",children:"Rensa alla"})]}),d.jsx("div",{className:"space-y-4 overflow-y-auto no-scrollbar pb-24 md:pb-10",children:x.length===0?d.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center space-y-4",children:[d.jsx("div",{className:"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center text-slate-700",children:d.jsx(gg,{size:32})}),d.jsx("p",{className:"text-slate-500 font-medium italic",children:"Inga nya notiser"})]}):x.map((O,F)=>d.jsxs("div",{className:"flex gap-4 p-5 rounded-[2rem] bg-white/5 border border-white/5 hover:border-white/10 transition-all cursor-pointer group",children:[d.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center shrink-0 bg-orange-500/10 text-orange-400 border border-orange-500/20",children:d.jsx(gg,{size:14})}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("h4",{className:"font-bold text-white text-sm group-hover:text-orange-400 transition-colors",children:O.title}),d.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed",children:O.message}),d.jsx("p",{className:"text-[10px] text-zinc-600 font-bold uppercase pt-1",children:new Date(O.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},O.id))})]}),o==="settings"&&d.jsxs("div",{className:"p-8 animate-in fade-in slide-in-from-left-4 duration-500 h-full flex flex-col",children:[d.jsx("h2",{className:"text-3xl font-black text-white tracking-tighter mb-8",children:"Instllningar"}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"p-6 bg-white/5 border border-white/5 rounded-3xl space-y-4",children:[d.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-zinc-500 mb-2",children:"Profil"}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-orange-400 to-red-600 flex items-center justify-center text-white font-bold",children:t.full_name.charAt(0)}),d.jsxs("div",{children:[d.jsx("p",{className:"font-bold text-white",children:t.full_name}),d.jsx("p",{className:"text-[10px] text-zinc-600",children:t.email})]})]}),d.jsx("button",{onClick:n,className:"w-full py-3 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-xs font-bold text-white transition-all",children:"Redigera profil"})]}),d.jsx("div",{className:"space-y-2",children:[{icon:d.jsx(gg,{size:18}),label:"Notifikationer"},{icon:d.jsx(uo,{size:18}),label:"Privatliv"},{icon:d.jsx(a1,{size:18}),label:"Utseende"},{icon:d.jsx(Zo,{size:18}),label:"Visa std"}].map((O,F)=>d.jsxs("button",{className:"w-full flex items-center justify-between p-4 rounded-2xl hover:bg-white/5 text-zinc-400 hover:text-white transition-all group",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("span",{className:"opacity-50 group-hover:opacity-100 group-hover:text-orange-400 transition-all",children:O.icon}),d.jsx("span",{className:"font-bold text-sm tracking-tight",children:O.label})]}),d.jsx(op,{size:14,className:"opacity-0 group-hover:opacity-100 group-hover:translate-x-1 transition-all"})]},F))})]}),d.jsx("div",{className:"mt-auto pt-8 border-t border-white/5",children:d.jsxs("button",{onClick:r,className:"w-full flex items-center gap-3 p-4 text-red-500 hover:bg-red-500/10 rounded-2xl transition-all group",children:[d.jsx(RY,{size:20,className:"group-hover:rotate-12 transition-transform"}),d.jsx("span",{className:"font-black uppercase tracking-widest text-[10px]",children:"Logga ut"})]})})]})]}),d.jsxs("div",{className:`${C?"flex":"hidden lg:flex"} flex-1 flex-col bg-slate-950/20 min-w-0 max-w-full overflow-hidden relative`,children:[d.jsxs("div",{className:"px-4 md:px-12 py-4 md:py-8 border-b border-white/5 flex items-center justify-between bg-slate-900/60 backdrop-blur-3xl relative z-20 shrink-0",children:[d.jsxs("div",{className:"flex items-center gap-3 md:gap-8",children:[d.jsx("button",{onClick:()=>P(!1),className:"md:hidden w-10 h-10 flex items-center justify-center rounded-xl bg-white/5 text-slate-400 hover:text-white",children:d.jsx(px,{size:24})}),d.jsxs("div",{className:"relative",children:[d.jsxs("div",{className:"w-20 h-20 bg-gradient-to-br from-slate-800 to-slate-900 rounded-[2.5rem] flex items-center justify-center text-orange-400 border border-white/10 shadow-2xl relative group cursor-pointer overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-orange-500/10 opacity-0 group-hover:opacity-100 transition-opacity"}),d.jsx("div",{className:"scale-125 transition-transform duration-500 group-hover:scale-110",children:j.icon})]}),d.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-4 border-slate-950 shadow-lg"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[d.jsx("h3",{className:"text-3xl font-black text-white tracking-tighter decoration-orange-500/30 decoration-4",children:j.name}),d.jsx("div",{className:"px-3 py-1 bg-orange-500/10 border border-orange-500/20 rounded-full",children:d.jsx("span",{className:"text-[10px] font-black text-orange-500 uppercase tracking-widest",children:"Aktiv"})})]}),d.jsxs("div",{className:"flex items-center gap-2 md:gap-4 text-xs font-semibold text-slate-500",children:[d.jsxs("span",{className:"flex items-center gap-2 hover:text-white transition-colors cursor-pointer",children:[d.jsx(Gi,{size:14,className:"text-orange-500"})," ",d.jsx("span",{className:"hidden sm:inline",children:"24 medlemmar online"}),d.jsx("span",{className:"sm:hidden",children:"24"})]}),d.jsx("span",{className:"w-1.5 h-1.5 bg-slate-800 rounded-full"}),d.jsxs("span",{className:"italic opacity-80 font-medium line-clamp-1 max-w-[150px] md:max-w-none",children:['"',j.description,'"']})]})]})]}),d.jsxs("div",{className:"flex items-center gap-10",children:[d.jsxs("div",{className:"hidden xl:flex -space-x-4 items-center",children:[Go.slice(0,4).map(O=>d.jsxs("div",{className:`w-12 h-12 rounded-[1.25rem] border-4 border-slate-950 flex items-center justify-center text-lg ${O.color} text-white shadow-2xl hover:translate-y-[-6px] transition-all cursor-pointer relative group`,title:O.name,children:[O.avatar,d.jsx("div",{className:"absolute inset-0 bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity rounded-[1.25rem]"})]},O.id)),d.jsx("div",{className:"w-12 h-12 rounded-[1.25rem] border-4 border-slate-950 bg-slate-800 flex items-center justify-center text-xs font-black text-slate-400 shadow-2xl hover:bg-slate-700 transition-colors cursor-pointer",children:"+12"})]}),d.jsx("div",{className:"flex items-center gap-3",children:[{icon:d.jsx(z2,{size:22}),label:"Sk"},{icon:d.jsx(yx,{size:22}),label:"Favorit"},{icon:d.jsx(uE,{size:22}),label:"Info"},{icon:d.jsx(vY,{size:22}),label:"Mer"}].map((O,F)=>d.jsx("button",{className:"p-4 bg-white/5 hover:bg-orange-500/10 hover:text-orange-400 border border-white/5 rounded-2xl transition-all shadow-xl group active:scale-95",title:O.label,children:O.icon},F))})]})]}),d.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col min-h-0",children:[j.hasVideo?d.jsx(JPe,{roomId:j.name,user:t,onEndCall:()=>s("general")}):d.jsx(VD,{user:t,threadId:j.id,showHeader:!1}),!j.hasVideo&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"absolute top-0 inset-x-0 h-8 bg-gradient-to-b from-slate-950/40 to-transparent pointer-events-none"}),d.jsx("div",{className:"absolute bottom-0 inset-x-0 h-8 bg-gradient-to-t from-slate-950/40 to-transparent pointer-events-none"})]})]})]}),m&&d.jsx(XPe,{onClose:()=>v(!1)}),!C&&d.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-slate-950/80 backdrop-blur-xl border-t border-white/5 pb-safe pt-2 px-6 flex justify-between items-center z-50 shadow-[0_-10px_40px_rgba(0,0,0,0.5)]",children:[{id:"chat",label:"Chatt",icon:vx,action:()=>P(!0)},{id:"rooms",label:"Rum",icon:r1,action:()=>{P(!1),c("discussions")}},{id:"members",label:"Medlemmar",icon:Gi,action:()=>{P(!1),c("members")}},{id:"notifications",label:"Notiser",icon:gg,action:()=>{P(!1),c("notifications")},badge:x.length}].map(O=>{const F=O.id==="chat"?C:!C&&o===(O.id==="rooms"?"discussions":O.id);return d.jsxs("button",{onClick:O.action,className:`flex flex-col items-center gap-1 p-2 rounded-2xl transition-all duration-300 relative group ${F?"text-orange-400":"text-slate-500"}`,children:[d.jsx("div",{className:`
                                p-2 rounded-2xl transition-all duration-300
                                ${F?"bg-orange-500/10 scale-100":"group-active:scale-95"}
                            `,children:d.jsx(O.icon,{size:24,className:F?"fill-orange-500/20":""})}),d.jsx("span",{className:`text-[10px] font-bold tracking-wide transition-opacity duration-300 ${F?"opacity-100":"opacity-60"}`,children:O.label}),F&&d.jsx("div",{className:"absolute top-1 w-1 h-1 bg-orange-400 rounded-full shadow-[0_0_10px_rgba(249,115,22,1)]"}),O.badge?d.jsx("div",{className:"absolute top-2 right-2 w-3.5 h-3.5 bg-red-500 rounded-full text-[9px] flex items-center justify-center text-white font-bold border border-slate-950",children:O.badge}):null]},O.id)})})]})},i3e=()=>d.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12 space-y-16 animate-in fade-in slide-in-from-bottom-8 duration-1000",children:[d.jsxs("div",{className:"text-center space-y-6",children:[d.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-orange-500/10 rounded-full border border-orange-500/20 mb-4",children:d.jsx(Zo,{className:"text-orange-500 animate-pulse",size:32})}),d.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white tracking-tighter leading-tight",children:["Vlkommen hem till ",d.jsx("br",{}),d.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-orange-400 via-amber-200 to-white",children:"Horizonten Gemenskap"})]}),d.jsx("p",{className:"text-xl md:text-2xl text-slate-300 font-medium italic",children:"Vad fint att du hittat hit."})]}),d.jsxs("div",{className:"glass bg-slate-900/50 backdrop-blur-2xl border border-white/10 rounded-[2.5rem] p-8 md:p-12 shadow-2xl relative overflow-hidden group",children:[d.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-orange-500/5 rounded-full blur-[80px] -mr-32 -mt-32 group-hover:bg-orange-500/10 transition-colors duration-700"}),d.jsxs("div",{className:"relative z-10 space-y-8 text-slate-300 leading-relaxed text-lg font-light",children:[d.jsxs("p",{children:["Du har just klivit in i ett digitalt rum som r byggt med en enda avsikt: ",d.jsx("span",{className:"text-white font-semibold",children:"Att minska avstndet mellan mnniskor"}),". Vi vet, utifrn bde erfarenhet och neurobiologi, att ensamhet r farligt fr oss, medan kontakt r frutsttningen fr all lkning och utveckling."]}),d.jsxs("p",{children:["Horizonten Gemenskap r hjrtat i samarbetet mellan ",d.jsx("span",{className:"text-orange-400 font-bold",children:"Klttertrdet, Socialkraft och Twisted-stacks"}),". Vi har gtt samman fr att vi delar en vision: Psykisk hlsa och mnskligt std ska vara tillgngligt fr alla. Det ska inte vara krngligt, det ska inte kosta en frmgenhet, och du ska inte behva vnta i en telefonk fr att knna att ngon lyssnar."]})]})]}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[d.jsxs("div",{className:"space-y-6",children:[d.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[d.jsx(Gi,{className:"text-orange-500",size:28}),"Vad r det hr fr plats?"]}),d.jsx("p",{className:"text-slate-400 leading-relaxed",children:"Det hr r din digitala flock. Hr mts vi  oavsett om du r hr fr att du kmpar med myndighetsstress, bearbetar trauma, r nyfiken p din egen utveckling eller arbetar professionellt med mnniskor."}),d.jsxs("p",{className:"text-slate-400 leading-relaxed",children:["Hr var vi p ",d.jsx("span",{className:"text-white font-medium",children:"Self-care tillsammans"}),". Inte som ett prestationskrav, utan som ett stt att vara snlla mot vra nervsystem."]})]}),d.jsxs("div",{className:"bg-gradient-to-br from-orange-500/20 to-transparent p-8 rounded-[2rem] border border-orange-500/20",children:[d.jsx("h3",{className:"text-orange-400 font-black uppercase tracking-widest text-xs mb-6",children:"Tre pelare"}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex gap-4",children:[d.jsx("div",{className:"shrink-0 w-10 h-10 bg-white/5 rounded-xl flex items-center justify-center text-white font-bold",children:"1"}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-white font-bold mb-1 text-sm",children:"Tillgnglighet"}),d.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:"Stdet finns i fickan. Dygnet runt. Du behver inte prestera hr, du kan bara vara."})]})]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx("div",{className:"shrink-0 w-10 h-10 bg-white/5 rounded-xl flex items-center justify-center text-white font-bold",children:"2"}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-white font-bold mb-1 text-sm",children:"Gratis std"}),d.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:"Vi tror p kraften i att dela erfarenheter. I de ppna forumen hjlps vi t, stttar och speglar varandra."})]})]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx("div",{className:"shrink-0 w-10 h-10 bg-white/5 rounded-xl flex items-center justify-center text-white font-bold",children:"3"}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-white font-bold mb-1 text-sm",children:"Kontakt"}),d.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:'Lkning sker "bottom up"  frn kroppen, via knslan och in i relationen. Hr fr du utrymme att dela din berttelse.'})]})]})]})]})]}),d.jsxs("div",{className:"glass bg-white/5 border border-white/10 p-10 rounded-[3rem] text-center space-y-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-white",children:"Till dig som r ny"}),d.jsxs("p",{className:"text-slate-400 max-w-2xl mx-auto leading-relaxed",children:['Knn in rummet. Du behver inte skriva ngot direkt om du inte vill. Det r okej att bara "vara med" och observera. Det kallas att ',d.jsx("span",{className:"text-orange-400",children:"samreglera"}),", och det r frsta steget till trygghet."]}),d.jsx("p",{className:"text-slate-400 max-w-2xl mx-auto leading-relaxed",children:"Nr du knner dig redo  skriv grna en rad i presentationstrden. Vi vill grna veta vem du r, men p dina villkor."}),d.jsx("div",{className:"pt-6",children:d.jsx("p",{className:"text-xl font-bold text-white italic",children:"Varmt vlkommen"})})]}),d.jsx("div",{className:"h-20"})]}),KS=({onBackToSite:t,onSettingsClick:e})=>d.jsx("footer",{className:"border-t border-white/10 bg-black/40 backdrop-blur-xl py-8 mt-auto",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center justify-between gap-4 text-xs text-slate-500 uppercase tracking-wider font-medium",children:[d.jsx("div",{children:" Horizonten gemenskap"}),d.jsxs("div",{className:"flex flex-wrap justify-center gap-6",children:[d.jsx("button",{onClick:e,className:"hover:text-orange-400 transition-colors",children:"Kontoinstllningar"}),d.jsx("button",{onClick:()=>t(Te.TERMS),className:"hover:text-orange-400 transition-colors",children:"Medlemsvillkor"}),d.jsx("button",{onClick:()=>t(Te.PRIVACY),className:"hover:text-orange-400 transition-colors",children:"Integritets- & Sekretesspolicy"}),d.jsx("button",{onClick:()=>t(Te.COOKIE_POLICY),className:"hover:text-orange-400 transition-colors",children:"Cookie-instllningar"}),d.jsx("button",{onClick:()=>t(Te.CONTACT),className:"hover:text-orange-400 transition-colors",children:"Kontakt"})]})]})}),a3e=({user:t,onBack:e})=>{const[n,r]=J.useState("overview");return t.role!=="admin"?d.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:d.jsxs("div",{className:"text-center space-y-4",children:[d.jsx(uo,{className:"w-16 h-16 text-red-500 mx-auto animate-pulse"}),d.jsx("h2",{className:"text-2xl font-bold text-white",children:"tkomst nekad"}),d.jsx("p",{className:"text-slate-400",children:"Du har inte behrighet att se denna sida."}),d.jsx("button",{onClick:e,className:"px-6 py-2 bg-orange-500 rounded-xl font-bold text-slate-950",children:"G tillbaka"})]})}):d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8 animate-in fade-in duration-700",children:[d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 bg-slate-900/40 backdrop-blur-xl border border-white/5 p-8 rounded-[2.5rem] shadow-2xl relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-orange-500/10 rounded-full blur-3xl -mr-32 -mt-32"}),d.jsxs("div",{className:"relative z-10 flex items-center gap-6",children:[d.jsx("div",{className:"w-16 h-16 bg-orange-500 rounded-2xl flex items-center justify-center shadow-lg shadow-orange-500/20",children:d.jsx(uo,{size:32,className:"text-slate-950"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-3xl font-black text-white tracking-tight",children:"Admin Dashboard"}),d.jsxs("p",{className:"text-orange-500 font-bold tracking-widest uppercase text-xs flex items-center gap-2 mt-1",children:[d.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full animate-ping"})," Sker anslutning upprttad"]})]})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsxs("button",{onClick:()=>r("blog"),className:"px-5 py-2.5 bg-white/5 hover:bg-white/10 rounded-xl text-slate-300 font-bold transition-all border border-white/10 flex items-center gap-2",children:[d.jsx(YH,{size:18})," Blogg"]}),d.jsxs("button",{onClick:()=>r("threads"),className:"px-5 py-2.5 bg-white/5 hover:bg-white/10 rounded-xl text-slate-300 font-bold transition-all border border-white/10 flex items-center gap-2",children:[d.jsx(eP,{size:18})," Ny trd"]})]})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{label:"Aktiva medlemmar",value:"142",icon:Gi,color:"text-blue-400"},{label:"Nya trdar (7 dagar)",value:"12",icon:bO,color:"text-orange-400"},{label:"Olsta rapporter",value:"3",icon:uo,color:"text-red-400"},{label:"Blogginlgg",value:"28",icon:r1,color:"text-green-400"}].map((i,a)=>d.jsxs("div",{className:"bg-slate-900/40 backdrop-blur-xl border border-white/5 p-6 rounded-3xl hover:border-white/10 transition-all cursor-pointer group",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("div",{className:`p-2 rounded-lg bg-white/5 ${i.color} group-hover:scale-110 transition-transform`,children:d.jsx(i.icon,{size:20})}),d.jsx("span",{className:"text-2xl font-black text-white",children:i.value})]}),d.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:i.label})]},a))}),d.jsxs("div",{className:"bg-slate-900/40 backdrop-blur-xl border border-white/5 rounded-[2.5rem] p-8",children:[n==="overview"&&d.jsxs("div",{className:"space-y-6",children:[d.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Senaste aktivitet"}),d.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map((i,a)=>d.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/5 hover:bg-white/10 transition-all cursor-pointer",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center font-bold text-slate-400",children:String.fromCharCode(65+a)}),d.jsxs("div",{children:[d.jsxs("p",{className:"text-sm font-bold text-white",children:["Anvndare ",a+1," skrev i #allmnt"]}),d.jsx("p",{className:"text-xs text-slate-500",children:"2 minuter sedan"})]})]}),d.jsx("button",{className:"p-2 hover:bg-white/10 rounded-lg text-slate-400 transition-colors",children:d.jsx(JH,{size:16})})]},a))})]}),n!=="overview"&&d.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center space-y-6",children:[d.jsx("div",{className:"w-20 h-20 bg-orange-500/10 rounded-3xl flex items-center justify-center animate-pulse",children:d.jsx(eP,{size:40,className:"text-orange-500"})}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("h3",{className:"text-2xl font-bold text-white",children:["Hantering av ",n]}),d.jsxs("p",{className:"text-slate-400 max-w-md mx-auto",children:["Hr kommer du kunna skapa, redigera och ta bort ",n==="blog"?"blogginlgg":n==="threads"?"trdar":"innehll",". Denna funktion byggs ut i nsta steg."]})]}),d.jsxs("button",{onClick:()=>r("overview"),className:"px-8 py-3 bg-white/5 hover:bg-white/10 border border-white/10 rounded-2xl text-white font-bold transition-all flex items-center gap-2",children:[d.jsx(Jo,{size:18})," Tillbaka till verblick"]})]})]})]})},s3e=({user:t,onClose:e,onUpdate:n})=>{const[r,i]=J.useState(t.full_name||""),[a,s]=J.useState(t.notifications_enabled??!0),[o,c]=J.useState(!1),[u,h]=J.useState(null),[m,v]=J.useState(localStorage.getItem("gemini_api_key")||""),[x,_]=J.useState(localStorage.getItem("vertex_project_id")||""),T=async E=>{if(s(E),E&&Notification.permission!=="granted")try{await Notification.requestPermission()!=="granted"&&h("Notiser avvisades av anvndaren.")}catch{h("Kunde inte begra notistillstnd.")}},w=async()=>{c(!0),h(null);try{const{error:E}=await Tn.auth.updateUser({data:{full_name:r,notifications_enabled:a}});if(E)throw E;const{error:N}=await Tn.from("profiles").update({full_name:r,notifications_enabled:a}).eq("id",t.id);if(N)throw N;const C={...t,full_name:r,notifications_enabled:a};m?localStorage.setItem("gemini_api_key",m):localStorage.removeItem("gemini_api_key"),x?localStorage.setItem("vertex_project_id",x):localStorage.removeItem("vertex_project_id"),n(C),e()}catch(E){h(E.message??"Ett fel intrffade vid sparning.")}finally{c(!1)}};return d.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[d.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-xl",onClick:e}),d.jsxs("div",{className:"relative bg-white/10 backdrop-blur-2xl border border-white/20 rounded-2xl p-6 w-full max-w-md shadow-xl",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h2",{className:"text-xl font-semibold text-white",children:"Instllningar"}),d.jsx("button",{onClick:e,className:"text-white hover:text-gray-300",children:d.jsx(Bc,{size:20})})]}),u&&d.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-200 p-2 rounded mb-4",children:u}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-1",children:"Visningsnamn"}),d.jsx("input",{type:"text",value:r,onChange:E=>i(E.target.value),className:"w-full bg-white/5 border border-white/20 rounded px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500/50"})]}),d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("span",{className:"text-sm font-medium text-gray-200",children:"Notiser p"}),d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:a,onChange:E=>T(E.target.checked),className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-white/20 border border-white/30 rounded-full peer peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-orange-500 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-500/80 peer-checked:border-orange-500 peer-checked:after:bg-white"})]})]}),d.jsxs("div",{className:"border-t border-white/10 my-4 pt-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"Admin / API Konfiguration"}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Gemini API Key"}),d.jsx("input",{type:"password",placeholder:"klistra in nyckel...",value:m,onChange:E=>v(E.target.value),className:"w-full bg-white/5 border border-white/20 rounded px-3 py-2 text-xs text-white placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-orange-500/50"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Google Cloud Vertex Project ID"}),d.jsx("input",{type:"text",placeholder:"t.ex. my-project-id",value:x,onChange:E=>_(E.target.value),className:"w-full bg-white/5 border border-white/20 rounded px-3 py-2 text-xs text-white placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-orange-500/50"})]})]})]}),d.jsx("button",{onClick:w,disabled:o,className:"w-full bg-orange-500 hover:bg-orange-400 text-white font-bold py-2 rounded disabled:opacity-50",children:o?"Sparar...":"Spara"})]})]})},o3e=()=>{const[t,e]=J.useState(null),[n,r]=J.useState(!1),[i,a]=J.useState(!1),[s,o]=J.useState(!1);J.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0){o(!0),r(!1);return}const h=x=>{x.preventDefault(),e(x),r(!0)},m=()=>{o(!0),r(!1),e(null)};window.addEventListener("beforeinstallprompt",h),window.addEventListener("appinstalled",m);const v=setTimeout(()=>r(!0),1500);return()=>{window.removeEventListener("beforeinstallprompt",h),window.removeEventListener("appinstalled",m),clearTimeout(v)}},[]);const c=async()=>{if(t){t.prompt();const{outcome:u}=await t.userChoice;u==="accepted"&&(e(null),r(!1))}else a(!0)};return!n||s?null:d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:c,className:"fixed bottom-6 right-6 z-50 group animate-in fade-in slide-in-from-bottom-5 duration-700","aria-label":"Installera Horizonten-appen",children:d.jsxs("div",{className:"relative overflow-hidden bg-white/10 backdrop-blur-xl border border-white/20 shadow-[0_8px_32px_rgba(31,38,135,0.37)] rounded-2xl p-4 transition-all duration-300 group-hover:bg-white/15 group-hover:scale-105 group-hover:shadow-[0_8px_32px_rgba(249,115,22,0.2)]",children:[d.jsx("div",{className:"absolute top-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-white/50 to-transparent opacity-50"}),d.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-orange-500/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"bg-gradient-to-br from-orange-400 to-red-500 rounded-lg p-2 shadow-inner text-white",children:d.jsx(fE,{size:20,className:"drop-shadow-sm"})}),d.jsxs("div",{className:"text-left",children:[d.jsx("span",{className:"block text-[10px] font-bold text-white/60 uppercase tracking-widest",children:"Premium"}),d.jsx("span",{className:"block text-sm font-bold text-white leading-none group-hover:text-orange-200 transition-colors",children:"Installera App"})]})]}),d.jsx("div",{className:"absolute -top-10 -right-10 w-20 h-20 bg-orange-500/20 rounded-full blur-2xl group-hover:bg-orange-500/30 transition-all duration-500"})]})}),d.jsx(I7,{isOpen:i,onClose:()=>a(!1)})]})},l3e=({user:t,onClose:e})=>{const[n,r]=J.useState([{role:"model",text:`Hej ${t?.full_name?.split(" ")[0]||""}! Jag r din personliga assistent. Jag kan hjlpa dig att navigera plattformen, ge tips om vningar eller bara prata en stund. Vad har du p hjrtat?`,timestamp:new Date}]),[i,a]=J.useState(""),[s,o]=J.useState(!1),c=J.useRef(null);J.useEffect(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[n,s]);const u=async()=>{if(!i.trim())return;const h={role:"user",text:i,timestamp:new Date};r(m=>[...m,h]),a(""),o(!0);try{const m=n.map(x=>({role:x.role,text:x.text})),v=await oX(m,h.text,"Du r en hjlpsam och empatisk AI-assistent fr communityt 'Horizonten' och 'Klttertrdet'. Din roll r att sttta anvndaren i deras personliga utveckling, hjlpa till med funktioner i appen, och vara ett bollplank. Var koncis, varm och tydlig. Anvndare sker ofta std fr stress, ngest eller personlig utveckling.");r(v?x=>[...x,{role:"model",text:v,timestamp:new Date}]:x=>[...x,{role:"model",text:"Jag har lite svrt att ansluta just nu. Frsk igen om en stund.",timestamp:new Date}])}catch(m){console.error(m)}finally{o(!1)}};return d.jsxs("div",{className:"flex flex-col h-full bg-slate-900 text-white overflow-hidden rounded-3xl shadow-2xl border border-white/10",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-800/50 backdrop-blur-md border-b border-white/5",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg shadow-purple-500/20",children:d.jsx(wa,{size:20,className:"text-white animate-pulse"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-bold text-white",children:"Assistenten"}),d.jsx("p",{className:"text-xs text-indigo-300 font-medium",children:"Alltid hr fr dig"})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>r([n[0]]),className:"p-2 hover:bg-white/5 rounded-lg text-slate-400 hover:text-white transition-colors",title:"Rensa chatt",children:d.jsx(PY,{size:18})}),d.jsx("button",{onClick:e,className:"p-2 hover:bg-white/5 rounded-lg text-slate-400 hover:text-white transition-colors",children:d.jsx(Bc,{size:20})})]})]}),d.jsxs("div",{ref:c,className:"flex-1 overflow-y-auto p-4 space-y-6 bg-slate-900/50",children:[n.map((h,m)=>{const v=h.role==="user";return d.jsx("div",{className:`flex ${v?"justify-end":"justify-start"} animate-in fade-in slide-in-from-bottom-2`,children:d.jsx("div",{className:`
                                max-w-[85%] p-4 rounded-2xl text-sm leading-relaxed
                                ${v?"bg-indigo-600 text-white rounded-tr-none shadow-lg shadow-indigo-500/10":"bg-slate-800 text-slate-200 rounded-tl-none border border-white/5"}
                            `,children:h.text})},m)}),s&&d.jsx("div",{className:"flex justify-start animate-in fade-in",children:d.jsxs("div",{className:"bg-slate-800 rounded-2xl rounded-tl-none p-4 flex gap-1 items-center",children:[d.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce"}),d.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce delay-100"}),d.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-bounce delay-200"})]})})]}),d.jsx("div",{className:"p-4 bg-slate-800/30 backdrop-blur-xl border-t border-white/5",children:d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"text",value:i,onChange:h=>a(h.target.value),onKeyDown:h=>h.key==="Enter"&&u(),placeholder:"Skriv ngot...",className:"w-full bg-slate-900/50 border border-white/10 rounded-xl py-3 pl-4 pr-12 text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all shadow-inner"}),d.jsx("button",{onClick:u,disabled:!i.trim(),className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-indigo-500 hover:bg-indigo-400 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d.jsx(zc,{size:16})})]})})]})},c3e=({user:t})=>{const[e,n]=J.useState(!1);return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:`
                fixed z-50 transition-all duration-500 ease-in-out
                ${e?"bottom-24 right-4 md:right-8 w-[calc(100vw-2rem)] md:w-[400px] h-[600px] max-h-[80vh] opacity-100 translate-y-0 scale-100":"bottom-8 right-8 w-0 h-0 opacity-0 translate-y-20 scale-90 pointer-events-none"}
            `,children:d.jsx(l3e,{user:t,onClose:()=>n(!1)})}),d.jsx("button",{onClick:()=>n(!e),className:`
                    fixed bottom-6 right-6 md:bottom-8 md:right-8 z-50
                    w-14 h-14 md:w-16 md:h-16 rounded-full 
                    bg-gradient-to-r from-indigo-600 to-purple-600 
                    text-white shadow-lg shadow-indigo-500/40 
                    flex items-center justify-center 
                    transition-all duration-300 hover:scale-110 active:scale-95
                    ${e?"rotate-90":"rotate-0"}
                `,children:e?d.jsx("div",{className:"w-8 h-1 bg-white rounded-full"}):d.jsx(wa,{size:28,className:"animate-pulse"})})]})},u3e=({onBackToSite:t})=>{const[e,n]=J.useState(af.IDLE),[r,i]=J.useState(null),[a,s]=J.useState("welcome"),[o,c]=J.useState(null),[u,h]=J.useState(!1),[m,v]=J.useState(!1),[x,_]=J.useState(!1),[T,w]=J.useState(!1),[E,N]=J.useState("login"),[C,P]=J.useState(!1),[I,j]=J.useState([]),[O,F]=J.useState(!1);J.useEffect(()=>{const X=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone;F(!!X)},[]),J.useEffect(()=>{const X=()=>{const re=window.location.hash;if(re.includes("#premium-login"))_(!1),v(!0),w(!0),N("login");else if(re.includes("#login"))v(!0),_(!1),w(!1),N("login");else if(re.includes("#signup"))v(!0),_(!1),w(!1),N("signup");else if(re.includes("#chat")){v(!1),_(!1),s("chat");const me=new URLSearchParams(re.split("?")[1]).get("topic");me&&c(me)}else re.includes("#welcome")?(v(!1),_(!1),s("welcome")):re.includes("#experts")?(v(!1),_(!1),s("experts")):re.includes("#dashboard")?(v(!1),_(!1),s("dashboard")):(v(!1),_(!1));const ce=re.split("?")[0].replace("#","")||"welcome",de=re.includes("?")?new URLSearchParams(re.split("?")[1]):null,W=de?de.get("topic"):null;j(ae=>{const me=ae[ae.length-1];return me&&me.tab===ce&&me.topic===W?ae:[...ae,{tab:ce,topic:W}]})};return X(),window.addEventListener("hashchange",X),()=>window.removeEventListener("hashchange",X)},[]),J.useEffect(()=>{eS(()=>Promise.resolve().then(()=>UH),void 0).then(de=>{de.requestNotificationPermission(),de.registerServiceWorker()});const X=Tn.channel("global_messages_notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},async de=>{const W=de.new;if(r&&W.user_id!==r.id&&r.notifications_enabled!==!1){const{sendNotification:ae}=await eS(async()=>{const{sendNotification:_e}=await Promise.resolve().then(()=>UH);return{sendNotification:_e}},void 0),{PERSONAS:me}=await eS(async()=>{const{PERSONAS:_e}=await Promise.resolve().then(()=>GPe);return{PERSONAS:_e}},void 0);let Ie="Ngon";if(W.is_ai){const _e=me.find(Ye=>Ye.id===W.persona_id);Ie=_e?_e.name:"AI",_e&&_e.avatar,_e&&_e.color}else{const{data:_e}=await Tn.from("profiles").select("full_name").eq("id",W.user_id).single();_e&&(Ie=_e.full_name)}const Xe=W.content.split(" ").slice(0,3).join(" ")+(W.content.split(" ").length>3?"...":""),{addNotification:ve}=await eS(async()=>{const{addNotification:_e}=await Promise.resolve().then(()=>n3e);return{addNotification:_e}},void 0);await ve({title:`Nytt frn ${Ie}`,message:Xe}),ae(`Nytt frn ${Ie}`,Xe)}}).subscribe(),re=de=>{const W=de.state;if(!W){e===af.AUTHENTICATED?s("welcome"):v(!1);return}W.view==="login"||W.view==="premium-login"?v(!0):W.view==="landing"&&v(!1),W.tab&&s(W.tab),c(W.topic||null)};window.addEventListener("popstate",re);const{data:{subscription:ce}}=Tn.auth.onAuthStateChange(async(de,W)=>{if(W){n(af.AUTHENTICATED),v(!1);const{data:ae}=await Tn.from("profiles").select("*").eq("id",W.user.id).single();i({id:W.user.id,email:W.user.email||"",full_name:ae?.full_name||W.user.user_metadata.full_name||"Medlem",role:ae?.role||"medlem",avatar_url:ae?.avatar_url||W.user.user_metadata.avatar_url,membership_level:ae?.membership_level??2,membership_active:ae?.membership_active??!0,notifications_enabled:ae?.notifications_enabled??!0}),(T||window.location.hash==="#premium-login")&&s("chat")}else n(af.IDLE),i(null)});return()=>{window.removeEventListener("popstate",re),ce.unsubscribe(),Tn.removeChannel(X)}},[e,T]);const L=()=>{t()},z=X=>{i(X),n(af.AUTHENTICATED);const re=T||window.location.hash==="#premium-login"?"chat":"welcome";s(re),window.history.pushState({tab:re,view:re},"",`#${re}`)},V=()=>{Tn.auth.signOut(),i(null),n(af.UNAUTHENTICATED),s("welcome"),c(null),v(O),O?(_(!1),v(!0),w(!0),N("login"),window.history.pushState({view:"premium-login"},"","#premium-login")):t(Te.LOGIN)},G=(X,re=null,ce=!1)=>{s(X),c(re),h(!1),ce||j(W=>{const ae=W[W.length-1];return ae&&ae.tab===X&&ae.topic===re?W:[...W,{tab:X,topic:re}]});const de=re?`#${X}?topic=${encodeURIComponent(re)}`:`#${X}`;window.history.pushState({tab:X,topic:re},"",de)},$=()=>{if(I.length>1){const X=[...I];X.pop();const re=X[X.length-1];j(X),G(re.tab,re.topic,!0)}else a!=="dashboard"&&G("dashboard")},ee=X=>{G("chat",X)},te=X=>{i(X)},K=({children:X})=>d.jsxs("div",{className:"min-h-screen relative flex flex-col font-sans text-slate-100 selection:bg-orange-500/30",children:[d.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-slate-950 via-slate-900 to-black animate-bg-shift z-0"}),d.jsx("div",{className:"fixed top-[-10%] left-[-10%] w-[800px] h-[800px] bg-orange-500/5 rounded-full blur-[150px] animate-pulse duration-[15000ms] z-0 pointer-events-none"}),d.jsx("div",{className:"fixed bottom-[-10%] right-[-10%] w-[800px] h-[800px] bg-amber-600/5 rounded-full blur-[150px] animate-pulse duration-[20000ms] z-0 pointer-events-none"}),d.jsx("div",{className:"fixed top-[20%] right-[10%] w-[400px] h-[400px] bg-white/2 rounded-full blur-[100px] pointer-events-none z-0"}),d.jsx("div",{className:"fixed inset-0 opacity-[0.02] bg-[url('https://www.transparenttextures.com/patterns/p6.png')] pointer-events-none z-0"}),d.jsx("div",{className:"relative z-10 flex flex-col flex-grow",children:X})]});return x?d.jsx(d.Fragment,{children:d.jsx(BPe,{onLoginClick:()=>{_(!1),r||v(!0)}})}):e===af.AUTHENTICATED&&r?d.jsxs(K,{children:[d.jsxs("header",{className:"md:hidden border-b border-white/10 bg-black/20 backdrop-blur-xl sticky top-0 z-50",children:[d.jsxs("div",{className:"px-4 h-16 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("button",{onClick:$,className:"group flex items-center justify-center w-10 h-10 rounded-xl bg-white/5 backdrop-blur-md border border-white/10 hover:border-orange-500/50 hover:bg-white/10 transition-all duration-300 shadow-lg active:scale-95",title:"G bakt","aria-label":"G bakt",children:d.jsx(px,{size:20,className:"text-slate-400 group-hover:text-orange-400 transition-colors"})}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:d.jsx("img",{src:"/assets/logo2.png",alt:"Klttertrdet Logo",className:"w-full h-full object-contain"})}),d.jsx("h1",{className:"text-lg font-bold tracking-tight text-white",children:"Horizonten"})]})]}),d.jsx("button",{onClick:()=>h(!u),className:"p-2 text-slate-400 hover:text-white transition-colors",children:u?d.jsx(Bc,{size:24}):d.jsx(i1,{size:24})})]}),u&&d.jsx("div",{className:"md:hidden border-t border-white/10 bg-black/60 backdrop-blur-xl absolute w-full animate-in slide-in-from-top-2 duration-200 shadow-2xl",children:d.jsxs("div",{className:"px-4 py-4 space-y-3",children:[d.jsxs("div",{className:"flex items-center gap-3 px-2 mb-6",children:[d.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gradient-to-br from-orange-400 to-red-600 flex items-center justify-center text-xs font-bold text-white border border-white/10",children:(()=>{const X=Bu(r.email,r.avatar_url);return X?d.jsx("img",{src:X,alt:r.full_name,className:`w-full h-full ${Bu(r.email)?"object-contain p-1.5 bg-slate-900":"object-cover"}`}):r.full_name.charAt(0)})()}),d.jsx("span",{className:"font-semibold text-white",children:r.full_name})]}),d.jsxs("button",{onClick:()=>G("welcome"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${a==="welcome"?"bg-orange-500/10 text-orange-400 border border-orange-500/20":"text-slate-400 hover:bg-white/5"}`,children:[d.jsx(L2,{size:20})," ",d.jsx("span",{className:"font-medium",children:"Vlkommen hem"})]}),d.jsxs("button",{onClick:()=>G("dashboard"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${a==="dashboard"?"bg-orange-500/10 text-orange-400 border border-orange-500/20":"text-slate-400 hover:bg-white/5"}`,children:[d.jsx(r1,{size:20})," ",d.jsx("span",{className:"font-medium",children:"verblick"})]}),d.jsxs("button",{onClick:()=>G("chat"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${a==="chat"?"bg-orange-500/10 text-orange-400 border border-orange-500/20":"text-slate-400 hover:bg-white/5"}`,children:[d.jsx(vx,{size:20})," ",d.jsx("span",{className:"font-medium",children:"Gemenskapen"})]}),d.jsxs("button",{onClick:()=>G("experts"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${a==="experts"?"bg-orange-500/10 text-orange-400 border border-orange-500/20":"text-slate-400 hover:bg-white/5"}`,children:[d.jsx(Gi,{size:20})," ",d.jsx("span",{className:"font-medium",children:"Kontakt & Bokning"})]}),r.role==="admin"&&d.jsxs("button",{onClick:()=>G("admin"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${a==="admin"?"bg-orange-500/20 text-orange-400 border border-orange-500/30":"text-slate-400 hover:bg-white/5"}`,children:[d.jsx(uo,{size:20})," ",d.jsx("span",{className:"font-medium",children:"Admin Panel"})]}),!O&&d.jsxs("div",{className:"border-t border-white/10 my-2 pt-2",children:[d.jsxs("button",{onClick:()=>t(),className:"w-full flex items-center gap-3 px-4 py-3 text-slate-400 hover:text-orange-400 hover:bg-white/5 rounded-xl transition-colors",children:[d.jsx(Jo,{size:20})," ",d.jsx("span",{className:"font-medium",children:"Klttertrdet.se"})]}),d.jsxs("button",{onClick:V,className:"w-full flex items-center gap-3 px-4 py-3 text-slate-400 hover:text-white hover:bg-white/5 rounded-xl transition-colors",children:[d.jsx(Lk,{size:20})," ",d.jsx("span",{className:"font-medium",children:"Logga ut"})]})]}),O&&d.jsx("div",{className:"border-t border-white/10 my-2 pt-2",children:d.jsxs("button",{onClick:V,className:"w-full flex items-center gap-3 px-4 py-3 text-slate-400 hover:text-white hover:bg-white/5 rounded-xl transition-colors",children:[d.jsx(Lk,{size:20})," ",d.jsx("span",{className:"font-medium",children:"Logga ut"})]})})]})})]}),d.jsxs("div",{className:"flex h-[calc(100vh-64px)] md:h-screen overflow-hidden",children:[d.jsxs("aside",{className:"hidden md:flex flex-col w-72 bg-slate-950/50 backdrop-blur-2xl border-r border-white/5 p-6 relative z-50",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-12 px-2 cursor-pointer group",onClick:()=>G("dashboard"),children:[d.jsx("div",{className:"w-10 h-10 flex items-center justify-center transition-transform group-hover:scale-110 duration-300",children:d.jsx("img",{src:"/assets/logo2.png",alt:"Logo",className:"w-full h-full object-contain"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl font-bold tracking-tight text-white group-hover:text-orange-400 transition-colors",children:"Horizonten"}),d.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-bold",children:"Gemenskap"})]})]}),d.jsx("div",{className:"mb-8 px-2",children:d.jsxs("button",{onClick:$,className:"flex items-center gap-3 text-slate-400 hover:text-white transition-colors text-sm font-bold group",children:[d.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center border border-white/5 group-hover:border-orange-500/30 group-hover:bg-white/10 transition-all",children:d.jsx(px,{size:16})}),"G bakt"]})}),d.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"welcome",label:"Vlkommen hem",icon:L2},{id:"dashboard",label:"verblick",icon:r1},{id:"chat",label:"Gemenskapen",icon:vx},{id:"experts",label:"Kontakt & Bokning",icon:Gi},...r.role==="admin"?[{id:"admin",label:"Admin Panel",icon:uo}]:[]].map(X=>d.jsxs("button",{onClick:()=>G(X.id),className:`
                    w-full flex items-center justify-between px-4 py-3.5 rounded-2xl transition-all duration-300 group relative overflow-hidden
                    ${a===X.id?"bg-white/10 text-white shadow-lg shadow-black/20":"text-slate-400 hover:text-white hover:bg-white/5"}
                  `,children:[d.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[d.jsx(X.icon,{size:20,className:a===X.id?"text-orange-400":"group-hover:text-orange-400 transition-colors"}),d.jsx("span",{className:"font-medium text-[15px]",children:X.label})]}),d.jsx("div",{className:`
                    w-1 h-8 bg-gradient-to-b from-transparent via-white to-transparent rounded-full shadow-[0_0_10px_white]
                    absolute right-4 transition-all duration-500 ease-out transform
                    ${a===X.id?"opacity-100 scale-100 translate-x-0":"opacity-0 scale-50 translate-x-4 group-hover:opacity-60 group-hover:translate-x-0 group-hover:scale-75"}
                  `})]},X.id))}),d.jsxs("div",{className:"pt-6 border-t border-white/5 space-y-4",children:[d.jsxs("button",{onClick:()=>P(!0),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-white/5 transition-colors text-slate-400 hover:text-white group",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-slate-800",children:(()=>{const X=Bu(r.email,r.avatar_url);return X?d.jsx("img",{src:X,alt:"",className:`w-full h-full ${Bu(r.email)?"object-contain p-1.5 bg-slate-900":"object-cover"}`}):d.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs font-bold",children:r.full_name?.[0]})})()}),d.jsx("div",{className:"absolute -bottom-1 -right-1 bg-green-500 w-3 h-3 rounded-full border-2 border-slate-950"})]}),d.jsxs("div",{className:"text-left flex-1 min-w-0",children:[d.jsx("p",{className:"text-sm font-bold text-white truncate",children:r.full_name.split(" ")[0]}),d.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:"Instllningar"})]}),d.jsx(jY,{size:16,className:"opacity-0 group-hover:opacity-100 transition-opacity"})]}),d.jsxs("button",{onClick:V,className:"w-full flex items-center gap-3 px-4 py-2 text-xs font-bold text-slate-500 hover:text-red-400 transition-colors uppercase tracking-widest pl-6",children:[d.jsx(Lk,{size:14})," Logga ut"]})]})]}),d.jsx("main",{className:`flex-1 flex flex-col relative z-20 min-h-0 ${a==="chat"?"overflow-hidden":"overflow-y-auto custom-scrollbar"}`,children:a==="welcome"?d.jsxs("div",{className:"flex-1 animate-in fade-in slide-in-from-bottom-4 duration-500 overflow-y-auto",children:[d.jsx(i3e,{}),d.jsx("div",{className:"p-4 md:px-12 md:pb-12",children:d.jsx(KS,{onBackToSite:t,onSettingsClick:()=>P(!0)})})]}):a==="dashboard"?d.jsxs("div",{className:"flex-1 animate-in fade-in slide-in-from-bottom-4 duration-500 overflow-y-auto",children:[d.jsx(KPe,{user:r,onThreadClick:ee,onBackToSite:t}),d.jsx("div",{className:"p-4 md:px-12 md:pb-12",children:d.jsx(KS,{onBackToSite:t,onSettingsClick:()=>P(!0)})})]}):a==="chat"?d.jsx("div",{className:"flex-1 h-full w-full animate-in fade-in slide-in-from-bottom-4 duration-500 overflow-hidden",children:d.jsx(r3e,{user:r,initialThread:o,onOpenSettings:()=>P(!0),onLogout:V,onBackToSite:t})}):a==="experts"?d.jsxs("div",{className:"flex-1 animate-in fade-in slide-in-from-bottom-4 duration-500 overflow-y-auto",children:[d.jsx(gG,{}),d.jsx("div",{className:"p-4 md:px-12 md:pb-12",children:d.jsx(KS,{onBackToSite:t,onSettingsClick:()=>P(!0)})})]}):a==="admin"&&r.role==="admin"?d.jsxs("div",{className:"flex-1 animate-in fade-in slide-in-from-bottom-4 duration-500 overflow-y-auto",children:[d.jsx(a3e,{user:r,onBack:()=>G("dashboard")}),d.jsx("div",{className:"p-4 md:px-12 md:pb-12",children:d.jsx(KS,{onBackToSite:t,onSettingsClick:()=>P(!0)})})]}):null})]}),C&&r&&d.jsx(s3e,{user:r,onClose:()=>P(!1),onUpdate:te}),d.jsx(c3e,{user:r}),d.jsx(o3e,{})]}):d.jsx(K,{children:d.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 relative animate-in fade-in zoom-in-95 duration-700 overflow-hidden",children:[d.jsx("div",{className:"fixed inset-0 z-0 opacity-50 bg-black",children:d.jsx(FK,{hovering:!0})}),!O&&d.jsxs("button",{onClick:L,className:"absolute top-8 left-8 text-slate-400 hover:text-white flex items-center gap-2 transition-colors z-50 group px-4 py-2 rounded-full hover:bg-white/5",children:[d.jsx(Jo,{size:20,className:"group-hover:-translate-x-1 transition-transform"}),"Tillbaka"]}),d.jsxs("div",{className:"relative z-10 w-full max-w-md bg-black/40 backdrop-blur-3xl p-8 rounded-[2.5rem] border border-white/5 shadow-2xl",children:[d.jsx("div",{className:"mb-8 flex justify-center"}),T?d.jsx(VSe,{onLoginSuccess:z,isStandalone:O,onBack:()=>{_(!0),v(!1),t(Te.LOGIN)}}):d.jsx(FSe,{onLoginSuccess:z,initialView:E,onNavigateToPremium:()=>t(Te.PREMIUM_APPLICATION),onNavigateToTerms:()=>t(Te.TERMS),onNavigateToPrivacy:()=>t(Te.PRIVACY),onNavigateToCookies:()=>t(Te.COOKIE_POLICY),onNavigateToContact:()=>t(Te.CONTACT)})]})]})})},d3e=({setPage:t})=>{const[e,n]=J.useState(!1),[r,i]=J.useState({name:"",email:"",phone:"",reason:"",paymentInterval:"monthly",paymentMethod:"swish"}),a=o=>{o.preventDefault();const c=encodeURIComponent(`Anskan om Premium Medlemskap: ${r.name}`),u=encodeURIComponent(`Namn: ${r.name}
E-post: ${r.email}
Telefon: ${r.phone}
Betalningsintervall: ${r.paymentInterval==="monthly"?"Mnadsvis (250 kr/mn)":"rsvis (2500 kr/r)"}

Motivering/Bakgrund:
${r.reason}`);window.location.href=`mailto:billy@klattertradet.se?subject=${c}&body=${u}`,n(!0)},s=o=>{const{name:c,value:u}=o.target;i(h=>({...h,[c]:u}))};return e?d.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:d.jsxs("div",{className:"max-w-xl w-full glass-card p-10 md:p-14 text-center animate-in fade-in zoom-in duration-500 relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-amber-500 to-orange-600"}),d.jsx("div",{className:"w-20 h-20 bg-amber-500/20 rounded-full flex items-center justify-center mx-auto mb-8 shadow-[0_0_40px_rgba(245,158,11,0.2)]",children:d.jsx(mx,{className:"w-10 h-10 text-amber-500"})}),d.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Anskan mottagen!"}),d.jsxs("p",{className:"text-zinc-400 mb-10 leading-relaxed text-lg",children:["Fr att slutfra din anskan och f tillgng till gemenskapen behver vi din betalning. (Under testperioden r detta steg ",d.jsx("span",{className:"text-orange-500 font-bold uppercase tracking-widest",children:"valfritt"}),")."]}),d.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-8 mb-10 text-left space-y-6",children:[d.jsx("h3",{className:"text-white font-black uppercase tracking-widest text-xs text-center border-b border-white/10 pb-4",children:"Betalningsinstruktioner"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center group",children:[d.jsx("span",{className:"text-zinc-500 text-sm",children:"Belopp att betala:"}),d.jsx("span",{className:"text-white font-bold text-xl",children:r.paymentInterval==="monthly"?"250 kr":"2500 kr"})]}),d.jsxs("div",{className:"space-y-4 pt-2",children:[d.jsxs("div",{className:"p-4 bg-orange-500/10 border border-orange-500/30 rounded-xl flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-orange-500 text-[10px] font-black uppercase tracking-wider mb-1",children:"Swish"}),d.jsx("span",{className:"text-white font-sans font-bold text-lg tracking-wider",children:"123 456 78 90"})]}),d.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/Swish_Logo.svg/1200px-Swish_Logo.svg.png",alt:"Swish",className:"w-10 h-10 object-contain"})]}),d.jsxs("div",{className:"p-4 bg-white/5 border border-white/10 rounded-xl flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-zinc-500 text-[10px] font-black uppercase tracking-wider mb-1",children:"Bankgiro"}),d.jsx("span",{className:"text-white font-sans font-bold text-lg tracking-wider",children:"XXXX-XXXX"})]}),d.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:d.jsx(Dk,{className:"text-zinc-500"})})]})]}),d.jsx("div",{className:"pt-4 border-t border-white/10",children:d.jsxs("p",{className:"text-zinc-500 text-[11px] leading-relaxed",children:[d.jsx("span",{className:"text-white font-bold",children:"Viktigt:"})," Ange ditt fullstndiga namn (",r.name,") som meddelande vid betalning s att vi kan koppla den till din anskan."]})})]})]}),d.jsxs("p",{className:"text-zinc-500 text-sm mb-10",children:["Ett bekrftelsemejl har skickats till ",d.jsx("span",{className:"text-white",children:r.email}),". Nr betalningen registrerats (vanligtvis inom 24h) skickas dina inloggningsuppgifter."]}),d.jsxs("div",{className:"flex flex-col gap-3",children:[d.jsx("button",{onClick:()=>{window.location.hash="#login",t(Te.GEMENSKAP_APP)},className:"w-full py-4 bg-orange-500 hover:bg-orange-400 text-black font-bold rounded-xl transition-all active:scale-[0.98] shadow-lg shadow-orange-500/20",children:"Logga in direkt (Testlge - ingen betalning krvs)"}),d.jsx("button",{onClick:()=>t(Te.HOME),className:"w-full py-4 bg-white/5 hover:bg-white/10 border border-white/10 text-white font-bold rounded-xl transition-all active:scale-[0.98]",children:"Tillbaka till startsidan"})]}),d.jsx("p",{className:"text-[10px] text-zinc-600 mt-6 italic",children:"Frgor? Kontakta oss p billy@klattertradet.se"})]})}):d.jsx("div",{className:"flex-1 py-24 px-6",children:d.jsxs("div",{className:"max-w-3xl mx-auto",children:[d.jsxs("button",{onClick:()=>t(Te.LOGIN),className:"flex items-center gap-2 text-zinc-500 hover:text-amber-500 transition-colors mb-8 group",children:[d.jsx(Jo,{className:"w-4 h-4 transition-transform group-hover:-translate-x-1"}),"Tillbaka"]}),d.jsxs("div",{className:"glass-card p-8 md:p-12",children:[d.jsxs("div",{className:"mb-12",children:[d.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Ansk om Premium Medlemskap"}),d.jsx("p",{className:"text-zinc-400 text-lg",children:"Fyll i formulret nedan fr att pbrja din anskan. Vi granskar alla medlemskap manuellt fr att skerstlla kvaliteten i vr community."})]}),d.jsxs("form",{onSubmit:a,className:"space-y-6",children:[d.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium text-zinc-300 ml-1",children:"Fullstndigt namn"}),d.jsxs("div",{className:"relative",children:[d.jsx(ZH,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),d.jsx("input",{required:!0,type:"text",name:"name",value:r.name,onChange:s,placeholder:"Ditt namn",className:"w-full bg-white/5 border border-white/10 rounded-xl py-4 pl-12 pr-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-amber-500/50 transition-all font-medium"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium text-zinc-300 ml-1",children:"E-postadress"}),d.jsxs("div",{className:"relative",children:[d.jsx(wv,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),d.jsx("input",{required:!0,type:"email",name:"email",value:r.email,onChange:s,placeholder:"din.epost@exempel.se",className:"w-full bg-white/5 border border-white/10 rounded-xl py-4 pl-12 pr-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-amber-500/50 transition-all font-medium"})]})]})]}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium text-zinc-300 ml-1",children:"Telefonnummer"}),d.jsxs("div",{className:"relative",children:[d.jsx(CY,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),d.jsx("input",{required:!0,type:"tel",name:"phone",value:r.phone,onChange:s,placeholder:"070-000 00 00",className:"w-full bg-white/5 border border-white/10 rounded-xl py-4 pl-12 pr-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-amber-500/50 transition-all font-medium"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium text-zinc-300 ml-1",children:"nskad betalningsplan"}),d.jsxs("div",{className:"relative",children:[d.jsx(Dk,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),d.jsxs("select",{name:"paymentInterval",value:r.paymentInterval,onChange:s,className:"w-full bg-white/5 border border-white/10 rounded-xl py-4 pl-12 pr-4 text-white appearance-none focus:outline-none focus:ring-2 focus:ring-amber-500/50 transition-all font-medium cursor-pointer",children:[d.jsx("option",{value:"monthly",children:"250 kr / mnad"}),d.jsx("option",{value:"yearly",children:"2500 kr / r (Spara 500 kr)"})]})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium text-zinc-300 ml-1",children:"Varfr vill du g med i Premium?"}),d.jsx("textarea",{required:!0,name:"reason",value:r.reason,onChange:s,placeholder:"Bertta lite kort om dig sjlv och vad du hoppas f ut av gemenskapen...",rows:5,className:"w-full bg-white/5 border border-white/10 rounded-xl p-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-amber-500/50 transition-all font-medium resize-none"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("label",{className:"text-sm font-medium text-zinc-300 ml-1",children:"Vlj betalstt"}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[d.jsxs("label",{className:`flex items-center gap-4 p-4 rounded-xl border transition-all cursor-pointer ${r.paymentMethod==="swish"?"bg-orange-500/10 border-orange-500":"bg-white/5 border-white/10 hover:border-white/20"}`,children:[d.jsx("input",{type:"radio",name:"paymentMethod",value:"swish",checked:r.paymentMethod==="swish",onChange:s,className:"hidden"}),d.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${r.paymentMethod==="swish"?"border-orange-500":"border-zinc-600"}`,children:r.paymentMethod==="swish"&&d.jsx("div",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full"})}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-bold text-white text-sm",children:"Swish"}),d.jsx("span",{className:"text-[10px] text-zinc-500 uppercase font-black",children:"Direktbetalning"})]}),d.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/Swish_Logo.svg/1200px-Swish_Logo.svg.png",alt:"Swish",className:"w-8 h-8 ml-auto object-contain"})]}),d.jsxs("label",{className:`flex items-center gap-4 p-4 rounded-xl border transition-all cursor-pointer ${r.paymentMethod==="card"?"bg-orange-500/10 border-orange-500":"bg-white/5 border-white/10 hover:border-white/20"}`,children:[d.jsx("input",{type:"radio",name:"paymentMethod",value:"card",checked:r.paymentMethod==="card",onChange:s,className:"hidden"}),d.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${r.paymentMethod==="card"?"border-orange-500":"border-zinc-600"}`,children:r.paymentMethod==="card"&&d.jsx("div",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full"})}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-bold text-white text-sm",children:"Kort"}),d.jsx("span",{className:"text-[10px] text-zinc-500 uppercase font-black",children:"Visa / Mastercard"})]}),d.jsx("div",{className:"flex gap-1 ml-auto",children:d.jsx(Dk,{size:20,className:"text-zinc-400"})})]})]})]}),d.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 space-y-4",children:[d.jsx("h3",{className:"text-white font-bold text-sm",children:"Betalnings- och medlemsvillkor"}),d.jsxs("div",{className:"text-xs text-zinc-400 leading-relaxed space-y-2 max-h-32 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-white/10",children:[d.jsx("p",{children:"Genom att slutfra anskan och betalning godknner du fljande villkor:"}),d.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[d.jsx("li",{children:"Medlemskapet aktiveras s snart betalningen har registrerats och din profil har verifierats manuellt."}),d.jsx("li",{children:"Betalning sker i frskott och frnyas automatiskt enligt valt intervall (mnad/r)."}),d.jsx("li",{children:"Du kan nr som helst sga upp ditt medlemskap via dina instllningar. Ingen terbetalning sker fr pbrjad period."}),d.jsx("li",{children:"Innehll i gemenskapen r skyddat och fr inte spridas utanfr plattformen."}),d.jsx("li",{children:"Respektfullt bemtande r ett krav fr fortsatt medlemskap."})]})]}),d.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group pt-2",children:[d.jsx("input",{required:!0,type:"checkbox",className:"mt-1 w-4 h-4 rounded border-white/20 bg-white/5 text-orange-500 focus:ring-orange-500 focus:ring-offset-0"}),d.jsx("span",{className:"text-xs text-zinc-500 group-hover:text-zinc-300 transition-colors",children:"Jag godknner betalningsvillkoren och bekrftar att jag frstr att tillgng till gemenskapen krver genomfrd betalning."})]})]}),d.jsxs("button",{type:"submit",className:"w-full py-5 bg-amber-500 hover:bg-amber-400 text-black font-bold rounded-xl transition-all flex items-center justify-center gap-3 text-lg group active:scale-95 shadow-[0_10px_30px_rgba(245,158,11,0.2)]",children:[d.jsx(zc,{className:"w-5 h-5 transition-transform group-hover:translate-x-1 group-hover:-translate-y-1"}),"G vidare till betalning"]})]})]})]})})},f3e=({setPage:t})=>{const[e,n]=J.useState(!1),[r,i]=J.useState(!1),[a,s]=J.useState(null),[o,c]=J.useState({name:"",email:"",password:""}),[u,h]=J.useState(!1),m=async x=>{x.preventDefault(),i(!0),s(null);try{const{data:_,error:T}=await Tn.auth.signUp({email:o.email,password:o.password,options:{emailRedirectTo:window.location.origin,data:{full_name:o.name,avatar_url:""}}});T?(s(T.message),i(!1)):_.user&&(await Tn.from("profiles").upsert({id:_.user.id,email:o.email,full_name:o.name,membership_level:1,membership_active:!0,updated_at:new Date().toISOString()}),n(!0),i(!1))}catch{s("Ett ovntat fel uppstod."),i(!1)}},v=x=>{const{name:_,value:T}=x.target;c(w=>({...w,[_]:T}))};return e?d.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:d.jsxs("div",{className:"max-w-xl w-full glass-card p-10 md:p-14 text-center animate-in fade-in zoom-in duration-500 relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-green-500 to-emerald-600"}),d.jsx("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-8 shadow-[0_0_40px_rgba(34,197,94,0.2)]",children:d.jsx(mx,{className:"w-10 h-10 text-green-500"})}),d.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Vlkommen till gemenskapen!"}),d.jsx("p",{className:"text-zinc-400 mb-10 leading-relaxed text-lg",children:"Ditt konto har skapats. Vi har skickat ett bekrftelsemail till din e-postadress. Vnligen klicka p lnken i mailet fr att verifiera ditt konto och logga in."}),d.jsx("button",{onClick:()=>{window.location.hash="#login",t(Te.GEMENSKAP_APP)},className:"w-full py-4 bg-white/5 hover:bg-white/10 border border-white/10 text-white font-bold rounded-xl transition-all active:scale-[0.98]",children:"G till inloggning"})]})}):d.jsx("div",{className:"flex-1 py-24 px-6",children:d.jsxs("div",{className:"max-w-3xl mx-auto",children:[d.jsxs("button",{onClick:()=>t(Te.LOGIN),className:"flex items-center gap-2 text-zinc-500 hover:text-white transition-colors mb-8 group",children:[d.jsx(Jo,{className:"w-4 h-4 transition-transform group-hover:-translate-x-1"}),"Tillbaka"]}),d.jsxs("div",{className:"glass-card p-8 md:p-12",children:[d.jsxs("div",{className:"mb-12",children:[d.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Registrera Gratis Medlemskap"}),d.jsx("p",{className:"text-zinc-400 text-lg",children:"Fyll i formulret nedan fr att skapa ditt konto. Det r helt kostnadsfritt och du fr direkt tillgng till vr ppna gemenskap."})]}),d.jsxs("form",{onSubmit:m,className:"space-y-6",children:[a&&d.jsx("div",{className:"bg-red-500/10 border border-red-500/20 p-4 rounded-xl text-red-200 text-sm",children:a}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium text-zinc-300 ml-1",children:"Fullstndigt namn"}),d.jsxs("div",{className:"relative",children:[d.jsx(ZH,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),d.jsx("input",{required:!0,type:"text",name:"name",value:o.name,onChange:v,placeholder:"Ditt namn",className:"w-full bg-white/5 border border-white/10 rounded-xl py-4 pl-12 pr-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-amber-500/50 transition-all font-medium"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium text-zinc-300 ml-1",children:"E-postadress"}),d.jsxs("div",{className:"relative",children:[d.jsx(wv,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),d.jsx("input",{required:!0,type:"email",name:"email",value:o.email,onChange:v,placeholder:"din.epost@exempel.se",className:"w-full bg-white/5 border border-white/10 rounded-xl py-4 pl-12 pr-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-amber-500/50 transition-all font-medium"})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium text-zinc-300 ml-1",children:"Lsenord"}),d.jsxs("div",{className:"relative",children:[d.jsx(lp,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),d.jsx("input",{required:!0,type:"password",name:"password",value:o.password,onChange:v,placeholder:"Vlj ett skert lsenord",minLength:6,className:"w-full bg-white/5 border border-white/10 rounded-xl py-4 pl-12 pr-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-amber-500/50 transition-all font-medium"})]})]}),d.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 space-y-4",children:[d.jsx("h3",{className:"text-white font-bold text-sm",children:"Medlemsvillkor"}),d.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group pt-2",children:[d.jsx("input",{required:!0,type:"checkbox",checked:u,onChange:x=>h(x.target.checked),className:"mt-1 w-4 h-4 rounded border-white/20 bg-white/5 text-orange-500 focus:ring-orange-500 focus:ring-offset-0"}),d.jsxs("span",{className:"text-xs text-zinc-500 group-hover:text-zinc-300 transition-colors",children:["Jag godknner"," ",d.jsx("button",{type:"button",onClick:x=>{x.preventDefault(),t(Te.TERMS)},className:"text-blue-400 hover:text-blue-300 underline font-bold",children:"medlemsvillkoren"})," ","och bekrftar att jag frstr att detta r en trygg plats dr vi behandlar varandra med respekt."]})]})]}),d.jsx("button",{type:"submit",disabled:r||!u,className:"w-full py-5 bg-white hover:bg-slate-200 text-black font-bold rounded-xl transition-all flex items-center justify-center gap-3 text-lg group active:scale-95 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:r?d.jsx(xO,{className:"animate-spin",size:20}):d.jsxs(d.Fragment,{children:["Skapa konto",d.jsx(Vi,{className:"w-5 h-5 transition-transform group-hover:translate-x-1"})]})}),d.jsx("button",{type:"button",onClick:()=>t(Te.PREMIUM_APPLICATION),className:"w-full py-4 bg-transparent hover:bg-white/5 border border-white/10 text-orange-400 font-bold rounded-xl transition-all flex items-center justify-center gap-2 text-sm uppercase tracking-wider",children:"Till premium medlemskapet"})]})]})]})})},Iu=({data:t,value:e,onChange:n})=>d.jsxs("div",{className:"mb-6 group",children:[d.jsx("label",{htmlFor:t.id,className:"block mb-2 font-semibold text-slate-800 transition-colors group-focus-within:text-blue-700",children:t.label}),t.type==="textarea"?d.jsx("textarea",{id:t.id,value:e,onChange:r=>n(t.id,r.target.value),placeholder:t.placeholder||"Klicka hr fr att skriva...",className:"w-full min-h-[120px] p-4 text-base bg-slate-50 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all resize-y placeholder:italic"}):d.jsx("input",{id:t.id,type:"text",value:e,onChange:r=>n(t.id,r.target.value),placeholder:t.placeholder||"Skriv ditt svar...",className:"w-full p-4 text-base bg-slate-50 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})]}),h3e=new R7({apiKey:"AIzaSyDB3okRgXzyM5Hxo9BjknJZ6mF1f6qMS1U"}),p3e=async t=>{const n=`Hr r en anvndares reflektioner frn ett arbetsblad om Existentialism och Fenomenologi inom Gestaltterapi:

${Object.entries(t).map(([r,i])=>`Frga ID: ${r}, Svar: ${i}`).join(`
`)}

Kan du ge en sammanfattande reflektion ver deras insikter? Lyft fram teman som frihet, ansvar eller fenomenologisk nrvaro om de frekommer. Ge dem en uppmuntrande avslutning.`;try{return(await h3e.models.generateContent({model:"gemini-3-pro-preview",contents:n,config:{systemInstruction:"Du r en varm och professionell gestaltterapeutisk mentor."}})).text||"Ingen analys tillgnglig."}catch{return"Kunde inte analysera reflektionerna just nu."}},m3e=({onBack:t})=>{const[e,n]=J.useState({}),[r,i]=J.useState(null),[a,s]=J.useState(!1),o={ex_1:'Hur kan tanken om "existens fre essens" pverka en persons syn p sin egen framtid?',ex_2:"Exempel p existentiell ngest i terapi?",ex_3:"Ansvaret fr ens egna val - befriande eller betungande?",fe_1:"Fenomenologisk instllning vid starka knslor?",fe_2:"Exempel p epoch (att stta i parentes)?",fe_3:"Fenomenologiskt vs medicinskt perspektiv?",case_1:'Reflektioner fr Fall 1: "Valets tyngd"',case_2a:'Reflektioner fr Fall 2: "Tomheten inom mig" (Arbetsstt)',case_2b:"Frgor och observationer fr Fall 2"};J.useEffect(()=>{const v=localStorage.getItem("gestalt_worksheet_answers");if(v)try{n(JSON.parse(v))}catch{console.error("Could not load saved answers")}},[]),J.useEffect(()=>{localStorage.setItem("gestalt_worksheet_answers",JSON.stringify(e))},[e]);const c=(v,x)=>{n(_=>({..._,[v]:x}))},u=async()=>{if(Object.values(e).filter(C=>C.trim().length>0).length<3){alert("Svara p ngra fler frgor innan du skickar in!");return}s(!0);const x=await p3e(e);i(x),s(!1);const _=`GUESTALT ARBETSBLAD - SVAR
============================

`,T=Object.entries(o).map(([C,P])=>`FRGA: ${P}
SVAR: ${e[C]||"(Inget svar)"}`).join(`

----------------------------

`),w=_+T,E=encodeURIComponent("Gestalt Arbetsblad - Inskickade svar"),N=encodeURIComponent(w);window.location.href=`mailto:billy@klattertradet.se?subject=${E}&body=${N}`},h=()=>{let v=`GUESTALT ARBETSBLAD - SVAR
`;v+=`============================

`,Object.entries(o).forEach(([w,E])=>{v+=`FRGA: ${E}
`,v+=`SVAR: ${e[w]||"(Inget svar)"}
`,v+=`----------------------------

`});const x=new Blob([v],{type:"text/plain"}),_=URL.createObjectURL(x),T=document.createElement("a");T.href=_,T.download="gestalt_arbetsblad_svar.txt",document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(_)},m=()=>{window.print()};return d.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12 md:px-8",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8 no-print",children:[d.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[d.jsxs("button",{onClick:t,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 px-5 py-2.5 bg-white border border-slate-200 text-slate-800 rounded-xl hover:bg-slate-50 transition-all font-medium shadow-sm active:scale-95",children:[d.jsx("svg",{className:"w-5 h-5 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Tillbaka"]}),d.jsxs("button",{onClick:m,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 px-5 py-2.5 bg-white border border-slate-200 text-slate-800 rounded-xl hover:bg-slate-50 transition-all font-medium shadow-sm active:scale-95",children:[d.jsx("svg",{className:"w-5 h-5 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Skriv ut / PDF"]})]}),d.jsxs("div",{className:"text-xs text-slate-400 italic font-medium flex items-center gap-1.5",children:[d.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full animate-pulse"}),"Vi hanterar all infomation frn dig enligt vr integritets- & sekretess policy"]})]}),d.jsxs("div",{className:"bg-white p-6 md:p-14 rounded-3xl shadow-custom border border-slate-100 overflow-hidden relative",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-blue-500 via-indigo-500 to-slate-800"}),d.jsxs("header",{className:"border-b border-slate-100 pb-10 mb-12",children:[d.jsx("h1",{className:"serif-font text-3xl md:text-5xl font-bold text-slate-900 mb-6 tracking-tight leading-tight",children:"Arbetsblad: Existentialism och Fenomenologi"}),d.jsx("p",{className:"text-xl text-slate-500 leading-relaxed max-w-2xl font-light",children:"En reflekterande guide som frdjupar frstelsen fr Gestaltterapins filosofiska fundament."})]}),d.jsx("section",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-100 mb-12 italic text-slate-600 leading-relaxed",children:"Hr fr du mjlighet att frdjupa dig i omrdena Existentialismens och Fenomenologi och frhoppningsvis hur centrala roller de speglar inom Gestaltterapin. Vi hoppas ven att om n lite s kan detta ge ngonting till dig ocks i ditt privatliv!"}),d.jsxs("article",{className:"prose prose-slate max-w-none mb-16 text-slate-700",children:[d.jsx("p",{children:"Ett srskilt fokus kommer att ligga p att klargra varfr humanismen trots dess popularitet inte br ses som en integrerad del av den genuina Gestaltterapins filosofiska grund. Existentialism och Humanism r olika filosofiska skolor och br drav behandlas som olika."}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mt-10",children:[d.jsxs("div",{className:"p-6 bg-blue-50/40 rounded-2xl border border-blue-100/50",children:[d.jsxs("h4",{className:"font-bold text-blue-900 mb-2 flex items-center gap-2",children:[d.jsx("span",{className:"w-6 h-6 bg-blue-100 text-blue-600 rounded-md flex items-center justify-center text-xs font-black",children:"1"}),"Grunderna"]}),d.jsx("p",{className:"text-sm text-blue-800/80 leading-relaxed",children:"En grundlig introduktion till existentialismen och fenomenologin i Gestaltterapins ramverk."})]}),d.jsxs("div",{className:"p-6 bg-slate-50/80 rounded-2xl border border-slate-100",children:[d.jsxs("h4",{className:"font-bold text-slate-800 mb-2 flex items-center gap-2",children:[d.jsx("span",{className:"w-6 h-6 bg-slate-200 text-slate-600 rounded-md flex items-center justify-center text-xs font-black",children:"2"}),"Distinktioner"]}),d.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:"En analys av skillnaderna mellan den filosofiska krnan och humanistiska strmningar."})]})]})]}),d.jsxs("div",{className:"mb-20",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[d.jsx("h2",{className:"serif-font text-3xl font-bold text-slate-900",children:"Del 1: Att utforska Existentialismen"}),d.jsx("div",{className:"h-px flex-1 bg-slate-100"})]}),d.jsx("p",{className:"mb-10 text-slate-500 italic max-w-2xl",children:"Existentialismen betonar individens frihet, ansvar och skande efter mening i en synbarligen meningsls vrld."}),d.jsx(Iu,{data:{id:"ex_1",label:'Hur kan tanken om "existens fre essens" pverka en persons syn p sin egen framtid och sina mjligheter?',type:"textarea"},value:e.ex_1||"",onChange:c}),d.jsx(Iu,{data:{id:"ex_2",label:"Ge ett exempel p en situation dr en klient i terapi skulle kunna uppleva existentiell ngest. Hur kan terapeutens frstelse fr detta begrepp vara hjlpsam?",type:"textarea"},value:e.ex_2||"",onChange:c}),d.jsx(Iu,{data:{id:"ex_3",label:"P vilket stt kan ansvaret fr ens egna val knnas bde befriande och betungande? Diskutera.",type:"textarea"},value:e.ex_3||"",onChange:c})]}),d.jsxs("div",{className:"mb-20",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[d.jsx("h2",{className:"serif-font text-3xl font-bold text-slate-900",children:"Del 2: Fenomenologins roll"}),d.jsx("div",{className:"h-px flex-1 bg-slate-100"})]}),d.jsx("p",{className:"mb-10 text-slate-500 italic max-w-2xl",children:"Fenomenologin syftar till att studera fenomen som de uppenbarar sig i vrt medvetande. Det handlar inte om varfr ngot hnder, utan hur det upplevs."}),d.jsx(Iu,{data:{id:"fe_1",label:"Hur kan en fenomenologisk instllning (att beskriva upplevelsen utan att tolka den) vara anvndbar nr en person berttar om en stark knsla som ilska eller sorg?",type:"textarea"},value:e.fe_1||"",onChange:c}),d.jsx(Iu,{data:{id:"fe_2",label:'Ge ett exempel p en frutfattad mening eller frdom som en terapeut skulle kunna behva "stta i parentes" (epoch) fr att fullt ut frst en klients unika upplevelse.',type:"textarea"},value:e.fe_2||"",onChange:c}),d.jsx(Iu,{data:{id:"fe_3",label:"P vilket stt skiljer sig ett fenomenologiskt perspektiv frn ett medicinskt eller diagnostiskt perspektiv nr det gller att frst mnskligt lidande?",type:"textarea"},value:e.fe_3||"",onChange:c})]}),d.jsxs("div",{className:"mb-20",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[d.jsx("h2",{className:"serif-font text-3xl font-bold text-slate-900",children:"Del 3: Praktik & Case"}),d.jsx("div",{className:"h-px flex-1 bg-slate-100"})]}),d.jsxs("div",{className:"bg-amber-50/40 p-10 rounded-3xl border border-amber-100/50 mb-8 shadow-sm",children:[d.jsx("h3",{className:"serif-font text-2xl font-bold text-amber-900 mb-4 flex items-center gap-2",children:'Fallbeskrivning 1: "Valets tyngd"'}),d.jsx("p",{className:"text-slate-700 mb-8 leading-relaxed",children:d.jsx("em",{children:"Anna (35 r) knner sig olycklig p sitt jobb men vgar inte sluta d hon inte vet vad hon annars skulle gra. Hon knner sig fngad av omstndigheterna."})}),d.jsx(Iu,{data:{id:"case_1",label:"Mina anteckningar/reflektioner fr Fall 1:",type:"textarea"},value:e.case_1||"",onChange:c})]}),d.jsxs("div",{className:"bg-slate-50 p-10 rounded-3xl border border-slate-100 shadow-sm",children:[d.jsx("h3",{className:"serif-font text-2xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:'Fallbeskrivning 2: "Tomheten inom mig"'}),d.jsx("p",{className:"text-slate-700 mb-8 leading-relaxed",children:d.jsx("em",{children:'Erik (28 r) beskriver en knsla av tomhet och meningslshet trots att han har ett "bra liv" p pappret.'})}),d.jsx(Iu,{data:{id:"case_2a",label:"Rollspel/diskussion: Hur skulle du som Gestaltterapeut arbeta med detta uttalande?",type:"textarea"},value:e.case_2a||"",onChange:c}),d.jsx(Iu,{data:{id:"case_2b",label:"Vilka frgor skulle du stlla? Vilka observationer skulle du gra?",type:"textarea"},value:e.case_2b||"",onChange:c})]})]}),d.jsxs("div",{className:"no-print mt-24 mb-12 overflow-hidden bg-slate-50 rounded-3xl border border-slate-100",children:[d.jsxs("div",{className:"p-10 md:p-14 text-center",children:[d.jsx("h3",{className:"serif-font text-3xl font-bold text-slate-900 mb-4",children:"Redo att slutfra?"}),d.jsx("p",{className:"text-slate-500 mb-10 max-w-lg mx-auto",children:"Skicka in dina svar till oss och f en omedelbar AI-reflektion som std fr din process."}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[d.jsxs("button",{onClick:h,className:"w-full sm:w-auto px-8 py-4 bg-white text-slate-700 font-semibold rounded-2xl hover:bg-slate-50 border border-slate-200 transition-all flex items-center justify-center gap-3 shadow-sm hover:shadow active:scale-[0.98]",children:[d.jsx("svg",{className:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Ladda hem svaren"]}),d.jsx("button",{onClick:u,disabled:a,className:"w-full sm:w-auto px-8 py-4 bg-blue-600 text-white font-bold rounded-2xl hover:bg-blue-700 transition-all disabled:opacity-50 flex items-center justify-center gap-3 shadow-lg shadow-blue-500/20 active:scale-[0.98]",children:a?d.jsxs(d.Fragment,{children:[d.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Skickar in..."]}):d.jsxs(d.Fragment,{children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Skicka in svaret & f en reflektion"]})})]})]}),r&&d.jsx("div",{className:"px-10 pb-14 md:px-14 animate-in fade-in slide-in-from-top-4 duration-500",children:d.jsxs("div",{className:"p-8 bg-blue-900 rounded-2xl text-white shadow-inner relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:d.jsx("svg",{className:"w-24 h-24",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3z"})})}),d.jsxs("h4",{className:"text-xl font-bold mb-6 flex items-center gap-3",children:[d.jsx("div",{className:"w-8 h-8 bg-blue-500/30 rounded-full flex items-center justify-center",children:d.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),"Vr Reflektion"]}),d.jsx("div",{className:"whitespace-pre-wrap italic text-blue-50 leading-loose prose prose-invert max-w-none font-medium",children:r})]})})]}),d.jsxs("footer",{className:"mt-24 pt-12 border-t border-slate-100 text-center",children:[d.jsx("p",{className:"serif-font text-2xl font-bold text-slate-900 mb-6 italic",children:"Som avslut s kan vi frga oss: Vad hnder nu?"}),d.jsx("div",{className:"max-w-2xl mx-auto space-y-6",children:d.jsxs("p",{className:"text-slate-600 leading-relaxed text-lg font-light",children:["Du fr grna skicka in dina svar och f en reflektion tillbaka frn oss och vi rekomenderar samtidigt att du besker vr blogg: ",d.jsx("a",{href:"http://www.klattertradet.se/blogg",className:"text-blue-600 hover:text-blue-700 underline underline-offset-4 decoration-blue-200 font-semibold transition-colors",children:"www.klattertradet.se/blogg"})," samtidigt s pminner vi om vra community mjligheter"]})}),d.jsx("div",{className:"flex flex-col items-center justify-center mt-16 gap-4",children:d.jsxs("div",{className:"flex items-center gap-4 text-xs font-bold tracking-widest text-slate-300 uppercase",children:[d.jsx("span",{children:"Klttertrdet  2024"}),d.jsx("span",{className:"w-1 h-1 bg-slate-200 rounded-full"}),d.jsx("span",{children:"Horisonten Community"})]})})]})]})]})},QI={"--blue-500":"#3b82f6","--blue-100":"#eff6ff","--red-500":"#ef4444","--red-100":"#fef2f2","--orange-500":"#f97316","--orange-100":"#fff7ed","--purple-500":"#a855f7","--purple-100":"#faf5ff"},zH={light:{...QI,"--bg-color":"#fdfdfd","--text-color":"#333333","--accent-color":"#2c3e50","--secondary-text":"#666","--border-color":"#eee","--paper-shadow":"0 4px 20px rgba(0,0,0,0.1)","--info-green-dark":"#3f684c","--info-green-light":"#4b8a66","--info-bg-summary":"#e0f2f1","--info-text-summary":"#0f482d","--app-bg":"#eef2f5"},sepia:{...QI,"--bg-color":"#f4ecd8","--text-color":"#5b4636","--accent-color":"#463426","--secondary-text":"#7a6652","--border-color":"#e0d6c0","--paper-shadow":"0 4px 20px rgba(60, 50, 40, 0.15)","--info-green-dark":"#3f684c","--info-green-light":"#4b8a66","--info-bg-summary":"#e8e0cc","--info-text-summary":"#3d2f24","--app-bg":"#e4dcc8"},dark:{...QI,"--bg-color":"#1a1a1a","--text-color":"#e0e0e0","--accent-color":"#4da6ff","--secondary-text":"#aaaaaa","--border-color":"#333","--paper-shadow":"0 4px 20px rgba(0,0,0,0.5)","--info-green-dark":"#2d4a36","--info-green-light":"#6eb58d","--info-bg-summary":"#25332e","--info-text-summary":"#a7f3d0","--app-bg":"#111111","--blue-100":"rgba(59, 130, 246, 0.2)","--red-100":"rgba(239, 68, 68, 0.2)","--orange-100":"rgba(249, 115, 22, 0.2)","--purple-100":"rgba(168, 85, 247, 0.2)"}},g3e=({currentTheme:t,onThemeChange:e,onBack:n})=>d.jsxs("div",{className:"sticky top-5 z-50 flex items-center gap-4 px-4 md:px-6 py-3 mb-8 bg-white/90 backdrop-blur-md rounded-full shadow-lg border border-gray-200",children:[d.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-3 py-1.5 hover:bg-black/5 rounded-full transition-colors text-gray-700 font-medium text-sm border border-gray-200",children:[d.jsx(Jo,{size:16}),d.jsx("span",{className:"hidden sm:inline",children:"Tillbaka"})]}),d.jsx("div",{className:"w-px h-6 bg-gray-200 mx-1"}),d.jsx("button",{onClick:()=>e("light"),className:`w-8 h-8 rounded-full border-2 transition-transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${t==="light"?"border-[var(--accent-color)] ring-2 ring-blue-500":"border-transparent"}`,style:{backgroundColor:"#fff",border:t==="light"?"2px solid #2c3e50":"1px solid #ddd"},title:"Ljust lge","aria-label":"Ljust lge"}),d.jsx("button",{onClick:()=>e("sepia"),className:`w-8 h-8 rounded-full border-2 transition-transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 ${t==="sepia"?"border-[var(--accent-color)] ring-2 ring-amber-500":"border-transparent"}`,style:{backgroundColor:"#f4ecd8"},title:"Sepia lge","aria-label":"Sepia lge"}),d.jsx("button",{onClick:()=>e("dark"),className:`w-8 h-8 rounded-full border-2 transition-transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 ${t==="dark"?"border-[var(--accent-color)] ring-2 ring-gray-500":"border-transparent"}`,style:{backgroundColor:"#333"},title:"Mrkt lge","aria-label":"Mrkt lge"})]}),v3e=()=>{const[t,e]=J.useState(!1);return d.jsxs("div",{id:"top",className:"relative w-full mb-12 md:mb-16 rounded-lg overflow-hidden shadow-xl bg-slate-800",style:{minHeight:t?"0":"auto"},children:[!t&&d.jsx("img",{src:"https://images.unsplash.com/photo-1518066000714-cdcd8253b052?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Bokomslag: Myndighets-inducerat Trauma",className:"w-full h-auto block transition-all duration-300 ease-in-out hover:scale-[1.02] hover:shadow-xl",style:{filter:"blur(0.5px) brightness(1.05) saturate(1.05)"},onError:()=>e(!0)}),t&&d.jsxs("div",{className:"w-full aspect-[2/3] flex flex-col items-center justify-center bg-[var(--accent-color)] text-[var(--bg-color)] p-4 text-center",children:[d.jsx("div",{className:"text-6xl mb-4",children:""}),d.jsx("p",{className:"opacity-70",children:"Bilden 'cover.jpg' saknas"})]}),d.jsxs("div",{className:`absolute inset-0 z-10 flex flex-col justify-end items-center p-4 sm:p-8 md:p-12 pb-8 sm:pb-12 ${t?"bg-transparent":"bg-gradient-to-b from-transparent via-transparent to-[rgba(0,0,0,0.8)]"}`,children:[t&&d.jsxs("h1",{className:"font-serif text-4xl sm:text-5xl md:text-7xl lg:text-8xl font-black text-white text-center mb-8 leading-tight tracking-wide w-full max-w-[95%] break-words hyphens-auto",style:{textShadow:"2px 2px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000, 0 4px 20px rgba(0,0,0,0.8)"},children:["Myndighets-",d.jsx("br",{}),"inducerat trauma"]}),!t&&d.jsx("h1",{className:"sr-only",children:"Myndighets-inducerat trauma"}),d.jsx("div",{className:"font-sans text-base sm:text-lg md:text-2xl font-normal tracking-wide opacity-95 mb-4 md:mb-8 text-gray-100 drop-shadow-md text-center px-2",children:"Frn subjekt till objekt"}),d.jsx("div",{className:"font-sans text-xs sm:text-sm md:text-lg font-bold uppercase tracking-[0.2em] text-gray-200 border-t border-gray-400/50 pt-3 md:pt-5 inline-block px-4 text-center",children:"Av: Billy Ljungberg & Malin Widerlv"})]})]})},y3e=()=>{const t=(n,r)=>{n.preventDefault();const i=document.getElementById(r.substring(1));if(i){const s=document.body.getBoundingClientRect().top,u=i.getBoundingClientRect().top-s-80;window.scrollTo({top:u,behavior:"smooth"})}},e=[{id:"#chap1",label:"Kapitel 1",title:"Konceptuell Inramning"},{id:"#chap2",label:"Kapitel 2",title:"Definition"},{id:"#diagram-mit",label:"Modell",title:"Traumacykeln",isModell:!0},{id:"#chap3",label:"Kapitel 3",title:"Frn subjekt till objekt",sub:[{id:"#sec3-1",title:"3.1 MiV  Nr lagen blir vapen"},{id:"#sec3-2",title:"3.2 Systemkritik vs Enskilda fall"},{id:"#sec3-4",title:"3.4 De fyra rrelserna"},{id:"#sec3-6",title:"3.6 Definition av MiV"}]},{id:"#chap4",label:"Kapitel 4",title:"Systeminducerad retraumatisering"},{id:"#chap5",label:"Kapitel 5",title:"Systemets objektifiering",sub:[{id:"#sec5-1",title:"5.1 Barnen blir verksamhetskapital"},{id:"#sec5-2",title:"5.2 Biopolitisk kontroll"},{id:"#sec5-3",title:"5.3 Konsekvensen: Det administrativa vldet"}]},{id:"#chap6",label:"Kapitel 6",title:"Frldern som restprodukt",sub:[{id:"#sec6-1",title:"6.1 Othering / Andregrande"},{id:"#sec6-2",title:"6.2 Principen om neutralisering"},{id:"#sec6-3",title:"6.3 Frn rttsbrare till objekt"},{id:"#sec6-4",title:"6.4 Kapital kontra avfall"}]}];return d.jsxs("div",{className:"mt-10 mb-4 p-6 md:p-10 border border-[var(--border-color)] rounded-lg bg-black/5",children:[d.jsx("h3",{className:"mt-0 mb-8 text-center font-sans text-sm uppercase tracking-widest text-[var(--secondary-text)]",children:"Innehllsfrteckning"}),d.jsx("nav",{children:d.jsx("ul",{className:"list-none p-0 m-0",children:e.map((n,r)=>d.jsxs("li",{className:"mb-4",children:[d.jsxs("a",{href:n.id,onClick:i=>t(i,n.id),className:"flex justify-between items-baseline text-[var(--text-color)] no-underline hover:text-[var(--accent-color)] transition-colors duration-200 group",children:[d.jsx("span",{className:"text-xs font-sans font-bold uppercase tracking-tighter text-[var(--secondary-text)] mr-4 shrink-0",children:n.label}),d.jsx("span",{className:"flex-grow border-b border-dotted border-[var(--border-color)] mx-2 translate-y-[-4px] opacity-30 group-hover:opacity-100"}),d.jsx("span",{className:`font-bold text-right ${n.isModell?"italic text-[var(--info-green-light)]":""}`,children:n.title})]}),n.sub&&d.jsx("ul",{className:"list-none pl-10 mt-2 space-y-1 border-l border-[var(--border-color)] ml-4",children:n.sub.map((i,a)=>d.jsx("li",{children:d.jsx("a",{href:i.id,onClick:s=>t(s,i.id),className:"text-sm text-[var(--secondary-text)] hover:text-[var(--accent-color)] transition-colors duration-200 block py-0.5",children:i.title})},a))})]},r))})})]})},BH=({title:t,children:e})=>{const[n,r]=J.useState(!1);return d.jsxs("div",{className:"my-8 border border-[var(--border-color)] rounded-lg overflow-hidden transition-colors duration-300",children:[d.jsxs("button",{onClick:()=>r(!n),className:"flex justify-between items-center w-full px-6 py-4 bg-[var(--bg-color)] text-[var(--accent-color)] font-sans font-bold text-lg cursor-pointer hover:bg-black/5 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)]","aria-expanded":n,"aria-controls":`expandable-content-${t.replace(/\s/g,"-")}`,children:[d.jsx("span",{children:t}),d.jsx("svg",{className:`w-5 h-5 transition-transform duration-300 ${n?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),d.jsx("div",{id:`expandable-content-${t.replace(/\s/g,"-")}`,className:`transition-all duration-500 ease-in-out overflow-hidden ${n?"max-h-screen":"max-h-0"}`,children:d.jsx("div",{className:"p-6 pt-2 bg-[var(--bg-color)] border-t border-[var(--border-color)] text-[var(--text-color)]",children:e})})]})},x3e=()=>d.jsxs("div",{id:"chap1",children:[d.jsxs("header",{className:"text-center mb-12 pt-5",children:[d.jsx("span",{className:"block font-sans text-sm font-bold uppercase tracking-widest text-[var(--secondary-text)] mb-3",children:"Kapitel ett"}),d.jsx("h2",{className:"font-sans text-3xl md:text-4xl text-[var(--accent-color)] font-bold tracking-tight",children:"Konceptuell Inramning: Myndighetsansvar och Systemisk Skada"})]}),d.jsxs("section",{className:"mb-12",children:[d.jsx("h3",{className:"font-sans text-xl font-bold uppercase tracking-wide text-[var(--secondary-text)] mb-4 border-b border-[var(--border-color)] pb-2",children:"Definition"}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed hyphens-auto",children:"Myndighetsinducerat trauma r ett djupt och komplext trauma som uppstr nr en individ, eller flera individer inom ett system som en familj blir utsatta fr ingripanden frn myndighet som r i sdan pass grad att det ver tid ger symptom p livet som gr att pongen Utredningsmaterialet utgr minst hlften. I denna process bervas de gradvis sin autonomi, sin rst, sitt tolkningsfretrde, sitt eget narrativ och i mnga fall ven sin relation till varandra."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed hyphens-auto",children:"Detta r ett trauma som initialt uppvisar alla de markrer som terfinns i diagnosen fr posttraumatiskt stressyndrom (PTSD) men en bit in i processessen utgr de symptom som snarare liknar c-PTSD."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed hyphens-auto",children:"Till skillnad frn mnga andra trauman frvrras Myndighetsinducerat trauma i regel ver tid och i en process som nedan kommer beskrivas i detalj. I sin mest komplexa form utreds det ibland med skalor som PCL-5 vilken anvnds fr att utreda komplex posttraumatiskt stressyndrom (c-PTSD)."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed hyphens-auto",children:"Precis som i Eva Langes teori om vldets normaliseringsprocess gr det in i en fas av normalisering dr den vldsutsatta personen brjar skuldbelgga sig sjlv och inte lngre frmr ta sig ur den destruktiva processen."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed hyphens-auto",children:"Den utsattas sanning vnds successivt mot personen sjlv och utt sett kan det uppfattas som att individen saknar ambition att lsa den ptvingade situationen eller att personen sjlv har gjort tillrckligt fel fr att frtjna den skada som frvaren utstter dem och deras barn fr."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed hyphens-auto",children:"Myndighetsinducerat trauma uppstr inte som ett resultat av illvilja i en enskild myndighetsutvares personliga ambition eller att intentionen bakom gllande lagstiftning skulle vara felaktig. Det har heller inget att gra med det narrativ som myndigheten presenterar fr den utsatta, deras familj eller fr sig sjlva. Den skada som vi beskriver har enbart att gra med vad som faktiskt har gjorts, hur det utfrts och hur de som mter myndigheterna pverkats utav det- oavsett den personliga ambitionen bakom handlingen."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed hyphens-auto",children:"Denna skada har fr att frtydliga lite inte med lagstiftningens ursprungliga syfte eller intention att gra utan svrigheten att hlla sig inom det lagrum som r oss givna utan att tolka dessa till sin egen personliga frdel."})]}),d.jsx("h3",{className:"font-sans text-2xl text-[var(--accent-color)] font-bold tracking-tight mt-12 mb-6",children:"Vanliga Frgor & Svar"}),d.jsx(BH,{title:"Vad r skillnaden mellan MiT och MiV?",children:d.jsxs("p",{className:"leading-relaxed",children:[d.jsx("strong",{children:"MiT (Myndighetsinducerat Trauma)"})," r den skada/sr som uppstr hos individen. Det r konsekvensen av interaktionen.",d.jsx("br",{}),d.jsx("br",{}),d.jsx("strong",{children:"MiV (Myndighetsinducerat Vld)"})," r handlingen eller processen som orsakar skadan, ofta karaktriserad av strategisk anvndning av systemet fr att skada."]})}),d.jsxs(BH,{title:"Vilka teoretiska flt frklarar MiT/V?",children:[d.jsx("p",{className:"mb-4 leading-relaxed",children:"Fr att frst MiT/V anvnder vi en syntes av flera kritiska flt:"}),d.jsxs("ul",{className:"list-disc pl-5 space-y-2 mb-4 leading-relaxed",children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Institutionssvek (IBT):"})," Frklarar den psykologiska chocken nr en beskyddare blir frvare."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Strukturellt Vld (SV):"})," Belyser hur lagar och regler kan vara vldsamma i sin effekt, ven utan illvilja."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Organisatoriskt Trauma (OT):"})," Hur systemet i sig kan vara traumatiserat och traumatisera sina anstllda och klienter."]})]}),d.jsxs("p",{className:"leading-relaxed",children:["Vi integrerar ven delar av ",d.jsx("strong",{children:"polyvagal teori"})," (fr att frst nervsystemets reaktioner p hot frn systemet), ",d.jsx("strong",{children:"interpersonell neurobiologi"})," (hur hjrnan pverkas av relationella brott), ",d.jsx("strong",{children:"objektrelationsteori"})," och ",d.jsx("strong",{children:"anknytningsteori"}),"."]}),d.jsxs("p",{className:"leading-relaxed mt-2",children:["I det terapeutiska arbetet med drabbade personer arbetar vi till viss del manualbaserat men i vrigt frmst med ",d.jsx("strong",{children:"bottom up"}),"-metoder, dr vi utgr frn kroppens och nervsystemets signaler fr att terstlla trygghet innan vi bearbetar kognitiva narrativ."]})]}),d.jsx("h3",{className:"font-sans text-2xl text-[var(--accent-color)] font-bold tracking-tight mt-12 mb-5",children:"1.1 Inledning"}),d.jsx("h4",{className:"font-sans text-lg font-bold text-[var(--text-color)] mt-8 mb-4 tracking-tight",children:"Att frst det Osynliga Sret"}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed hyphens-auto",children:"Denna bok mnar belysa ett djupt och komplext mnskligt lidande: Myndighetsinducerat Trauma (MiT)."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed hyphens-auto",children:"Trauma r ett ord vi ofta associerar med krig, olyckor eller naturkatastrofer, men MiT uppstr i en mer subtil, men ack s destruktiv kontext: nr en individ, eller flera individer inom ett system som en familj, utstts fr ingripanden frn en myndighet."}),d.jsx("div",{className:"bg-black/5 p-6 rounded-lg mb-6 border-l-4 border-[var(--accent-color)] italic",children:d.jsxs("p",{className:"mb-0 text-justify leading-relaxed",children:[d.jsx("strong",{className:"text-[var(--accent-color)]",children:"MiT definieras som"})," ett djupt och komplext trauma som uppstr nr en individ (eller flera individer inom ett system som en familj) blir utsatt fr myndighetsingripanden i sdan pass grad att det ver tid ger symptom p livet. De drabbade bervas successivt sin autonomi, sin rst och sitt egna narrativ  allts sin rtt att tolka det som hnder dem."]})}),d.jsx("h4",{className:"font-sans text-lg font-bold text-[var(--text-color)] mt-8 mb-4 tracking-tight",children:"Vi pratar inte om posttraumatiskt stressyndrom"}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed hyphens-auto",children:"Det som gr MiT unikt r dess ursprung och utveckling. Initialt kan detta trauma uppvisa alla de markrer som terfinns i diagnosen Posttraumatiskt stressyndrom (PTSD). PTSD r vanligen kopplat till en enskild traumatisk hndelse."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed hyphens-auto",children:"Men nr traumat intrffar i en kontext av upprepade och lngvariga krnkningar av tillit och skerhet, vilket r typiskt fr MiT, liknar symptom snarare Komplext posttraumatiskt stressyndrom (C-PTSD). Denna gradvisa utarmning av autonomi sker i regel ver tid."}),d.jsx("h4",{className:"font-sans text-lg font-bold text-[var(--text-color)] mt-8 mb-4 tracking-tight",children:"Vldets Normalisering"}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed hyphens-auto",children:'En central aspekt som frvrrar MiT r det Eva Langes teori kallar vldets normalisering. Den utsatta personen brjar skuldbelgga sig sjlv, och det destruktiva narrativet  att individen "gjort ett olyckligt fel"  blir deras sanning. Detta kan leda till att det utt sett uppfattas som att individen r den som har en problematik, ssom "Kverulantparanoia". Den drabbade individen slutar kmpa, och i slutndan upplevs det som att ha blivit "medborgare noll".'}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed hyphens-auto",children:"Syftet med denna bok r att tillhandahlla en noggrann utredning av MiT och MiV, och att belysa denna dynamik i detalj. Genom att ge en rst t det osynliga sret hoppas vi bidra till kad insikt och ndvndig frndring."})]}),b3e=()=>d.jsxs("div",{id:"chap2",children:[d.jsx("div",{className:"text-center text-[var(--secondary-text)] text-2xl my-10 tracking-widest",children:"***"}),d.jsxs("header",{className:"text-center mb-12 pt-5",children:[d.jsx("span",{className:"block font-sans text-sm font-bold uppercase tracking-widest text-[var(--secondary-text)] mb-3",children:"Kapitel Tv"}),d.jsx("h2",{className:"font-sans text-3xl md:text-4xl text-[var(--accent-color)] font-bold tracking-tight",children:"Definition"})]}),d.jsxs("div",{className:"prose prose-lg text-[var(--text-color)] max-w-none",children:[d.jsx("p",{className:"mb-6 text-justify leading-relaxed hyphens-auto",children:"Myndighetsinducerat trauma r ett djupt och komplext trauma som uppstr nr en individ, eller flera individer inom ett system som en familj blir utsatta fr ingripanden frn myndighet som r i sdan pass grad att det ver tid ger symptom p livet som gr att pongen Utredningsmaterialet utgr minst hlften. I denna process bervas de gradvis sin autonomi, sin rst, sitt tolkningsfretrde, sitt eget narrativ och i mnga fall ven sin relation till varandra."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed hyphens-auto",children:"Detta r ett trauma som initialt uppvisar alla de markrer som terfinns i diagnosen fr posttraumatiskt stressyndrom (PTSD) men en bit in i processessen utgr de symptom som snarare liknar c-PTSD."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed hyphens-auto",children:"Till skillnad frn mnga andra trauman frvrras Myndighetsinducerat trauma i regel ver tid och i en process som nedan kommer beskrivas i detalj. I sin mest komplexa form utreds det ibland med skalor som PCL-5 vilken anvnds fr att utreda komplex posttraumatiskt stressyndrom (c-PTSD)."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed hyphens-auto",children:"Precis som i Eva Langes teori om vldets normaliseringsprocess gr det in i en fas av normalisering dr den vldsutsatta personen brjar skuldbelgga sig sjlv och inte lngre frmr ta sig ur den destruktiva processen."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed hyphens-auto",children:"Den utsattas sanning vnds successivt mot personen sjlv och utt sett kan det uppfattas som att individen saknar ambition att lsa den ptvingade situationen eller att personen sjlv har gjort tillrckligt fel fr att frtjna den skada som frvaren utstter dem och deras barn fr."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed hyphens-auto",children:"Myndighetsinducerat trauma uppstr inte som ett resultat av illvilja i en enskild myndighetsutvares personliga ambition eller att intentionen bakom gllande lagstiftning skulle vara felaktig. Det har heller inget att gra med det narrativ som myndigheten presenterar fr den utsatta, deras familj eller fr sig sjlva. Den skada som vi beskriver har enbart att gra med vad som faktiskt har gjorts, hur det utfrts och hur de som mter myndigheterna pverkats utav det- oavsett den personliga ambitionen bakom handlingen."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed hyphens-auto",children:"Denna skada har fr att frtydliga lite inte med lagstiftningens ursprungliga syfte eller intention att gra utan svrigheten att hlla sig inom det lagrum som r oss givna utan att tolka dessa till sin egen personliga frdel."})]})]}),_3e=({content:t,children:e})=>{const[n,r]=J.useState(!1),i=J.useRef(null),a=J.useRef(null),s=J.useId(),o=()=>r(!0),c=()=>r(!1);return d.jsxs("span",{ref:i,className:"relative inline-block cursor-help group focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-color)] focus-visible:ring-offset-2 rounded-sm",onMouseEnter:o,onMouseLeave:c,onFocus:o,onBlur:c,tabIndex:0,"aria-describedby":s,children:[e,n&&d.jsxs("div",{id:s,ref:a,role:"tooltip",className:"absolute z-50 px-4 py-2 text-sm text-[var(--bg-color)] bg-[var(--text-color)] rounded-md shadow-lg opacity-95 pointer-events-none whitespace-nowrap -translate-x-1/2 left-1/2 bottom-full mb-2 group-hover:opacity-100 transition-opacity duration-200",children:[t,d.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 border-8 border-transparent border-t-[var(--text-color)] bottom-[-16px]"})]})]})},w3e=()=>d.jsxs("div",{children:[d.jsx("div",{className:"text-center text-[var(--secondary-text)] text-2xl my-10 tracking-widest",children:"***"}),d.jsxs("div",{id:"diagram-mit",className:"bg-[var(--bg-color)] border border-[var(--border-color)] rounded-xl p-8 my-16 font-sans text-[var(--text-color)] shadow-sm relative overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-gray-50 opacity-[0.05] pointer-events-none"}),d.jsx("div",{className:"text-center mb-10 relative z-10 px-4",children:d.jsx("h2",{className:"text-2xl md:text-3xl font-black mb-3 text-[var(--accent-color)] leading-tight",children:"Myndighetsinducerat trauma, En cyklisk process av beroende, svek och normalisering"})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 relative z-10",children:[d.jsx("div",{className:"hidden md:flex absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-16 bg-[var(--bg-color)] border-4 border-gray-200 rounded-full items-center justify-center z-20 shadow-lg",children:d.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-400","aria-hidden":"true",children:[d.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),d.jsx("path",{d:"M3 3v5h5"}),d.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9 0 0 0 6.74-2.74L21 16"}),d.jsx("path",{d:"M16 16l5 5v-5"})]})}),d.jsxs("div",{className:"bg-[var(--bg-color)] p-6 rounded-xl shadow-md border-t-4 border-[var(--blue-500)] relative flex flex-col md:col-start-1 md:row-start-1 transition-all duration-300 ease-in-out hover:scale-[1.02] hover:shadow-xl",children:[d.jsx("span",{className:"absolute top-3 right-4 text-5xl font-black opacity-5 pointer-events-none",children:"1"}),d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mr-3 bg-[var(--blue-100)] text-[var(--blue-500)]",children:d.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[d.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),d.jsx("div",{className:"font-bold text-lg leading-tight",children:"Fas 1: Beroende & Srbarhet"})]}),d.jsx("p",{className:"text-sm text-[var(--secondary-text)] mb-4 flex-grow",children:"Individen befinner sig i ett ofrivilligt beroendefrhllande till myndigheten (ekonomiskt bistnd, vrdnadstvist, asyl)."}),d.jsx("ul",{className:"space-y-1",children:["Hg srbarhet hos individen","Implicit frvntan p professionellt skydd","Ofrivilligt beroende av systemet"].map((t,e)=>d.jsxs("li",{className:"text-xs text-[var(--secondary-text)] flex items-start",children:[d.jsx("span",{className:"w-1.5 h-1.5 rounded-full mt-1.5 mr-2 bg-[var(--blue-500)] shrink-0"}),t]},e))})]}),d.jsxs("div",{className:"bg-[var(--bg-color)] p-6 rounded-xl shadow-md border-t-4 border-[var(--red-500)] relative flex flex-col md:col-start-2 md:row-start-1 transition-all duration-300 ease-in-out hover:scale-[1.02] hover:shadow-xl",children:[d.jsx("span",{className:"absolute top-3 right-4 text-5xl font-black opacity-5 pointer-events-none",children:"2"}),d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mr-3 bg-[var(--red-100)] text-[var(--red-500)]",children:d.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[d.jsx("path",{d:"M14 13l-7.5 7.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L11 10"}),d.jsx("path",{d:"m16 16 6-6"}),d.jsx("path",{d:"m8 8 6-6"}),d.jsx("path",{d:"m9 7 8 8"}),d.jsx("path",{d:"m21 11-8-8"})]})}),d.jsx("div",{className:"font-bold text-lg leading-tight",children:"Fas 2: Institutionellt Svek (IB)"})]}),d.jsx("p",{className:"text-sm text-[var(--secondary-text)] mb-4 flex-grow",children:"Myndigheten misslyckas med att agera skyddande eller adekvat genom kompetensbrist eller felaktiga utredningar."}),d.jsx("ul",{className:"space-y-1",children:["Pragmatisk skada (frlust av resurser)","Psykologisk skada (ogiltigfrklarande)","Administrativ lngsamhet"].map((t,e)=>d.jsxs("li",{className:"text-xs text-[var(--secondary-text)] flex items-start",children:[d.jsx("span",{className:"w-1.5 h-1.5 rounded-full mt-1.5 mr-2 bg-[var(--red-500)] shrink-0"}),t]},e))})]}),d.jsxs("div",{className:"bg-[var(--bg-color)] p-6 rounded-xl shadow-md border-t-4 border-[var(--orange-500)] relative flex flex-col md:col-start-2 md:row-start-2 transition-all duration-300 ease-in-out hover:scale-[1.02] hover:shadow-xl",children:[d.jsx("span",{className:"absolute top-3 right-4 text-5xl font-black opacity-5 pointer-events-none",children:"3"}),d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mr-3 bg-[var(--orange-100)] text-[var(--orange-500)]",children:d.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[d.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),d.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),d.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),d.jsxs("div",{className:"font-bold text-lg leading-tight",children:["Fas 3: Traumareaktion &"," ",d.jsx(_3e,{content:"En reaktion dr frvaren frnekar vergrepp, attackerar offret och vnder p rollerna s offret framstr som frvaren.",children:d.jsx("span",{className:"underline decoration-dashed decoration-[var(--orange-500)] text-[var(--orange-500)]",children:"DARVO"})})]})]}),d.jsx("p",{className:"text-sm text-[var(--secondary-text)] mb-4 flex-grow",children:"Akut stress och maktlshet. Myndigheten kan anvnda DARVO (Deny, Attack, Reverse Victim & Offender) fr att frneka sveket."}),d.jsx("ul",{className:"space-y-1",children:["Undertryckande av insikt (Betrayal Blindness)","Akut stress och skam","Systemet reverserar offer/frvare"].map((t,e)=>d.jsxs("li",{className:"text-xs text-[var(--secondary-text)] flex items-start",children:[d.jsx("span",{className:"w-1.5 h-1.5 rounded-full mt-1.5 mr-2 bg-[var(--orange-500)] shrink-0"}),t]},e))})]}),d.jsxs("div",{className:"bg-[var(--bg-color)] p-6 rounded-xl shadow-md border-t-4 border-[var(--purple-500)] relative flex flex-col md:col-start-1 md:row-start-2 transition-all duration-300 ease-in-out hover:scale-[1.02] hover:shadow-xl",children:[d.jsx("span",{className:"absolute top-3 right-4 text-5xl font-black opacity-5 pointer-events-none",children:"4"}),d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mr-3 bg-[var(--purple-100)] text-[var(--purple-500)]",children:d.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[d.jsx("path",{d:"M19 14c1.49-1.28 3.6-2.35 4.57-1.4 1.75 1.71 0 4.29-1.57 5.86a4.504 4.504 0 0 1-6.36 0c-1.28-1.49-2.35-3.6-1.4-4.57 1.71-1.75 4.29 0 5.86 1.57.5.5.9 1.05 1.18 1.63"}),d.jsx("path",{d:"M11 11.5 5 17.5"}),d.jsx("path",{d:"M5 11.5 11 17.5"}),d.jsx("path",{d:"M4.2 9.8C2.5 8.1 3 5 6 5c1.5 0 2.5 1 3.5 2 1-1 2-2 3.5-2 3 0 3.5 3.1 1.8 4.8L9.5 14 4.2 9.8z"})]})}),d.jsx("div",{className:"font-bold text-lg leading-tight",children:"Fas 4: Kronisk Skada"})]}),d.jsx("p",{className:"text-sm text-[var(--secondary-text)] mb-4 flex-grow",children:"Upprepat svek leder till C-PTSD. Systemet krver att individen 'bevisar' sin skada, vilket vidmakthller cykeln."}),d.jsx("ul",{className:"space-y-1",children:["Eroderad tillit till sociala fltet","Hypervigilans och undvikande","Krav p bevisning terskapar trauma"].map((t,e)=>d.jsxs("li",{className:"text-xs text-[var(--secondary-text)] flex items-start",children:[d.jsx("span",{className:"w-1.5 h-1.5 rounded-full mt-1.5 mr-2 bg-[var(--purple-500)] shrink-0"}),t]},e))})]})]}),d.jsxs("div",{className:"mt-8 p-6 bg-[var(--bg-color)] border border-[var(--border-color)] rounded-lg text-center shadow-sm",children:[d.jsx("h4",{className:"text-[var(--text-color)] font-bold mb-2 text-lg",children:"Cykelns Natur"}),d.jsx("p",{className:"text-[var(--secondary-text)] text-sm",children:"Modellen visar hur det inte r en linjr process med ett slut, utan en cykel dr Fas 4 ofta leder tillbaka till nya krav frn myndigheten, vilket teraktiverar Fas 1 och vidmakthller traumat."})]})]}),d.jsxs("div",{className:"mt-16",children:[d.jsxs("header",{className:"text-center mb-10",children:[d.jsx("h2",{className:"font-sans text-2xl md:text-3xl font-bold text-[var(--accent-color)] mb-2",children:"Frn misstnkliggrande till kollaps"}),d.jsxs("p",{className:"font-sans text-lg text-[var(--secondary-text)] uppercase tracking-widest",children:["Processen och funktionen (MiT)",d.jsx("br",{}),d.jsx("span",{className:"text-sm normal-case block mt-1",children:"Sju funktioner fr att frst"})]})]}),d.jsxs("div",{className:"space-y-10",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-sans text-xl font-bold text-[var(--text-color)] mb-4",children:"Steg 1: Misstnkliggrande och aktivering"}),d.jsx("p",{className:"mb-4 text-justify leading-loose",children:"Myndigheten trder in i familjens liv, ofta p grund av en anmlan frn en motpart. Frldern frsker samarbeta och hvda sina grnser fr att skydda sin familj. Men redan hr inleds en tolkningsprocess frn myndigheten som ligger till grund fr frdande beslut."}),d.jsx("p",{className:"mb-4 text-justify leading-loose",children:'Frlderns frsvar uppfattas som ett "frsvarstal," och detta tolkningsfretrde fr inte ifrgasttas. Om en extern part som inte r en utbildad advokat frsker ifrgastta det, anses det oftast "inte frmja socialtjnstens process" och denna part avlgsnas frn rendet, vilket hindrar dem frn att delta som std till den anklagade.'}),d.jsx("p",{className:"mb-4 text-justify leading-loose",children:"Varje handling som utfrs av frldern misstolkas och omtolkas genom en lins av tolkad lagstiftning och gruppkultur. Omsorg blir kontroll, oro blir en projektion och varje annan rrelse frn den anklagade frldern bekrftar misstanken."}),d.jsx("p",{className:"mb-4 text-justify leading-loose",children:'Detta misstnkliggrande blir tyvrr den bevisbrda som senare anvnds fr att hlla familjen isr. Utredningar byggs p sekundrkllor, felaktigt tolkade citat och tolkade "signaler" frn barnet. Vid asymmetriska frldrakonflikter reduceras frlderns rst till "ord mot ord," dr deras berttelse blir en gisslan i en narrativ kollaps.'})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-sans text-xl font-bold text-[var(--text-color)] mb-4",children:"Steg 2: Frlusten av tolkningsfretrdet"}),d.jsx("p",{className:"mb-4 text-justify leading-loose",children:'Utredningen bygger p andrahandsinformation och ett direkt stllningstagande fr den som anmlt, i linje med idn om att "hellre skydda n fria."'}),d.jsx("p",{className:"mb-4 text-justify leading-loose",children:'Detta str i direkt motsttning till tingsrttens princip om att "hellre fria n flla." Den egna rsten hos frldern marginaliseras fullstndigt. Inom praktiken blir det en strid mellan "myndigheternas ord mot frldrarnas tystnad." Frldern blir en gisslan i en berttelse de inte fr pverka, dr deras historia filtreras genom ngon annans syfte.'})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-sans text-xl font-bold text-[var(--text-color)] mb-4",children:"Steg 3: Relationsundergrvning och frintande av det egna ordet"}),d.jsx("p",{className:"mb-4 text-justify leading-loose",children:"Bandet mellan frlder och barn ifrgastts. Frldern psts tidigt utgra en fara fr sitt eget barn, vilket r fallet antingen indirekt eller direkt. Kontakten mellan frldern och barnet begrnsas eller avslutas helt, ibland till vervakade trffar, och ibland till ingen kontakt alls. Det biologiska bandet finns kvar, men det undertrycks socialt. Samtidigt undergrvs den misstnktas knslor, som om behovet av relationen inte lngre ska finnas."}),d.jsx("p",{className:"mb-4 text-justify leading-loose",children:"Denna process skapar en djupgende klyvning dr affektiv frikoppling uppstr."})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-sans text-xl font-bold text-[var(--text-color)] mb-4",children:"Steg 4: Systematisk desorientering"}),d.jsx("p",{className:"mb-4 text-justify leading-loose",children:"Frldern vet inte lngre vad som r verkligt. Myndigheter kommunicerar i ett kodat sprk med en kommunikationsstil som r omjlig att frst och avkoda fr ngon utan frkunskaper eller som r knslomssigt pressad. Det r ven svrt att svara p ett korrekt stt eftersom svaret terigen kommer att omtolkas i journaler och utredningar."}),d.jsx("p",{className:"mb-4 text-justify leading-loose",children:"Detta strker myndighetens rst och narrativ. Frldern frvntas frn en dag till en annan frklara och frsvara sig mot anklagelser, utan att det ska lta som att de frsvarar sig. Samtidigt sker myndigheten efter stt dr den anklagade frldern sger emot sig sjlv fr att bekrfta det rdande narrativet. Frldern frlorar hr knslan av vad som r verkligt och brjar vnda sin egen sanning och intuition mot sig sjlv."}),d.jsx("p",{className:"mb-4 text-justify leading-loose",children:"Detta kallas institutionell gaslighting nr en person ifrgastter sig sjlv p grund av de vergrepp som begs av en institution."})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-sans text-xl font-bold text-[var(--text-color)] mb-4",children:"Steg 5: Tystnadens zon och autonom kollaps"}),d.jsx("p",{className:"mb-4 text-justify leading-loose",children:"Frldern frlorar mer och mer kontakten med sina barn. En konstlad kontakt, som gtt frn att vara sjlvklar till att marginaliseras till en vervakad trff p max 30 minuter i veckan, r p samma gng ndvndig och skadlig. Barnet vet, precis som frldern, genom vilken lins umgnget bevakas. Umgnget blir ltt frvarens frlngda arm."}),d.jsx("p",{className:"mb-4 text-justify leading-loose",children:"Kroppen och nervsystemet stnger av, precis som vid all annan form av traumatisering. Den dorsala vagusnerven tvingar ner aktivitetsnivn, och kroppen gr in i vad som kallas freeze och ofta den mest komplexa nivn av immobilisering. Vid denna punkt har frldern gradvis brjat bli den person som myndigheterna tidigare beskrev, ven om s inte var fallet innan. Mnga slutar svara p brev, ppnar inte post, svarar inte i telefonen, ignorerar kontaktfrsk, gr inte till affren och orkar inte lngre frklara sig fr ngon."})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-sans text-xl font-bold text-[var(--text-color)] mb-4",children:"Steg 6: Bandet fryser till is"}),d.jsx("p",{className:"mb-4 text-justify leading-loose",children:"Barnet blir tvunget att tro p den bild och det narrativ som mlats upp av den ifrgasatta omsorgspersonen. I mnga fall tvingas barnet anamma det sprk som har skapats kring omsorgspersonen. Frldern reduceras och marginaliseras till en siffra i ett system dr den sociala insatsen sllan rr sig utanfr sitt kontor mer n 1-1,5 timme i veckan och som hgst trffar barnet och frldern 30 minuter under hela rendet. Umgngen ses inte lngre som ndvndiga, eftersom frldern inte bara har reducerats och marginaliserats, utan ven har tappat svl sitt barn som sin autonomi, sin egen rst, sitt tolkningsfretrde, sitt narrativ och sin relation."})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-sans text-xl font-bold text-[var(--text-color)] mb-4",children:"Steg 7: Institutionellt vld"}),d.jsx("p",{className:"mb-4 text-justify leading-loose",children:"I vissa fall, srskilt i vrdnadstvister och pgende destruktiva separationer, utnyttjas myndigheters makt och inflytande i den enskilda mnniskans och familjers liv. Med att de utnyttjas menar vi i de fall dr till exempel en frlder sker skyddat boende fr ett annat syfte n vad en skyddsplacering avser (dr placeringsformen inte i tillrcklig grad kan styrkas och regleras) eller dr socialtjnsten motiverar en frlder till att aktivera skyddslagarna."})]})]})]})]}),_a=({children:t,pageNumber:e})=>d.jsxs("section",{className:"relative min-h-[60vh] flex flex-col pb-32 mb-16 last:mb-0 print:break-after-page",children:[d.jsx("div",{className:"flex-grow",children:t}),d.jsxs("div",{className:"absolute bottom-12 left-0 w-full flex flex-col items-center pointer-events-none select-none",children:[d.jsxs("div",{className:"flex items-center gap-4 text-[var(--secondary-text)]",children:[d.jsxs("svg",{width:"40",height:"20",viewBox:"0 0 40 20",fill:"none",className:"opacity-30",children:[d.jsx("path",{d:"M0 10C10 10 15 2 20 2C25 2 30 10 40 10",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round"}),d.jsx("path",{d:"M5 13C12 13 18 18 25 10",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round",strokeDasharray:"1 2"})]}),d.jsx("div",{className:"relative px-2",children:d.jsx("span",{className:"font-serif text-[var(--text-color)] font-bold text-xl tracking-tighter block min-w-[1.5ch] text-center",children:e})}),d.jsxs("svg",{width:"40",height:"20",viewBox:"0 0 40 20",fill:"none",className:"opacity-30 scale-x-[-1]",children:[d.jsx("path",{d:"M0 10C10 10 15 2 20 2C25 2 30 10 40 10",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round"}),d.jsx("path",{d:"M5 13C12 13 18 18 25 10",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round",strokeDasharray:"1 2"})]})]}),d.jsx("div",{className:"mt-6 w-32 h-px bg-gradient-to-r from-transparent via-[var(--border-color)] to-transparent opacity-20"})]}),d.jsx("div",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 w-full h-8 flex justify-center items-center pointer-events-none print:hidden opacity-10 overflow-hidden",children:d.jsx("div",{className:"w-full h-[1px] bg-gradient-to-r from-transparent via-[var(--text-color)] to-transparent"})})]}),S3e=({startPageNumber:t})=>{let e=t;return d.jsxs("div",{id:"chap3",children:[d.jsxs(_a,{pageNumber:e++,children:[d.jsx("div",{className:"text-center text-[var(--secondary-text)] text-2xl my-10 tracking-widest",children:"***"}),d.jsxs("header",{className:"mb-12",children:[d.jsx("h2",{className:"font-sans text-3xl md:text-5xl text-[var(--accent-color)] font-black tracking-tight mb-12",children:"3. Frn subjekt till objekt"}),d.jsx("h3",{id:"sec3-1",className:"font-sans text-2xl md:text-3xl text-[var(--text-color)] font-bold tracking-tight mb-8",children:"3.1 Myndighetsinducerat vld (MiV)  nr lagen blir vapen i myndigheters yrkesutvande"})]}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Myndighetsinducerat vld (MiV) brjar inte med knytnvar utan med en blankett. En blankett som utgr anskan om skyddat boende och den checkas i, ett kryss i ruta 3: hot frn andra vrdnadshavaren."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Handlggaren p socialkontoret har ibland tre veckors erfarenhet om ens en frdig socionomutbildning vilket r en bred och tmligen kort och ospecificerad utbildning."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed font-bold italic",children:"Drren stngs, lses, kopieras."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Nu finns ett nytt juridiskt rum dr oftast pappan r frvandlad till hotbild och mamman till skyddad part. Barnet har ftt ett eget rendenummer i det tysta regelverket: LSB  lagen om skyddat boende fr barn och uppfyller i och med LSB kraven fr sekretessmarkering av skatteverket."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Skatteverket gr dock inga egna utredningar utan lser ett utltande frn socialnmnden och tar utifrn detta ett vldigt omfattande beslut. Ingen domstol har nnu yttrat sig, ingen brottsutredning har inletts. nd r umgngesstoppet fullbordat sekretessen pskriven och flyttkedjan igng."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Detta r Myndighetsinducerat vld  en form av administrativt vld (Spade, 2015) dr byrkratiska processer anvnds fr att marginalisera individer (Neutraliseringsprincipen och objektifiering)"})]}),d.jsxs(_a,{pageNumber:e++,children:[d.jsx("h3",{id:"sec3-2",className:"font-sans text-2xl font-bold text-[var(--accent-color)] mb-6",children:"3.2 Ett klargrande om systemkritik kontra enskilda fall"}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Jag vill understryka och pminna om att jag, och vi i denna bok, inte tar stllning i enskilda fall av omhndertagande eller att det p ngot stt fel att ta kontakt med socialtjnst, polis eller andra instanser som r avsedda att hjlpa och skydda. Vi tar stller oss inte emot att det finns situationer dr ett ingripande r den enda terstende utvgen fr att skydda ett barn frn direkt fara. Syftet med detta verk r inte att kritisera enskilda tjnstemns intentioner eller specifika skyddsbeslut som vilar p faktiska grunder i brottsbalken. Vi pratar utifrn forskning, egenlevda ingripande och professionell erfarenhet och detta alltid p gruppniv, inte individniv."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Vrt fokus ligger p den systemiska nivn och de generella mnster vi ser. Nr vi talar om Myndighetsinducerat vld (MiV) adresserar vi hur sjlva maskineriet (det som Max Weber (1922) beskrev som byrkratins jrnbur) nr det saknar tillrckliga motvikter skapar en destruktiv kraft p gruppniv. Det handlar om den processuella skada som uppstr nr lagrum som r avsedda fr skydd kan transformeras till vapen vilket vi tyvrr ser r vldigt vanligt och blir mer lttillgngligt genom dagens politiska utveckling."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Genom att betrakta det som en strukturell freteelse (Galtung, 1969) kan vi visa hur systemet- oberoende av enskilda handlggares goda vilja, riskerar att skapa det som r denna boks krna: Myndighetsinducerat trauma. Det r en ndvndig systemkritik fr att vrna om bde barnets rttigheter och rttsstatens principer; en analys av en samhllelig blind flck dr lagen riskerar att bli sin egen antites och skada vra barn, andras barn, frldrar och sjlvklart den kommande framtiden."})]}),d.jsxs(_a,{pageNumber:e++,children:[d.jsx("h3",{id:"sec3-3",className:"font-sans text-2xl font-bold text-[var(--accent-color)] mb-6",children:"3.3 Beskrivning"}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"MiV r inte i frsta hand vld i form av slag utan vld i form av separation mellan frlder och barn, separation med historia, av rst, av rttigheter och av minnen. Denna typ av vld som grs genom en part i frldrafrgreningen genom myndigheten inte bara tillts eller uppmuntras utan fortstter en inte sllan skadlig process mot barn och dens andre vrdnads (och sjlvklart andra nrstende i och utanfr familjen) med lag och rtt p sin sida skyddat av att kmpa fr det goda."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Det r vld som klr sig i paragrafer, som luktar papperskopia och arkivplast. Det r vldet som kommer lggas p en skrivbordskant och frsvaras med vi fljde lagen."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Barnen frvandlas till levande fotnoter i verksamhetens egen berttelse dr varje omhndertagande r ett kapitel som skrivs fr att visa att systemet fungerar  inte att barnet mr bttre. Barnen r inte lngre subjekt med rst och rtt utan verksamhetskapitel  ett administrativt bevis p att maskineriet rullar vidare, skyddat av sin egen statistik och svensk lagstiftning."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Frldern blir inte verksamhetskapitel p samma stt som barnet. Barnet r det objekt som systemet kan flytta, registrera och visa upp som insats. Frldern dremot blir ngot annat  en motpart som ska neutraliseras, en risk som ska hanteras, en berttelse som ska tystas eller omformas. Den ena frldern ges monopol p sanningen genom sekretessen; den andra tystas av samma sekretess. Barnet frvandlas till en bricka vars drag alltid grs i det frdolda."})]}),d.jsxs(_a,{pageNumber:e++,children:[d.jsx("h3",{id:"sec3-4",className:"font-sans text-2xl font-bold text-[var(--accent-color)] mb-6",children:"3.4 Myndighetsinducerat vldet (MiV) har fyra rrelser:"}),d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-bold text-xl mb-2 italic",children:"Alliansen"}),d.jsx("p",{className:"leading-relaxed text-justify",children:"En frlder (oftast mamman) erbjuder myndigheten det den behver, en hotbild mot ett barn. Myndigheten erbjuder mamman det hon behver, en laglig mjlighet att flytta, isolera och vinna tid. Avtalet r outtalat men omedelbart: Jag ger er ett rende, ni ger mig ett barn utan motpart."})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-bold text-xl mb-2 italic",children:"Klassificeringen"}),d.jsx("p",{className:"leading-relaxed text-justify",children:"Pappan omfds i dokumenten som aggressiv, kontrollerande, psykiskt instabil. Ingen diagnos stlls av ngon med kunskap utan av omgivande hobbypsykologer, ingen utredning grs; adjektiven rcker. Nr tillrckligt mnga interna PM citerar varandra uppstr en samlad bild som i nsta steg blir bevis (Becker, 1963)."})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-bold text-xl mb-2 italic",children:"Juridiseringen"}),d.jsx("p",{className:"leading-relaxed text-justify",children:"Nu aktiveras skyddslagarna: 3 kap 5 a  socialtjnstlagen, 7 kap 4 a  frldrabalken, LSB som ger barnet egen sekretess utan krav p brottsbalk eller vldsuppgift. Varje paragraf r ett stngsel. Ingen krver motpartsfrhr. Alla kan hvas om frhllandena ndras  men ingen aktr ansvarar fr att kontrollera om de redan har ndrats."})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-bold text-xl mb-2 italic",children:"Kapitulationen"}),d.jsx("p",{className:"leading-relaxed text-justify",children:"Pappan str kvar utanfr polishuset med umgngesfrbud i handen. Barnet har redan bytt ort, namn p frskolan, gosedjurets adress. He har inte begtt brott, bara frlorat sin plats i barnets liv genom ett formulr. Hr ser vi en inducerad inlrd hjlplshet (Seligman, 1972) som ett direkt resultat av systemets vermakt."})]})]})]}),d.jsxs(_a,{pageNumber:e++,children:[d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Ur MiV skapas allts MiT (Myndighetsinducerat Trauma): i tomrummet mellan den juridiska frldern och det faktiska barnet vars rttigheter nu krnkts till den grad att de inte existerar. Traumat r inte bara frnvaron utan frnvaron frgas nu ven av att det r officiell och permanent information. Detta kan definieras som ett institutionellt svek (Institutional Betrayal; Smith & Freyd, 2014)."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Nr mllet till slut nr domstol (om det nr domstol) har nya frutsttningar skapats fr de juridiska besluten: barnet har rotat sig, mamman har etablerat trygghet, pappan har hllits avskild s lnge att anknytningen riskerar skadas  den klassas i alla fall som primr hos mamman. Domaren tvingas vlja mellan att terstlla umgnget och drmed stra det liv som myndigheten sjlv skapat  eller lta MiV fullbordas. De flesta vljer det senare. Traumat institutionaliseras."}),d.jsx("h3",{id:"sec3-5",className:"font-sans text-2xl font-bold text-[var(--accent-color)] mt-12 mb-6",children:"3.5 Frdjupade grenar av hur MiV tar sig uttryck:"}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Fr att frst MiV:s fulla vidd mste vi titta p de grenar dr vldet verkar i det tysta, djupt inne i kroppar och system:"}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("p",{className:"leading-relaxed text-justify",children:[d.jsx("strong",{children:"Den Neurobiologiska grenen  Systemisk Immobilisering:"}),' Myndigheten anvnder sin makt fr att frstta den utsatta frldern i ett konstant tillstnd av hot (sympatiskt pdrag) som ver tid tvingar nervsystemet in i en dorsal kollaps eller "freeze" (Porges, 2011). Inom Self-care modellen (Ljungberg) ser vi detta som en biologisk gisslantagning. Systemet straffar frldern fr de traumareaktioner  ssom fragmentering, stumhet eller kollaps  som systemet sjlvt har orsakat genom att pressa individen utanfr sitt toleransfnster (Window of Tolerance; Siegel, 1999).']}),d.jsxs("p",{className:"leading-relaxed text-justify",children:[d.jsx("strong",{children:"Den Sprkliga grenen  Semantiskt vld (Chomsky, 1968):"}),' Hr anvnds sprket som ett kirurgiskt verktyg fr Othering (Said, 1978). Genom att anvnda kliniska termer som "bristande insikt", "samarbetssvrigheter" eller "behov av std" maskeras den faktiska maktutvningen. Inom MiV blir ordet "omsorg" kidnappat; det frvandlas till en administrativ tgrd istllet fr en relationell upplevelse. Detta r en form av epistemisk orttvisa (Fricker, 2007), dr den utsattes frmga att frmedla sin verklighet systematiskt undergrvs.']}),d.jsxs("p",{className:"leading-relaxed text-justify",children:[d.jsx("strong",{children:"Den Relationella grenen  Anknytningskapning:"}),' Hr anvnds tiden som ett aktivt vapen. Systemet skapar en ny "sanning" fr barnet dr den andre frldern suddas ut. Detta r inte bara en fysisk separation utan en administrativ alienation (Bernet, 2010) dr barnet bervas sin rtt till sitt ursprung och sitt sensoriska minne.']})]})]}),d.jsxs(_a,{pageNumber:e++,children:[d.jsx("div",{className:"bg-black/5 p-6 rounded-lg mb-8 italic text-justify leading-relaxed",children:"Myndighetsinducerat vld r den process dr en frlder genom att aktivera skyddslagrum och alliera sig med socialtjnsten kan omvandla ett vrdnadsml till ett administrativt vertag."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Vldet bestr inte i att lagarna anvnds eller att intentionen med lagarna skulle vara fel  vldet ligger i att de enbart anvnds t ett hll  utan motvikt  utan motfrga och att en frlder tillts detta ver tid utan tidshorisont. Genom Othering s ser vi dock inte varandra lngre, en familj har blivit en lunta papper. Barnet grs till verksamhetskapital och kommer alltid ltt att etiketteras och tolkas genom glasgon som har en viss grad av frutfattade meningar."}),d.jsx("h3",{id:"sec3-6",className:"font-sans text-2xl font-bold text-[var(--accent-color)] mt-12 mb-6",children:"3.6 Definition:"}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Myndighetsinducerat vld r den process dr en frlder genom att aktivera skyddslagrum och alliera sig med socialtjnsten kan omvandla ett vrdnadsml till ett administrativt vertag. Funktionen som MiV uppbr genom externt nyttjande av systemets makt r att skada, tysta, kontrollera eller vinna frdel i en tvist/konflikt  ofta i samband med vrdnadstvister, separationer eller andra juridiska processer. Nr nyttjandet av maktens skydd ursprunger inifrn systemet sjlv och inte i frsta hand frn extern part kan det handla om direkt jv, yttrande av utrymme/tolkning av lagrum."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Istllet fr att vara en arena fr rttvisa och skydd anvnds myndigheterna som en hjlp till krnkning av mnskliga rttigheter. Grningspersonen utnyttjar sin juridiska, ekonomiska eller sprkliga verlgsenhet fr att manipulera processen till sin egen frdel vilket lmnar de utsatta i en faktisk situation av extrem hjlplshet."}),d.jsx("p",{className:"mb-4 italic",children:"Frvaren utnyttjar systemets inneboende svagheter fr att uppn sitt ml. Detta innefattar strategier som:"}),d.jsxs("ul",{className:"space-y-4",children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Juridisk krigsfring som vldsfrlngning:"}),d.jsx("p",{className:"text-sm mt-1",children:"En strategi dr frvaren aktiverar lagrum som en frlngning av kontroll, likt begreppet Lawfare."})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Tolkningsfretrde:"}),d.jsx("p",{className:"text-sm mt-1",children:'Att vara den som "ropar frst" och drmed stter ett narrativ (The Power of Definition; Bourdieu, 1991).'})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Strategiska och repetitiva anmlningar:"}),d.jsx("p",{className:"text-sm mt-1",children:"Att genom frekventa anmlningar trtta ut den utsatta."})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Ekonomisk utmattning:"}),d.jsx("p",{className:"text-sm mt-1",children:"Att ruinera motparten genom kostsamma juridiska ombud."})]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Felaktig framstllning och skapandet av en pappersverklighet:"}),d.jsx("p",{className:"text-sm mt-1",children:"Att mata systemet med vinklad dokumentation fr att skapa en officiell sanning som myndigheter baserar beslut p."})]})]})]})]})},T3e=()=>{const t=[{title:"Juridisk krigsfring (Lawfare)",description:"En strategi dr frvaren aktiverar lagrum som en direkt frlngning av kontrollen. Rttsprocessen blir det nya verktyget fr att utva vld och begrnsa den utsattes frihet.",color:"#2c3e50"},{title:"Tolkningsfretrde",description:'Att vara den som "ropar frst" och drmed stter ett narrativ som myndigheter anammar.',source:"Referens: The Power of Definition (Bourdieu, 1991)",color:"#34495e"},{title:"Strategiska anmlningar",description:'Att genom frekventa och repetitiva anmlningar trtta ut den utsatta psykiskt och skapa en bild av en "konfliktfylld" person hos myndigheterna.',color:"#7f8c8d"},{title:"Ekonomisk utmattning",description:"Att systematiskt ruinera motparten genom att tvinga fram kostsamma juridiska ombud och utdragna processer tills den utsatta inte lngre har rd att frsvara sina rttigheter.",color:"#95a5a6"},{title:"Skapandet av en pappersverklighet",description:"Att mata systemet med vinklad eller osann dokumentation fr att skapa en officiell sanning. Myndigheternas beslut baseras p denna fabricerade bild snarare n verkligheten.",color:"#bdc3c7"},{title:"Objektifiering av barnen",description:"Att reducera barnen till bevisfreml eller strategiska tillgngar fr att strka frvarens position. Barnens egna behov osynliggrs till frmn fr den juridiska vinsten.",color:"#c0392b"}];return d.jsxs("div",{className:"bg-black/5 p-6 md:p-10 rounded-xl border border-[var(--border-color)] font-sans",children:[d.jsxs("div",{className:"text-center mb-10 border-b-2 border-[var(--accent-color)] pb-6",children:[d.jsx("h2",{className:"text-2xl md:text-3xl font-black text-[var(--text-color)] uppercase tracking-wider mb-2",children:"Strategier inom Myndighetsinducerat vld"}),d.jsx("p",{className:"italic text-[var(--secondary-text)] text-lg",children:"Hur systemet anvnds fr administrativt vertag"})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((e,n)=>d.jsxs("div",{className:"bg-[var(--bg-color)] p-6 rounded-lg shadow-sm border-l-8 transition-all duration-300 hover:-translate-y-1 hover:shadow-md flex flex-col h-full",style:{borderLeftColor:e.color},children:[d.jsx("h3",{className:"text-[#c0392b] font-bold text-lg mb-3 leading-tight",children:e.title}),d.jsx("p",{className:"text-sm leading-relaxed text-[var(--text-color)] flex-grow",children:e.description}),e.source&&d.jsx("span",{className:"block mt-4 text-[10px] font-bold text-[var(--secondary-text)] uppercase tracking-tighter",children:e.source})]},n))})]})},E3e=({startPageNumber:t})=>{let e=t;return d.jsx("div",{id:"chap4",children:d.jsxs(_a,{pageNumber:e++,children:[d.jsx("div",{className:"text-center text-[var(--secondary-text)] text-2xl my-10 tracking-widest",children:"***"}),d.jsx("header",{className:"mb-12",children:d.jsx("h2",{className:"font-sans text-3xl md:text-4xl text-[var(--accent-color)] font-bold tracking-tight mb-8",children:"4. Systeminducerad retraumatisering som avsiktlig strategi"})}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"En central mekanism i MiV kan vara systeminducerad retraumatisering. Till skillnad frn nr systemet oavsiktligt orsakar skada blir retraumatiseringen hr ett avsiktligt och strategiskt vapen. Frvaren utnyttjar systemets inneboende svagheter fr att uppn sitt ml och de som i Sverige utgr strst risk att mista sina barn r en tydlig viss grupp av mnniskor. I den grupp mnniskor jag syftar till finns oftats men inte ndvndgvis tidigare traumbildningar i nervsystemet."}),d.jsx("h3",{className:"font-sans text-2xl font-bold text-[var(--accent-color)] mt-12 mb-6",children:"4.2 Handling och konsekvens"}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Effekterna av MiV beskrivs under kapitel 13 om Myndighetsinducerat trauma (MiT). Fr att frtydliga:"}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Myndighetsinducerat vld skapar alltid Myndighetsinducerat trauma  men fr att bli drabbad av Myndighetsinducerat trauma behvs inte Myndighetsinducerat vld."}),d.jsxs("div",{className:"space-y-4 mb-8",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Myndighetsinducerat vld (Handlingen):"})," Beskriver den aktiva processen dr systemet anvnds som vapen."]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Myndighetsinducerat trauma (Konsekvens av handling):"})," Den djupa skada som uppstr hos den som blivit utsatt fr vld eller tvingande myndighetsingripanden."]})]}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Det r i hgsta grad att betrakta som ett karaktrsmord dr mlet r att systematiskt bryta ner den utsattas trovrdighet (Goffman, 1963; Stigma)."}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:'Den konstanta stressen aktiverar kroppens primitiva verlevnadssystem. Kopplingen till den dorsala vagusnerven r relevant; den utsatta hamnar i ett tillstnd av freeze och kollaps dr jag ofta fr hra saker som att jag kunde inte ens ppna post lngre". Detta r en fysiologisk reaktion p extrem och lngvariga stress (Levine, 2010; Somatic Experiencing).'})]})})},A3e=({startPageNumber:t})=>{let e=t;return d.jsxs("div",{id:"chap5",children:[d.jsxs(_a,{pageNumber:e++,children:[d.jsx("div",{className:"text-center text-[var(--secondary-text)] text-2xl my-10 tracking-widest",children:"***"}),d.jsx("header",{className:"mb-12",children:d.jsx("h2",{className:"font-sans text-3xl md:text-4xl text-[var(--accent-color)] font-bold tracking-tight mb-8",children:"5. Systemets objektifiering"})}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"I skrningspunkten mellan juridisk krigfring och byrkratisk administration uppstr en process dr barnet upphr att vara ett subjekt. Inom teorin fr MiT introduceras begreppen verksamhetsbarn och verksamhetskapital."}),d.jsx("h3",{id:"sec5-1",className:"font-sans text-2xl font-bold text-[var(--accent-color)] mt-12 mb-6",children:"5.1 Barnen blir verksamhetskapital"}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Nr barnet vl har reducerats till att ses som och bli behandlat som ett objekt, omvandlas det till Verksamhetskapital. Jrgen Habermas (1981) teori om att systemet koloniserar livsvrlden r relevant hr. Den byrkratiska logiken trnger undan den kommunikativa logiken (frstelse, omsorg). Barnet blir brnsle i en struktur som krver renden fr att motivera anslag och skydda sin egen organisation."}),d.jsx("h3",{id:"sec5-2",className:"font-sans text-2xl font-bold text-[var(--accent-color)] mt-12 mb-6",children:"5.2 Biopolitisk kontroll"}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:'Michel Foucaults (1976) begrepp biopolitik handlar om statens kontroll ver kroppar. Verksamhetskapitalet r den ultimata formen av biopolitik i familjerttsliga sammanhang. Beslut om umgngesstopp som verkstlls under samma dag visar p statens totala makt att flytta kroppar (barn) baserat p administrativa riskbedmningar. Lagen luktar "pappersarkivplast" och blir verktyget fr denna disciplinering.'})]}),d.jsxs(_a,{pageNumber:e++,children:[d.jsx("h3",{id:"sec5-3",className:"font-sans text-2xl font-bold text-[var(--accent-color)] mb-6",children:"5.3 Konsekvensen: Det administrativa vldet"}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Sammansmltningen av barn och kapital resulterar i en form av strukturellt vld (Galtung, 1969)."}),d.jsxs("ul",{className:"space-y-6",children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Frlust av Rst:"})," Eftersom barnet r ett objekt saknar det egen rst (Spivak, 1988). Det talas om barnet, men sllan med barnet."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Permanent Skada:"})," Barnet lr sig att dess vrde r knutet till dess funktion i ett system, inte till dess mnsklighet."]})]}),d.jsx("div",{className:"mt-16 text-center text-[var(--secondary-text)] text-xl tracking-[0.3em]",children:"***"})]})]})},k3e=({startPageNumber:t})=>{let e=t;return d.jsxs("div",{id:"chap6",children:[d.jsxs(_a,{pageNumber:e++,children:[d.jsx("div",{className:"text-center text-[var(--secondary-text)] text-2xl my-10 tracking-widest",children:"***"}),d.jsx("header",{className:"mb-12",children:d.jsx("h2",{className:"font-sans text-3xl md:text-4xl text-[var(--accent-color)] font-bold tracking-tight mb-8",children:"6. Frldern som restprodukt  Mlet om att neutralisera"})}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"I definitionen av MiV framtrder en obehaglig uppdelning av roller. Barnet omvandlas till verksamhetskapital; frldern blir ett hinder fr detta kapital, en strning som mste neutraliseras."}),d.jsx("h3",{id:"sec6-1",className:"font-sans text-2xl font-bold text-[var(--accent-color)] mt-12 mb-6",children:"6.1 Othering / Andregrande"}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:'"Othering" r processen genom vilken en dominant grupp definierar en annan grupp som avvikande fr att bibehlla maktstrukturer (Said, 1978).'}),d.jsxs("p",{className:"mb-6 text-justify leading-relaxed",children:[d.jsx("strong",{children:"Patologisering av motstnd:"}),' Naturliga reaktioner p vld (ilska, frtvivlan) tolkas inte som omsorg utan som symptom p psykisk instabilitet. En stridbar frlder blir "aggressiv" eller "ovillig till samarbete (Becker, 1963; Labeling Theory).']}),d.jsxs("p",{className:"mb-6 text-justify leading-relaxed",children:[d.jsx("strong",{children:"Det monsterifierade subjektet:"})," Genom att mla upp frldern som en potentiell fara skapas en bild av ett monster, vilket gr att systemet kan distansera sig moraliskt."]})]}),d.jsxs(_a,{pageNumber:e++,children:[d.jsx("h3",{id:"sec6-2",className:"font-sans text-2xl font-bold text-[var(--accent-color)] mb-6",children:"6.2 Systemets immunfrsvar: Principen om neutralisering"}),d.jsxs("p",{className:"mb-6 text-justify leading-relaxed",children:[d.jsx("strong",{children:"Delegitimering av rsten:"}),' Neutralisering handlar om att ta ifrn en mnniska hennes trovrdighet. Sanningen blir irrelevant; endast "pappersverkligheten" rknas.']}),d.jsxs("p",{className:"mb-6 text-justify leading-relaxed",children:[d.jsx("strong",{children:"Uteslutning via sprkligt vertag och procedur:"})," Den som inte behrskar det byrkratiska sprket, eller som r traumatiserad (MIT), blir tystad. Neutraliseringen r fullbordad nr frldern ses som ett riskmoment snarare n en part."]}),d.jsx("h3",{id:"sec6-3",className:"font-sans text-2xl font-bold text-[var(--accent-color)] mt-12 mb-6",children:"6.3 Frn rttsbrare till objekt fr tgrd"}),d.jsx("p",{className:"mb-6 text-justify leading-relaxed",children:"Den mest frdande aspekten av denna process r frlusten av subjektstatus."}),d.jsxs("p",{className:"mb-6 text-justify leading-relaxed",children:[d.jsx("strong",{children:"Objektifiering:"}),' Individen blir ett rendenummer, en "risk", ett administrativt objekt som ska "utredas" och "avfrdas".']}),d.jsxs("p",{className:"mb-6 text-justify leading-relaxed",children:[d.jsx("strong",{children:"Den byrkratiska abjektionen:"}),' Inom psykoanalytisk teori talar man om det abjekta  det som sttts bort och vcker obehag (Kristeva, 1980). Den utsatta frldern blir systemets abjekt, det "smutsiga" som den rationella byrkratin vill rena sig ifrn. Att neutralisera frldern blir drmed en hygientgrd fr systemet  ett stt att "stda upp" rendet s att det passar i arkivet.']})]}),d.jsxs(_a,{pageNumber:e++,children:[d.jsx("h3",{id:"sec6-4",className:"font-sans text-2xl font-bold text-[var(--accent-color)] mb-6",children:"6.4 Kapital kontra avfall"}),d.jsxs("ul",{className:"space-y-6",children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Barnet grs till verksamhetskapital:"})," En vrdefull tillgng som motiverar systemets existens."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Frldern grs till systemavfall:"}),' En onskad restprodukt som mste neutraliseras, tystas och stdas bort fr att "maskineriet" ska kunna rulla vidare friktionsfritt.']})]}),d.jsx("div",{className:"mt-12 bg-black/5 p-8 rounded-xl italic text-justify leading-relaxed",children:'Detta r krnan i Myndighetsinducerat vld. Det handlar om att frlora sin status som mnniska i systemets gon. Det r detta som mjliggr det "karaktrsmord" som r s centralt i beskrivningen av fenomenet.'})]})]})},M3e=()=>d.jsxs("footer",{className:"text-center text-sm text-[var(--secondary-text)] mt-24 pt-8 border-t border-[var(--border-color)] pb-10",children:[d.jsx("p",{children:" 2025 Billy Ljungberg & Malin Widerlv. Alla rttigheter frbehllna."}),d.jsx("p",{className:"mt-1",children:"Utgiven av Horizonten frlag."})]}),N3e=({onBack:t})=>{const[e,n]=J.useState("light");let r=1;return J.useEffect(()=>(document.body.style.backgroundColor=zH[e]["--app-bg"],()=>{document.body.style.backgroundColor=""}),[e]),d.jsx("div",{className:"min-h-screen transition-colors duration-300 font-serif",style:zH[e],children:d.jsxs("div",{className:"flex flex-col items-center pt-5 pb-20 bg-[var(--app-bg)] min-h-screen transition-colors duration-300",children:[d.jsx(g3e,{currentTheme:e,onThemeChange:n,onBack:t}),d.jsxs("div",{className:"relative w-full max-w-[850px] px-4 md:px-0",children:[d.jsx("div",{className:"absolute inset-0 bg-black/5 translate-x-1 translate-y-1 rounded-md -z-10"}),d.jsx("div",{className:"absolute inset-0 bg-black/5 translate-x-2 translate-y-2 rounded-md -z-20"}),d.jsxs("div",{className:"w-full p-8 md:p-20 bg-[var(--bg-color)] text-[var(--text-color)] shadow-[var(--paper-shadow)] rounded-md transition-colors duration-300 min-h-screen text-lg leading-relaxed relative overflow-hidden",role:"main",children:[d.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03] bg-[url('https://www.transparenttextures.com/patterns/natural-paper.png')]"}),d.jsx(v3e,{}),d.jsx(_a,{pageNumber:r++,children:d.jsx(y3e,{})}),d.jsx(_a,{pageNumber:r++,children:d.jsx(x3e,{})}),d.jsx(_a,{pageNumber:r++,children:d.jsx(b3e,{})}),d.jsx(_a,{pageNumber:r++,children:d.jsx(w3e,{})}),d.jsx(S3e,{startPageNumber:r}),(r+=6,null),d.jsx(_a,{pageNumber:r++,children:d.jsx(T3e,{})}),d.jsx(E3e,{startPageNumber:r}),(r+=1,null),d.jsx(A3e,{startPageNumber:r}),(r+=2,null),d.jsx(k3e,{startPageNumber:r}),d.jsx(M3e,{})]})]})]})})},C3e=()=>{const[t,e]=J.useState(Te.HOME),[n,r]=J.useState(!1),[i,a]=J.useState(!1);J.useEffect(()=>{const c=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;a(!!c);const u=()=>{const m=window.location.hash,v=window.history.state;if(c){if(!m||m==="#"||m.includes("#home")){window.location.hash="#premium-login",e(Te.GEMENSKAP_APP),window.history.replaceState({page:Te.GEMENSKAP_APP},"");return}if(m.includes("#premium-login")||m.includes("#login")||m.includes("#signup")||m.includes("#chat")||m.includes("#dashboard")||m.includes("#welcome")||m.includes("#experts")){e(Te.GEMENSKAP_APP);return}}if(m.includes("#login")||m.includes("#premium-login")||m.includes("#signup")){e(Te.GEMENSKAP_APP),window.history.replaceState({page:Te.GEMENSKAP_APP},"");return}if(v&&v.page){e(v.page);return}t!==Te.HOME&&e(Te.HOME)};u();const h=m=>{m.state&&m.state.page?e(m.state.page):u()};return window.addEventListener("popstate",h),()=>window.removeEventListener("popstate",h)},[]);const s=(c,u)=>{c!==t&&(window.history.pushState({page:c,...u},""),e(c))};J.useEffect(()=>{if(window.scrollTo({top:0,behavior:"auto"}),t===Te.HOME)document.title="Klttertrdet";else if(t===Te.GEMENSKAP_APP)document.title="Horizonten gemenskap  Vga vara den du r";else{const c=t.charAt(0)+t.slice(1).toLowerCase().replace("_"," ");document.title=`${c} | Horizonten`}},[t]);const o=()=>{r(!n)};return d.jsxs("div",{className:`relative min-h-screen flex flex-col transition-all duration-700 ease-in-out ${n?"bg-glossy-gradient-dark":"bg-glossy-gradient"}`,children:[d.jsx(VY,{}),d.jsx(SQ,{setPage:s}),t!==Te.GEMENSKAP_APP&&!i&&d.jsx(FY,{currentPage:t,setPage:s,isDarkMode:n,toggleTheme:o}),d.jsx("main",{className:"flex-1 w-full flex flex-col",children:(()=>{switch(t){case Te.HOME:return d.jsx(fL,{setPage:s});case Te.ABOUT:return d.jsx(EQ,{});case Te.CHAT:return d.jsx(AQ,{});case Te.THERAPY:return d.jsx(kQ,{setPage:s});case Te.GROUP_THERAPY:return d.jsx(MQ,{setPage:s});case Te.GESTALT_TRAINING:return d.jsx(NQ,{setPage:s});case Te.BEHANDLINGS_PEDAGOG:return d.jsx(CQ,{setPage:s});case Te.BLOG:return d.jsx(RQ,{setPage:s});case Te.COMMUNITY:return d.jsx(IQ,{});case Te.CONTACT:return d.jsx(PQ,{});case Te.SURVEY:return d.jsx(lve,{children:d.jsx(dve,{children:d.jsx(RSe,{})})});case Te.DOWNLOADS:return d.jsx(ISe,{setPage:s});case Te.GESTALT_WORKSHEET:return d.jsx(m3e,{onBack:()=>s(Te.DOWNLOADS)});case Te.LOGIN:return d.jsx(OSe,{setPage:s});case Te.BOOK:return d.jsx(jSe,{setPage:s});case Te.CHECKOUT:return d.jsxs("div",{className:"container mx-auto px-6 py-24 text-center",children:[d.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Kassa"}),d.jsx("p",{className:"text-zinc-400",children:"Betalningslsning kommer snart..."}),d.jsx("button",{onClick:()=>s(Te.BOOK),className:"mt-8 text-amber-500 font-bold underline",children:"Tillbaka"})]});case Te.PRIVACY:return d.jsx(DSe,{setPage:s});case Te.COOKIE_POLICY:return d.jsx(LSe,{setPage:s});case Te.TERMS:return d.jsx(USe,{setPage:s});case Te.PREMIUM_APPLICATION:return d.jsx(d3e,{setPage:s});case Te.FREE_REGISTRATION:return d.jsx(f3e,{setPage:s});case Te.MIT_EBOOK:return d.jsx(N3e,{onBack:()=>s(Te.DOWNLOADS)});case Te.GEMENSKAP_APP:return d.jsx(u3e,{onBackToSite:c=>s(c||Te.HOME)});default:return d.jsx(fL,{setPage:s})}})()}),t!==Te.GEMENSKAP_APP&&!i&&d.jsx("footer",{className:"py-12 mt-auto border-t border-white/10",children:d.jsxs("div",{className:"max-w-[1600px] mx-auto px-6 flex flex-col items-center gap-6",children:[d.jsxs("div",{className:"flex flex-wrap justify-center gap-x-8 gap-y-3 text-[10px] md:text-xs font-bold text-white/30 tracking-widest uppercase",children:[d.jsx("button",{onClick:()=>s(Te.COOKIE_POLICY),className:"hover:text-amber-500 transition-colors whitespace-nowrap",children:"Cookies"}),d.jsx("button",{onClick:()=>s(Te.TERMS),className:"hover:text-amber-500 transition-colors whitespace-nowrap",children:"Medlemsvillkor"}),d.jsx("button",{onClick:()=>s(Te.PRIVACY),className:"hover:text-amber-500 transition-colors whitespace-nowrap",children:"Integritet & Sekretess"})]}),d.jsx("div",{className:"text-white/50 text-[10px] md:text-xs tracking-tight",children:d.jsx("p",{children:" 2025 Klttertrdet & Horizonten."})})]})})]})},fX=document.getElementById("root");if(!fX)throw new Error("Could not find root element to mount to");const R3e=iY.createRoot(fX);R3e.render(d.jsx(ue.StrictMode,{children:d.jsx(C3e,{})}));
