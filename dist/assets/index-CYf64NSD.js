function tC(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in i)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(i,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function Kb(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var M_={exports:{}},Pm={};var _M;function nC(){if(_M)return Pm;_M=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,s,a){var u=null;if(a!==void 0&&(u=""+a),s.key!==void 0&&(u=""+s.key),"key"in s){a={};for(var h in s)h!=="key"&&(a[h]=s[h])}else a=s;return s=a.ref,{$$typeof:i,type:n,key:u,ref:s!==void 0?s:null,props:a}}return Pm.Fragment=e,Pm.jsx=t,Pm.jsxs=t,Pm}var wM;function iC(){return wM||(wM=1,M_.exports=nC()),M_.exports}var l=iC(),E_={exports:{}},Jt={};var SM;function sC(){if(SM)return Jt;SM=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),y=Symbol.iterator;function w(q){return q===null||typeof q!="object"?null:(q=y&&q[y]||q["@@iterator"],typeof q=="function"?q:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,T={};function N(q,ce,Ee){this.props=q,this.context=ce,this.refs=T,this.updater=Ee||M}N.prototype.isReactComponent={},N.prototype.setState=function(q,ce){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ce,"setState")},N.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function j(){}j.prototype=N.prototype;function R(q,ce,Ee){this.props=q,this.context=ce,this.refs=T,this.updater=Ee||M}var D=R.prototype=new j;D.constructor=R,k(D,N.prototype),D.isPureReactComponent=!0;var I=Array.isArray;function P(){}var z={H:null,A:null,T:null,S:null},G=Object.prototype.hasOwnProperty;function U(q,ce,Ee){var Pe=Ee.ref;return{$$typeof:i,type:q,key:ce,ref:Pe!==void 0?Pe:null,props:Ee}}function L(q,ce){return U(q.type,ce,q.props)}function W(q){return typeof q=="object"&&q!==null&&q.$$typeof===i}function J(q){var ce={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(Ee){return ce[Ee]})}var Q=/\/+/g;function ue(q,ce){return typeof q=="object"&&q!==null&&q.key!=null?J(""+q.key):ce.toString(36)}function ne(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(P,P):(q.status="pending",q.then(function(ce){q.status==="pending"&&(q.status="fulfilled",q.value=ce)},function(ce){q.status==="pending"&&(q.status="rejected",q.reason=ce)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function X(q,ce,Ee,Pe,rt){var me=typeof q;(me==="undefined"||me==="boolean")&&(q=null);var Ce=!1;if(q===null)Ce=!0;else switch(me){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(q.$$typeof){case i:case e:Ce=!0;break;case v:return Ce=q._init,X(Ce(q._payload),ce,Ee,Pe,rt)}}if(Ce)return rt=rt(q),Ce=Pe===""?"."+ue(q,0):Pe,I(rt)?(Ee="",Ce!=null&&(Ee=Ce.replace(Q,"$&/")+"/"),X(rt,ce,Ee,"",function(ft){return ft})):rt!=null&&(W(rt)&&(rt=L(rt,Ee+(rt.key==null||q&&q.key===rt.key?"":(""+rt.key).replace(Q,"$&/")+"/")+Ce)),ce.push(rt)),1;Ce=0;var Fe=Pe===""?".":Pe+":";if(I(q))for(var nt=0;nt<q.length;nt++)Pe=q[nt],me=Fe+ue(Pe,nt),Ce+=X(Pe,ce,Ee,me,rt);else if(nt=w(q),typeof nt=="function")for(q=nt.call(q),nt=0;!(Pe=q.next()).done;)Pe=Pe.value,me=Fe+ue(Pe,nt++),Ce+=X(Pe,ce,Ee,me,rt);else if(me==="object"){if(typeof q.then=="function")return X(ne(q),ce,Ee,Pe,rt);throw ce=String(q),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function Z(q,ce,Ee){if(q==null)return q;var Pe=[],rt=0;return X(q,Pe,"","",function(me){return ce.call(Ee,me,rt++)}),Pe}function re(q){if(q._status===-1){var ce=q._result;ce=ce(),ce.then(function(Ee){(q._status===0||q._status===-1)&&(q._status=1,q._result=Ee)},function(Ee){(q._status===0||q._status===-1)&&(q._status=2,q._result=Ee)}),q._status===-1&&(q._status=0,q._result=ce)}if(q._status===1)return q._result.default;throw q._result}var pe=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},we={map:Z,forEach:function(q,ce,Ee){Z(q,function(){ce.apply(this,arguments)},Ee)},count:function(q){var ce=0;return Z(q,function(){ce++}),ce},toArray:function(q){return Z(q,function(ce){return ce})||[]},only:function(q){if(!W(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Jt.Activity=b,Jt.Children=we,Jt.Component=N,Jt.Fragment=t,Jt.Profiler=s,Jt.PureComponent=R,Jt.StrictMode=n,Jt.Suspense=p,Jt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,Jt.__COMPILER_RUNTIME={__proto__:null,c:function(q){return z.H.useMemoCache(q)}},Jt.cache=function(q){return function(){return q.apply(null,arguments)}},Jt.cacheSignal=function(){return null},Jt.cloneElement=function(q,ce,Ee){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var Pe=k({},q.props),rt=q.key;if(ce!=null)for(me in ce.key!==void 0&&(rt=""+ce.key),ce)!G.call(ce,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&ce.ref===void 0||(Pe[me]=ce[me]);var me=arguments.length-2;if(me===1)Pe.children=Ee;else if(1<me){for(var Ce=Array(me),Fe=0;Fe<me;Fe++)Ce[Fe]=arguments[Fe+2];Pe.children=Ce}return U(q.type,rt,Pe)},Jt.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},Jt.createElement=function(q,ce,Ee){var Pe,rt={},me=null;if(ce!=null)for(Pe in ce.key!==void 0&&(me=""+ce.key),ce)G.call(ce,Pe)&&Pe!=="key"&&Pe!=="__self"&&Pe!=="__source"&&(rt[Pe]=ce[Pe]);var Ce=arguments.length-2;if(Ce===1)rt.children=Ee;else if(1<Ce){for(var Fe=Array(Ce),nt=0;nt<Ce;nt++)Fe[nt]=arguments[nt+2];rt.children=Fe}if(q&&q.defaultProps)for(Pe in Ce=q.defaultProps,Ce)rt[Pe]===void 0&&(rt[Pe]=Ce[Pe]);return U(q,me,rt)},Jt.createRef=function(){return{current:null}},Jt.forwardRef=function(q){return{$$typeof:h,render:q}},Jt.isValidElement=W,Jt.lazy=function(q){return{$$typeof:v,_payload:{_status:-1,_result:q},_init:re}},Jt.memo=function(q,ce){return{$$typeof:m,type:q,compare:ce===void 0?null:ce}},Jt.startTransition=function(q){var ce=z.T,Ee={};z.T=Ee;try{var Pe=q(),rt=z.S;rt!==null&&rt(Ee,Pe),typeof Pe=="object"&&Pe!==null&&typeof Pe.then=="function"&&Pe.then(P,pe)}catch(me){pe(me)}finally{ce!==null&&Ee.types!==null&&(ce.types=Ee.types),z.T=ce}},Jt.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},Jt.use=function(q){return z.H.use(q)},Jt.useActionState=function(q,ce,Ee){return z.H.useActionState(q,ce,Ee)},Jt.useCallback=function(q,ce){return z.H.useCallback(q,ce)},Jt.useContext=function(q){return z.H.useContext(q)},Jt.useDebugValue=function(){},Jt.useDeferredValue=function(q,ce){return z.H.useDeferredValue(q,ce)},Jt.useEffect=function(q,ce){return z.H.useEffect(q,ce)},Jt.useEffectEvent=function(q){return z.H.useEffectEvent(q)},Jt.useId=function(){return z.H.useId()},Jt.useImperativeHandle=function(q,ce,Ee){return z.H.useImperativeHandle(q,ce,Ee)},Jt.useInsertionEffect=function(q,ce){return z.H.useInsertionEffect(q,ce)},Jt.useLayoutEffect=function(q,ce){return z.H.useLayoutEffect(q,ce)},Jt.useMemo=function(q,ce){return z.H.useMemo(q,ce)},Jt.useOptimistic=function(q,ce){return z.H.useOptimistic(q,ce)},Jt.useReducer=function(q,ce,Ee){return z.H.useReducer(q,ce,Ee)},Jt.useRef=function(q){return z.H.useRef(q)},Jt.useState=function(q){return z.H.useState(q)},Jt.useSyncExternalStore=function(q,ce,Ee){return z.H.useSyncExternalStore(q,ce,Ee)},Jt.useTransition=function(){return z.H.useTransition()},Jt.version="19.2.3",Jt}var MM;function Wg(){return MM||(MM=1,E_.exports=sC()),E_.exports}var ie=Wg();const Zb=Kb(ie),rC=tC({__proto__:null,default:Zb},[ie]);var N_={exports:{}},zm={},T_={exports:{}},A_={};var EM;function aC(){return EM||(EM=1,(function(i){function e(X,Z){var re=X.length;X.push(Z);e:for(;0<re;){var pe=re-1>>>1,we=X[pe];if(0<s(we,Z))X[pe]=Z,X[re]=we,re=pe;else break e}}function t(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var Z=X[0],re=X.pop();if(re!==Z){X[0]=re;e:for(var pe=0,we=X.length,q=we>>>1;pe<q;){var ce=2*(pe+1)-1,Ee=X[ce],Pe=ce+1,rt=X[Pe];if(0>s(Ee,re))Pe<we&&0>s(rt,Ee)?(X[pe]=rt,X[Pe]=re,pe=Pe):(X[pe]=Ee,X[ce]=re,pe=ce);else if(Pe<we&&0>s(rt,re))X[pe]=rt,X[Pe]=re,pe=Pe;else break e}}return Z}function s(X,Z){var re=X.sortIndex-Z.sortIndex;return re!==0?re:X.id-Z.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();i.unstable_now=function(){return u.now()-h}}var p=[],m=[],v=1,b=null,y=3,w=!1,M=!1,k=!1,T=!1,N=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function D(X){for(var Z=t(m);Z!==null;){if(Z.callback===null)n(m);else if(Z.startTime<=X)n(m),Z.sortIndex=Z.expirationTime,e(p,Z);else break;Z=t(m)}}function I(X){if(k=!1,D(X),!M)if(t(p)!==null)M=!0,P||(P=!0,J());else{var Z=t(m);Z!==null&&ne(I,Z.startTime-X)}}var P=!1,z=-1,G=5,U=-1;function L(){return T?!0:!(i.unstable_now()-U<G)}function W(){if(T=!1,P){var X=i.unstable_now();U=X;var Z=!0;try{e:{M=!1,k&&(k=!1,j(z),z=-1),w=!0;var re=y;try{t:{for(D(X),b=t(p);b!==null&&!(b.expirationTime>X&&L());){var pe=b.callback;if(typeof pe=="function"){b.callback=null,y=b.priorityLevel;var we=pe(b.expirationTime<=X);if(X=i.unstable_now(),typeof we=="function"){b.callback=we,D(X),Z=!0;break t}b===t(p)&&n(p),D(X)}else n(p);b=t(p)}if(b!==null)Z=!0;else{var q=t(m);q!==null&&ne(I,q.startTime-X),Z=!1}}break e}finally{b=null,y=re,w=!1}Z=void 0}}finally{Z?J():P=!1}}}var J;if(typeof R=="function")J=function(){R(W)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ue=Q.port2;Q.port1.onmessage=W,J=function(){ue.postMessage(null)}}else J=function(){N(W,0)};function ne(X,Z){z=N(function(){X(i.unstable_now())},Z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_next=function(X){switch(y){case 1:case 2:case 3:var Z=3;break;default:Z=y}var re=y;y=Z;try{return X()}finally{y=re}},i.unstable_requestPaint=function(){T=!0},i.unstable_runWithPriority=function(X,Z){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var re=y;y=X;try{return Z()}finally{y=re}},i.unstable_scheduleCallback=function(X,Z,re){var pe=i.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?pe+re:pe):re=pe,X){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=re+we,X={id:v++,callback:Z,priorityLevel:X,startTime:re,expirationTime:we,sortIndex:-1},re>pe?(X.sortIndex=re,e(m,X),t(p)===null&&X===t(m)&&(k?(j(z),z=-1):k=!0,ne(I,re-pe))):(X.sortIndex=we,e(p,X),M||w||(M=!0,P||(P=!0,J()))),X},i.unstable_shouldYield=L,i.unstable_wrapCallback=function(X){var Z=y;return function(){var re=y;y=Z;try{return X.apply(this,arguments)}finally{y=re}}}})(A_)),A_}var NM;function lT(){return NM||(NM=1,T_.exports=aC()),T_.exports}var k_={exports:{}},$s={};var TM;function oC(){if(TM)return $s;TM=1;var i=Wg();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(p,m,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:b==null?null:""+b,children:p,containerInfo:m,implementation:v}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return $s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,$s.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return a(p,m,null,v)},$s.flushSync=function(p){var m=u.T,v=n.p;try{if(u.T=null,n.p=2,p)return p()}finally{u.T=m,n.p=v,n.d.f()}},$s.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,n.d.C(p,m))},$s.prefetchDNS=function(p){typeof p=="string"&&n.d.D(p)},$s.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,b=h(v,m.crossOrigin),y=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?n.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:b,integrity:y,fetchPriority:w}):v==="script"&&n.d.X(p,{crossOrigin:b,integrity:y,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},$s.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);n.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&n.d.M(p)},$s.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,b=h(v,m.crossOrigin);n.d.L(p,v,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},$s.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=h(m.as,m.crossOrigin);n.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else n.d.m(p)},$s.requestFormReset=function(p){n.d.r(p)},$s.unstable_batchedUpdates=function(p,m){return p(m)},$s.useFormState=function(p,m,v){return u.H.useFormState(p,m,v)},$s.useFormStatus=function(){return u.H.useHostTransitionStatus()},$s.version="19.2.3",$s}var AM;function lC(){if(AM)return k_.exports;AM=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),k_.exports=oC(),k_.exports}var kM;function cC(){if(kM)return zm;kM=1;var i=lT(),e=Wg(),t=lC();function n(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)o+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,f=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(f=o.return),r=o.return;while(r)}return o.tag===3?f:null}function u(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function h(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function p(r){if(a(r)!==r)throw Error(n(188))}function m(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(n(188));return o!==r?null:r}for(var f=r,g=o;;){var S=f.return;if(S===null)break;var E=S.alternate;if(E===null){if(g=S.return,g!==null){f=g;continue}break}if(S.child===E.child){for(E=S.child;E;){if(E===f)return p(S),r;if(E===g)return p(S),o;E=E.sibling}throw Error(n(188))}if(f.return!==g.return)f=S,g=E;else{for(var O=!1,H=S.child;H;){if(H===f){O=!0,f=S,g=E;break}if(H===g){O=!0,g=S,f=E;break}H=H.sibling}if(!O){for(H=E.child;H;){if(H===f){O=!0,f=E,g=S;break}if(H===g){O=!0,g=E,f=S;break}H=H.sibling}if(!O)throw Error(n(189))}}if(f.alternate!==g)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?r:o}function v(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=v(r),o!==null)return o;r=r.sibling}return null}var b=Object.assign,y=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),R=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function J(r){return r===null||typeof r!="object"?null:(r=W&&r[W]||r["@@iterator"],typeof r=="function"?r:null)}var Q=Symbol.for("react.client.reference");function ue(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===Q?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case N:return"Profiler";case T:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList";case U:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case M:return"Portal";case R:return r.displayName||"Context";case j:return(r._context.displayName||"Context")+".Consumer";case D:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case z:return o=r.displayName||null,o!==null?o:ue(r.type)||"Memo";case G:o=r._payload,r=r._init;try{return ue(r(o))}catch{}}return null}var ne=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},pe=[],we=-1;function q(r){return{current:r}}function ce(r){0>we||(r.current=pe[we],pe[we]=null,we--)}function Ee(r,o){we++,pe[we]=r.current,r.current=o}var Pe=q(null),rt=q(null),me=q(null),Ce=q(null);function Fe(r,o){switch(Ee(me,o),Ee(rt,r),Ee(Pe,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?GS(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=GS(o),r=qS(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ce(Pe),Ee(Pe,r)}function nt(){ce(Pe),ce(rt),ce(me)}function ft(r){r.memoizedState!==null&&Ee(Ce,r);var o=Pe.current,f=qS(o,r.type);o!==f&&(Ee(rt,r),Ee(Pe,f))}function sn(r){rt.current===r&&(ce(Pe),ce(rt)),Ce.current===r&&(ce(Ce),Im._currentValue=re)}var pn,Ot;function je(r){if(pn===void 0)try{throw Error()}catch(f){var o=f.stack.trim().match(/\n( *(at )?)/);pn=o&&o[1]||"",Ot=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pn+r+Ot}var Ge=!1;function Oe(r,o){if(!r||Ge)return"";Ge=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(o){var Ue=function(){throw Error()};if(Object.defineProperty(Ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ue,[])}catch(ke){var ye=ke}Reflect.construct(r,[],Ue)}else{try{Ue.call()}catch(ke){ye=ke}r.call(Ue.prototype)}}else{try{throw Error()}catch(ke){ye=ke}(Ue=r())&&typeof Ue.catch=="function"&&Ue.catch(function(){})}}catch(ke){if(ke&&ye&&typeof ke.stack=="string")return[ke.stack,ye.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=g.DetermineComponentFrameRoot(),O=E[0],H=E[1];if(O&&H){var ee=O.split(`
`),xe=H.split(`
`);for(S=g=0;g<ee.length&&!ee[g].includes("DetermineComponentFrameRoot");)g++;for(;S<xe.length&&!xe[S].includes("DetermineComponentFrameRoot");)S++;if(g===ee.length||S===xe.length)for(g=ee.length-1,S=xe.length-1;1<=g&&0<=S&&ee[g]!==xe[S];)S--;for(;1<=g&&0<=S;g--,S--)if(ee[g]!==xe[S]){if(g!==1||S!==1)do if(g--,S--,0>S||ee[g]!==xe[S]){var Re=`
`+ee[g].replace(" at new "," at ");return r.displayName&&Re.includes("<anonymous>")&&(Re=Re.replace("<anonymous>",r.displayName)),Re}while(1<=g&&0<=S);break}}}finally{Ge=!1,Error.prepareStackTrace=f}return(f=r?r.displayName||r.name:"")?je(f):""}function tt(r,o){switch(r.tag){case 26:case 27:case 5:return je(r.type);case 16:return je("Lazy");case 13:return r.child!==o&&o!==null?je("Suspense Fallback"):je("Suspense");case 19:return je("SuspenseList");case 0:case 15:return Oe(r.type,!1);case 11:return Oe(r.type.render,!1);case 1:return Oe(r.type,!0);case 31:return je("Activity");default:return""}}function K(r){try{var o="",f=null;do o+=tt(r,f),f=r,r=r.return;while(r);return o}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var Et=Object.prototype.hasOwnProperty,at=i.unstable_scheduleCallback,Tt=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$=i.unstable_requestPaint,B=i.unstable_now,oe=i.unstable_getCurrentPriorityLevel,Te=i.unstable_ImmediatePriority,Le=i.unstable_UserBlockingPriority,Ae=i.unstable_NormalPriority,pt=i.unstable_LowPriority,Je=i.unstable_IdlePriority,yt=i.log,jt=i.unstable_setDisableYieldValue,Ve=null,$e=null;function mt(r){if(typeof yt=="function"&&jt(r),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(Ve,r)}catch{}}var ht=Math.clz32?Math.clz32:ae,st=Math.log,en=Math.LN2;function ae(r){return r>>>=0,r===0?32:31-(st(r)/en|0)|0}var ot=256,Xe=262144,ct=4194304;function He(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ie(r,o,f){var g=r.pendingLanes;if(g===0)return 0;var S=0,E=r.suspendedLanes,O=r.pingedLanes;r=r.warmLanes;var H=g&134217727;return H!==0?(g=H&~E,g!==0?S=He(g):(O&=H,O!==0?S=He(O):f||(f=H&~r,f!==0&&(S=He(f))))):(H=g&~E,H!==0?S=He(H):O!==0?S=He(O):f||(f=g&~r,f!==0&&(S=He(f)))),S===0?0:o!==0&&o!==S&&(o&E)===0&&(E=S&-S,f=o&-o,E>=f||E===32&&(f&4194048)!==0)?o:S}function Qe(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function Gt(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yn(){var r=ct;return ct<<=1,(ct&62914560)===0&&(ct=4194304),r}function Sn(r){for(var o=[],f=0;31>f;f++)o.push(r);return o}function is(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Us(r,o,f,g,S,E){var O=r.pendingLanes;r.pendingLanes=f,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=f,r.entangledLanes&=f,r.errorRecoveryDisabledLanes&=f,r.shellSuspendCounter=0;var H=r.entanglements,ee=r.expirationTimes,xe=r.hiddenUpdates;for(f=O&~f;0<f;){var Re=31-ht(f),Ue=1<<Re;H[Re]=0,ee[Re]=-1;var ye=xe[Re];if(ye!==null)for(xe[Re]=null,Re=0;Re<ye.length;Re++){var ke=ye[Re];ke!==null&&(ke.lane&=-536870913)}f&=~Ue}g!==0&&No(r,g,0),E!==0&&S===0&&r.tag!==0&&(r.suspendedLanes|=E&~(O&~o))}function No(r,o,f){r.pendingLanes|=o,r.suspendedLanes&=~o;var g=31-ht(o);r.entangledLanes|=o,r.entanglements[g]=r.entanglements[g]|1073741824|f&261930}function To(r,o){var f=r.entangledLanes|=o;for(r=r.entanglements;f;){var g=31-ht(f),S=1<<g;S&o|r[g]&o&&(r[g]|=o),f&=~S}}function vl(r,o){var f=o&-o;return f=(f&42)!==0?1:Ao(f),(f&(r.suspendedLanes|o))!==0?0:f}function Ao(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Wa(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function bl(){var r=Z.p;return r!==0?r:(r=window.event,r===void 0?32:pM(r.type))}function fs(r,o){var f=Z.p;try{return Z.p=r,o()}finally{Z.p=f}}var tr=Math.random().toString(36).slice(2),ai="__reactFiber$"+tr,Pi="__reactProps$"+tr,nr="__reactContainer$"+tr,ir="__reactEvents$"+tr,sr="__reactListeners$"+tr,ko="__reactHandles$"+tr,yl="__reactResources$"+tr,Yr="__reactMarker$"+tr;function Xa(r){delete r[ai],delete r[Pi],delete r[ir],delete r[sr],delete r[ko]}function $a(r){var o=r[ai];if(o)return o;for(var f=r.parentNode;f;){if(o=f[nr]||f[ai]){if(f=o.alternate,o.child!==null||f!==null&&f.child!==null)for(r=JS(r);r!==null;){if(f=r[ai])return f;r=JS(r)}return o}r=f,f=r.parentNode}return null}function Ya(r){if(r=r[ai]||r[nr]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function Co(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(n(33))}function ha(r){var o=r[yl];return o||(o=r[yl]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function V(r){r[Yr]=!0}var le=new Set,_e={};function ve(r,o){he(r,o),he(r+"Capture",o)}function he(r,o){for(_e[r]=o,r=0;r<o.length;r++)le.add(o[r])}var Ke=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gt={},We={};function bt(r){return Et.call(We,r)?!0:Et.call(gt,r)?!1:Ke.test(r)?We[r]=!0:(gt[r]=!0,!1)}function _t(r,o,f){if(bt(o))if(f===null)r.removeAttribute(o);else{switch(typeof f){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var g=o.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+f)}}function Rt(r,o,f){if(f===null)r.removeAttribute(o);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+f)}}function St(r,o,f,g){if(g===null)r.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(f);return}r.setAttributeNS(o,f,""+g)}}function Ut(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function An(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Gn(r,o,f){var g=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var S=g.get,E=g.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return S.call(this)},set:function(O){f=""+O,E.call(this,O)}}),Object.defineProperty(r,o,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function(O){f=""+O},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function Bn(r){if(!r._valueTracker){var o=An(r)?"checked":"value";r._valueTracker=Gn(r,o,""+r[o])}}function $t(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var f=o.getValue(),g="";return r&&(g=An(r)?r.checked?"true":"false":r.value),r=g,r!==f?(o.setValue(r),!0):!1}function lt(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Mn=/[\n"\\]/g;function zt(r){return r.replace(Mn,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ki(r,o,f,g,S,E,O,H){r.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?r.type=O:r.removeAttribute("type"),o!=null?O==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+Ut(o)):r.value!==""+Ut(o)&&(r.value=""+Ut(o)):O!=="submit"&&O!=="reset"||r.removeAttribute("value"),o!=null?Zn(r,O,Ut(o)):f!=null?Zn(r,O,Ut(f)):g!=null&&r.removeAttribute("value"),S==null&&E!=null&&(r.defaultChecked=!!E),S!=null&&(r.checked=S&&typeof S!="function"&&typeof S!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?r.name=""+Ut(H):r.removeAttribute("name")}function Kr(r,o,f,g,S,E,O,H){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(r.type=E),o!=null||f!=null){if(!(E!=="submit"&&E!=="reset"||o!=null)){Bn(r);return}f=f!=null?""+Ut(f):"",o=o!=null?""+Ut(o):f,H||o===r.value||(r.value=o),r.defaultValue=o}g=g??S,g=typeof g!="function"&&typeof g!="symbol"&&!!g,r.checked=H?r.checked:!!g,r.defaultChecked=!!g,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(r.name=O),Bn(r)}function Zn(r,o,f){o==="number"&&lt(r.ownerDocument)===r||r.defaultValue===""+f||(r.defaultValue=""+f)}function Ss(r,o,f,g){if(r=r.options,o){o={};for(var S=0;S<f.length;S++)o["$"+f[S]]=!0;for(f=0;f<r.length;f++)S=o.hasOwnProperty("$"+r[f].value),r[f].selected!==S&&(r[f].selected=S),S&&g&&(r[f].defaultSelected=!0)}else{for(f=""+Ut(f),o=null,S=0;S<r.length;S++){if(r[S].value===f){r[S].selected=!0,g&&(r[S].defaultSelected=!0);return}o!==null||r[S].disabled||(o=r[S])}o!==null&&(o.selected=!0)}}function jn(r,o,f){if(o!=null&&(o=""+Ut(o),o!==r.value&&(r.value=o),f==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=f!=null?""+Ut(f):""}function zi(r,o,f,g){if(o==null){if(g!=null){if(f!=null)throw Error(n(92));if(ne(g)){if(1<g.length)throw Error(n(93));g=g[0]}f=g}f==null&&(f=""),o=f}f=Ut(o),r.defaultValue=f,g=r.textContent,g===f&&g!==""&&g!==null&&(r.value=g),Bn(r)}function Ci(r,o){if(o){var f=r.firstChild;if(f&&f===r.lastChild&&f.nodeType===3){f.nodeValue=o;return}}r.textContent=o}var Wi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xi(r,o,f){var g=o.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":g?r.setProperty(o,f):typeof f!="number"||f===0||Wi.has(o)?o==="float"?r.cssFloat=f:r[o]=(""+f).trim():r[o]=f+"px"}function _l(r,o,f){if(o!=null&&typeof o!="object")throw Error(n(62));if(r=r.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||o!=null&&o.hasOwnProperty(g)||(g.indexOf("--")===0?r.setProperty(g,""):g==="float"?r.cssFloat="":r[g]="");for(var S in o)g=o[S],o.hasOwnProperty(S)&&f[S]!==g&&Xi(r,S,g)}else for(var E in o)o.hasOwnProperty(E)&&Xi(r,E,o[E])}function _r(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var r0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ku(r){return pp.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Ka(){}var nh=null;function ih(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var wl=null,Ro=null;function mp(r){var o=Ya(r);if(o&&(r=o.stateNode)){var f=r[Pi]||null;e:switch(r=o.stateNode,o.type){case"input":if(ki(r,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),o=f.name,f.type==="radio"&&o!=null){for(f=r;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+zt(""+o)+'"][type="radio"]'),o=0;o<f.length;o++){var g=f[o];if(g!==r&&g.form===r.form){var S=g[Pi]||null;if(!S)throw Error(n(90));ki(g,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(o=0;o<f.length;o++)g=f[o],g.form===r.form&&$t(g)}break e;case"textarea":jn(r,f.value,f.defaultValue);break e;case"select":o=f.value,o!=null&&Ss(r,!!f.multiple,o,!1)}}}var sh=!1;function gp(r,o,f){if(sh)return r(o,f);sh=!0;try{var g=r(o);return g}finally{if(sh=!1,(wl!==null||Ro!==null)&&(ta(),wl&&(o=wl,r=Ro,Ro=wl=null,mp(o),r)))for(o=0;o<r.length;o++)mp(r[o])}}function hc(r,o){var f=r.stateNode;if(f===null)return null;var g=f[Pi]||null;if(g===null)return null;f=g[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(r=r.type,g=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!g;break e;default:r=!1}if(r)return null;if(f&&typeof f!="function")throw Error(n(231,o,typeof f));return f}var fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xp=!1;if(fa)try{var fc={};Object.defineProperty(fc,"passive",{get:function(){xp=!0}}),window.addEventListener("test",fc,fc),window.removeEventListener("test",fc,fc)}catch{xp=!1}var rr=null,rh=null,Sl=null;function Cu(){if(Sl)return Sl;var r,o=rh,f=o.length,g,S="value"in rr?rr.value:rr.textContent,E=S.length;for(r=0;r<f&&o[r]===S[r];r++);var O=f-r;for(g=1;g<=O&&o[f-g]===S[E-g];g++);return Sl=S.slice(r,1<g?1-g:void 0)}function Ru(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function pc(){return!0}function a0(){return!1}function Ms(r){function o(f,g,S,E,O){this._reactName=f,this._targetInst=S,this.type=g,this.nativeEvent=E,this.target=O,this.currentTarget=null;for(var H in r)r.hasOwnProperty(H)&&(f=r[H],this[H]=f?f(E):E[H]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?pc:a0,this.isPropagationStopped=a0,this}return b(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=pc)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=pc)},persist:function(){},isPersistent:pc}),o}var jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ju=Ms(jo),mc=b({},jo,{view:0,detail:0}),o0=Ms(mc),Du,ah,gc,xc=b({},mc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uh,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==gc&&(gc&&r.type==="mousemove"?(Du=r.screenX-gc.screenX,ah=r.screenY-gc.screenY):ah=Du=0,gc=r),Du)},movementY:function(r){return"movementY"in r?r.movementY:ah}}),vp=Ms(xc),l0=b({},xc,{dataTransfer:0}),c0=Ms(l0),bp=b({},mc,{relatedTarget:0}),oh=Ms(bp),u0=b({},jo,{animationName:0,elapsedTime:0,pseudoElement:0}),Gy=Ms(u0),qy=b({},jo,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),d0=Ms(qy),Iu=b({},jo,{data:0}),lh=Ms(Iu),ch={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},h0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yp(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=f0[r])?!!o[r]:!1}function uh(){return yp}var p0=b({},mc,{key:function(r){if(r.key){var o=ch[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Ru(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?h0[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uh,charCode:function(r){return r.type==="keypress"?Ru(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ru(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ml=Ms(p0),dh=b({},xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_p=Ms(dh),wp=b({},mc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uh}),m0=Ms(wp),g0=b({},jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wy=Ms(g0),ss=b({},xc,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),x0=Ms(ss),v0=b({},jo,{newState:0,oldState:0}),b0=Ms(v0),y0=[9,13,27,32],El=fa&&"CompositionEvent"in window,vc=null;fa&&"documentMode"in document&&(vc=document.documentMode);var hh=fa&&"TextEvent"in window&&!vc,Sp=fa&&(!El||vc&&8<vc&&11>=vc),_0=" ",Ou=!1;function fh(r,o){switch(r){case"keyup":return y0.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Nl=!1;function w0(r,o){switch(r){case"compositionend":return Mp(o);case"keypress":return o.which!==32?null:(Ou=!0,_0);case"textInput":return r=o.data,r===_0&&Ou?null:r;default:return null}}function Ep(r,o){if(Nl)return r==="compositionend"||!El&&fh(r,o)?(r=Cu(),Sl=rh=rr=null,Nl=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Sp&&o.locale!=="ko"?null:o.data;default:return null}}var Np={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tp(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!Np[r.type]:o==="textarea"}function ph(r,o,f,g){wl?Ro?Ro.push(g):Ro=[g]:wl=g,o=Tx(o,"onChange"),0<o.length&&(f=new ju("onChange","change",null,f,g),r.push({event:f,listeners:o}))}var Do=null,Tl=null;function S0(r){PS(r,0)}function bc(r){var o=Co(r);if($t(o))return r}function Ap(r,o){if(r==="change")return o}var pa=!1;if(fa){var Lu;if(fa){var kp="oninput"in document;if(!kp){var Cp=document.createElement("div");Cp.setAttribute("oninput","return;"),kp=typeof Cp.oninput=="function"}Lu=kp}else Lu=!1;pa=Lu&&(!document.documentMode||9<document.documentMode)}function wr(){Do&&(Do.detachEvent("onpropertychange",Uu),Tl=Do=null)}function Uu(r){if(r.propertyName==="value"&&bc(Tl)){var o=[];ph(o,Tl,r,ih(r)),gp(S0,o)}}function M0(r,o,f){r==="focusin"?(wr(),Do=o,Tl=f,Do.attachEvent("onpropertychange",Uu)):r==="focusout"&&wr()}function Rp(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return bc(Tl)}function E0(r,o){if(r==="click")return bc(o)}function N0(r,o){if(r==="input"||r==="change")return bc(o)}function jp(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Es=typeof Object.is=="function"?Object.is:jp;function yc(r,o){if(Es(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var f=Object.keys(r),g=Object.keys(o);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var S=f[g];if(!Et.call(o,S)||!Es(r[S],o[S]))return!1}return!0}function Pu(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function _c(r,o){var f=Pu(r);r=0;for(var g;f;){if(f.nodeType===3){if(g=r+f.textContent.length,r<=o&&g>=o)return{node:f,offset:o-r};r=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Pu(f)}}function qn(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?qn(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function T0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=lt(r.document);o instanceof r.HTMLIFrameElement;){try{var f=typeof o.contentWindow.location.href=="string"}catch{f=!1}if(f)r=o.contentWindow;else break;o=lt(r.document)}return o}function Dp(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var A0=fa&&"documentMode"in document&&11>=document.documentMode,ma=null,ga=null,wc=null,mh=!1;function Sc(r,o,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;mh||ma==null||ma!==lt(g)||(g=ma,"selectionStart"in g&&Dp(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),wc&&yc(wc,g)||(wc=g,g=Tx(ga,"onSelect"),0<g.length&&(o=new ju("onSelect","select",null,o,f),r.push({event:o,listeners:g}),o.target=ma)))}function ps(r,o){var f={};return f[r.toLowerCase()]=o.toLowerCase(),f["Webkit"+r]="webkit"+o,f["Moz"+r]="moz"+o,f}var Al={animationend:ps("Animation","AnimationEnd"),animationiteration:ps("Animation","AnimationIteration"),animationstart:ps("Animation","AnimationStart"),transitionrun:ps("Transition","TransitionRun"),transitionstart:ps("Transition","TransitionStart"),transitioncancel:ps("Transition","TransitionCancel"),transitionend:ps("Transition","TransitionEnd")},zu={},Ip={};fa&&(Ip=document.createElement("div").style,"AnimationEvent"in window||(delete Al.animationend.animation,delete Al.animationiteration.animation,delete Al.animationstart.animation),"TransitionEvent"in window||delete Al.transitionend.transition);function Za(r){if(zu[r])return zu[r];if(!Al[r])return r;var o=Al[r],f;for(f in o)if(o.hasOwnProperty(f)&&f in Ip)return zu[r]=o[f];return r}var gh=Za("animationend"),Bu=Za("animationiteration"),Op=Za("animationstart"),k0=Za("transitionrun"),Xy=Za("transitionstart"),C0=Za("transitioncancel"),Lp=Za("transitionend"),Sr=new Map,Fu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fu.push("scrollEnd");function Mr(r,o){Sr.set(r,o),ve(o,[r])}var Vu=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Er=[],Ja=0,$i=0;function Hu(){for(var r=Ja,o=$i=Ja=0;o<r;){var f=Er[o];Er[o++]=null;var g=Er[o];Er[o++]=null;var S=Er[o];Er[o++]=null;var E=Er[o];if(Er[o++]=null,g!==null&&S!==null){var O=g.pending;O===null?S.next=S:(S.next=O.next,O.next=S),g.pending=S}E!==0&&Io(f,S,E)}}function Yi(r,o,f,g){Er[Ja++]=r,Er[Ja++]=o,Er[Ja++]=f,Er[Ja++]=g,$i|=g,r.lanes|=g,r=r.alternate,r!==null&&(r.lanes|=g)}function xh(r,o,f,g){return Yi(r,o,f,g),Nr(r)}function Ns(r,o){return Yi(r,null,null,o),Nr(r)}function Io(r,o,f){r.lanes|=f;var g=r.alternate;g!==null&&(g.lanes|=f);for(var S=!1,E=r.return;E!==null;)E.childLanes|=f,g=E.alternate,g!==null&&(g.childLanes|=f),E.tag===22&&(r=E.stateNode,r===null||r._visibility&1||(S=!0)),r=E,E=E.return;return r.tag===3?(E=r.stateNode,S&&o!==null&&(S=31-ht(f),r=E.hiddenUpdates,g=r[S],g===null?r[S]=[o]:g.push(o),o.lane=f|536870912),E):null}function Nr(r){if(50<Qo)throw Qo=0,Xl=null,Error(n(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Oo={};function Up(r,o,f,g){this.tag=r,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oi(r,o,f,g){return new Up(r,o,f,g)}function vh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ps(r,o){var f=r.alternate;return f===null?(f=oi(r.tag,o,r.key,r.mode),f.elementType=r.elementType,f.type=r.type,f.stateNode=r.stateNode,f.alternate=r,r.alternate=f):(f.pendingProps=o,f.type=r.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=r.flags&65011712,f.childLanes=r.childLanes,f.lanes=r.lanes,f.child=r.child,f.memoizedProps=r.memoizedProps,f.memoizedState=r.memoizedState,f.updateQueue=r.updateQueue,o=r.dependencies,f.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},f.sibling=r.sibling,f.index=r.index,f.ref=r.ref,f.refCleanup=r.refCleanup,f}function Mc(r,o){r.flags&=65011714;var f=r.alternate;return f===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=f.childLanes,r.lanes=f.lanes,r.child=f.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=f.memoizedProps,r.memoizedState=f.memoizedState,r.updateQueue=f.updateQueue,r.type=f.type,o=f.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function xa(r,o,f,g,S,E){var O=0;if(g=r,typeof r=="function")vh(r)&&(O=1);else if(typeof r=="string")O=H3(r,f,Pe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case U:return r=oi(31,f,o,S),r.elementType=U,r.lanes=E,r;case k:return Lo(f.children,S,E,o);case T:O=8,S|=24;break;case N:return r=oi(12,f,o,S|2),r.elementType=N,r.lanes=E,r;case I:return r=oi(13,f,o,S),r.elementType=I,r.lanes=E,r;case P:return r=oi(19,f,o,S),r.elementType=P,r.lanes=E,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case R:O=10;break e;case j:O=9;break e;case D:O=11;break e;case z:O=14;break e;case G:O=16,g=null;break e}O=29,f=Error(n(130,r===null?"null":typeof r,"")),g=null}return o=oi(O,f,o,S),o.elementType=r,o.type=g,o.lanes=E,o}function Lo(r,o,f,g){return r=oi(7,r,g,o),r.lanes=f,r}function bh(r,o,f){return r=oi(6,r,null,o),r.lanes=f,r}function Ec(r){var o=oi(18,null,null,0);return o.stateNode=r,o}function yh(r,o,f){return o=oi(4,r.children!==null?r.children:[],r.key,o),o.lanes=f,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var Gu=new WeakMap;function ar(r,o){if(typeof r=="object"&&r!==null){var f=Gu.get(r);return f!==void 0?f:(o={value:r,source:o,stack:K(o)},Gu.set(r,o),o)}return{value:r,source:o,stack:K(o)}}var Uo=[],Po=0,Nc=null,Tc=0,zs=[],ti=0,Qa=null,li=1,Zr="";function va(r,o){Uo[Po++]=Tc,Uo[Po++]=Nc,Nc=r,Tc=o}function R0(r,o,f){zs[ti++]=li,zs[ti++]=Zr,zs[ti++]=Qa,Qa=r;var g=li;r=Zr;var S=32-ht(g)-1;g&=~(1<<S),f+=1;var E=32-ht(o)+S;if(30<E){var O=S-S%5;E=(g&(1<<O)-1).toString(32),g>>=O,S-=O,li=1<<32-ht(o)+S|f<<S|g,Zr=E+r}else li=1<<E|f<<S|g,Zr=r}function ba(r){r.return!==null&&(va(r,1),R0(r,1,0))}function _h(r){for(;r===Nc;)Nc=Uo[--Po],Uo[Po]=null,Tc=Uo[--Po],Uo[Po]=null;for(;r===Qa;)Qa=zs[--ti],zs[ti]=null,Zr=zs[--ti],zs[ti]=null,li=zs[--ti],zs[ti]=null}function wh(r,o){zs[ti++]=li,zs[ti++]=Zr,zs[ti++]=Qa,li=o.id,Zr=o.overflow,Qa=r}var mi=null,Wn=null,vn=!1,eo=null,or=!1,Ac=Error(n(519));function ya(r){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _a(ar(o,r)),Ac}function j0(r){var o=r.stateNode,f=r.type,g=r.memoizedProps;switch(o[ai]=r,o[Pi]=g,f){case"dialog":wn("cancel",o),wn("close",o);break;case"iframe":case"object":case"embed":wn("load",o);break;case"video":case"audio":for(f=0;f<zr.length;f++)wn(zr[f],o);break;case"source":wn("error",o);break;case"img":case"image":case"link":wn("error",o),wn("load",o);break;case"details":wn("toggle",o);break;case"input":wn("invalid",o),Kr(o,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":wn("invalid",o);break;case"textarea":wn("invalid",o),zi(o,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||o.textContent===""+f||g.suppressHydrationWarning===!0||VS(o.textContent,f)?(g.popover!=null&&(wn("beforetoggle",o),wn("toggle",o)),g.onScroll!=null&&wn("scroll",o),g.onScrollEnd!=null&&wn("scrollend",o),g.onClick!=null&&(o.onclick=Ka),o=!0):o=!1,o||ya(r,!0)}function D0(r){for(mi=r.return;mi;)switch(mi.tag){case 5:case 31:case 13:or=!1;return;case 27:case 3:or=!0;return;default:mi=mi.return}}function kc(r){if(r!==mi)return!1;if(!vn)return D0(r),vn=!0,!1;var o=r.tag,f;if((f=o!==3&&o!==27)&&((f=o===5)&&(f=r.type,f=!(f!=="form"&&f!=="button")||c_(r.type,r.memoizedProps)),f=!f),f&&Wn&&ya(r),D0(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));Wn=ZS(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));Wn=ZS(r)}else o===27?(o=Wn,Yc(r.type)?(r=p_,p_=null,Wn=r):Wn=o):Wn=mi?Oa(r.stateNode.nextSibling):null;return!0}function zo(){Wn=mi=null,vn=!1}function Sh(){var r=eo;return r!==null&&(xi===null?xi=r:xi.push.apply(xi,r),eo=null),r}function _a(r){eo===null?eo=[r]:eo.push(r)}var Cc=q(null),Bo=null,wa=null;function to(r,o,f){Ee(Cc,o._currentValue),o._currentValue=f}function Sa(r){r._currentValue=Cc.current,ce(Cc)}function Mh(r,o,f){for(;r!==null;){var g=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,g!==null&&(g.childLanes|=o)):g!==null&&(g.childLanes&o)!==o&&(g.childLanes|=o),r===f)break;r=r.return}}function Eh(r,o,f,g){var S=r.child;for(S!==null&&(S.return=r);S!==null;){var E=S.dependencies;if(E!==null){var O=S.child;E=E.firstContext;e:for(;E!==null;){var H=E;E=S;for(var ee=0;ee<o.length;ee++)if(H.context===o[ee]){E.lanes|=f,H=E.alternate,H!==null&&(H.lanes|=f),Mh(E.return,f,r),g||(O=null);break e}E=H.next}}else if(S.tag===18){if(O=S.return,O===null)throw Error(n(341));O.lanes|=f,E=O.alternate,E!==null&&(E.lanes|=f),Mh(O,f,r),O=null}else O=S.child;if(O!==null)O.return=S;else for(O=S;O!==null;){if(O===r){O=null;break}if(S=O.sibling,S!==null){S.return=O.return,O=S;break}O=O.return}S=O}}function Ma(r,o,f,g){r=null;for(var S=o,E=!1;S!==null;){if(!E){if((S.flags&524288)!==0)E=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var O=S.alternate;if(O===null)throw Error(n(387));if(O=O.memoizedProps,O!==null){var H=S.type;Es(S.pendingProps.value,O.value)||(r!==null?r.push(H):r=[H])}}else if(S===Ce.current){if(O=S.alternate,O===null)throw Error(n(387));O.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(r!==null?r.push(Im):r=[Im])}S=S.return}r!==null&&Eh(o,r,f,g),o.flags|=262144}function qu(r){for(r=r.firstContext;r!==null;){if(!Es(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Fo(r){Bo=r,wa=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Ft(r){return I0(Bo,r)}function Rc(r,o){return Bo===null&&Fo(r),I0(r,o)}function I0(r,o){var f=o._currentValue;if(o={context:o,memoizedValue:f,next:null},wa===null){if(r===null)throw Error(n(308));wa=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else wa=wa.next=o;return f}var O0=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(f,g){r.push(g)}};this.abort=function(){o.aborted=!0,r.forEach(function(f){return f()})}},$y=i.unstable_scheduleCallback,Yy=i.unstable_NormalPriority,Ri={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pp(){return{controller:new O0,data:new Map,refCount:0}}function kl(r){r.refCount--,r.refCount===0&&$y(Yy,function(){r.controller.abort()})}var lr=null,Nh=0,no=0,Tr=null;function zp(r,o){if(lr===null){var f=lr=[];Nh=0,no=Me(),Tr={status:"pending",value:void 0,then:function(g){f.push(g)}}}return Nh++,o.then(Bp,Bp),o}function Bp(){if(--Nh===0&&lr!==null){Tr!==null&&(Tr.status="fulfilled");var r=lr;lr=null,no=0,Tr=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function Fp(r,o){var f=[],g={status:"pending",value:null,reason:null,then:function(S){f.push(S)}};return r.then(function(){g.status="fulfilled",g.value=o;for(var S=0;S<f.length;S++)(0,f[S])(o)},function(S){for(g.status="rejected",g.reason=S,S=0;S<f.length;S++)(0,f[S])(void 0)}),g}var L0=X.S;X.S=function(r,o){Am=B(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&zp(r,o),L0!==null&&L0(r,o)};var Vo=q(null);function Th(){var r=Vo.current;return r!==null?r:Wt.pooledCache}function Wu(r,o){o===null?Ee(Vo,Vo.current):Ee(Vo,o.pool)}function Vp(){var r=Th();return r===null?null:{parent:Ri._currentValue,pool:r}}var Cl=Error(n(460)),Xu=Error(n(474)),rn=Error(n(542)),Ah={then:function(){}};function Bs(r){return r=r.status,r==="fulfilled"||r==="rejected"}function kh(r,o,f){switch(f=r[f],f===void 0?r.push(o):f!==o&&(o.then(Ka,Ka),o=f),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,Dl(r),r;default:if(typeof o.status=="string")o.then(Ka,Ka);else{if(r=Wt,r!==null&&100<r.shellSuspendCounter)throw Error(n(482));r=o,r.status="pending",r.then(function(g){if(o.status==="pending"){var S=o;S.status="fulfilled",S.value=g}},function(g){if(o.status==="pending"){var S=o;S.status="rejected",S.reason=g}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,Dl(r),r}throw Ea=o,Cl}}function Rl(r){try{var o=r._init;return o(r._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Ea=f,Cl):f}}var Ea=null;function jl(){if(Ea===null)throw Error(n(459));var r=Ea;return Ea=null,r}function Dl(r){if(r===Cl||r===rn)throw Error(n(483))}var Il=null,Ol=0;function $u(r){var o=Ol;return Ol+=1,Il===null&&(Il=[]),kh(Il,r,o)}function Ar(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function jc(r,o){throw o.$$typeof===y?Error(n(525)):(r=Object.prototype.toString.call(o),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function Ch(r){function o(de,se){if(r){var ge=de.deletions;ge===null?(de.deletions=[se],de.flags|=16):ge.push(se)}}function f(de,se){if(!r)return null;for(;se!==null;)o(de,se),se=se.sibling;return null}function g(de){for(var se=new Map;de!==null;)de.key!==null?se.set(de.key,de):se.set(de.index,de),de=de.sibling;return se}function S(de,se){return de=Ps(de,se),de.index=0,de.sibling=null,de}function E(de,se,ge){return de.index=ge,r?(ge=de.alternate,ge!==null?(ge=ge.index,ge<se?(de.flags|=67108866,se):ge):(de.flags|=67108866,se)):(de.flags|=1048576,se)}function O(de){return r&&de.alternate===null&&(de.flags|=67108866),de}function H(de,se,ge,De){return se===null||se.tag!==6?(se=bh(ge,de.mode,De),se.return=de,se):(se=S(se,ge),se.return=de,se)}function ee(de,se,ge,De){var It=ge.type;return It===k?Re(de,se,ge.props.children,De,ge.key):se!==null&&(se.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===G&&Rl(It)===se.type)?(se=S(se,ge.props),Ar(se,ge),se.return=de,se):(se=xa(ge.type,ge.key,ge.props,null,de.mode,De),Ar(se,ge),se.return=de,se)}function xe(de,se,ge,De){return se===null||se.tag!==4||se.stateNode.containerInfo!==ge.containerInfo||se.stateNode.implementation!==ge.implementation?(se=yh(ge,de.mode,De),se.return=de,se):(se=S(se,ge.children||[]),se.return=de,se)}function Re(de,se,ge,De,It){return se===null||se.tag!==7?(se=Lo(ge,de.mode,De,It),se.return=de,se):(se=S(se,ge),se.return=de,se)}function Ue(de,se,ge){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=bh(""+se,de.mode,ge),se.return=de,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case w:return ge=xa(se.type,se.key,se.props,null,de.mode,ge),Ar(ge,se),ge.return=de,ge;case M:return se=yh(se,de.mode,ge),se.return=de,se;case G:return se=Rl(se),Ue(de,se,ge)}if(ne(se)||J(se))return se=Lo(se,de.mode,ge,null),se.return=de,se;if(typeof se.then=="function")return Ue(de,$u(se),ge);if(se.$$typeof===R)return Ue(de,Rc(de,se),ge);jc(de,se)}return null}function ye(de,se,ge,De){var It=se!==null?se.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return It!==null?null:H(de,se,""+ge,De);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case w:return ge.key===It?ee(de,se,ge,De):null;case M:return ge.key===It?xe(de,se,ge,De):null;case G:return ge=Rl(ge),ye(de,se,ge,De)}if(ne(ge)||J(ge))return It!==null?null:Re(de,se,ge,De,null);if(typeof ge.then=="function")return ye(de,se,$u(ge),De);if(ge.$$typeof===R)return ye(de,se,Rc(de,ge),De);jc(de,ge)}return null}function ke(de,se,ge,De,It){if(typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint")return de=de.get(ge)||null,H(se,de,""+De,It);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case w:return de=de.get(De.key===null?ge:De.key)||null,ee(se,de,De,It);case M:return de=de.get(De.key===null?ge:De.key)||null,xe(se,de,De,It);case G:return De=Rl(De),ke(de,se,ge,De,It)}if(ne(De)||J(De))return de=de.get(ge)||null,Re(se,de,De,It,null);if(typeof De.then=="function")return ke(de,se,ge,$u(De),It);if(De.$$typeof===R)return ke(de,se,ge,Rc(se,De),It);jc(se,De)}return null}function Mt(de,se,ge,De){for(var It=null,On=null,Nt=se,cn=se=0,Nn=null;Nt!==null&&cn<ge.length;cn++){Nt.index>cn?(Nn=Nt,Nt=null):Nn=Nt.sibling;var Ln=ye(de,Nt,ge[cn],De);if(Ln===null){Nt===null&&(Nt=Nn);break}r&&Nt&&Ln.alternate===null&&o(de,Nt),se=E(Ln,se,cn),On===null?It=Ln:On.sibling=Ln,On=Ln,Nt=Nn}if(cn===ge.length)return f(de,Nt),vn&&va(de,cn),It;if(Nt===null){for(;cn<ge.length;cn++)Nt=Ue(de,ge[cn],De),Nt!==null&&(se=E(Nt,se,cn),On===null?It=Nt:On.sibling=Nt,On=Nt);return vn&&va(de,cn),It}for(Nt=g(Nt);cn<ge.length;cn++)Nn=ke(Nt,de,cn,ge[cn],De),Nn!==null&&(r&&Nn.alternate!==null&&Nt.delete(Nn.key===null?cn:Nn.key),se=E(Nn,se,cn),On===null?It=Nn:On.sibling=Nn,On=Nn);return r&&Nt.forEach(function(eu){return o(de,eu)}),vn&&va(de,cn),It}function Bt(de,se,ge,De){if(ge==null)throw Error(n(151));for(var It=null,On=null,Nt=se,cn=se=0,Nn=null,Ln=ge.next();Nt!==null&&!Ln.done;cn++,Ln=ge.next()){Nt.index>cn?(Nn=Nt,Nt=null):Nn=Nt.sibling;var eu=ye(de,Nt,Ln.value,De);if(eu===null){Nt===null&&(Nt=Nn);break}r&&Nt&&eu.alternate===null&&o(de,Nt),se=E(eu,se,cn),On===null?It=eu:On.sibling=eu,On=eu,Nt=Nn}if(Ln.done)return f(de,Nt),vn&&va(de,cn),It;if(Nt===null){for(;!Ln.done;cn++,Ln=ge.next())Ln=Ue(de,Ln.value,De),Ln!==null&&(se=E(Ln,se,cn),On===null?It=Ln:On.sibling=Ln,On=Ln);return vn&&va(de,cn),It}for(Nt=g(Nt);!Ln.done;cn++,Ln=ge.next())Ln=ke(Nt,de,cn,Ln.value,De),Ln!==null&&(r&&Ln.alternate!==null&&Nt.delete(Ln.key===null?cn:Ln.key),se=E(Ln,se,cn),On===null?It=Ln:On.sibling=Ln,On=Ln);return r&&Nt.forEach(function(eC){return o(de,eC)}),vn&&va(de,cn),It}function Yn(de,se,ge,De){if(typeof ge=="object"&&ge!==null&&ge.type===k&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case w:e:{for(var It=ge.key;se!==null;){if(se.key===It){if(It=ge.type,It===k){if(se.tag===7){f(de,se.sibling),De=S(se,ge.props.children),De.return=de,de=De;break e}}else if(se.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===G&&Rl(It)===se.type){f(de,se.sibling),De=S(se,ge.props),Ar(De,ge),De.return=de,de=De;break e}f(de,se);break}else o(de,se);se=se.sibling}ge.type===k?(De=Lo(ge.props.children,de.mode,De,ge.key),De.return=de,de=De):(De=xa(ge.type,ge.key,ge.props,null,de.mode,De),Ar(De,ge),De.return=de,de=De)}return O(de);case M:e:{for(It=ge.key;se!==null;){if(se.key===It)if(se.tag===4&&se.stateNode.containerInfo===ge.containerInfo&&se.stateNode.implementation===ge.implementation){f(de,se.sibling),De=S(se,ge.children||[]),De.return=de,de=De;break e}else{f(de,se);break}else o(de,se);se=se.sibling}De=yh(ge,de.mode,De),De.return=de,de=De}return O(de);case G:return ge=Rl(ge),Yn(de,se,ge,De)}if(ne(ge))return Mt(de,se,ge,De);if(J(ge)){if(It=J(ge),typeof It!="function")throw Error(n(150));return ge=It.call(ge),Bt(de,se,ge,De)}if(typeof ge.then=="function")return Yn(de,se,$u(ge),De);if(ge.$$typeof===R)return Yn(de,se,Rc(de,ge),De);jc(de,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,se!==null&&se.tag===6?(f(de,se.sibling),De=S(se,ge),De.return=de,de=De):(f(de,se),De=bh(ge,de.mode,De),De.return=de,de=De),O(de)):f(de,se)}return function(de,se,ge,De){try{Ol=0;var It=Yn(de,se,ge,De);return Il=null,It}catch(Nt){if(Nt===Cl||Nt===rn)throw Nt;var On=oi(29,Nt,null,de.mode);return On.lanes=De,On.return=de,On}}}var io=Ch(!0),Rh=Ch(!1),Ts=!1;function Yu(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hp(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function so(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ho(r,o,f){var g=r.updateQueue;if(g===null)return null;if(g=g.shared,(At&2)!==0){var S=g.pending;return S===null?o.next=o:(o.next=S.next,S.next=o),g.pending=o,o=Nr(r),Io(r,null,f),o}return Yi(r,g,o,f),Nr(r)}function Go(r,o,f){if(o=o.updateQueue,o!==null&&(o=o.shared,(f&4194048)!==0)){var g=o.lanes;g&=r.pendingLanes,f|=g,o.lanes=f,To(r,f)}}function Dt(r,o){var f=r.updateQueue,g=r.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var S=null,E=null;if(f=f.firstBaseUpdate,f!==null){do{var O={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};E===null?S=E=O:E=E.next=O,f=f.next}while(f!==null);E===null?S=E=o:E=E.next=o}else S=E=o;f={baseState:g.baseState,firstBaseUpdate:S,lastBaseUpdate:E,shared:g.shared,callbacks:g.callbacks},r.updateQueue=f;return}r=f.lastBaseUpdate,r===null?f.firstBaseUpdate=o:r.next=o,f.lastBaseUpdate=o}var Gp=!1;function Ku(){if(Gp){var r=Tr;if(r!==null)throw r}}function Dc(r,o,f,g){Gp=!1;var S=r.updateQueue;Ts=!1;var E=S.firstBaseUpdate,O=S.lastBaseUpdate,H=S.shared.pending;if(H!==null){S.shared.pending=null;var ee=H,xe=ee.next;ee.next=null,O===null?E=xe:O.next=xe,O=ee;var Re=r.alternate;Re!==null&&(Re=Re.updateQueue,H=Re.lastBaseUpdate,H!==O&&(H===null?Re.firstBaseUpdate=xe:H.next=xe,Re.lastBaseUpdate=ee))}if(E!==null){var Ue=S.baseState;O=0,Re=xe=ee=null,H=E;do{var ye=H.lane&-536870913,ke=ye!==H.lane;if(ke?(tn&ye)===ye:(g&ye)===ye){ye!==0&&ye===no&&(Gp=!0),Re!==null&&(Re=Re.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var Mt=r,Bt=H;ye=o;var Yn=f;switch(Bt.tag){case 1:if(Mt=Bt.payload,typeof Mt=="function"){Ue=Mt.call(Yn,Ue,ye);break e}Ue=Mt;break e;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=Bt.payload,ye=typeof Mt=="function"?Mt.call(Yn,Ue,ye):Mt,ye==null)break e;Ue=b({},Ue,ye);break e;case 2:Ts=!0}}ye=H.callback,ye!==null&&(r.flags|=64,ke&&(r.flags|=8192),ke=S.callbacks,ke===null?S.callbacks=[ye]:ke.push(ye))}else ke={lane:ye,tag:H.tag,payload:H.payload,callback:H.callback,next:null},Re===null?(xe=Re=ke,ee=Ue):Re=Re.next=ke,O|=ye;if(H=H.next,H===null){if(H=S.shared.pending,H===null)break;ke=H,H=ke.next,ke.next=null,S.lastBaseUpdate=ke,S.shared.pending=null}}while(!0);Re===null&&(ee=Ue),S.baseState=ee,S.firstBaseUpdate=xe,S.lastBaseUpdate=Re,E===null&&(S.shared.lanes=0),ja|=O,r.lanes=O,r.memoizedState=Ue}}function Ic(r,o){if(typeof r!="function")throw Error(n(191,r));r.call(o)}function U0(r,o){var f=r.callbacks;if(f!==null)for(r.callbacks=null,r=0;r<f.length;r++)Ic(f[r],o)}var Oc=q(null),jh=q(0);function P0(r,o){r=hr,Ee(jh,r),Ee(Oc,o),hr=r|o.baseLanes}function qp(){Ee(jh,hr),Ee(Oc,Oc.current)}function Zu(){hr=jh.current,ce(Oc),ce(jh)}var Fs=q(null),As=null;function ro(r){var o=r.alternate;Ee(bn,bn.current&1),Ee(Fs,r),As===null&&(o===null||Oc.current!==null||o.memoizedState!==null)&&(As=r)}function Wp(r){Ee(bn,bn.current),Ee(Fs,r),As===null&&(As=r)}function z0(r){r.tag===22?(Ee(bn,bn.current),Ee(Fs,r),As===null&&(As=r)):Vs()}function Vs(){Ee(bn,bn.current),Ee(Fs,Fs.current)}function bi(r){ce(Fs),As===r&&(As=null),ce(bn)}var bn=q(0);function cr(r){for(var o=r;o!==null;){if(o.tag===13){var f=o.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||h_(f)||f_(f)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ni=0,Kt=null,Fn=null,mn=null,kr=!1,Lc=!1,Ll=!1,Dh=0,Ju=0,Uc=null,Xp=0;function ci(){throw Error(n(321))}function $p(r,o){if(o===null)return!1;for(var f=0;f<o.length&&f<r.length;f++)if(!Es(r[f],o[f]))return!1;return!0}function Ih(r,o,f,g,S,E){return ni=E,Kt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,X.H=r===null||r.memoizedState===null?xx:pm,Ll=!1,E=f(g,S),Ll=!1,Lc&&(E=Ul(o,f,g,S)),B0(r),E}function B0(r){X.H=Pc;var o=Fn!==null&&Fn.next!==null;if(ni=0,mn=Fn=Kt=null,kr=!1,Ju=0,Uc=null,o)throw Error(n(300));r===null||ji||(r=r.dependencies,r!==null&&qu(r)&&(ji=!0))}function Ul(r,o,f,g){Kt=r;var S=0;do{if(Lc&&(Uc=null),Ju=0,Lc=!1,25<=S)throw Error(n(301));if(S+=1,mn=Fn=null,r.updateQueue!=null){var E=r.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}X.H=Cr,E=o(f,g)}while(Lc);return E}function Pl(){var r=X.H,o=r.useState()[0];return o=typeof o.then=="function"?Qu(o):o,r=r.useState()[0],(Fn!==null?Fn.memoizedState:null)!==r&&(Kt.flags|=1024),o}function Yp(){var r=Dh!==0;return Dh=0,r}function Kp(r,o,f){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~f}function Zp(r){if(kr){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}kr=!1}ni=0,mn=Fn=Kt=null,Lc=!1,Ju=Dh=0,Uc=null}function Bi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?Kt.memoizedState=mn=r:mn=mn.next=r,mn}function yi(){if(Fn===null){var r=Kt.alternate;r=r!==null?r.memoizedState:null}else r=Fn.next;var o=mn===null?Kt.memoizedState:mn.next;if(o!==null)mn=o,Fn=r;else{if(r===null)throw Kt.alternate===null?Error(n(467)):Error(n(310));Fn=r,r={memoizedState:Fn.memoizedState,baseState:Fn.baseState,baseQueue:Fn.baseQueue,queue:Fn.queue,next:null},mn===null?Kt.memoizedState=mn=r:mn=mn.next=r}return mn}function Oh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qu(r){var o=Ju;return Ju+=1,Uc===null&&(Uc=[]),r=kh(Uc,r,o),o=Kt,(mn===null?o.memoizedState:mn.next)===null&&(o=o.alternate,X.H=o===null||o.memoizedState===null?xx:pm),r}function qo(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Qu(r);if(r.$$typeof===R)return Ft(r)}throw Error(n(438,String(r)))}function Jp(r){var o=null,f=Kt.updateQueue;if(f!==null&&(o=f.memoCache),o==null){var g=Kt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(o={data:g.data.map(function(S){return S.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),f===null&&(f=Oh(),Kt.updateQueue=f),f.memoCache=o,f=o.data[o.index],f===void 0)for(f=o.data[o.index]=Array(r),g=0;g<r;g++)f[g]=L;return o.index++,f}function ao(r,o){return typeof o=="function"?o(r):o}function Lh(r){var o=yi();return Qp(o,Fn,r)}function Qp(r,o,f){var g=r.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=f;var S=r.baseQueue,E=g.pending;if(E!==null){if(S!==null){var O=S.next;S.next=E.next,E.next=O}o.baseQueue=S=E,g.pending=null}if(E=r.baseState,S===null)r.memoizedState=E;else{o=S.next;var H=O=null,ee=null,xe=o,Re=!1;do{var Ue=xe.lane&-536870913;if(Ue!==xe.lane?(tn&Ue)===Ue:(ni&Ue)===Ue){var ye=xe.revertLane;if(ye===0)ee!==null&&(ee=ee.next={lane:0,revertLane:0,gesture:null,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),Ue===no&&(Re=!0);else if((ni&ye)===ye){xe=xe.next,ye===no&&(Re=!0);continue}else Ue={lane:0,revertLane:xe.revertLane,gesture:null,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null},ee===null?(H=ee=Ue,O=E):ee=ee.next=Ue,Kt.lanes|=ye,ja|=ye;Ue=xe.action,Ll&&f(E,Ue),E=xe.hasEagerState?xe.eagerState:f(E,Ue)}else ye={lane:Ue,revertLane:xe.revertLane,gesture:xe.gesture,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null},ee===null?(H=ee=ye,O=E):ee=ee.next=ye,Kt.lanes|=Ue,ja|=Ue;xe=xe.next}while(xe!==null&&xe!==o);if(ee===null?O=E:ee.next=H,!Es(E,r.memoizedState)&&(ji=!0,Re&&(f=Tr,f!==null)))throw f;r.memoizedState=E,r.baseState=O,r.baseQueue=ee,g.lastRenderedState=E}return S===null&&(g.lanes=0),[r.memoizedState,g.dispatch]}function em(r){var o=yi(),f=o.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=r;var g=f.dispatch,S=f.pending,E=o.memoizedState;if(S!==null){f.pending=null;var O=S=S.next;do E=r(E,O.action),O=O.next;while(O!==S);Es(E,o.memoizedState)||(ji=!0),o.memoizedState=E,o.baseQueue===null&&(o.baseState=E),f.lastRenderedState=E}return[E,g]}function F0(r,o,f){var g=Kt,S=yi(),E=vn;if(E){if(f===void 0)throw Error(n(407));f=f()}else f=o();var O=!Es((Fn||S).memoizedState,f);if(O&&(S.memoizedState=f,ji=!0),S=S.queue,lm(G0.bind(null,g,S,r),[r]),S.getSnapshot!==o||O||mn!==null&&mn.memoizedState.tag&1){if(g.flags|=2048,Wo(9,{destroy:void 0},H0.bind(null,g,S,f,o),null),Wt===null)throw Error(n(349));E||(ni&127)!==0||V0(g,o,f)}return f}function V0(r,o,f){r.flags|=16384,r={getSnapshot:o,value:f},o=Kt.updateQueue,o===null?(o=Oh(),Kt.updateQueue=o,o.stores=[r]):(f=o.stores,f===null?o.stores=[r]:f.push(r))}function H0(r,o,f,g){o.value=f,o.getSnapshot=g,q0(o)&&W0(r)}function G0(r,o,f){return f(function(){q0(o)&&W0(r)})}function q0(r){var o=r.getSnapshot;r=r.value;try{var f=o();return!Es(r,f)}catch{return!0}}function W0(r){var o=Ns(r,2);o!==null&&on(o,r,2)}function tm(r){var o=Bi();if(typeof r=="function"){var f=r;if(r=f(),Ll){mt(!0);try{f()}finally{mt(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:r},o}function nm(r,o,f,g){return r.baseState=f,Qp(r,Fn,typeof g=="function"?g:ao)}function Ky(r,o,f,g,S){if(Bh(r))throw Error(n(485));if(r=o.action,r!==null){var E={payload:S,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){E.listeners.push(O)}};X.T!==null?f(!0):E.isTransition=!1,g(E),f=o.pending,f===null?(E.next=o.pending=E,X0(o,E)):(E.next=f.next,o.pending=f.next=E)}}function X0(r,o){var f=o.action,g=o.payload,S=r.state;if(o.isTransition){var E=X.T,O={};X.T=O;try{var H=f(S,g),ee=X.S;ee!==null&&ee(O,H),$0(r,o,H)}catch(xe){im(r,o,xe)}finally{E!==null&&O.types!==null&&(E.types=O.types),X.T=E}}else try{E=f(S,g),$0(r,o,E)}catch(xe){im(r,o,xe)}}function $0(r,o,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){Y0(r,o,g)},function(g){return im(r,o,g)}):Y0(r,o,f)}function Y0(r,o,f){o.status="fulfilled",o.value=f,K0(o),r.state=f,o=r.pending,o!==null&&(f=o.next,f===o?r.pending=null:(f=f.next,o.next=f,X0(r,f)))}function im(r,o,f){var g=r.pending;if(r.pending=null,g!==null){g=g.next;do o.status="rejected",o.reason=f,K0(o),o=o.next;while(o!==g)}r.action=null}function K0(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function sm(r,o){return o}function rm(r,o){if(vn){var f=Wt.formState;if(f!==null){e:{var g=Kt;if(vn){if(Wn){t:{for(var S=Wn,E=or;S.nodeType!==8;){if(!E){S=null;break t}if(S=Oa(S.nextSibling),S===null){S=null;break t}}E=S.data,S=E==="F!"||E==="F"?S:null}if(S){Wn=Oa(S.nextSibling),g=S.data==="F!";break e}}ya(g)}g=!1}g&&(o=f[0])}}return f=Bi(),f.memoizedState=f.baseState=o,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sm,lastRenderedState:o},f.queue=g,f=px.bind(null,Kt,g),g.dispatch=f,g=tm(!1),E=fm.bind(null,Kt,!1,g.queue),g=Bi(),S={state:o,dispatch:null,action:r,pending:null},g.queue=S,f=Ky.bind(null,Kt,S,E,f),S.dispatch=f,g.memoizedState=r,[o,f,!1]}function Z0(r){var o=yi();return am(o,Fn,r)}function am(r,o,f){if(o=Qp(r,o,sm)[0],r=Lh(ao)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var g=Qu(o)}catch(O){throw O===Cl?rn:O}else g=o;o=yi();var S=o.queue,E=S.dispatch;return f!==o.memoizedState&&(Kt.flags|=2048,Wo(9,{destroy:void 0},J0.bind(null,S,f),null)),[g,E,r]}function J0(r,o){r.action=o}function om(r){var o=yi(),f=Fn;if(f!==null)return am(o,f,r);yi(),o=o.memoizedState,f=yi();var g=f.queue.dispatch;return f.memoizedState=r,[o,g,!1]}function Wo(r,o,f,g){return r={tag:r,create:f,deps:g,inst:o,next:null},o=Kt.updateQueue,o===null&&(o=Oh(),Kt.updateQueue=o),f=o.lastEffect,f===null?o.lastEffect=r.next=r:(g=f.next,f.next=r,r.next=g,o.lastEffect=r),r}function Uh(){return yi().memoizedState}function Ph(r,o,f,g){var S=Bi();Kt.flags|=r,S.memoizedState=Wo(1|o,{destroy:void 0},f,g===void 0?null:g)}function zh(r,o,f,g){var S=yi();g=g===void 0?null:g;var E=S.memoizedState.inst;Fn!==null&&g!==null&&$p(g,Fn.memoizedState.deps)?S.memoizedState=Wo(o,E,f,g):(Kt.flags|=r,S.memoizedState=Wo(1|o,E,f,g))}function Q0(r,o){Ph(8390656,8,r,o)}function lm(r,o){zh(2048,8,r,o)}function ex(r){Kt.flags|=4;var o=Kt.updateQueue;if(o===null)o=Oh(),Kt.updateQueue=o,o.events=[r];else{var f=o.events;f===null?o.events=[r]:f.push(r)}}function tx(r){var o=yi().memoizedState;return ex({ref:o,nextImpl:r}),function(){if((At&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function nx(r,o){return zh(4,2,r,o)}function ix(r,o){return zh(4,4,r,o)}function sx(r,o){if(typeof o=="function"){r=r();var f=o(r);return function(){typeof f=="function"?f():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function rx(r,o,f){f=f!=null?f.concat([r]):null,zh(4,4,sx.bind(null,o,r),f)}function cm(){}function ax(r,o){var f=yi();o=o===void 0?null:o;var g=f.memoizedState;return o!==null&&$p(o,g[1])?g[0]:(f.memoizedState=[r,o],r)}function ox(r,o){var f=yi();o=o===void 0?null:o;var g=f.memoizedState;if(o!==null&&$p(o,g[1]))return g[0];if(g=r(),Ll){mt(!0);try{r()}finally{mt(!1)}}return f.memoizedState=[g,o],g}function um(r,o,f){return f===void 0||(ni&1073741824)!==0&&(tn&261930)===0?r.memoizedState=o:(r.memoizedState=f,r=hn(),Kt.lanes|=r,ja|=r,f)}function lx(r,o,f,g){return Es(f,o)?f:Oc.current!==null?(r=um(r,f,g),Es(r,o)||(ji=!0),r):(ni&42)===0||(ni&1073741824)!==0&&(tn&261930)===0?(ji=!0,r.memoizedState=f):(r=hn(),Kt.lanes|=r,ja|=r,o)}function cx(r,o,f,g,S){var E=Z.p;Z.p=E!==0&&8>E?E:8;var O=X.T,H={};X.T=H,fm(r,!1,o,f);try{var ee=S(),xe=X.S;if(xe!==null&&xe(H,ee),ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var Re=Fp(ee,g);ed(r,o,Re,pr(r))}else ed(r,o,g,pr(r))}catch(Ue){ed(r,o,{then:function(){},status:"rejected",reason:Ue},pr())}finally{Z.p=E,O!==null&&H.types!==null&&(O.types=H.types),X.T=O}}function Zy(){}function dm(r,o,f,g){if(r.tag!==5)throw Error(n(476));var S=ux(r).queue;cx(r,S,o,re,f===null?Zy:function(){return dx(r),f(g)})}function ux(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:re},next:null};var f={};return o.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:f},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function dx(r){var o=ux(r);o.next===null&&(o=r.alternate.memoizedState),ed(r,o.next.queue,{},pr())}function hm(){return Ft(Im)}function hx(){return yi().memoizedState}function fx(){return yi().memoizedState}function Jy(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var f=pr();r=so(f);var g=Ho(o,r,f);g!==null&&(on(g,o,f),Go(g,o,f)),o={cache:Pp()},r.payload=o;return}o=o.return}}function Qy(r,o,f){var g=pr();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Bh(r)?mx(o,f):(f=xh(r,o,f,g),f!==null&&(on(f,r,g),gx(f,o,g)))}function px(r,o,f){var g=pr();ed(r,o,f,g)}function ed(r,o,f,g){var S={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Bh(r))mx(o,S);else{var E=r.alternate;if(r.lanes===0&&(E===null||E.lanes===0)&&(E=o.lastRenderedReducer,E!==null))try{var O=o.lastRenderedState,H=E(O,f);if(S.hasEagerState=!0,S.eagerState=H,Es(H,O))return Yi(r,o,S,0),Wt===null&&Hu(),!1}catch{}if(f=xh(r,o,S,g),f!==null)return on(f,r,g),gx(f,o,g),!0}return!1}function fm(r,o,f,g){if(g={lane:2,revertLane:Me(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Bh(r)){if(o)throw Error(n(479))}else o=xh(r,f,g,2),o!==null&&on(o,r,2)}function Bh(r){var o=r.alternate;return r===Kt||o!==null&&o===Kt}function mx(r,o){Lc=kr=!0;var f=r.pending;f===null?o.next=o:(o.next=f.next,f.next=o),r.pending=o}function gx(r,o,f){if((f&4194048)!==0){var g=o.lanes;g&=r.pendingLanes,f|=g,o.lanes=f,To(r,f)}}var Pc={readContext:Ft,use:qo,useCallback:ci,useContext:ci,useEffect:ci,useImperativeHandle:ci,useLayoutEffect:ci,useInsertionEffect:ci,useMemo:ci,useReducer:ci,useRef:ci,useState:ci,useDebugValue:ci,useDeferredValue:ci,useTransition:ci,useSyncExternalStore:ci,useId:ci,useHostTransitionStatus:ci,useFormState:ci,useActionState:ci,useOptimistic:ci,useMemoCache:ci,useCacheRefresh:ci};Pc.useEffectEvent=ci;var xx={readContext:Ft,use:qo,useCallback:function(r,o){return Bi().memoizedState=[r,o===void 0?null:o],r},useContext:Ft,useEffect:Q0,useImperativeHandle:function(r,o,f){f=f!=null?f.concat([r]):null,Ph(4194308,4,sx.bind(null,o,r),f)},useLayoutEffect:function(r,o){return Ph(4194308,4,r,o)},useInsertionEffect:function(r,o){Ph(4,2,r,o)},useMemo:function(r,o){var f=Bi();o=o===void 0?null:o;var g=r();if(Ll){mt(!0);try{r()}finally{mt(!1)}}return f.memoizedState=[g,o],g},useReducer:function(r,o,f){var g=Bi();if(f!==void 0){var S=f(o);if(Ll){mt(!0);try{f(o)}finally{mt(!1)}}}else S=o;return g.memoizedState=g.baseState=S,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:S},g.queue=r,r=r.dispatch=Qy.bind(null,Kt,r),[g.memoizedState,r]},useRef:function(r){var o=Bi();return r={current:r},o.memoizedState=r},useState:function(r){r=tm(r);var o=r.queue,f=px.bind(null,Kt,o);return o.dispatch=f,[r.memoizedState,f]},useDebugValue:cm,useDeferredValue:function(r,o){var f=Bi();return um(f,r,o)},useTransition:function(){var r=tm(!1);return r=cx.bind(null,Kt,r.queue,!0,!1),Bi().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,f){var g=Kt,S=Bi();if(vn){if(f===void 0)throw Error(n(407));f=f()}else{if(f=o(),Wt===null)throw Error(n(349));(tn&127)!==0||V0(g,o,f)}S.memoizedState=f;var E={value:f,getSnapshot:o};return S.queue=E,Q0(G0.bind(null,g,E,r),[r]),g.flags|=2048,Wo(9,{destroy:void 0},H0.bind(null,g,E,f,o),null),f},useId:function(){var r=Bi(),o=Wt.identifierPrefix;if(vn){var f=Zr,g=li;f=(g&~(1<<32-ht(g)-1)).toString(32)+f,o="_"+o+"R_"+f,f=Dh++,0<f&&(o+="H"+f.toString(32)),o+="_"}else f=Xp++,o="_"+o+"r_"+f.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:hm,useFormState:rm,useActionState:rm,useOptimistic:function(r){var o=Bi();o.memoizedState=o.baseState=r;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=f,o=fm.bind(null,Kt,!0,f),f.dispatch=o,[r,o]},useMemoCache:Jp,useCacheRefresh:function(){return Bi().memoizedState=Jy.bind(null,Kt)},useEffectEvent:function(r){var o=Bi(),f={impl:r};return o.memoizedState=f,function(){if((At&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},pm={readContext:Ft,use:qo,useCallback:ax,useContext:Ft,useEffect:lm,useImperativeHandle:rx,useInsertionEffect:nx,useLayoutEffect:ix,useMemo:ox,useReducer:Lh,useRef:Uh,useState:function(){return Lh(ao)},useDebugValue:cm,useDeferredValue:function(r,o){var f=yi();return lx(f,Fn.memoizedState,r,o)},useTransition:function(){var r=Lh(ao)[0],o=yi().memoizedState;return[typeof r=="boolean"?r:Qu(r),o]},useSyncExternalStore:F0,useId:hx,useHostTransitionStatus:hm,useFormState:Z0,useActionState:Z0,useOptimistic:function(r,o){var f=yi();return nm(f,Fn,r,o)},useMemoCache:Jp,useCacheRefresh:fx};pm.useEffectEvent=tx;var Cr={readContext:Ft,use:qo,useCallback:ax,useContext:Ft,useEffect:lm,useImperativeHandle:rx,useInsertionEffect:nx,useLayoutEffect:ix,useMemo:ox,useReducer:em,useRef:Uh,useState:function(){return em(ao)},useDebugValue:cm,useDeferredValue:function(r,o){var f=yi();return Fn===null?um(f,r,o):lx(f,Fn.memoizedState,r,o)},useTransition:function(){var r=em(ao)[0],o=yi().memoizedState;return[typeof r=="boolean"?r:Qu(r),o]},useSyncExternalStore:F0,useId:hx,useHostTransitionStatus:hm,useFormState:om,useActionState:om,useOptimistic:function(r,o){var f=yi();return Fn!==null?nm(f,Fn,r,o):(f.baseState=r,[r,f.queue.dispatch])},useMemoCache:Jp,useCacheRefresh:fx};Cr.useEffectEvent=tx;function Fh(r,o,f,g){o=r.memoizedState,f=f(g,o),f=f==null?o:b({},o,f),r.memoizedState=f,r.lanes===0&&(r.updateQueue.baseState=f)}var td={enqueueSetState:function(r,o,f){r=r._reactInternals;var g=pr(),S=so(g);S.payload=o,f!=null&&(S.callback=f),o=Ho(r,S,g),o!==null&&(on(o,r,g),Go(o,r,g))},enqueueReplaceState:function(r,o,f){r=r._reactInternals;var g=pr(),S=so(g);S.tag=1,S.payload=o,f!=null&&(S.callback=f),o=Ho(r,S,g),o!==null&&(on(o,r,g),Go(o,r,g))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var f=pr(),g=so(f);g.tag=2,o!=null&&(g.callback=o),o=Ho(r,g,f),o!==null&&(on(o,r,f),Go(o,r,f))}};function mm(r,o,f,g,S,E,O){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(g,E,O):o.prototype&&o.prototype.isPureReactComponent?!yc(f,g)||!yc(S,E):!0}function gm(r,o,f,g){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(f,g),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(f,g),o.state!==r&&td.enqueueReplaceState(o,o.state,null)}function Xo(r,o){var f=o;if("ref"in o){f={};for(var g in o)g!=="ref"&&(f[g]=o[g])}if(r=r.defaultProps){f===o&&(f=b({},f));for(var S in r)f[S]===void 0&&(f[S]=r[S])}return f}function vx(r){Vu(r)}function xm(r){console.error(r)}function vm(r){Vu(r)}function Vh(r,o){try{var f=r.onUncaughtError;f(o.value,{componentStack:o.stack})}catch(g){setTimeout(function(){throw g})}}function bx(r,o,f){try{var g=r.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function bm(r,o,f){return f=so(f),f.tag=3,f.payload={element:null},f.callback=function(){Vh(r,o)},f}function ym(r){return r=so(r),r.tag=3,r}function yx(r,o,f,g){var S=f.type.getDerivedStateFromError;if(typeof S=="function"){var E=g.value;r.payload=function(){return S(E)},r.callback=function(){bx(o,f,g)}}var O=f.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(r.callback=function(){bx(o,f,g),typeof S!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var H=g.stack;this.componentDidCatch(g.value,{componentStack:H!==null?H:""})})}function Fi(r,o,f,g,S){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(o=f.alternate,o!==null&&Ma(o,f,S,!0),f=Fs.current,f!==null){switch(f.tag){case 31:case 13:return As===null?qc():f.alternate===null&&ui===0&&(ui=3),f.flags&=-257,f.flags|=65536,f.lanes=S,g===Ah?f.flags|=16384:(o=f.updateQueue,o===null?f.updateQueue=new Set([g]):o.add(g),fd(r,g,S)),!1;case 22:return f.flags|=65536,g===Ah?f.flags|=16384:(o=f.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=o):(f=o.retryQueue,f===null?o.retryQueue=new Set([g]):f.add(g)),fd(r,g,S)),!1}throw Error(n(435,f.tag))}return fd(r,g,S),qc(),!1}if(vn)return o=Fs.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=S,g!==Ac&&(r=Error(n(422),{cause:g}),_a(ar(r,f)))):(g!==Ac&&(o=Error(n(423),{cause:g}),_a(ar(o,f))),r=r.current.alternate,r.flags|=65536,S&=-S,r.lanes|=S,g=ar(g,f),S=bm(r.stateNode,g,S),Dt(r,S),ui!==4&&(ui=2)),!1;var E=Error(n(520),{cause:g});if(E=ar(E,f),Wl===null?Wl=[E]:Wl.push(E),ui!==4&&(ui=2),o===null)return!0;g=ar(g,f),f=o;do{switch(f.tag){case 3:return f.flags|=65536,r=S&-S,f.lanes|=r,r=bm(f.stateNode,g,r),Dt(f,r),!1;case 1:if(o=f.type,E=f.stateNode,(f.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Si===null||!Si.has(E))))return f.flags|=65536,S&=-S,f.lanes|=S,S=ym(S),yx(S,r,f,g),Dt(f,S),!1}f=f.return}while(f!==null);return!1}var Hh=Error(n(461)),ji=!1;function Ki(r,o,f,g){o.child=r===null?Rh(o,null,f,g):io(o,r.child,f,g)}function _m(r,o,f,g,S){f=f.render;var E=o.ref;if("ref"in g){var O={};for(var H in g)H!=="ref"&&(O[H]=g[H])}else O=g;return Fo(o),g=Ih(r,o,f,O,E,S),H=Yp(),r!==null&&!ji?(Kp(r,o,S),_i(r,o,S)):(vn&&H&&ba(o),o.flags|=1,Ki(r,o,g,S),o.child)}function zl(r,o,f,g,S){if(r===null){var E=f.type;return typeof E=="function"&&!vh(E)&&E.defaultProps===void 0&&f.compare===null?(o.tag=15,o.type=E,Gh(r,o,E,g,S)):(r=xa(f.type,null,g,o,o.mode,S),r.ref=o.ref,r.return=o,o.child=r)}if(E=r.child,!Kh(r,S)){var O=E.memoizedProps;if(f=f.compare,f=f!==null?f:yc,f(O,g)&&r.ref===o.ref)return _i(r,o,S)}return o.flags|=1,r=Ps(E,g),r.ref=o.ref,r.return=o,o.child=r}function Gh(r,o,f,g,S){if(r!==null){var E=r.memoizedProps;if(yc(E,g)&&r.ref===o.ref)if(ji=!1,o.pendingProps=g=E,Kh(r,S))(r.flags&131072)!==0&&(ji=!0);else return o.lanes=r.lanes,_i(r,o,S)}return zc(r,o,f,g,S)}function Bl(r,o,f,g){var S=g.children,E=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((o.flags&128)!==0){if(E=E!==null?E.baseLanes|f:f,r!==null){for(g=o.child=r.child,S=0;g!==null;)S=S|g.lanes|g.childLanes,g=g.sibling;g=S&~E}else g=0,o.child=null;return Hs(r,o,E,f,g)}if((f&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Wu(o,E!==null?E.cachePool:null),E!==null?P0(o,E):qp(),z0(o);else return g=o.lanes=536870912,Hs(r,o,E!==null?E.baseLanes|f:f,f,g)}else E!==null?(Wu(o,E.cachePool),P0(o,E),Vs(),o.memoizedState=null):(r!==null&&Wu(o,null),qp(),Vs());return Ki(r,o,S,f),o.child}function Na(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Hs(r,o,f,g,S){var E=Th();return E=E===null?null:{parent:Ri._currentValue,pool:E},o.memoizedState={baseLanes:f,cachePool:E},r!==null&&Wu(o,null),qp(),z0(o),r!==null&&Ma(r,o,g,!0),o.childLanes=S,null}function qh(r,o){return o=Yh({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function _x(r,o,f){return io(o,r.child,null,f),r=qh(o,o.pendingProps),r.flags|=2,bi(o),o.memoizedState=null,r}function Wh(r,o,f){var g=o.pendingProps,S=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(vn){if(g.mode==="hidden")return r=qh(o,g),o.lanes=536870912,Na(null,r);if(Wp(o),(r=Wn)?(r=KS(r,or),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Qa!==null?{id:li,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},f=Ec(r),f.return=o,o.child=f,mi=o,Wn=null)):r=null,r===null)throw ya(o);return o.lanes=536870912,null}return qh(o,g)}var E=r.memoizedState;if(E!==null){var O=E.dehydrated;if(Wp(o),S)if(o.flags&256)o.flags&=-257,o=_x(r,o,f);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(n(558));else if(ji||Ma(r,o,f,!1),S=(f&r.childLanes)!==0,ji||S){if(g=Wt,g!==null&&(O=vl(g,f),O!==0&&O!==E.retryLane))throw E.retryLane=O,Ns(r,O),on(g,r,O),Hh;qc(),o=_x(r,o,f)}else r=E.treeContext,Wn=Oa(O.nextSibling),mi=o,vn=!0,eo=null,or=!1,r!==null&&wh(o,r),o=qh(o,g),o.flags|=4096;return o}return r=Ps(r.child,{mode:g.mode,children:g.children}),r.ref=o.ref,o.child=r,r.return=o,r}function Fl(r,o){var f=o.ref;if(f===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(r===null||r.ref!==f)&&(o.flags|=4194816)}}function zc(r,o,f,g,S){return Fo(o),f=Ih(r,o,f,g,void 0,S),g=Yp(),r!==null&&!ji?(Kp(r,o,S),_i(r,o,S)):(vn&&g&&ba(o),o.flags|=1,Ki(r,o,f,S),o.child)}function nd(r,o,f,g,S,E){return Fo(o),o.updateQueue=null,f=Ul(o,g,f,S),B0(r),g=Yp(),r!==null&&!ji?(Kp(r,o,E),_i(r,o,E)):(vn&&g&&ba(o),o.flags|=1,Ki(r,o,f,E),o.child)}function Xh(r,o,f,g,S){if(Fo(o),o.stateNode===null){var E=Oo,O=f.contextType;typeof O=="object"&&O!==null&&(E=Ft(O)),E=new f(g,E),o.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=td,o.stateNode=E,E._reactInternals=o,E=o.stateNode,E.props=g,E.state=o.memoizedState,E.refs={},Yu(o),O=f.contextType,E.context=typeof O=="object"&&O!==null?Ft(O):Oo,E.state=o.memoizedState,O=f.getDerivedStateFromProps,typeof O=="function"&&(Fh(o,f,O,g),E.state=o.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(O=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),O!==E.state&&td.enqueueReplaceState(E,E.state,null),Dc(o,g,E,S),Ku(),E.state=o.memoizedState),typeof E.componentDidMount=="function"&&(o.flags|=4194308),g=!0}else if(r===null){E=o.stateNode;var H=o.memoizedProps,ee=Xo(f,H);E.props=ee;var xe=E.context,Re=f.contextType;O=Oo,typeof Re=="object"&&Re!==null&&(O=Ft(Re));var Ue=f.getDerivedStateFromProps;Re=typeof Ue=="function"||typeof E.getSnapshotBeforeUpdate=="function",H=o.pendingProps!==H,Re||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(H||xe!==O)&&gm(o,E,g,O),Ts=!1;var ye=o.memoizedState;E.state=ye,Dc(o,g,E,S),Ku(),xe=o.memoizedState,H||ye!==xe||Ts?(typeof Ue=="function"&&(Fh(o,f,Ue,g),xe=o.memoizedState),(ee=Ts||mm(o,f,ee,g,ye,xe,O))?(Re||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=g,o.memoizedState=xe),E.props=g,E.state=xe,E.context=O,g=ee):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),g=!1)}else{E=o.stateNode,Hp(r,o),O=o.memoizedProps,Re=Xo(f,O),E.props=Re,Ue=o.pendingProps,ye=E.context,xe=f.contextType,ee=Oo,typeof xe=="object"&&xe!==null&&(ee=Ft(xe)),H=f.getDerivedStateFromProps,(xe=typeof H=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(O!==Ue||ye!==ee)&&gm(o,E,g,ee),Ts=!1,ye=o.memoizedState,E.state=ye,Dc(o,g,E,S),Ku();var ke=o.memoizedState;O!==Ue||ye!==ke||Ts||r!==null&&r.dependencies!==null&&qu(r.dependencies)?(typeof H=="function"&&(Fh(o,f,H,g),ke=o.memoizedState),(Re=Ts||mm(o,f,Re,g,ye,ke,ee)||r!==null&&r.dependencies!==null&&qu(r.dependencies))?(xe||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(g,ke,ee),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(g,ke,ee)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||O===r.memoizedProps&&ye===r.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&ye===r.memoizedState||(o.flags|=1024),o.memoizedProps=g,o.memoizedState=ke),E.props=g,E.state=ke,E.context=ee,g=Re):(typeof E.componentDidUpdate!="function"||O===r.memoizedProps&&ye===r.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&ye===r.memoizedState||(o.flags|=1024),g=!1)}return E=g,Fl(r,o),g=(o.flags&128)!==0,E||g?(E=o.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:E.render(),o.flags|=1,r!==null&&g?(o.child=io(o,r.child,null,S),o.child=io(o,null,f,S)):Ki(r,o,f,S),o.memoizedState=E.state,r=o.child):r=_i(r,o,S),r}function wx(r,o,f,g){return zo(),o.flags|=256,Ki(r,o,f,g),o.child}var wm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ms(r){return{baseLanes:r,cachePool:Vp()}}function $h(r,o,f){return r=r!==null?r.childLanes&~f:0,o&&(r|=Rs),r}function Sx(r,o,f){var g=o.pendingProps,S=!1,E=(o.flags&128)!==0,O;if((O=E)||(O=r!==null&&r.memoizedState===null?!1:(bn.current&2)!==0),O&&(S=!0,o.flags&=-129),O=(o.flags&32)!==0,o.flags&=-33,r===null){if(vn){if(S?ro(o):Vs(),(r=Wn)?(r=KS(r,or),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Qa!==null?{id:li,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},f=Ec(r),f.return=o,o.child=f,mi=o,Wn=null)):r=null,r===null)throw ya(o);return f_(r)?o.lanes=32:o.lanes=536870912,null}var H=g.children;return g=g.fallback,S?(Vs(),S=o.mode,H=Yh({mode:"hidden",children:H},S),g=Lo(g,S,f,null),H.return=o,g.return=o,H.sibling=g,o.child=H,g=o.child,g.memoizedState=ms(f),g.childLanes=$h(r,O,f),o.memoizedState=wm,Na(null,g)):(ro(o),id(o,H))}var ee=r.memoizedState;if(ee!==null&&(H=ee.dehydrated,H!==null)){if(E)o.flags&256?(ro(o),o.flags&=-257,o=Sm(r,o,f)):o.memoizedState!==null?(Vs(),o.child=r.child,o.flags|=128,o=null):(Vs(),H=g.fallback,S=o.mode,g=Yh({mode:"visible",children:g.children},S),H=Lo(H,S,f,null),H.flags|=2,g.return=o,H.return=o,g.sibling=H,o.child=g,io(o,r.child,null,f),g=o.child,g.memoizedState=ms(f),g.childLanes=$h(r,O,f),o.memoizedState=wm,o=Na(null,g));else if(ro(o),f_(H)){if(O=H.nextSibling&&H.nextSibling.dataset,O)var xe=O.dgst;O=xe,g=Error(n(419)),g.stack="",g.digest=O,_a({value:g,source:null,stack:null}),o=Sm(r,o,f)}else if(ji||Ma(r,o,f,!1),O=(f&r.childLanes)!==0,ji||O){if(O=Wt,O!==null&&(g=vl(O,f),g!==0&&g!==ee.retryLane))throw ee.retryLane=g,Ns(r,g),on(O,r,g),Hh;h_(H)||qc(),o=Sm(r,o,f)}else h_(H)?(o.flags|=192,o.child=r.child,o=null):(r=ee.treeContext,Wn=Oa(H.nextSibling),mi=o,vn=!0,eo=null,or=!1,r!==null&&wh(o,r),o=id(o,g.children),o.flags|=4096);return o}return S?(Vs(),H=g.fallback,S=o.mode,ee=r.child,xe=ee.sibling,g=Ps(ee,{mode:"hidden",children:g.children}),g.subtreeFlags=ee.subtreeFlags&65011712,xe!==null?H=Ps(xe,H):(H=Lo(H,S,f,null),H.flags|=2),H.return=o,g.return=o,g.sibling=H,o.child=g,Na(null,g),g=o.child,H=r.child.memoizedState,H===null?H=ms(f):(S=H.cachePool,S!==null?(ee=Ri._currentValue,S=S.parent!==ee?{parent:ee,pool:ee}:S):S=Vp(),H={baseLanes:H.baseLanes|f,cachePool:S}),g.memoizedState=H,g.childLanes=$h(r,O,f),o.memoizedState=wm,Na(r.child,g)):(ro(o),f=r.child,r=f.sibling,f=Ps(f,{mode:"visible",children:g.children}),f.return=o,f.sibling=null,r!==null&&(O=o.deletions,O===null?(o.deletions=[r],o.flags|=16):O.push(r)),o.child=f,o.memoizedState=null,f)}function id(r,o){return o=Yh({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Yh(r,o){return r=oi(22,r,null,o),r.lanes=0,r}function Sm(r,o,f){return io(o,r.child,null,f),r=id(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function Mx(r,o,f){r.lanes|=o;var g=r.alternate;g!==null&&(g.lanes|=o),Mh(r.return,o,f)}function Vl(r,o,f,g,S,E){var O=r.memoizedState;O===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:S,treeForkCount:E}:(O.isBackwards=o,O.rendering=null,O.renderingStartTime=0,O.last=g,O.tail=f,O.tailMode=S,O.treeForkCount=E)}function Gs(r,o,f){var g=o.pendingProps,S=g.revealOrder,E=g.tail;g=g.children;var O=bn.current,H=(O&2)!==0;if(H?(O=O&1|2,o.flags|=128):O&=1,Ee(bn,O),Ki(r,o,g,f),g=vn?Tc:0,!H&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Mx(r,f,o);else if(r.tag===19)Mx(r,f,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(S){case"forwards":for(f=o.child,S=null;f!==null;)r=f.alternate,r!==null&&cr(r)===null&&(S=f),f=f.sibling;f=S,f===null?(S=o.child,o.child=null):(S=f.sibling,f.sibling=null),Vl(o,!1,S,f,E,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,S=o.child,o.child=null;S!==null;){if(r=S.alternate,r!==null&&cr(r)===null){o.child=S;break}r=S.sibling,S.sibling=f,f=S,S=r}Vl(o,!0,f,null,E,g);break;case"together":Vl(o,!1,null,null,void 0,g);break;default:o.memoizedState=null}return o.child}function _i(r,o,f){if(r!==null&&(o.dependencies=r.dependencies),ja|=o.lanes,(f&o.childLanes)===0)if(r!==null){if(Ma(r,o,f,!1),(f&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(n(153));if(o.child!==null){for(r=o.child,f=Ps(r,r.pendingProps),o.child=f,f.return=o;r.sibling!==null;)r=r.sibling,f=f.sibling=Ps(r,r.pendingProps),f.return=o;f.sibling=null}return o.child}function Kh(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&qu(r)))}function e_(r,o,f){switch(o.tag){case 3:Fe(o,o.stateNode.containerInfo),to(o,Ri,r.memoizedState.cache),zo();break;case 27:case 5:ft(o);break;case 4:Fe(o,o.stateNode.containerInfo);break;case 10:to(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Wp(o),null;break;case 13:var g=o.memoizedState;if(g!==null)return g.dehydrated!==null?(ro(o),o.flags|=128,null):(f&o.child.childLanes)!==0?Sx(r,o,f):(ro(o),r=_i(r,o,f),r!==null?r.sibling:null);ro(o);break;case 19:var S=(r.flags&128)!==0;if(g=(f&o.childLanes)!==0,g||(Ma(r,o,f,!1),g=(f&o.childLanes)!==0),S){if(g)return Gs(r,o,f);o.flags|=128}if(S=o.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),Ee(bn,bn.current),g)break;return null;case 22:return o.lanes=0,Bl(r,o,f,o.pendingProps);case 24:to(o,Ri,r.memoizedState.cache)}return _i(r,o,f)}function Zh(r,o,f){if(r!==null)if(r.memoizedProps!==o.pendingProps)ji=!0;else{if(!Kh(r,f)&&(o.flags&128)===0)return ji=!1,e_(r,o,f);ji=(r.flags&131072)!==0}else ji=!1,vn&&(o.flags&1048576)!==0&&R0(o,Tc,o.index);switch(o.lanes=0,o.tag){case 16:e:{var g=o.pendingProps;if(r=Rl(o.elementType),o.type=r,typeof r=="function")vh(r)?(g=Xo(r,g),o.tag=1,o=Xh(null,o,r,g,f)):(o.tag=0,o=zc(null,o,r,g,f));else{if(r!=null){var S=r.$$typeof;if(S===D){o.tag=11,o=_m(null,o,r,g,f);break e}else if(S===z){o.tag=14,o=zl(null,o,r,g,f);break e}}throw o=ue(r)||r,Error(n(306,o,""))}}return o;case 0:return zc(r,o,o.type,o.pendingProps,f);case 1:return g=o.type,S=Xo(g,o.pendingProps),Xh(r,o,g,S,f);case 3:e:{if(Fe(o,o.stateNode.containerInfo),r===null)throw Error(n(387));g=o.pendingProps;var E=o.memoizedState;S=E.element,Hp(r,o),Dc(o,g,null,f);var O=o.memoizedState;if(g=O.cache,to(o,Ri,g),g!==E.cache&&Eh(o,[Ri],f,!0),Ku(),g=O.element,E.isDehydrated)if(E={element:g,isDehydrated:!1,cache:O.cache},o.updateQueue.baseState=E,o.memoizedState=E,o.flags&256){o=wx(r,o,g,f);break e}else if(g!==S){S=ar(Error(n(424)),o),_a(S),o=wx(r,o,g,f);break e}else for(r=o.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,Wn=Oa(r.firstChild),mi=o,vn=!0,eo=null,or=!0,f=Rh(o,null,g,f),o.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(zo(),g===S){o=_i(r,o,f);break e}Ki(r,o,g,f)}o=o.child}return o;case 26:return Fl(r,o),r===null?(f=nM(o.type,null,o.pendingProps,null))?o.memoizedState=f:vn||(f=o.type,r=o.pendingProps,g=Ax(me.current).createElement(f),g[ai]=o,g[Pi]=r,Ds(g,f,r),V(g),o.stateNode=g):o.memoizedState=nM(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return ft(o),r===null&&vn&&(g=o.stateNode=QS(o.type,o.pendingProps,me.current),mi=o,or=!0,S=Wn,Yc(o.type)?(p_=S,Wn=Oa(g.firstChild)):Wn=S),Ki(r,o,o.pendingProps.children,f),Fl(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&vn&&((S=g=Wn)&&(g=C3(g,o.type,o.pendingProps,or),g!==null?(o.stateNode=g,mi=o,Wn=Oa(g.firstChild),or=!1,S=!0):S=!1),S||ya(o)),ft(o),S=o.type,E=o.pendingProps,O=r!==null?r.memoizedProps:null,g=E.children,c_(S,E)?g=null:O!==null&&c_(S,O)&&(o.flags|=32),o.memoizedState!==null&&(S=Ih(r,o,Pl,null,null,f),Im._currentValue=S),Fl(r,o),Ki(r,o,g,f),o.child;case 6:return r===null&&vn&&((r=f=Wn)&&(f=R3(f,o.pendingProps,or),f!==null?(o.stateNode=f,mi=o,Wn=null,r=!0):r=!1),r||ya(o)),null;case 13:return Sx(r,o,f);case 4:return Fe(o,o.stateNode.containerInfo),g=o.pendingProps,r===null?o.child=io(o,null,g,f):Ki(r,o,g,f),o.child;case 11:return _m(r,o,o.type,o.pendingProps,f);case 7:return Ki(r,o,o.pendingProps,f),o.child;case 8:return Ki(r,o,o.pendingProps.children,f),o.child;case 12:return Ki(r,o,o.pendingProps.children,f),o.child;case 10:return g=o.pendingProps,to(o,o.type,g.value),Ki(r,o,g.children,f),o.child;case 9:return S=o.type._context,g=o.pendingProps.children,Fo(o),S=Ft(S),g=g(S),o.flags|=1,Ki(r,o,g,f),o.child;case 14:return zl(r,o,o.type,o.pendingProps,f);case 15:return Gh(r,o,o.type,o.pendingProps,f);case 19:return Gs(r,o,f);case 31:return Wh(r,o,f);case 22:return Bl(r,o,f,o.pendingProps);case 24:return Fo(o),g=Ft(Ri),r===null?(S=Th(),S===null&&(S=Wt,E=Pp(),S.pooledCache=E,E.refCount++,E!==null&&(S.pooledCacheLanes|=f),S=E),o.memoizedState={parent:g,cache:S},Yu(o),to(o,Ri,S)):((r.lanes&f)!==0&&(Hp(r,o),Dc(o,null,null,f),Ku()),S=r.memoizedState,E=o.memoizedState,S.parent!==g?(S={parent:g,cache:g},o.memoizedState=S,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=S),to(o,Ri,g)):(g=E.cache,to(o,Ri,g),g!==S.cache&&Eh(o,[Ri],f,!0))),Ki(r,o,o.pendingProps.children,f),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function Ta(r){r.flags|=4}function sd(r,o,f,g,S){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(S&335544128)===S)if(r.stateNode.complete)r.flags|=8192;else if(hi())r.flags|=8192;else throw Ea=Ah,Xu}else r.flags&=-16777217}function Mm(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!oM(o))if(hi())r.flags|=8192;else throw Ea=Ah,Xu}function oo(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?yn():536870912,r.lanes|=o,Jn|=o)}function Aa(r,o){if(!vn)switch(r.tailMode){case"hidden":o=r.tail;for(var f=null;o!==null;)o.alternate!==null&&(f=o),o=o.sibling;f===null?r.tail=null:f.sibling=null;break;case"collapsed":f=r.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:g.sibling=null}}function Vn(r){var o=r.alternate!==null&&r.alternate.child===r.child,f=0,g=0;if(o)for(var S=r.child;S!==null;)f|=S.lanes|S.childLanes,g|=S.subtreeFlags&65011712,g|=S.flags&65011712,S.return=r,S=S.sibling;else for(S=r.child;S!==null;)f|=S.lanes|S.childLanes,g|=S.subtreeFlags,g|=S.flags,S.return=r,S=S.sibling;return r.subtreeFlags|=g,r.childLanes=f,o}function rd(r,o,f){var g=o.pendingProps;switch(_h(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(o),null;case 1:return Vn(o),null;case 3:return f=o.stateNode,g=null,r!==null&&(g=r.memoizedState.cache),o.memoizedState.cache!==g&&(o.flags|=2048),Sa(Ri),nt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(kc(o)?Ta(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Sh())),Vn(o),null;case 26:var S=o.type,E=o.memoizedState;return r===null?(Ta(o),E!==null?(Vn(o),Mm(o,E)):(Vn(o),sd(o,S,null,g,f))):E?E!==r.memoizedState?(Ta(o),Vn(o),Mm(o,E)):(Vn(o),o.flags&=-16777217):(r=r.memoizedProps,r!==g&&Ta(o),Vn(o),sd(o,S,r,g,f)),null;case 27:if(sn(o),f=me.current,S=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==g&&Ta(o);else{if(!g){if(o.stateNode===null)throw Error(n(166));return Vn(o),null}r=Pe.current,kc(o)?j0(o):(r=QS(S,g,f),o.stateNode=r,Ta(o))}return Vn(o),null;case 5:if(sn(o),S=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==g&&Ta(o);else{if(!g){if(o.stateNode===null)throw Error(n(166));return Vn(o),null}if(E=Pe.current,kc(o))j0(o);else{var O=Ax(me.current);switch(E){case 1:E=O.createElementNS("http://www.w3.org/2000/svg",S);break;case 2:E=O.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;default:switch(S){case"svg":E=O.createElementNS("http://www.w3.org/2000/svg",S);break;case"math":E=O.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;case"script":E=O.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof g.is=="string"?O.createElement("select",{is:g.is}):O.createElement("select"),g.multiple?E.multiple=!0:g.size&&(E.size=g.size);break;default:E=typeof g.is=="string"?O.createElement(S,{is:g.is}):O.createElement(S)}}E[ai]=o,E[Pi]=g;e:for(O=o.child;O!==null;){if(O.tag===5||O.tag===6)E.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===o)break e;for(;O.sibling===null;){if(O.return===null||O.return===o)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}o.stateNode=E;e:switch(Ds(E,S,g),S){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&Ta(o)}}return Vn(o),sd(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,f),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==g&&Ta(o);else{if(typeof g!="string"&&o.stateNode===null)throw Error(n(166));if(r=me.current,kc(o)){if(r=o.stateNode,f=o.memoizedProps,g=null,S=mi,S!==null)switch(S.tag){case 27:case 5:g=S.memoizedProps}r[ai]=o,r=!!(r.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||VS(r.nodeValue,f)),r||ya(o,!0)}else r=Ax(r).createTextNode(g),r[ai]=o,o.stateNode=r}return Vn(o),null;case 31:if(f=o.memoizedState,r===null||r.memoizedState!==null){if(g=kc(o),f!==null){if(r===null){if(!g)throw Error(n(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(557));r[ai]=o}else zo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Vn(o),r=!1}else f=Sh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),r=!0;if(!r)return o.flags&256?(bi(o),o):(bi(o),null);if((o.flags&128)!==0)throw Error(n(558))}return Vn(o),null;case 13:if(g=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(S=kc(o),g!==null&&g.dehydrated!==null){if(r===null){if(!S)throw Error(n(318));if(S=o.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[ai]=o}else zo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Vn(o),S=!1}else S=Sh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=S),S=!0;if(!S)return o.flags&256?(bi(o),o):(bi(o),null)}return bi(o),(o.flags&128)!==0?(o.lanes=f,o):(f=g!==null,r=r!==null&&r.memoizedState!==null,f&&(g=o.child,S=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(S=g.alternate.memoizedState.cachePool.pool),E=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(E=g.memoizedState.cachePool.pool),E!==S&&(g.flags|=2048)),f!==r&&f&&(o.child.flags|=8192),oo(o,o.updateQueue),Vn(o),null);case 4:return nt(),r===null&&s_(o.stateNode.containerInfo),Vn(o),null;case 10:return Sa(o.type),Vn(o),null;case 19:if(ce(bn),g=o.memoizedState,g===null)return Vn(o),null;if(S=(o.flags&128)!==0,E=g.rendering,E===null)if(S)Aa(g,!1);else{if(ui!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(E=cr(r),E!==null){for(o.flags|=128,Aa(g,!1),r=E.updateQueue,o.updateQueue=r,oo(o,r),o.subtreeFlags=0,r=f,f=o.child;f!==null;)Mc(f,r),f=f.sibling;return Ee(bn,bn.current&1|2),vn&&va(o,g.treeForkCount),o.child}r=r.sibling}g.tail!==null&&B()>wi&&(o.flags|=128,S=!0,Aa(g,!1),o.lanes=4194304)}else{if(!S)if(r=cr(E),r!==null){if(o.flags|=128,S=!0,r=r.updateQueue,o.updateQueue=r,oo(o,r),Aa(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!vn)return Vn(o),null}else 2*B()-g.renderingStartTime>wi&&f!==536870912&&(o.flags|=128,S=!0,Aa(g,!1),o.lanes=4194304);g.isBackwards?(E.sibling=o.child,o.child=E):(r=g.last,r!==null?r.sibling=E:o.child=E,g.last=E)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=B(),r.sibling=null,f=bn.current,Ee(bn,S?f&1|2:f&1),vn&&va(o,g.treeForkCount),r):(Vn(o),null);case 22:case 23:return bi(o),Zu(),g=o.memoizedState!==null,r!==null?r.memoizedState!==null!==g&&(o.flags|=8192):g&&(o.flags|=8192),g?(f&536870912)!==0&&(o.flags&128)===0&&(Vn(o),o.subtreeFlags&6&&(o.flags|=8192)):Vn(o),f=o.updateQueue,f!==null&&oo(o,f.retryQueue),f=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),g=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),g!==f&&(o.flags|=2048),r!==null&&ce(Vo),null;case 24:return f=null,r!==null&&(f=r.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),Sa(Ri),Vn(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function Rr(r,o){switch(_h(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Sa(Ri),nt(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return sn(o),null;case 31:if(o.memoizedState!==null){if(bi(o),o.alternate===null)throw Error(n(340));zo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(bi(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(n(340));zo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return ce(bn),null;case 4:return nt(),null;case 10:return Sa(o.type),null;case 22:case 23:return bi(o),Zu(),r!==null&&ce(Vo),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return Sa(Ri),null;case 25:return null;default:return null}}function ur(r,o){switch(_h(o),o.tag){case 3:Sa(Ri),nt();break;case 26:case 27:case 5:sn(o);break;case 4:nt();break;case 31:o.memoizedState!==null&&bi(o);break;case 13:bi(o);break;case 19:ce(bn);break;case 10:Sa(o.type);break;case 22:case 23:bi(o),Zu(),r!==null&&ce(Vo);break;case 24:Sa(Ri)}}function jr(r,o){try{var f=o.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var S=g.next;f=S;do{if((f.tag&r)===r){g=void 0;var E=f.create,O=f.inst;g=E(),O.destroy=g}f=f.next}while(f!==S)}}catch(H){kn(o,o.return,H)}}function rs(r,o,f){try{var g=o.updateQueue,S=g!==null?g.lastEffect:null;if(S!==null){var E=S.next;g=E;do{if((g.tag&r)===r){var O=g.inst,H=O.destroy;if(H!==void 0){O.destroy=void 0,S=o;var ee=f,xe=H;try{xe()}catch(Re){kn(S,ee,Re)}}}g=g.next}while(g!==E)}}catch(Re){kn(o,o.return,Re)}}function Jr(r){var o=r.updateQueue;if(o!==null){var f=r.stateNode;try{U0(o,f)}catch(g){kn(r,r.return,g)}}}function Zi(r,o,f){f.props=Xo(r.type,r.memoizedProps),f.state=r.memoizedState;try{f.componentWillUnmount()}catch(g){kn(r,o,g)}}function lo(r,o){try{var f=r.ref;if(f!==null){switch(r.tag){case 26:case 27:case 5:var g=r.stateNode;break;case 30:g=r.stateNode;break;default:g=r.stateNode}typeof f=="function"?r.refCleanup=f(g):f.current=g}}catch(S){kn(r,o,S)}}function as(r,o){var f=r.ref,g=r.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(S){kn(r,o,S)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(S){kn(r,o,S)}else f.current=null}function ad(r){var o=r.type,f=r.memoizedProps,g=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(S){kn(r,r.return,S)}}function Vi(r,o,f){try{var g=r.stateNode;M3(g,r.type,f,o),g[Pi]=o}catch(S){kn(r,r.return,S)}}function ii(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Yc(r.type)||r.tag===4}function gn(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||ii(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Yc(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ka(r,o,f){var g=r.tag;if(g===5||g===6)r=r.stateNode,o?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(r,o):(o=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,o.appendChild(r),f=f._reactRootContainer,f!=null||o.onclick!==null||(o.onclick=Ka));else if(g!==4&&(g===27&&Yc(r.type)&&(f=r.stateNode,o=null),r=r.child,r!==null))for(ka(r,o,f),r=r.sibling;r!==null;)ka(r,o,f),r=r.sibling}function ks(r,o,f){var g=r.tag;if(g===5||g===6)r=r.stateNode,o?f.insertBefore(r,o):f.appendChild(r);else if(g!==4&&(g===27&&Yc(r.type)&&(f=r.stateNode),r=r.child,r!==null))for(ks(r,o,f),r=r.sibling;r!==null;)ks(r,o,f),r=r.sibling}function Jh(r){var o=r.stateNode,f=r.memoizedProps;try{for(var g=r.type,S=o.attributes;S.length;)o.removeAttributeNode(S[0]);Ds(o,g,f),o[ai]=r,o[Pi]=f}catch(E){kn(r,r.return,E)}}var Dr=!1,Xn=!1,Qr=!1,Ex=typeof WeakSet=="function"?WeakSet:Set,Ji=null;function t_(r,o){if(r=r.containerInfo,o_=Ox,r=T0(r),Dp(r)){if("selectionStart"in r)var f={start:r.selectionStart,end:r.selectionEnd};else e:{f=(f=r.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var S=g.anchorOffset,E=g.focusNode;g=g.focusOffset;try{f.nodeType,E.nodeType}catch{f=null;break e}var O=0,H=-1,ee=-1,xe=0,Re=0,Ue=r,ye=null;t:for(;;){for(var ke;Ue!==f||S!==0&&Ue.nodeType!==3||(H=O+S),Ue!==E||g!==0&&Ue.nodeType!==3||(ee=O+g),Ue.nodeType===3&&(O+=Ue.nodeValue.length),(ke=Ue.firstChild)!==null;)ye=Ue,Ue=ke;for(;;){if(Ue===r)break t;if(ye===f&&++xe===S&&(H=O),ye===E&&++Re===g&&(ee=O),(ke=Ue.nextSibling)!==null)break;Ue=ye,ye=Ue.parentNode}Ue=ke}f=H===-1||ee===-1?null:{start:H,end:ee}}else f=null}f=f||{start:0,end:0}}else f=null;for(l_={focusedElem:r,selectionRange:f},Ox=!1,Ji=o;Ji!==null;)if(o=Ji,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,Ji=r;else for(;Ji!==null;){switch(o=Ji,E=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(f=0;f<r.length;f++)S=r[f],S.ref.impl=S.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&E!==null){r=void 0,f=o,S=E.memoizedProps,E=E.memoizedState,g=f.stateNode;try{var Mt=Xo(f.type,S);r=g.getSnapshotBeforeUpdate(Mt,E),g.__reactInternalSnapshotBeforeUpdate=r}catch(Bt){kn(f,f.return,Bt)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,f=r.nodeType,f===9)d_(r);else if(f===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":d_(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(n(163))}if(r=o.sibling,r!==null){r.return=o.return,Ji=r;break}Ji=o.return}}function si(r,o,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:Lr(r,f),g&4&&jr(5,f);break;case 1:if(Lr(r,f),g&4)if(r=f.stateNode,o===null)try{r.componentDidMount()}catch(O){kn(f,f.return,O)}else{var S=Xo(f.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(S,o,r.__reactInternalSnapshotBeforeUpdate)}catch(O){kn(f,f.return,O)}}g&64&&Jr(f),g&512&&lo(f,f.return);break;case 3:if(Lr(r,f),g&64&&(r=f.updateQueue,r!==null)){if(o=null,f.child!==null)switch(f.child.tag){case 27:case 5:o=f.child.stateNode;break;case 1:o=f.child.stateNode}try{U0(r,o)}catch(O){kn(f,f.return,O)}}break;case 27:o===null&&g&4&&Jh(f);case 26:case 5:Lr(r,f),o===null&&g&4&&ad(f),g&512&&lo(f,f.return);break;case 12:Lr(r,f);break;case 31:Lr(r,f),g&4&&$o(r,f);break;case 13:Lr(r,f),g&4&&Bc(r,f),g&64&&(r=f.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(f=x.bind(null,f),j3(r,f))));break;case 22:if(g=f.memoizedState!==null||Dr,!g){o=o!==null&&o.memoizedState!==null||Xn,S=Dr;var E=Xn;Dr=g,(Xn=o)&&!E?Cs(r,f,(f.subtreeFlags&8772)!==0):Lr(r,f),Dr=S,Xn=E}break;case 30:break;default:Lr(r,f)}}function od(r){var o=r.alternate;o!==null&&(r.alternate=null,od(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Xa(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Un=null,gs=!1;function Ir(r,o,f){for(f=f.child;f!==null;)Qh(r,o,f),f=f.sibling}function Qh(r,o,f){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(Ve,f)}catch{}switch(f.tag){case 26:Xn||as(f,o),Ir(r,o,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Xn||as(f,o);var g=Un,S=gs;Yc(f.type)&&(Un=f.stateNode,gs=!1),Ir(r,o,f),Rm(f.stateNode),Un=g,gs=S;break;case 5:Xn||as(f,o);case 6:if(g=Un,S=gs,Un=null,Ir(r,o,f),Un=g,gs=S,Un!==null)if(gs)try{(Un.nodeType===9?Un.body:Un.nodeName==="HTML"?Un.ownerDocument.body:Un).removeChild(f.stateNode)}catch(E){kn(f,o,E)}else try{Un.removeChild(f.stateNode)}catch(E){kn(f,o,E)}break;case 18:Un!==null&&(gs?(r=Un,$S(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,f.stateNode),lf(r)):$S(Un,f.stateNode));break;case 4:g=Un,S=gs,Un=f.stateNode.containerInfo,gs=!0,Ir(r,o,f),Un=g,gs=S;break;case 0:case 11:case 14:case 15:rs(2,f,o),Xn||rs(4,f,o),Ir(r,o,f);break;case 1:Xn||(as(f,o),g=f.stateNode,typeof g.componentWillUnmount=="function"&&Zi(f,o,g)),Ir(r,o,f);break;case 21:Ir(r,o,f);break;case 22:Xn=(g=Xn)||f.memoizedState!==null,Ir(r,o,f),Xn=g;break;default:Ir(r,o,f)}}function $o(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{lf(r)}catch(f){kn(o,o.return,f)}}}function Bc(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{lf(r)}catch(f){kn(o,o.return,f)}}function Em(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new Ex),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new Ex),o;default:throw Error(n(435,r.tag))}}function co(r,o){var f=Em(r);o.forEach(function(g){if(!f.has(g)){f.add(g);var S=_.bind(null,r,g);g.then(S,S)}})}function Hi(r,o){var f=o.deletions;if(f!==null)for(var g=0;g<f.length;g++){var S=f[g],E=r,O=o,H=O;e:for(;H!==null;){switch(H.tag){case 27:if(Yc(H.type)){Un=H.stateNode,gs=!1;break e}break;case 5:Un=H.stateNode,gs=!1;break e;case 3:case 4:Un=H.stateNode.containerInfo,gs=!0;break e}H=H.return}if(Un===null)throw Error(n(160));Qh(E,O,S),Un=null,gs=!1,E=S.alternate,E!==null&&(E.return=null),S.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Yo(o,r),o=o.sibling}var Or=null;function Yo(r,o){var f=r.alternate,g=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Hi(o,r),Gi(r),g&4&&(rs(3,r,r.return),jr(3,r),rs(5,r,r.return));break;case 1:Hi(o,r),Gi(r),g&512&&(Xn||f===null||as(f,f.return)),g&64&&Dr&&(r=r.updateQueue,r!==null&&(g=r.callbacks,g!==null&&(f=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var S=Or;if(Hi(o,r),Gi(r),g&512&&(Xn||f===null||as(f,f.return)),g&4){var E=f!==null?f.memoizedState:null;if(g=r.memoizedState,f===null)if(g===null)if(r.stateNode===null){e:{g=r.type,f=r.memoizedProps,S=S.ownerDocument||S;t:switch(g){case"title":E=S.getElementsByTagName("title")[0],(!E||E[Yr]||E[ai]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=S.createElement(g),S.head.insertBefore(E,S.querySelector("head > title"))),Ds(E,g,f),E[ai]=r,V(E),g=E;break e;case"link":var O=rM("link","href",S).get(g+(f.href||""));if(O){for(var H=0;H<O.length;H++)if(E=O[H],E.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&E.getAttribute("rel")===(f.rel==null?null:f.rel)&&E.getAttribute("title")===(f.title==null?null:f.title)&&E.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){O.splice(H,1);break t}}E=S.createElement(g),Ds(E,g,f),S.head.appendChild(E);break;case"meta":if(O=rM("meta","content",S).get(g+(f.content||""))){for(H=0;H<O.length;H++)if(E=O[H],E.getAttribute("content")===(f.content==null?null:""+f.content)&&E.getAttribute("name")===(f.name==null?null:f.name)&&E.getAttribute("property")===(f.property==null?null:f.property)&&E.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&E.getAttribute("charset")===(f.charSet==null?null:f.charSet)){O.splice(H,1);break t}}E=S.createElement(g),Ds(E,g,f),S.head.appendChild(E);break;default:throw Error(n(468,g))}E[ai]=r,V(E),g=E}r.stateNode=g}else aM(S,r.type,r.stateNode);else r.stateNode=sM(S,g,r.memoizedProps);else E!==g?(E===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):E.count--,g===null?aM(S,r.type,r.stateNode):sM(S,g,r.memoizedProps)):g===null&&r.stateNode!==null&&Vi(r,r.memoizedProps,f.memoizedProps)}break;case 27:Hi(o,r),Gi(r),g&512&&(Xn||f===null||as(f,f.return)),f!==null&&g&4&&Vi(r,r.memoizedProps,f.memoizedProps);break;case 5:if(Hi(o,r),Gi(r),g&512&&(Xn||f===null||as(f,f.return)),r.flags&32){S=r.stateNode;try{Ci(S,"")}catch(Mt){kn(r,r.return,Mt)}}g&4&&r.stateNode!=null&&(S=r.memoizedProps,Vi(r,S,f!==null?f.memoizedProps:S)),g&1024&&(Qr=!0);break;case 6:if(Hi(o,r),Gi(r),g&4){if(r.stateNode===null)throw Error(n(162));g=r.memoizedProps,f=r.stateNode;try{f.nodeValue=g}catch(Mt){kn(r,r.return,Mt)}}break;case 3:if(Rx=null,S=Or,Or=kx(o.containerInfo),Hi(o,r),Or=S,Gi(r),g&4&&f!==null&&f.memoizedState.isDehydrated)try{lf(o.containerInfo)}catch(Mt){kn(r,r.return,Mt)}Qr&&(Qr=!1,ef(r));break;case 4:g=Or,Or=kx(r.stateNode.containerInfo),Hi(o,r),Gi(r),Or=g;break;case 12:Hi(o,r),Gi(r);break;case 31:Hi(o,r),Gi(r),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,co(r,g)));break;case 13:Hi(o,r),Gi(r),r.child.flags&8192&&r.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Fc=B()),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,co(r,g)));break;case 22:S=r.memoizedState!==null;var ee=f!==null&&f.memoizedState!==null,xe=Dr,Re=Xn;if(Dr=xe||S,Xn=Re||ee,Hi(o,r),Xn=Re,Dr=xe,Gi(r),g&8192)e:for(o=r.stateNode,o._visibility=S?o._visibility&-2:o._visibility|1,S&&(f===null||ee||Dr||Xn||Ca(r)),f=null,o=r;;){if(o.tag===5||o.tag===26){if(f===null){ee=f=o;try{if(E=ee.stateNode,S)O=E.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{H=ee.stateNode;var Ue=ee.memoizedProps.style,ye=Ue!=null&&Ue.hasOwnProperty("display")?Ue.display:null;H.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch(Mt){kn(ee,ee.return,Mt)}}}else if(o.tag===6){if(f===null){ee=o;try{ee.stateNode.nodeValue=S?"":ee.memoizedProps}catch(Mt){kn(ee,ee.return,Mt)}}}else if(o.tag===18){if(f===null){ee=o;try{var ke=ee.stateNode;S?YS(ke,!0):YS(ee.stateNode,!1)}catch(Mt){kn(ee,ee.return,Mt)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;f===o&&(f=null),o=o.return}f===o&&(f=null),o.sibling.return=o.return,o=o.sibling}g&4&&(g=r.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,co(r,f))));break;case 19:Hi(o,r),Gi(r),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,co(r,g)));break;case 30:break;case 21:break;default:Hi(o,r),Gi(r)}}function Gi(r){var o=r.flags;if(o&2){try{for(var f,g=r.return;g!==null;){if(ii(g)){f=g;break}g=g.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var S=f.stateNode,E=gn(r);ks(r,E,S);break;case 5:var O=f.stateNode;f.flags&32&&(Ci(O,""),f.flags&=-33);var H=gn(r);ks(r,H,O);break;case 3:case 4:var ee=f.stateNode.containerInfo,xe=gn(r);ka(r,xe,ee);break;default:throw Error(n(161))}}catch(Re){kn(r,r.return,Re)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function ef(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;ef(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function Lr(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)si(r,o.alternate,o),o=o.sibling}function Ca(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:rs(4,o,o.return),Ca(o);break;case 1:as(o,o.return);var f=o.stateNode;typeof f.componentWillUnmount=="function"&&Zi(o,o.return,f),Ca(o);break;case 27:Rm(o.stateNode);case 26:case 5:as(o,o.return),Ca(o);break;case 22:o.memoizedState===null&&Ca(o);break;case 30:Ca(o);break;default:Ca(o)}r=r.sibling}}function Cs(r,o,f){for(f=f&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var g=o.alternate,S=r,E=o,O=E.flags;switch(E.tag){case 0:case 11:case 15:Cs(S,E,f),jr(4,E);break;case 1:if(Cs(S,E,f),g=E,S=g.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(xe){kn(g,g.return,xe)}if(g=E,S=g.updateQueue,S!==null){var H=g.stateNode;try{var ee=S.shared.hiddenCallbacks;if(ee!==null)for(S.shared.hiddenCallbacks=null,S=0;S<ee.length;S++)Ic(ee[S],H)}catch(xe){kn(g,g.return,xe)}}f&&O&64&&Jr(E),lo(E,E.return);break;case 27:Jh(E);case 26:case 5:Cs(S,E,f),f&&g===null&&O&4&&ad(E),lo(E,E.return);break;case 12:Cs(S,E,f);break;case 31:Cs(S,E,f),f&&O&4&&$o(S,E);break;case 13:Cs(S,E,f),f&&O&4&&Bc(S,E);break;case 22:E.memoizedState===null&&Cs(S,E,f),lo(E,E.return);break;case 30:break;default:Cs(S,E,f)}o=o.sibling}}function Ko(r,o){var f=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==f&&(r!=null&&r.refCount++,f!=null&&kl(f))}function Hl(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&kl(r))}function os(r,o,f,g){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Nm(r,o,f,g),o=o.sibling}function Nm(r,o,f,g){var S=o.flags;switch(o.tag){case 0:case 11:case 15:os(r,o,f,g),S&2048&&jr(9,o);break;case 1:os(r,o,f,g);break;case 3:os(r,o,f,g),S&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&kl(r)));break;case 12:if(S&2048){os(r,o,f,g),r=o.stateNode;try{var E=o.memoizedProps,O=E.id,H=E.onPostCommit;typeof H=="function"&&H(O,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(ee){kn(o,o.return,ee)}}else os(r,o,f,g);break;case 31:os(r,o,f,g);break;case 13:os(r,o,f,g);break;case 23:break;case 22:E=o.stateNode,O=o.alternate,o.memoizedState!==null?E._visibility&2?os(r,o,f,g):Ra(r,o):E._visibility&2?os(r,o,f,g):(E._visibility|=2,ls(r,o,f,g,(o.subtreeFlags&10256)!==0||!1)),S&2048&&Ko(O,o);break;case 24:os(r,o,f,g),S&2048&&Hl(o.alternate,o);break;default:os(r,o,f,g)}}function ls(r,o,f,g,S){for(S=S&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var E=r,O=o,H=f,ee=g,xe=O.flags;switch(O.tag){case 0:case 11:case 15:ls(E,O,H,ee,S),jr(8,O);break;case 23:break;case 22:var Re=O.stateNode;O.memoizedState!==null?Re._visibility&2?ls(E,O,H,ee,S):Ra(E,O):(Re._visibility|=2,ls(E,O,H,ee,S)),S&&xe&2048&&Ko(O.alternate,O);break;case 24:ls(E,O,H,ee,S),S&&xe&2048&&Hl(O.alternate,O);break;default:ls(E,O,H,ee,S)}o=o.sibling}}function Ra(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var f=r,g=o,S=g.flags;switch(g.tag){case 22:Ra(f,g),S&2048&&Ko(g.alternate,g);break;case 24:Ra(f,g),S&2048&&Hl(g.alternate,g);break;default:Ra(f,g)}o=o.sibling}}var Gl=8192;function dr(r,o,f){if(r.subtreeFlags&Gl)for(r=r.child;r!==null;)tf(r,o,f),r=r.sibling}function tf(r,o,f){switch(r.tag){case 26:dr(r,o,f),r.flags&Gl&&r.memoizedState!==null&&G3(f,Or,r.memoizedState,r.memoizedProps);break;case 5:dr(r,o,f);break;case 3:case 4:var g=Or;Or=kx(r.stateNode.containerInfo),dr(r,o,f),Or=g;break;case 22:r.memoizedState===null&&(g=r.alternate,g!==null&&g.memoizedState!==null?(g=Gl,Gl=16777216,dr(r,o,f),Gl=g):dr(r,o,f));break;default:dr(r,o,f)}}function ql(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function Zo(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var f=0;f<o.length;f++){var g=o[f];Ji=g,gi(g,r)}ql(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)qs(r),r=r.sibling}function qs(r){switch(r.tag){case 0:case 11:case 15:Zo(r),r.flags&2048&&rs(9,r,r.return);break;case 3:Zo(r);break;case 12:Zo(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,Ws(r)):Zo(r);break;default:Zo(r)}}function Ws(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var f=0;f<o.length;f++){var g=o[f];Ji=g,gi(g,r)}ql(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:rs(8,o,o.return),Ws(o);break;case 22:f=o.stateNode,f._visibility&2&&(f._visibility&=-3,Ws(o));break;default:Ws(o)}r=r.sibling}}function gi(r,o){for(;Ji!==null;){var f=Ji;switch(f.tag){case 0:case 11:case 15:rs(8,f,o);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:kl(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,Ji=g;else e:for(f=r;Ji!==null;){g=Ji;var S=g.sibling,E=g.return;if(od(g),g===f){Ji=null;break e}if(S!==null){S.return=E,Ji=S;break e}Ji=E}}}var uo={getCacheForType:function(r){var o=Ft(Ri),f=o.data.get(r);return f===void 0&&(f=r(),o.data.set(r,f)),f},cacheSignal:function(){return Ft(Ri).controller.signal}},Zt=typeof WeakMap=="function"?WeakMap:Map,At=0,Wt=null,an=null,tn=0,_n=0,xs=null,Ur=!1,ea=!1,Tm=!1,hr=0,ui=0,ja=0,Jo=0,ld=0,Rs=0,Jn=0,Wl=null,xi=null,vi=!1,Fc=0,Am=0,wi=1/0,di=null,Si=null,Pn=0,fr=null,Vc=null,Pr=0,Hc=0,Gc=null,cd=null,Qo=0,Xl=null;function pr(){return(At&2)!==0&&tn!==0?tn&-tn:X.T!==null?Me():bl()}function hn(){if(Rs===0)if((tn&536870912)===0||vn){var r=Xe;Xe<<=1,(Xe&3932160)===0&&(Xe=262144),Rs=r}else Rs=536870912;return r=Fs.current,r!==null&&(r.flags|=32),Rs}function on(r,o,f){(r===Wt&&(_n===2||_n===9)||r.cancelPendingCommit!==null)&&(tl(r,0),Di(r,tn,Rs,!1)),is(r,f),((At&2)===0||r!==Wt)&&(r===Wt&&((At&2)===0&&(Jo|=f),ui===4&&Di(r,tn,Rs,!1)),qe(r))}function fn(r,o,f){if((At&6)!==0)throw Error(n(327));var g=!f&&(o&127)===0&&(o&r.expiredLanes)===0||Qe(r,o),S=g?ud(r,o):js(r,o,!0),E=g;do{if(S===0){ea&&!g&&Di(r,o,0,!1);break}else{if(f=r.current.alternate,E&&!zn(f)){S=js(r,o,!1),E=!1;continue}if(S===2){if(E=o,r.errorRecoveryDisabledLanes&E)var O=0;else O=r.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){o=O;e:{var H=r;S=Wl;var ee=H.current.memoizedState.isDehydrated;if(ee&&(tl(H,O).flags|=256),O=js(H,O,!1),O!==2){if(Tm&&!ee){H.errorRecoveryDisabledLanes|=E,Jo|=E,S=4;break e}E=xi,xi=S,E!==null&&(xi===null?xi=E:xi.push.apply(xi,E))}S=O}if(E=!1,S!==2)continue}}if(S===1){tl(r,0),Di(r,o,0,!0);break}e:{switch(g=r,E=S,E){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:Di(g,o,Rs,!Ur);break e;case 2:xi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(S=Fc+300-B(),10<S)){if(Di(g,o,Rs,!Ur),Ie(g,0,!0)!==0)break e;Pr=o,g.timeoutHandle=WS(xn.bind(null,g,f,xi,di,vi,o,Rs,Jo,Jn,Ur,E,"Throttled",-0,0),S);break e}xn(g,f,xi,di,vi,o,Rs,Jo,Jn,Ur,E,null,-0,0)}}break}while(!0);qe(r)}function xn(r,o,f,g,S,E,O,H,ee,xe,Re,Ue,ye,ke){if(r.timeoutHandle=-1,Ue=o.subtreeFlags,Ue&8192||(Ue&16785408)===16785408){Ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ka},tf(o,E,Ue);var Mt=(E&62914560)===E?Fc-B():(E&4194048)===E?Am-B():0;if(Mt=q3(Ue,Mt),Mt!==null){Pr=E,r.cancelPendingCommit=Mt(fo.bind(null,r,o,E,f,g,S,O,H,ee,Re,Ue,null,ye,ke)),Di(r,E,O,!xe);return}}fo(r,o,E,f,g,S,O,H,ee)}function zn(r){for(var o=r;;){var f=o.tag;if((f===0||f===11||f===15)&&o.flags&16384&&(f=o.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var S=f[g],E=S.getSnapshot;S=S.value;try{if(!Es(E(),S))return!1}catch{return!1}}if(f=o.child,o.subtreeFlags&16384&&f!==null)f.return=o,o=f;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Di(r,o,f,g){o&=~ld,o&=~Jo,r.suspendedLanes|=o,r.pingedLanes&=~o,g&&(r.warmLanes|=o),g=r.expirationTimes;for(var S=o;0<S;){var E=31-ht(S),O=1<<E;g[E]=-1,S&=~O}f!==0&&No(r,f,o)}function ta(){return(At&6)===0?(xt(0),!1):!0}function el(){if(an!==null){if(_n===0)var r=an.return;else r=an,wa=Bo=null,Zp(r),Il=null,Ol=0,r=an;for(;r!==null;)ur(r.alternate,r),r=r.return;an=null}}function tl(r,o){var f=r.timeoutHandle;f!==-1&&(r.timeoutHandle=-1,T3(f)),f=r.cancelPendingCommit,f!==null&&(r.cancelPendingCommit=null,f()),Pr=0,el(),Wt=r,an=f=Ps(r.current,null),tn=o,_n=0,xs=null,Ur=!1,ea=Qe(r,o),Tm=!1,Jn=Rs=ld=Jo=ja=ui=0,xi=Wl=null,vi=!1,(o&8)!==0&&(o|=o&32);var g=r.entangledLanes;if(g!==0)for(r=r.entanglements,g&=o;0<g;){var S=31-ht(g),E=1<<S;o|=r[S],g&=~E}return hr=o,Hu(),f}function Da(r,o){Kt=null,X.H=Pc,o===Cl||o===rn?(o=jl(),_n=3):o===Xu?(o=jl(),_n=4):_n=o===Hh?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,xs=o,an===null&&(ui=1,Vh(r,ar(o,r.current)))}function hi(){var r=Fs.current;return r===null?!0:(tn&4194048)===tn?As===null:(tn&62914560)===tn||(tn&536870912)!==0?r===As:!1}function ho(){var r=X.H;return X.H=Pc,r===null?Pc:r}function nl(){var r=X.A;return X.A=uo,r}function qc(){ui=4,Ur||(tn&4194048)!==tn&&Fs.current!==null||(ea=!0),(ja&134217727)===0&&(Jo&134217727)===0||Wt===null||Di(Wt,tn,Rs,!1)}function js(r,o,f){var g=At;At|=2;var S=ho(),E=nl();(Wt!==r||tn!==o)&&(di=null,tl(r,o)),o=!1;var O=ui;e:do try{if(_n!==0&&an!==null){var H=an,ee=xs;switch(_n){case 8:el(),O=6;break e;case 3:case 2:case 9:case 6:Fs.current===null&&(o=!0);var xe=_n;if(_n=0,xs=null,$l(r,H,ee,xe),f&&ea){O=0;break e}break;default:xe=_n,_n=0,xs=null,$l(r,H,ee,xe)}}Wc(),O=ui;break}catch(Re){Da(r,Re)}while(!0);return o&&r.shellSuspendCounter++,wa=Bo=null,At=g,X.H=S,X.A=E,an===null&&(Wt=null,tn=0,Hu()),O}function Wc(){for(;an!==null;)nf(an)}function ud(r,o){var f=At;At|=2;var g=ho(),S=nl();Wt!==r||tn!==o?(di=null,wi=B()+500,tl(r,o)):ea=Qe(r,o);e:do try{if(_n!==0&&an!==null){o=an;var E=xs;t:switch(_n){case 1:_n=0,xs=null,$l(r,o,E,1);break;case 2:case 9:if(Bs(E)){_n=0,xs=null,dd(o);break}o=function(){_n!==2&&_n!==9||Wt!==r||(_n=7),qe(r)},E.then(o,o);break e;case 3:_n=7;break e;case 4:_n=5;break e;case 7:Bs(E)?(_n=0,xs=null,dd(o)):(_n=0,xs=null,$l(r,o,E,7));break;case 5:var O=null;switch(an.tag){case 26:O=an.memoizedState;case 5:case 27:var H=an;if(O?oM(O):H.stateNode.complete){_n=0,xs=null;var ee=H.sibling;if(ee!==null)an=ee;else{var xe=H.return;xe!==null?(an=xe,il(xe)):an=null}break t}}_n=0,xs=null,$l(r,o,E,5);break;case 6:_n=0,xs=null,$l(r,o,E,6);break;case 8:el(),ui=6;break e;default:throw Error(n(462))}}Xs();break}catch(Re){Da(r,Re)}while(!0);return wa=Bo=null,X.H=g,X.A=S,At=f,an!==null?0:(Wt=null,tn=0,Hu(),ui)}function Xs(){for(;an!==null&&!Ye();)nf(an)}function nf(r){var o=Zh(r.alternate,r,hr);r.memoizedProps=r.pendingProps,o===null?il(r):an=o}function dd(r){var o=r,f=o.alternate;switch(o.tag){case 15:case 0:o=nd(f,o,o.pendingProps,o.type,void 0,tn);break;case 11:o=nd(f,o,o.pendingProps,o.type.render,o.ref,tn);break;case 5:Zp(o);default:ur(f,o),o=an=Mc(o,hr),o=Zh(f,o,hr)}r.memoizedProps=r.pendingProps,o===null?il(r):an=o}function $l(r,o,f,g){wa=Bo=null,Zp(o),Il=null,Ol=0;var S=o.return;try{if(Fi(r,S,o,f,tn)){ui=1,Vh(r,ar(f,r.current)),an=null;return}}catch(E){if(S!==null)throw an=S,E;ui=1,Vh(r,ar(f,r.current)),an=null;return}o.flags&32768?(vn||g===1?r=!0:ea||(tn&536870912)!==0?r=!1:(Ur=r=!0,(g===2||g===9||g===3||g===6)&&(g=Fs.current,g!==null&&g.tag===13&&(g.flags|=16384))),hd(o,r)):il(o)}function il(r){var o=r;do{if((o.flags&32768)!==0){hd(o,Ur);return}r=o.return;var f=rd(o.alternate,o,hr);if(f!==null){an=f;return}if(o=o.sibling,o!==null){an=o;return}an=o=r}while(o!==null);ui===0&&(ui=5)}function hd(r,o){do{var f=Rr(r.alternate,r);if(f!==null){f.flags&=32767,an=f;return}if(f=r.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!o&&(r=r.sibling,r!==null)){an=r;return}an=r=f}while(r!==null);ui=6,an=null}function fo(r,o,f,g,S,E,O,H,ee){r.cancelPendingCommit=null;do Xc();while(Pn!==0);if((At&6)!==0)throw Error(n(327));if(o!==null){if(o===r.current)throw Error(n(177));if(E=o.lanes|o.childLanes,E|=$i,Us(r,f,E,O,H,ee),r===Wt&&(an=Wt=null,tn=0),Vc=o,fr=r,Pr=f,Hc=E,Gc=S,cd=g,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,A(Ae,function(){return sf(),null})):(r.callbackNode=null,r.callbackPriority=0),g=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||g){g=X.T,X.T=null,S=Z.p,Z.p=2,O=At,At|=4;try{t_(r,o,f)}finally{At=O,Z.p=S,X.T=g}}Pn=1,Ii(),po(),Yl()}}function Ii(){if(Pn===1){Pn=0;var r=fr,o=Vc,f=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||f){f=X.T,X.T=null;var g=Z.p;Z.p=2;var S=At;At|=4;try{Yo(o,r);var E=l_,O=T0(r.containerInfo),H=E.focusedElem,ee=E.selectionRange;if(O!==H&&H&&H.ownerDocument&&qn(H.ownerDocument.documentElement,H)){if(ee!==null&&Dp(H)){var xe=ee.start,Re=ee.end;if(Re===void 0&&(Re=xe),"selectionStart"in H)H.selectionStart=xe,H.selectionEnd=Math.min(Re,H.value.length);else{var Ue=H.ownerDocument||document,ye=Ue&&Ue.defaultView||window;if(ye.getSelection){var ke=ye.getSelection(),Mt=H.textContent.length,Bt=Math.min(ee.start,Mt),Yn=ee.end===void 0?Bt:Math.min(ee.end,Mt);!ke.extend&&Bt>Yn&&(O=Yn,Yn=Bt,Bt=O);var de=_c(H,Bt),se=_c(H,Yn);if(de&&se&&(ke.rangeCount!==1||ke.anchorNode!==de.node||ke.anchorOffset!==de.offset||ke.focusNode!==se.node||ke.focusOffset!==se.offset)){var ge=Ue.createRange();ge.setStart(de.node,de.offset),ke.removeAllRanges(),Bt>Yn?(ke.addRange(ge),ke.extend(se.node,se.offset)):(ge.setEnd(se.node,se.offset),ke.addRange(ge))}}}}for(Ue=[],ke=H;ke=ke.parentNode;)ke.nodeType===1&&Ue.push({element:ke,left:ke.scrollLeft,top:ke.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<Ue.length;H++){var De=Ue[H];De.element.scrollLeft=De.left,De.element.scrollTop=De.top}}Ox=!!o_,l_=o_=null}finally{At=S,Z.p=g,X.T=f}}r.current=o,Pn=2}}function po(){if(Pn===2){Pn=0;var r=fr,o=Vc,f=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||f){f=X.T,X.T=null;var g=Z.p;Z.p=2;var S=At;At|=4;try{si(r,o.alternate,o)}finally{At=S,Z.p=g,X.T=f}}Pn=3}}function Yl(){if(Pn===4||Pn===3){Pn=0,$();var r=fr,o=Vc,f=Pr,g=cd;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Pn=5:(Pn=0,Vc=fr=null,Ia(r,r.pendingLanes));var S=r.pendingLanes;if(S===0&&(Si=null),Wa(f),o=o.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(Ve,o,void 0,(o.current.flags&128)===128)}catch{}if(g!==null){o=X.T,S=Z.p,Z.p=2,X.T=null;try{for(var E=r.onRecoverableError,O=0;O<g.length;O++){var H=g[O];E(H.value,{componentStack:H.stack})}}finally{X.T=o,Z.p=S}}(Pr&3)!==0&&Xc(),qe(r),S=r.pendingLanes,(f&261930)!==0&&(S&42)!==0?r===Xl?Qo++:(Qo=0,Xl=r):Qo=0,xt(0)}}function Ia(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,kl(o)))}function Xc(){return Ii(),po(),Yl(),sf()}function sf(){if(Pn!==5)return!1;var r=fr,o=Hc;Hc=0;var f=Wa(Pr),g=X.T,S=Z.p;try{Z.p=32>f?32:f,X.T=null,f=Gc,Gc=null;var E=fr,O=Pr;if(Pn=0,Vc=fr=null,Pr=0,(At&6)!==0)throw Error(n(331));var H=At;if(At|=4,qs(E.current),Nm(E,E.current,O,f),At=H,xt(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(Ve,E)}catch{}return!0}finally{Z.p=S,X.T=g,Ia(r,o)}}function km(r,o,f){o=ar(f,o),o=bm(r.stateNode,o,2),r=Ho(r,o,2),r!==null&&(is(r,2),qe(r))}function kn(r,o,f){if(r.tag===3)km(r,r,f);else for(;o!==null;){if(o.tag===3){km(o,r,f);break}else if(o.tag===1){var g=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Si===null||!Si.has(g))){r=ar(f,r),f=ym(2),g=Ho(o,f,2),g!==null&&(yx(f,g,o,r),is(g,2),qe(g));break}}o=o.return}}function fd(r,o,f){var g=r.pingCache;if(g===null){g=r.pingCache=new Zt;var S=new Set;g.set(o,S)}else S=g.get(o),S===void 0&&(S=new Set,g.set(o,S));S.has(f)||(Tm=!0,S.add(f),r=c.bind(null,r,o,f),o.then(r,r))}function c(r,o,f){var g=r.pingCache;g!==null&&g.delete(o),r.pingedLanes|=r.suspendedLanes&f,r.warmLanes&=~f,Wt===r&&(tn&f)===f&&(ui===4||ui===3&&(tn&62914560)===tn&&300>B()-Fc?(At&2)===0&&tl(r,0):ld|=f,Jn===tn&&(Jn=0)),qe(r)}function d(r,o){o===0&&(o=yn()),r=Ns(r,o),r!==null&&(is(r,o),qe(r))}function x(r){var o=r.memoizedState,f=0;o!==null&&(f=o.retryLane),d(r,f)}function _(r,o){var f=0;switch(r.tag){case 31:case 13:var g=r.stateNode,S=r.memoizedState;S!==null&&(f=S.retryLane);break;case 19:g=r.stateNode;break;case 22:g=r.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(o),d(r,f)}function A(r,o){return at(r,o)}var C=null,F=null,te=!1,Ne=!1,Be=!1,et=0;function qe(r){r!==F&&r.next===null&&(F===null?C=F=r:F=F.next=r),Ne=!0,te||(te=!0,fe())}function xt(r,o){if(!Be&&Ne){Be=!0;do for(var f=!1,g=C;g!==null;){if(r!==0){var S=g.pendingLanes;if(S===0)var E=0;else{var O=g.suspendedLanes,H=g.pingedLanes;E=(1<<31-ht(42|r)+1)-1,E&=S&~(O&~H),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(f=!0,be(g,E))}else E=tn,E=Ie(g,g===Wt?E:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(E&3)===0||Qe(g,E)||(f=!0,be(g,E));g=g.next}while(f);Be=!1}}function Yt(){Mi()}function Mi(){Ne=te=!1;var r=0;et!==0&&N3()&&(r=et);for(var o=B(),f=null,g=C;g!==null;){var S=g.next,E=$c(g,o);E===0?(g.next=null,f===null?C=S:f.next=S,S===null&&(F=f)):(f=g,(r!==0||(E&3)!==0)&&(Ne=!0)),g=S}Pn!==0&&Pn!==5||xt(r),et!==0&&(et=0)}function $c(r,o){for(var f=r.suspendedLanes,g=r.pingedLanes,S=r.expirationTimes,E=r.pendingLanes&-62914561;0<E;){var O=31-ht(E),H=1<<O,ee=S[O];ee===-1?((H&f)===0||(H&g)!==0)&&(S[O]=Gt(H,o)):ee<=o&&(r.expiredLanes|=H),E&=~H}if(o=Wt,f=tn,f=Ie(r,r===o?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),g=r.callbackNode,f===0||r===o&&(_n===2||_n===9)||r.cancelPendingCommit!==null)return g!==null&&g!==null&&Tt(g),r.callbackNode=null,r.callbackPriority=0;if((f&3)===0||Qe(r,f)){if(o=f&-f,o===r.callbackPriority)return o;switch(g!==null&&Tt(g),Wa(f)){case 2:case 8:f=Le;break;case 32:f=Ae;break;case 268435456:f=Je;break;default:f=Ae}return g=sl.bind(null,r),f=at(f,g),r.callbackPriority=o,r.callbackNode=f,o}return g!==null&&g!==null&&Tt(g),r.callbackPriority=2,r.callbackNode=null,2}function sl(r,o){if(Pn!==0&&Pn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var f=r.callbackNode;if(Xc()&&r.callbackNode!==f)return null;var g=tn;return g=Ie(r,r===Wt?g:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),g===0?null:(fn(r,g,o),$c(r,B()),r.callbackNode!=null&&r.callbackNode===f?sl.bind(null,r):null)}function be(r,o){if(Xc())return null;fn(r,o,!0)}function fe(){A3(function(){(At&6)!==0?at(Te,Yt):Mi()})}function Me(){if(et===0){var r=no;r===0&&(r=ot,ot<<=1,(ot&261888)===0&&(ot=256)),et=r}return et}function Ze(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ku(""+r)}function Lt(r,o){var f=o.ownerDocument.createElement("input");return f.name=o.name,f.value=o.value,r.id&&f.setAttribute("form",r.id),o.parentNode.insertBefore(f,o),r=new FormData(r),f.parentNode.removeChild(f),r}function fi(r,o,f,g,S){if(o==="submit"&&f&&f.stateNode===S){var E=Ze((S[Pi]||null).action),O=g.submitter;O&&(o=(o=O[Pi]||null)?Ze(o.formAction):O.getAttribute("formAction"),o!==null&&(E=o,O=null));var H=new ju("action","action",null,g,S);r.push({event:H,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(et!==0){var ee=O?Lt(S,O):new FormData(S);dm(f,{pending:!0,data:ee,method:S.method,action:E},null,ee)}}else typeof E=="function"&&(H.preventDefault(),ee=O?Lt(S,O):new FormData(S),dm(f,{pending:!0,data:ee,method:S.method,action:E},E,ee))},currentTarget:S}]})}}for(var Pt=0;Pt<Fu.length;Pt++){var En=Fu[Pt],Qi=En.toLowerCase(),Cn=En[0].toUpperCase()+En.slice(1);Mr(Qi,"on"+Cn)}Mr(gh,"onAnimationEnd"),Mr(Bu,"onAnimationIteration"),Mr(Op,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(k0,"onTransitionRun"),Mr(Xy,"onTransitionStart"),Mr(C0,"onTransitionCancel"),Mr(Lp,"onTransitionEnd"),he("onMouseEnter",["mouseout","mouseover"]),he("onMouseLeave",["mouseout","mouseover"]),he("onPointerEnter",["pointerout","pointerover"]),he("onPointerLeave",["pointerout","pointerover"]),ve("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ve("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ve("onBeforeInput",["compositionend","keypress","textInput","paste"]),ve("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ve("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ve("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zr));function PS(r,o){o=(o&4)!==0;for(var f=0;f<r.length;f++){var g=r[f],S=g.event;g=g.listeners;e:{var E=void 0;if(o)for(var O=g.length-1;0<=O;O--){var H=g[O],ee=H.instance,xe=H.currentTarget;if(H=H.listener,ee!==E&&S.isPropagationStopped())break e;E=H,S.currentTarget=xe;try{E(S)}catch(Re){Vu(Re)}S.currentTarget=null,E=ee}else for(O=0;O<g.length;O++){if(H=g[O],ee=H.instance,xe=H.currentTarget,H=H.listener,ee!==E&&S.isPropagationStopped())break e;E=H,S.currentTarget=xe;try{E(S)}catch(Re){Vu(Re)}S.currentTarget=null,E=ee}}}}function wn(r,o){var f=o[ir];f===void 0&&(f=o[ir]=new Set);var g=r+"__bubble";f.has(g)||(zS(o,r,2,!1),f.add(g))}function i_(r,o,f){var g=0;o&&(g|=4),zS(f,r,g,o)}var Nx="_reactListening"+Math.random().toString(36).slice(2);function s_(r){if(!r[Nx]){r[Nx]=!0,le.forEach(function(f){f!=="selectionchange"&&(n_.has(f)||i_(f,!1,r),i_(f,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[Nx]||(o[Nx]=!0,i_("selectionchange",!1,o))}}function zS(r,o,f,g){switch(pM(o)){case 2:var S=$3;break;case 8:S=Y3;break;default:S=b_}f=S.bind(null,o,f,r),S=void 0,!xp||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(S=!0),g?S!==void 0?r.addEventListener(o,f,{capture:!0,passive:S}):r.addEventListener(o,f,!0):S!==void 0?r.addEventListener(o,f,{passive:S}):r.addEventListener(o,f,!1)}function r_(r,o,f,g,S){var E=g;if((o&1)===0&&(o&2)===0&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var H=g.stateNode.containerInfo;if(H===S)break;if(O===4)for(O=g.return;O!==null;){var ee=O.tag;if((ee===3||ee===4)&&O.stateNode.containerInfo===S)return;O=O.return}for(;H!==null;){if(O=$a(H),O===null)return;if(ee=O.tag,ee===5||ee===6||ee===26||ee===27){g=E=O;continue e}H=H.parentNode}}g=g.return}gp(function(){var xe=E,Re=ih(f),Ue=[];e:{var ye=Sr.get(r);if(ye!==void 0){var ke=ju,Mt=r;switch(r){case"keypress":if(Ru(f)===0)break e;case"keydown":case"keyup":ke=Ml;break;case"focusin":Mt="focus",ke=oh;break;case"focusout":Mt="blur",ke=oh;break;case"beforeblur":case"afterblur":ke=oh;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ke=vp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ke=c0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ke=m0;break;case gh:case Bu:case Op:ke=Gy;break;case Lp:ke=Wy;break;case"scroll":case"scrollend":ke=o0;break;case"wheel":ke=x0;break;case"copy":case"cut":case"paste":ke=d0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ke=_p;break;case"toggle":case"beforetoggle":ke=b0}var Bt=(o&4)!==0,Yn=!Bt&&(r==="scroll"||r==="scrollend"),de=Bt?ye!==null?ye+"Capture":null:ye;Bt=[];for(var se=xe,ge;se!==null;){var De=se;if(ge=De.stateNode,De=De.tag,De!==5&&De!==26&&De!==27||ge===null||de===null||(De=hc(se,de),De!=null&&Bt.push(Cm(se,De,ge))),Yn)break;se=se.return}0<Bt.length&&(ye=new ke(ye,Mt,null,f,Re),Ue.push({event:ye,listeners:Bt}))}}if((o&7)===0){e:{if(ye=r==="mouseover"||r==="pointerover",ke=r==="mouseout"||r==="pointerout",ye&&f!==nh&&(Mt=f.relatedTarget||f.fromElement)&&($a(Mt)||Mt[nr]))break e;if((ke||ye)&&(ye=Re.window===Re?Re:(ye=Re.ownerDocument)?ye.defaultView||ye.parentWindow:window,ke?(Mt=f.relatedTarget||f.toElement,ke=xe,Mt=Mt?$a(Mt):null,Mt!==null&&(Yn=a(Mt),Bt=Mt.tag,Mt!==Yn||Bt!==5&&Bt!==27&&Bt!==6)&&(Mt=null)):(ke=null,Mt=xe),ke!==Mt)){if(Bt=vp,De="onMouseLeave",de="onMouseEnter",se="mouse",(r==="pointerout"||r==="pointerover")&&(Bt=_p,De="onPointerLeave",de="onPointerEnter",se="pointer"),Yn=ke==null?ye:Co(ke),ge=Mt==null?ye:Co(Mt),ye=new Bt(De,se+"leave",ke,f,Re),ye.target=Yn,ye.relatedTarget=ge,De=null,$a(Re)===xe&&(Bt=new Bt(de,se+"enter",Mt,f,Re),Bt.target=ge,Bt.relatedTarget=Yn,De=Bt),Yn=De,ke&&Mt)t:{for(Bt=_3,de=ke,se=Mt,ge=0,De=de;De;De=Bt(De))ge++;De=0;for(var It=se;It;It=Bt(It))De++;for(;0<ge-De;)de=Bt(de),ge--;for(;0<De-ge;)se=Bt(se),De--;for(;ge--;){if(de===se||se!==null&&de===se.alternate){Bt=de;break t}de=Bt(de),se=Bt(se)}Bt=null}else Bt=null;ke!==null&&BS(Ue,ye,ke,Bt,!1),Mt!==null&&Yn!==null&&BS(Ue,Yn,Mt,Bt,!0)}}e:{if(ye=xe?Co(xe):window,ke=ye.nodeName&&ye.nodeName.toLowerCase(),ke==="select"||ke==="input"&&ye.type==="file")var On=Ap;else if(Tp(ye))if(pa)On=N0;else{On=Rp;var Nt=M0}else ke=ye.nodeName,!ke||ke.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?xe&&_r(xe.elementType)&&(On=Ap):On=E0;if(On&&(On=On(r,xe))){ph(Ue,On,f,Re);break e}Nt&&Nt(r,ye,xe),r==="focusout"&&xe&&ye.type==="number"&&xe.memoizedProps.value!=null&&Zn(ye,"number",ye.value)}switch(Nt=xe?Co(xe):window,r){case"focusin":(Tp(Nt)||Nt.contentEditable==="true")&&(ma=Nt,ga=xe,wc=null);break;case"focusout":wc=ga=ma=null;break;case"mousedown":mh=!0;break;case"contextmenu":case"mouseup":case"dragend":mh=!1,Sc(Ue,f,Re);break;case"selectionchange":if(A0)break;case"keydown":case"keyup":Sc(Ue,f,Re)}var cn;if(El)e:{switch(r){case"compositionstart":var Nn="onCompositionStart";break e;case"compositionend":Nn="onCompositionEnd";break e;case"compositionupdate":Nn="onCompositionUpdate";break e}Nn=void 0}else Nl?fh(r,f)&&(Nn="onCompositionEnd"):r==="keydown"&&f.keyCode===229&&(Nn="onCompositionStart");Nn&&(Sp&&f.locale!=="ko"&&(Nl||Nn!=="onCompositionStart"?Nn==="onCompositionEnd"&&Nl&&(cn=Cu()):(rr=Re,rh="value"in rr?rr.value:rr.textContent,Nl=!0)),Nt=Tx(xe,Nn),0<Nt.length&&(Nn=new lh(Nn,r,null,f,Re),Ue.push({event:Nn,listeners:Nt}),cn?Nn.data=cn:(cn=Mp(f),cn!==null&&(Nn.data=cn)))),(cn=hh?w0(r,f):Ep(r,f))&&(Nn=Tx(xe,"onBeforeInput"),0<Nn.length&&(Nt=new lh("onBeforeInput","beforeinput",null,f,Re),Ue.push({event:Nt,listeners:Nn}),Nt.data=cn)),fi(Ue,r,xe,f,Re)}PS(Ue,o)})}function Cm(r,o,f){return{instance:r,listener:o,currentTarget:f}}function Tx(r,o){for(var f=o+"Capture",g=[];r!==null;){var S=r,E=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||E===null||(S=hc(r,f),S!=null&&g.unshift(Cm(r,S,E)),S=hc(r,o),S!=null&&g.push(Cm(r,S,E))),r.tag===3)return g;r=r.return}return[]}function _3(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function BS(r,o,f,g,S){for(var E=o._reactName,O=[];f!==null&&f!==g;){var H=f,ee=H.alternate,xe=H.stateNode;if(H=H.tag,ee!==null&&ee===g)break;H!==5&&H!==26&&H!==27||xe===null||(ee=xe,S?(xe=hc(f,E),xe!=null&&O.unshift(Cm(f,xe,ee))):S||(xe=hc(f,E),xe!=null&&O.push(Cm(f,xe,ee)))),f=f.return}O.length!==0&&r.push({event:o,listeners:O})}var w3=/\r\n?/g,S3=/\u0000|\uFFFD/g;function FS(r){return(typeof r=="string"?r:""+r).replace(w3,`
`).replace(S3,"")}function VS(r,o){return o=FS(o),FS(r)===o}function $n(r,o,f,g,S,E){switch(f){case"children":typeof g=="string"?o==="body"||o==="textarea"&&g===""||Ci(r,g):(typeof g=="number"||typeof g=="bigint")&&o!=="body"&&Ci(r,""+g);break;case"className":Rt(r,"class",g);break;case"tabIndex":Rt(r,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Rt(r,f,g);break;case"style":_l(r,g,E);break;case"data":if(o!=="object"){Rt(r,"data",g);break}case"src":case"href":if(g===""&&(o!=="a"||f!=="href")){r.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){r.removeAttribute(f);break}g=ku(""+g),r.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){r.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(f==="formAction"?(o!=="input"&&$n(r,o,"name",S.name,S,null),$n(r,o,"formEncType",S.formEncType,S,null),$n(r,o,"formMethod",S.formMethod,S,null),$n(r,o,"formTarget",S.formTarget,S,null)):($n(r,o,"encType",S.encType,S,null),$n(r,o,"method",S.method,S,null),$n(r,o,"target",S.target,S,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){r.removeAttribute(f);break}g=ku(""+g),r.setAttribute(f,g);break;case"onClick":g!=null&&(r.onclick=Ka);break;case"onScroll":g!=null&&wn("scroll",r);break;case"onScrollEnd":g!=null&&wn("scrollend",r);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(S.children!=null)throw Error(n(60));r.innerHTML=f}}break;case"multiple":r.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":r.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){r.removeAttribute("xlink:href");break}f=ku(""+g),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(f,""+g):r.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(f,""):r.removeAttribute(f);break;case"capture":case"download":g===!0?r.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(f,g):r.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?r.setAttribute(f,g):r.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?r.removeAttribute(f):r.setAttribute(f,g);break;case"popover":wn("beforetoggle",r),wn("toggle",r),_t(r,"popover",g);break;case"xlinkActuate":St(r,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":St(r,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":St(r,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":St(r,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":St(r,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":St(r,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":St(r,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":St(r,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":St(r,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":_t(r,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=r0.get(f)||f,_t(r,f,g))}}function a_(r,o,f,g,S,E){switch(f){case"style":_l(r,g,E);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(S.children!=null)throw Error(n(60));r.innerHTML=f}}break;case"children":typeof g=="string"?Ci(r,g):(typeof g=="number"||typeof g=="bigint")&&Ci(r,""+g);break;case"onScroll":g!=null&&wn("scroll",r);break;case"onScrollEnd":g!=null&&wn("scrollend",r);break;case"onClick":g!=null&&(r.onclick=Ka);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_e.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(S=f.endsWith("Capture"),o=f.slice(2,S?f.length-7:void 0),E=r[Pi]||null,E=E!=null?E[f]:null,typeof E=="function"&&r.removeEventListener(o,E,S),typeof g=="function")){typeof E!="function"&&E!==null&&(f in r?r[f]=null:r.hasAttribute(f)&&r.removeAttribute(f)),r.addEventListener(o,g,S);break e}f in r?r[f]=g:g===!0?r.setAttribute(f,""):_t(r,f,g)}}}function Ds(r,o,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wn("error",r),wn("load",r);var g=!1,S=!1,E;for(E in f)if(f.hasOwnProperty(E)){var O=f[E];if(O!=null)switch(E){case"src":g=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:$n(r,o,E,O,f,null)}}S&&$n(r,o,"srcSet",f.srcSet,f,null),g&&$n(r,o,"src",f.src,f,null);return;case"input":wn("invalid",r);var H=E=O=S=null,ee=null,xe=null;for(g in f)if(f.hasOwnProperty(g)){var Re=f[g];if(Re!=null)switch(g){case"name":S=Re;break;case"type":O=Re;break;case"checked":ee=Re;break;case"defaultChecked":xe=Re;break;case"value":E=Re;break;case"defaultValue":H=Re;break;case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(n(137,o));break;default:$n(r,o,g,Re,f,null)}}Kr(r,E,H,ee,xe,O,S,!1);return;case"select":wn("invalid",r),g=O=E=null;for(S in f)if(f.hasOwnProperty(S)&&(H=f[S],H!=null))switch(S){case"value":E=H;break;case"defaultValue":O=H;break;case"multiple":g=H;default:$n(r,o,S,H,f,null)}o=E,f=O,r.multiple=!!g,o!=null?Ss(r,!!g,o,!1):f!=null&&Ss(r,!!g,f,!0);return;case"textarea":wn("invalid",r),E=S=g=null;for(O in f)if(f.hasOwnProperty(O)&&(H=f[O],H!=null))switch(O){case"value":g=H;break;case"defaultValue":S=H;break;case"children":E=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(n(91));break;default:$n(r,o,O,H,f,null)}zi(r,g,S,E);return;case"option":for(ee in f)f.hasOwnProperty(ee)&&(g=f[ee],g!=null)&&(ee==="selected"?r.selected=g&&typeof g!="function"&&typeof g!="symbol":$n(r,o,ee,g,f,null));return;case"dialog":wn("beforetoggle",r),wn("toggle",r),wn("cancel",r),wn("close",r);break;case"iframe":case"object":wn("load",r);break;case"video":case"audio":for(g=0;g<zr.length;g++)wn(zr[g],r);break;case"image":wn("error",r),wn("load",r);break;case"details":wn("toggle",r);break;case"embed":case"source":case"link":wn("error",r),wn("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(xe in f)if(f.hasOwnProperty(xe)&&(g=f[xe],g!=null))switch(xe){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:$n(r,o,xe,g,f,null)}return;default:if(_r(o)){for(Re in f)f.hasOwnProperty(Re)&&(g=f[Re],g!==void 0&&a_(r,o,Re,g,f,void 0));return}}for(H in f)f.hasOwnProperty(H)&&(g=f[H],g!=null&&$n(r,o,H,g,f,null))}function M3(r,o,f,g){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,E=null,O=null,H=null,ee=null,xe=null,Re=null;for(ke in f){var Ue=f[ke];if(f.hasOwnProperty(ke)&&Ue!=null)switch(ke){case"checked":break;case"value":break;case"defaultValue":ee=Ue;default:g.hasOwnProperty(ke)||$n(r,o,ke,null,g,Ue)}}for(var ye in g){var ke=g[ye];if(Ue=f[ye],g.hasOwnProperty(ye)&&(ke!=null||Ue!=null))switch(ye){case"type":E=ke;break;case"name":S=ke;break;case"checked":xe=ke;break;case"defaultChecked":Re=ke;break;case"value":O=ke;break;case"defaultValue":H=ke;break;case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(n(137,o));break;default:ke!==Ue&&$n(r,o,ye,ke,g,Ue)}}ki(r,O,H,ee,xe,Re,E,S);return;case"select":ke=O=H=ye=null;for(E in f)if(ee=f[E],f.hasOwnProperty(E)&&ee!=null)switch(E){case"value":break;case"multiple":ke=ee;default:g.hasOwnProperty(E)||$n(r,o,E,null,g,ee)}for(S in g)if(E=g[S],ee=f[S],g.hasOwnProperty(S)&&(E!=null||ee!=null))switch(S){case"value":ye=E;break;case"defaultValue":H=E;break;case"multiple":O=E;default:E!==ee&&$n(r,o,S,E,g,ee)}o=H,f=O,g=ke,ye!=null?Ss(r,!!f,ye,!1):!!g!=!!f&&(o!=null?Ss(r,!!f,o,!0):Ss(r,!!f,f?[]:"",!1));return;case"textarea":ke=ye=null;for(H in f)if(S=f[H],f.hasOwnProperty(H)&&S!=null&&!g.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:$n(r,o,H,null,g,S)}for(O in g)if(S=g[O],E=f[O],g.hasOwnProperty(O)&&(S!=null||E!=null))switch(O){case"value":ye=S;break;case"defaultValue":ke=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(n(91));break;default:S!==E&&$n(r,o,O,S,g,E)}jn(r,ye,ke);return;case"option":for(var Mt in f)ye=f[Mt],f.hasOwnProperty(Mt)&&ye!=null&&!g.hasOwnProperty(Mt)&&(Mt==="selected"?r.selected=!1:$n(r,o,Mt,null,g,ye));for(ee in g)ye=g[ee],ke=f[ee],g.hasOwnProperty(ee)&&ye!==ke&&(ye!=null||ke!=null)&&(ee==="selected"?r.selected=ye&&typeof ye!="function"&&typeof ye!="symbol":$n(r,o,ee,ye,g,ke));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Bt in f)ye=f[Bt],f.hasOwnProperty(Bt)&&ye!=null&&!g.hasOwnProperty(Bt)&&$n(r,o,Bt,null,g,ye);for(xe in g)if(ye=g[xe],ke=f[xe],g.hasOwnProperty(xe)&&ye!==ke&&(ye!=null||ke!=null))switch(xe){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(n(137,o));break;default:$n(r,o,xe,ye,g,ke)}return;default:if(_r(o)){for(var Yn in f)ye=f[Yn],f.hasOwnProperty(Yn)&&ye!==void 0&&!g.hasOwnProperty(Yn)&&a_(r,o,Yn,void 0,g,ye);for(Re in g)ye=g[Re],ke=f[Re],!g.hasOwnProperty(Re)||ye===ke||ye===void 0&&ke===void 0||a_(r,o,Re,ye,g,ke);return}}for(var de in f)ye=f[de],f.hasOwnProperty(de)&&ye!=null&&!g.hasOwnProperty(de)&&$n(r,o,de,null,g,ye);for(Ue in g)ye=g[Ue],ke=f[Ue],!g.hasOwnProperty(Ue)||ye===ke||ye==null&&ke==null||$n(r,o,Ue,ye,g,ke)}function HS(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function E3(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var S=f[g],E=S.transferSize,O=S.initiatorType,H=S.duration;if(E&&H&&HS(O)){for(O=0,H=S.responseEnd,g+=1;g<f.length;g++){var ee=f[g],xe=ee.startTime;if(xe>H)break;var Re=ee.transferSize,Ue=ee.initiatorType;Re&&HS(Ue)&&(ee=ee.responseEnd,O+=Re*(ee<H?1:(H-xe)/(ee-xe)))}if(--g,o+=8*(E+O)/(S.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var o_=null,l_=null;function Ax(r){return r.nodeType===9?r:r.ownerDocument}function GS(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qS(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function c_(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var u_=null;function N3(){var r=window.event;return r&&r.type==="popstate"?r===u_?!1:(u_=r,!0):(u_=null,!1)}var WS=typeof setTimeout=="function"?setTimeout:void 0,T3=typeof clearTimeout=="function"?clearTimeout:void 0,XS=typeof Promise=="function"?Promise:void 0,A3=typeof queueMicrotask=="function"?queueMicrotask:typeof XS<"u"?function(r){return XS.resolve(null).then(r).catch(k3)}:WS;function k3(r){setTimeout(function(){throw r})}function Yc(r){return r==="head"}function $S(r,o){var f=o,g=0;do{var S=f.nextSibling;if(r.removeChild(f),S&&S.nodeType===8)if(f=S.data,f==="/$"||f==="/&"){if(g===0){r.removeChild(S),lf(o);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")Rm(r.ownerDocument.documentElement);else if(f==="head"){f=r.ownerDocument.head,Rm(f);for(var E=f.firstChild;E;){var O=E.nextSibling,H=E.nodeName;E[Yr]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&E.rel.toLowerCase()==="stylesheet"||f.removeChild(E),E=O}}else f==="body"&&Rm(r.ownerDocument.body);f=S}while(f);lf(o)}function YS(r,o){var f=r;r=0;do{var g=f.nextSibling;if(f.nodeType===1?o?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(o?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(r===0)break;r--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||r++;f=g}while(f)}function d_(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var f=o;switch(o=o.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":d_(f),Xa(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}r.removeChild(f)}}function C3(r,o,f,g){for(;r.nodeType===1;){var S=f;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!g&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(g){if(!r[Yr])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(E=r.getAttribute("rel"),E==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(E!==S.rel||r.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||r.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||r.getAttribute("title")!==(S.title==null?null:S.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(E=r.getAttribute("src"),(E!==(S.src==null?null:S.src)||r.getAttribute("type")!==(S.type==null?null:S.type)||r.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&E&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var E=S.name==null?null:""+S.name;if(S.type==="hidden"&&r.getAttribute("name")===E)return r}else return r;if(r=Oa(r.nextSibling),r===null)break}return null}function R3(r,o,f){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!f||(r=Oa(r.nextSibling),r===null))return null;return r}function KS(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Oa(r.nextSibling),r===null))return null;return r}function h_(r){return r.data==="$?"||r.data==="$~"}function f_(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function j3(r,o){var f=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||f.readyState!=="loading")o();else{var g=function(){o(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),r._reactRetry=g}}function Oa(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var p_=null;function ZS(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var f=r.data;if(f==="/$"||f==="/&"){if(o===0)return Oa(r.nextSibling);o--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||o++}r=r.nextSibling}return null}function JS(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var f=r.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(o===0)return r;o--}else f!=="/$"&&f!=="/&"||o++}r=r.previousSibling}return null}function QS(r,o,f){switch(o=Ax(f),r){case"html":if(r=o.documentElement,!r)throw Error(n(452));return r;case"head":if(r=o.head,!r)throw Error(n(453));return r;case"body":if(r=o.body,!r)throw Error(n(454));return r;default:throw Error(n(451))}}function Rm(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Xa(r)}var La=new Map,eM=new Set;function kx(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Kl=Z.d;Z.d={f:D3,r:I3,D:O3,C:L3,L:U3,m:P3,X:B3,S:z3,M:F3};function D3(){var r=Kl.f(),o=ta();return r||o}function I3(r){var o=Ya(r);o!==null&&o.tag===5&&o.type==="form"?dx(o):Kl.r(r)}var rf=typeof document>"u"?null:document;function tM(r,o,f){var g=rf;if(g&&typeof o=="string"&&o){var S=zt(o);S='link[rel="'+r+'"][href="'+S+'"]',typeof f=="string"&&(S+='[crossorigin="'+f+'"]'),eM.has(S)||(eM.add(S),r={rel:r,crossOrigin:f,href:o},g.querySelector(S)===null&&(o=g.createElement("link"),Ds(o,"link",r),V(o),g.head.appendChild(o)))}}function O3(r){Kl.D(r),tM("dns-prefetch",r,null)}function L3(r,o){Kl.C(r,o),tM("preconnect",r,o)}function U3(r,o,f){Kl.L(r,o,f);var g=rf;if(g&&r&&o){var S='link[rel="preload"][as="'+zt(o)+'"]';o==="image"&&f&&f.imageSrcSet?(S+='[imagesrcset="'+zt(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(S+='[imagesizes="'+zt(f.imageSizes)+'"]')):S+='[href="'+zt(r)+'"]';var E=S;switch(o){case"style":E=af(r);break;case"script":E=of(r)}La.has(E)||(r=b({rel:"preload",href:o==="image"&&f&&f.imageSrcSet?void 0:r,as:o},f),La.set(E,r),g.querySelector(S)!==null||o==="style"&&g.querySelector(jm(E))||o==="script"&&g.querySelector(Dm(E))||(o=g.createElement("link"),Ds(o,"link",r),V(o),g.head.appendChild(o)))}}function P3(r,o){Kl.m(r,o);var f=rf;if(f&&r){var g=o&&typeof o.as=="string"?o.as:"script",S='link[rel="modulepreload"][as="'+zt(g)+'"][href="'+zt(r)+'"]',E=S;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=of(r)}if(!La.has(E)&&(r=b({rel:"modulepreload",href:r},o),La.set(E,r),f.querySelector(S)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Dm(E)))return}g=f.createElement("link"),Ds(g,"link",r),V(g),f.head.appendChild(g)}}}function z3(r,o,f){Kl.S(r,o,f);var g=rf;if(g&&r){var S=ha(g).hoistableStyles,E=af(r);o=o||"default";var O=S.get(E);if(!O){var H={loading:0,preload:null};if(O=g.querySelector(jm(E)))H.loading=5;else{r=b({rel:"stylesheet",href:r,"data-precedence":o},f),(f=La.get(E))&&m_(r,f);var ee=O=g.createElement("link");V(ee),Ds(ee,"link",r),ee._p=new Promise(function(xe,Re){ee.onload=xe,ee.onerror=Re}),ee.addEventListener("load",function(){H.loading|=1}),ee.addEventListener("error",function(){H.loading|=2}),H.loading|=4,Cx(O,o,g)}O={type:"stylesheet",instance:O,count:1,state:H},S.set(E,O)}}}function B3(r,o){Kl.X(r,o);var f=rf;if(f&&r){var g=ha(f).hoistableScripts,S=of(r),E=g.get(S);E||(E=f.querySelector(Dm(S)),E||(r=b({src:r,async:!0},o),(o=La.get(S))&&g_(r,o),E=f.createElement("script"),V(E),Ds(E,"link",r),f.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},g.set(S,E))}}function F3(r,o){Kl.M(r,o);var f=rf;if(f&&r){var g=ha(f).hoistableScripts,S=of(r),E=g.get(S);E||(E=f.querySelector(Dm(S)),E||(r=b({src:r,async:!0,type:"module"},o),(o=La.get(S))&&g_(r,o),E=f.createElement("script"),V(E),Ds(E,"link",r),f.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},g.set(S,E))}}function nM(r,o,f,g){var S=(S=me.current)?kx(S):null;if(!S)throw Error(n(446));switch(r){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(o=af(f.href),f=ha(S).hoistableStyles,g=f.get(o),g||(g={type:"style",instance:null,count:0,state:null},f.set(o,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){r=af(f.href);var E=ha(S).hoistableStyles,O=E.get(r);if(O||(S=S.ownerDocument||S,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(r,O),(E=S.querySelector(jm(r)))&&!E._p&&(O.instance=E,O.state.loading=5),La.has(r)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},La.set(r,f),E||V3(S,r,f,O.state))),o&&g===null)throw Error(n(528,""));return O}if(o&&g!==null)throw Error(n(529,""));return null;case"script":return o=f.async,f=f.src,typeof f=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=of(f),f=ha(S).hoistableScripts,g=f.get(o),g||(g={type:"script",instance:null,count:0,state:null},f.set(o,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,r))}}function af(r){return'href="'+zt(r)+'"'}function jm(r){return'link[rel="stylesheet"]['+r+"]"}function iM(r){return b({},r,{"data-precedence":r.precedence,precedence:null})}function V3(r,o,f,g){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?g.loading=1:(o=r.createElement("link"),g.preload=o,o.addEventListener("load",function(){return g.loading|=1}),o.addEventListener("error",function(){return g.loading|=2}),Ds(o,"link",f),V(o),r.head.appendChild(o))}function of(r){return'[src="'+zt(r)+'"]'}function Dm(r){return"script[async]"+r}function sM(r,o,f){if(o.count++,o.instance===null)switch(o.type){case"style":var g=r.querySelector('style[data-href~="'+zt(f.href)+'"]');if(g)return o.instance=g,V(g),g;var S=b({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(r.ownerDocument||r).createElement("style"),V(g),Ds(g,"style",S),Cx(g,f.precedence,r),o.instance=g;case"stylesheet":S=af(f.href);var E=r.querySelector(jm(S));if(E)return o.state.loading|=4,o.instance=E,V(E),E;g=iM(f),(S=La.get(S))&&m_(g,S),E=(r.ownerDocument||r).createElement("link"),V(E);var O=E;return O._p=new Promise(function(H,ee){O.onload=H,O.onerror=ee}),Ds(E,"link",g),o.state.loading|=4,Cx(E,f.precedence,r),o.instance=E;case"script":return E=of(f.src),(S=r.querySelector(Dm(E)))?(o.instance=S,V(S),S):(g=f,(S=La.get(E))&&(g=b({},f),g_(g,S)),r=r.ownerDocument||r,S=r.createElement("script"),V(S),Ds(S,"link",g),r.head.appendChild(S),o.instance=S);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(g=o.instance,o.state.loading|=4,Cx(g,f.precedence,r));return o.instance}function Cx(r,o,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=g.length?g[g.length-1]:null,E=S,O=0;O<g.length;O++){var H=g[O];if(H.dataset.precedence===o)E=H;else if(E!==S)break}E?E.parentNode.insertBefore(r,E.nextSibling):(o=f.nodeType===9?f.head:f,o.insertBefore(r,o.firstChild))}function m_(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function g_(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var Rx=null;function rM(r,o,f){if(Rx===null){var g=new Map,S=Rx=new Map;S.set(f,g)}else S=Rx,g=S.get(f),g||(g=new Map,S.set(f,g));if(g.has(r))return g;for(g.set(r,null),f=f.getElementsByTagName(r),S=0;S<f.length;S++){var E=f[S];if(!(E[Yr]||E[ai]||r==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var O=E.getAttribute(o)||"";O=r+O;var H=g.get(O);H?H.push(E):g.set(O,[E])}}return g}function aM(r,o,f){r=r.ownerDocument||r,r.head.insertBefore(f,o==="title"?r.querySelector("head > title"):null)}function H3(r,o,f){if(f===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(r=o.disabled,typeof o.precedence=="string"&&r==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function oM(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function G3(r,o,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var S=af(g.href),E=o.querySelector(jm(S));if(E){o=E._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=jx.bind(r),o.then(r,r)),f.state.loading|=4,f.instance=E,V(E);return}E=o.ownerDocument||o,g=iM(g),(S=La.get(S))&&m_(g,S),E=E.createElement("link"),V(E);var O=E;O._p=new Promise(function(H,ee){O.onload=H,O.onerror=ee}),Ds(E,"link",g),f.instance=E}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(f,o),(o=f.state.preload)&&(f.state.loading&3)===0&&(r.count++,f=jx.bind(r),o.addEventListener("load",f),o.addEventListener("error",f))}}var x_=0;function q3(r,o){return r.stylesheets&&r.count===0&&Ix(r,r.stylesheets),0<r.count||0<r.imgCount?function(f){var g=setTimeout(function(){if(r.stylesheets&&Ix(r,r.stylesheets),r.unsuspend){var E=r.unsuspend;r.unsuspend=null,E()}},6e4+o);0<r.imgBytes&&x_===0&&(x_=62500*E3());var S=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Ix(r,r.stylesheets),r.unsuspend)){var E=r.unsuspend;r.unsuspend=null,E()}},(r.imgBytes>x_?50:800)+o);return r.unsuspend=f,function(){r.unsuspend=null,clearTimeout(g),clearTimeout(S)}}:null}function jx(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ix(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Dx=null;function Ix(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Dx=new Map,o.forEach(W3,r),Dx=null,jx.call(r))}function W3(r,o){if(!(o.state.loading&4)){var f=Dx.get(r);if(f)var g=f.get(null);else{f=new Map,Dx.set(r,f);for(var S=r.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<S.length;E++){var O=S[E];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(f.set(O.dataset.precedence,O),g=O)}g&&f.set(null,g)}S=o.instance,O=S.getAttribute("data-precedence"),E=f.get(O)||g,E===g&&f.set(null,S),f.set(O,S),this.count++,g=jx.bind(this),S.addEventListener("load",g),S.addEventListener("error",g),E?E.parentNode.insertBefore(S,E.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(S,r.firstChild)),o.state.loading|=4}}var Im={$$typeof:R,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function X3(r,o,f,g,S,E,O,H,ee){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Sn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sn(0),this.hiddenUpdates=Sn(null),this.identifierPrefix=g,this.onUncaughtError=S,this.onCaughtError=E,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ee,this.incompleteTransitions=new Map}function lM(r,o,f,g,S,E,O,H,ee,xe,Re,Ue){return r=new X3(r,o,f,O,ee,xe,Re,Ue,H),o=1,E===!0&&(o|=24),E=oi(3,null,null,o),r.current=E,E.stateNode=r,o=Pp(),o.refCount++,r.pooledCache=o,o.refCount++,E.memoizedState={element:g,isDehydrated:f,cache:o},Yu(E),r}function cM(r){return r?(r=Oo,r):Oo}function uM(r,o,f,g,S,E){S=cM(S),g.context===null?g.context=S:g.pendingContext=S,g=so(o),g.payload={element:f},E=E===void 0?null:E,E!==null&&(g.callback=E),f=Ho(r,g,o),f!==null&&(on(f,r,o),Go(f,r,o))}function dM(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var f=r.retryLane;r.retryLane=f!==0&&f<o?f:o}}function v_(r,o){dM(r,o),(r=r.alternate)&&dM(r,o)}function hM(r){if(r.tag===13||r.tag===31){var o=Ns(r,67108864);o!==null&&on(o,r,67108864),v_(r,67108864)}}function fM(r){if(r.tag===13||r.tag===31){var o=pr();o=Ao(o);var f=Ns(r,o);f!==null&&on(f,r,o),v_(r,o)}}var Ox=!0;function $3(r,o,f,g){var S=X.T;X.T=null;var E=Z.p;try{Z.p=2,b_(r,o,f,g)}finally{Z.p=E,X.T=S}}function Y3(r,o,f,g){var S=X.T;X.T=null;var E=Z.p;try{Z.p=8,b_(r,o,f,g)}finally{Z.p=E,X.T=S}}function b_(r,o,f,g){if(Ox){var S=y_(g);if(S===null)r_(r,o,g,Lx,f),mM(r,g);else if(Z3(S,r,o,f,g))g.stopPropagation();else if(mM(r,g),o&4&&-1<K3.indexOf(r)){for(;S!==null;){var E=Ya(S);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var O=He(E.pendingLanes);if(O!==0){var H=E;for(H.pendingLanes|=2,H.entangledLanes|=2;O;){var ee=1<<31-ht(O);H.entanglements[1]|=ee,O&=~ee}qe(E),(At&6)===0&&(wi=B()+500,xt(0))}}break;case 31:case 13:H=Ns(E,2),H!==null&&on(H,E,2),ta(),v_(E,2)}if(E=y_(g),E===null&&r_(r,o,g,Lx,f),E===S)break;S=E}S!==null&&g.stopPropagation()}else r_(r,o,g,null,f)}}function y_(r){return r=ih(r),__(r)}var Lx=null;function __(r){if(Lx=null,r=$a(r),r!==null){var o=a(r);if(o===null)r=null;else{var f=o.tag;if(f===13){if(r=u(o),r!==null)return r;r=null}else if(f===31){if(r=h(o),r!==null)return r;r=null}else if(f===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return Lx=r,null}function pM(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(oe()){case Te:return 2;case Le:return 8;case Ae:case pt:return 32;case Je:return 268435456;default:return 32}default:return 32}}var w_=!1,Kc=null,Zc=null,Jc=null,Om=new Map,Lm=new Map,Qc=[],K3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mM(r,o){switch(r){case"focusin":case"focusout":Kc=null;break;case"dragenter":case"dragleave":Zc=null;break;case"mouseover":case"mouseout":Jc=null;break;case"pointerover":case"pointerout":Om.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lm.delete(o.pointerId)}}function Um(r,o,f,g,S,E){return r===null||r.nativeEvent!==E?(r={blockedOn:o,domEventName:f,eventSystemFlags:g,nativeEvent:E,targetContainers:[S]},o!==null&&(o=Ya(o),o!==null&&hM(o)),r):(r.eventSystemFlags|=g,o=r.targetContainers,S!==null&&o.indexOf(S)===-1&&o.push(S),r)}function Z3(r,o,f,g,S){switch(o){case"focusin":return Kc=Um(Kc,r,o,f,g,S),!0;case"dragenter":return Zc=Um(Zc,r,o,f,g,S),!0;case"mouseover":return Jc=Um(Jc,r,o,f,g,S),!0;case"pointerover":var E=S.pointerId;return Om.set(E,Um(Om.get(E)||null,r,o,f,g,S)),!0;case"gotpointercapture":return E=S.pointerId,Lm.set(E,Um(Lm.get(E)||null,r,o,f,g,S)),!0}return!1}function gM(r){var o=$a(r.target);if(o!==null){var f=a(o);if(f!==null){if(o=f.tag,o===13){if(o=u(f),o!==null){r.blockedOn=o,fs(r.priority,function(){fM(f)});return}}else if(o===31){if(o=h(f),o!==null){r.blockedOn=o,fs(r.priority,function(){fM(f)});return}}else if(o===3&&f.stateNode.current.memoizedState.isDehydrated){r.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ux(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var f=y_(r.nativeEvent);if(f===null){f=r.nativeEvent;var g=new f.constructor(f.type,f);nh=g,f.target.dispatchEvent(g),nh=null}else return o=Ya(f),o!==null&&hM(o),r.blockedOn=f,!1;o.shift()}return!0}function xM(r,o,f){Ux(r)&&f.delete(o)}function J3(){w_=!1,Kc!==null&&Ux(Kc)&&(Kc=null),Zc!==null&&Ux(Zc)&&(Zc=null),Jc!==null&&Ux(Jc)&&(Jc=null),Om.forEach(xM),Lm.forEach(xM)}function Px(r,o){r.blockedOn===o&&(r.blockedOn=null,w_||(w_=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,J3)))}var zx=null;function vM(r){zx!==r&&(zx=r,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){zx===r&&(zx=null);for(var o=0;o<r.length;o+=3){var f=r[o],g=r[o+1],S=r[o+2];if(typeof g!="function"){if(__(g||f)===null)continue;break}var E=Ya(f);E!==null&&(r.splice(o,3),o-=3,dm(E,{pending:!0,data:S,method:f.method,action:g},g,S))}}))}function lf(r){function o(ee){return Px(ee,r)}Kc!==null&&Px(Kc,r),Zc!==null&&Px(Zc,r),Jc!==null&&Px(Jc,r),Om.forEach(o),Lm.forEach(o);for(var f=0;f<Qc.length;f++){var g=Qc[f];g.blockedOn===r&&(g.blockedOn=null)}for(;0<Qc.length&&(f=Qc[0],f.blockedOn===null);)gM(f),f.blockedOn===null&&Qc.shift();if(f=(r.ownerDocument||r).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var S=f[g],E=f[g+1],O=S[Pi]||null;if(typeof E=="function")O||vM(f);else if(O){var H=null;if(E&&E.hasAttribute("formAction")){if(S=E,O=E[Pi]||null)H=O.formAction;else if(__(S)!==null)continue}else H=O.action;typeof H=="function"?f[g+1]=H:(f.splice(g,3),g-=3),vM(f)}}}function bM(){function r(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(O){return S=O})},focusReset:"manual",scroll:"manual"})}function o(){S!==null&&(S(),S=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,S=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),S!==null&&(S(),S=null)}}}function S_(r){this._internalRoot=r}Bx.prototype.render=S_.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(n(409));var f=o.current,g=pr();uM(f,g,r,o,null,null)},Bx.prototype.unmount=S_.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;uM(r.current,2,null,r,null,null),ta(),o[nr]=null}};function Bx(r){this._internalRoot=r}Bx.prototype.unstable_scheduleHydration=function(r){if(r){var o=bl();r={blockedOn:null,target:r,priority:o};for(var f=0;f<Qc.length&&o!==0&&o<Qc[f].priority;f++);Qc.splice(f,0,r),f===0&&gM(r)}};var yM=e.version;if(yM!=="19.2.3")throw Error(n(527,yM,"19.2.3"));Z.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=m(o),r=r!==null?v(r):null,r=r===null?null:r.stateNode,r};var Q3={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fx.isDisabled&&Fx.supportsFiber)try{Ve=Fx.inject(Q3),$e=Fx}catch{}}return zm.createRoot=function(r,o){if(!s(r))throw Error(n(299));var f=!1,g="",S=vx,E=xm,O=vm;return o!=null&&(o.unstable_strictMode===!0&&(f=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(S=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(O=o.onRecoverableError)),o=lM(r,1,!1,null,null,f,g,null,S,E,O,bM),r[nr]=o.current,s_(r),new S_(o)},zm.hydrateRoot=function(r,o,f){if(!s(r))throw Error(n(299));var g=!1,S="",E=vx,O=xm,H=vm,ee=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(S=f.identifierPrefix),f.onUncaughtError!==void 0&&(E=f.onUncaughtError),f.onCaughtError!==void 0&&(O=f.onCaughtError),f.onRecoverableError!==void 0&&(H=f.onRecoverableError),f.formState!==void 0&&(ee=f.formState)),o=lM(r,1,!0,o,f??null,g,S,ee,E,O,H,bM),o.context=cM(null),f=o.current,g=pr(),g=Ao(g),S=so(g),S.callback=null,Ho(f,S,g),f=g,o.current.lanes=f,is(o,f),qe(o),r[nr]=o.current,s_(r),new Bx(o)},zm.version="19.2.3",zm}var CM;function uC(){if(CM)return N_.exports;CM=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),N_.exports=cC(),N_.exports}var dC=uC();const hC=Kb(dC);var Se=(i=>(i.HOME="HOME",i.ABOUT="ABOUT",i.CHAT="CHAT",i.THERAPY="THERAPY",i.GROUP_THERAPY="GROUP_THERAPY",i.GESTALT_TRAINING="GESTALT_TRAINING",i.BEHANDLINGS_ASSISTENT="BEHANDLINGS_ASSISTENT",i.BLOG="BLOG",i.COMMUNITY="COMMUNITY",i.CONTACT="CONTACT",i.SURVEY="SURVEY",i.DOWNLOADS="DOWNLOADS",i.LOGIN="LOGIN",i.GEMENSKAP_APP="GEMENSKAP_APP",i.BOOK="BOOK",i.CHECKOUT="CHECKOUT",i.PRIVACY="PRIVACY",i.TERMS="TERMS",i.COOKIE_POLICY="COOKIE_POLICY",i.PREMIUM_APPLICATION="PREMIUM_APPLICATION",i.FREE_REGISTRATION="FREE_REGISTRATION",i))(Se||{});const fC=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cT=(...i)=>i.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();var pC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const mC=ie.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:u,...h},p)=>ie.createElement("svg",{ref:p,...pC,width:e,height:e,stroke:i,strokeWidth:n?Number(t)*24/Number(e):t,className:cT("lucide",s),...h},[...u.map(([m,v])=>ie.createElement(m,v)),...Array.isArray(a)?a:[a]]));const it=(i,e)=>{const t=ie.forwardRef(({className:n,...s},a)=>ie.createElement(mC,{ref:a,iconNode:e,className:cT(`lucide-${fC(i)}`,n),...s}));return t.displayName=`${i}`,t};const gC=it("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);const uT=it("Anchor",[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]]);const So=it("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const us=it("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const jd=it("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);const ng=it("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const Jb=it("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const C_=it("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);const xC=it("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);const dT=it("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);const Ba=it("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const hT=it("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const vC=it("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);const bC=it("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const qv=it("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Wv=it("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const Gd=it("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const fT=it("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const yC=it("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const lc=it("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const bg=it("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const _C=it("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const wC=it("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);const SC=it("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);const pT=it("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const R_=it("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const MC=it("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const mT=it("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const EC=it("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);const gT=it("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const NC=it("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);const yg=it("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const TC=it("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);const AC=it("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);const kC=it("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);const Ha=it("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const RM=it("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const Xg=it("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const CC=it("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);const V1=it("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);const RC=it("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);const jC=it("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);const Tw=it("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const qd=it("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const jM=it("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);const DM=it("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const ap=it("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const Qb=it("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const DC=it("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const xT=it("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Xv=it("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const Aw=it("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const IC=it("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);const OC=it("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);const $v=it("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const LC=it("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);const vT=it("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const UC=it("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);const PC=it("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const H1=it("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const zC=it("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);const BC=it("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);const FC=it("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);const IM=it("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const ml=it("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const VC=it("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const hl=it("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const la=it("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const kw=it("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);const HC=it("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);const ua=it("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const _g=it("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);const G1=it("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const ey=it("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const bT=it("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const GC=it("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);const qC=it("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);const q1=it("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const yT=it("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const WC=it("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);const ws=it("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const OM=it("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const LM=it("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);const Mu=it("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const XC=it("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),$C=({currentPage:i,setPage:e,isDarkMode:t,toggleTheme:n})=>{const[s,a]=ie.useState(!1),[u,h]=ie.useState(!1),[p,m]=ie.useState(!1),v=ie.useRef(null),b=ie.useRef(null),y=k=>{e(k),a(!1),h(!1),m(!1)};ie.useEffect(()=>{const k=T=>{v.current&&!v.current.contains(T.target)&&h(!1),b.current&&!b.current.contains(T.target)&&m(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const w=[Se.CHAT,Se.THERAPY,Se.GROUP_THERAPY,Se.GESTALT_TRAINING,Se.BEHANDLINGS_ASSISTENT].includes(i),M=[Se.COMMUNITY,Se.SURVEY,Se.DOWNLOADS].includes(i);return l.jsx("header",{className:"p-4 md:p-5",children:l.jsx("div",{className:"max-w-[1600px] mx-auto",children:l.jsxs("nav",{className:"glass bg-white/15 backdrop-blur-xl border border-white/20 rounded-2xl shadow-lg flex justify-between items-center px-8 py-4 relative z-50",children:[l.jsxs("button",{className:"flex items-center gap-4 cursor-pointer group rounded-lg focus:outline-none",onClick:()=>y(Se.HOME),children:[l.jsx("div",{className:"w-16 h-16 flex items-center justify-center transition-all duration-500 group-hover:scale-110 group-hover:rotate-3",children:l.jsx("img",{src:"/assets/logo2.png",alt:"Logo",className:"w-full h-full object-contain opacity-90 group-hover:opacity-100"})}),l.jsxs("span",{className:"text-xl md:text-2xl font-bold text-white drop-shadow-md hidden sm:block tracking-tight",children:["Klttertrdet ",l.jsx("span",{className:"text-orange-400 font-light mx-1",children:"&"})," Horizonten"]})]}),l.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[l.jsx("button",{onClick:()=>y(Se.HOME),className:`px-4 py-2 rounded-xl transition-all font-medium ${i===Se.HOME?"bg-white/20 text-white shadow-sm":"text-white/80 hover:bg-white/10 hover:text-white"}`,children:"Hem"}),l.jsx("button",{onClick:()=>y(Se.ABOUT),className:`px-4 py-2 rounded-xl transition-all font-medium ${i===Se.ABOUT?"bg-white/20 text-white shadow-sm":"text-white/80 hover:bg-white/10 hover:text-white"}`,children:"Om oss"}),l.jsxs("div",{className:"relative",ref:v,children:[l.jsxs("button",{onMouseEnter:()=>{h(!0),m(!1)},onClick:()=>h(!u),className:`flex items-center gap-1 px-4 py-2 rounded-xl transition-all font-medium ${w?"bg-white/20 text-white shadow-sm":"text-white/80 hover:bg-white/10 hover:text-white"}`,children:["Tjnster ",l.jsx(qv,{size:16,className:`transition-transform duration-300 ${u?"rotate-180":""}`})]}),u&&l.jsxs("div",{className:"absolute top-full left-0 mt-3 w-80 glass bg-black/90 backdrop-blur-2xl border border-white/20 rounded-2xl shadow-2xl p-4 animate-fade-in flex flex-col gap-4",onMouseLeave:()=>h(!1),children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 px-3 mb-2 text-white/40 text-[10px] uppercase tracking-widest font-bold",children:[l.jsx(Jb,{size:12})," Utbildningar"]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("button",{onClick:()=>y(Se.BEHANDLINGS_ASSISTENT),className:`w-full text-left px-3 py-2 rounded-xl transition-colors flex flex-col ${i===Se.BEHANDLINGS_ASSISTENT?"bg-orange-600/20 text-orange-400":"hover:bg-white/5 text-white/90"}`,children:[l.jsx("span",{className:"font-bold text-sm",children:"Behandlingsassistent"}),l.jsx("span",{className:"text-[10px] opacity-60",children:"Yrkesutbildning"})]}),l.jsxs("button",{onClick:()=>y(Se.CHAT),className:`w-full text-left px-3 py-2 rounded-xl transition-colors flex flex-col ${i===Se.CHAT?"bg-orange-600/20 text-orange-400":"hover:bg-white/5 text-white/90"}`,children:[l.jsx("span",{className:"font-bold text-sm",children:"Myndighetsinducerat trauma"}),l.jsx("span",{className:"text-[10px] opacity-60",children:"Specialistutbildning (MiT)"})]}),l.jsxs("button",{onClick:()=>y(Se.GESTALT_TRAINING),className:`w-full text-left px-3 py-2 rounded-xl transition-colors flex flex-col ${i===Se.GESTALT_TRAINING?"bg-orange-600/20 text-orange-400":"hover:bg-white/5 text-white/90"}`,children:[l.jsx("span",{className:"font-bold text-sm",children:"Gestaltterapi"}),l.jsx("span",{className:"text-[10px] opacity-60",children:"Grundutbildning & metodik"})]})]})]}),l.jsx("div",{className:"h-px bg-white/10 mx-2"}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 px-3 mb-2 text-white/40 text-[10px] uppercase tracking-widest font-bold",children:[l.jsx(Ha,{size:12})," Terapi"]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("button",{onClick:()=>y(Se.THERAPY),className:`w-full text-left px-3 py-2 rounded-xl transition-colors flex flex-col ${i===Se.THERAPY?"bg-orange-600/20 text-orange-400":"hover:bg-white/5 text-white/90"}`,children:[l.jsx("span",{className:"font-bold text-sm",children:"Enskild Terapi"}),l.jsx("span",{className:"text-[10px] opacity-60",children:"Std & utveckling"})]}),l.jsxs("button",{onClick:()=>y(Se.GROUP_THERAPY),className:`w-full text-left px-3 py-2 rounded-xl transition-colors flex flex-col ${i===Se.GROUP_THERAPY?"bg-orange-600/20 text-orange-400":"hover:bg-white/5 text-white/90"}`,children:[l.jsx("span",{className:"font-bold text-sm",children:"Grupp- och parterapi"}),l.jsx("span",{className:"text-[10px] opacity-60",children:"Gemensam lkning"})]})]})]})]})]}),l.jsxs("div",{className:"relative",ref:b,children:[l.jsxs("button",{onMouseEnter:()=>{m(!0),h(!1)},onClick:()=>m(!p),className:`flex items-center gap-1 px-4 py-2 rounded-xl transition-all font-medium ${M?"bg-white/20 text-white shadow-sm":"text-white/80 hover:bg-white/10 hover:text-white"}`,children:["Resurser ",l.jsx(qv,{size:16,className:`transition-transform duration-300 ${p?"rotate-180":""}`})]}),p&&l.jsxs("div",{className:"absolute top-full left-0 mt-3 w-72 glass bg-black/90 backdrop-blur-2xl border border-white/20 rounded-2xl shadow-2xl p-4 animate-fade-in flex flex-col gap-2",onMouseLeave:()=>m(!1),children:[l.jsxs("div",{className:"flex items-center gap-2 px-3 mb-1 text-white/40 text-[10px] uppercase tracking-widest font-bold",children:[l.jsx(jC,{size:12})," Bibliotek & Verktyg"]}),l.jsxs("button",{onClick:()=>y(Se.COMMUNITY),className:`w-full text-left px-3 py-3 rounded-xl transition-colors flex items-center gap-3 ${i===Se.COMMUNITY?"bg-amber-600/20 text-amber-400":"hover:bg-white/5 text-white/90"}`,children:[l.jsx("div",{className:"p-2 bg-white/5 rounded-lg",children:l.jsx(ws,{size:18})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-bold text-sm",children:"Gemenskap"}),l.jsx("span",{className:"text-[10px] opacity-60",children:"Appen & community"})]})]}),l.jsxs("button",{onClick:()=>y(Se.SURVEY),className:`w-full text-left px-3 py-3 rounded-xl transition-colors flex items-center gap-3 ${i===Se.SURVEY?"bg-blue-600/20 text-blue-400":"hover:bg-white/5 text-white/90"}`,children:[l.jsx("div",{className:"p-2 bg-white/5 rounded-lg",children:l.jsx(SC,{size:18})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-bold text-sm",children:"Enkt och utredning"}),l.jsx("span",{className:"text-[10px] opacity-60",children:"Kraftsamling fr barnens bsta"})]})]}),l.jsxs("button",{onClick:()=>y(Se.DOWNLOADS),className:`w-full text-left px-3 py-3 rounded-xl transition-colors flex items-center gap-3 ${i===Se.DOWNLOADS?"bg-emerald-600/20 text-emerald-400":"hover:bg-white/5 text-white/90"}`,children:[l.jsx("div",{className:"p-2 bg-white/5 rounded-lg",children:l.jsx(mT,{size:18})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-bold text-sm",children:"Nedladdningar"}),l.jsx("span",{className:"text-[10px] opacity-60",children:"E-bcker & material"})]})]})]})]}),l.jsx("button",{onClick:()=>y(Se.BLOG),className:`px-4 py-2 rounded-xl transition-all font-medium ${i===Se.BLOG?"bg-white/20 text-white shadow-sm":"text-white/80 hover:bg-white/10 hover:text-white"}`,children:"Blogg"}),l.jsx("button",{onClick:()=>y(Se.CONTACT),className:`px-4 py-2 rounded-xl transition-all font-medium ${i===Se.CONTACT?"bg-white/20 text-white shadow-sm":"text-white/80 hover:bg-white/10 hover:text-white"}`,children:"Kontakt & bokning"}),l.jsxs("div",{className:"relative group/badge",children:[l.jsxs("button",{onClick:()=>y(Se.LOGIN),className:`px-4 py-2 rounded-xl transition-all font-medium flex items-center gap-2 ${i===Se.LOGIN?"bg-orange-600/20 text-orange-400 shadow-sm":"text-white/80 hover:bg-white/10 hover:text-white"}`,children:[l.jsx(jM,{size:18})," Logga in"]}),l.jsx("div",{className:"absolute -top-3 -right-3 pointer-events-none",children:l.jsx("div",{className:"bg-red-600 text-[7px] font-black text-white px-2 py-1 rounded-lg shadow-[0_4px_12px_rgba(220,38,38,0.5)] animate-pulse whitespace-nowrap uppercase tracking-widest border border-white/20 -rotate-6 group-hover/badge:rotate-0 transition-transform duration-500",children:"Nytt frn oss"})})]}),l.jsx("div",{className:"w-px h-6 bg-white/20 mx-2"}),l.jsx("button",{onClick:n,className:"p-3 rounded-xl text-white/80 hover:bg-white/10 hover:text-white transition-all hover:scale-105",children:t?l.jsx(G1,{size:20}):l.jsx($v,{size:20})})]}),l.jsxs("div",{className:"md:hidden flex items-center gap-4",children:[l.jsx("button",{onClick:n,className:"p-2 text-white/80",children:t?l.jsx(G1,{size:24}):l.jsx($v,{size:24})}),l.jsx("button",{onClick:()=>a(!s),className:"text-white p-2",children:s?l.jsx(Mu,{size:28}):l.jsx(xT,{size:28})})]}),s&&l.jsx("div",{className:"absolute top-full left-0 w-full mt-4 p-4 md:hidden",children:l.jsxs("div",{className:"glass bg-black/95 backdrop-blur-3xl border border-white/20 rounded-xl p-6 flex flex-col gap-3 shadow-2xl",children:[l.jsx("button",{onClick:()=>y(Se.HOME),className:`w-full py-3 rounded-lg font-medium text-left px-4 ${i===Se.HOME?"text-orange-400 bg-white/5":"text-white/80"}`,children:"Hem"}),l.jsx("button",{onClick:()=>y(Se.ABOUT),className:`w-full py-3 rounded-lg font-medium text-left px-4 ${i===Se.ABOUT?"text-orange-400 bg-white/5":"text-white/80"}`,children:"Om oss"}),l.jsxs("div",{className:"border-y border-white/10 py-2 my-2",children:[l.jsx("div",{className:"px-4 py-2 text-[10px] font-bold text-white/40 uppercase tracking-widest",children:"Tjnster"}),l.jsx("button",{onClick:()=>y(Se.BEHANDLINGS_ASSISTENT),className:`w-full py-3 rounded-lg font-medium text-left px-6 ${i===Se.BEHANDLINGS_ASSISTENT?"text-orange-400 bg-white/5":"text-white/80"}`,children:"Behandlingsassistent"}),l.jsx("button",{onClick:()=>y(Se.CHAT),className:`w-full py-3 rounded-lg font-medium text-left px-6 ${i===Se.CHAT?"text-orange-400 bg-white/5":"text-white/80"}`,children:"Myndighetsinducerat trauma"}),l.jsx("button",{onClick:()=>y(Se.GESTALT_TRAINING),className:`w-full py-3 rounded-lg font-medium text-left px-6 ${i===Se.GESTALT_TRAINING?"text-orange-400 bg-white/5":"text-white/80"}`,children:"Gestaltterapi"}),l.jsx("button",{onClick:()=>y(Se.THERAPY),className:`w-full py-3 rounded-lg font-medium text-left px-6 ${i===Se.THERAPY?"text-orange-400 bg-white/5":"text-white/80"}`,children:"Enskild Terapi"}),l.jsx("button",{onClick:()=>y(Se.GROUP_THERAPY),className:`w-full py-3 rounded-lg font-medium text-left px-6 ${i===Se.GROUP_THERAPY?"text-orange-400 bg-white/5":"text-white/80"}`,children:"Grupp- och parterapi"})]}),l.jsxs("div",{className:"border-b border-white/10 pb-2 mb-2",children:[l.jsx("div",{className:"px-4 py-2 text-[10px] font-bold text-white/40 uppercase tracking-widest",children:"Resurser"}),l.jsx("button",{onClick:()=>y(Se.COMMUNITY),className:`w-full py-3 rounded-lg font-medium text-left px-6 ${i===Se.COMMUNITY?"text-orange-400 bg-white/5":"text-white/80"}`,children:"Gemenskap"}),l.jsx("button",{onClick:()=>y(Se.SURVEY),className:`w-full py-3 rounded-lg font-medium text-left px-6 ${i===Se.SURVEY?"text-orange-400 bg-white/5":"text-white/80"}`,children:"Enkt och utredning"}),l.jsx("button",{onClick:()=>y(Se.DOWNLOADS),className:`w-full py-3 rounded-lg font-medium text-left px-6 ${i===Se.DOWNLOADS?"text-orange-400 bg-white/5":"text-white/80"}`,children:"Nedladdningar"})]}),l.jsx("button",{onClick:()=>y(Se.BLOG),className:`w-full py-3 rounded-lg font-medium text-left px-4 ${i===Se.BLOG?"text-orange-400 bg-white/5":"text-white/80"}`,children:"Blogg"}),l.jsx("button",{onClick:()=>y(Se.CONTACT),className:`w-full py-3 rounded-lg font-medium text-left px-4 ${i===Se.CONTACT?"text-orange-400 bg-white/5":"text-white/80"}`,children:"Kontakt & bokning"}),l.jsx("div",{className:"border-t border-white/10 mt-2 pt-2",children:l.jsxs("button",{onClick:()=>y(Se.LOGIN),className:`w-full py-3 rounded-lg font-bold text-left px-4 flex items-center gap-3 ${i===Se.LOGIN?"text-orange-400 bg-white/5":"text-white"}`,children:[l.jsx(jM,{size:20})," Logga in"]})})]})})]})})})},YC=()=>l.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden pointer-events-none",children:[l.jsx("div",{className:"absolute bg-white/10 rounded-2xl shadow-[0_8px_32px_rgba(255,255,255,0.1)] animate-float",style:{width:"120px",height:"80px",top:"20%",left:"10%",transform:"rotate(15deg)",animationDelay:"0s"}}),l.jsx("div",{className:"absolute bg-white/10 rounded-xl shadow-[0_8px_32px_rgba(255,255,255,0.1)] animate-float",style:{width:"90px",height:"140px",top:"60%",right:"15%",transform:"rotate(-20deg)",animationDelay:"2s"}}),l.jsx("div",{className:"absolute bg-white/10 rounded-lg shadow-[0_8px_32px_rgba(255,255,255,0.1)] animate-float",style:{width:"100px",height:"60px",bottom:"20%",left:"20%",transform:"rotate(25deg)",animationDelay:"4s"}}),l.jsx("div",{className:"absolute bg-white/10 rounded-lg shadow-[0_8px_32px_rgba(255,255,255,0.1)] animate-float",style:{width:"80px",height:"120px",top:"10%",right:"30%",transform:"rotate(-10deg)",animationDelay:"1s"}}),l.jsx("div",{className:"absolute bg-white/10 rounded-2xl shadow-[0_8px_32px_rgba(255,255,255,0.1)] animate-float",style:{width:"110px",height:"70px",bottom:"40%",right:"20%",transform:"rotate(30deg)",animationDelay:"3s"}}),l.jsx("div",{className:"absolute bg-white/10 rounded-[20px] shadow-[0_8px_32px_rgba(255,255,255,0.1)] animate-float",style:{width:"95px",height:"95px",top:"40%",left:"5%",transform:"rotate(-15deg)",animationDelay:"5s"}})]});function ty(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t}function KC(i,e,t,n){function s(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function h(v){try{m(n.next(v))}catch(b){u(b)}}function p(v){try{m(n.throw(v))}catch(b){u(b)}}function m(v){v.done?a(v.value):s(v.value).then(h,p)}m((n=n.apply(i,e||[])).next())})}const ZC=i=>i?(...e)=>i(...e):(...e)=>fetch(...e);class Cw extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class JC extends Cw{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class UM extends Cw{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class PM extends Cw{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var W1;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(W1||(W1={}));class QC{constructor(e,{headers:t={},customFetch:n,region:s=W1.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=ZC(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return KC(this,arguments,void 0,function*(t,n={}){var s;let a,u;try{const{headers:h,method:p,body:m,signal:v,timeout:b}=n;let y={},{region:w}=n;w||(w=this.region);const M=new URL(`${this.url}/${t}`);w&&w!=="any"&&(y["x-region"]=w,M.searchParams.set("forceFunctionRegion",w));let k;m&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",k=m):typeof m=="string"?(y["Content-Type"]="text/plain",k=m):typeof FormData<"u"&&m instanceof FormData?k=m:(y["Content-Type"]="application/json",k=JSON.stringify(m)):m&&typeof m!="string"&&!(typeof Blob<"u"&&m instanceof Blob)&&!(m instanceof ArrayBuffer)&&!(typeof FormData<"u"&&m instanceof FormData)?k=JSON.stringify(m):k=m;let T=v;b&&(u=new AbortController,a=setTimeout(()=>u.abort(),b),v?(T=u.signal,v.addEventListener("abort",()=>u.abort())):T=u.signal);const N=yield this.fetch(M.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),h),body:k,signal:T}).catch(I=>{throw new JC(I)}),j=N.headers.get("x-relay-error");if(j&&j==="true")throw new UM(N);if(!N.ok)throw new PM(N);let R=((s=N.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),D;return R==="application/json"?D=yield N.json():R==="application/octet-stream"||R==="application/pdf"?D=yield N.blob():R==="text/event-stream"?D=N:R==="multipart/form-data"?D=yield N.formData():D=yield N.text(),{data:D,error:null,response:N}}catch(h){return{data:null,error:h,response:h instanceof PM||h instanceof UM?h.context:void 0}}finally{a&&clearTimeout(a)}})}}var eR=class extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}},tR=class{constructor(i){var e,t;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(e=i.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=i.signal,this.isMaybeSingle=(t=i.isMaybeSingle)!==null&&t!==void 0?t:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,e){return this.headers=new Headers(this.headers),this.headers.set(i,e),this}then(i,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let u=null,h=null,p=null,m=a.status,v=a.statusText;if(a.ok){var b,y;if(t.method!=="HEAD"){var w;const N=await a.text();N===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((w=t.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?h=N:h=JSON.parse(N))}const k=(b=t.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),T=(y=a.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");k&&T&&T.length>1&&(p=parseInt(T[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,p=null,m=406,v="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{var M;const k=await a.text();try{u=JSON.parse(k),Array.isArray(u)&&a.status===404&&(h=[],u=null,m=200,v="OK")}catch{a.status===404&&k===""?(m=204,v="No Content"):u={message:k}}if(u&&t.isMaybeSingle&&(!(u==null||(M=u.details)===null||M===void 0)&&M.includes("0 rows"))&&(u=null,m=200,v="OK"),u&&t.shouldThrowOnError)throw new eR(u)}return{error:u,data:h,count:p,status:m,statusText:v}});return this.shouldThrowOnError||(s=s.catch(a=>{var u;let h="";const p=a?.cause;if(p){var m,v,b,y;const M=(m=p?.message)!==null&&m!==void 0?m:"",k=(v=p?.code)!==null&&v!==void 0?v:"";h=`${(b=a?.name)!==null&&b!==void 0?b:"FetchError"}: ${a?.message}`,h+=`

Caused by: ${(y=p?.name)!==null&&y!==void 0?y:"Error"}: ${M}`,k&&(h+=` (${k})`),p?.stack&&(h+=`
${p.stack}`)}else{var w;h=(w=a?.stack)!==null&&w!==void 0?w:""}return{error:{message:`${(u=a?.name)!==null&&u!==void 0?u:"FetchError"}: ${a?.message}`,details:h,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(i,e)}returns(){return this}overrideTypes(){return this}},nR=class extends tR{select(i){let e=!1;const t=(i??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:e=!0,nullsFirst:t,foreignTable:n,referencedTable:s=n}={}){const a=s?`${s}.order`:"order",u=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${u?`${u},`:""}${i}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:e,referencedTable:t=e}={}){const n=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${i}`),this}range(i,e,{foreignTable:t,referencedTable:n=t}={}){const s=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${i}`),this.url.searchParams.set(a,`${e-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:e=!1,settings:t=!1,buffers:n=!1,wal:s=!1,format:a="text"}={}){var u;const h=[i?"analyze":null,e?"verbose":null,t?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),p=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${p}"; options=${h};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};const zM=new RegExp("[,()]");var zf=class extends nR{eq(i,e){return this.url.searchParams.append(i,`eq.${e}`),this}neq(i,e){return this.url.searchParams.append(i,`neq.${e}`),this}gt(i,e){return this.url.searchParams.append(i,`gt.${e}`),this}gte(i,e){return this.url.searchParams.append(i,`gte.${e}`),this}lt(i,e){return this.url.searchParams.append(i,`lt.${e}`),this}lte(i,e){return this.url.searchParams.append(i,`lte.${e}`),this}like(i,e){return this.url.searchParams.append(i,`like.${e}`),this}likeAllOf(i,e){return this.url.searchParams.append(i,`like(all).{${e.join(",")}}`),this}likeAnyOf(i,e){return this.url.searchParams.append(i,`like(any).{${e.join(",")}}`),this}ilike(i,e){return this.url.searchParams.append(i,`ilike.${e}`),this}ilikeAllOf(i,e){return this.url.searchParams.append(i,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(i,e){return this.url.searchParams.append(i,`ilike(any).{${e.join(",")}}`),this}regexMatch(i,e){return this.url.searchParams.append(i,`match.${e}`),this}regexIMatch(i,e){return this.url.searchParams.append(i,`imatch.${e}`),this}is(i,e){return this.url.searchParams.append(i,`is.${e}`),this}isDistinct(i,e){return this.url.searchParams.append(i,`isdistinct.${e}`),this}in(i,e){const t=Array.from(new Set(e)).map(n=>typeof n=="string"&&zM.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(i,`in.(${t})`),this}notIn(i,e){const t=Array.from(new Set(e)).map(n=>typeof n=="string"&&zM.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(i,`not.in.(${t})`),this}contains(i,e){return typeof e=="string"?this.url.searchParams.append(i,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(i,`cs.{${e.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(e)}`),this}containedBy(i,e){return typeof e=="string"?this.url.searchParams.append(i,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(i,`cd.{${e.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(e)}`),this}rangeGt(i,e){return this.url.searchParams.append(i,`sr.${e}`),this}rangeGte(i,e){return this.url.searchParams.append(i,`nxl.${e}`),this}rangeLt(i,e){return this.url.searchParams.append(i,`sl.${e}`),this}rangeLte(i,e){return this.url.searchParams.append(i,`nxr.${e}`),this}rangeAdjacent(i,e){return this.url.searchParams.append(i,`adj.${e}`),this}overlaps(i,e){return typeof e=="string"?this.url.searchParams.append(i,`ov.${e}`):this.url.searchParams.append(i,`ov.{${e.join(",")}}`),this}textSearch(i,e,{config:t,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const a=t===void 0?"":`(${t})`;return this.url.searchParams.append(i,`${s}fts${a}.${e}`),this}match(i){return Object.entries(i).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(i,e,t){return this.url.searchParams.append(i,`not.${e}.${t}`),this}or(i,{foreignTable:e,referencedTable:t=e}={}){const n=t?`${t}.or`:"or";return this.url.searchParams.append(n,`(${i})`),this}filter(i,e,t){return this.url.searchParams.append(i,`${e}.${t}`),this}},iR=class{constructor(i,{headers:e={},schema:t,fetch:n}){this.url=i,this.headers=new Headers(e),this.schema=t,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(i,e){const{head:t=!1,count:n}=e??{},s=t?"HEAD":"GET";let a=!1;const u=(i??"*").split("").map(m=>/\s/.test(m)&&!a?"":(m==='"'&&(a=!a),m)).join(""),{url:h,headers:p}=this.cloneRequestState();return h.searchParams.set("select",u),n&&p.append("Prefer",`count=${n}`),new zf({method:s,url:h,headers:p,schema:this.schema,fetch:this.fetch})}insert(i,{count:e,defaultToNull:t=!0}={}){var n;const s="POST",{url:a,headers:u}=this.cloneRequestState();if(e&&u.append("Prefer",`count=${e}`),t||u.append("Prefer","missing=default"),Array.isArray(i)){const h=i.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(h.length>0){const p=[...new Set(h)].map(m=>`"${m}"`);a.searchParams.set("columns",p.join(","))}}return new zf({method:s,url:a,headers:u,schema:this.schema,body:i,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(i,{onConflict:e,ignoreDuplicates:t=!1,count:n,defaultToNull:s=!0}={}){var a;const u="POST",{url:h,headers:p}=this.cloneRequestState();if(p.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&h.searchParams.set("on_conflict",e),n&&p.append("Prefer",`count=${n}`),s||p.append("Prefer","missing=default"),Array.isArray(i)){const m=i.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(m.length>0){const v=[...new Set(m)].map(b=>`"${b}"`);h.searchParams.set("columns",v.join(","))}}return new zf({method:u,url:h,headers:p,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(i,{count:e}={}){var t;const n="PATCH",{url:s,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new zf({method:n,url:s,headers:a,schema:this.schema,body:i,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}delete({count:i}={}){var e;const t="DELETE",{url:n,headers:s}=this.cloneRequestState();return i&&s.append("Prefer",`count=${i}`),new zf({method:t,url:n,headers:s,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},sR=class _T{constructor(e,{headers:t={},schema:n,fetch:s}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=s}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new iR(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new _T(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:s=!1,count:a}={}){var u;let h;const p=new URL(`${this.url}/rpc/${e}`);let m;const v=w=>w!==null&&typeof w=="object"&&(!Array.isArray(w)||w.some(v)),b=n&&Object.values(t).some(v);b?(h="POST",m=t):n||s?(h=n?"HEAD":"GET",Object.entries(t).filter(([w,M])=>M!==void 0).map(([w,M])=>[w,Array.isArray(M)?`{${M.join(",")}}`:`${M}`]).forEach(([w,M])=>{p.searchParams.append(w,M)})):(h="POST",m=t);const y=new Headers(this.headers);return b?y.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&y.set("Prefer",`count=${a}`),new zf({method:h,url:p,headers:y,schema:this.schemaName,body:m,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};class rR{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const t=globalThis.process;if(t){const n=t.versions;if(n&&n.node){const s=n.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const n=this.getWebSocketConstructor();return new n(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const aR="2.91.0",oR=`realtime-js/${aR}`,lR="1.0.0",wT="2.0.0",BM=wT,X1=1e4,cR=1e3,uR=100;var hu;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(hu||(hu={}));var cs;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(cs||(cs={}));var yo;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(yo||(yo={}));var $1;(function(i){i.websocket="websocket"})($1||($1={}));var Dd;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Dd||(Dd={}));class dR{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,n;const s=(n=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var t,n;const s=(n=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&n!==void 0?n:{},u=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(e,t,n){var s,a;const u=e.topic,h=(s=e.ref)!==null&&s!==void 0?s:"",p=(a=e.join_ref)!==null&&a!==void 0?a:"",m=e.payload.event,v=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},b=Object.keys(v).length===0?"":JSON.stringify(v);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`metadata length ${b.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+h.length+u.length+m.length+b.length,w=new ArrayBuffer(this.HEADER_LENGTH+y);let M=new DataView(w),k=0;M.setUint8(k++,this.KINDS.userBroadcastPush),M.setUint8(k++,p.length),M.setUint8(k++,h.length),M.setUint8(k++,u.length),M.setUint8(k++,m.length),M.setUint8(k++,b.length),M.setUint8(k++,t),Array.from(p,N=>M.setUint8(k++,N.charCodeAt(0))),Array.from(h,N=>M.setUint8(k++,N.charCodeAt(0))),Array.from(u,N=>M.setUint8(k++,N.charCodeAt(0))),Array.from(m,N=>M.setUint8(k++,N.charCodeAt(0))),Array.from(b,N=>M.setUint8(k++,N.charCodeAt(0)));var T=new Uint8Array(w.byteLength+n.byteLength);return T.set(new Uint8Array(w),0),T.set(new Uint8Array(n),w.byteLength),T.buffer}decode(e,t){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return t(n)}if(typeof e=="string"){const n=JSON.parse(e),[s,a,u,h,p]=n;return t({join_ref:s,ref:a,topic:u,event:h,payload:p})}return t({})}_binaryDecode(e){const t=new DataView(e),n=t.getUint8(0),s=new TextDecoder;if(n===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,s)}_decodeUserBroadcast(e,t,n){const s=t.getUint8(1),a=t.getUint8(2),u=t.getUint8(3),h=t.getUint8(4);let p=this.HEADER_LENGTH+4;const m=n.decode(e.slice(p,p+s));p=p+s;const v=n.decode(e.slice(p,p+a));p=p+a;const b=n.decode(e.slice(p,p+u));p=p+u;const y=e.slice(p,e.byteLength),w=h===this.JSON_ENCODING?JSON.parse(n.decode(y)):y,M={type:this.BROADCAST_EVENT,event:v,payload:w};return u>0&&(M.meta=JSON.parse(b)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:M}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e?.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>t.includes(n)))}}let ST=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var ri;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(ri||(ri={}));const FM=(i,e,t={})=>{var n;const s=(n=t.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((a,u)=>(a[u]=hR(u,i,e,s),a),{}):{}},hR=(i,e,t,n)=>{const s=e.find(h=>h.name===i),a=s?.type,u=t[i];return a&&!n.includes(a)?MT(a,u):Y1(u)},MT=(i,e)=>{if(i.charAt(0)==="_"){const t=i.slice(1,i.length);return gR(e,t)}switch(i){case ri.bool:return fR(e);case ri.float4:case ri.float8:case ri.int2:case ri.int4:case ri.int8:case ri.numeric:case ri.oid:return pR(e);case ri.json:case ri.jsonb:return mR(e);case ri.timestamp:return xR(e);case ri.abstime:case ri.date:case ri.daterange:case ri.int4range:case ri.int8range:case ri.money:case ri.reltime:case ri.text:case ri.time:case ri.timestamptz:case ri.timetz:case ri.tsrange:case ri.tstzrange:return Y1(e);default:return Y1(e)}},Y1=i=>i,fR=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},pR=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},mR=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch{return i}return i},gR=(i,e)=>{if(typeof i!="string")return i;const t=i.length-1,n=i[t];if(i[0]==="{"&&n==="}"){let a;const u=i.slice(1,t);try{a=JSON.parse("["+u+"]")}catch{a=u?u.split(","):[]}return a.map(h=>MT(e,h))}return i},xR=i=>typeof i=="string"?i.replace(" ","T"):i,ET=i=>{const e=new URL(i);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class j_{constructor(e,t,n={},s=X1){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var VM;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(VM||(VM={}));class og{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=og.syncState(this.state,s,a,u),this.pendingDiffs.forEach(p=>{this.state=og.syncDiff(this.state,p,a,u)}),this.pendingDiffs=[],h()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=og.syncDiff(this.state,s,a,u),h())}),this.onJoin((s,a,u)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:u})}),this.onLeave((s,a,u)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const a=this.cloneDeep(e),u=this.transformState(t),h={},p={};return this.map(a,(m,v)=>{u[m]||(p[m]=v)}),this.map(u,(m,v)=>{const b=a[m];if(b){const y=v.map(T=>T.presence_ref),w=b.map(T=>T.presence_ref),M=v.filter(T=>w.indexOf(T.presence_ref)<0),k=b.filter(T=>y.indexOf(T.presence_ref)<0);M.length>0&&(h[m]=M),k.length>0&&(p[m]=k)}else h[m]=v}),this.syncDiff(a,{joins:h,leaves:p},n,s)}static syncDiff(e,t,n,s){const{joins:a,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(h,p)=>{var m;const v=(m=e[h])!==null&&m!==void 0?m:[];if(e[h]=this.cloneDeep(p),v.length>0){const b=e[h].map(w=>w.presence_ref),y=v.filter(w=>b.indexOf(w.presence_ref)<0);e[h].unshift(...y)}n(h,v,p)}),this.map(u,(h,p)=>{let m=e[h];if(!m)return;const v=p.map(b=>b.presence_ref);m=m.filter(b=>v.indexOf(b.presence_ref)<0),e[h]=m,s(h,m,p),m.length===0&&delete e[h]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return"metas"in s?t[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[n]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var HM;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(HM||(HM={}));var lg;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(lg||(lg={}));var sc;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(sc||(sc={}));class Vf{constructor(e,t={config:{}},n){var s,a;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=cs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new j_(this,yo.join,this.params,this.timeout),this.rejoinTimer=new ST(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=cs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=cs.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=cs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=cs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=cs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(yo.reply,{},(u,h)=>{this._trigger(this._replyEventName(h),u)}),this.presence=new og(this),this.broadcastEndpointURL=ET(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var n,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==cs.closed){const{config:{broadcast:u,presence:h,private:p}}=this.params,m=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(w=>w.filter))!==null&&s!==void 0?s:[],v=!!this.bindings[lg.PRESENCE]&&this.bindings[lg.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,b={},y={broadcast:u,presence:Object.assign(Object.assign({},h),{enabled:v}),postgres_changes:m,private:p};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(w=>e?.(sc.CHANNEL_ERROR,w)),this._onClose(()=>e?.(sc.CLOSED)),this.updateJoinPayload(Object.assign({config:y},b)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:w})=>{var M;if(this.socket._isManualToken()||this.socket.setAuth(),w===void 0){e?.(sc.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,T=(M=k?.length)!==null&&M!==void 0?M:0,N=[];for(let j=0;j<T;j++){const R=k[j],{filter:{event:D,schema:I,table:P,filter:z}}=R,G=w&&w[j];if(G&&G.event===D&&Vf.isFilterValueEqual(G.schema,I)&&Vf.isFilterValueEqual(G.table,P)&&Vf.isFilterValueEqual(G.filter,z))N.push(Object.assign(Object.assign({},R),{id:G.id}));else{this.unsubscribe(),this.state=cs.errored,e?.(sc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,e&&e(sc.SUBSCRIBED);return}}).receive("error",w=>{this.state=cs.errored,e?.(sc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{e?.(sc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===cs.joined&&e===lg.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,n)}async httpSend(e,t,n={}){var s;if(t==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(h.status===202)return{success:!0};let p=h.statusText;try{const m=await h.json();p=m.error||m.message||p}catch{}return Promise.reject(new Error(p))}async send(e,t={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:u}=e,h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:u,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=m.body)===null||s===void 0?void 0:s.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var u,h,p;const m=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((p=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||p===void 0)&&p.ack)&&a("ok"),m.receive("ok",()=>a("ok")),m.receive("error",()=>a("error")),m.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=cs.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(yo.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new j_(this,yo.leave,{},e),n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=cs.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),u=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(a),u}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new j_(this,e,t,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>uR){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,a;const u=e.toLocaleLowerCase(),{close:h,error:p,leave:m,join:v}=yo;if(n&&[h,p,m,v].indexOf(u)>=0&&n!==this._joinRef())return;let y=this._onMessage(u,t,n);if(t&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(w=>{var M,k,T;return((M=w.filter)===null||M===void 0?void 0:M.event)==="*"||((T=(k=w.filter)===null||k===void 0?void 0:k.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===u}).map(w=>w.callback(y,n)):(a=this.bindings[u])===null||a===void 0||a.filter(w=>{var M,k,T,N,j,R,D,I;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in w){const P=w.id,z=(M=w.filter)===null||M===void 0?void 0:M.event;return P&&((k=t.ids)===null||k===void 0?void 0:k.includes(P))&&(z==="*"||z?.toLocaleLowerCase()===((T=t.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))&&(!(!((N=w.filter)===null||N===void 0)&&N.table)||w.filter.table===((j=t.data)===null||j===void 0?void 0:j.table))}else{const P=(D=(R=w?.filter)===null||R===void 0?void 0:R.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return P==="*"||P===((I=t?.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===u}).map(w=>{if(typeof y=="object"&&"ids"in y){const M=y.data,{schema:k,table:T,commit_timestamp:N,type:j,errors:R}=M;y=Object.assign(Object.assign({},{schema:k,table:T,commit_timestamp:N,eventType:j,new:{},old:{},errors:R}),this._getPayloadRecords(M))}w.callback(y,n)})}_isClosed(){return this.state===cs.closed}_isJoined(){return this.state===cs.joined}_isJoining(){return this.state===cs.joining}_isLeaving(){return this.state===cs.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),a={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Vf.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(yo.close,{},e)}_onError(e){this._on(yo.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=cs.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=FM(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=FM(e.columns,e.old_record)),t}}const D_=()=>{},Vx={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},vR=[1e3,2e3,5e3,1e4],bR=1e4,yR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class _R{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=X1,this.transport=null,this.heartbeatIntervalMs=Vx.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=D_,this.ref=0,this.reconnectTimer=null,this.vsn=BM,this.logger=D_,this.conn=null,this.sendBuffer=[],this.serializer=new dR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((n=t?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${$1.websocket}`,this.httpEndpoint=ET(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=rR.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case hu.connecting:return Dd.Connecting;case hu.open:return Dd.Open;case hu.closing:return Dd.Closing;default:return Dd.Closed}}isConnected(){return this.connectionState()===Dd.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new Vf(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:n,payload:s,ref:a}=e,u=()=>{this.encode(e,h=>{var p;(p=this.conn)===null||p===void 0||p.send(h)})};this.log("push",`${t} ${n} (${a})`,s),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(cR,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Vx.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply"&&t.ref&&t.ref===this.pendingHeartbeatRef){const m=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error",m)}catch(v){this.log("error","error in heartbeat callback",v)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:a,ref:u}=t,h=u?`(${u})`:"",p=a.status||"";this.log("receive",`${p} ${n} ${s} ${h}`.trim(),a),this.channels.filter(m=>m._isMember(n)).forEach(m=>m._trigger(s,a,u)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===hu.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===hu.open||this.conn.readyState===hu.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(yo.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${n}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([yR],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,n=!1;if(e)t=e,n=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),t=this.accessTokenValue}else t=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const a={access_token:t,version:oR};t&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(yo.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new ST(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Vx.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,s,a,u,h,p,m,v,b,y,w;switch(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:X1,this.heartbeatIntervalMs=(s=e?.heartbeatIntervalMs)!==null&&s!==void 0?s:Vx.HEARTBEAT_INTERVAL,this.worker=(a=e?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(u=e?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(h=e?.heartbeatCallback)!==null&&h!==void 0?h:D_,this.vsn=(p=e?.vsn)!==null&&p!==void 0?p:BM,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e?.reconnectAfterMs)!==null&&m!==void 0?m:(M=>vR[M-1]||bR),this.vsn){case lR:this.encode=(v=e?.encode)!==null&&v!==void 0?v:((M,k)=>k(JSON.stringify(M))),this.decode=(b=e?.decode)!==null&&b!==void 0?b:((M,k)=>k(JSON.parse(M)));break;case wT:this.encode=(y=e?.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(w=e?.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var wg=class extends Error{constructor(i,e){super(i),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function wR(i,e,t){const n=new URL(e,i);if(t)for(const[s,a]of Object.entries(t))a!==void 0&&n.searchParams.set(s,a);return n.toString()}async function SR(i){return!i||i.type==="none"?{}:i.type==="bearer"?{Authorization:`Bearer ${i.token}`}:i.type==="header"?{[i.name]:i.value}:i.type==="custom"?await i.getHeaders():{}}function MR(i){const e=i.fetchImpl??globalThis.fetch;return{async request({method:t,path:n,query:s,body:a,headers:u}){const h=wR(i.baseUrl,n,s),p=await SR(i.auth),m=await e(h,{method:t,headers:{...a?{"Content-Type":"application/json"}:{},...p,...u},body:a?JSON.stringify(a):void 0}),v=await m.text(),b=(m.headers.get("content-type")||"").includes("application/json"),y=b&&v?JSON.parse(v):v;if(!m.ok){const w=b?y:void 0,M=w?.error;throw new wg(M?.message??`Request failed with status ${m.status}`,{status:m.status,icebergType:M?.type,icebergCode:M?.code,details:w})}return{status:m.status,headers:m.headers,data:y}}}}function Hx(i){return i.join("")}var ER=class{constructor(i,e=""){this.client=i,this.prefix=e}async listNamespaces(i){const e=i?{parent:Hx(i.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(i,e){const t={namespace:i.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Hx(i.namespace)}`})}async loadNamespaceMetadata(i){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Hx(i.namespace)}`})).data.properties}}async namespaceExists(i){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Hx(i.namespace)}`}),!0}catch(e){if(e instanceof wg&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(i,e){try{return await this.createNamespace(i,e)}catch(t){if(t instanceof wg&&t.status===409)return;throw t}}};function cf(i){return i.join("")}var NR=class{constructor(i,e="",t){this.client=i,this.prefix=e,this.accessDelegation=t}async listTables(i){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${cf(i.namespace)}/tables`})).data.identifiers}async createTable(i,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${cf(i.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(i,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${cf(i.namespace)}/tables/${i.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(i,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${cf(i.namespace)}/tables/${i.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(i){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${cf(i.namespace)}/tables/${i.name}`,headers:e})).data.metadata}async tableExists(i){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${cf(i.namespace)}/tables/${i.name}`,headers:e}),!0}catch(t){if(t instanceof wg&&t.status===404)return!1;throw t}}async createTableIfNotExists(i,e){try{return await this.createTable(i,e)}catch(t){if(t instanceof wg&&t.status===409)return await this.loadTable({namespace:i.namespace,name:e.name});throw t}}},TR=class{constructor(i){let e="v1";i.catalogName&&(e+=`/${i.catalogName}`);const t=i.baseUrl.endsWith("/")?i.baseUrl:`${i.baseUrl}/`;this.client=MR({baseUrl:t,auth:i.auth,fetchImpl:i.fetch}),this.accessDelegation=i.accessDelegation?.join(","),this.namespaceOps=new ER(this.client,e),this.tableOps=new NR(this.client,e,this.accessDelegation)}async listNamespaces(i){return this.namespaceOps.listNamespaces(i)}async createNamespace(i,e){return this.namespaceOps.createNamespace(i,e)}async dropNamespace(i){await this.namespaceOps.dropNamespace(i)}async loadNamespaceMetadata(i){return this.namespaceOps.loadNamespaceMetadata(i)}async listTables(i){return this.tableOps.listTables(i)}async createTable(i,e){return this.tableOps.createTable(i,e)}async updateTable(i,e){return this.tableOps.updateTable(i,e)}async dropTable(i,e){await this.tableOps.dropTable(i,e)}async loadTable(i){return this.tableOps.loadTable(i)}async namespaceExists(i){return this.namespaceOps.namespaceExists(i)}async tableExists(i){return this.tableOps.tableExists(i)}async createNamespaceIfNotExists(i,e){return this.namespaceOps.createNamespaceIfNotExists(i,e)}async createTableIfNotExists(i,e){return this.tableOps.createTableIfNotExists(i,e)}},ny=class extends Error{constructor(i){super(i),this.__isStorageError=!0,this.name="StorageError"}};function Ei(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}var AR=class extends ny{constructor(i,e,t){super(i),this.name="StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},K1=class extends ny{constructor(i,e){super(i),this.name="StorageUnknownError",this.originalError=e}};const Rw=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),kR=()=>Response,Z1=i=>{if(Array.isArray(i))return i.map(t=>Z1(t));if(typeof i=="function"||i!==Object(i))return i;const e={};return Object.entries(i).forEach(([t,n])=>{const s=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=Z1(n)}),e},CR=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},RR=i=>!i||typeof i!="string"||i.length===0||i.length>100||i.trim()!==i||i.includes("/")||i.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(i);function Sg(i){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sg(i)}function jR(i,e){if(Sg(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(Sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function DR(i){var e=jR(i,"string");return Sg(e)=="symbol"?e:e+""}function IR(i,e,t){return(e=DR(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function GM(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function Ht(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?GM(Object(t),!0).forEach(function(n){IR(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):GM(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}const I_=i=>{var e;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(e=i.error)===null||e===void 0?void 0:e.message)||JSON.stringify(i)},OR=async(i,e,t)=>{i instanceof await kR()&&!t?.noResolveJson?i.json().then(n=>{const s=i.status||500,a=n?.statusCode||s+"";e(new AR(I_(n),s,a))}).catch(n=>{e(new K1(I_(n),n))}):e(new K1(I_(i),i))},LR=(i,e,t,n)=>{const s={method:i,headers:e?.headers||{}};return i==="GET"||!n?s:(CR(n)?(s.headers=Ht({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(n)):s.body=n,e?.duplex&&(s.duplex=e.duplex),Ht(Ht({},s),t))};async function $g(i,e,t,n,s,a){return new Promise((u,h)=>{i(t,LR(e,n,s,a)).then(p=>{if(!p.ok)throw p;return n?.noResolveJson?p:p.json()}).then(p=>u(p)).catch(p=>OR(p,h,n))})}async function Mg(i,e,t,n){return $g(i,"GET",e,t,n)}async function bo(i,e,t,n,s){return $g(i,"POST",e,n,s,t)}async function J1(i,e,t,n,s){return $g(i,"PUT",e,n,s,t)}async function UR(i,e,t,n){return $g(i,"HEAD",e,Ht(Ht({},t),{},{noResolveJson:!0}),n)}async function jw(i,e,t,n,s){return $g(i,"DELETE",e,n,s,t)}var PR=class{constructor(i,e){this.downloadFn=i,this.shouldThrowOnError=e}then(i,e){return this.execute().then(i,e)}async execute(){var i=this;try{return{data:(await i.downloadFn()).body,error:null}}catch(e){if(i.shouldThrowOnError)throw e;if(Ei(e))return{data:null,error:e};throw e}}};let NT;NT=Symbol.toStringTag;var zR=class{constructor(i,e){this.downloadFn=i,this.shouldThrowOnError=e,this[NT]="BlobDownloadBuilder",this.promise=null}asStream(){return new PR(this.downloadFn,this.shouldThrowOnError)}then(i,e){return this.getPromise().then(i,e)}catch(i){return this.getPromise().catch(i)}finally(i){return this.getPromise().finally(i)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var i=this;try{return{data:await(await i.downloadFn()).blob(),error:null}}catch(e){if(i.shouldThrowOnError)throw e;if(Ei(e))return{data:null,error:e};throw e}}};const BR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qM={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var FR=class{constructor(i,e={},t,n){this.shouldThrowOnError=!1,this.url=i,this.headers=e,this.bucketId=t,this.fetch=Rw(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(i,e,t,n){var s=this;try{let a;const u=Ht(Ht({},qM),n);let h=Ht(Ht({},s.headers),i==="POST"&&{"x-upsert":String(u.upsert)});const p=u.metadata;typeof Blob<"u"&&t instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),p&&a.append("metadata",s.encodeMetadata(p)),a.append("",t)):typeof FormData<"u"&&t instanceof FormData?(a=t,a.has("cacheControl")||a.append("cacheControl",u.cacheControl),p&&!a.has("metadata")&&a.append("metadata",s.encodeMetadata(p))):(a=t,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,p&&(h["x-metadata"]=s.toBase64(s.encodeMetadata(p))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!u.duplex&&(u.duplex="half")),n?.headers&&(h=Ht(Ht({},h),n.headers));const m=s._removeEmptyFolders(e),v=s._getFinalPath(m),b=await(i=="PUT"?J1:bo)(s.fetch,`${s.url}/object/${v}`,a,Ht({headers:h},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:m,id:b.Id,fullPath:b.Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Ei(a))return{data:null,error:a};throw a}}async upload(i,e,t){return this.uploadOrUpdate("POST",i,e,t)}async uploadToSignedUrl(i,e,t,n){var s=this;const a=s._removeEmptyFolders(i),u=s._getFinalPath(a),h=new URL(s.url+`/object/upload/sign/${u}`);h.searchParams.set("token",e);try{let p;const m=Ht({upsert:qM.upsert},n),v=Ht(Ht({},s.headers),{"x-upsert":String(m.upsert)});return typeof Blob<"u"&&t instanceof Blob?(p=new FormData,p.append("cacheControl",m.cacheControl),p.append("",t)):typeof FormData<"u"&&t instanceof FormData?(p=t,p.append("cacheControl",m.cacheControl)):(p=t,v["cache-control"]=`max-age=${m.cacheControl}`,v["content-type"]=m.contentType),{data:{path:a,fullPath:(await J1(s.fetch,h.toString(),p,{headers:v})).Key},error:null}}catch(p){if(s.shouldThrowOnError)throw p;if(Ei(p))return{data:null,error:p};throw p}}async createSignedUploadUrl(i,e){var t=this;try{let n=t._getFinalPath(i);const s=Ht({},t.headers);e?.upsert&&(s["x-upsert"]="true");const a=await bo(t.fetch,`${t.url}/object/upload/sign/${n}`,{},{headers:s}),u=new URL(t.url+a.url),h=u.searchParams.get("token");if(!h)throw new ny("No token returned by API");return{data:{signedUrl:u.toString(),path:i,token:h},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ei(n))return{data:null,error:n};throw n}}async update(i,e,t){return this.uploadOrUpdate("PUT",i,e,t)}async move(i,e,t){var n=this;try{return{data:await bo(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:i,destinationKey:e,destinationBucket:t?.destinationBucket},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ei(s))return{data:null,error:s};throw s}}async copy(i,e,t){var n=this;try{return{data:{path:(await bo(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:i,destinationKey:e,destinationBucket:t?.destinationBucket},{headers:n.headers})).Key},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ei(s))return{data:null,error:s};throw s}}async createSignedUrl(i,e,t){var n=this;try{let s=n._getFinalPath(i),a=await bo(n.fetch,`${n.url}/object/sign/${s}`,Ht({expiresIn:e},t?.transform?{transform:t.transform}:{}),{headers:n.headers});const u=t?.download?`&download=${t.download===!0?"":t.download}`:"";return a={signedUrl:encodeURI(`${n.url}${a.signedURL}${u}`)},{data:a,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ei(s))return{data:null,error:s};throw s}}async createSignedUrls(i,e,t){var n=this;try{const s=await bo(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:i},{headers:n.headers}),a=t?.download?`&download=${t.download===!0?"":t.download}`:"";return{data:s.map(u=>Ht(Ht({},u),{},{signedUrl:u.signedURL?encodeURI(`${n.url}${u.signedURL}${a}`):null})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ei(s))return{data:null,error:s};throw s}}download(i,e){const t=typeof e?.transform<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString(e?.transform||{}),s=n?`?${n}`:"",a=this._getFinalPath(i),u=()=>Mg(this.fetch,`${this.url}/${t}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new zR(u,this.shouldThrowOnError)}async info(i){var e=this;const t=e._getFinalPath(i);try{return{data:Z1(await Mg(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ei(n))return{data:null,error:n};throw n}}async exists(i){var e=this;const t=e._getFinalPath(i);try{return await UR(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ei(n)&&n instanceof K1){const s=n.originalError;if([400,404].includes(s?.status))return{data:!1,error:n}}throw n}}getPublicUrl(i,e){const t=this._getFinalPath(i),n=[],s=e?.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&n.push(s);const a=typeof e?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(e?.transform||{});u!==""&&n.push(u);let h=n.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${t}${h}`)}}}async remove(i){var e=this;try{return{data:await jw(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:i},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ei(t))return{data:null,error:t};throw t}}async list(i,e,t){var n=this;try{const s=Ht(Ht(Ht({},BR),e),{},{prefix:i||""});return{data:await bo(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},t),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ei(s))return{data:null,error:s};throw s}}async listV2(i,e){var t=this;try{const n=Ht({},i);return{data:await bo(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,n,{headers:t.headers},e),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ei(n))return{data:null,error:n};throw n}}encodeMetadata(i){return JSON.stringify(i)}toBase64(i){return typeof Buffer<"u"?Buffer.from(i).toString("base64"):btoa(i)}_getFinalPath(i){return`${this.bucketId}/${i.replace(/^\/+/,"")}`}_removeEmptyFolders(i){return i.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(i){const e=[];return i.width&&e.push(`width=${i.width}`),i.height&&e.push(`height=${i.height}`),i.resize&&e.push(`resize=${i.resize}`),i.format&&e.push(`format=${i.format}`),i.quality&&e.push(`quality=${i.quality}`),e.join("&")}};const TT="2.91.0",AT={"X-Client-Info":`storage-js/${TT}`};var VR=class{constructor(i,e={},t,n){this.shouldThrowOnError=!1;const s=new URL(i);n?.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Ht(Ht({},AT),e),this.fetch=Rw(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(i){var e=this;try{const t=e.listBucketOptionsToQueryString(i);return{data:await Mg(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ei(t))return{data:null,error:t};throw t}}async getBucket(i){var e=this;try{return{data:await Mg(e.fetch,`${e.url}/bucket/${i}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ei(t))return{data:null,error:t};throw t}}async createBucket(i,e={public:!1}){var t=this;try{return{data:await bo(t.fetch,`${t.url}/bucket`,{id:i,name:i,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ei(n))return{data:null,error:n};throw n}}async updateBucket(i,e){var t=this;try{return{data:await J1(t.fetch,`${t.url}/bucket/${i}`,{id:i,name:i,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ei(n))return{data:null,error:n};throw n}}async emptyBucket(i){var e=this;try{return{data:await bo(e.fetch,`${e.url}/bucket/${i}/empty`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ei(t))return{data:null,error:t};throw t}}async deleteBucket(i){var e=this;try{return{data:await jw(e.fetch,`${e.url}/bucket/${i}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ei(t))return{data:null,error:t};throw t}}listBucketOptionsToQueryString(i){const e={};return i&&("limit"in i&&(e.limit=String(i.limit)),"offset"in i&&(e.offset=String(i.offset)),i.search&&(e.search=i.search),i.sortColumn&&(e.sortColumn=i.sortColumn),i.sortOrder&&(e.sortOrder=i.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},HR=class{constructor(i,e={},t){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Ht(Ht({},AT),e),this.fetch=Rw(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(i){var e=this;try{return{data:await bo(e.fetch,`${e.url}/bucket`,{name:i},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ei(t))return{data:null,error:t};throw t}}async listBuckets(i){var e=this;try{const t=new URLSearchParams;i?.limit!==void 0&&t.set("limit",i.limit.toString()),i?.offset!==void 0&&t.set("offset",i.offset.toString()),i?.sortColumn&&t.set("sortColumn",i.sortColumn),i?.sortOrder&&t.set("sortOrder",i.sortOrder),i?.search&&t.set("search",i.search);const n=t.toString(),s=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return{data:await Mg(e.fetch,s,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ei(t))return{data:null,error:t};throw t}}async deleteBucket(i){var e=this;try{return{data:await jw(e.fetch,`${e.url}/bucket/${i}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ei(t))return{data:null,error:t};throw t}}from(i){var e=this;if(!RR(i))throw new ny("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new TR({baseUrl:this.url,catalogName:i,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(t,{get(s,a){const u=s[a];return typeof u!="function"?u:async(...h)=>{try{return{data:await u.apply(s,h),error:null}}catch(p){if(n)throw p;return{data:null,error:p}}}}})}};const Dw={"X-Client-Info":`storage-js/${TT}`,"Content-Type":"application/json"};var kT=class extends Error{constructor(i){super(i),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function ra(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}var O_=class extends kT{constructor(i,e,t){super(i),this.name="StorageVectorsApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},GR=class extends kT{constructor(i,e){super(i),this.name="StorageVectorsUnknownError",this.originalError=e}};const Iw=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),qR=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},WM=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),WR=async(i,e,t)=>{if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!t?.noResolveJson){const n=i.status||500,s=i;if(typeof s.json=="function")s.json().then(a=>{const u=a?.statusCode||a?.code||n+"";e(new O_(WM(a),n,u))}).catch(()=>{const a=n+"";e(new O_(s.statusText||`HTTP ${n} error`,n,a))});else{const a=n+"";e(new O_(s.statusText||`HTTP ${n} error`,n,a))}}else e(new GR(WM(i),i))},XR=(i,e,t,n)=>{const s={method:i,headers:e?.headers||{}};return n?(qR(n)?(s.headers=Ht({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(n)):s.body=n,Ht(Ht({},s),t)):s};async function $R(i,e,t,n,s,a){return new Promise((u,h)=>{i(t,XR(e,n,s,a)).then(p=>{if(!p.ok)throw p;if(n?.noResolveJson)return p;const m=p.headers.get("content-type");return!m||!m.includes("application/json")?{}:p.json()}).then(p=>u(p)).catch(p=>WR(p,h,n))})}async function aa(i,e,t,n,s){return $R(i,"POST",e,n,s,t)}var YR=class{constructor(i,e={},t){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Ht(Ht({},Dw),e),this.fetch=Iw(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(i){var e=this;try{return{data:await aa(e.fetch,`${e.url}/CreateIndex`,i,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ra(t))return{data:null,error:t};throw t}}async getIndex(i,e){var t=this;try{return{data:await aa(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:i,indexName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ra(n))return{data:null,error:n};throw n}}async listIndexes(i){var e=this;try{return{data:await aa(e.fetch,`${e.url}/ListIndexes`,i,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ra(t))return{data:null,error:t};throw t}}async deleteIndex(i,e){var t=this;try{return{data:await aa(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:i,indexName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ra(n))return{data:null,error:n};throw n}}},KR=class{constructor(i,e={},t){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Ht(Ht({},Dw),e),this.fetch=Iw(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(i){var e=this;try{if(i.vectors.length<1||i.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await aa(e.fetch,`${e.url}/PutVectors`,i,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ra(t))return{data:null,error:t};throw t}}async getVectors(i){var e=this;try{return{data:await aa(e.fetch,`${e.url}/GetVectors`,i,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ra(t))return{data:null,error:t};throw t}}async listVectors(i){var e=this;try{if(i.segmentCount!==void 0){if(i.segmentCount<1||i.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(i.segmentIndex!==void 0&&(i.segmentIndex<0||i.segmentIndex>=i.segmentCount))throw new Error(`segmentIndex must be between 0 and ${i.segmentCount-1}`)}return{data:await aa(e.fetch,`${e.url}/ListVectors`,i,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ra(t))return{data:null,error:t};throw t}}async queryVectors(i){var e=this;try{return{data:await aa(e.fetch,`${e.url}/QueryVectors`,i,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ra(t))return{data:null,error:t};throw t}}async deleteVectors(i){var e=this;try{if(i.keys.length<1||i.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await aa(e.fetch,`${e.url}/DeleteVectors`,i,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ra(t))return{data:null,error:t};throw t}}},ZR=class{constructor(i,e={},t){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Ht(Ht({},Dw),e),this.fetch=Iw(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(i){var e=this;try{return{data:await aa(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:i},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ra(t))return{data:null,error:t};throw t}}async getBucket(i){var e=this;try{return{data:await aa(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:i},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ra(t))return{data:null,error:t};throw t}}async listBuckets(i={}){var e=this;try{return{data:await aa(e.fetch,`${e.url}/ListVectorBuckets`,i,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ra(t))return{data:null,error:t};throw t}}async deleteBucket(i){var e=this;try{return{data:await aa(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:i},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ra(t))return{data:null,error:t};throw t}}},JR=class extends ZR{constructor(i,e={}){super(i,e.headers||{},e.fetch)}from(i){return new QR(this.url,this.headers,i,this.fetch)}async createBucket(i){var e=()=>super.createBucket,t=this;return e().call(t,i)}async getBucket(i){var e=()=>super.getBucket,t=this;return e().call(t,i)}async listBuckets(i={}){var e=()=>super.listBuckets,t=this;return e().call(t,i)}async deleteBucket(i){var e=()=>super.deleteBucket,t=this;return e().call(t,i)}},QR=class extends YR{constructor(i,e,t,n){super(i,e,n),this.vectorBucketName=t}async createIndex(i){var e=()=>super.createIndex,t=this;return e().call(t,Ht(Ht({},i),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(i={}){var e=()=>super.listIndexes,t=this;return e().call(t,Ht(Ht({},i),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(i){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,i)}async deleteIndex(i){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,i)}index(i){return new ej(this.url,this.headers,this.vectorBucketName,i,this.fetch)}},ej=class extends KR{constructor(i,e,t,n,s){super(i,e,s),this.vectorBucketName=t,this.indexName=n}async putVectors(i){var e=()=>super.putVectors,t=this;return e().call(t,Ht(Ht({},i),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(i){var e=()=>super.getVectors,t=this;return e().call(t,Ht(Ht({},i),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(i={}){var e=()=>super.listVectors,t=this;return e().call(t,Ht(Ht({},i),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(i){var e=()=>super.queryVectors,t=this;return e().call(t,Ht(Ht({},i),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(i){var e=()=>super.deleteVectors,t=this;return e().call(t,Ht(Ht({},i),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},tj=class extends VR{constructor(i,e={},t,n){super(i,e,t,n)}from(i){return new FR(this.url,this.headers,i,this.fetch)}get vectors(){return new JR(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new HR(this.url+"/iceberg",this.headers,this.fetch)}};const CT="2.91.0",Bf=30*1e3,Q1=3,L_=Q1*Bf,nj="http://localhost:9999",ij="supabase.auth.token",sj={"X-Client-Info":`gotrue-js/${CT}`},ew="X-Supabase-Api-Version",RT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},rj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,aj=600*1e3;class Eg extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function kt(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class oj extends Eg{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function lj(i){return kt(i)&&i.name==="AuthApiError"}class Id extends Eg{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class dc extends Eg{constructor(e,t,n,s){super(e,n,s),this.name=t,this.status=n}}class sa extends dc{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function cj(i){return kt(i)&&i.name==="AuthSessionMissingError"}class uf extends dc{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Gx extends dc{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qx extends dc{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function uj(i){return kt(i)&&i.name==="AuthImplicitGrantRedirectError"}class XM extends dc{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class dj extends dc{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class tw extends dc{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function U_(i){return kt(i)&&i.name==="AuthRetryableFetchError"}class $M extends dc{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class nw extends dc{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Yv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),YM=` 	
\r=`.split(""),hj=(()=>{const i=new Array(128);for(let e=0;e<i.length;e+=1)i[e]=-1;for(let e=0;e<YM.length;e+=1)i[YM[e].charCodeAt(0)]=-2;for(let e=0;e<Yv.length;e+=1)i[Yv[e].charCodeAt(0)]=e;return i})();function KM(i,e,t){if(i!==null)for(e.queue=e.queue<<8|i,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(Yv[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(Yv[n]),e.queuedBits-=6}}function jT(i,e,t){const n=hj[i];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function ZM(i){const e=[],t=u=>{e.push(String.fromCodePoint(u))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=u=>{mj(u,n,t)};for(let u=0;u<i.length;u+=1)jT(i.charCodeAt(u),s,a);return e.join("")}function fj(i,e){if(i<=127){e(i);return}else if(i<=2047){e(192|i>>6),e(128|i&63);return}else if(i<=65535){e(224|i>>12),e(128|i>>6&63),e(128|i&63);return}else if(i<=1114111){e(240|i>>18),e(128|i>>12&63),e(128|i>>6&63),e(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function pj(i,e){for(let t=0;t<i.length;t+=1){let n=i.charCodeAt(t);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(i.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}fj(n,e)}}function mj(i,e,t){if(e.utf8seq===0){if(i<=127){t(i);return}for(let n=1;n<6;n+=1)if((i>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=i&31;else if(e.utf8seq===3)e.codepoint=i&15;else if(e.utf8seq===4)e.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|i&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Wf(i){const e=[],t={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<i.length;s+=1)jT(i.charCodeAt(s),t,n);return new Uint8Array(e)}function gj(i){const e=[];return pj(i,t=>e.push(t)),new Uint8Array(e)}function Ld(i){const e=[],t={queue:0,queuedBits:0},n=s=>{e.push(s)};return i.forEach(s=>KM(s,t,n)),KM(null,t,n),e.join("")}function xj(i){return Math.round(Date.now()/1e3)+i}function vj(){return Symbol("auth-callback")}const Os=()=>typeof window<"u"&&typeof document<"u",pd={tested:!1,writable:!1},DT=()=>{if(!Os())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(pd.tested)return pd.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),pd.tested=!0,pd.writable=!0}catch{pd.tested=!0,pd.writable=!1}return pd.writable};function bj(i){const e={},t=new URL(i);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return t.searchParams.forEach((n,s)=>{e[s]=n}),e}const IT=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),yj=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Ff=async(i,e,t)=>{await i.setItem(e,JSON.stringify(t))},md=async(i,e)=>{const t=await i.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Is=async(i,e)=>{await i.removeItem(e)};class iy{constructor(){this.promise=new iy.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}iy.promiseConstructor=Promise;function P_(i){const e=i.split(".");if(e.length!==3)throw new nw("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!rj.test(e[n]))throw new nw("JWT not in base64url format");return{header:JSON.parse(ZM(e[0])),payload:JSON.parse(ZM(e[1])),signature:Wf(e[2]),raw:{header:e[0],payload:e[1]}}}async function _j(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function wj(i,e){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const u=await i(a);if(!e(a,null,u)){n(u);return}}catch(u){if(!e(a,u)){s(u);return}}})()})}function Sj(i){return("0"+i.toString(16)).substr(-2)}function Mj(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let s="";for(let a=0;a<56;a++)s+=t.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,Sj).join("")}async function Ej(i){const t=new TextEncoder().encode(i),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function Nj(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const t=await Ej(i);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function df(i,e,t=!1){const n=Mj();let s=n;t&&(s+="/PASSWORD_RECOVERY"),await Ff(i,`${e}-code-verifier`,s);const a=await Nj(n);return[a,n===a?"plain":"s256"]}const Tj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Aj(i){const e=i.headers.get(ew);if(!e||!e.match(Tj))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function kj(i){if(!i)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(i<=e)throw new Error("JWT has expired")}function Cj(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Rj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function hf(i){if(!Rj.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function z_(){const i={};return new Proxy(i,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function jj(i,e){return new Proxy(i,{get:(t,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,n,s)}})}function JM(i){return JSON.parse(JSON.stringify(i))}const Cd=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Dj=[502,503,504];async function QM(i){var e;if(!yj(i))throw new tw(Cd(i),0);if(Dj.includes(i.status))throw new tw(Cd(i),i.status);let t;try{t=await i.json()}catch(a){throw new Id(Cd(a),a)}let n;const s=Aj(i);if(s&&s.getTime()>=RT["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new $M(Cd(t),i.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new sa}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,u)=>a&&typeof u=="string",!0))throw new $M(Cd(t),i.status,t.weak_password.reasons);throw new oj(Cd(t),i.status||500,n)}const Ij=(i,e,t,n)=>{const s={method:i,headers:e?.headers||{}};return i==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),t))};async function Vt(i,e,t,n){var s;const a=Object.assign({},n?.headers);a[ew]||(a[ew]=RT["2024-01-01"].name),n?.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const u=(s=n?.query)!==null&&s!==void 0?s:{};n?.redirectTo&&(u.redirect_to=n.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",p=await Oj(i,e,t+h,{headers:a,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(p):{data:Object.assign({},p),error:null}}async function Oj(i,e,t,n,s,a){const u=Ij(e,n,s,a);let h;try{h=await i(t,Object.assign({},u))}catch(p){throw console.error(p),new tw(Cd(p),0)}if(h.ok||await QM(h),n?.noResolveJson)return h;try{return await h.json()}catch(p){await QM(p)}}function vo(i){var e;let t=null;Pj(i)&&(t=Object.assign({},i),i.expires_at||(t.expires_at=xj(i.expires_in)));const n=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:t,user:n},error:null}}function eE(i){const e=vo(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=i.weak_password),e}function pu(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function Lj(i){return{data:i,error:null}}function Uj(i){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:a}=i,u=ty(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:a},p=Object.assign({},u);return{data:{properties:h,user:p},error:null}}function tE(i){return i}function Pj(i){return i.access_token&&i.refresh_token&&i.expires_in}const B_=["global","local","others"];class zj{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=IT(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=B_[0]){if(B_.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${B_.join(", ")}`);try{return await Vt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(kt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await Vt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:pu})}catch(n){if(kt(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=ty(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=n?.newEmail,delete s.newEmail),await Vt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Uj,redirectTo:t?.redirectTo})}catch(t){if(kt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Vt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:pu})}catch(t){if(kt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,s,a,u,h,p;try{const m={nextPage:null,lastPage:0,total:0},v=await Vt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:tE});if(v.error)throw v.error;const b=await v.json(),y=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(p=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&p!==void 0?p:[];return w.length>0&&(w.forEach(M=>{const k=parseInt(M.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(M.split(";")[1].split("=")[1]);m[`${T}Page`]=k}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},b),m),error:null}}catch(m){if(kt(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){hf(e);try{return await Vt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:pu})}catch(t){if(kt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){hf(e);try{return await Vt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:pu})}catch(n){if(kt(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){hf(e);try{return await Vt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:pu})}catch(n){if(kt(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){hf(e.userId);try{const{data:t,error:n}=await Vt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:n}}catch(t){if(kt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){hf(e.userId),hf(e.id);try{return{data:await Vt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(kt(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,s,a,u,h,p;try{const m={nextPage:null,lastPage:0,total:0},v=await Vt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:tE});if(v.error)throw v.error;const b=await v.json(),y=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(p=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&p!==void 0?p:[];return w.length>0&&(w.forEach(M=>{const k=parseInt(M.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(M.split(";")[1].split("=")[1]);m[`${T}Page`]=k}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},b),m),error:null}}catch(m){if(kt(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(e){try{return await Vt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(kt(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Vt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(kt(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Vt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(kt(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Vt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(kt(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Vt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(kt(t))return{data:null,error:t};throw t}}}function nE(i={}){return{getItem:e=>i[e]||null,setItem:(e,t)=>{i[e]=t},removeItem:e=>{delete i[e]}}}const ff={debug:!!(globalThis&&DT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class OT extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Bj extends OT{}async function Fj(i,e,t){ff.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),ff.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){ff.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,s.name);try{return await t()}finally{ff.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,s.name)}}else{if(e===0)throw ff.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new Bj(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(ff.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function Vj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function LT(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function Hj(i){return parseInt(i,16)}function Gj(i){const e=new TextEncoder().encode(i);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function qj(i){var e;const{chainId:t,domain:n,expirationTime:s,issuedAt:a=new Date,nonce:u,notBefore:h,requestId:p,resources:m,scheme:v,uri:b,version:y}=i;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=i.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const w=LT(i.address),M=v?`${v}://${n}`:n,k=i.statement?`${i.statement}
`:"",T=`${M} wants you to sign in with your Ethereum account:
${w}

${k}`;let N=`URI: ${b}
Version: ${y}
Chain ID: ${t}${u?`
Nonce: ${u}`:""}
Issued At: ${a.toISOString()}`;if(s&&(N+=`
Expiration Time: ${s.toISOString()}`),h&&(N+=`
Not Before: ${h.toISOString()}`),p&&(N+=`
Request ID: ${p}`),m){let j=`
Resources:`;for(const R of m){if(!R||typeof R!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${R}`);j+=`
- ${R}`}N+=j}return`${T}
${N}`}class ts extends Error{constructor({message:e,code:t,cause:n,name:s}){var a;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=s??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=t}}class Kv extends ts{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Wj({error:i,options:e}){var t,n,s;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ts({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((t=a.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new ts({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(e.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ts({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ts({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new ts({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new ts({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return a.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new ts({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new ts({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const u=window.location.hostname;if(UT(u)){if(a.rp.id!==u)return new ts({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new ts({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new ts({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new ts({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new ts({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function Xj({error:i,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ts({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new ts({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const n=window.location.hostname;if(UT(n)){if(t.rpId!==n)return new ts({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new ts({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new ts({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new ts({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class $j{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Yj=new $j;function Kj(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:e,user:t,excludeCredentials:n}=i,s=ty(i,["challenge","user","excludeCredentials"]),a=Wf(e).buffer,u=Object.assign(Object.assign({},t),{id:Wf(t.id).buffer}),h=Object.assign(Object.assign({},s),{challenge:a,user:u});if(n&&n.length>0){h.excludeCredentials=new Array(n.length);for(let p=0;p<n.length;p++){const m=n[p];h.excludeCredentials[p]=Object.assign(Object.assign({},m),{id:Wf(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return h}function Zj(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:e,allowCredentials:t}=i,n=ty(i,["challenge","allowCredentials"]),s=Wf(e).buffer,a=Object.assign(Object.assign({},n),{challenge:s});if(t&&t.length>0){a.allowCredentials=new Array(t.length);for(let u=0;u<t.length;u++){const h=t[u];a.allowCredentials[u]=Object.assign(Object.assign({},h),{id:Wf(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return a}function Jj(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const t=i;return{id:i.id,rawId:i.id,response:{attestationObject:Ld(new Uint8Array(i.response.attestationObject)),clientDataJSON:Ld(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Qj(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const t=i,n=i.getClientExtensionResults(),s=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:Ld(new Uint8Array(s.authenticatorData)),clientDataJSON:Ld(new Uint8Array(s.clientDataJSON)),signature:Ld(new Uint8Array(s.signature)),userHandle:s.userHandle?Ld(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function UT(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function iE(){var i,e;return!!(Os()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function e4(i){try{const e=await navigator.credentials.create(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Kv("Browser returned unexpected credential type",e)}:{data:null,error:new Kv("Empty credential response",e)}}catch(e){return{data:null,error:Wj({error:e,options:i})}}}async function t4(i){try{const e=await navigator.credentials.get(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Kv("Browser returned unexpected credential type",e)}:{data:null,error:new Kv("Empty credential response",e)}}catch(e){return{data:null,error:Xj({error:e,options:i})}}}const n4={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},i4={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Zv(...i){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),t=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of i)if(s)for(const a in s){const u=s[a];if(u!==void 0)if(Array.isArray(u))n[a]=u;else if(t(u))n[a]=u;else if(e(u)){const h=n[a];e(h)?n[a]=Zv(h,u):n[a]=Zv(u)}else n[a]=u}return n}function s4(i,e){return Zv(n4,i,e||{})}function r4(i,e){return Zv(i4,i,e||{})}class a4{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:s},a){try{const{data:u,error:h}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!u)return{data:null,error:h};const p=s??Yj.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:m}=u.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${n}`),m.displayName||(m.displayName=m.name)}switch(u.webauthn.type){case"create":{const m=s4(u.webauthn.credential_options.publicKey,a?.create),{data:v,error:b}=await e4({publicKey:m,signal:p});return v?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}case"request":{const m=r4(u.webauthn.credential_options.publicKey,a?.request),{data:v,error:b}=await t4(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:m,signal:p}));return v?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}}}catch(u){return kt(u)?{data:null,error:u}:{data:null,error:new Id("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!t)return{data:null,error:new Eg("rpId is required for WebAuthn authentication")};try{if(!iE())return{data:null,error:new Id("Browser does not support WebAuthn",null)};const{data:u,error:h}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:s},{request:a});if(!u)return{data:null,error:h};const{webauthn:p}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:p.type,rpId:t,rpOrigins:n,credential_response:p.credential_response}})}catch(u){return kt(u)?{data:null,error:u}:{data:null,error:new Id("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!t)return{data:null,error:new Eg("rpId is required for WebAuthn registration")};try{if(!iE())return{data:null,error:new Id("Browser does not support WebAuthn",null)};const{data:u,error:h}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(v=>{var b;return(b=v.data)===null||b===void 0?void 0:b.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===e&&y.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:h};const{data:p,error:m}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:s},{create:a});return p?this._verify({factorId:u.id,challengeId:p.challengeId,webauthn:{rpId:t,rpOrigins:n,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:m}}catch(u){return kt(u)?{data:null,error:u}:{data:null,error:new Id("Unexpected error in register",u)}}}}Vj();const o4={url:nj,storageKey:ij,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function sE(i,e,t){return await t()}const pf={};class Ng{get jwks(){var e,t;return(t=(e=pf[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){pf[this.storageKey]=Object.assign(Object.assign({},pf[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=pf[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){pf[this.storageKey]=Object.assign(Object.assign({},pf[this.storageKey]),{cachedAt:e})}constructor(e){var t,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},o4),e);if(this.storageKey=a.storageKey,this.instanceID=(t=Ng.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,Ng.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Os()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new zj({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=IT(a.fetch),this.lock=a.lock||sE,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&Os()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=Fj:this.lock=sE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new a4(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:DT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=nE(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=nE(this.memoryStorage)),Os()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${CT}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},n="none";if(Os()&&(t=bj(window.location.href),this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce")),Os()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(t,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),uj(a)){const p=(e=a.details)===null||e===void 0?void 0:e.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:u,redirectType:h}=s;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return kt(t)?this._returnResult({error:t}):this._returnResult({error:new Id("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,s;try{const a=await Vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:vo}),{data:u,error:h}=a;if(h||!u)return this._returnResult({data:{user:null,session:null},error:h});const p=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(a){if(kt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var t,n,s;try{let a;if("email"in e){const{email:v,password:b,options:y}=e;let w=null,M=null;this.flowType==="pkce"&&([w,M]=await df(this.storage,this.storageKey)),a=await Vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:v,password:b,data:(t=y?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:w,code_challenge_method:M},xform:vo})}else if("phone"in e){const{phone:v,password:b,options:y}=e;a=await Vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:b,data:(n=y?.data)!==null&&n!==void 0?n:{},channel:(s=y?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:vo})}else throw new Gx("You must provide either an email or phone number and a password");const{data:u,error:h}=a;if(h||!u)return await Is(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:h});const p=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(a){if(await Is(this.storage,`${this.storageKey}-code-verifier`),kt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:u,options:h}=e;t=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:eE})}else if("phone"in e){const{phone:a,password:u,options:h}=e;t=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:eE})}else throw new Gx("You must provide either an email or phone number and a password");const{data:n,error:s}=t;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const a=new uf;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(t){if(kt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,n,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,s,a,u,h,p,m,v,b,y;let w,M;if("message"in e)w=e.message,M=e.signature;else{const{chain:k,wallet:T,statement:N,options:j}=e;let R;if(Os())if(typeof T=="object")R=T;else{const U=window;if("ethereum"in U&&typeof U.ethereum=="object"&&"request"in U.ethereum&&typeof U.ethereum.request=="function")R=U.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!j?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=T}const D=new URL((t=j?.url)!==null&&t!==void 0?t:window.location.href),I=await R.request({method:"eth_requestAccounts"}).then(U=>U).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!I||I.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=LT(I[0]);let z=(n=j?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!z){const U=await R.request({method:"eth_chainId"});z=Hj(U)}const G={domain:D.host,address:P,statement:N,uri:D.href,version:"1",chainId:z,nonce:(s=j?.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(u=(a=j?.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(h=j?.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(p=j?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(m=j?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(v=j?.signInWithEthereum)===null||v===void 0?void 0:v.resources};w=qj(G),M=await R.request({method:"personal_sign",params:[Gj(w),P]})}try{const{data:k,error:T}=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:M},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:vo});if(T)throw T;if(!k||!k.session||!k.user){const N=new uf;return this._returnResult({data:{user:null,session:null},error:N})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:T})}catch(k){if(kt(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async signInWithSolana(e){var t,n,s,a,u,h,p,m,v,b,y,w;let M,k;if("message"in e)M=e.message,k=e.signature;else{const{chain:T,wallet:N,statement:j,options:R}=e;let D;if(Os())if(typeof N=="object")D=N;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))D=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!R?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=N}const I=new URL((t=R?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in D&&D.signIn){const P=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R?.signInWithSolana),{version:"1",domain:I.host,uri:I.href}),j?{statement:j}:null));let z;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")z=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)z=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)M=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),k=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");M=[`${I.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...j?["",j,""]:[""],"Version: 1",`URI: ${I.href}`,`Issued At: ${(s=(n=R?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=R?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((u=R?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((h=R?.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((p=R?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((m=R?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((b=(v=R?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||b===void 0)&&b.length?["Resources",...R.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);const P=await D.signMessage(new TextEncoder().encode(M),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=P}}try{const{data:T,error:N}=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:M,signature:Ld(k)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:vo});if(N)throw N;if(!T||!T.session||!T.user){const j=new uf;return this._returnResult({data:{user:null,session:null},error:j})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:N})}catch(T){if(kt(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async _exchangeCodeForSession(e){const t=await md(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(t??"").split("/");try{if(!n&&this.flowType==="pkce")throw new dj;const{data:a,error:u}=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:vo});if(await Is(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!a||!a.session||!a.user){const h=new uf;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return a.session&&(await this._saveSession(a.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",a.session)},0)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:u})}catch(a){if(await Is(this.storage,`${this.storageKey}-code-verifier`),kt(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:t,provider:n,token:s,access_token:a,nonce:u}=e,h=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:u,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:vo}),{data:p,error:m}=h;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p||!p.session||!p.user){const v=new uf;return this._returnResult({data:{user:null,session:null},error:v})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:m})}catch(t){if(kt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,n,s,a,u;try{if("email"in e){const{email:h,options:p}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await df(this.storage,this.storageKey));const{error:b}=await Vt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(t=p?.data)!==null&&t!==void 0?t:{},create_user:(n=p?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:m,code_challenge_method:v},redirectTo:p?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}if("phone"in e){const{phone:h,options:p}=e,{data:m,error:v}=await Vt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(s=p?.data)!==null&&s!==void 0?s:{},create_user:(a=p?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(u=p?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m?.message_id},error:v})}throw new Gx("You must provide either an email or phone number.")}catch(h){if(await Is(this.storage,`${this.storageKey}-code-verifier`),kt(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(e){var t,n;try{let s,a;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:u,error:h}=await Vt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:vo});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const p=u.session,m=u.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(s){if(kt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var t,n,s,a,u;try{let h=null,p=null;this.flowType==="pkce"&&([h,p]=await df(this.storage,this.storageKey));const m=await Vt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:p}),headers:this.headers,xform:Lj});return!((a=m.data)===null||a===void 0)&&a.url&&Os()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(h){if(await Is(this.storage,`${this.storageKey}-code-verifier`),kt(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new sa;const{error:s}=await Vt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(kt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:a}=e,{error:u}=await Vt(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in e){const{phone:n,type:s,options:a}=e,{data:u,error:h}=await Vt(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:h})}throw new Gx("You must provide either an email or phone number and a type")}catch(t){if(kt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await md(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<L_:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const u=await md(this.userStorage,this.storageKey+"-user");u?.user?e.user=u.user:e.user=z_()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=jj(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await Vt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:pu}):await this._useSession(async t=>{var n,s,a;const{data:u,error:h}=t;if(h)throw h;return!(!((n=u.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new sa}:await Vt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=u.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:pu})})}catch(t){if(kt(t))return cj(t)&&(await this._removeSession(),await Is(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new sa;const u=s.session;let h=null,p=null;this.flowType==="pkce"&&e.email!=null&&([h,p]=await df(this.storage,this.storageKey));const{data:m,error:v}=await Vt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:p}),jwt:u.access_token,xform:pu});if(v)throw v;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(n){if(await Is(this.storage,`${this.storageKey}-code-verifier`),kt(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new sa;const t=Date.now()/1e3;let n=t,s=!0,a=null;const{payload:u}=P_(e.access_token);if(u.exp&&(n=u.exp,s=n<=t),s){const{data:h,error:p}=await this._callRefreshToken(e.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!h)return{data:{user:null,session:null},error:null};a=h}else{const{data:h,error:p}=await this._getUser(e.access_token);if(p)throw p;a={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(t){if(kt(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:u,error:h}=t;if(h)throw h;e=(n=u.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new sa;const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(kt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Os())throw new qx("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qx(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new XM("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qx("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new XM("No code detected.");const{data:j,error:R}=await this._exchangeCodeForSession(e.code);if(R)throw R;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:u,expires_in:h,expires_at:p,token_type:m}=e;if(!a||!h||!u||!m)throw new qx("No session defined in URL");const v=Math.round(Date.now()/1e3),b=parseInt(h);let y=v+b;p&&(y=parseInt(p));const w=y-v;w*1e3<=Bf&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${b}s`);const M=y-b;v-M>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",M,y,v):v-M<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",M,y,v);const{data:k,error:T}=await this._getUser(a);if(T)throw T;const N={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:b,expires_at:y,refresh_token:u,token_type:m,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:N,redirectType:e.type},error:null})}catch(n){if(kt(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await md(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:s,error:a}=t;if(a)return this._returnResult({error:a});const u=(n=s.session)===null||n===void 0?void 0:n.access_token;if(u){const{error:h}=await this.admin.signOut(u,e);if(h&&!(lj(h)&&(h.status===404||h.status===401||h.status===403)))return this._returnResult({error:h})}return e!=="others"&&(await this._removeSession(),await Is(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=vj(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,s;try{const{data:{session:a},error:u}=t;if(u)throw u;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await df(this.storage,this.storageKey,!0));try{return await Vt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(await Is(this.storage,`${this.storageKey}-code-verifier`),kt(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(kt(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:s}=await this._useSession(async a=>{var u,h,p,m,v;const{data:b,error:y}=a;if(y)throw y;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(p=e.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await Vt(this.fetch,"GET",w,{headers:this.headers,jwt:(v=(m=b.session)===null||m===void 0?void 0:m.access_token)!==null&&v!==void 0?v:void 0})});if(s)throw s;return Os()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:e.provider,url:n?.url},error:null})}catch(n){if(kt(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:s,data:{session:a}}=t;if(s)throw s;const{options:u,provider:h,token:p,access_token:m,nonce:v}=e,b=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:h,id_token:p,access_token:m,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:vo}),{data:y,error:w}=b;return w?this._returnResult({data:{user:null,session:null},error:w}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new uf}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:w}))}catch(s){if(await Is(this.storage,`${this.storageKey}-code-verifier`),kt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,s;const{data:a,error:u}=t;if(u)throw u;return await Vt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(kt(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await wj(async s=>(s>0&&await _j(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await Vt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:vo})),(s,a)=>{const u=200*Math.pow(2,s);return a&&U_(a)&&Date.now()+u-n<Bf})}catch(n){if(this._debug(t,"error",n),kt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Os()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await md(this.storage,this.storageKey);if(s&&this.userStorage){let u=await md(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:s.user},await Ff(this.userStorage,this.storageKey+"-user",u)),s.user=(e=u?.user)!==null&&e!==void 0?e:z_()}else if(s&&!s.user&&!s.user){const u=await md(this.storage,this.storageKey+"-user");u&&u?.user?(s.user=u.user,await Is(this.storage,this.storageKey+"-user"),await Ff(this.storage,this.storageKey,s)):s.user=z_()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<L_;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${L_}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:u}=await this._callRefreshToken(s.refresh_token);u&&(console.error(u),U_(u)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:h}=await this._getUser(s.access_token);!h&&u?.user?(s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(n,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new sa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new iy;const{data:a,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!a.session)throw new sa;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const h={data:a.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(a){if(this._debug(s,"error",a),kt(a)){const u={data:null,error:a};return U_(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(u),u}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,t)}catch(p){a.push(p)}});if(await Promise.all(u),a.length>0){for(let h=0;h<a.length;h+=1)console.error(a[h]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Is(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await Ff(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const a=JM(s);await Ff(this.storage,this.storageKey,a)}else{const s=JM(t);await Ff(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Is(this.storage,this.storageKey),await Is(this.storage,this.storageKey+"-code-verifier"),await Is(this.storage,this.storageKey+"-user"),this.userStorage&&await Is(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Os()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Bf);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Bf);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Bf}ms, refresh threshold is ${Q1} ticks`),s<=Q1&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof OT)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Os()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const s=[`provider=${encodeURIComponent(t)}`];if(n?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,u]=await df(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(u)}`});s.push(h.toString())}if(n?.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n?.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:s,error:a}=t;return a?this._returnResult({data:null,error:a}):await Vt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(kt(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,s;const{data:a,error:u}=t;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:p,error:m}=await Vt(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});return m?this._returnResult({data:null,error:m}):(e.factorType==="totp"&&p.type==="totp"&&(!((s=p?.totp)===null||s===void 0)&&s.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(t){if(kt(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:a}=t;if(a)return this._returnResult({data:null,error:a});const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Jj(e.webauthn.credential_response):Qj(e.webauthn.credential_response)})}:{code:e.code}),{data:h,error:p}=await Vt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:p}))})}catch(t){if(kt(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:a}=t;if(a)return this._returnResult({data:null,error:a});const u=await Vt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});if(u.error)return u;const{data:h}=u;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:Kj(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:Zj(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(kt(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=t?.factors)!==null&&e!==void 0?e:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=P_(n.access_token);let u=null;a.aal&&(u=a.aal);let h=u;((t=(e=n.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(h="aal2");const m=a.amr||[];return{data:{currentLevel:u,nextLevel:h,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:n},error:s}=t;return s?this._returnResult({data:null,error:s}):n?await Vt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new sa})})}catch(t){if(kt(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new sa});const u=await Vt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return u.data&&u.data.redirect_url&&Os()&&!t?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(n){if(kt(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new sa});const u=await Vt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return u.data&&u.data.redirect_url&&Os()&&!t?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(n){if(kt(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;return n?this._returnResult({data:null,error:n}):t?await Vt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new sa})})}catch(e){if(kt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:n},error:s}=t;return s?this._returnResult({data:null,error:s}):n?(await Vt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new sa})})}catch(t){if(kt(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(h=>h.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(h=>h.kid===e),n&&this.jwks_cached_at+aj>s)return n;const{data:a,error:u}=await Vt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,n=a.keys.find(h=>h.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:w,error:M}=await this.getSession();if(M||!w.session)return this._returnResult({data:null,error:M});n=w.session.access_token}const{header:s,payload:a,signature:u,raw:{header:h,payload:p}}=P_(n);t?.allowExpired||kj(a.exp);const m=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!m){const{error:w}=await this.getUser(n);if(w)throw w;return{data:{claims:a,header:s,signature:u},error:null}}const v=Cj(s.alg),b=await crypto.subtle.importKey("jwk",m,v,!0,["verify"]);if(!await crypto.subtle.verify(v,b,u,gj(`${h}.${p}`)))throw new nw("Invalid JWT signature");return{data:{claims:a,header:s,signature:u},error:null}}catch(n){if(kt(n))return this._returnResult({data:null,error:n});throw n}}}Ng.nextInstanceID={};const l4=Ng,c4="2.91.0";let ig="";typeof Deno<"u"?ig="deno":typeof document<"u"?ig="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ig="react-native":ig="node";const u4={"X-Client-Info":`supabase-js-${ig}/${c4}`},d4={headers:u4},h4={schema:"public"},f4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},p4={};function Tg(i){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(i)}function m4(i,e){if(Tg(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(Tg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function g4(i){var e=m4(i,"string");return Tg(e)=="symbol"?e:e+""}function x4(i,e,t){return(e=g4(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function rE(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function Li(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rE(Object(t),!0).forEach(function(n){x4(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):rE(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}const v4=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),b4=()=>Headers,y4=(i,e,t)=>{const n=v4(t),s=b4();return async(a,u)=>{var h;const p=(h=await e())!==null&&h!==void 0?h:i;let m=new s(u?.headers);return m.has("apikey")||m.set("apikey",i),m.has("Authorization")||m.set("Authorization",`Bearer ${p}`),n(a,Li(Li({},u),{},{headers:m}))}};function _4(i){return i.endsWith("/")?i:i+"/"}function w4(i,e){var t,n;const{db:s,auth:a,realtime:u,global:h}=i,{db:p,auth:m,realtime:v,global:b}=e,y={db:Li(Li({},p),s),auth:Li(Li({},m),a),realtime:Li(Li({},v),u),storage:{},global:Li(Li(Li({},b),h),{},{headers:Li(Li({},(t=b?.headers)!==null&&t!==void 0?t:{}),(n=h?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return i.accessToken?y.accessToken=i.accessToken:delete y.accessToken,y}function S4(i){const e=i?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(_4(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var M4=class extends l4{constructor(i){super(i)}},E4=class{constructor(i,e,t){var n,s;this.supabaseUrl=i,this.supabaseKey=e;const a=S4(i);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const u=`sb-${a.hostname.split(".")[0]}-auth-token`,h={db:h4,realtime:p4,auth:Li(Li({},f4),{},{storageKey:u}),global:d4},p=w4(t??{},h);if(this.storageKey=(n=p.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=p.global.headers)!==null&&s!==void 0?s:{},p.accessToken)this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(v,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}});else{var m;this.auth=this._initSupabaseAuthClient((m=p.auth)!==null&&m!==void 0?m:{},this.headers,p.global.fetch)}this.fetch=y4(e,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Li({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new sR(new URL("rest/v1",a).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new tj(this.storageUrl.href,this.headers,this.fetch,t?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new QC(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(i){return this.rest.from(i)}schema(i){return this.rest.schema(i)}rpc(i,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(i,e,t)}channel(i,e={config:{}}){return this.realtime.channel(i,e)}getChannels(){return this.realtime.getChannels()}removeChannel(i){return this.realtime.removeChannel(i)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var i=this,e,t;if(i.accessToken)return await i.accessToken();const{data:n}=await i.auth.getSession();return(e=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:i.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:i,persistSession:e,detectSessionInUrl:t,storage:n,userStorage:s,storageKey:a,flowType:u,lock:h,debug:p,throwOnError:m},v,b){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new M4({url:this.authUrl.href,headers:Li(Li({},y),v),storageKey:a,autoRefreshToken:i,persistSession:e,detectSessionInUrl:t,storage:n,userStorage:s,flowType:u,lock:h,debug:p,throwOnError:m,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(i){return new _R(this.realtimeUrl.href,Li(Li({},i),{},{params:Li(Li({},{apikey:this.supabaseKey}),i?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,e)=>{this._handleTokenChanged(i,"CLIENT",e?.access_token)})}_handleTokenChanged(i,e,t){(i==="TOKEN_REFRESHED"||i==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):i==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const N4=(i,e,t)=>new E4(i,e,t);function T4(){if(typeof window<"u")return!1;const i=globalThis.process;if(!i)return!1;const e=i.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}T4()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const A4="https://tkvogxqtylddfzzsgmtv.supabase.co",k4="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRrdm9neHF0eWxkZGZ6enNnbXR2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgxNTQ5MTIsImV4cCI6MjA4MzczMDkxMn0.3WKSkeFCj8BmZwBBdnMFUwJRzzp8KP42k1HmoiBZce4",Rn=N4(A4,k4),C4=({setPage:i})=>{const[e,t]=ie.useState(!1),[n,s]=ie.useState(!1);ie.useEffect(()=>{localStorage.getItem("cookie-consent-v4")||t(!0)},[]);const a=async()=>{localStorage.setItem("cookie-consent-v4","all"),t(!1);const{data:{session:h}}=await Rn.auth.getSession();h?.user&&await Rn.from("cookie_consents").upsert({user_id:h.user.id,consent_level:"all",updated_at:new Date().toISOString()})},u=async()=>{localStorage.setItem("cookie-consent-v4","necessary"),t(!1);const{data:{session:h}}=await Rn.auth.getSession();h?.user&&await Rn.from("cookie_consents").upsert({user_id:h.user.id,consent_level:"necessary",updated_at:new Date().toISOString()})};return e?l.jsx("div",{className:"fixed bottom-6 left-6 right-6 z-[100] animate-in slide-in-from-bottom-10 fade-in duration-700",children:l.jsxs("div",{className:"glass bg-slate-900/90 backdrop-blur-2xl border border-white/10 rounded-[2rem] p-4 md:p-6 shadow-[0_20px_60px_rgba(0,0,0,0.6)] max-w-5xl mx-auto overflow-hidden",children:[l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 lg:items-center",children:[l.jsxs("div",{className:"flex-grow space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-3 text-orange-400",children:[l.jsx(hl,{size:24,className:"animate-pulse"}),l.jsx("h2",{className:"text-lg md:text-xl font-bold text-white tracking-tight",children:"Vi vrnar om din integritet"})]}),l.jsx("div",{className:"space-y-2 text-slate-300 text-xs md:text-sm leading-relaxed font-light max-w-2xl",children:l.jsx("p",{children:"Vi anvnder cookies fr att ge dig en s trygg och fungerande upplevelse som mjligt. Vissa krvs fr grundfunktionen, medan andra hjlper oss att frbttra vra verktyg fr dig."})}),l.jsxs("div",{className:"flex flex-wrap gap-4 pt-1",children:[l.jsx("button",{onClick:()=>i(Se.COOKIE_POLICY),className:"text-xs font-bold text-slate-400 hover:text-orange-400 underline transition-colors uppercase tracking-widest",children:"Ls vr policy"}),l.jsxs("button",{onClick:()=>s(!n),className:"flex items-center gap-1 text-xs font-bold text-slate-400 hover:text-orange-400 underline transition-colors uppercase tracking-widest",children:[n?l.jsx(fT,{size:14}):l.jsx(qv,{size:14})," ",n?"Dlj instllningar":"Instllningar"]})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row lg:flex-col gap-2 min-w-[180px]",children:[l.jsx("button",{onClick:a,className:"px-6 py-3 bg-orange-500 hover:bg-orange-400 text-slate-950 rounded-xl font-black transition-all hover:scale-105 shadow-xl shadow-orange-500/20 text-xs md:text-sm",children:"Godknn alla"}),l.jsx("button",{onClick:u,className:"px-6 py-3 bg-white/5 hover:bg-white/10 border border-white/10 text-white rounded-xl font-bold transition-all text-xs md:text-sm",children:"Endast ndvndiga"})]})]}),n&&l.jsxs("div",{className:"pt-8 border-t border-white/10 grid md:grid-cols-2 gap-6 animate-in slide-in-from-top-4 duration-500",children:[l.jsxs("div",{className:"glass bg-white/5 p-6 rounded-2xl border border-white/5 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-white font-bold",children:[l.jsx(qd,{size:16,className:"text-blue-400"})," Ndvndiga"]}),l.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-500 font-black",children:"Alltid aktiva"})]}),l.jsx("p",{className:"text-xs text-slate-400 leading-relaxed font-light",children:'Dessa r sidans "autonoma nervsystem". Krvs fr grundlggande funktioner som skerhet och sessioner.'})]}),l.jsxs("div",{className:"glass bg-white/5 p-6 rounded-2xl border border-white/5 space-y-3 opacity-60",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-white font-bold",children:[l.jsx(gT,{size:16,className:"text-orange-400"})," Analys & Statistik"]}),l.jsx("div",{className:"w-10 h-5 bg-slate-800 rounded-full relative",children:l.jsx("div",{className:"absolute right-1 top-1 bottom-1 w-3 bg-slate-600 rounded-full"})})]}),l.jsx("p",{className:"text-xs text-slate-400 leading-relaxed font-light",children:"Hjlper oss att frst hur sidan anvnds s vi kan frbttra upplevelsen. (Privacy by default: inaktiverat tills du godknner)."})]})]})]}),l.jsx("button",{onClick:()=>t(!1),className:"absolute top-6 right-6 text-slate-500 hover:text-white transition-colors","aria-label":"Stng",children:l.jsx(Mu,{size:20})})]})}):null},Ow=()=>{const[i,e]=ie.useState(""),[t,n]=ie.useState(""),[s,a]=ie.useState(!1),[u,h]=ie.useState("idle"),p=m=>{m.preventDefault(),a(!0),setTimeout(()=>{a(!1),h("success"),e(""),n(""),setTimeout(()=>h("idle"),6e3)},1200)};return l.jsxs("section",{className:"relative w-screen left-1/2 right-1/2 -ml-[50vw] -mr-[50vw] my-12 overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-white/[0.03] backdrop-blur-2xl border-y border-white/10"}),l.jsx("div",{className:"absolute top-0 inset-x-0 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"}),l.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full bg-amber-500/5 blur-[120px] pointer-events-none opacity-20"}),l.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto py-10 px-6 md:px-12 flex flex-col lg:flex-row items-center justify-between gap-8 lg:gap-16",children:[l.jsxs("div",{className:"newsletter-text text-center lg:text-left space-y-2 lg:max-w-md",children:[l.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-0.5 bg-amber-500/10 rounded-full border border-amber-500/20 text-amber-500 text-[10px] font-bold uppercase tracking-widest mb-1",children:[l.jsx(ap,{size:12})," Nyhetsbrev"]}),l.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-white leading-tight",children:"Prenumerera p vrt nyhetsbrev"}),l.jsx("p",{className:"text-zinc-400 text-sm font-medium leading-relaxed",children:"Reflektioner om trauma och utveckling  direkt till din inkorg."})]}),l.jsxs("div",{className:"w-full lg:max-w-2xl",children:[u==="success"?l.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/20 py-4 px-8 rounded-2xl text-center animate-fade-in flex items-center justify-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-emerald-500 text-black rounded-full flex items-center justify-center shadow-lg",children:l.jsx(bC,{size:20,strokeWidth:3})}),l.jsx("span",{className:"text-emerald-400 font-bold",children:"Tack! Vi har lagt till dig p listan."})]}):l.jsxs("form",{className:"flex flex-col sm:flex-row gap-3 w-full",onSubmit:p,children:[l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1",children:[l.jsx("input",{type:"text",placeholder:"Ditt namn",value:t,onChange:m=>n(m.target.value),className:"flex-1 p-4 bg-black/40 border border-white/10 rounded-xl text-white placeholder-zinc-600 outline-none focus:border-amber-500 transition-all text-sm",required:!0}),l.jsx("input",{type:"email",placeholder:"Din e-postadress",value:i,onChange:m=>e(m.target.value),className:"flex-[1.2] p-4 bg-black/40 border border-white/10 rounded-xl text-white placeholder-zinc-600 outline-none focus:border-amber-500 transition-all text-sm",required:!0})]}),l.jsx("button",{type:"submit",disabled:s,className:"px-8 py-4 bg-white/10 hover:bg-white/20 border border-white/20 text-white rounded-xl cursor-pointer font-bold text-sm transition-all hover:scale-105 active:scale-95 flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:s?l.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):l.jsxs(l.Fragment,{children:["Prenumerera ",l.jsx(ml,{size:16})]})})]}),l.jsxs("p",{className:"mt-4 text-[10px] text-zinc-500 text-center lg:text-left flex items-center justify-center lg:justify-start gap-2 italic",children:[l.jsx(ua,{size:10,className:"text-amber-500"})," Din integritet r viktig. Vi hanterar dina uppgifter med strsta omsorg."]})]})]})]})},Lw=({isOpen:i,onClose:e,pdfUrl:t,title:n})=>i?l.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6 animate-in fade-in duration-200",children:[l.jsx("div",{className:"absolute inset-0 bg-slate-950/80 backdrop-blur-sm",onClick:e}),l.jsxs("div",{className:"relative w-full max-w-5xl h-[85vh] bg-slate-900 border border-slate-700 rounded-2xl shadow-2xl flex flex-col animate-in zoom-in-95 duration-300",children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-700 bg-slate-800/50 rounded-t-2xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-orange-500/10 p-2 rounded-lg text-orange-500",children:l.jsx(yg,{size:20})}),l.jsx("h3",{className:"font-bold text-white text-lg",children:n})]}),l.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-700 rounded-full text-slate-400 hover:text-white transition-colors",children:l.jsx(Mu,{size:20})})]}),l.jsx("div",{className:"flex-1 bg-slate-800 relative",children:l.jsx("iframe",{src:`${t}#toolbar=0&view=FitH`,className:"w-full h-full border-none rounded-b-2xl",title:n})})]})]}):null,za=({src:i,alt:e,className:t="",imgClassName:n="object-cover",defaultRotation:s="-2deg",grayscale:a=!0,blur:u="0px",hoverBlur:h="0px"})=>{const[p,m]=ie.useState(!1);return l.jsxs("div",{className:`relative overflow-hidden rounded-2xl shadow-xl transition-all duration-500 ease-out cursor-pointer z-10 hover:z-20 ${t}`,style:{transform:`rotate(${p?"0deg":s}) scale(${p?1.05:1})`,boxShadow:p?"0 20px 40px rgba(0,0,0,0.3)":"0 10px 20px rgba(0,0,0,0.1)",filter:`blur(${p?h:u})`},onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[l.jsx("img",{src:i,alt:e,className:`w-full h-full transition-all duration-700 ${n} ${a?p?"grayscale-0":"grayscale":""}`}),l.jsx("div",{className:`absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent transition-opacity duration-500 ${p?"opacity-100":"opacity-0"}`})]})},PT=()=>l.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[l.jsxs("div",{className:"text-center space-y-4 mb-12",children:[l.jsx("h2",{className:"text-4xl font-bold text-white tracking-tight",children:"Kontakt & Bokning"}),l.jsx("p",{className:"text-slate-400 max-w-2xl mx-auto text-lg leading-relaxed",children:"Inom Horizonten har vi tillgng till legitimerade terapeuter och experter. Boka ett samtal fr att f professionell vgledning och std fr din situation."})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"group bg-slate-900 border border-slate-800 rounded-3xl overflow-hidden hover:border-orange-500/30 transition-all hover:shadow-[0_0_40px_-10px_rgba(249,115,22,0.15)] flex flex-col",children:[l.jsxs("div",{className:"relative h-80 overflow-hidden bg-slate-800",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent z-10 opacity-60"}),l.jsx("img",{src:"/assets/minerva_profil.jpg",alt:"Minerva Kassab",className:"w-full h-full object-cover object-top opacity-60 grayscale group-hover:grayscale-0 transition-all duration-1000 group-hover:scale-105"})]}),l.jsxs("div",{className:"p-6 flex-grow flex flex-col",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"Minerva Kassab"}),l.jsxs("p",{className:"text-orange-400 font-medium flex items-center gap-2",children:[l.jsx(jd,{size:16}),"Psykolog!"]})]}),l.jsx("p",{className:"text-slate-400 text-sm leading-relaxed mb-6 flex-grow",children:"Erbjuder stdjande samtal och terapi med fokus p personlig utveckling och relationshantering."}),l.jsxs("button",{onClick:()=>window.location.href="mailto:minerva@klattertradet.se,billy@klattertradet.se?subject=Bokningsfrfrgan via Horizonten",className:"w-full bg-slate-800 hover:bg-orange-500 hover:text-slate-900 text-white font-bold py-3 rounded-xl transition-all flex items-center justify-center gap-2 group/btn",children:[l.jsx(Ba,{size:18}),l.jsx("span",{children:"Boka Samtal"})]})]})]}),l.jsxs("div",{className:"group bg-slate-900 border border-slate-800 rounded-3xl overflow-hidden hover:border-orange-500/30 transition-all hover:shadow-[0_0_40px_-10px_rgba(249,115,22,0.15)] flex flex-col",children:[l.jsxs("div",{className:"relative h-80 overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent z-10 opacity-60"}),l.jsx("img",{src:"/assets/linda-matta-new.jpeg",alt:"Linda Matta",className:"w-full h-full object-cover object-top opacity-60 grayscale group-hover:grayscale-0 transition-all duration-1000 group-hover:scale-105"}),l.jsx("div",{className:"absolute bottom-4 left-4 z-20",children:l.jsx("span",{className:"inline-block px-3 py-1 bg-orange-500 text-slate-950 text-xs font-bold uppercase tracking-wider rounded-full mb-2",children:"Tillgnglig"})})]}),l.jsxs("div",{className:"p-6 flex-grow flex flex-col",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"Linda Matta"}),l.jsxs("p",{className:"text-orange-400 font-medium flex items-center gap-2",children:[l.jsx(jd,{size:16}),"Samtalsterapeut & Hudterapeut"]})]}),l.jsx("p",{className:"text-slate-400 text-sm leading-relaxed mb-6 flex-grow",children:"Linda erbjuder en unik helhetssyn dr det inre och yttre vlmendet mts. Som samtalsterapeut ger hon std i livets utmaningar, och som hudterapeut frstr hon vikten av att ta hand om sig sjlv fysiskt fr att m bra psykiskt."}),l.jsx("div",{className:"space-y-3 mb-8 text-sm text-slate-300"}),l.jsxs("button",{onClick:()=>window.location.href="mailto:linda@klattertradet.se,billy@klattertradet.se?subject=Bokningsfrfrgan via Horizonten",className:"w-full bg-slate-800 hover:bg-orange-500 hover:text-slate-900 text-white font-bold py-3 rounded-xl transition-all flex items-center justify-center gap-2 group/btn",children:[l.jsx(Ba,{size:18}),l.jsx("span",{children:"Boka Samtal"})]})]})]}),l.jsxs("div",{className:"group bg-slate-900 border border-slate-800 rounded-3xl overflow-hidden hover:border-orange-500/30 transition-all hover:shadow-[0_0_40px_-10px_rgba(249,115,22,0.15)] flex flex-col",children:[l.jsxs("div",{className:"relative h-80 overflow-hidden bg-slate-800",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent z-10 opacity-60"}),l.jsx("img",{src:"/assets/billy_profil.jpeg",alt:"Billy Ljungberg",className:"w-full h-full object-cover object-top opacity-60 grayscale group-hover:grayscale-0 transition-all duration-1000 group-hover:scale-105"}),l.jsx("div",{className:"absolute bottom-4 left-4 z-20",children:l.jsx("span",{className:"inline-block px-3 py-1 bg-green-500 text-slate-950 text-xs font-bold uppercase tracking-wider rounded-full mb-2",children:"Grundare"})})]}),l.jsxs("div",{className:"p-6 flex-grow flex flex-col",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"Billy Ljungberg"}),l.jsxs("p",{className:"text-orange-400 font-medium flex items-center gap-2",children:[l.jsx(jd,{size:16}),"Gestaltterapeut / Beroendeterapeut"]})]}),l.jsx("p",{className:"text-slate-400 text-sm leading-relaxed mb-6 flex-grow",children:"Grundare av Klttertrdet. Specialiserad p traumamedveten omsorg, beroendeproblematik och processledning."}),l.jsxs("button",{onClick:()=>window.location.href="mailto:billy@klattertradet.se?subject=Bokningsfrfrgan via Horizonten",className:"w-full bg-slate-800 hover:bg-orange-500 hover:text-slate-900 text-white font-bold py-3 rounded-xl transition-all flex items-center justify-center gap-2 group/btn",children:[l.jsx(Ba,{size:18}),l.jsx("span",{children:"Boka Samtal"})]})]})]}),l.jsxs("div",{className:"group bg-slate-900 border border-slate-800 rounded-3xl overflow-hidden hover:border-orange-500/30 transition-all hover:shadow-[0_0_40px_-10px_rgba(249,115,22,0.15)] flex flex-col",children:[l.jsxs("div",{className:"relative h-80 overflow-hidden bg-slate-800",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent z-10 opacity-60"}),l.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-700",children:l.jsx(ws,{size:64})})]}),l.jsxs("div",{className:"p-6 flex-grow flex flex-col",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"Mattias O Sandin"}),l.jsxs("p",{className:"text-orange-400 font-medium flex items-center gap-2",children:[l.jsx(jd,{size:16}),"Samtalsterapeut"]})]}),l.jsx("p",{className:"text-slate-400 text-sm leading-relaxed mb-6 flex-grow",children:"Erfaren terapeut som mter dig dr du r. Fokus p trygghet, insikt och frndring."}),l.jsxs("button",{onClick:()=>window.location.href="mailto:mattias@klattertradet.se,billy@klattertradet.se?subject=Bokningsfrfrgan via Horizonten",className:"w-full bg-slate-800 hover:bg-orange-500 hover:text-slate-900 text-white font-bold py-3 rounded-xl transition-all flex items-center justify-center gap-2 group/btn",children:[l.jsx(Ba,{size:18}),l.jsx("span",{children:"Boka Samtal"})]})]})]}),l.jsxs("div",{className:"group bg-slate-900 border border-slate-800 rounded-3xl overflow-hidden hover:border-orange-500/30 transition-all hover:shadow-[0_0_40px_-10px_rgba(249,115,22,0.15)] flex flex-col",children:[l.jsxs("div",{className:"relative h-80 overflow-hidden bg-slate-800",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent z-10 opacity-60"}),l.jsx("img",{src:"/assets/malin-widerlov.png",alt:"Malin Widerlv",className:"w-full h-full object-cover object-top opacity-60 grayscale group-hover:grayscale-0 transition-all duration-1000 group-hover:scale-105"})]}),l.jsxs("div",{className:"p-6 flex-grow flex flex-col",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"Malin Widerlv"}),l.jsxs("p",{className:"text-orange-400 font-medium flex items-center gap-2",children:[l.jsx(jd,{size:16}),"Behandlingspedagog & Socialarbetare"]})]}),l.jsx("p",{className:"text-slate-400 text-sm leading-relaxed mb-6 flex-grow",children:"Specialiserad p familjefrgor och socialt std. Malin fungerar ven som familjeombud och stttar i komplexa livssituationer."}),l.jsxs("button",{onClick:()=>window.location.href="mailto:malin@klattertradet.se,billy@klattertradet.se?subject=Bokningsfrfrgan via Horizonten",className:"w-full bg-slate-800 hover:bg-orange-500 hover:text-slate-900 text-white font-bold py-3 rounded-xl transition-all flex items-center justify-center gap-2 group/btn",children:[l.jsx(Ba,{size:18}),l.jsx("span",{children:"Boka Samtal"})]})]})]})]})]}),R4=()=>{const[i,e]=ie.useState(!1);return ie.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(t=>{t.onupdatefound=()=>{const n=t.installing;n&&(n.onstatechange=()=>{n.state==="installed"&&navigator.serviceWorker.controller&&e(!0)})}})},[]),i?l.jsxs("div",{onClick:()=>window.location.reload(),className:"flex items-center gap-2 bg-orange-500/10 border border-orange-500/30 px-4 py-1.5 rounded-full cursor-pointer hover:bg-orange-500/20 transition-all animate-pulse",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full animate-ping absolute inset-0"}),l.jsx("div",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full relative"})]}),l.jsx("span",{className:"text-[10px] font-black text-orange-500 uppercase tracking-widest",children:"Uppdatering tillgnglig  Klicka fr att hmta"})]}):null},aE=({setPage:i})=>{const[e,t]=ie.useState(!1),[n,s]=ie.useState(0),[a,u]=ie.useState(!1),h=[{title:"Ett grundlggande attributionsfel",description:"Varfr dmer vi andra hrdare n oss sjlva? En genomgng av hur vra hjrnor snedvrider verkligheten i sociala relationer.",pdfUrl:"/Attributionsfel-narcissism.pdf"},{title:"Polarisering och personlighetsstrningar",description:"En djupanalys av hur dmande och polarisering pverkar vra relationer och vr sjlvbild i ett kliniskt sammanhang.",pdfUrl:"/Polarisering-av-personlighetsstrningar .pdf"}],p=ie.useCallback(()=>{a||(u(!0),setTimeout(()=>{s(v=>(v+1)%h.length),u(!1)},500))},[a,h.length]),m=ie.useCallback(()=>{a||(u(!0),setTimeout(()=>{s(v=>(v-1+h.length)%h.length),u(!1)},500))},[a,h.length]);return ie.useEffect(()=>{if(e)return;const v=setInterval(p,7e3);return()=>clearInterval(v)},[p,e]),l.jsxs("div",{className:"max-w-[1600px] mx-auto px-4 md:px-8 py-2 md:py-4 animate-fade-in w-full space-y-12",children:[l.jsx(Lw,{isOpen:e,onClose:()=>t(!1),pdfUrl:h[n].pdfUrl,title:h[n].title}),l.jsxs("div",{className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-6 md:py-6 md:px-14 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-amber-500/10 to-transparent pointer-events-none"}),l.jsxs("div",{className:"relative z-10 grid md:grid-cols-2 gap-10 items-center",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h1",{className:"text-2xl md:text-4xl lg:text-6xl font-black leading-[0.95] drop-shadow-lg tracking-tight max-w-[12ch]",children:["Klttertrdet ",l.jsx("br",{}),l.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-white via-amber-200 to-zinc-500",children:"& Horizonten"})]}),l.jsx("p",{className:"text-base md:text-lg text-white/90 leading-relaxed max-w-md font-light",children:"Specialistutbildning, terapi och handledning med fokus p traumamedvetenhet och personlig mognad. Vlkommen till vr gemenskap."}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-2",children:[l.jsxs("button",{onClick:()=>i(Se.CHAT),className:"px-6 md:px-8 py-2.5 bg-white text-slate-900 hover:bg-white/90 rounded-xl font-bold transition-all hover:scale-105 flex items-center gap-2 shadow-xl shadow-white/10",children:["Vra Utbildningar ",l.jsx(us,{size:18})]}),l.jsxs("button",{onClick:()=>i(Se.CONTACT),className:"px-6 md:px-8 py-2.5 bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl font-bold transition-all hover:scale-105 flex items-center gap-2",children:["Boka tid ",l.jsx(Ba,{size:18})]})]})]}),l.jsx("div",{className:"hidden md:flex justify-center items-center",children:l.jsx("div",{className:"relative w-56 h-64 p-4",children:l.jsx(za,{src:"/logo2.png",alt:"Klttertrdet Logo",className:"w-full h-full",imgClassName:"object-contain p-4",defaultRotation:"-8deg",grayscale:!1})})})]})]}),l.jsxs("div",{className:"max-w-5xl mx-auto w-full space-y-3 animate-in slide-in-from-bottom-6 duration-700 relative group/carousel",children:[l.jsxs("div",{className:"flex justify-between items-center px-2",children:[l.jsxs("h2",{className:"text-xl md:text-2xl font-black text-white italic tracking-tight flex items-center gap-2",children:[l.jsx(_g,{className:"text-orange-500",size:20}),"Nytt frn oss"]}),l.jsx(R4,{})]}),l.jsxs("div",{className:"relative group/carousel",children:[l.jsx("button",{onClick:v=>{v.stopPropagation(),m()},"aria-label":"Fregende slide",className:"absolute -left-2 top-[92%] -translate-y-1/2 z-20 px-6 py-2 bg-white/5 hover:bg-white/10 border border-white/20 rounded-2xl text-white transition-all backdrop-blur-2xl md:opacity-0 md:group-hover/carousel:opacity-100 opacity-100 hover:scale-105 shadow-[0_0_30px_rgba(255,255,255,0.1)] md:group-hover/carousel:-translate-x-2",children:l.jsx(Wv,{size:20})}),l.jsx("button",{onClick:v=>{v.stopPropagation(),p()},"aria-label":"Nsta slide",className:"absolute -right-2 top-[92%] -translate-y-1/2 z-20 px-6 py-2 bg-white/5 hover:bg-white/10 border border-white/20 rounded-2xl text-white transition-all backdrop-blur-2xl md:opacity-0 md:group-hover/carousel:opacity-100 opacity-100 hover:scale-105 shadow-[0_0_30px_rgba(255,255,255,0.1)] md:group-hover/carousel:translate-x-2",children:l.jsx(Gd,{size:20})}),l.jsxs("div",{onClick:()=>t(!0),className:`bg-gradient-to-br from-slate-900 to-slate-800 border border-orange-500/30 p-4 md:p-6 rounded-[1.5rem] group hover:border-orange-500 transition-all duration-500 cursor-pointer shadow-[0_20px_60px_rgba(0,0,0,0.4)] relative overflow-hidden ${a?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:[l.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 right-[15%] p-4 opacity-20 group-hover:opacity-40 transition-opacity blur-[2px]",children:l.jsx("img",{src:"/logo2.png",alt:"Klttertrdet Logo",className:"w-20 h-20 md:w-28 md:h-28 object-contain rotate-12"})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("span",{className:"text-[10px] bg-orange-500/20 text-orange-400 px-3 py-1 rounded-full font-black uppercase tracking-[0.2em] mb-2 inline-block",children:"Veckans Djupdykning"}),l.jsx("h4",{className:"text-xl md:text-2xl font-black text-white mb-1 group-hover:text-orange-400 transition-colors tracking-tight",children:h[n].title}),l.jsx("p",{className:"text-slate-400 text-xs md:text-sm mb-3 max-w-2xl font-light leading-relaxed line-clamp-1 md:line-clamp-none",children:h[n].description}),l.jsxs("button",{onClick:v=>{v.stopPropagation(),i(Se.BLOG)},className:"flex items-center gap-2 text-orange-400 text-[10px] md:text-xs font-black group-hover:gap-3 transition-all hover:text-white",children:["Ls de nya blogginlggen ",l.jsx(Gd,{size:16})]})]})]})]}),l.jsx("div",{className:"flex justify-center gap-3",children:h.map((v,b)=>l.jsx("button",{onClick:()=>s(b),"aria-label":`G till slide ${b+1}`,className:`h-1.5 transition-all rounded-full ${n===b?"w-8 bg-orange-500 shadow-[0_0_10px_rgba(249,115,22,0.5)]":"w-1.5 bg-white/20"}`},b))})]}),l.jsxs("div",{className:"max-w-5xl mx-auto w-full glass bg-white/5 border border-white/10 rounded-[2.5rem] p-6 md:p-10 flex flex-col md:flex-row items-center gap-10 group hover:border-amber-500/20 transition-all min-h-[280px]",children:[l.jsx("div",{className:"md:w-1/4 flex justify-center",children:l.jsx(za,{src:"/booklet.jpeg",alt:"Myndighetsinducerat trauma bok",className:"w-40 h-56",defaultRotation:"-3deg",grayscale:!1})}),l.jsxs("div",{className:"md:w-3/4 space-y-4",children:[l.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white leading-tight",children:"Vr nya bok: Myndighetsinducerat trauma"}),l.jsx("p",{className:"text-zinc-400 text-sm md:text-base leading-relaxed",children:"En unik djupdykning i systemets pverkan p individen och vgen mot lkning. Innehller praktiska verktyg och fallstudier fr bde drabbade och professionella."}),l.jsxs("button",{onClick:()=>i(Se.BOOK),className:"flex items-center gap-2 text-amber-500 font-bold hover:underline transition-all group-hover:translate-x-2 text-sm md:text-base",children:["Ls mer om boken ",l.jsx(us,{size:20})]})]})]}),l.jsx("div",{className:"max-w-5xl mx-auto w-full glass bg-gradient-to-r from-amber-500/20 to-orange-600/20 border border-white/10 rounded-[2.5rem] p-6 md:p-10 relative overflow-hidden group min-h-[320px] flex items-center justify-center",children:l.jsxs("div",{className:"relative z-10 max-w-2xl text-center space-y-4",children:[l.jsx("div",{className:"inline-block px-3 py-1 bg-amber-500/20 rounded-full border border-amber-500/30 text-amber-500 text-[10px] font-black uppercase tracking-widest",children:"Aktuell Specialistutbildning"}),l.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white leading-tight",children:"Myndighetsinducerat Trauma (MiT)"}),l.jsx("p",{className:"text-sm md:text-base text-amber-100/80 leading-relaxed",children:"Vr nya specialistutbildning ger dig verktygen att frst, bemta och sttta klienter som farit illa av systemet och myndighetsutvning."}),l.jsxs("button",{onClick:()=>i(Se.CHAT),className:"flex items-center gap-2 px-6 py-3 bg-amber-500 hover:bg-amber-400 text-slate-950 rounded-xl font-black transition-all hover:scale-105 shadow-2xl shadow-amber-500/20 text-sm md:text-base",children:["Ls mer om MiT ",l.jsx(us,{size:20})]})]})}),l.jsx("div",{className:"grid md:grid-cols-3 gap-4 md:gap-6",children:[{src:"/hemsida-bild2.jpeg",title:"Empati",text:"Vi mter dig dr du r, utan dmande, med fokus p din unika livssituation.",rot:"-2deg"},{src:"/hemsida-bild3.jpeg",title:"Trygghet",text:"En trygg bas r frutsttningen fr all form av lkning och utveckling.",rot:"1deg"},{src:"/hemsida-bild4.jpeg",title:"Insikt",text:"Genom 'Hr, Nu och Hur' skapar vi medvetenhet som leder till verklig frndring.",rot:"-1deg"}].map((v,b)=>l.jsxs("div",{className:"glass bg-white/5 border border-white/10 p-5 md:p-6 rounded-3xl hover:bg-white/10 transition-colors group flex flex-col items-center text-center",children:[l.jsx(za,{src:v.src,alt:v.title,className:"w-32 h-32 mb-4",defaultRotation:v.rot}),l.jsx("h3",{className:"text-base md:text-lg font-bold text-white mb-1.5 md:mb-2",children:v.title}),l.jsx("p",{className:"text-zinc-400 leading-relaxed text-[11px] md:text-xs",children:v.text})]},b))}),l.jsxs("div",{className:"space-y-6 md:space-y-8",children:[l.jsxs("div",{className:"text-center space-y-1",children:[l.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white",children:"Vra Tjnster"}),l.jsx("p",{className:"text-zinc-400 text-xs md:text-sm max-w-2xl mx-auto",children:"Vi erbjuder ett brett spektrum av tjnster fr bde individer och professionella."})]}),l.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[l.jsxs("div",{className:"glass bg-gradient-to-br from-white/5 to-white/[0.02] border border-white/10 rounded-[1.5rem] p-5 md:p-8 flex flex-col justify-between group",children:[l.jsxs("div",{className:"space-y-3 md:space-y-4",children:[l.jsx(za,{src:"/bild-ljusbord.jpeg",alt:"Enskild Terapi",className:"w-full h-40",defaultRotation:"-2deg",grayscale:!1}),l.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white",children:"Enskild Terapi"}),l.jsx("p",{className:"text-zinc-400 text-xs md:text-sm leading-relaxed",children:"Gestaltterapeutisk grund med fokus p att lsa upp knutar som str i vgen fr det liv du vill leva. Vi jobbar med stress, ngest, sorg och PTSD."})]}),l.jsxs("button",{onClick:()=>i(Se.THERAPY),className:"mt-4 md:mt-6 flex items-center gap-2 text-white font-bold hover:text-red-400 transition-colors text-xs md:text-sm",children:["Ls mer om terapi ",l.jsx(us,{size:18})]})]}),l.jsxs("div",{className:"glass bg-gradient-to-br from-white/5 to-white/[0.02] border border-white/10 rounded-[1.5rem] p-5 md:p-8 flex flex-col justify-between group",children:[l.jsxs("div",{className:"space-y-3 md:space-y-4",children:[l.jsx(za,{src:"/bild-terapistol.jpeg",alt:"Parterapi",className:"w-full h-40",defaultRotation:"2deg",grayscale:!1}),l.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white",children:"Grupp- & Parterapi"}),l.jsx("p",{className:"text-zinc-400 text-xs md:text-sm leading-relaxed",children:"Lkning genom relation och gemenskap. Vi erbjuder specialiserad terapi fr grupper och par."})]}),l.jsxs("button",{onClick:()=>i(Se.GROUP_THERAPY),className:"mt-4 md:mt-6 flex items-center gap-2 text-white font-bold hover:text-indigo-400 transition-colors text-xs md:text-sm",children:["Ls mer om parterapi ",l.jsx(us,{size:18})]})]}),l.jsxs("div",{className:"glass bg-gradient-to-br from-white/5 to-white/[0.02] border border-white/10 rounded-[1.5rem] p-5 md:p-8 flex flex-col justify-between group",children:[l.jsxs("div",{className:"space-y-3 md:space-y-4",children:[l.jsx(za,{src:"/hemsida-bild6.jpeg",alt:"Utbildning",className:"w-full h-40",defaultRotation:"-1deg"}),l.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white",children:"Utbildning"}),l.jsx("p",{className:"text-zinc-400 text-xs md:text-sm leading-relaxed",children:"Specialistutbildningar fr behandlare, inklusive Myndighetsinducerat Trauma (MiT) och Gestaltmetodik."})]}),l.jsxs("button",{onClick:()=>i(Se.CHAT),className:"mt-4 md:mt-6 flex items-center gap-2 text-white font-bold hover:text-amber-400 transition-colors text-xs md:text-sm",children:["Se vra utbildningar ",l.jsx(us,{size:18})]})]})]})]}),l.jsxs("div",{className:"space-y-16 md:space-y-24 py-12",children:[l.jsxs("div",{className:"text-center space-y-6 max-w-4xl mx-auto",children:[l.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-white italic tracking-tight leading-[1.1]",children:["Horizonten Gemenskap  ",l.jsx("br",{className:"hidden md:block"}),l.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-orange-400 via-amber-200 to-white",children:"Din digitala flock"})]}),l.jsx("p",{className:"text-xl md:text-2xl text-amber-500/90 font-bold italic tracking-wide",children:"Ingen lker i vakuum. Vi behver varandra."}),l.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-orange-500 to-transparent mx-auto rounded-full"}),l.jsx("p",{className:"text-zinc-400 text-lg md:text-xl leading-relaxed font-light",children:"P Klttertrdet vet vi att psykisk hlsa inte bara handlar om vad som sker under en timme i terapistolen. Det handlar om vad som hnder dremellan. Det handlar om vardagen. Drfr har vi, tillsammans med vra partners Socialkraft och Twisted-stacks, skapat Horizonten Gemenskap."})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center max-w-6xl mx-auto",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"inline-block px-4 py-1.5 bg-orange-500/10 rounded-full border border-orange-500/20 text-orange-500 text-xs font-black uppercase tracking-widest",children:"Mer n bara en app"}),l.jsx("h3",{className:"text-3xl font-black text-white italic",children:"En omsorgsfullt designad plattform"}),l.jsx("p",{className:"text-zinc-400 text-lg leading-relaxed font-light",children:"Detta r inte sociala medier som stjl din energi. Det r en omsorgsfullt designad plattform fr terhmtning, igenknning och vxtkraft. Vi har flyttat in vr filosofi om Self-care, Bottom-up och trygghet i en digital milj som du alltid har med dig i fickan."})]}),l.jsxs("div",{className:"relative group flex justify-center",children:[l.jsx("div",{className:"absolute -inset-4 bg-orange-500/20 rounded-[3rem] blur-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),l.jsx(za,{src:"/logo2.png",alt:"Horizonten Gemenskap",className:"w-64 h-64 md:w-80 md:h-80",imgClassName:"object-contain p-8",defaultRotation:"5deg",grayscale:!1})]})]}),l.jsxs("div",{className:"space-y-12",children:[l.jsxs("div",{className:"text-center space-y-2",children:[l.jsx("h3",{className:"text-3xl font-black text-white italic tracking-tight",children:"Vad hittar du hr?"}),l.jsx("p",{className:"text-zinc-500",children:"Mngsidigt std fr din personliga resa."})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[{title:"Gratis Std",text:"En plats dr du kan dela erfarenheter med andra som frstr. Att spegla sig i andra minskar skam och bryter isolering.",icon:l.jsx(ws,{className:"text-orange-500",size:32})},{title:"Verktyg",text:"Tillgng till material, vningar och mallar som stttar din process.",icon:l.jsx(ua,{className:"text-amber-400",size:32})},{title:"Mjligheter",text:"Som medlem kan du delta i (eller sjlv hlla i) digitala sjlvhjlpsmten via vra videorum.",icon:l.jsx(Ba,{className:"text-white",size:32})}].map((v,b)=>l.jsxs("div",{className:"glass bg-white/5 border border-white/10 p-8 rounded-3xl hover:bg-white/10 transition-all group hover:-translate-y-2",children:[l.jsx("div",{className:"mb-6 p-4 bg-white/5 rounded-2xl w-fit group-hover:scale-110 transition-transform",children:v.icon}),l.jsx("h4",{className:"text-xl font-bold text-white mb-3",children:v.title}),l.jsx("p",{className:"text-zinc-400 leading-relaxed text-sm font-light",children:v.text})]},b))})]}),l.jsxs("div",{className:"glass bg-gradient-to-br from-white/5 to-white/[0.02] border border-white/10 rounded-[3rem] p-10 md:p-16 max-w-6xl mx-auto relative overflow-hidden group",children:[l.jsx("div",{className:"absolute -right-20 -bottom-20 w-64 h-64 bg-orange-500/5 rounded-full blur-3xl group-hover:bg-orange-500/10 transition-colors"}),l.jsxs("div",{className:"relative z-10 space-y-12 text-center",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-3xl font-black text-white italic tracking-tight",children:"Ett unikt samarbete"}),l.jsx("p",{className:"text-zinc-400 text-lg font-light",children:"Horizonten r resultatet av tre krafter som frenas fr din skull:"})]}),l.jsx("div",{className:"grid md:grid-cols-3 gap-12",children:[{name:"Klttertrdet",text:"Bidrar med den terapeutiska grunden, kunskapen om trauma och nervsystemet.",icon:l.jsx(Ha,{className:"text-red-400",size:24})},{name:"Socialkraft",text:"Skerstller perspektivet av rttvisa, std i myndighetsfrgor och empowerment.",icon:l.jsx(la,{className:"text-blue-400",size:24})},{name:"Twisted-stacks",text:"Mjliggr tekniken som bygger broar mellan mnniskor p ett skert stt.",icon:l.jsx(ua,{className:"text-purple-400",size:24})}].map((v,b)=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-center gap-3",children:[v.icon,l.jsx("h4",{className:"text-xl font-black text-white tracking-tight",children:v.name})]}),l.jsx("p",{className:"text-zinc-500 text-sm leading-relaxed font-light",children:v.text})]},b))})]})]}),l.jsxs("div",{className:"space-y-24",children:[l.jsxs("div",{className:"text-center space-y-6 max-w-4xl mx-auto",children:[l.jsx("h2",{className:"text-4xl md:text-5xl font-black text-white italic tracking-tight",children:"Vrt Specialistteam"}),l.jsx("p",{className:"text-xl text-amber-500 font-bold italic",children:"Handplockad kompetens fr hela mnniskan."}),l.jsxs("div",{className:"space-y-6 text-zinc-400 text-lg md:text-xl leading-relaxed font-light text-left md:text-center",children:[l.jsx("p",{children:"Jag brukar sga att trygghet brjar med kompetens. Fr att kunna guida en annan mnniska genom svr terrng  oavsett om det handlar om djupa barndomstrauman eller stressrelaterad ohlsa  krvs en guide som r trygg, erfaren och vlutbildad."}),l.jsx("p",{children:"Drfr r jag otroligt stolt och tacksam ver det team vi har samlat hr p Klttertrdet och Horizonten."})]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center max-w-6xl mx-auto",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsx("h3",{className:"text-3xl font-black text-white italic",children:"Vi har sllat fram de bsta"}),l.jsx("p",{className:"text-zinc-400 text-lg leading-relaxed font-light",children:"Vi stller extremt hga krav p vra medarbetare. Inte bara gllande deras akademiska meriter, utan p deras frmga till nrvaro och bemtande. De terapeuter och behandlare du mter hos oss r noga utsorterade fr att de r bst inom sina respektive flt."}),l.jsx("p",{className:"text-zinc-400 text-lg leading-relaxed font-light",children:'Vi jobbar inte efter en "one-size-fits-all"-modell. Vi vet att olika nervsystem behver olika ingngar fr att lka. Drfr har vi samlat en bredd av expertis under samma tak:'})]}),l.jsx("div",{className:"relative p-8 glass bg-white/5 border border-white/10 rounded-[2.5rem] space-y-4",children:[{label:"Traumaterapi & Bottom-up",desc:"Specialister p att arbeta med kroppens minnen och nervsystemets reglering."},{label:"KBT & Beteendevetenskap",desc:"Fr dig som behver struktur, verktyg och tankemnsterfrndring."},{label:"Psykoanalys & Psychodynamic",desc:"Fr djupare frstelse av omedvetna processer och livsmnster."},{label:"Hypnos",desc:"Ett kraftfullt verktyg fr att n bortom det logiska sinnet och arbeta med djupare frndring."},{label:"Hudvrd & Somatisk omsorg",desc:"Self-care handlar ocks om att vrda kroppens grns mot omvrlden."}].map((v,b)=>l.jsxs("div",{className:"flex gap-4",children:[l.jsx("div",{className:"mt-1 w-1.5 h-1.5 bg-orange-500 rounded-full shrink-0"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white font-bold text-sm",children:v.label}),l.jsx("p",{className:"text-zinc-500 text-xs",children:v.desc})]})]},b))})]}),l.jsxs("div",{className:"text-center space-y-12 max-w-6xl mx-auto",children:[l.jsx(PT,{}),l.jsxs("div",{className:"pt-8 space-y-8",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-2xl font-black text-white italic",children:"Vlkommen in i vrmen."}),l.jsx("p",{className:"text-orange-500 font-bold uppercase tracking-widest text-xs",children:"Det r gratis att bli medlem."})]}),l.jsxs("div",{className:"flex flex-wrap justify-center gap-6",children:[l.jsxs("button",{onClick:()=>i(Se.CONTACT),className:"px-10 py-5 bg-white text-slate-900 hover:bg-white/90 rounded-2xl font-black transition-all hover:scale-105 flex items-center gap-3 shadow-2xl shadow-white/10 uppercase tracking-widest text-xs",children:["Ta kontakt med oss ",l.jsx(us,{size:20})]}),l.jsx("button",{onClick:()=>i(Se.THERAPY,{showForm:!0}),className:"px-10 py-5 bg-white/5 hover:bg-white/10 border border-white/20 rounded-2xl text-white font-black transition-all hover:scale-105 flex items-center gap-3 uppercase tracking-widest text-xs",children:"Hjlp med att hitta en terapeut"})]})]})]})]})]}),l.jsx(Ow,{})]})},j4=()=>l.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 md:py-10 animate-fade-in space-y-16",children:[l.jsxs("div",{className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-8 md:p-16 text-center relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-orange-500/10 to-transparent pointer-events-none"}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("h1",{className:"text-3xl md:text-5xl font-bold mb-6 text-transparent bg-clip-text bg-gradient-to-r from-amber-200 to-orange-400 leading-tight",children:"Om Klttertrdet & Horizonten"}),l.jsx("h2",{className:"text-xl md:text-2xl text-white/90 font-light italic mb-8",children:"Ett kunskapscenter fr mnsklig utveckling"}),l.jsx("p",{className:"text-lg text-white/80 leading-relaxed max-w-4xl mx-auto",children:"Vr vision har alltid varit att skapa rum fr utveckling, terhmtning och utbildning  fr mnniskor i frndring. Vi frenar djup terapeutisk kompetens med specialistutbildningar fr morgondagens behandlare."})]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-10",children:[l.jsxs("div",{className:"glass bg-gradient-to-br from-orange-900/20 to-black/40 border border-orange-500/20 rounded-3xl p-8 md:p-12",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:"p-3 bg-orange-500/20 rounded-xl text-orange-400",children:l.jsx(ua,{size:32})}),l.jsx("h3",{className:"text-2xl font-bold",children:"Vi startade 2020"})]}),l.jsxs("p",{className:"text-white/80 leading-relaxed mb-6",children:[l.jsx("strong",{children:"Klttertrdet AB"})," grundades av Billy Ljungberg 2020 och har sin bas i Gvle. Med lng erfarenhet som terapeut, handledare och utbildare har vi under ren ftt frmnen att mta bde individer och verksamheter i behov av std, riktning och frdjupning."]}),l.jsxs("div",{className:"flex items-start gap-4 bg-black/20 p-6 rounded-2xl border border-white/5",children:[l.jsx(BC,{className:"text-orange-400 shrink-0",size:24}),l.jsx("p",{className:"text-white/80 italic text-sm",children:'"Vi startade med en vertygelse om att kvalitet och nrvaro r nyckeln till verklig frndring."'})]})]}),l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 md:p-12 flex flex-col justify-center",children:[l.jsxs("h3",{className:"text-2xl font-bold mb-6 flex items-center gap-3",children:[l.jsx(uT,{className:"text-amber-400"})," Vr verksamhet"]}),l.jsxs("p",{className:"text-white/80 leading-relaxed mb-6",children:["Vi erbjuder utbildningar till ",l.jsx("strong",{children:"behandlingspedagog"})," och ",l.jsx("strong",{children:"socialpedagog"}),", samt handledning och kvalificerad terapi inom beroendeproblematik, trauma och relationsarbete."]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-3 text-white/90",children:[l.jsx(jd,{className:"text-orange-400",size:20}),l.jsx("span",{children:"Handplockade frelsare frn hela Sverige"})]}),l.jsxs("div",{className:"flex items-center gap-3 text-white/90",children:[l.jsx(la,{className:"text-orange-400",size:20}),l.jsx("span",{children:"Kvalitetsskrad metodik & traumafrstelse"})]}),l.jsxs("div",{className:"flex items-center gap-3 text-white/90",children:[l.jsx(ws,{className:"text-orange-400",size:20}),l.jsx("span",{children:"Std fr bde individer och organisationer"})]})]})]})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-center mb-10",children:"Vr Metodik & Filosofi"}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"glass bg-white/5 p-8 rounded-2xl border border-white/10",children:[l.jsx("div",{className:"mb-4 bg-blue-500/20 w-12 h-12 rounded-lg flex items-center justify-center text-blue-300",children:l.jsx(ey,{size:24})}),l.jsx("h4",{className:"text-xl font-bold mb-3",children:"Processinriktat Lrande"}),l.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:"Kunskap mste landa i kroppen. Vra utbildningar bygger p kvalitet, nrvaro och mngrig erfarenhet dr vi varvar teori med praktisk implementation."})]}),l.jsxs("div",{className:"glass bg-white/5 p-8 rounded-2xl border border-white/10",children:[l.jsx("div",{className:"mb-4 bg-red-500/20 w-12 h-12 rounded-lg flex items-center justify-center text-red-300",children:l.jsx(Ha,{size:24})}),l.jsx("h4",{className:"text-xl font-bold mb-3",children:"Traumamedveten Omsorg"}),l.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:"Vi utgr frn neurobiologi och traumateori (TMO) fr att frst hur man reglerar nervsystem som fastnat i kamp, flykt eller frys."})]}),l.jsxs("div",{className:"glass bg-white/5 p-8 rounded-2xl border border-white/10",children:[l.jsx("div",{className:"mb-4 bg-green-500/20 w-12 h-12 rounded-lg flex items-center justify-center text-green-300",children:l.jsx(ws,{size:24})}),l.jsx("h4",{className:"text-xl font-bold mb-3",children:"Gestaltterapeutisk Grund"}),l.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:'Vi fokuserar p "hr och nu". Kontakt, medvetenhet och ansvar r nyckelord i vr syn p mnniskan som en helhet.'})]})]})]}),l.jsxs("div",{className:"glass bg-white/10 border border-white/20 rounded-3xl p-8 md:p-12 text-center mt-12",children:[l.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Besk oss i Gvle"}),l.jsx("p",{className:"text-white/80 max-w-2xl mx-auto mb-8",children:"Vi bedriver vr verksamhet i ljusa lokaler centralt i Gvle. Hr mts vi fr utbildningstrffar, terapi och frdjupade samtal."}),l.jsxs("div",{className:"inline-flex flex-col md:flex-row gap-6 md:gap-12 justify-center items-center text-white/90 font-medium",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Qb,{className:"text-orange-400"}),l.jsx("span",{children:"Gullregnsgatan 9A, 802 56 Gvle"})]}),l.jsx("div",{className:"hidden md:block w-1.5 h-1.5 bg-white/30 rounded-full"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Jb,{className:"text-orange-400",size:20}),l.jsx("span",{children:"info@klattertradet.se"})]})]})]})]}),D4=()=>{const[i,e]=ie.useState("info"),[t,n]=ie.useState({type:"Anmlan till utbildning (MiT)",name:"",email:"",phone:"",workplace:"",invoiceAddress:"",message:""}),s=a=>{a.preventDefault();const u="billy@klattertradet.se",h=`Anmlan: ${t.type} - ${t.name}`,p=`
Hej Billy,

Hr kommer en anmlan/frfrgan via hemsidan.

AVSER:
${t.type}

KONTAKTUPPGIFTER:
Namn: ${t.name}
E-post: ${t.email}
Telefon: ${t.phone}
Arbetsplats/Titel: ${t.workplace}

FAKTURAADRESS (om angivet):
${t.invoiceAddress}

MEDDELANDE / VRIGT:
${t.message}
    `.trim(),m=`mailto:${u}?subject=${encodeURIComponent(h)}&body=${encodeURIComponent(p)}`;window.location.href=m,e("success")};return i==="success"?l.jsx("div",{className:"container mx-auto px-4 py-20 flex items-center justify-center animate-fade-in min-h-[70vh]",children:l.jsxs("div",{className:"glass bg-white/10 backdrop-blur-xl border border-white/20 p-12 rounded-[40px] max-w-lg w-full text-center shadow-2xl",children:[l.jsx("div",{className:"mb-6 flex justify-center text-green-400",children:l.jsx(lc,{size:64})}),l.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Tack fr din anmlan!"}),l.jsx("p",{className:"text-lg text-white/80 mb-6",children:'Ett frifyllt mail har skapats i din mailklient. Vnligen klicka p "Skicka" fr att slutfra anmlan till Billy.'}),l.jsx("button",{onClick:()=>e("info"),className:"text-white hover:text-amber-400 font-medium underline transition-colors",children:"G tillbaka till utbildningssidan"})]})}):i==="form"?l.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-10 animate-fade-in max-w-3xl",children:[l.jsxs("button",{onClick:()=>e("info"),className:"flex items-center gap-2 text-white/60 hover:text-white mb-6 transition-colors",children:[l.jsx(So,{size:20})," Tillbaka till informationen"]}),l.jsxs("div",{className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-8 md:p-12 shadow-2xl",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Anmlan & Intresse"}),l.jsx("p",{className:"text-white/70",children:"Myndighetsinducerat Trauma (MiT)"})]}),l.jsxs("form",{onSubmit:s,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm font-medium text-white/80",children:"Vad vill du gra?"}),l.jsxs("select",{className:"w-full p-4 bg-black/40 border border-white/10 rounded-xl text-white outline-none focus:ring-2 focus:ring-orange-500 transition-all appearance-none",value:t.type,onChange:a=>n({...t,type:a.target.value}),children:[l.jsx("option",{value:"Bindande anmlan till utbildning (MiT)",className:"bg-zinc-900",children:"Jag vill anmla mig till utbildningen"}),l.jsx("option",{value:"Intresseanmlan (MiT)",className:"bg-zinc-900",children:"Jag r intresserad och vill veta mer (Intresseanmlan)"}),l.jsx("option",{value:"Frfrgan fr arbetsgrupp (MiT)",className:"bg-zinc-900",children:"Jag vill boka utbildning fr min arbetsgrupp"})]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"block text-sm font-medium text-white/80",children:["Namn ",l.jsx("span",{className:"text-red-400",children:"*"})]}),l.jsx("input",{required:!0,type:"text",className:"w-full p-3 bg-black/40 border border-white/10 rounded-xl text-white outline-none focus:ring-2 focus:ring-orange-500",value:t.name,onChange:a=>n({...t,name:a.target.value})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"block text-sm font-medium text-white/80",children:["E-post ",l.jsx("span",{className:"text-red-400",children:"*"})]}),l.jsx("input",{required:!0,type:"email",className:"w-full p-3 bg-black/40 border border-white/10 rounded-xl text-white outline-none focus:ring-2 focus:ring-orange-500",value:t.email,onChange:a=>n({...t,email:a.target.value})})]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm font-medium text-white/80",children:"Telefon"}),l.jsx("input",{type:"tel",className:"w-full p-3 bg-black/40 border border-white/10 rounded-xl text-white outline-none focus:ring-2 focus:ring-orange-500",value:t.phone,onChange:a=>n({...t,phone:a.target.value})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm font-medium text-white/80",children:"Arbetsplats / Titel"}),l.jsx("input",{type:"text",className:"w-full p-3 bg-black/40 border border-white/10 rounded-xl text-white outline-none focus:ring-2 focus:ring-orange-500",placeholder:"T.ex. Socialtjnsten Gvle / Socialsekreterare",value:t.workplace,onChange:a=>n({...t,workplace:a.target.value})})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm font-medium text-white/80",children:"Fakturaadress (vid anmlan)"}),l.jsx("textarea",{rows:2,className:"w-full p-3 bg-black/40 border border-white/10 rounded-xl text-white outline-none focus:ring-2 focus:ring-orange-500 resize-none",placeholder:"Adress, referens, ev. kostnadsstlle...",value:t.invoiceAddress,onChange:a=>n({...t,invoiceAddress:a.target.value})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm font-medium text-white/80",children:"Meddelande / Allergier"}),l.jsx("textarea",{rows:3,className:"w-full p-3 bg-black/40 border border-white/10 rounded-xl text-white outline-none focus:ring-2 focus:ring-orange-500 resize-none",value:t.message,onChange:a=>n({...t,message:a.target.value})})]}),l.jsxs("button",{type:"submit",className:"w-full py-4 bg-white/10 hover:bg-white/20 border border-white/20 text-white font-bold rounded-xl transition-all hover:scale-[1.01] active:scale-95 flex items-center justify-center gap-2",children:["Skicka anmlan ",l.jsx(ml,{size:20})]}),l.jsx("p",{className:"text-center text-xs text-white/40 mt-4",children:"Genom att skicka in godknner du att vi kontaktar dig angende utbildningen."})]})]})]}):l.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 md:py-10 animate-fade-in w-full",children:[l.jsxs("div",{className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-8 md:p-12 mb-8 relative overflow-hidden flex flex-col md:flex-row items-center justify-between gap-8",children:[l.jsxs("div",{className:"relative z-10 flex-1",children:[l.jsx("h1",{className:"text-3xl md:text-5xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-amber-200 to-orange-400 leading-tight",children:"Myndighetsinducerat Trauma (MiT)"}),l.jsx("h2",{className:"text-xl md:text-2xl text-white/90 italic font-light mb-6",children:" Att lka nr systemet skadar"}),l.jsx("p",{className:"text-lg md:text-xl text-white/80 leading-relaxed max-w-4xl",children:"Nr hjlpen blir ett hot. En specialistutbildning fr dig som mter mnniskor i klm mellan behov och byrkrati."})]}),l.jsx("div",{className:"relative z-10 w-full md:w-64 h-48 md:h-64 flex justify-center md:justify-end",children:l.jsx(za,{src:"/hemsida-bild7.jpeg",alt:"Myndighetsinducerat Trauma",className:"w-48 h-64 md:w-full md:h-full",defaultRotation:"8deg",grayscale:!1,blur:"10px",hoverBlur:"0px"})})]}),l.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-2xl p-6 md:p-8",children:[l.jsx("p",{className:"text-white/80 leading-relaxed mb-6 text-lg",children:'Har du mtt klienten som "stnger av" s fort ett myndighetsbrev landar p hallmattan? Eller ungdomen som gr in i totalt kamp-lge vid blotta tanken p ett SIP-mte? Det handlar ofta om myndighetsinducerat trauma. Fr mnga av vra klienter r mtet med vrd- och omsorgsapparaten inte en vg till lkning, utan en klla till ytterligare stress, vanmakt och retraumatiserande upplevelser.'}),l.jsx("p",{className:"text-white/80 leading-relaxed text-lg",children:"P Klttertrdet och Horizonten vet vi att vi inte kan prata bort dessa tillstnd. Vi mste jobba bottom-up. Vi mste frst nervsystemets reaktioner och erbjuda verktyg som fungerar p riktigt."})]}),l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-2xl p-6 md:p-8",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx(dT,{className:"text-orange-400",size:32,"aria-hidden":"true"}),l.jsx("h3",{className:"text-2xl font-bold",children:"Om utbildningen"})]}),l.jsx("p",{className:"text-white/80 leading-relaxed mb-4",children:"Detta r en processinriktad specialistutbildning som strcker sig ver en termin. Vi kombinerar djupgende fysiska trffar i Gvle med flexibla, processinriktade onlinetrffar. Mlet r att gra dig till en trygg hamn i ett stormigt system."}),l.jsx("p",{className:"text-white/80 leading-relaxed",children:"Vi utgr frn vr egen Self-care modell fr att kartlgga hur bristen p agens och trygghet i kontakten med myndigheter aktiverar gamla grundsr ssom Avvisad eller Frdmjukad. Du fr lra dig att hjlpa klienten g frn maktls underkastelse till reglering och agens."})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx("h3",{className:"text-2xl font-bold px-2",children:"Upplgg: 3 + 3 Modellen"}),l.jsx("p",{className:"text-white/70 px-2 italic",children:'Vi tror p det "blandade lrandet"  att ses p riktigt fr att bygga allians och trygghet, och att ses digitalt fr att hlla processen levande i vardagen.'}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"glass bg-orange-900/10 border border-orange-500/20 rounded-2xl p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4 text-orange-300",children:[l.jsx(ws,{size:24,"aria-hidden":"true"}),l.jsx("h4",{className:"text-xl font-bold",children:"Del 1: Fysiska Trffar"})]}),l.jsx("p",{className:"text-sm text-white/70 mb-4",children:"3 heldagar i Gvle. Vi ses i vra lokaler p Gullregnsgatan."}),l.jsxs("ul",{className:"space-y-3",children:[l.jsxs("li",{className:"flex gap-3 text-white/80 text-sm",children:[l.jsx("span",{className:"text-orange-400 font-bold","aria-hidden":"true",children:""}),l.jsxs("span",{children:[l.jsx("strong",{children:"Neurobiologin bakom MiT:"})," Vad hnder i hjrnan och kroppen vid strukturellt svek?"]})]}),l.jsxs("li",{className:"flex gap-3 text-white/80 text-sm",children:[l.jsx("span",{className:"text-orange-400 font-bold","aria-hidden":"true",children:""}),l.jsxs("span",{children:[l.jsx("strong",{children:"Identifiera Grundsr:"})," Hur triggar systemet sr som vergivenhet eller Orttvisa?"]})]}),l.jsxs("li",{className:"flex gap-3 text-white/80 text-sm",children:[l.jsx("span",{className:"text-orange-400 font-bold","aria-hidden":"true",children:""}),l.jsxs("span",{children:[l.jsx("strong",{children:"Praktisk Self-care:"}),' Vi var p Containment och Reglering. Hur skapar vi ett "vi" nr klienten misstror alla auktoriteter?']})]})]})]}),l.jsxs("div",{className:"glass bg-blue-900/10 border border-blue-500/20 rounded-2xl p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4 text-blue-300",children:[l.jsx(CC,{size:24,"aria-hidden":"true"}),l.jsx("h4",{className:"text-xl font-bold",children:"Del 2: Onlinetrffar"})]}),l.jsx("p",{className:"text-sm text-white/70 mb-4",children:'3 halvdagar via lnk. Din "depstopp" fr handledning och implementation.'}),l.jsxs("ul",{className:"space-y-3",children:[l.jsxs("li",{className:"flex gap-3 text-white/80 text-sm",children:[l.jsx("span",{className:"text-blue-400 font-bold","aria-hidden":"true",children:""}),l.jsxs("span",{children:[l.jsx("strong",{children:"Case-arbete:"})," Du tar med dig fall frn din vardag."]})]}),l.jsxs("li",{className:"flex gap-3 text-white/80 text-sm",children:[l.jsx("span",{className:"text-blue-400 font-bold","aria-hidden":"true",children:""}),l.jsxs("span",{children:[l.jsx("strong",{children:"Metodfrdjupning:"})," Hur applicerar vi Self-care modellen i digitala mten eller korta samtal?"]})]}),l.jsxs("li",{className:"flex gap-3 text-white/80 text-sm",children:[l.jsx("span",{className:"text-blue-400 font-bold","aria-hidden":"true",children:""}),l.jsxs("span",{children:[l.jsx("strong",{children:"Hllbarhet:"})," Hur skyddar du dig sjlv frn sekundrtraumatisering nr du stngas mot systemet?"]})]})]})]})]})]})]}),l.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[l.jsxs("div",{className:"glass bg-gradient-to-br from-amber-500/10 to-orange-600/10 border border-orange-500/30 rounded-2xl p-8 relative overflow-hidden",children:[l.jsx("div",{className:"absolute -top-10 -right-10 text-orange-500/10 rotate-12","aria-hidden":"true",children:l.jsx(jd,{size:180})}),l.jsxs("h3",{className:"text-2xl font-bold mb-4 relative z-10 flex items-center gap-2",children:[l.jsx(la,{className:"text-orange-400","aria-hidden":"true"})," Unikt vrde"]}),l.jsx("p",{className:"text-white/90 mb-6 relative z-10 font-medium",children:"Bli Kvalitetsmarkerad"}),l.jsx("p",{className:"text-white/70 text-sm mb-6 relative z-10 leading-relaxed",children:"Vi vet att tillit r hrdvaluta. Direkt efter godknd utbildning fr du rtten att anvnda Horizontens Kvalitetsmarkering fr MiT-kompetens."}),l.jsxs("div",{className:"space-y-3 relative z-10 bg-black/20 p-4 rounded-xl border border-white/5",children:[l.jsx("p",{className:"text-xs text-white/70 uppercase tracking-widest mb-2",children:"Bevis p kompetens"}),l.jsxs("div",{className:"flex gap-3 text-sm text-white/80",children:[l.jsx("span",{className:"font-bold text-orange-400",children:"1."}),l.jsx("span",{children:"Specialistkunskap om systeminducerad stress."})]}),l.jsxs("div",{className:"flex gap-3 text-sm text-white/80",children:[l.jsx("span",{className:"font-bold text-orange-400",children:"2."}),l.jsx("span",{children:"Evidensbaserade verktyg fr stabilisering."})]}),l.jsxs("div",{className:"flex gap-3 text-sm text-white/80",children:[l.jsx("span",{className:"font-bold text-orange-400",children:"3."}),l.jsx("span",{children:"Etiskt frhllningsstt via Self-care modellen."})]})]})]}),l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-2xl p-6 md:p-8",children:[l.jsx("h3",{className:"text-xl font-bold mb-6",children:"Praktisk information"}),l.jsxs("ul",{className:"space-y-4",children:[l.jsxs("li",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"bg-white/10 p-2 rounded-lg","aria-hidden":"true",children:l.jsx(Qb,{size:20,className:"text-orange-300"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-white/70",children:"Plats"}),l.jsx("p",{className:"text-white font-medium",children:"Gullregnsgatan 9A, Gvle (Fysiska)"}),l.jsx("p",{className:"text-white font-medium",children:"Samt Zoom (Online)"})]})]}),l.jsxs("li",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"bg-white/10 p-2 rounded-lg","aria-hidden":"true",children:l.jsx(Ba,{size:20,className:"text-orange-300"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-white/70",children:"Omfattning"}),l.jsx("p",{className:"text-white font-medium",children:"3 heldagar fysiskt"}),l.jsx("p",{className:"text-white font-medium",children:"3 halvdagar online"})]})]}),l.jsxs("li",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"bg-white/10 p-2 rounded-lg","aria-hidden":"true",children:l.jsx(ws,{size:20,className:"text-orange-300"})}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-white/70",children:"Kursledare"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white font-medium",children:"Billy Ljungberg"}),l.jsx("p",{className:"text-xs text-white/70",children:"Traumaterapeut"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white font-medium",children:"Malin Widerlv"}),l.jsx("p",{className:"text-xs text-white/70",children:"Socialarbetare"})]})]})]})]}),l.jsxs("div",{className:"mt-8 pt-6 border-t border-white/10",children:[l.jsx("h4",{className:"text-sm font-bold text-white/70 mb-2",children:"Fr vem?"}),l.jsx("p",{className:"text-sm text-white/70 italic",children:"Socionomer, behandlingspedagoger, boendestdjare, terapeuter eller andra i grnssnittet mellan individ och myndighet."})]}),l.jsx("button",{onClick:()=>e("form"),className:"w-full mt-6 py-3 bg-white/10 hover:bg-white/20 border border-white/20 text-white rounded-xl font-bold transition-all hover:scale-105 focus:outline-none","aria-label":"Anml dig till Myndighetsinducerat Trauma utbildningen",children:"Anml dig hr"})]})]})]}),l.jsxs("div",{className:"mt-12 text-center",children:[l.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:"r du redo?"}),l.jsx("p",{className:"text-white/70",children:"Bli den skillnad dina klienter behver i mtet med systemet."})]})]})},I4=({setPage:i})=>{const[e,t]=ie.useState(()=>window.history.state?.showForm?"form":"splash"),[n,s]=ie.useState({tidigare_erfarenhet:"",uppskattade:"",tanke_delar:"",utmaningar:[],annan_utmaning_text:"",mal:"",annat_mal_text:"",terapeut_kon:"inte_viktigt",motesform:"",namn:"",epost:"",telefon:""}),a=ie.useRef(null);ie.useEffect(()=>{window.history.state?.showForm&&a.current&&setTimeout(()=>{a.current?.scrollIntoView({behavior:"smooth",block:"center"})},100)},[]);const u=["ngest","Fobier","Skam och rdsla","Uppvxtproblematik","Sorg","Medberoende","Vuxna-barnproblematiken","Stress","Utbrndhet","PTSD","C-PTSD (komplex PTSD)"],h=m=>{const{value:v,checked:b}=m.target;s(b?y=>({...y,utmaningar:[...y.utmaningar,v]}):y=>({...y,utmaningar:y.utmaningar.filter(w=>w!==v)}))},p=m=>{m.preventDefault();const v="billy@klattertradet.se",b="Enkt, hjlp med att hitta terapeut";let y=`Hr r svaren frn din enkt:

`;y+=`1. Dina tidigare erfarenheter av terapi:
`,y+=`   - Har skt terapi tidigare? ${n.tidigare_erfarenhet||"Inget svar"}
`,n.uppskattade&&(y+=`   - Mest/minst uppskattat: ${n.uppskattade}
`),n.tanke_delar&&(y+=`   - Tankar kring upplevelser: ${n.tanke_delar}
`),y+=`
`,y+=`2. Vad sker du hjlp fr?
`;const w=n.utmaningar.map(k=>k==="annan"?`Annan: ${n.annan_utmaning_text}`:k);y+=`   - Aktuell utmaning: ${w.length>0?w.join(", "):"Inget svar"}
`,y+=`   - Huvudsakligt ml: ${n.mal==="annat"?`Annat: ${n.annat_mal_text}`:n.mal}
`,y+=`
`,y+=`3. nskeml p terapeut:
`,y+=`   - Terapeutens kn: ${n.terapeut_kon}
`,y+=`   - Fredragen mtesform: ${n.motesform}
`,y+=`
`,y+=`4. Dina kontaktuppgifter:
`,y+=`   - Namn: ${n.namn}
`,y+=`   - E-post: ${n.epost}
`,n.telefon&&(y+=`   - Telefon: ${n.telefon}
`);const M=`mailto:${v}?subject=${encodeURIComponent(b)}&body=${encodeURIComponent(y)}`;t("confirmation"),setTimeout(()=>{window.location.href=M},1e3)};return l.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 md:py-10 animate-fade-in space-y-20",children:[l.jsxs("div",{className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-8 md:p-16 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-red-500/10 to-transparent pointer-events-none"}),l.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-12",children:[l.jsxs("div",{className:"max-w-2xl",children:[l.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-red-200 to-orange-400 leading-tight",children:"TERAPI"}),l.jsx("h2",{className:"text-xl md:text-3xl text-white/90 font-light italic mb-8",children:"Vi vgleder dig genom din utveckling"}),l.jsx("p",{className:"text-lg md:text-xl text-white/80 leading-relaxed font-light",children:"Enskild terapi kan g i flera olika led och tcka upp fr flera olika typer av problembilder. Det viktigaste fr oss r att vi mter dig i de problem du kommer med!"})]}),l.jsx("div",{className:"hidden lg:block shrink-0",children:l.jsx(za,{src:"/hemsida-bild1.jpeg",alt:"Gestaltterapi",className:"w-72 h-96",grayscale:!1,defaultRotation:"3deg"})})]})]}),l.jsxs("div",{className:"grid lg:grid-cols-2 gap-10",children:[l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 md:p-12 hover:bg-white/10 transition-all duration-300",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:"p-3 bg-red-500/20 rounded-2xl text-red-400",children:l.jsx(ey,{size:32})}),l.jsx("h3",{className:"text-2xl font-bold",children:"Gestaltterapeutisk grund"})]}),l.jsxs("p",{className:"text-white/80 leading-relaxed mb-6",children:["I enskild terapi jobbar vi p en gestaltterapeutisk grund och det innebr att vi jobbar utifrn ",l.jsx("strong",{children:"Hr, Nu och Hur"}),". Gestaltterapi r en upplevelsebaserad terapiform dr vgen r mognad och fullbordan genom den egna upplevelsen."]}),l.jsx("p",{className:"text-white/80 leading-relaxed",children:"I gestaltterapi tittar vi inte bakt och brottas i intellektuella diskussioner om hur du haft det och varfr det varit som det varit utan vi jobbar utifrn hur ditt liv tar sig uttryck hr och nu och lser upp de knutar som str i vgen fr att du ska skapa och leva det liv som du vill!"})]}),l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 md:p-12 hover:bg-white/10 transition-all duration-300",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:"p-3 bg-amber-500/20 rounded-2xl text-amber-400",children:l.jsx(ua,{size:32})}),l.jsx("h3",{className:"text-2xl font-bold",children:"Avsluta oavslutade mnster"})]}),l.jsx("p",{className:"text-white/80 leading-relaxed mb-6",children:"I gestaltterapi s jobbar vi fr att avsluta oavslutade mnster (gestalter) i livet som liksom gtt ut ur tid och inte lngre r nskvrda."}),l.jsxs("div",{className:"flex items-start gap-4 bg-black/20 p-6 rounded-2xl border border-white/5",children:[l.jsx(hl,{className:"text-orange-400 shrink-0 mt-1"}),l.jsx("p",{className:"text-white/90 italic",children:"Vi jobbar alltid med kontrakt i denna typ av terapi dr du sjlv bestmmer vgen och vi stmmer av med jmna mellanrum under perioden vi ses hur det gr med mlen i kontraktet."})]})]})]}),l.jsxs("div",{className:"glass bg-gradient-to-br from-red-900/10 to-orange-900/10 border border-white/10 rounded-3xl p-8 md:p-12 h-fit",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[l.jsx("div",{className:"p-3 bg-red-500/20 rounded-2xl text-red-400",children:l.jsx(Ha,{size:32})}),l.jsx("h3",{className:"text-2xl font-bold",children:"I enskild terapi jobbar vi med t.ex:"})]}),l.jsx("div",{className:"grid sm:grid-cols-2 gap-4",children:u.map((m,v)=>l.jsxs("div",{className:"flex items-center gap-3 bg-white/5 border border-white/5 p-4 rounded-xl hover:bg-white/10 hover:border-white/10 transition-all group",children:[l.jsx(lc,{className:"text-red-400/50 group-hover:text-red-400 transition-colors shrink-0",size:18}),l.jsx("span",{className:"text-white/80 font-medium",children:m})]},v))}),l.jsxs("div",{className:"mt-10 pt-8 border-t border-white/10 space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-3 text-white/70",children:[l.jsx(ws,{size:20,className:"text-orange-300"}),l.jsx("p",{className:"text-sm",children:"Vi jobbar med olika terapiformer och gr kontinuerligt i handledning."})]}),l.jsxs("div",{className:"flex items-center gap-3 text-white/70",children:[l.jsx(gC,{size:20,className:"text-orange-300"}),l.jsx("p",{className:"text-sm",children:"Vrt fokus r att mta dig dr du r, med de specifika utmaningar du br p."})]})]})]})]}),l.jsx("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-10 text-center max-w-4xl mx-auto",children:l.jsx("p",{className:"text-2xl font-light text-white/90 leading-relaxed italic",children:'"Det viktigaste fr oss r att vi mter dig i de problem du kommer med!"'})}),l.jsxs("div",{className:"max-w-4xl mx-auto w-full",children:[e==="splash"&&l.jsxs("button",{onClick:()=>t("form"),className:"w-full glass bg-white/10 backdrop-blur-xl border border-white/20 p-12 rounded-[40px] text-center hover:bg-white/15 transition-all group shadow-2xl animate-fade-in",children:[l.jsx("div",{className:"mb-6 flex justify-center",children:l.jsx("div",{className:"p-5 bg-orange-500/20 rounded-full text-orange-400 group-hover:scale-110 transition-transform duration-500",children:l.jsx(Ha,{size:40})})}),l.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Vi finns hr fr dig."}),l.jsx("p",{className:"text-lg text-white/70 mb-8 leading-relaxed",children:"Klicka hr fr att bertta mer, helt konfidentiellt."}),l.jsx("span",{className:"inline-block px-8 py-3 bg-white/10 hover:bg-white/20 border border-white/20 text-white rounded-xl font-bold transition-all hover:scale-105",children:"Hitta din terapeut"})]}),e==="form"&&l.jsxs("div",{ref:a,className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-8 md:p-12 shadow-2xl animate-fade-in",children:[l.jsxs("div",{className:"text-center mb-10",children:[l.jsx(Aw,{className:"mx-auto text-orange-400 mb-4",size:40}),l.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Sker du terapi?"}),l.jsx("p",{className:"text-white/70",children:"Lt oss hjlpa dig p vgen genom att svara p ngra korta frgor."})]}),l.jsxs("form",{onSubmit:p,className:"space-y-8",children:[l.jsxs("fieldset",{className:"p-6 border border-white/10 rounded-2xl bg-white/5",children:[l.jsx("legend",{className:"text-lg font-bold text-orange-300 px-3 mb-4",children:"1. Tidigare erfarenheter"}),l.jsxs("div",{className:"space-y-4 mb-6",children:[l.jsx("p",{className:"font-medium text-white/90",children:"Har du skt terapi tidigare?"}),["Ja, jag har gtt i terapi.","Nej, det hr r frsta gngen.","Jag har skt, men inte fullfljt."].map(m=>l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[l.jsx("input",{type:"radio",name:"exp",value:m,onChange:v=>s({...n,tidigare_erfarenhet:v.target.value}),className:"w-4 h-4 text-orange-500 bg-white/10 border-white/20"}),l.jsx("span",{className:"text-white/80 group-hover:text-white transition-colors",children:m})]},m))]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("label",{className:"block font-medium text-white/90",children:"Vad uppskattade du mest/minst tidigare?"}),l.jsx("textarea",{rows:2,maxLength:200,className:"w-full p-4 bg-black/30 border border-white/10 rounded-xl text-white outline-none focus:ring-2 focus:ring-orange-500",value:n.uppskattade,onChange:m=>s({...n,uppskattade:m.target.value})})]})]}),l.jsxs("fieldset",{className:"p-6 border border-white/10 rounded-2xl bg-white/5",children:[l.jsx("legend",{className:"text-lg font-bold text-orange-300 px-3 mb-4",children:"2. Vad sker du hjlp fr?"}),l.jsx("div",{className:"grid sm:grid-cols-2 gap-3 mb-6",children:["Stress","ngest","Nedstmdhet","Relationer","Sorg","Annan"].map(m=>l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",value:m,onChange:h,className:"w-4 h-4 rounded text-orange-500 bg-white/10 border-white/20"}),l.jsx("span",{className:"text-white/80",children:m})]},m))}),l.jsx("textarea",{rows:1,placeholder:"Beskriv mer hr...",className:"w-full p-4 bg-black/30 border border-white/10 rounded-xl text-white outline-none focus:ring-2 focus:ring-orange-500",value:n.annan_utmaning_text,onChange:m=>s({...n,annan_utmaning_text:m.target.value})})]}),l.jsxs("fieldset",{className:"p-6 border border-white/10 rounded-2xl bg-white/5",children:[l.jsx("legend",{className:"text-lg font-bold text-orange-300 px-3 mb-4",children:"3. nskeml & Kontakt"}),l.jsxs("div",{className:"mb-6",children:[l.jsx("p",{className:"font-medium text-white/90 mb-3",children:"Fredragen mtesform?"}),l.jsx("div",{className:"space-y-2",children:["Fysiska mten p plats.","Digitalt via Zoom."].map(m=>l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[l.jsx("input",{type:"radio",name:"motesform",value:m,onChange:v=>s({...n,motesform:v.target.value}),className:"w-4 h-4 text-orange-500 bg-white/10 border-white/20"}),l.jsx("span",{className:"text-white/80 group-hover:text-white transition-colors",children:m})]},m))})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"Namn"}),l.jsx("input",{type:"text",required:!0,className:"w-full p-3 bg-black/30 border border-white/10 rounded-xl text-white",value:n.namn,onChange:m=>s({...n,namn:m.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"E-post"}),l.jsx("input",{type:"email",required:!0,className:"w-full p-3 bg-black/30 border border-white/10 rounded-xl text-white",value:n.epost,onChange:m=>s({...n,epost:m.target.value})})]})]})]}),l.jsxs("button",{type:"submit",className:"w-full py-5 bg-white/10 hover:bg-white/20 border border-white/20 text-white font-bold rounded-xl shadow-xl hover:scale-[1.01] active:scale-95 transition-all flex items-center justify-center gap-3",children:["Skicka in och hitta matchning ",l.jsx(ml,{size:20})]})]})]}),e==="confirmation"&&l.jsxs("div",{className:"glass bg-white/10 backdrop-blur-xl border border-white/20 p-12 rounded-[40px] text-center shadow-2xl animate-fade-in",children:[l.jsx(lc,{className:"mx-auto text-green-400 mb-6",size:64}),l.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Tack fr ditt frtroende!"}),l.jsx("p",{className:"text-lg text-white/80 mb-6",children:"Vi frbereder nu ett e-postmeddelande med dina svar."}),l.jsx("p",{className:"text-white/60",children:'Klicka p "Skicka" i din e-postklient nr den ppnas. Vi terkommer snarast!'}),l.jsx("button",{onClick:()=>t("splash"),className:"mt-8 text-white hover:text-amber-400 underline font-bold",children:"G tillbaka"})]})]})]})},O4=({setPage:i})=>l.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 md:py-10 animate-fade-in space-y-16",children:[l.jsxs("div",{className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-8 md:p-16 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-indigo-500/10 to-transparent pointer-events-none"}),l.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-12",children:[l.jsxs("div",{className:"max-w-2xl",children:[l.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-indigo-200 to-purple-400 leading-tight",children:"GRUPP- & PARTERAPI"}),l.jsx("h2",{className:"text-xl md:text-3xl text-white/90 font-light italic mb-8",children:"Lkning genom relation och gemenskap"}),l.jsx("p",{className:"text-lg md:text-xl text-white/80 leading-relaxed font-light",children:"Mnniskan r en social varelse. Mnga av vra djupaste sr uppstr i relationer, men det r ocks dr de kan lka bst. Vi erbjuder specialiserad terapi fr grupper och par som vill frdjupa sin kontakt och lsa upp lsta mnster."})]}),l.jsx("div",{className:"hidden lg:block shrink-0",children:l.jsx(za,{src:"/bild-terapistol.jpeg",alt:"Parterapi",className:"w-64 h-80",grayscale:!1,defaultRotation:"-3deg"})})]})]}),l.jsxs("div",{className:"grid lg:grid-cols-2 gap-10",children:[l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 md:p-12 hover:bg-white/10 transition-all duration-300",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:"p-3 bg-purple-500/20 rounded-2xl text-purple-400",children:l.jsx(Ha,{size:32})}),l.jsx("h3",{className:"text-2xl font-bold",children:"Parterapi"})]}),l.jsx("p",{className:"text-white/80 leading-relaxed mb-6",children:"I parterapi fokuserar vi p dynamiken mellan er. Vi anvnder oss av gestaltmetodik fr att titta p hur ni kommunicerar, hur ni mter varandras behov och var kontakten brister."}),l.jsx("ul",{className:"space-y-4 mb-8",children:["Lsa upp destruktiva konflikmnster","Frdjupa den emotionella kontakten","Hantering av kriser och frtroendebrott","Utforska gemensamma vrderingar och ml"].map((e,t)=>l.jsxs("li",{className:"flex items-center gap-3 text-white/70 text-sm",children:[l.jsx(lc,{size:16,className:"text-purple-400"}),e]},t))})]}),l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 md:p-12 hover:bg-white/10 transition-all duration-300",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:"p-3 bg-indigo-500/20 rounded-2xl text-indigo-400",children:l.jsx(WC,{size:32})}),l.jsx("h3",{className:"text-2xl font-bold",children:"Gruppterapi"})]}),l.jsx("p",{className:"text-white/80 leading-relaxed mb-6",children:"Gruppen fungerar som en spegel. Genom att dela sina upplevelser med andra i liknande situationer skapas en unik form av validering och igenknning som r svr att n i enskild terapi."}),l.jsxs("div",{className:"bg-black/20 p-6 rounded-2xl border border-white/5 space-y-4",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(ua,{className:"text-indigo-400 mt-1",size:20}),l.jsx("p",{className:"text-sm text-white/80 italic",children:'"Att inse att jag inte r ensam r det frsta steget mot verklig frndring."'})]}),l.jsx("p",{className:"text-xs text-white/50",children:"Vi hller kontinuerligt grupper fr t.ex. anhriga, vuxna barn till missbrukare eller personer med liknande traumaupplevelser."})]})]})]}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx("div",{className:"mx-auto w-16 h-16 bg-white/10 rounded-full flex items-center justify-center text-indigo-300",children:l.jsx(la,{size:32})}),l.jsx("h4",{className:"font-bold",children:"Trygghet i rummet"}),l.jsx("p",{className:"text-sm text-white/60",children:"Vi skapar en ram dr alla parter knner sig hrda och respekterade."})]}),l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx("div",{className:"mx-auto w-16 h-16 bg-white/10 rounded-full flex items-center justify-center text-indigo-300",children:l.jsx(ws,{size:32})}),l.jsx("h4",{className:"font-bold",children:"Relationell vxt"}),l.jsx("p",{className:"text-sm text-white/60",children:"Fokus p hur vi pverkar varandra i realtid  hr och nu."})]}),l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx("div",{className:"mx-auto w-16 h-16 bg-white/10 rounded-full flex items-center justify-center text-indigo-300",children:l.jsx(ey,{size:32})}),l.jsx("h4",{className:"font-bold",children:"Mlmedvetenhet"}),l.jsx("p",{className:"text-sm text-white/60",children:"Vi arbetar med tydliga kontrakt fr att n de resultat ni nskar."})]})]}),l.jsxs("div",{className:"glass bg-gradient-to-r from-indigo-900/40 to-purple-900/40 border border-white/20 rounded-3xl p-10 text-center max-w-4xl mx-auto",children:[l.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Vill ni veta mer?"}),l.jsx("p",{className:"text-white/70 mb-8",children:"Boka ett inledande samtal fr att se om grupp- eller parterapi r rtt vg fr just er."}),l.jsxs("button",{onClick:()=>i(Se.CONTACT),className:"px-10 py-4 bg-white text-indigo-900 rounded-full font-bold hover:scale-105 transition-all shadow-xl flex items-center gap-2 mx-auto",children:["Kontakta oss fr bokning ",l.jsx(us,{size:20})]})]})]}),L4=({setPage:i})=>l.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 md:py-10 animate-fade-in space-y-16",children:[l.jsxs("div",{className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-8 md:p-16 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 right-0 w-1/3 h-full bg-gradient-to-l from-blue-500/10 to-transparent pointer-events-none"}),l.jsxs("div",{className:"relative z-10 max-w-4xl",children:[l.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-blue-200 to-indigo-400 leading-tight",children:"Utbildning i Gestaltterapi"}),l.jsx("h2",{className:"text-xl md:text-3xl text-white/90 font-light italic mb-8",children:"Frdjupa din nrvaro och professionella skicklighet"}),l.jsx("p",{className:"text-lg md:text-xl text-white/80 leading-relaxed",children:"Vr gestaltutbildning vnder sig till dig som vill arbeta processinriktat och relationellt. Vi fokuserar p kontakten, medvetenheten och det personliga ansvaret i det terapeutiska mtet."})]})]}),l.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-2xl p-6 md:p-8",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:"p-3 bg-blue-500/20 rounded-xl text-blue-400",children:l.jsx(ey,{size:28})}),l.jsx("h3",{className:"text-2xl font-bold",children:"Hr, Nu och Hur"})]}),l.jsx("p",{className:"text-white/80 leading-relaxed mb-6",children:"Gestaltterapi r en upplevelsebaserad metod. I utbildningen lr du dig att anvnda dig sjlv som instrument och att arbeta med det som sker i rummet just nu. Vi gr bortom intellektualiseringar och fokuserar p den direkta upplevelsen och hur den formar vra livsmnster."}),l.jsx("p",{className:"text-white/80 leading-relaxed",children:"Utbildningen ger dig verktyg att identifiera oavslutade gestalter och stdja klienten i att n fullbordan och mognad. Vi varvar teori med praktiska vningar, handledning och eget terapiarbete."})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-2xl font-bold px-2",children:"Utbildningens krnomrden"}),l.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:[{title:"Kontaktformler",desc:"Frstelse fr hur vi mter eller undviker kontakt med omvrlden."},{title:"Figur & Grund",desc:"Lr dig se vad som trder fram som mest relevant i stunden."},{title:"Kroppslig Medvetenhet",desc:"Lyssna p kroppens signaler som brare av sanning."},{title:"Den terapeutiska alliansen",desc:"Att bygga en trygg och utmanande relation."}].map((e,t)=>l.jsxs("div",{className:"glass bg-white/5 border border-white/5 p-6 rounded-xl hover:bg-white/10 transition-colors",children:[l.jsx("h4",{className:"font-bold text-blue-300 mb-2",children:e.title}),l.jsx("p",{className:"text-sm text-white/70",children:e.desc})]},t))})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"glass bg-gradient-to-br from-blue-900/20 to-indigo-900/20 border border-blue-500/30 rounded-2xl p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx(_g,{className:"text-yellow-400",size:24}),l.jsx("h3",{className:"text-xl font-bold",children:"Vem br g?"})]}),l.jsx("p",{className:"text-white/80 text-sm leading-relaxed mb-6",children:"Utbildningen r skrddarsydd fr socionomer, psykologer, behandlingspedagoger och chefer som vill frdjupa sitt ledarskap och sin samtalsmetodik."}),l.jsxs("div",{className:"space-y-3 bg-black/30 p-4 rounded-xl border border-white/5",children:[l.jsxs("div",{className:"flex gap-3 text-xs text-white/70",children:[l.jsx(hl,{className:"text-blue-400 shrink-0",size:16}),l.jsx("span",{children:"Minst 2 rs yrkeserfarenhet inom mnniskovrdande yrken."})]}),l.jsxs("div",{className:"flex gap-3 text-xs text-white/70",children:[l.jsx(hl,{className:"text-blue-400 shrink-0",size:16}),l.jsx("span",{children:"Vilja att arbeta med sin egen personliga utveckling."})]})]})]}),l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-2xl p-6",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Intresseanmlan"}),l.jsx("p",{className:"text-sm text-white/60 mb-6",children:"Vi startar nya grupper kontinuerligt. Kontakta oss fr kursstart och kursplan."}),l.jsxs("button",{onClick:()=>i(Se.CONTACT),className:"w-full py-3 bg-white/10 hover:bg-white/20 border border-white/20 text-white rounded-xl font-bold transition-all hover:scale-105 flex items-center justify-center gap-2",children:["Kontakta oss ",l.jsx(us,{size:18})]})]})]})]})]}),U4=({setPage:i})=>{const[e,t]=ie.useState(null),n=a=>{t(e===a?null:a)},s=[{id:1,title:"Block 1: Introduktion & Yrkesroll",content:"Hr lggs grunden fr yrkesrollen som behandlingsassistent. Vi gr igenom etik, vrdegrund och vad det innebr att arbeta professionellt med mnniskor i utsatta situationer. Fokus p bemtande och empatisk frmga."},{id:2,title:"Block 2: Kommunikation & Samtalsmetodik",content:"Detta block fokuserar p praktiska verktyg fr kommunikation. Vi trnar p aktivt lyssnande, MI (Motiverande Samtal) och hur man bygger brande relationer med klienter."},{id:3,title:"Block 3: Psykisk Ohlsa & Diagnoser",content:"Grundlggande kunskap om de vanligaste psykiatriska diagnoserna ssom ngest, depression, ADHD och autismspektrumtillstnd. Hur anpassar vi vrt std utifrn olika frutsttningar?"},{id:4,title:"Block 4: Beroendelra & Missbruk",content:"En djupdykning i beroendets mekanismer, bde substansberoende och beteendeberoende. Vi gr igenom olika behandlingsmodeller och terfallsprevention."},{id:5,title:"Block 5: Sociallagstiftning & Dokumentation",content:"Viktiga lagar som styr arbetet, ssom SoL och LSS. Vi lr oss ocks vikten av rttssker dokumentation och hur man skriver genomfrandeplaner."},{id:6,title:"Block 6: Konflikthantering & Lgaffektivt Bemtande",content:"Metoder fr att frebygga och hantera hotfulla situationer. Vi arbetar med lgaffektivt bemtande (LAB) fr att skapa trygghet fr bde personal och klienter."},{id:7,title:"Block 7: Gruppdynamik & Systemteori",content:"Hur fungerar grupper och familjesystem? Vi tittar p roller i grupper och hur man kan arbeta med ntverket runt individen."},{id:8,title:"Block 8: Praktisk Tillmpning & Avslutning",content:"Summering av utbildningen, fallbeskrivningar (case) och praktiska vningar dr vi vver samman kunskapen frn alla tidigare block. Diplomering."}];return l.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 md:py-10 animate-fade-in space-y-16",children:[l.jsxs("div",{className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-8 md:p-16 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 right-0 w-1/3 h-full bg-gradient-to-l from-emerald-500/10 to-transparent pointer-events-none"}),l.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row items-center justify-between gap-12",children:[l.jsxs("div",{className:"max-w-3xl",children:[l.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-emerald-200 to-teal-400 leading-tight",children:"Behandlingsassistent"}),l.jsx("h2",{className:"text-xl md:text-3xl text-white/90 font-light italic mb-8",children:"En yrkesutbildning fr framtidens vrd och omsorg"}),l.jsx("p",{className:"text-lg md:text-xl text-white/80 leading-relaxed font-light",children:"Vill du arbeta med mnniskor och gra verklig skillnad? Vr utbildning till behandlingsassistent ger dig den teoretiska grund och de praktiska verktyg du behver fr att st trygg i mtet med mnniskor i frndring."})]}),l.jsx("div",{className:"hidden lg:block shrink-0",children:l.jsx(za,{src:"/hemsida-bild6.jpeg",alt:"Behandlingsassistent",className:"w-72 h-96",grayscale:!1,defaultRotation:"3deg"})})]})]}),l.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-2xl p-6 md:p-8",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:"p-3 bg-emerald-500/20 rounded-xl text-emerald-400",children:l.jsx(AC,{size:28})}),l.jsx("h3",{className:"text-2xl font-bold",children:"Om utbildningen"})]}),l.jsx("p",{className:"text-white/80 leading-relaxed mb-6",children:"Vr utbildning r utformad fr att ge dig en bred kompetens som efterfrgas p arbetsmarknaden. Vi varvar frelsningar med grupparbeten, rollspel och reflektion. Mlet r att du efter avslutad utbildning ska knna dig redo att arbeta inom exempelvis HVB-hem, stdboende, ppenvrd eller socialpsykiatri."})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h3",{className:"text-2xl font-bold px-2 mb-4 flex items-center gap-2",children:[l.jsx(Jb,{size:24,className:"text-emerald-400"})," Kursinnehll"]}),l.jsx("div",{className:"space-y-3",children:s.map(a=>l.jsxs("div",{className:`glass border rounded-xl overflow-hidden transition-all duration-300 ${e===a.id?"bg-white/10 border-emerald-500/40 shadow-lg":"bg-white/5 border-white/5 hover:bg-white/10"}`,children:[l.jsxs("button",{onClick:()=>n(a.id),className:"w-full flex items-center justify-between p-5 text-left focus:outline-none",children:[l.jsx("span",{className:`font-bold text-lg ${e===a.id?"text-emerald-300":"text-white/90"}`,children:a.title}),e===a.id?l.jsx(fT,{className:"text-emerald-400",size:24}):l.jsx(qv,{className:"text-white/50",size:24})]}),e===a.id&&l.jsxs("div",{className:"px-5 pb-6 pt-0 animate-fade-in",children:[l.jsx("div",{className:"h-px bg-white/10 mb-4 w-full"}),l.jsx("p",{className:"text-white/80 leading-relaxed",children:a.content})]})]},a.id))})]})]}),l.jsx("div",{className:"space-y-6",children:l.jsxs("div",{className:"glass bg-gradient-to-br from-emerald-900/20 to-teal-900/20 border border-emerald-500/30 rounded-2xl p-6 sticky top-6",children:[l.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[l.jsx(Ba,{size:20,className:"text-emerald-400"})," Kursstart & Upplgg"]}),l.jsxs("div",{className:"space-y-4 mb-8",children:[l.jsxs("div",{className:"flex gap-4",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center shrink-0",children:l.jsx(ws,{size:18,className:"text-emerald-300"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-white/50 uppercase font-bold",children:"Studietakt"}),l.jsx("p",{className:"text-white font-medium",children:"Halvfart (50%)"}),l.jsx("p",{className:"text-sm text-white/70",children:"Mjligt att kombinera med arbete"})]})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center shrink-0",children:l.jsx(hl,{size:18,className:"text-emerald-300"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-white/50 uppercase font-bold",children:"Behrighet"}),l.jsx("p",{className:"text-white font-medium",children:"Grundlggande behrighet"}),l.jsx("p",{className:"text-sm text-white/70",children:"Intervju kan frekomma"})]})]})]}),l.jsx("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5 mb-6",children:l.jsx("p",{className:"text-sm text-white/80 italic",children:'"En utbildning som inte bara ger kunskap, utan ocks personlig utveckling."'})}),l.jsxs("button",{onClick:()=>i(Se.CONTACT),className:"w-full py-4 bg-white/10 hover:bg-white/20 border border-white/20 text-white rounded-xl font-bold transition-all hover:scale-[1.02] flex items-center justify-center gap-2",children:["Ansk nu ",l.jsx(us,{size:20})]})]})})]})]})},P4=({setPage:i})=>{const[e,t]=ie.useState(!1),[n,s]=ie.useState(!1),[a,u]=ie.useState({url:"",title:""}),h=[{title:"Ett grundlggande attributionsfel",description:"Varfr dmer vi andra hrdare n oss sjlva? En genomgng av hur vra hjrnor snedvrider verkligheten i sociala relationer.",pdfUrl:"/Attributionsfel-narcissism.pdf",category:"Psykologi",date:"2024-01-20"},{title:"Polarisering och personlighetsstrningar",description:"En djupanalys av hur dmande och polarisering pverkar vra relationer och vr sjlvbild i ett kliniskt sammanhang.",pdfUrl:"/Polarisering-av-personlighetsstrningar .pdf",category:"Klinisk analys",date:"2024-01-15"}],p=(v,b)=>{u({url:v,title:b}),s(!0)},m=()=>{t(!0),setTimeout(()=>t(!1),5e3)};return l.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 animate-fade-in space-y-12",children:[l.jsx(Lw,{isOpen:n,onClose:()=>s(!1),pdfUrl:a.url,title:a.title}),l.jsxs("div",{className:"text-center max-w-3xl mx-auto space-y-4",children:[l.jsx("h1",{className:"text-4xl md:text-5xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-amber-200 to-orange-400",children:"Blogg & Reflektion"}),l.jsx("p",{className:"text-lg text-white/70 italic font-light",children:"Tankar om trauma, terhmtning och mnsklig utveckling."})]}),l.jsxs("div",{className:"max-w-5xl mx-auto space-y-8",children:[l.jsxs("h3",{className:"text-sm font-black px-4 text-white/30 uppercase tracking-[0.3em] flex items-center gap-3",children:[l.jsx(ua,{size:16,className:"text-orange-500"})," Senaste inlggen"]}),l.jsx("div",{className:"grid gap-6",children:h.map((v,b)=>l.jsxs("div",{className:"glass bg-white/[0.03] border border-white/10 rounded-[2.5rem] p-6 md:p-10 hover:bg-white/[0.05] hover:border-orange-500/30 transition-all duration-500 group relative overflow-hidden flex flex-col md:flex-row gap-8 items-center",children:[l.jsx("div",{className:"md:w-1/4 flex justify-center",children:l.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 bg-orange-500/10 rounded-3xl flex items-center justify-center text-orange-400 group-hover:scale-110 transition-transform duration-500",children:l.jsx(yg,{size:48})})}),l.jsxs("div",{className:"md:w-3/4 space-y-4 text-center md:text-left",children:[l.jsxs("div",{className:"flex flex-wrap justify-center md:justify-start gap-3 items-center",children:[l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest bg-orange-500/20 text-orange-400 px-3 py-1 rounded-full",children:v.category}),l.jsxs("span",{className:"text-[10px] font-bold text-white/30 flex items-center gap-1",children:[l.jsx(pT,{size:12})," ",v.date]})]}),l.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white leading-tight group-hover:text-amber-200 transition-colors",children:v.title}),l.jsx("p",{className:"text-white/60 text-sm md:text-base leading-relaxed max-w-2xl font-light",children:v.description}),l.jsxs("button",{onClick:()=>p(v.pdfUrl,v.title),className:"flex items-center gap-2 text-orange-400 font-black text-sm md:text-base hover:gap-4 transition-all mx-auto md:mx-0",children:["Ls hela inlgget ",l.jsx(us,{size:20})]})]}),l.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 right-[5%] p-4 opacity-5 group-hover:opacity-10 transition-opacity blur-[1px] pointer-events-none",children:l.jsx("img",{src:"/assets/logo2.png",alt:"Logo",className:"w-40 h-40 md:w-56 md:h-56 object-contain rotate-12"})})]},b))})]}),l.jsx("div",{className:"max-w-5xl mx-auto",children:l.jsxs("div",{className:"glass bg-gradient-to-br from-orange-600/10 to-transparent border border-white/10 rounded-[3rem] p-8 md:p-12 text-center flex flex-col items-center justify-center space-y-6 relative overflow-hidden shadow-2xl",children:[l.jsx("div",{className:"p-4 bg-orange-500/10 rounded-2xl text-orange-400",children:l.jsx(ng,{size:32})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white",children:"Vill du veta nr vi publicerar nsta del?"}),l.jsx("p",{className:"text-white/60 max-w-lg mx-auto leading-relaxed font-light",children:"Registrera dig fr vra mnadsbrev s fr du bde nya artiklar och inbjudningar till vra workshops direkt i korgen."})]}),e?l.jsxs("div",{className:"flex items-center gap-3 px-8 py-3.5 bg-green-500/20 border border-green-500/40 rounded-xl text-green-400 text-sm font-black animate-fade-in uppercase tracking-widest",children:[l.jsx(lc,{size:18}),"Vi hr av oss!"]}):l.jsx("button",{onClick:m,className:"px-8 py-3.5 bg-orange-500 hover:bg-orange-400 text-slate-950 rounded-xl font-black transition-all hover:scale-105 shadow-xl shadow-orange-500/20 flex items-center gap-2 uppercase tracking-widest text-xs",children:"F notis vid nya inlgg"})]})}),l.jsx(Ow,{}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto opacity-30 grayscale pointer-events-none",children:["Trauma","Gestaltterapi","Pedagogik","Reflektion"].map(v=>l.jsx("div",{className:"glass bg-white/5 border border-white/10 py-3 rounded-full text-center text-xs uppercase tracking-widest font-bold",children:v},v))})]})},z4=()=>{const[i,e]=ie.useState("info"),[t,n]=ie.useState({name:"",ssn:"",email:"",phone:"",newsletter:!0}),s=a=>{a.preventDefault(),e("success")};return l.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-6 md:py-10 animate-fade-in w-full space-y-12",children:[l.jsxs("div",{className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-8 md:p-16 text-center",children:[l.jsx("h1",{className:"text-3xl md:text-5xl font-bold mb-6 text-transparent bg-clip-text bg-gradient-to-r from-amber-200 to-orange-400",children:"Horizonten Gemenskap"}),l.jsx("p",{className:"text-xl md:text-2xl text-white/90 font-light italic mb-8",children:"En trygg hamn fr lkning, insikt och tillsammanskap."}),l.jsxs("div",{className:"flex justify-center gap-4 flex-wrap",children:[l.jsx("div",{className:"px-6 py-2 bg-white/10 rounded-full border border-white/20 text-sm",children:"Appen"}),l.jsx("div",{className:"px-6 py-2 bg-white/10 rounded-full border border-white/20 text-sm",children:"Gemenskap"}),l.jsx("div",{className:"px-6 py-2 bg-white/10 rounded-full border border-white/20 text-sm",children:"Sjlvhjlp"})]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 hover:bg-white/10 transition-all duration-300",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:"p-3 bg-orange-500/20 rounded-2xl text-orange-400",children:l.jsx(kw,{size:32})}),l.jsx("h2",{className:"text-2xl font-bold",children:"Appen frn Horizonten"})]}),l.jsx("p",{className:"text-white/80 leading-relaxed mb-6",children:"Vr egen app r hjrtat i vr gemenskap. Hr hittar du ett skert rum dr du kan dela erfarenheter, f std och vxa tillsammans med andra som frstr. Appen r designad fr att vara din fljeslagare i vardagen, fylld med verktyg fr sjlvreglering och reflektion."}),l.jsxs("ul",{className:"space-y-3",children:[l.jsxs("li",{className:"flex items-start gap-3 text-white/70",children:[l.jsx(ua,{className:"text-amber-400 shrink-0 mt-1",size:18}),l.jsx("span",{children:"Interaktiv gemenskap fr erfarenhetsutbyte."})]}),l.jsxs("li",{className:"flex items-start gap-3 text-white/70",children:[l.jsx(ua,{className:"text-amber-400 shrink-0 mt-1",size:18}),l.jsx("span",{children:"Exklusivt material och guidade vningar."})]})]})]}),l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 hover:bg-white/10 transition-all duration-300",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:"p-3 bg-red-500/20 rounded-2xl text-red-400",children:l.jsx(Ba,{size:32})}),l.jsx("h2",{className:"text-2xl font-bold",children:"Terapeutledda mten"})]}),l.jsx("p",{className:"text-white/80 leading-relaxed mb-6",children:"Vi tror p kraften i det gemensamma samtalet. Varje vecka hller vi i terapeutledda sjlvhjlpsmten i appen. Hr fr du professionell guidning i en trygg gruppmilj dr vi fokuserar p praktisk tillmpning av traumafrstelse och lkning."}),l.jsxs("div",{className:"bg-black/20 p-4 rounded-2xl border border-white/5",children:[l.jsx("p",{className:"text-sm font-bold text-orange-300 mb-1",children:"Nr?"}),l.jsx("p",{className:"text-white/70 italic",children:"En gng per vecka, direkt i Horizonten-appen."})]})]})]}),l.jsxs("div",{className:"glass bg-gradient-to-br from-orange-900/20 to-amber-900/20 border border-orange-500/30 rounded-3xl p-8 md:p-12 transition-all duration-500",children:[i==="info"&&l.jsxs("div",{className:"grid md:grid-cols-3 gap-8 items-center animate-fade-in",children:[l.jsx("div",{className:"md:col-span-1 flex justify-center",children:l.jsx(za,{src:"/booklet.jpeg",alt:"Boken: Myndighetsinducerat trauma",className:"w-48 h-64",defaultRotation:"3deg"})}),l.jsxs("div",{className:"md:col-span-2 space-y-6",children:[l.jsx("h2",{className:"text-3xl font-bold",children:"Boken: Myndighetsinducerat trauma"}),l.jsx("p",{className:"text-lg text-white/80 leading-relaxed",children:"Vr nyutgivna bok r en djupdykning i hur systemet kan skada och hur vi kan lka. Men boken r mer n bara text  den r en guide."}),l.jsxs("div",{className:"flex items-start gap-4 bg-white/5 p-6 rounded-2xl border border-white/10",children:[l.jsx(Ha,{className:"text-red-400 shrink-0"}),l.jsx("p",{className:"text-white/90 italic",children:'"Tillhrande boken finns en stor mngd sjlvhjlpsmaterial och praktiska vningar i appen, skapade fr att ge dig verktygen att navigera i din egen lkningsprocess."'})]}),l.jsx("button",{onClick:()=>e("form"),className:"px-8 py-3 bg-white/10 hover:bg-white/20 border border-white/20 text-white rounded-xl font-bold transition-all hover:scale-105",children:"Bestll boken hr"})]})]}),i==="form"&&l.jsxs("div",{className:"max-w-2xl mx-auto animate-fade-in",children:[l.jsxs("div",{className:"flex items-center justify-between mb-8",children:[l.jsx("h2",{className:"text-3xl font-bold",children:"Bestll boken"}),l.jsx("button",{onClick:()=>e("info"),className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:l.jsx(Mu,{size:24,className:"text-white/70"})})]}),l.jsxs("form",{onSubmit:s,className:"space-y-6",children:[l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-bold text-white/80 ml-1",children:"Namn"}),l.jsx("input",{required:!0,type:"text",placeholder:"Ditt namn",className:"w-full p-4 bg-black/40 border border-white/10 rounded-xl text-white outline-none focus:border-amber-500 transition-all",value:t.name,onChange:a=>n({...t,name:a.target.value})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-bold text-white/80 ml-1",children:"Personnummer"}),l.jsx("input",{required:!0,type:"text",placeholder:"MMDD-XXXX",className:"w-full p-4 bg-black/40 border border-white/10 rounded-xl text-white outline-none focus:border-amber-500 transition-all",value:t.ssn,onChange:a=>n({...t,ssn:a.target.value})})]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-bold text-white/80 ml-1",children:"E-post"}),l.jsx("input",{required:!0,type:"email",placeholder:"din@epost.se",className:"w-full p-4 bg-black/40 border border-white/10 rounded-xl text-white outline-none focus:border-amber-500 transition-all",value:t.email,onChange:a=>n({...t,email:a.target.value})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-bold text-white/80 ml-1",children:"Telefon"}),l.jsx("input",{required:!0,type:"tel",placeholder:"070-XXX XX XX",className:"w-full p-4 bg-black/40 border border-white/10 rounded-xl text-white outline-none focus:border-amber-500 transition-all",value:t.phone,onChange:a=>n({...t,phone:a.target.value})})]})]}),l.jsx("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5 mt-4",children:l.jsxs("label",{className:"flex items-center gap-4 cursor-pointer group",children:[l.jsxs("div",{className:"relative flex items-center",children:[l.jsx("input",{type:"checkbox",className:"peer h-6 w-6 cursor-pointer appearance-none rounded-md border border-white/20 bg-black/40 transition-all checked:border-amber-500 checked:bg-amber-500",checked:t.newsletter,onChange:a=>n({...t,newsletter:a.target.checked})}),l.jsx(lc,{size:16,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-black opacity-0 peer-checked:opacity-100 pointer-events-none",strokeWidth:3})]}),l.jsx("span",{className:"text-white/90 font-medium group-hover:text-white transition-colors",children:"Jag vill prenumerera p nyhetsbrevet"})]})}),l.jsxs("button",{type:"submit",className:"w-full py-4 bg-white/10 hover:bg-white/20 border border-white/20 text-white font-bold rounded-xl transition-all hover:scale-[1.01] active:scale-95 flex items-center justify-center gap-3 mt-4",children:["Skicka bestllning ",l.jsx(ml,{size:20})]})]})]}),i==="success"&&l.jsxs("div",{className:"text-center py-10 animate-fade-in flex flex-col items-center justify-center",children:[l.jsx("div",{className:"w-20 h-20 bg-emerald-500/20 rounded-full flex items-center justify-center mb-6 shadow-xl",children:l.jsx(lc,{size:40,className:"text-emerald-400"})}),l.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Tack fr din bestllning!"}),l.jsxs("p",{className:"text-white/70 max-w-md mx-auto mb-8",children:['Vi har mottagit din order av boken "Myndighetsinducerat trauma". En bekrftelse och faktura kommer att skickas till ',t.email,"."]}),l.jsx("button",{onClick:()=>e("info"),className:"text-white hover:text-amber-400 font-bold underline transition-colors",children:"G tillbaka"})]})]}),l.jsxs("div",{className:"text-center py-6",children:[l.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Vill du bli en del av gemenskapen?"}),l.jsx("p",{className:"text-white/60 mb-6",children:"Ladda ner appen och brja din resa tillsammans med oss."}),l.jsxs("div",{className:"flex justify-center gap-4",children:[l.jsx("button",{className:"px-6 py-2 bg-white/10 hover:bg-white/20 rounded-xl border border-white/20 font-bold transition-all hover:scale-105",children:"App Store"}),l.jsx("button",{className:"px-6 py-2 bg-white/10 hover:bg-white/20 rounded-xl border border-white/20 font-bold transition-all hover:scale-105",children:"Google Play"})]})]})]})},tu=[{id:0,name:"Minerva Kassab",email:"minerva@klattertradet.se",age:36,role:"Samtalsterapeut",subRole:"Relationsspecialist",desc:"Erbjuder stdjande samtal och terapi med fokus p personlig utveckling och relationshantering.",image:"/assets/minerva_profil.jpg"},{id:1,name:"Mattias O Sandin",email:"mattias@klattertradet.se",age:34,role:"Gestalt- & Hypnosterapeut",subRole:"Resursfokuserad samtalsterapeut",desc:"Arbetar med undermedvetna processer och kroppslig frankring i nuet.",image:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?q=80&w=1000&auto=format&fit=crop"},{id:2,name:"Billy Ljungberg",email:"billy@klattertradet.se",age:35,role:"Traumaterapeut",subRole:"Utbildare & Handledare",desc:"Specialiserad p myndighetsinducerat trauma och komplexa livssituationer.",image:"/billy-bokning.jpeg"},{id:3,name:"Linda Matta",email:"linda@klattertradet.se",age:46,role:"Samtalsterapeut & Hudterapeut",subRole:"Holistisk Hlsa",desc:"Erbjuder en unik helhetssyn dr det inre och yttre vlmendet mts.",image:"/assets/linda-matta-new.jpeg"},{id:4,name:"Malin Widerlv",email:"malin@klattertradet.se",age:42,role:"Behandlingspedagog",subRole:"Socialarbetare & Familjeombud",desc:"Expertis inom socialt arbete och familjedynamik med fokus p trygga lsningar fr hela familjen.",image:"/assets/malin-widerlov.png"}],B4=()=>{const[i,e]=ie.useState(0),[t,n]=ie.useState({x:0,y:0}),[s,a]=ie.useState(!1),[u,h]=ie.useState(null),[p,m]=ie.useState(null),[v,b]=ie.useState(1),y=ie.useRef(null),[w,M]=ie.useState(!1),[k,T]=ie.useState({name:"",email:"",phone:"",meetingForm:"Fysiskt p mottagning",reason:""}),N=z=>{if(!y.current)return;const G=y.current.getBoundingClientRect(),U=z.clientX-(G.left+G.width/2),L=z.clientY-(G.top+G.height/2);n({x:Number((L/(G.height/2)*-10).toFixed(2)),y:Number((U/(G.width/2)*10).toFixed(2))})},R=(()=>{const z=[],G=new Date;for(let U=0;U<7;U++){const L=new Date(G);if(L.setDate(G.getDate()+U),L.getDay()!==0&&(z.push({day:L.toLocaleDateString("sv-SE",{weekday:"short"}).replace(/^\w/,W=>W.toUpperCase()),num:L.getDate().toString(),full:L.toLocaleDateString("sv-SE",{day:"numeric",month:"short"})}),z.length>=5))break}return z})(),D=["07:00","08:00","09:00","10:30","13:00","14:45","16:00","17:30"],I=z=>{z.preventDefault();const G=tu[i],U="billy@klattertradet.se";let L=G.email;G.email!==U&&(L+=`,${U}`);const W=G.name,J=u?`${u} ${new Date().toLocaleDateString("sv-SE",{month:"long",year:"numeric"})}`:"",Q=`Ny bokning: ${k.name} - ${J} kl ${p}`,ue=`
NY BOKNING VIA HEMSIDAN

TERAPEUT: ${W}
DATUM: ${J}
TID: ${p}
MTESFORM: ${k.meetingForm}

KONTAKTUPPGIFTER:
Namn: ${k.name}
E-post: ${k.email}
Telefon: ${k.phone}

SYFTE / MEDDELANDE:
${k.reason||"Ingen beskrivning angiven."}

---
Detta r ett automatiskt genererat utkast frn hemsidan.
    `.trim(),ne=`mailto:${L}?subject=${encodeURIComponent(Q)}&body=${encodeURIComponent(ue)}`;b(3),setTimeout(()=>{window.location.href=ne},500)},P=z=>{z.preventDefault(),M(!0)};return l.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-10 animate-fade-in space-y-16",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between px-4 gap-6",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-amber-500 text-[10px] font-bold uppercase tracking-[0.3em] mb-2 block",children:"Tidsbokning"}),l.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white italic tracking-tight",children:"Vlj en tid i kalendern"})]}),l.jsx("div",{className:"inline-flex bg-white/5 p-1.5 rounded-2xl border border-white/10 backdrop-blur-xl",children:tu.map(z=>l.jsx("button",{onClick:()=>{e(z.id),b(1),m(null),h(null)},className:`px-6 md:px-8 py-3 rounded-xl text-sm font-bold transition-all duration-300 ${i===z.id?"bg-white/10 border border-white/20 text-white scale-105":"text-white/50 hover:text-white hover:bg-white/5"}`,children:z.name},z.id))})]}),l.jsxs("div",{className:"flex flex-col lg:flex-row items-start gap-12 lg:gap-20",children:[l.jsx("div",{className:"lg:w-1/2 w-full flex justify-center",children:l.jsxs("div",{ref:y,onMouseMove:N,onMouseEnter:()=>a(!0),onMouseLeave:()=>{a(!1),n({x:0,y:0})},style:{perspective:"1000px"},className:"relative cursor-pointer group",children:[l.jsxs("div",{className:"relative w-[300px] md:w-[380px] aspect-[3/4] rounded-[2.5rem] overflow-hidden shadow-2xl transition-all duration-500 ease-out border border-white/10",style:{transform:`rotateX(${t.x}deg) rotateY(${t.y}deg) scale(${s?1.05:1})`,transformStyle:"preserve-3d"},children:[l.jsxs("div",{className:"absolute inset-0 bg-slate-900",children:[l.jsx("img",{src:tu[i].image,className:"w-full h-full object-cover object-top opacity-60 grayscale group-hover:grayscale-0 transition-all duration-1000",alt:"Therapist"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-90"})]}),l.jsxs("div",{className:"absolute inset-0 p-10 flex flex-col justify-end",style:{transform:"translateZ(60px)"},children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("span",{className:"text-amber-500 text-[10px] font-bold tracking-[0.3em] uppercase block mb-1",children:[tu[i].age," r  ",tu[i].subRole]}),l.jsx("h2",{className:"text-4xl font-black text-white leading-none",children:tu[i].name})]}),l.jsxs("p",{className:"text-white/70 text-sm leading-relaxed mb-6 border-l-2 border-amber-500/50 pl-4 italic",children:['"',tu[i].desc,'"']}),l.jsxs("div",{className:"flex items-center gap-2 text-amber-500/80 text-[11px] font-bold uppercase tracking-widest",children:[l.jsx(hl,{size:14})," Certifierad Behandlare"]})]})]}),l.jsx("div",{className:"absolute -inset-4 bg-amber-500/10 blur-3xl -z-10 rounded-full opacity-50 group-hover:opacity-100 transition-opacity"})]})}),l.jsx("div",{className:"lg:w-1/2 w-full",children:l.jsx("div",{className:"glass bg-white/5 border border-white/10 rounded-[2.5rem] p-8 md:p-12 shadow-2xl min-h-[550px] flex flex-col",children:v===1?l.jsxs("div",{className:"animate-fade-in flex-1 flex flex-col",children:[l.jsx("h3",{className:"text-3xl font-black mb-2 text-white italic",children:"Boka session"}),l.jsxs("p",{className:"text-zinc-500 text-sm mb-10",children:["Vlj ett datum och en tid fr ditt mte med ",tu[i].name,"."]}),l.jsxs("div",{className:"space-y-10 flex-1",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-amber-500 mb-4 block",children:new Date().toLocaleDateString("sv-SE",{month:"long",year:"numeric"})}),l.jsx("div",{className:"flex gap-3 overflow-x-auto pb-4 no-scrollbar",children:R.map(z=>l.jsxs("button",{onClick:()=>{h(z.num),m(null)},className:`flex flex-col items-center min-w-[75px] py-5 rounded-2xl border transition-all ${u===z.num?"bg-amber-500 border-amber-500 text-black shadow-xl scale-105":"bg-white/5 border-white/10 text-zinc-400 hover:border-white/30"}`,children:[l.jsx("span",{className:"text-[10px] uppercase font-bold mb-1",children:z.day}),l.jsx("span",{className:"text-xl font-black",children:z.num})]},z.num))})]}),l.jsxs("div",{children:[l.jsx("label",{className:`text-[10px] font-bold uppercase tracking-widest mb-4 block transition-colors ${u?"text-amber-500":"text-zinc-700"}`,children:"Tillgngliga tider"}),l.jsx("div",{className:"grid grid-cols-3 gap-3",children:D.map(z=>l.jsx("button",{disabled:!u,onClick:()=>m(z),className:`py-4 rounded-xl text-sm font-black border transition-all ${u?p===z?"bg-white text-black border-white shadow-lg":"bg-transparent border-white/10 text-white/80 hover:bg-white/5":"bg-white/5 border-white/5 text-zinc-700 cursor-not-allowed"}`,children:z},z))})]})]}),l.jsx("div",{className:"mt-8",children:l.jsxs("button",{disabled:!p,onClick:()=>b(2),className:`w-full py-5 rounded-xl font-bold text-xl transition-all flex items-center justify-center gap-3 group border border-white/20 ${p?"bg-white/10 hover:bg-white/20 text-white shadow-xl hover:scale-105":"bg-white/5 text-white/30 border-white/5 cursor-not-allowed"}`,children:["Fortstt med bokning",l.jsx(us,{size:24,className:p?"group-hover:translate-x-1 transition-transform":""})]})})]}):v===2?l.jsxs("div",{className:"animate-in fade-in zoom-in-95 duration-300 flex-1",children:[l.jsxs("button",{onClick:()=>b(1),className:"text-zinc-500 hover:text-white mb-8 text-sm flex items-center gap-2 font-bold",children:[l.jsx(Wv,{size:18})," G tillbaka till tider"]}),l.jsx("h3",{className:"text-3xl font-black mb-2 text-white italic",children:"Ngra frgor..."}),l.jsx("p",{className:"text-zinc-500 text-sm mb-8 italic",children:"Vi behver veta lite mer om dig fr att frbereda vrt mte."}),l.jsxs("form",{className:"space-y-6",onSubmit:I,children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold uppercase text-amber-500 ml-1",children:"Vad heter du?"}),l.jsx("input",{type:"text",required:!0,placeholder:"Fr- och efternamn",className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-4 text-white outline-none focus:border-amber-500 transition-all",value:k.name,onChange:z=>T({...k,name:z.target.value})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold uppercase text-amber-500 ml-1",children:"Din e-post"}),l.jsx("input",{type:"email",required:!0,placeholder:"namn@epost.se",className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-4 text-white outline-none focus:border-amber-500 transition-all",value:k.email,onChange:z=>T({...k,email:z.target.value})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold uppercase text-amber-500 ml-1",children:"Telefonnummer"}),l.jsx("input",{type:"tel",required:!0,placeholder:"07x-xxx xx xx",className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-4 text-white outline-none focus:border-amber-500 transition-all",value:k.phone,onChange:z=>T({...k,phone:z.target.value})})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold uppercase text-amber-500 ml-1",children:"Hur vill du ses?"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:["Fysiskt p mottagning","Digitalt via Zoom"].map(z=>l.jsx("button",{type:"button",onClick:()=>T({...k,meetingForm:z}),className:`px-3 py-3 rounded-xl text-[11px] font-bold transition-all border ${k.meetingForm===z?"bg-amber-500/20 border-amber-500 text-amber-400":"bg-black/20 border-white/10 text-white/40 hover:border-white/30"}`,children:z},z))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold uppercase text-amber-500 ml-1",children:"Vad nskar du hjlp med? (Valfritt)"}),l.jsx("textarea",{placeholder:"Kort beskrivning av ditt rende...",rows:3,className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-4 text-white outline-none focus:border-amber-500 transition-all resize-none",value:k.reason,onChange:z=>T({...k,reason:z.target.value})})]})]}),l.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5 flex items-center gap-4",children:[l.jsx(Ba,{size:20,className:"text-amber-500"}),l.jsxs("span",{className:"text-sm font-bold text-white/90",children:["Vald tid: ",u," ",new Date().toLocaleDateString("sv-SE",{month:"short"})," kl ",p]})]}),l.jsx("button",{className:"w-full bg-white/10 hover:bg-white/20 border border-white/20 text-white py-5 rounded-xl font-bold text-xl transition-all hover:scale-[1.01] active:scale-95 mt-4",children:"Slutfr bokning"})]})]}):l.jsxs("div",{className:"text-center py-20 animate-in zoom-in-90 duration-500 flex-1 flex flex-col items-center justify-center",children:[l.jsx("div",{className:"w-24 h-24 bg-emerald-500/20 text-emerald-400 rounded-full flex items-center justify-center mb-8 shadow-2xl",children:l.jsx(bg,{size:48})}),l.jsx("h3",{className:"text-3xl md:text-4xl font-black mb-4 text-white italic",children:"Vlkommen till vr bokningspanel"}),l.jsxs("p",{className:"text-zinc-300 text-lg mb-6 max-w-sm mx-auto leading-relaxed",children:["Tack ",k.name.split(" ")[0],"! Vad bra att du hrde av dig till oss och vi terkommer till dig snarast efter att vi mottagit mailet!"]}),l.jsx("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 mb-8 text-xs text-zinc-500 max-w-xs italic",children:'Notera: Ditt e-postprogram har ppnats. Vnligen klicka p "Skicka" fr att slutfra bokningen.'}),l.jsx("button",{onClick:()=>{b(1),h(null),m(null),T({name:"",email:"",phone:"",meetingForm:"Fysiskt p mottagning",reason:""})},className:"text-white hover:text-amber-400 font-bold hover:underline tracking-widest text-sm uppercase",children:"Gr en ny bokning"})]})})})]}),l.jsxs("div",{className:"grid lg:grid-cols-5 gap-10",children:[l.jsx("div",{className:"lg:col-span-2 space-y-6",children:l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-10 space-y-10",children:[l.jsx("h2",{className:"text-3xl font-black text-white italic",children:"Kontakt"}),l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"flex items-start gap-5",children:[l.jsx("div",{className:"p-4 bg-white/5 border border-white/10 rounded-2xl text-amber-500 shrink-0",children:l.jsx(Qb,{size:24})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-[10px] text-zinc-500 uppercase tracking-widest mb-1 font-bold",children:"Mottagning"}),l.jsx("p",{className:"text-white font-medium text-lg",children:"Gullregnsgatan 9A, Gvle"})]})]}),l.jsxs("div",{className:"flex items-start gap-5",children:[l.jsx("div",{className:"p-4 bg-white/5 border border-white/10 rounded-2xl text-amber-500 shrink-0",children:l.jsx(ap,{size:24})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-[10px] text-zinc-500 uppercase tracking-widest mb-1 font-bold",children:"E-post"}),l.jsx("p",{className:"text-white font-medium text-lg",children:"billy@klattertradet.se"})]})]})]})]})}),l.jsx("div",{className:"lg:col-span-3",children:w?l.jsxs("div",{className:"glass bg-white/5 border border-white/10 p-12 rounded-[40px] text-center flex flex-col items-center justify-center min-h-[400px]",children:[l.jsx(bg,{size:64,className:"text-emerald-500 mb-6"}),l.jsx("h2",{className:"text-3xl font-black text-white mb-4 italic",children:"Tack!"}),l.jsx("p",{className:"text-zinc-400",children:"Vi terkommer till dig s snart vi kan."})]}):l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-10 md:p-12",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-10",children:[l.jsx("div",{className:"w-12 h-12 bg-amber-500/10 rounded-xl flex items-center justify-center",children:l.jsx(wC,{className:"text-amber-500",size:28})}),l.jsx("h2",{className:"text-3xl font-black text-white italic",children:"vriga frgor"})]}),l.jsxs("form",{onSubmit:P,className:"space-y-8",children:[l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsx("input",{required:!0,placeholder:"Ditt namn",type:"text",className:"w-full p-4 bg-black/40 border border-white/10 rounded-2xl text-white outline-none focus:border-amber-500 transition-all"}),l.jsx("input",{required:!0,placeholder:"Din e-post",type:"email",className:"w-full p-4 bg-black/40 border border-white/10 rounded-2xl text-white outline-none focus:border-amber-500 transition-all"})]}),l.jsx("textarea",{rows:5,placeholder:"Ditt meddelande...",className:"w-full p-4 bg-black/40 border border-white/10 rounded-2xl text-white outline-none focus:border-amber-500 transition-all resize-none"}),l.jsxs("button",{type:"submit",className:"w-full py-6 bg-white/10 hover:bg-white/20 border border-white/20 text-white font-bold rounded-xl shadow-xl transition-all hover:scale-[1.01] active:scale-95 flex items-center justify-center gap-3 text-lg",children:["Skicka meddelande ",l.jsx(ml,{size:20})]})]})]})})]}),l.jsx(Ow,{})]})},F4=()=>{const[i,e]=ie.useState(!1),[t,n]=ie.useState(!1),s=new Date().getFullYear(),a=Array.from({length:s-1990+1},(h,p)=>s-p),u=h=>{h.preventDefault();const p=new FormData(h.currentTarget),m=Object.fromEntries(p.entries());console.log("Survey Data:",m),n(!0),window.scrollTo(0,0)};return t?l.jsx("div",{className:"container mx-auto px-4 py-20 flex items-center justify-center animate-fade-in min-h-[70vh]",children:l.jsxs("div",{className:"glass bg-white/10 backdrop-blur-xl border border-white/20 p-12 rounded-[40px] max-w-2xl w-full text-center shadow-2xl",children:[l.jsx("div",{className:"mb-6 flex justify-center text-green-400",children:l.jsx(lc,{size:64})}),l.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Tack fr din medverkan!"}),l.jsx("p",{className:"text-lg text-white/80 mb-6 leading-relaxed",children:"Genom att dela din erfarenhet har du gett oss ett viktigt bidrag i arbetet med att synliggra de mnskliga konsekvenserna av myndigheters agerande."}),l.jsxs("div",{className:"bg-white/5 p-6 rounded-2xl border border-white/10 text-left space-y-4 mb-8",children:[l.jsx("h3",{className:"font-bold text-white",children:"Behver du std?"}),l.jsx("p",{className:"text-white/70 text-sm",children:"Besk grna vra sjlvhjlpsmten i Horizonten app, det r gratis och tillgngligt fr alla."})]}),l.jsxs("div",{className:"text-white/60 text-sm",children:[l.jsx("p",{children:"Med vrme och styrka,"}),l.jsx("p",{children:"Styrelsen p Horizonten Social-kraft & Klttertrdet AB"})]}),l.jsx("button",{onClick:()=>n(!1),className:"mt-8 text-white hover:text-amber-400 font-medium underline transition-colors",children:"G tillbaka till formulret"})]})}):l.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-10 animate-fade-in max-w-4xl",children:[l.jsxs("div",{className:"text-center mb-12 space-y-4",children:[l.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-200 to-indigo-400",children:"Kraftsamling fr Barnens Bsta"}),l.jsx("h2",{className:"text-xl text-white/80 font-light italic",children:"Upplevelser av rttsskerhet i den Svenska barnavrden"})]}),l.jsxs("div",{className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-8 md:p-12 shadow-2xl",children:[l.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 p-6 rounded-2xl mb-10 text-white/90 leading-relaxed space-y-4",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Xg,{className:"text-blue-400 shrink-0 mt-1",size:20}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{children:"Vi p Horizonten och Klttertrdet genomfr i samarbete med Socialkraft genomfr denna kartlggning fr att frst och synliggra de upplevelser och konsekvenser som familjer erfar i samband med ett rende om omhndertagande av barn."}),l.jsx("p",{children:"Syftet r att samla in ett brett underlag fr att kunna belysa hur dessa processer kan pverka familjer (frldrar och framfrallte barnen)- och fr att kunna beskriva det vi kallar Myndighetsinducerat trauma."}),l.jsxs("p",{className:"text-sm opacity-90",children:["Det du skriver kommer hanteras enligt vr integritets & sekretesspolicy som du hittar p lnken hr: ",l.jsx("a",{href:"https://klattertradet.se/integritet-sekretess-policy",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline underline-offset-2 font-medium",children:"https://klattertradet.se/integritet-sekretess-policy"})]})]})]}),l.jsx("p",{className:"ml-8 text-xs font-bold text-blue-300",children:"Underskningen tar mellan 3-8 minuter. Alla frgor frutom den frsta r frivilliga."})]}),l.jsxs("form",{onSubmit:u,className:"space-y-12",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-xl font-bold text-blue-300 border-l-4 border-blue-500 pl-4",children:"Dataskydd och Samtycke"}),l.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-4 bg-white/5 rounded-xl hover:bg-white/10 transition-colors",children:[l.jsx("input",{type:"checkbox",name:"consent",required:!0,className:"mt-1 w-5 h-5 rounded text-blue-500 bg-black/30 border-white/20"}),l.jsxs("span",{className:"text-white/80 text-sm",children:["Jag har lst informationen ovan, tagit del av ",l.jsx("a",{href:"https://klattertradet.se/integritet-sekretess-policy",target:"_blank",className:"text-blue-400 hover:underline",children:"integritetspolicyn"})," och samtycker till att Social-kraft behandlar mina svar i enlighet med beskrivningen. ",l.jsx("span",{className:"text-red-400",children:"*"})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx("h3",{className:"text-xl font-bold text-blue-300 border-l-4 border-blue-500 pl-4",children:"1. Din grundlggande upplevelse"}),l.jsxs("p",{className:"text-white/90 font-medium",children:["Upplever du att du eller din familj har blivit felaktigt eller illa behandlad av socialtjnsten i samband med ett rende om omhndertagande av barn? ",l.jsx("span",{className:"text-red-400",children:"*"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[l.jsx("input",{type:"radio",name:"experience",value:"Ja",required:!0,className:"w-5 h-5 text-blue-500 bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/80 group-hover:text-white",children:"Ja"})]}),l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[l.jsx("input",{type:"radio",name:"experience",value:"Nej",className:"w-5 h-5 text-blue-500 bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/80 group-hover:text-white",children:"Nej"})]})]}),l.jsx("p",{className:"text-sm text-white/50 italic",children:"Stort tack! Bara genom att svara p fregende frga har du bidragit med ovrderlig information. Varje extra steg du orkar ta ger oss djupare kunskap."})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx("h3",{className:"text-xl font-bold text-blue-300 border-l-4 border-blue-500 pl-4",children:"2. Hur vill du delta?"}),l.jsx("p",{className:"text-white/90",children:"Vlj det alternativ som passar dig bst."}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[l.jsx("input",{type:"radio",name:"participation_type",value:"Anonym",onClick:()=>e(!1),className:"w-5 h-5 text-blue-500 bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/80 group-hover:text-white",children:"Jag vill delta helt anonymt."})]}),l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[l.jsx("input",{type:"radio",name:"participation_type",value:"Kontakt",onClick:()=>e(!0),className:"w-5 h-5 text-blue-500 bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/80 group-hover:text-white",children:"Jag kan tnka mig att bli kontaktad fr eventuella fljdfrgor eller djupintervjuer."})]})]}),i&&l.jsxs("div",{className:"mt-6 p-6 bg-black/30 border border-white/10 rounded-xl space-y-4 animate-fade-in",children:[l.jsx("p",{className:"font-bold text-white/90 mb-2",children:"Fyll i de kontaktuppgifter du r bekvm med att dela:"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Namn"}),l.jsx("input",{type:"text",name:"name",className:"w-full p-3 bg-white/5 border border-white/10 rounded-lg text-white outline-none focus:border-blue-500 transition-colors"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"E-post"}),l.jsx("input",{type:"email",name:"email",className:"w-full p-3 bg-white/5 border border-white/10 rounded-lg text-white outline-none focus:border-blue-500 transition-colors"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Telefonnummer"}),l.jsx("input",{type:"tel",name:"phone",className:"w-full p-3 bg-white/5 border border-white/10 rounded-lg text-white outline-none focus:border-blue-500 transition-colors"})]})]})]}),l.jsxs("div",{className:"space-y-8",children:[l.jsx("h3",{className:"text-xl font-bold text-blue-300 border-l-4 border-blue-500 pl-4",children:"3. P vilket eller vilka stt upplevde du dig felbehandlad?"}),l.jsx("p",{className:"text-sm text-white/60",children:"Vlj alla alternativ som stmmer in. Detta hjlper oss frst de processer som kan leda till myndighetsinducerat trauma."}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-bold text-white/90 border-b border-white/10 pb-2",children:"Maktlshet och Inflytande"}),l.jsxs("div",{className:"space-y-2",children:[[{val:"maktls",label:"Jag knde mig maktls och helt utlmnad till systemet."},{val:"omyndigfrklarad",label:"Jag upplevde att jag blev 'omyndigfrklarad' och/eller inte lyssnad p."},{val:"inflytande_frsvann",label:"Mitt inflytande ver mitt barns situation frsvann helt."}].map(h=>l.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[l.jsx("input",{type:"checkbox",name:"mistreatment",value:h.val,className:"mt-1 w-4 h-4 rounded text-blue-500 bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/80 group-hover:text-white text-sm",children:h.label})]},h.val)),l.jsx("input",{type:"text",name:"mistreatment_other_1",placeholder:"Annat...",className:"w-full mt-2 p-2 bg-black/30 border border-white/10 rounded text-sm text-white placeholder-white/30 outline-none focus:border-blue-500"})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-bold text-white/90 border-b border-white/10 pb-2",children:"Beslutsunderlag och Rttsskerhet"}),l.jsx("div",{className:"space-y-2",children:[{val:"saknad_grund",label:"Jag/andra anser att det saknades objektiv grund eller tillrckliga bevis fr ingripandet."},{val:"vinklad_dok",label:"Jag upplevde att dokumentationen (journaler, utredningar) var vinklad eller innehll direkta felaktigheter."},{val:"ignorerad_bild",label:"Min bild av situationen och min kunskap om mitt barn ignorerades (jag frlorade tolkningsfretrdet)."}].map(h=>l.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[l.jsx("input",{type:"checkbox",name:"legal",value:h.val,className:"mt-1 w-4 h-4 rounded text-blue-500 bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/80 group-hover:text-white text-sm",children:h.label})]},h.val))})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-bold text-white/90 border-b border-white/10 pb-2",children:"Kommunikation och Bemtande"}),l.jsx("div",{className:"space-y-2",children:[{val:"bristfllig",label:"Kommunikationen med socialtjnsten var bristfllig, otydlig eller obefintlig."},{val:"respektlst",label:"Jag upplevde bemtandet som respektlst, dmande eller hotfullt."},{val:"brist_info",label:"Jag fick inte tillrcklig eller korrekt information om processen eller mina rttigheter."}].map(h=>l.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[l.jsx("input",{type:"checkbox",name:"comm",value:h.val,className:"mt-1 w-4 h-4 rounded text-blue-500 bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/80 group-hover:text-white text-sm",children:h.label})]},h.val))})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-bold text-white/90 border-b border-white/10 pb-2",children:"Lngsiktiga Konsekvenser"}),l.jsxs("div",{className:"space-y-2",children:[[{val:"skadad_tillit",label:"Min tillit till myndigheter och samhllet har skadats allvarligt."},{val:"psykisk_ohlsa",label:"Processen har direkt orsakat mig eller min familj psykisk ohlsa (t.ex. ngest, depression, PTSD-symptom)."}].map(h=>l.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[l.jsx("input",{type:"checkbox",name:"cons",value:h.val,className:"mt-1 w-4 h-4 rounded text-blue-500 bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/80 group-hover:text-white text-sm",children:h.label})]},h.val)),l.jsx("textarea",{name:"cons_other",placeholder:"Annat: Sammanfatta i korthet med egna ord",rows:2,className:"w-full mt-2 p-3 bg-black/30 border border-white/10 rounded text-sm text-white placeholder-white/30 outline-none focus:border-blue-500"})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx("h3",{className:"text-xl font-bold text-blue-300 border-l-4 border-blue-500 pl-4",children:"4. Din redogrelse"}),l.jsx("p",{className:"text-sm text-white/60",children:"Detta avsnitt r helt frivilligt, men din berttelse hjlper oss att frst helheten."}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("label",{className:"block text-white/90 font-medium",children:"A) Vad var det som utlste socialtjnstens utredning?"}),l.jsxs("label",{className:"flex items-center gap-2 text-sm text-white/70 mb-2",children:[l.jsx("input",{type:"checkbox",name:"no_redogorelse",className:"rounded text-blue-500 bg-black/30 border-white/20"})," Kan inte redogra pga bristande utredning"]}),l.jsx("textarea",{name:"redogorelse_start",placeholder:"Min redogrelse...",rows:4,className:"w-full p-4 bg-black/30 border border-white/10 rounded-xl text-white outline-none focus:border-blue-500"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("label",{className:"block text-white/90 font-medium",children:"B) Vilken pverkan hade processen p dig och din familj?"}),l.jsx("p",{className:"text-xs text-white/50",children:"Tnk grna p hlsa, ekonomi, sociala relationer, stress, sjlvbild. Upplever du att dina ord tappade sitt vrde?"}),l.jsx("textarea",{name:"paverkan",placeholder:"Beskriv pverkan hr...",rows:4,className:"w-full p-4 bg-black/30 border border-white/10 rounded-xl text-white outline-none focus:border-blue-500"})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx("h3",{className:"text-xl font-bold text-blue-300 border-l-4 border-blue-500 pl-4",children:"5. Bakgrundsinformation"}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm text-white/70",children:"Vilken kommun gllde rendet?"}),l.jsx("input",{type:"text",name:"kommun",className:"w-full p-3 bg-black/30 border border-white/10 rounded-xl text-white outline-none focus:border-blue-500"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm text-white/70",children:"Vilket r inleddes rendet ungefr?"}),l.jsxs("select",{name:"start_year",className:"w-full p-3 bg-black/30 border border-white/10 rounded-xl text-white outline-none focus:border-blue-500",children:[l.jsx("option",{value:"",className:"bg-gray-900",children:"Vlj rtal..."}),a.map(h=>l.jsx("option",{value:h,className:"bg-gray-900",children:h},h))]})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-xl font-bold text-blue-300 border-l-4 border-blue-500 pl-4",children:"6. vriga kommentarer"}),l.jsx("p",{className:"text-sm text-white/60",children:"Hr kan du frklara varfr du hoppat ver vissa frgor eller lmna andra tillgg."}),l.jsx("textarea",{name:"extra_comments",rows:3,className:"w-full p-4 bg-black/30 border border-white/10 rounded-xl text-white outline-none focus:border-blue-500"})]}),l.jsxs("button",{type:"submit",className:"w-full py-5 bg-white/10 hover:bg-white/20 border border-white/20 text-white font-bold rounded-xl shadow-xl transition-all hover:scale-[1.01] active:scale-95 flex items-center justify-center gap-3",children:["Skicka in mitt svar ",l.jsx(ml,{size:20})]})]})]})]})},V4=()=>{const i=[{category:"E-bcker",items:[{title:"Myndighetsinducerat trauma - En introduktion",desc:"En sammanfattning av grunderna i MiT-modellen och hur du brjar din lkningsresa.",icon:C_,color:"text-amber-400",size:"2.4 MB"},{title:"Gestaltterapi i vardagen",desc:"Praktiska verktyg fr att anvnda gestaltmetodik i dina nra relationer.",icon:C_,color:"text-blue-400",size:"1.8 MB"},{title:"Narcissism, en problematisering av etiketter",desc:"En djupdykning i hur diagnoser och etiketter pverkar individens sjlvbild och den terapeutiska processen.",icon:C_,color:"text-purple-400",size:"2.1 MB"}]},{category:"Arbetsmaterial & Mallar",items:[{title:"Sjlvreglerings-schema (Veckoplanering)",desc:"Ett verktyg fr att kartlgga ditt nervsystems reaktioner under veckan.",icon:NC,color:"text-emerald-400",size:"0.5 MB"},{title:"Checklista infr myndighetsmten",desc:"Gr din rst hrd. En guide fr att frbereda dig mentalt och praktiskt.",icon:yg,color:"text-orange-400",size:"0.3 MB"}]},{category:"vningar & Verktyg",items:[{title:"Grounding-vningar fr hemmabruk",desc:"Fem enkla vningar fr att komma tillbaka till nuet nr stressen tar ver.",icon:Ha,color:"text-red-400",size:"1.2 MB"},{title:"Self-care modellen: Arbetsblad",desc:"Frdjupat arbetsblad fr att arbeta med dina grundsr p egen hand.",icon:ua,color:"text-purple-400",size:"0.9 MB"}]}];return l.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-10 animate-fade-in space-y-12",children:[l.jsxs("div",{className:"text-center max-w-3xl mx-auto space-y-4",children:[l.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-300 to-teal-500",children:"Nedladdningar"}),l.jsx("p",{className:"text-lg text-white/70",children:"Hr har vi samlat resurser, e-bcker och arbetsmaterial som hjlper dig i din personliga eller professionella utveckling."})]}),l.jsx("div",{className:"space-y-16",children:i.map((e,t)=>l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-2xl font-bold border-l-4 border-emerald-500 pl-4 text-white/90",children:e.category}),l.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:e.items.map((n,s)=>l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-6 hover:bg-white/10 transition-all duration-300 group flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsx("div",{className:`p-3 bg-white/5 rounded-2xl ${n.color} group-hover:scale-110 transition-transform`,children:l.jsx(n.icon,{size:28})}),l.jsxs("span",{className:"text-[10px] font-bold text-white/30 uppercase tracking-widest bg-black/20 px-3 py-1 rounded-full border border-white/5",children:["PDF | ",n.size]})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-xl font-bold mb-2 group-hover:text-white transition-colors",children:n.title}),l.jsx("p",{className:"text-white/60 text-sm leading-relaxed mb-6",children:n.desc})]}),l.jsxs("button",{onClick:()=>alert(`Startar nedladdning av: ${n.title}`),className:"w-full py-3 bg-white/10 hover:bg-white/20 border border-white/20 text-white rounded-xl font-bold text-sm transition-all hover:scale-[1.02] active:scale-95 flex items-center justify-center gap-2",children:[l.jsx(mT,{size:18})," Ladda ner material"]})]},s))})]},t))}),l.jsxs("div",{className:"glass bg-emerald-900/10 border border-emerald-500/20 rounded-3xl p-8 text-center max-w-2xl mx-auto mt-12",children:[l.jsx(ua,{className:"mx-auto text-emerald-400 mb-4"}),l.jsx("p",{className:"text-sm text-white/70 italic",children:"Vi fyller p med nytt material kontinuerligt. Saknar du ngot specifikt? Kontakta oss grna med nskeml."})]})]})},H4=({setPage:i})=>l.jsx("div",{className:"container mx-auto px-4 md:px-6 py-10 md:py-20 animate-fade-in flex flex-col items-center",children:l.jsxs("div",{className:"w-full max-w-6xl",children:[l.jsxs("button",{onClick:()=>i(Se.HOME),className:"flex items-center gap-2 text-white/40 hover:text-white transition-colors mb-8 group",children:[l.jsx(So,{size:18,className:"group-hover:-translate-x-1 transition-transform"}),"Tillbaka till hem"]}),l.jsxs("div",{className:"text-center space-y-4 mb-16 animate-in fade-in slide-in-from-top-4 duration-700",children:[l.jsxs("h1",{className:"text-4xl md:text-6xl font-black tracking-tighter text-white leading-tight",children:["Medlemsinloggning ",l.jsx("br",{}),l.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-orange-400 via-amber-200 to-white",children:"Horizonten Gemenskap"})]}),l.jsx("p",{className:"text-lg md:text-2xl font-medium text-orange-200/80 tracking-tight italic",children:"Din digitala gemenskap fr lkning och vxande"})]}),l.jsxs("div",{className:"glass bg-white/[0.03] border border-white/10 p-6 md:p-10 rounded-3xl max-w-5xl mx-auto text-center space-y-6 backdrop-blur-md mb-20 animate-in fade-in zoom-in-95 duration-700",children:[l.jsxs("div",{className:"space-y-4 text-slate-300 text-base md:text-lg leading-relaxed font-light",children:[l.jsx("p",{children:"Att vara mnniska r att behva andra. Vrt nervsystem sker stndigt efter trygghet i kontakt med flocken. Hr p Horizonten har vi skapat en digital plats dr du kan va p att ta plats, dela erfarenheter och hitta styrka i igenknning  allt utifrn din egen takt och dina behov."}),l.jsx("p",{className:"text-white font-medium",children:'Oavsett om du vill smyga igng och "knna in rummet" eller om du r redo att dyka djupt och leda dig sjlv och andra, s finns det en plats fr dig hr.'})]}),l.jsx("div",{className:"pt-2",children:l.jsx("p",{className:"text-orange-400 font-black uppercase tracking-[0.2em] text-xs",children:"Vlj den niv av gemenskap som passar ditt liv just nu:"})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 w-full mb-12",children:[l.jsxs("div",{className:"group relative glass bg-white/[0.02] border border-white/10 hover:border-white/20 p-8 md:p-10 rounded-[2.5rem] transition-all duration-500 flex flex-col justify-between overflow-hidden shadow-2xl",children:[l.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 group-hover:opacity-10 transition-opacity",children:l.jsx(RC,{size:100,className:"text-green-500 rotate-12"})}),l.jsxs("div",{className:"space-y-6 relative z-10",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h3",{className:"text-2xl md:text-3xl font-black text-white flex items-center gap-2",children:"GRATIS MEDLEMSKAP"}),l.jsx("p",{className:"text-slate-400 font-bold tracking-wide uppercase text-[10px]",children:"En trygg plats att landa p"})]}),l.jsx("p",{className:"text-slate-400 leading-relaxed text-sm md:text-base",children:"Detta r fr dig som vill ta del av gemenskapen, lsa och inspireras, men kanske inte har behov av de djupare funktionerna just nu. Det r ett frsta steg i din Self-care fr att bryta isolering."}),l.jsx("ul",{className:"space-y-4 pt-4 border-t border-white/5",children:[{title:"Lsrttigheter",desc:"Ta del av ppna diskussioner och insikter."},{title:"Begrnsad chat",desc:"Mjlighet att skriva i vr allmnna vlkomst-trd."},{title:"Gemenskap",desc:"Du r en del av flocken  du r inte ensam."}].map((e,t)=>l.jsxs("li",{className:"flex gap-3 items-start",children:[l.jsx(Gd,{size:14,className:"text-slate-500 mt-1 shrink-0"}),l.jsxs("div",{className:"text-sm",children:[l.jsxs("span",{className:"font-bold text-white mr-1",children:[e.title,":"]}),l.jsx("span",{className:"text-slate-400 font-light",children:e.desc})]})]},t))})]}),l.jsxs("div",{className:"flex flex-col gap-3 mt-8",children:[l.jsxs("button",{onClick:()=>{window.location.hash="#login",i(Se.GEMENSKAP_APP)},className:"w-full py-4 bg-white/5 hover:bg-white/10 border border-white/10 rounded-2xl font-black text-white transition-all flex items-center justify-center gap-2 uppercase tracking-widest text-xs",children:["Logga in ",l.jsx(us,{size:18})]}),l.jsx("button",{onClick:()=>{i(Se.FREE_REGISTRATION)},className:"w-full py-4 bg-amber-500 hover:bg-amber-400 text-black rounded-2xl font-black transition-all flex items-center justify-center gap-2 uppercase tracking-widest text-xs shadow-lg shadow-amber-500/20",children:"Registrera dig gratis idag"})]})]}),l.jsxs("div",{className:"group relative overflow-hidden bg-gradient-to-br from-orange-600/10 to-transparent border border-orange-500/30 hover:border-orange-500 p-8 md:p-10 rounded-[2.5rem] transition-all duration-500 flex flex-col justify-between shadow-[0_20px_60px_rgba(249,115,22,0.1)]",children:[l.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 group-hover:opacity-20 transition-opacity",children:l.jsx(GC,{size:120,className:"text-orange-500 -rotate-6"})}),l.jsxs("div",{className:"space-y-6 relative z-10",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex flex-wrap justify-between items-start gap-2",children:[l.jsx("h3",{className:"text-2xl md:text-3xl font-black text-white flex items-center gap-2",children:"PREMIUM"}),l.jsx("div",{className:"bg-orange-500 text-[10px] font-black px-3 py-1 rounded-full text-white uppercase tracking-widest shadow-lg shadow-orange-500/40",children:"250 kr/mn"})]}),l.jsx("p",{className:"text-orange-300 font-bold tracking-wide uppercase text-[10px]",children:"Fr dig som vill vxa, pverka och frdjupa din process"})]}),l.jsx("p",{className:"text-slate-300 leading-relaxed text-sm md:text-base font-light",children:"Hr fr du tillgng till hela verktygsldan. Premium r utformat fr att ge dig handlingsutrymme. Det handlar inte bara om att f std, utan om mjligheten att sjlv vara en aktiv skapare av din trygghet och din utveckling."}),l.jsx("ul",{className:"space-y-4 pt-4 border-t border-orange-500/10",children:[{title:"Obegrnsad Chat & Trdar",desc:"Skriv fritt i den offentliga trden och f tillgng till privata trdar."},{title:"Bli din egen mtesledare",desc:"Mjlighet att (till rabatterat pris) hyra vra skra videorum fr egna grupper."},{title:"Kunskapsbanken",desc:"Fri nedladdning av arbetsblad, mallar och filer som stttar din resa."},{title:"Frtur & Rabatter",desc:"F frtur till workshops och event som Klttertrdet anordnar."}].map((e,t)=>l.jsxs("li",{className:"flex gap-3 items-start",children:[l.jsx(Gd,{size:14,className:"text-orange-400 mt-1 shrink-0"}),l.jsxs("div",{className:"text-sm",children:[l.jsxs("span",{className:"font-bold text-white mr-1",children:[e.title,":"]}),l.jsx("span",{className:"text-slate-400 font-light leading-relaxed",children:e.desc})]})]},t))}),l.jsx("div",{className:"bg-orange-500/5 p-3 rounded-xl border border-orange-500/10",children:l.jsx("p",{className:"text-orange-200/90 text-xs font-medium italic text-center",children:"Ingen bindningstid. Investera i din egen och andras hllbarhet."})})]}),l.jsxs("div",{className:"flex flex-col gap-3 mt-8",children:[l.jsxs("button",{onClick:()=>{window.location.hash="#premium-login",i(Se.GEMENSKAP_APP)},className:"w-full py-4 bg-white/10 hover:bg-white/20 border border-white/10 rounded-2xl font-black text-white transition-all flex items-center justify-center gap-2 uppercase tracking-widest text-xs",children:["Logga in ",l.jsx(us,{size:18})]}),l.jsx("button",{onClick:()=>i(Se.PREMIUM_APPLICATION),className:"w-full py-4 bg-orange-500 hover:bg-orange-400 text-white rounded-2xl font-black transition-all flex items-center justify-center gap-2 uppercase tracking-widest text-xs shadow-2xl shadow-orange-500/20",children:"Ansk om medlemskap"})]})]})]}),l.jsx("div",{className:"text-center",children:l.jsxs("button",{onClick:()=>{window.location.hash="#login",i(Se.GEMENSKAP_APP)},className:"text-white/40 hover:text-orange-400 transition-colors text-sm font-bold flex items-center gap-2 mx-auto",children:["Redan medlem? ",l.jsx("span",{className:"underline underline-offset-4",children:"Logga in hr"})]})})]})}),G4=({setPage:i})=>l.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-12 md:py-24 animate-fade-in space-y-24",children:[l.jsxs("section",{className:"glass bg-white/10 backdrop-blur-md border border-white/20 rounded-[3rem] p-8 md:p-20 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 right-0 w-2/3 h-full bg-gradient-to-l from-amber-500/10 to-transparent pointer-events-none"}),l.jsxs("div",{className:"relative z-10 grid lg:grid-cols-2 gap-12 items-center",children:[l.jsxs("div",{className:"space-y-8",children:[l.jsx("div",{className:"inline-block px-4 py-1 bg-amber-500/20 rounded-full border border-amber-500/30 text-amber-500 text-xs font-black uppercase tracking-widest",children:"Nyutgiven Bok"}),l.jsxs("h1",{className:"text-4xl md:text-7xl font-bold leading-tight text-white",children:["Myndighetsinducerat trauma ",l.jsx("br",{}),l.jsx("span",{className:"text-2xl md:text-4xl font-light text-amber-200/80 block mt-4",children:" frn subjekt till objekt"})]}),l.jsx("p",{className:"text-lg md:text-xl text-white/80 leading-relaxed font-light",children:"Vr nyutgivna bok r en djupdykning i hur systemet kan skada och hur vi kan lka. Men boken r mer n bara text  den r en guide till din terhmtning."}),l.jsx("div",{className:"flex flex-wrap gap-4 pt-4",children:l.jsxs("button",{onClick:()=>i(Se.CHECKOUT),className:"px-8 py-4 bg-amber-500 hover:bg-amber-400 text-slate-950 rounded-2xl font-black transition-all hover:scale-105 shadow-2xl shadow-amber-500/20 flex items-center gap-2",children:["Bestll boken hr ",l.jsx(us,{size:20})]})})]}),l.jsx("div",{className:"hidden lg:flex justify-end",children:l.jsxs("div",{className:"relative w-80 h-96",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-amber-500/20 to-transparent rounded-[2rem] blur-3xl animate-pulse"}),l.jsx("div",{className:"relative glass bg-white/5 border border-white/10 rounded-[2rem] shadow-2xl overflow-hidden transform rotate-3 hover:rotate-0 transition-all duration-500",children:l.jsx("img",{src:"/booklet.jpeg",alt:"Bokomslag",className:"w-full h-full object-contain p-4"})})]})})]})]}),l.jsx("section",{className:"glass bg-gradient-to-br from-blue-500/10 to-transparent border border-blue-500/20 rounded-[2.5rem] p-8 md:p-12",children:l.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[l.jsx("div",{className:"w-16 h-16 bg-blue-500/20 rounded-2xl flex items-center justify-center text-blue-400 shrink-0",children:l.jsx(kw,{size:32})}),l.jsx("blockquote",{className:"text-xl md:text-2xl font-medium text-blue-100/90 italic leading-relaxed",children:'"Tillhrande boken finns en stor mngd sjlvhjlpsmaterial och praktiska vningar i appen, skapade fr att ge dig verktygen att navigera i din egen lkningsprocess."'})]})}),l.jsxs("section",{className:"grid md:grid-cols-2 gap-12 items-start",children:[l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-3xl md:text-5xl font-bold text-white",children:"Vad innehller boken?"}),l.jsx("div",{className:"grid gap-6",children:[{title:"Neurobiologisk frstelse",text:"Hur kroppen och nervsystemet reagerar p strukturellt svek."},{title:"Self-care modellen",text:"Praktiska verktyg fr sjlvreglering och lkning."},{title:"Fallstudier",text:"Verkliga berttelser frn mnniskor som navigerat systemet."},{title:"Praktiska vningar",text:"Steg-fr-steg-guider fr bearbetning och terhmtning."},{title:"Frn subjekt till objekt",text:"Vad r systemdriven objektifiering och vad sger forskningen?"}].map((e,t)=>l.jsxs("div",{className:"flex items-start gap-4 group",children:[l.jsx("div",{className:"p-1 mt-1",children:l.jsx(lc,{className:"text-amber-500 w-6 h-6"})}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("h3",{className:"text-lg font-bold text-white group-hover:text-amber-400 transition-colors uppercase tracking-tight",children:e.title}),l.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:e.text})]})]},t))})]}),l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-[2.5rem] p-8 md:p-12 space-y-8",children:[l.jsx("h2",{className:"text-3xl md:text-5xl font-bold text-white",children:"Fr vem r boken?"}),l.jsxs("div",{className:"space-y-6 text-zinc-300 leading-relaxed text-lg",children:[l.jsx("p",{children:"Denna bok vnder sig till dig som har upplevt att mtet med myndigheter blivit mer skadligt n hjlpsamt."}),l.jsx("div",{className:"p-6 bg-white/5 rounded-2xl border border-white/5",children:l.jsxs("p",{className:"text-white/90 font-medium",children:["Men den r ocks ovrderlig fr professionella  ",l.jsx("span",{className:"text-amber-400",children:"socialsekreterare, terapeuter, behandlingspedagoger"}),"  som vill frst och bemta myndighetsinducerat trauma med strre medvetenhet och empati."]})})]}),l.jsx("div",{className:"pt-8 border-t border-white/10",children:l.jsxs("div",{className:"flex items-center gap-4 text-zinc-400",children:[l.jsx(la,{className:"text-amber-500/50"}),l.jsx("p",{className:"text-sm italic",children:"Baserad p mngrig forskning och praktisk erfarenhet inom TMO."})]})})]})]}),l.jsx("section",{className:"text-center py-12",children:l.jsx("div",{className:"max-w-3xl mx-auto space-y-8",children:l.jsxs("div",{className:"p-8 glass bg-white/5 border border-white/10 rounded-[2.5rem]",children:[l.jsx("p",{className:"text-xl text-amber-200 font-bold mb-6",children:"Slpps inom en snar framtid  skra ditt exemplar nu."}),l.jsx("button",{onClick:()=>i(Se.CHECKOUT),className:"inline-block bg-amber-500 hover:bg-amber-400 text-slate-950 px-12 py-5 rounded-2xl text-xl font-black transition-all hover:scale-105 shadow-2xl shadow-amber-500/20",children:"Frhandsbestll boken hr"})]})})})]}),q4=({setPage:i})=>l.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-12 animate-fade-in max-w-4xl space-y-16",children:[l.jsxs("button",{onClick:()=>i(Se.HOME),className:"flex items-center gap-2 text-white/60 hover:text-white transition-colors group",children:[l.jsx(So,{size:20,className:"group-hover:-translate-x-1 transition-transform"}),"Tillbaka"]}),l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-[3rem] p-8 md:p-16 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-green-500/10 to-transparent pointer-events-none"}),l.jsxs("div",{className:"relative z-10 space-y-4",children:[l.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-white tracking-tight",children:"Integritetspolicy"}),l.jsx("p",{className:"text-slate-400 text-sm font-medium uppercase tracking-widest",children:"Senast uppdaterad: 22/1-2026"}),l.jsx("div",{className:"pt-6 border-t border-white/10",children:l.jsx("p",{className:"text-slate-300 font-bold",children:"Personuppgiftsansvarig: Klttertrdet AB (Org. nr: 559267-4732)"})})]})]}),l.jsxs("div",{className:"space-y-12",children:[l.jsxs("section",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-3 text-orange-400",children:[l.jsx(hl,{size:28}),l.jsx("h3",{className:"text-2xl font-bold text-white uppercase tracking-tight",children:"1. Vrt lfte till dig"})]}),l.jsx("p",{className:"text-slate-300 text-lg leading-relaxed font-light italic",children:'"Fr att du ska vga vara srbar och dela dina erfarenheter krvs det att du vet exakt var dina ord tar vgen. Vi ser dina personuppgifter som en frlngning av din personliga integritet."'}),l.jsx("p",{className:"text-slate-400 leading-relaxed",children:'Vi sljer aldrig dina uppgifter. Vi delar dem inte med tredje part fr marknadsfring. Din data stannar i vr "trygga hamn".'})]}),l.jsxs("section",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 md:p-12 space-y-8",children:[l.jsxs("div",{className:"flex items-center gap-3 text-blue-400",children:[l.jsx(MC,{size:24}),l.jsx("h3",{className:"text-xl font-bold text-white uppercase tracking-tight",children:"2. Vilka uppgifter samlar vi in och varfr?"})]}),l.jsxs("div",{className:"grid gap-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-white font-bold",children:"Identifikation (BankID)"}),l.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Vi lagrar inte ditt personnummer synligt fr andra, men vi anvnder BankID vid registrering fr att verifiera att du r en verklig person. Detta skyddar communityt frn troll och falska profiler."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-white font-bold",children:"Anvndargenererat innehll"}),l.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Det du skriver i chatten och forumet sparas p skra servrar fr att tjnsten ska fungera."})]})]})]}),l.jsxs("section",{className:"space-y-8",children:[l.jsxs("div",{className:"flex items-center gap-3 text-green-400",children:[l.jsx(qd,{size:24}),l.jsx("h3",{className:"text-xl font-bold text-white uppercase tracking-tight",children:"3. Hur skyddas din information?"})]}),l.jsx("p",{className:"text-slate-300 leading-relaxed font-light",children:"All trafik mellan din telefon/dator och vra servrar r krypterad (SSL/TLS). Vi anvnder moderna databaser med hg skerhetsklassning (AES-256 kryptering vid vila)."})]}),l.jsxs("section",{className:"glass bg-gradient-to-br from-orange-500/10 to-transparent border border-orange-500/20 rounded-[2.5rem] p-8 md:p-12 space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-3 text-orange-400",children:[l.jsx(FC,{size:24}),l.jsx("h3",{className:"text-xl font-bold text-white uppercase tracking-tight",children:"4. Skillnad p Chat och Journal"})]}),l.jsxs("div",{className:"space-y-4 text-slate-300",children:[l.jsx("div",{className:"p-4 bg-white/5 rounded-xl border border-white/5",children:l.jsxs("p",{children:[l.jsx("strong",{children:"Chatten/Appen:"})," Det du skriver i Horizonten-appen rknas inte som hlso- och sjukvrdsjournal. Det r ett medlemsforum."]})}),l.jsx("div",{className:"p-4 bg-white/5 rounded-xl border border-white/5",children:l.jsxs("p",{children:[l.jsx("strong",{children:"Terapi hos Klttertrdet:"})," Om du gr i enskild terapi frs lagstadgad patientjournal i ett helt separat, skert system (enligt Patientdatalagen). Dessa tv system r tskilda."]})})]})]}),l.jsxs("section",{className:"grid md:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h4",{className:"text-white font-bold flex items-center gap-2 tracking-tight uppercase text-sm",children:[l.jsx(qC,{size:18,className:"text-blue-400"})," 6. Dina rttigheter (GDPR)"]}),l.jsxs("ul",{className:"text-slate-400 text-xs space-y-2 leading-relaxed",children:[l.jsx("li",{children:" F ett utdrag p all data vi har om dig."}),l.jsx("li",{children:" Begra rttelse av felaktiga uppgifter."}),l.jsx("li",{children:' Begra att bli helt raderad ("Rtten att bli bortglmd").'})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h4",{className:"text-white font-bold flex items-center gap-2 tracking-tight uppercase text-sm",children:[l.jsx(ap,{size:18,className:"text-orange-400"})," 7. Kontakt"]}),l.jsxs("p",{className:"text-slate-400 text-xs leading-relaxed",children:["Klttertrdet AB",l.jsx("br",{}),"Gullregnsgatan 9A, Gvle",l.jsx("br",{}),"E-post: billy@klattertradet.se"]})]})]})]})]}),W4=({setPage:i})=>l.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-12 animate-fade-in max-w-4xl",children:[l.jsxs("button",{onClick:()=>i(Se.HOME),className:"flex items-center gap-2 text-white/60 hover:text-white transition-colors mb-8 group",children:[l.jsx(So,{size:20,className:"group-hover:-translate-x-1 transition-transform"}),"Tillbaka"]}),l.jsxs("div",{className:"space-y-12",children:[l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-[2.5rem] p-8 md:p-16 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-orange-500/10 to-transparent pointer-events-none"}),l.jsxs("div",{className:"relative z-10 space-y-6",children:[l.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-white leading-tight",children:"Din data, ditt val"}),l.jsx("h2",{className:"text-2xl md:text-3xl font-light text-amber-200/80 italic",children:" Vr Cookiepolicy"}),l.jsxs("div",{className:"flex items-center gap-4 pt-4 border-t border-white/10",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-500/10 flex items-center justify-center text-orange-400",children:l.jsx(hl,{size:24})}),l.jsx("p",{className:"text-slate-300 font-medium",children:"Transparens och samtycke r vra grundstenar."})]})]})]}),l.jsx("div",{className:"space-y-6 text-lg text-slate-300 leading-relaxed font-light",children:l.jsx("p",{children:"Precis som i vra utbildningar och i terapirummet r transparens och samtycke grundstenar i vr verksamhet. Vi vill att du ska knna dig trygg med hur vi hanterar information om dig nr du besker oss digitalt."})}),l.jsxs("div",{className:"space-y-16",children:[l.jsxs("section",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Xg,{className:"text-amber-500"}),l.jsx("h3",{className:"text-2xl font-bold text-white uppercase tracking-tight",children:"Vad r en Cookie?"})]}),l.jsx("p",{className:"text-slate-400",children:'En cookie r en liten textfil som sparas p din enhet (dator eller mobil). Man kan se det som ett litet digitalt minne som hjlper hemsidan att komma ihg dina val. Det finns dock olika typer av "minnen", och vi skiljer noga p dem:'})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 hover:bg-white/10 transition-colors",children:[l.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-2xl flex items-center justify-center text-blue-400 mb-6",children:l.jsx(la,{size:24})}),l.jsx("h4",{className:"text-xl font-bold text-white mb-4",children:"1. Ndvndiga Cookies"}),l.jsxs("p",{className:"text-slate-400 text-sm leading-relaxed",children:["Dessa r hemsidans ",l.jsx("strong",{children:'"autonoma nervsystem"'}),". Utan dessa fungerar inte sidan. De hller koll p grundlggande funktioner, som skerhet eller vad du lagt i varukorgen om du bokar en utbildning."]})]}),l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 hover:bg-white/10 transition-colors",children:[l.jsx("div",{className:"w-12 h-12 bg-orange-500/10 rounded-2xl flex items-center justify-center text-orange-400 mb-6",children:l.jsx(gT,{size:24})}),l.jsx("h4",{className:"text-xl font-bold text-white mb-4",children:"2. Funktions- & Analyscookies"}),l.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Dessa anvnder vi fr att se hur beskare rr sig p sidan, s att vi kan frbttra vrt innehll och vra tjnster. Det handlar om att frst mnster  lite som vi kartlgger mnster i Self-care modellen."})]})]}),l.jsxs("section",{className:"glass bg-gradient-to-br from-white/5 to-transparent border border-white/10 rounded-[2.5rem] p-8 md:p-12 space-y-8",children:[l.jsx("h3",{className:"text-2xl font-bold text-white uppercase tracking-tight",children:'Ditt samtycke r "Frivilligt, Specifikt och Otvetydigt"'}),l.jsxs("div",{className:"grid gap-6 text-slate-300 text-sm",children:[l.jsxs("div",{className:"flex gap-4",children:[l.jsx(qd,{className:"text-amber-500 shrink-0",size:20}),l.jsxs("p",{children:[l.jsx("strong",{children:"Inget antagande:"}),' Vi sprar inget (frutom de strikt ndvndiga) frrn du aktivt klickat "OK".']})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx(pT,{className:"text-amber-500 shrink-0",size:20}),l.jsxs("p",{children:[l.jsx("strong",{children:"Du kan ndra dig:"})," Du kan nr som helst dra tillbaka ditt samtycke via instllningarna. Det r en del av din Self-care att stta grnser."]})]})]})]}),l.jsxs("section",{className:"text-center space-y-4",children:[l.jsx("p",{className:"text-slate-400 text-sm",children:"Frgor? Maila Billy Ljungberg direkt p:"}),l.jsx("a",{href:"mailto:billy@klattertradet.se",className:"text-orange-400 font-bold hover:underline",children:"billy@klattertradet.se"})]})]})]})]}),X4=({setPage:i})=>l.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-12 animate-fade-in max-w-4xl space-y-16",children:[l.jsxs("button",{onClick:()=>i(Se.HOME),className:"flex items-center gap-2 text-white/60 hover:text-white transition-colors group",children:[l.jsx(So,{size:20,className:"group-hover:-translate-x-1 transition-transform"}),"Tillbaka"]}),l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-[3rem] p-8 md:p-16 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-blue-500/10 to-transparent pointer-events-none"}),l.jsxs("div",{className:"relative z-10 space-y-6",children:[l.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-white leading-tight",children:"Medlemsvillkor"}),l.jsx("h2",{className:"text-2xl md:text-3xl font-light text-blue-200/80 italic",children:"Horizonten Gemenskap"})]})]}),l.jsxs("div",{className:"space-y-12",children:[l.jsxs("section",{className:"space-y-8",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-500/10 flex items-center justify-center text-blue-400 shrink-0",children:l.jsx(uT,{size:24})}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-white uppercase tracking-tight",children:"1. Din digitala trygga hamn"}),l.jsx("p",{className:"text-slate-300 leading-relaxed",children:"Genom att klicka p Jag godknner kliver du in i en gemenskap som drivs av Klttertrdet AB och Horizonten. Vi r glada att du r hr. Dessa villkor finns till fr att skydda din och gruppens integritet  en frutsttning fr verklig terhmtning."})]})]}),l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-12 h-12 rounded-2xl bg-orange-500/10 flex items-center justify-center text-orange-400 shrink-0",children:l.jsx(Ha,{size:24})}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-white uppercase tracking-tight",children:"2. Syftet: En plats fr lkning och std"}),l.jsx("p",{className:"text-slate-300 leading-relaxed",children:"Denna chatt r en mtesplats fr vrdnadshavare och individer som sker std och gemenskap. Vi vet att ensamhet r ett av vra strsta grundsr. Hr motverkar vi det genom kta kontakt och igenknning."})]})]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-3 text-amber-400",children:[l.jsx(hl,{size:24}),l.jsx("h3",{className:"text-xl font-bold",children:"3. Identitet & Skerhet"})]}),l.jsxs("ul",{className:"space-y-4 text-sm text-slate-400 leading-relaxed",children:[l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"kthet:"})," Du registrerar dig med BankID fr att skapa en sker milj fri frn troll. Trygghet brjar med transparens."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"En vuxen, ett konto:"})," Delade konton tillts inte. Detta r din plats fr terhmtning."]})]})]}),l.jsxs("div",{className:"glass bg-white/5 border border-white/10 rounded-3xl p-8 space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-3 text-green-400",children:[l.jsx(ws,{size:24}),l.jsx("h3",{className:"text-xl font-bold",children:"4. Vr gemensamma trygghet"})]}),l.jsxs("ul",{className:"space-y-4 text-sm text-slate-400 leading-relaxed",children:[l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Respekt:"})," Krnkningar eller hot aktiverar hot-systemet hos andra och leder till omedelbar uteslutning."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Integritet:"})," Dela aldrig bilder p andras barn eller skrmdumpa. Det som sgs i rummet stannar dr."]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-white",children:"Reklamfritt:"})," Vi r hr fr mnsklig kontakt, inte frsljning."]})]})]})]}),l.jsxs("section",{className:"space-y-12",children:[l.jsxs("div",{className:"glass bg-gradient-to-br from-white/5 to-transparent border border-white/10 rounded-[2.5rem] p-8 md:p-12 space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(dT,{className:"text-blue-400"}),l.jsx("h3",{className:"text-2xl font-bold text-white",children:"5. Reglering av gruppen (Moderering)"})]}),l.jsxs("p",{className:"text-slate-300 leading-relaxed",children:["Vra moderatorer fungerar som gruppens ",l.jsx("strong",{children:'"prefrontala cortex"'}),". De hjlper till att hlla ordning och snka stressnivn. Om ngon agerar p ett stt som skadar gruppens trygghet kan vi behva pausa kontot. Detta r en ndvndig grnsdragning fr kollektivets bsta."]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h4",{className:"text-xl font-bold text-white flex items-center gap-2",children:[l.jsx(qd,{size:20,className:"text-orange-400"})," 6. Sekretess & Data"]}),l.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Vi skyddar dina uppgifter stenhrt (GDPR). Mnga hr har erfarenhet av myndighetsinducerat trauma  drfr r din datahelgd vr hgsta prioritet."})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h4",{className:"text-xl font-bold text-white flex items-center gap-2",children:[l.jsx(Xg,{size:20,className:"text-blue-400"})," 7. Ansvarsfriskrivning"]}),l.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Horizonten r en stdjande gemenskap, inte klinisk terapi. Vid behov av professionell traumabehandling hnvisar vi till vr mottagning."})]})]})]}),l.jsx("div",{className:"pt-16 border-t border-white/10",children:l.jsxs("div",{className:"glass bg-gradient-to-tr from-amber-500/10 to-orange-500/5 border border-amber-500/20 rounded-[3rem] p-8 md:p-16 relative overflow-hidden",children:[l.jsx("div",{className:"absolute -right-20 -bottom-20 w-64 h-64 bg-amber-500/10 rounded-full blur-3xl"}),l.jsxs("div",{className:"relative z-10 space-y-8",children:[l.jsx("div",{className:"inline-block px-4 py-1 bg-amber-500/20 rounded-full border border-amber-500/30 text-amber-500 text-xs font-black uppercase tracking-widest",children:"Uppgradera din upplevelse"}),l.jsx("h2",{className:"text-3xl md:text-5xl font-bold text-white",children:"HORIZONTEN PREMIUM"}),l.jsx("p",{className:"text-xl text-amber-200/90 font-light italic",children:" Investera i din hllbarhet"}),l.jsx("div",{className:"space-y-6 text-slate-300 leading-relaxed",children:l.jsx("p",{children:"Varfr bli betalande medlem? Den fria chatten ger dig gemenskapen. Premium-medlemskapet ger dig verktygen fr frndring. Min vision med Horizonten r att demokratisera kunskapen om hur vi fungerar."})}),l.jsxs("div",{className:"grid sm:grid-cols-2 gap-6 pt-6",children:[l.jsxs("div",{className:"bg-white/5 p-6 rounded-2xl border border-white/5 space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2 font-bold text-white",children:[l.jsx(XC,{size:18,className:"text-amber-400"})," Frdjupning"]}),l.jsx("p",{className:"text-xs text-slate-400",children:"Exklusivt material om traumateori och bottom-up-metoder."})]}),l.jsxs("div",{className:"bg-white/5 p-6 rounded-2xl border border-white/5 space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2 font-bold text-white",children:[l.jsx(TC,{size:18,className:"text-amber-400"})," Frmner"]}),l.jsx("p",{className:"text-xs text-slate-400",children:"Rabatter p utbildningar och frtur till nya funktioner."})]})]})]})]})})]})]}),$4="modulepreload",Y4=function(i){return"/"+i},oE={},Bm=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){let m=function(v){return Promise.all(v.map(b=>Promise.resolve(b).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};var u=m;document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=h?.nonce||h?.getAttribute("nonce");s=m(t.map(v=>{if(v=Y4(v),v in oE)return;oE[v]=!0;const b=v.endsWith(".css"),y=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${y}`))return;const w=document.createElement("link");if(w.rel=b?"stylesheet":$4,b||(w.as="script"),w.crossOrigin="",w.href=v,p&&w.setAttribute("nonce",p),document.head.appendChild(w),b)return new Promise((M,k)=>{w.addEventListener("load",M),w.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${v}`)))})}))}function a(h){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h}return s.then(h=>{for(const p of h||[])p.status==="rejected"&&a(p.reason);return e().catch(a)})};var du=(i=>(i.IDLE="IDLE",i.LOADING="LOADING",i.AUTHENTICATED="AUTHENTICATED",i.UNAUTHENTICATED="UNAUTHENTICATED",i.ERROR="ERROR",i))(du||{});const K4=({onLoginSuccess:i,initialView:e="login",onNavigateToPremium:t,onNavigateToTerms:n,onNavigateToPrivacy:s,onNavigateToCookies:a,onNavigateToContact:u})=>{const[h,p]=ie.useState(e==="login"),[m,v]=ie.useState(""),[b,y]=ie.useState(""),[w,M]=ie.useState(""),[k,T]=ie.useState(!1),[N,j]=ie.useState(null),[R,D]=ie.useState(null),[I,P]=ie.useState(!1),z=async G=>{G.preventDefault(),T(!0),j(null),D(null);try{if(h){const{data:U,error:L}=await Rn.auth.signInWithPassword({email:m,password:b});L?(j(L.message),T(!1)):U.user&&(console.log("Login successful:",U.user),await Rn.from("login_events").insert({user_id:U.user.id,logged_in_at:new Date().toISOString()}))}else{const{data:U,error:L}=await Rn.auth.signUp({email:m,password:b,options:{emailRedirectTo:window.location.origin,data:{full_name:w,avatar_url:""}}});L?(j(L.message),T(!1)):U.user&&(await Rn.from("profiles").upsert({id:U.user.id,email:m,full_name:w,membership_level:2,membership_active:!0,updated_at:new Date().toISOString()}),U.session?console.log("Signup successful, session created"):(D("Tack fr din registrering! Ett bekrftelsemail har skickats till din e-post. Klicka p lnken i mailet fr att aktivera ditt konto och kunna logga in."),p(!0)),T(!1))}}catch{j("Ett ovntat fel uppstod."),T(!1)}};return l.jsxs("div",{className:"w-full max-w-md",children:[l.jsx("div",{className:"text-center mb-10 selection:bg-orange-500/30",children:l.jsx("div",{className:"inline-flex items-center justify-center mb-6",children:l.jsx("img",{src:"/assets/logo2.png",alt:"Klttertrdet & Horizonten",className:"h-24 md:h-28 w-auto object-contain drop-shadow-2xl"})})}),l.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl p-8 rounded-3xl shadow-2xl border border-slate-800",children:[l.jsxs("form",{onSubmit:z,className:"space-y-6",children:[N&&l.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 p-4 rounded-xl flex items-start gap-3 animate-in fade-in slide-in-from-top-2",children:[l.jsx(yC,{className:"text-red-400 shrink-0 mt-0.5",size:18}),l.jsx("p",{className:"text-sm text-red-200",children:N})]}),R&&l.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 p-4 rounded-xl flex items-start gap-3 animate-in fade-in slide-in-from-top-2",children:[l.jsx(hl,{className:"text-green-400 shrink-0 mt-0.5",size:18}),l.jsx("p",{className:"text-sm text-green-200",children:R})]}),!h&&l.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4",children:[l.jsx("label",{className:"block text-xs font-bold uppercase tracking-widest text-slate-400 mb-2 ml-1",children:"Namn (Visas fr andra)"}),l.jsx("input",{type:"text",value:w,onChange:G=>M(G.target.value),placeholder:"Frnamn Efternamn","aria-label":"Namn",required:!h,className:"w-full bg-slate-800/50 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 transition-all"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase tracking-widest text-slate-400 mb-2 ml-1",children:"E-post"}),l.jsx("input",{type:"email",value:m,onChange:G=>v(G.target.value),placeholder:"namn@exempel.se","aria-label":"E-post",required:!0,className:"w-full bg-slate-800/50 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 transition-all"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase tracking-widest text-slate-400 mb-2 ml-1",children:"Lsenord"}),l.jsx("input",{type:"password",value:b,onChange:G=>y(G.target.value),placeholder:"","aria-label":"Lsenord",required:!0,minLength:6,className:"w-full bg-slate-800/50 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 transition-all"})]}),!h&&l.jsxs("div",{className:"flex items-start gap-3 mt-4 animate-in fade-in slide-in-from-top-2",children:[l.jsx("input",{type:"checkbox",id:"terms",checked:I,onChange:G=>P(G.target.checked),className:"mt-1 w-4 h-4 bg-slate-800 border-slate-700 rounded text-orange-500 focus:ring-orange-500/50"}),l.jsxs("label",{htmlFor:"terms",className:"text-sm text-slate-400 leading-tight",children:["Jag godknner"," ",l.jsx("button",{type:"button",onClick:n,className:"text-blue-400 hover:text-blue-300 underline font-medium",children:"medlemsvillkoren"})," ","och att mina uppgifter hanteras enligt integritetspolicyn."]})]}),l.jsx("button",{type:"submit",disabled:k||!h&&!I,className:"w-full bg-orange-500 hover:bg-orange-400 disabled:bg-orange-500/30 disabled:text-slate-800 disabled:cursor-not-allowed text-slate-950 font-bold py-4 rounded-xl shadow-lg shadow-orange-500/20 flex items-center justify-center gap-2 group transition-all",children:k?l.jsx(Tw,{className:"animate-spin",size:20}):l.jsxs(l.Fragment,{children:[h?"Logga in":"Skapa konto",l.jsx(us,{className:"group-hover:translate-x-1 transition-transform",size:20})]})}),!h&&t&&l.jsx("button",{type:"button",onClick:t,className:"w-full mt-4 bg-slate-800 hover:bg-slate-700 text-white font-bold py-4 rounded-xl border border-slate-700 transition-all shadow-lg flex items-center justify-center gap-2 text-sm uppercase tracking-wider",children:"Till premium medlemskapet"})]}),l.jsx("div",{className:"mt-8 pt-6 border-t border-slate-800 text-center",children:l.jsxs("p",{className:"text-slate-500 text-sm",children:[h?"Ingen tillgng?":"Har du redan ett konto?"," ",l.jsx("button",{onClick:()=>p(!h),className:"text-orange-400 hover:text-orange-300 font-semibold underline underline-offset-4 focus:outline-none",children:h?"Skapa ett konto":"Logga in hr"})]})})]}),l.jsxs("div",{className:"mt-12 text-center",children:[l.jsx("p",{className:"text-slate-600 text-xs mb-4",children:" 2024 Horizonten Network. Alla rttigheter frbehllna."}),l.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-[10px] text-slate-500 uppercase tracking-wider font-medium",children:[l.jsx("button",{onClick:()=>window.alert("Du mste vara inloggad fr att ndra kontoinstllningar."),className:"hover:text-orange-400 transition-colors",children:"Kontoinstllningar"}),l.jsx("button",{onClick:n,className:"hover:text-orange-400 transition-colors",children:"Medlemsvillkor"}),l.jsx("button",{onClick:s,className:"hover:text-orange-400 transition-colors",children:"Integritets- & Sekretesspolicy"}),l.jsx("button",{onClick:a,className:"hover:text-orange-400 transition-colors",children:"Cookie-instllningar"}),l.jsx("button",{onClick:u,className:"hover:text-orange-400 transition-colors",children:"Kontakt"})]})]})]})},Z4=({onLoginSuccess:i,onBack:e})=>{const[t,n]=ie.useState(""),[s,a]=ie.useState(""),[u,h]=ie.useState(!1),[p,m]=ie.useState(null),v=async b=>{b.preventDefault(),h(!0),m(null);try{const{data:y,error:w}=await Rn.auth.signInWithPassword({email:t,password:s});w?(m(w.message),h(!1)):y.user&&(console.log("Premium Login successful:",y.user),await Rn.from("login_events").insert({user_id:y.user.id,logged_in_at:new Date().toISOString()}))}catch{m("Ett ovntat fel uppstod."),h(!1)}};return l.jsxs("div",{className:"w-full max-w-md animate-in fade-in zoom-in-95 duration-700",children:[l.jsxs("div",{className:"text-center mb-10",children:[l.jsxs("div",{className:"inline-flex items-center justify-center gap-3 mb-6",children:[l.jsx("img",{src:"/assets/logo2.png",alt:"Horizonten gemenskap",className:"w-14 h-14 object-contain"}),l.jsx("span",{className:"text-white text-xl font-medium",children:"Horizonten gemenskap"})]}),l.jsx("h1",{className:"text-2xl sm:text-3xl text-white font-light tracking-wide",children:"Logga in p ditt konto"}),l.jsx("p",{className:"text-slate-400 mt-3 text-sm",children:"Vlkommen tillbaka till vr community fr betalmedlemmar"})]}),l.jsxs("form",{onSubmit:v,className:"space-y-6",children:[p&&l.jsx("div",{className:"bg-red-500/10 border border-red-500/20 p-4 rounded-xl text-sm text-red-200 animate-bounce-subtle",children:p}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-300 mb-2",children:"E-postadress"}),l.jsx("input",{id:"email",type:"email",value:t,onChange:b=>n(b.target.value),required:!0,placeholder:"din@email.se",className:"w-full px-4 py-3 bg-white/5 border border-white/20 rounded-lg text-white placeholder:text-white/20 focus:outline-none focus:border-[#b35c2a] focus:ring-1 focus:ring-[#b35c2a] transition-colors"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-300 mb-2",children:"Lsenord"}),l.jsx("input",{id:"password",type:"password",value:s,onChange:b=>a(b.target.value),required:!0,placeholder:"Ange ditt lsenord",className:"w-full px-4 py-3 bg-white/5 border border-white/20 rounded-lg text-white placeholder:text-white/20 focus:outline-none focus:border-[#b35c2a] focus:ring-1 focus:ring-[#b35c2a] transition-colors"})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[l.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-white/20 bg-white/5 text-[#b35c2a] focus:ring-[#b35c2a] focus:ring-offset-0"}),l.jsx("span",{className:"text-slate-400 group-hover:text-slate-200 transition-colors",children:"Kom ihg mig"})]}),l.jsx("button",{type:"button",className:"text-[#b35c2a] hover:text-[#9a4f24] transition-colors",children:"Glmt lsenord?"})]}),l.jsx("button",{type:"submit",disabled:u,className:"w-full px-8 py-3 bg-[#b35c2a] hover:bg-[#9a4f24] disabled:bg-[#b35c2a]/50 text-white font-medium rounded-lg transition-all duration-200 shadow-lg shadow-[#b35c2a]/20 flex items-center justify-center gap-2",children:u?l.jsx(Tw,{className:"animate-spin",size:20}):"Logga in"})]}),l.jsx("div",{className:"mt-8 text-center",children:l.jsxs("p",{className:"text-slate-500 text-sm",children:["Inte medlem n?"," ",l.jsx("button",{onClick:e,className:"text-[#b35c2a] hover:text-[#9a4f24] transition-colors font-medium",children:"Bli medlem idag"})]})}),l.jsx("div",{className:"mt-8 text-center pt-6 border-t border-white/5",children:l.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-slate-500 hover:text-white transition-colors mx-auto text-sm group",children:[l.jsx(So,{size:16,className:"group-hover:-translate-x-1 transition-transform"}),"Tillbaka till startsidan"]})})]})};const sy="182",J4={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Q4={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},zT=0,iw=1,BT=2,e5=3,FT=0,Xf=1,cg=2,Ud=3,cc=0,br=1,ll=2,dl=0,Fd=1,sw=2,rw=3,aw=4,VT=5,mu=100,HT=101,GT=102,qT=103,WT=104,XT=200,$T=201,YT=202,KT=203,Jv=204,Qv=205,ZT=206,JT=207,QT=208,eA=209,tA=210,nA=211,iA=212,sA=213,rA=214,eb=0,tb=1,nb=2,Wd=3,ib=4,sb=5,rb=6,ab=7,Yg=0,aA=1,oA=2,Fa=0,Uw=1,Pw=2,zw=3,ry=4,Bw=5,Fw=6,Vw=7,ow="attached",lA="detached",ay=300,fl=301,yu=302,Ag=303,kg=304,op=306,Cg=1e3,Gr=1001,Rg=1002,Ai=1003,Hw=1004,t5=1004,Hf=1005,n5=1005,ei=1006,ug=1007,i5=1007,cl=1008,s5=1008,xr=1009,Gw=1010,qw=1011,Kf=1012,oy=1013,Ga=1014,ys=1015,Mo=1016,ly=1017,cy=1018,Zf=1020,Ww=35902,Xw=35899,$w=1021,Yw=1022,_s=1023,pl=1026,xu=1027,uy=1028,Kg=1029,Xd=1030,dy=1031,r5=1032,hy=1033,dg=33776,hg=33777,fg=33778,pg=33779,ob=35840,lb=35841,cb=35842,ub=35843,db=36196,hb=37492,fb=37496,pb=37488,mb=37489,gb=37490,xb=37491,vb=37808,bb=37809,yb=37810,_b=37811,wb=37812,Sb=37813,Mb=37814,Eb=37815,Nb=37816,Tb=37817,Ab=37818,kb=37819,Cb=37820,Rb=37821,jb=36492,Db=36494,Ib=36495,Ob=36283,Lb=36284,Ub=36285,Pb=36286,cA=2200,uA=2201,dA=2202,jg=2300,zb=2301,Bv=2302,Pd=2400,zd=2401,Dg=2402,fy=2500,Kw=2501,a5=0,o5=1,l5=2,hA=3200,c5=3201,u5=3202,d5=3203,Eu=0,fA=1,rc="",Js="srgb",_u="srgb-linear",Ig="linear",Hn="srgb",h5="",f5="rg",p5="ga",m5=0,Rd=7680,g5=7681,x5=7682,v5=7683,b5=34055,y5=34056,_5=5386,w5=512,S5=513,M5=514,E5=515,N5=516,T5=517,A5=518,lw=519,pA=512,mA=513,gA=514,py=515,xA=516,vA=517,my=518,bA=519,Og=35044,k5=35048,C5=35040,R5=35045,j5=35049,D5=35041,I5=35046,O5=35050,L5=35042,U5="100",cw="300 es",oa=2e3,Jf=2001,P5={COMPUTE:"compute",RENDER:"render"},z5={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},B5={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function yA(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const F5={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Gf(i,e){return new F5[i](e)}function _A(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Lg(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function wA(){const i=Lg("canvas");return i.style.display="block",i}const lE={};let wu=null;function V5(i){wu=i}function H5(){return wu}function Ug(...i){const e="THREE."+i.shift();wu?wu("log",e,...i):console.log(e,...i)}function ut(...i){const e="THREE."+i.shift();wu?wu("warn",e,...i):console.warn(e,...i)}function Ct(...i){const e="THREE."+i.shift();wu?wu("error",e,...i):console.error(e,...i)}function Qf(...i){const e=i.join(" ");e in lE||(lE[e]=!0,ut(...i))}function G5(i,e,t){return new Promise(function(n,s){function a(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:s();break;case i.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:n()}}setTimeout(a,t)})}class gl{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const s=n[e];if(s!==void 0){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let a=0,u=s.length;a<u;a++)s[a].call(this,e);e.target=null}}}const Ys=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let cE=1234567;const Vd=Math.PI/180,ep=180/Math.PI;function ca(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Ys[i&255]+Ys[i>>8&255]+Ys[i>>16&255]+Ys[i>>24&255]+"-"+Ys[e&255]+Ys[e>>8&255]+"-"+Ys[e>>16&15|64]+Ys[e>>24&255]+"-"+Ys[t&63|128]+Ys[t>>8&255]+"-"+Ys[t>>16&255]+Ys[t>>24&255]+Ys[n&255]+Ys[n>>8&255]+Ys[n>>16&255]+Ys[n>>24&255]).toLowerCase()}function qt(i,e,t){return Math.max(e,Math.min(t,i))}function Zw(i,e){return(i%e+e)%e}function q5(i,e,t,n,s){return n+(i-e)*(s-n)/(t-e)}function W5(i,e,t){return i!==e?(t-i)/(e-i):0}function mg(i,e,t){return(1-t)*i+t*e}function X5(i,e,t,n){return mg(i,e,1-Math.exp(-t*n))}function $5(i,e=1){return e-Math.abs(Zw(i,e*2)-e)}function Y5(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function K5(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function Z5(i,e){return i+Math.floor(Math.random()*(e-i+1))}function J5(i,e){return i+Math.random()*(e-i)}function Q5(i){return i*(.5-Math.random())}function eD(i){i!==void 0&&(cE=i);let e=cE+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function tD(i){return i*Vd}function nD(i){return i*ep}function iD(i){return(i&i-1)===0&&i!==0}function sD(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function rD(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function aD(i,e,t,n,s){const a=Math.cos,u=Math.sin,h=a(t/2),p=u(t/2),m=a((e+n)/2),v=u((e+n)/2),b=a((e-n)/2),y=u((e-n)/2),w=a((n-e)/2),M=u((n-e)/2);switch(s){case"XYX":i.set(h*v,p*b,p*y,h*m);break;case"YZY":i.set(p*y,h*v,p*b,h*m);break;case"ZXZ":i.set(p*b,p*y,h*v,h*m);break;case"XZX":i.set(h*v,p*M,p*w,h*m);break;case"YXY":i.set(p*w,h*v,p*M,h*m);break;case"ZYZ":i.set(p*M,p*w,h*v,h*m);break;default:ut("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function vr(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function ln(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const oD={DEG2RAD:Vd,RAD2DEG:ep,generateUUID:ca,clamp:qt,euclideanModulo:Zw,mapLinear:q5,inverseLerp:W5,lerp:mg,damp:X5,pingpong:$5,smoothstep:Y5,smootherstep:K5,randInt:Z5,randFloat:J5,randFloatSpread:Q5,seededRandom:eD,degToRad:tD,radToDeg:nD,isPowerOfTwo:iD,ceilPowerOfTwo:sD,floorPowerOfTwo:rD,setQuaternionFromProperEuler:aD,normalize:ln,denormalize:vr};class ze{constructor(e=0,t=0){ze.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6],this.y=s[1]*t+s[4]*n+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=qt(this.x,e.x,t.x),this.y=qt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=qt(this.x,e,t),this.y=qt(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(qt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(qt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),s=Math.sin(t),a=this.x-e.x,u=this.y-e.y;return this.x=a*n-u*s+e.x,this.y=a*s+u*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class qr{constructor(e=0,t=0,n=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=s}static slerpFlat(e,t,n,s,a,u,h){let p=n[s+0],m=n[s+1],v=n[s+2],b=n[s+3],y=a[u+0],w=a[u+1],M=a[u+2],k=a[u+3];if(h<=0){e[t+0]=p,e[t+1]=m,e[t+2]=v,e[t+3]=b;return}if(h>=1){e[t+0]=y,e[t+1]=w,e[t+2]=M,e[t+3]=k;return}if(b!==k||p!==y||m!==w||v!==M){let T=p*y+m*w+v*M+b*k;T<0&&(y=-y,w=-w,M=-M,k=-k,T=-T);let N=1-h;if(T<.9995){const j=Math.acos(T),R=Math.sin(j);N=Math.sin(N*j)/R,h=Math.sin(h*j)/R,p=p*N+y*h,m=m*N+w*h,v=v*N+M*h,b=b*N+k*h}else{p=p*N+y*h,m=m*N+w*h,v=v*N+M*h,b=b*N+k*h;const j=1/Math.sqrt(p*p+m*m+v*v+b*b);p*=j,m*=j,v*=j,b*=j}}e[t]=p,e[t+1]=m,e[t+2]=v,e[t+3]=b}static multiplyQuaternionsFlat(e,t,n,s,a,u){const h=n[s],p=n[s+1],m=n[s+2],v=n[s+3],b=a[u],y=a[u+1],w=a[u+2],M=a[u+3];return e[t]=h*M+v*b+p*w-m*y,e[t+1]=p*M+v*y+m*b-h*w,e[t+2]=m*M+v*w+h*y-p*b,e[t+3]=v*M-h*b-p*y-m*w,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,s){return this._x=e,this._y=t,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,s=e._y,a=e._z,u=e._order,h=Math.cos,p=Math.sin,m=h(n/2),v=h(s/2),b=h(a/2),y=p(n/2),w=p(s/2),M=p(a/2);switch(u){case"XYZ":this._x=y*v*b+m*w*M,this._y=m*w*b-y*v*M,this._z=m*v*M+y*w*b,this._w=m*v*b-y*w*M;break;case"YXZ":this._x=y*v*b+m*w*M,this._y=m*w*b-y*v*M,this._z=m*v*M-y*w*b,this._w=m*v*b+y*w*M;break;case"ZXY":this._x=y*v*b-m*w*M,this._y=m*w*b+y*v*M,this._z=m*v*M+y*w*b,this._w=m*v*b-y*w*M;break;case"ZYX":this._x=y*v*b-m*w*M,this._y=m*w*b+y*v*M,this._z=m*v*M-y*w*b,this._w=m*v*b+y*w*M;break;case"YZX":this._x=y*v*b+m*w*M,this._y=m*w*b+y*v*M,this._z=m*v*M-y*w*b,this._w=m*v*b-y*w*M;break;case"XZY":this._x=y*v*b-m*w*M,this._y=m*w*b-y*v*M,this._z=m*v*M+y*w*b,this._w=m*v*b+y*w*M;break;default:ut("Quaternion: .setFromEuler() encountered an unknown order: "+u)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,s=Math.sin(n);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],s=t[4],a=t[8],u=t[1],h=t[5],p=t[9],m=t[2],v=t[6],b=t[10],y=n+h+b;if(y>0){const w=.5/Math.sqrt(y+1);this._w=.25/w,this._x=(v-p)*w,this._y=(a-m)*w,this._z=(u-s)*w}else if(n>h&&n>b){const w=2*Math.sqrt(1+n-h-b);this._w=(v-p)/w,this._x=.25*w,this._y=(s+u)/w,this._z=(a+m)/w}else if(h>b){const w=2*Math.sqrt(1+h-n-b);this._w=(a-m)/w,this._x=(s+u)/w,this._y=.25*w,this._z=(p+v)/w}else{const w=2*Math.sqrt(1+b-n-h);this._w=(u-s)/w,this._x=(a+m)/w,this._y=(p+v)/w,this._z=.25*w}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(qt(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const s=Math.min(1,t/n);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,s=e._y,a=e._z,u=e._w,h=t._x,p=t._y,m=t._z,v=t._w;return this._x=n*v+u*h+s*m-a*p,this._y=s*v+u*p+a*h-n*m,this._z=a*v+u*m+n*p-s*h,this._w=u*v-n*h-s*p-a*m,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let n=e._x,s=e._y,a=e._z,u=e._w,h=this.dot(e);h<0&&(n=-n,s=-s,a=-a,u=-u,h=-h);let p=1-t;if(h<.9995){const m=Math.acos(h),v=Math.sin(m);p=Math.sin(p*m)/v,t=Math.sin(t*m)/v,this._x=this._x*p+n*t,this._y=this._y*p+s*t,this._z=this._z*p+a*t,this._w=this._w*p+u*t,this._onChangeCallback()}else this._x=this._x*p+n*t,this._y=this._y*p+s*t,this._z=this._z*p+a*t,this._w=this._w*p+u*t,this.normalize();return this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),s=Math.sqrt(1-n),a=Math.sqrt(n);return this.set(s*Math.sin(e),s*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Y{constructor(e=0,t=0,n=0){Y.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(uE.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(uE.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,s=this.z,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6]*s,this.y=a[1]*t+a[4]*n+a[7]*s,this.z=a[2]*t+a[5]*n+a[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,a=e.elements,u=1/(a[3]*t+a[7]*n+a[11]*s+a[15]);return this.x=(a[0]*t+a[4]*n+a[8]*s+a[12])*u,this.y=(a[1]*t+a[5]*n+a[9]*s+a[13])*u,this.z=(a[2]*t+a[6]*n+a[10]*s+a[14])*u,this}applyQuaternion(e){const t=this.x,n=this.y,s=this.z,a=e.x,u=e.y,h=e.z,p=e.w,m=2*(u*s-h*n),v=2*(h*t-a*s),b=2*(a*n-u*t);return this.x=t+p*m+u*b-h*v,this.y=n+p*v+h*m-a*b,this.z=s+p*b+a*v-u*m,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,s=this.z,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*s,this.y=a[1]*t+a[5]*n+a[9]*s,this.z=a[2]*t+a[6]*n+a[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=qt(this.x,e.x,t.x),this.y=qt(this.y,e.y,t.y),this.z=qt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=qt(this.x,e,t),this.y=qt(this.y,e,t),this.z=qt(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(qt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,s=e.y,a=e.z,u=t.x,h=t.y,p=t.z;return this.x=s*p-a*h,this.y=a*u-n*p,this.z=n*h-s*u,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return F_.copy(this).projectOnVector(e),this.sub(F_)}reflect(e){return this.sub(F_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(qt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,s=this.z-e.z;return t*t+n*n+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const s=Math.sin(t)*e;return this.x=s*Math.sin(n),this.y=Math.cos(t)*e,this.z=s*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const F_=new Y,uE=new qr;class nn{constructor(e,t,n,s,a,u,h,p,m){nn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,s,a,u,h,p,m)}set(e,t,n,s,a,u,h,p,m){const v=this.elements;return v[0]=e,v[1]=s,v[2]=h,v[3]=t,v[4]=a,v[5]=p,v[6]=n,v[7]=u,v[8]=m,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,a=this.elements,u=n[0],h=n[3],p=n[6],m=n[1],v=n[4],b=n[7],y=n[2],w=n[5],M=n[8],k=s[0],T=s[3],N=s[6],j=s[1],R=s[4],D=s[7],I=s[2],P=s[5],z=s[8];return a[0]=u*k+h*j+p*I,a[3]=u*T+h*R+p*P,a[6]=u*N+h*D+p*z,a[1]=m*k+v*j+b*I,a[4]=m*T+v*R+b*P,a[7]=m*N+v*D+b*z,a[2]=y*k+w*j+M*I,a[5]=y*T+w*R+M*P,a[8]=y*N+w*D+M*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],s=e[2],a=e[3],u=e[4],h=e[5],p=e[6],m=e[7],v=e[8];return t*u*v-t*h*m-n*a*v+n*h*p+s*a*m-s*u*p}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],a=e[3],u=e[4],h=e[5],p=e[6],m=e[7],v=e[8],b=v*u-h*m,y=h*p-v*a,w=m*a-u*p,M=t*b+n*y+s*w;if(M===0)return this.set(0,0,0,0,0,0,0,0,0);const k=1/M;return e[0]=b*k,e[1]=(s*m-v*n)*k,e[2]=(h*n-s*u)*k,e[3]=y*k,e[4]=(v*t-s*p)*k,e[5]=(s*a-h*t)*k,e[6]=w*k,e[7]=(n*p-m*t)*k,e[8]=(u*t-n*a)*k,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,s,a,u,h){const p=Math.cos(a),m=Math.sin(a);return this.set(n*p,n*m,-n*(p*u+m*h)+u+e,-s*m,s*p,-s*(-m*u+p*h)+h+t,0,0,1),this}scale(e,t){return this.premultiply(V_.makeScale(e,t)),this}rotate(e){return this.premultiply(V_.makeRotation(-e)),this}translate(e,t){return this.premultiply(V_.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<9;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const V_=new nn,dE=new nn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),hE=new nn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function lD(){const i={enabled:!0,workingColorSpace:_u,spaces:{},convert:function(s,a,u){return this.enabled===!1||a===u||!a||!u||(this.spaces[a].transfer===Hn&&(s.r=oc(s.r),s.g=oc(s.g),s.b=oc(s.b)),this.spaces[a].primaries!==this.spaces[u].primaries&&(s.applyMatrix3(this.spaces[a].toXYZ),s.applyMatrix3(this.spaces[u].fromXYZ)),this.spaces[u].transfer===Hn&&(s.r=$f(s.r),s.g=$f(s.g),s.b=$f(s.b))),s},workingToColorSpace:function(s,a){return this.convert(s,this.workingColorSpace,a)},colorSpaceToWorking:function(s,a){return this.convert(s,a,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===rc?Ig:this.spaces[s].transfer},getToneMappingMode:function(s){return this.spaces[s].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(s,a=this.workingColorSpace){return s.fromArray(this.spaces[a].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,a,u){return s.copy(this.spaces[a].toXYZ).multiply(this.spaces[u].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(s,a){return Qf("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),i.workingToColorSpace(s,a)},toWorkingColorSpace:function(s,a){return Qf("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),i.colorSpaceToWorking(s,a)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[_u]:{primaries:e,whitePoint:n,transfer:Ig,toXYZ:dE,fromXYZ:hE,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Js},outputColorSpaceConfig:{drawingBufferColorSpace:Js}},[Js]:{primaries:e,whitePoint:n,transfer:Hn,toXYZ:dE,fromXYZ:hE,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Js}}}),i}const Tn=lD();function oc(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function $f(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let mf;class SA{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{mf===void 0&&(mf=Lg("canvas")),mf.width=e.width,mf.height=e.height;const s=mf.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),n=mf}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Lg("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const s=n.getImageData(0,0,e.width,e.height),a=s.data;for(let u=0;u<a.length;u++)a[u]=oc(a[u]/255)*255;return n.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(oc(t[n]/255)*255):t[n]=oc(t[n]);return{data:t,width:e.width,height:e.height}}else return ut("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let cD=0;class vu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:cD++}),this.uuid=ca(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(s!==null){let a;if(Array.isArray(s)){a=[];for(let u=0,h=s.length;u<h;u++)s[u].isDataTexture?a.push(H_(s[u].image)):a.push(H_(s[u]))}else a=H_(s);n.url=a}return t||(e.images[this.uuid]=n),n}}function H_(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?SA.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(ut("Texture: Unable to serialize Texture."),{})}let uD=0;const G_=new Y;class Ui extends gl{constructor(e=Ui.DEFAULT_IMAGE,t=Ui.DEFAULT_MAPPING,n=Gr,s=Gr,a=ei,u=cl,h=_s,p=xr,m=Ui.DEFAULT_ANISOTROPY,v=rc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:uD++}),this.uuid=ca(),this.name="",this.source=new vu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=s,this.magFilter=a,this.minFilter=u,this.anisotropy=m,this.format=h,this.internalFormat=null,this.type=p,this.offset=new ze(0,0),this.repeat=new ze(1,1),this.center=new ze(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new nn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=v,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(G_).x}get height(){return this.source.getSize(G_).y}get depth(){return this.source.getSize(G_).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(n===void 0){ut(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){ut(`Texture.setValues(): property '${t}' does not exist.`);continue}s&&n&&s.isVector2&&n.isVector2||s&&n&&s.isVector3&&n.isVector3||s&&n&&s.isMatrix3&&n.isMatrix3?s.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ay)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Cg:e.x=e.x-Math.floor(e.x);break;case Gr:e.x=e.x<0?0:1;break;case Rg:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Cg:e.y=e.y-Math.floor(e.y);break;case Gr:e.y=e.y<0?0:1;break;case Rg:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ui.DEFAULT_IMAGE=null;Ui.DEFAULT_MAPPING=ay;Ui.DEFAULT_ANISOTROPY=1;class Qn{constructor(e=0,t=0,n=0,s=1){Qn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,s){return this.x=e,this.y=t,this.z=n,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,a=this.w,u=e.elements;return this.x=u[0]*t+u[4]*n+u[8]*s+u[12]*a,this.y=u[1]*t+u[5]*n+u[9]*s+u[13]*a,this.z=u[2]*t+u[6]*n+u[10]*s+u[14]*a,this.w=u[3]*t+u[7]*n+u[11]*s+u[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,s,a;const p=e.elements,m=p[0],v=p[4],b=p[8],y=p[1],w=p[5],M=p[9],k=p[2],T=p[6],N=p[10];if(Math.abs(v-y)<.01&&Math.abs(b-k)<.01&&Math.abs(M-T)<.01){if(Math.abs(v+y)<.1&&Math.abs(b+k)<.1&&Math.abs(M+T)<.1&&Math.abs(m+w+N-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const R=(m+1)/2,D=(w+1)/2,I=(N+1)/2,P=(v+y)/4,z=(b+k)/4,G=(M+T)/4;return R>D&&R>I?R<.01?(n=0,s=.707106781,a=.707106781):(n=Math.sqrt(R),s=P/n,a=z/n):D>I?D<.01?(n=.707106781,s=0,a=.707106781):(s=Math.sqrt(D),n=P/s,a=G/s):I<.01?(n=.707106781,s=.707106781,a=0):(a=Math.sqrt(I),n=z/a,s=G/a),this.set(n,s,a,t),this}let j=Math.sqrt((T-M)*(T-M)+(b-k)*(b-k)+(y-v)*(y-v));return Math.abs(j)<.001&&(j=1),this.x=(T-M)/j,this.y=(b-k)/j,this.z=(y-v)/j,this.w=Math.acos((m+w+N-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=qt(this.x,e.x,t.x),this.y=qt(this.y,e.y,t.y),this.z=qt(this.z,e.z,t.z),this.w=qt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=qt(this.x,e,t),this.y=qt(this.y,e,t),this.z=qt(this.z,e,t),this.w=qt(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(qt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Jw extends gl{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ei,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new Qn(0,0,e,t),this.scissorTest=!1,this.viewport=new Qn(0,0,e,t);const s={width:e,height:t,depth:n.depth},a=new Ui(s);this.textures=[];const u=n.count;for(let h=0;h<u;h++)this.textures[h]=a.clone(),this.textures[h].isRenderTargetTexture=!0,this.textures[h].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:ei,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let s=0,a=this.textures.length;s<a;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=n,this.textures[s].isData3DTexture!==!0&&(this.textures[s].isArrayTexture=this.textures[s].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const s=Object.assign({},e.textures[t].image);this.textures[t].source=new vu(s)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Wr extends Jw{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class gy extends Ui{constructor(e=null,t=1,n=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=Ai,this.minFilter=Ai,this.wrapR=Gr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class dD extends Wr{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new gy(null,e,t,n),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class xy extends Ui{constructor(e=null,t=1,n=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=Ai,this.minFilter=Ai,this.wrapR=Gr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class hD extends Wr{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new xy(null,e,t,n),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class Qs{constructor(e=new Y(1/0,1/0,1/0),t=new Y(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(mo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(mo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=mo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const a=n.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let u=0,h=a.count;u<h;u++)e.isMesh===!0?e.getVertexPosition(u,mo):mo.fromBufferAttribute(a,u),mo.applyMatrix4(e.matrixWorld),this.expandByPoint(mo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Wx.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),Wx.copy(n.boundingBox)),Wx.applyMatrix4(e.matrixWorld),this.union(Wx)}const s=e.children;for(let a=0,u=s.length;a<u;a++)this.expandByObject(s[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,mo),mo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Fm),Xx.subVectors(this.max,Fm),gf.subVectors(e.a,Fm),xf.subVectors(e.b,Fm),vf.subVectors(e.c,Fm),nu.subVectors(xf,gf),iu.subVectors(vf,xf),gd.subVectors(gf,vf);let t=[0,-nu.z,nu.y,0,-iu.z,iu.y,0,-gd.z,gd.y,nu.z,0,-nu.x,iu.z,0,-iu.x,gd.z,0,-gd.x,-nu.y,nu.x,0,-iu.y,iu.x,0,-gd.y,gd.x,0];return!q_(t,gf,xf,vf,Xx)||(t=[1,0,0,0,1,0,0,0,1],!q_(t,gf,xf,vf,Xx))?!1:($x.crossVectors(nu,iu),t=[$x.x,$x.y,$x.z],q_(t,gf,xf,vf,Xx))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,mo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(mo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Zl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Zl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Zl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Zl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Zl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Zl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Zl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Zl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Zl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Zl=[new Y,new Y,new Y,new Y,new Y,new Y,new Y,new Y],mo=new Y,Wx=new Qs,gf=new Y,xf=new Y,vf=new Y,nu=new Y,iu=new Y,gd=new Y,Fm=new Y,Xx=new Y,$x=new Y,xd=new Y;function q_(i,e,t,n,s){for(let a=0,u=i.length-3;a<=u;a+=3){xd.fromArray(i,a);const h=s.x*Math.abs(xd.x)+s.y*Math.abs(xd.y)+s.z*Math.abs(xd.z),p=e.dot(xd),m=t.dot(xd),v=n.dot(xd);if(Math.max(-Math.max(p,m,v),Math.min(p,m,v))>h)return!1}return!0}const fD=new Qs,Vm=new Y,W_=new Y;class Ls{constructor(e=new Y,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):fD.setFromPoints(e).getCenter(n);let s=0;for(let a=0,u=e.length;a<u;a++)s=Math.max(s,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Vm.subVectors(e,this.center);const t=Vm.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),s=(n-this.radius)*.5;this.center.addScaledVector(Vm,s/n),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(W_.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Vm.copy(e.center).add(W_)),this.expandByPoint(Vm.copy(e.center).sub(W_))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Jl=new Y,X_=new Y,Yx=new Y,su=new Y,$_=new Y,Kx=new Y,Y_=new Y;class lp{constructor(e=new Y,t=new Y(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Jl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Jl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Jl.copy(this.origin).addScaledVector(this.direction,t),Jl.distanceToSquared(e))}distanceSqToSegment(e,t,n,s){X_.copy(e).add(t).multiplyScalar(.5),Yx.copy(t).sub(e).normalize(),su.copy(this.origin).sub(X_);const a=e.distanceTo(t)*.5,u=-this.direction.dot(Yx),h=su.dot(this.direction),p=-su.dot(Yx),m=su.lengthSq(),v=Math.abs(1-u*u);let b,y,w,M;if(v>0)if(b=u*p-h,y=u*h-p,M=a*v,b>=0)if(y>=-M)if(y<=M){const k=1/v;b*=k,y*=k,w=b*(b+u*y+2*h)+y*(u*b+y+2*p)+m}else y=a,b=Math.max(0,-(u*y+h)),w=-b*b+y*(y+2*p)+m;else y=-a,b=Math.max(0,-(u*y+h)),w=-b*b+y*(y+2*p)+m;else y<=-M?(b=Math.max(0,-(-u*a+h)),y=b>0?-a:Math.min(Math.max(-a,-p),a),w=-b*b+y*(y+2*p)+m):y<=M?(b=0,y=Math.min(Math.max(-a,-p),a),w=y*(y+2*p)+m):(b=Math.max(0,-(u*a+h)),y=b>0?a:Math.min(Math.max(-a,-p),a),w=-b*b+y*(y+2*p)+m);else y=u>0?-a:a,b=Math.max(0,-(u*y+h)),w=-b*b+y*(y+2*p)+m;return n&&n.copy(this.origin).addScaledVector(this.direction,b),s&&s.copy(X_).addScaledVector(Yx,y),w}intersectSphere(e,t){Jl.subVectors(e.center,this.origin);const n=Jl.dot(this.direction),s=Jl.dot(Jl)-n*n,a=e.radius*e.radius;if(s>a)return null;const u=Math.sqrt(a-s),h=n-u,p=n+u;return p<0?null:h<0?this.at(p,t):this.at(h,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,s,a,u,h,p;const m=1/this.direction.x,v=1/this.direction.y,b=1/this.direction.z,y=this.origin;return m>=0?(n=(e.min.x-y.x)*m,s=(e.max.x-y.x)*m):(n=(e.max.x-y.x)*m,s=(e.min.x-y.x)*m),v>=0?(a=(e.min.y-y.y)*v,u=(e.max.y-y.y)*v):(a=(e.max.y-y.y)*v,u=(e.min.y-y.y)*v),n>u||a>s||((a>n||isNaN(n))&&(n=a),(u<s||isNaN(s))&&(s=u),b>=0?(h=(e.min.z-y.z)*b,p=(e.max.z-y.z)*b):(h=(e.max.z-y.z)*b,p=(e.min.z-y.z)*b),n>p||h>s)||((h>n||n!==n)&&(n=h),(p<s||s!==s)&&(s=p),s<0)?null:this.at(n>=0?n:s,t)}intersectsBox(e){return this.intersectBox(e,Jl)!==null}intersectTriangle(e,t,n,s,a){$_.subVectors(t,e),Kx.subVectors(n,e),Y_.crossVectors($_,Kx);let u=this.direction.dot(Y_),h;if(u>0){if(s)return null;h=1}else if(u<0)h=-1,u=-u;else return null;su.subVectors(this.origin,e);const p=h*this.direction.dot(Kx.crossVectors(su,Kx));if(p<0)return null;const m=h*this.direction.dot($_.cross(su));if(m<0||p+m>u)return null;const v=-h*su.dot(Y_);return v<0?null:this.at(v/u,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Xt{constructor(e,t,n,s,a,u,h,p,m,v,b,y,w,M,k,T){Xt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,s,a,u,h,p,m,v,b,y,w,M,k,T)}set(e,t,n,s,a,u,h,p,m,v,b,y,w,M,k,T){const N=this.elements;return N[0]=e,N[4]=t,N[8]=n,N[12]=s,N[1]=a,N[5]=u,N[9]=h,N[13]=p,N[2]=m,N[6]=v,N[10]=b,N[14]=y,N[3]=w,N[7]=M,N[11]=k,N[15]=T,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Xt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),n.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this)}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const t=this.elements,n=e.elements,s=1/bf.setFromMatrixColumn(e,0).length(),a=1/bf.setFromMatrixColumn(e,1).length(),u=1/bf.setFromMatrixColumn(e,2).length();return t[0]=n[0]*s,t[1]=n[1]*s,t[2]=n[2]*s,t[3]=0,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=0,t[8]=n[8]*u,t[9]=n[9]*u,t[10]=n[10]*u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,s=e.y,a=e.z,u=Math.cos(n),h=Math.sin(n),p=Math.cos(s),m=Math.sin(s),v=Math.cos(a),b=Math.sin(a);if(e.order==="XYZ"){const y=u*v,w=u*b,M=h*v,k=h*b;t[0]=p*v,t[4]=-p*b,t[8]=m,t[1]=w+M*m,t[5]=y-k*m,t[9]=-h*p,t[2]=k-y*m,t[6]=M+w*m,t[10]=u*p}else if(e.order==="YXZ"){const y=p*v,w=p*b,M=m*v,k=m*b;t[0]=y+k*h,t[4]=M*h-w,t[8]=u*m,t[1]=u*b,t[5]=u*v,t[9]=-h,t[2]=w*h-M,t[6]=k+y*h,t[10]=u*p}else if(e.order==="ZXY"){const y=p*v,w=p*b,M=m*v,k=m*b;t[0]=y-k*h,t[4]=-u*b,t[8]=M+w*h,t[1]=w+M*h,t[5]=u*v,t[9]=k-y*h,t[2]=-u*m,t[6]=h,t[10]=u*p}else if(e.order==="ZYX"){const y=u*v,w=u*b,M=h*v,k=h*b;t[0]=p*v,t[4]=M*m-w,t[8]=y*m+k,t[1]=p*b,t[5]=k*m+y,t[9]=w*m-M,t[2]=-m,t[6]=h*p,t[10]=u*p}else if(e.order==="YZX"){const y=u*p,w=u*m,M=h*p,k=h*m;t[0]=p*v,t[4]=k-y*b,t[8]=M*b+w,t[1]=b,t[5]=u*v,t[9]=-h*v,t[2]=-m*v,t[6]=w*b+M,t[10]=y-k*b}else if(e.order==="XZY"){const y=u*p,w=u*m,M=h*p,k=h*m;t[0]=p*v,t[4]=-b,t[8]=m*v,t[1]=y*b+k,t[5]=u*v,t[9]=w*b-M,t[2]=M*b-w,t[6]=h*v,t[10]=k*b+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(pD,e,mD)}lookAt(e,t,n){const s=this.elements;return na.subVectors(e,t),na.lengthSq()===0&&(na.z=1),na.normalize(),ru.crossVectors(n,na),ru.lengthSq()===0&&(Math.abs(n.z)===1?na.x+=1e-4:na.z+=1e-4,na.normalize(),ru.crossVectors(n,na)),ru.normalize(),Zx.crossVectors(na,ru),s[0]=ru.x,s[4]=Zx.x,s[8]=na.x,s[1]=ru.y,s[5]=Zx.y,s[9]=na.y,s[2]=ru.z,s[6]=Zx.z,s[10]=na.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,a=this.elements,u=n[0],h=n[4],p=n[8],m=n[12],v=n[1],b=n[5],y=n[9],w=n[13],M=n[2],k=n[6],T=n[10],N=n[14],j=n[3],R=n[7],D=n[11],I=n[15],P=s[0],z=s[4],G=s[8],U=s[12],L=s[1],W=s[5],J=s[9],Q=s[13],ue=s[2],ne=s[6],X=s[10],Z=s[14],re=s[3],pe=s[7],we=s[11],q=s[15];return a[0]=u*P+h*L+p*ue+m*re,a[4]=u*z+h*W+p*ne+m*pe,a[8]=u*G+h*J+p*X+m*we,a[12]=u*U+h*Q+p*Z+m*q,a[1]=v*P+b*L+y*ue+w*re,a[5]=v*z+b*W+y*ne+w*pe,a[9]=v*G+b*J+y*X+w*we,a[13]=v*U+b*Q+y*Z+w*q,a[2]=M*P+k*L+T*ue+N*re,a[6]=M*z+k*W+T*ne+N*pe,a[10]=M*G+k*J+T*X+N*we,a[14]=M*U+k*Q+T*Z+N*q,a[3]=j*P+R*L+D*ue+I*re,a[7]=j*z+R*W+D*ne+I*pe,a[11]=j*G+R*J+D*X+I*we,a[15]=j*U+R*Q+D*Z+I*q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],s=e[8],a=e[12],u=e[1],h=e[5],p=e[9],m=e[13],v=e[2],b=e[6],y=e[10],w=e[14],M=e[3],k=e[7],T=e[11],N=e[15],j=p*w-m*y,R=h*w-m*b,D=h*y-p*b,I=u*w-m*v,P=u*y-p*v,z=u*b-h*v;return t*(k*j-T*R+N*D)-n*(M*j-T*I+N*P)+s*(M*R-k*I+N*z)-a*(M*D-k*P+T*z)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],a=e[3],u=e[4],h=e[5],p=e[6],m=e[7],v=e[8],b=e[9],y=e[10],w=e[11],M=e[12],k=e[13],T=e[14],N=e[15],j=b*T*m-k*y*m+k*p*w-h*T*w-b*p*N+h*y*N,R=M*y*m-v*T*m-M*p*w+u*T*w+v*p*N-u*y*N,D=v*k*m-M*b*m+M*h*w-u*k*w-v*h*N+u*b*N,I=M*b*p-v*k*p-M*h*y+u*k*y+v*h*T-u*b*T,P=t*j+n*R+s*D+a*I;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const z=1/P;return e[0]=j*z,e[1]=(k*y*a-b*T*a-k*s*w+n*T*w+b*s*N-n*y*N)*z,e[2]=(h*T*a-k*p*a+k*s*m-n*T*m-h*s*N+n*p*N)*z,e[3]=(b*p*a-h*y*a-b*s*m+n*y*m+h*s*w-n*p*w)*z,e[4]=R*z,e[5]=(v*T*a-M*y*a+M*s*w-t*T*w-v*s*N+t*y*N)*z,e[6]=(M*p*a-u*T*a-M*s*m+t*T*m+u*s*N-t*p*N)*z,e[7]=(u*y*a-v*p*a+v*s*m-t*y*m-u*s*w+t*p*w)*z,e[8]=D*z,e[9]=(M*b*a-v*k*a-M*n*w+t*k*w+v*n*N-t*b*N)*z,e[10]=(u*k*a-M*h*a+M*n*m-t*k*m-u*n*N+t*h*N)*z,e[11]=(v*h*a-u*b*a-v*n*m+t*b*m+u*n*w-t*h*w)*z,e[12]=I*z,e[13]=(v*k*s-M*b*s+M*n*y-t*k*y-v*n*T+t*b*T)*z,e[14]=(M*h*s-u*k*s-M*n*p+t*k*p+u*n*T-t*h*T)*z,e[15]=(u*b*s-v*h*s+v*n*p-t*b*p-u*n*y+t*h*y)*z,this}scale(e){const t=this.elements,n=e.x,s=e.y,a=e.z;return t[0]*=n,t[4]*=s,t[8]*=a,t[1]*=n,t[5]*=s,t[9]*=a,t[2]*=n,t[6]*=s,t[10]*=a,t[3]*=n,t[7]*=s,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,s))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),s=Math.sin(t),a=1-n,u=e.x,h=e.y,p=e.z,m=a*u,v=a*h;return this.set(m*u+n,m*h-s*p,m*p+s*h,0,m*h+s*p,v*h+n,v*p-s*u,0,m*p-s*h,v*p+s*u,a*p*p+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,s,a,u){return this.set(1,n,a,0,e,1,u,0,t,s,1,0,0,0,0,1),this}compose(e,t,n){const s=this.elements,a=t._x,u=t._y,h=t._z,p=t._w,m=a+a,v=u+u,b=h+h,y=a*m,w=a*v,M=a*b,k=u*v,T=u*b,N=h*b,j=p*m,R=p*v,D=p*b,I=n.x,P=n.y,z=n.z;return s[0]=(1-(k+N))*I,s[1]=(w+D)*I,s[2]=(M-R)*I,s[3]=0,s[4]=(w-D)*P,s[5]=(1-(y+N))*P,s[6]=(T+j)*P,s[7]=0,s[8]=(M+R)*z,s[9]=(T-j)*z,s[10]=(1-(y+k))*z,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,n){const s=this.elements;if(e.x=s[12],e.y=s[13],e.z=s[14],this.determinant()===0)return n.set(1,1,1),t.identity(),this;let a=bf.set(s[0],s[1],s[2]).length();const u=bf.set(s[4],s[5],s[6]).length(),h=bf.set(s[8],s[9],s[10]).length();this.determinant()<0&&(a=-a),go.copy(this);const m=1/a,v=1/u,b=1/h;return go.elements[0]*=m,go.elements[1]*=m,go.elements[2]*=m,go.elements[4]*=v,go.elements[5]*=v,go.elements[6]*=v,go.elements[8]*=b,go.elements[9]*=b,go.elements[10]*=b,t.setFromRotationMatrix(go),n.x=a,n.y=u,n.z=h,this}makePerspective(e,t,n,s,a,u,h=oa,p=!1){const m=this.elements,v=2*a/(t-e),b=2*a/(n-s),y=(t+e)/(t-e),w=(n+s)/(n-s);let M,k;if(p)M=a/(u-a),k=u*a/(u-a);else if(h===oa)M=-(u+a)/(u-a),k=-2*u*a/(u-a);else if(h===Jf)M=-u/(u-a),k=-u*a/(u-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+h);return m[0]=v,m[4]=0,m[8]=y,m[12]=0,m[1]=0,m[5]=b,m[9]=w,m[13]=0,m[2]=0,m[6]=0,m[10]=M,m[14]=k,m[3]=0,m[7]=0,m[11]=-1,m[15]=0,this}makeOrthographic(e,t,n,s,a,u,h=oa,p=!1){const m=this.elements,v=2/(t-e),b=2/(n-s),y=-(t+e)/(t-e),w=-(n+s)/(n-s);let M,k;if(p)M=1/(u-a),k=u/(u-a);else if(h===oa)M=-2/(u-a),k=-(u+a)/(u-a);else if(h===Jf)M=-1/(u-a),k=-a/(u-a);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+h);return m[0]=v,m[4]=0,m[8]=0,m[12]=y,m[1]=0,m[5]=b,m[9]=0,m[13]=w,m[2]=0,m[6]=0,m[10]=M,m[14]=k,m[3]=0,m[7]=0,m[11]=0,m[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<16;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const bf=new Y,go=new Xt,pD=new Y(0,0,0),mD=new Y(1,1,1),ru=new Y,Zx=new Y,na=new Y,fE=new Xt,pE=new qr;class da{constructor(e=0,t=0,n=0,s=da.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,s=this._order){return this._x=e,this._y=t,this._z=n,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const s=e.elements,a=s[0],u=s[4],h=s[8],p=s[1],m=s[5],v=s[9],b=s[2],y=s[6],w=s[10];switch(t){case"XYZ":this._y=Math.asin(qt(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-v,w),this._z=Math.atan2(-u,a)):(this._x=Math.atan2(y,m),this._z=0);break;case"YXZ":this._x=Math.asin(-qt(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(h,w),this._z=Math.atan2(p,m)):(this._y=Math.atan2(-b,a),this._z=0);break;case"ZXY":this._x=Math.asin(qt(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-b,w),this._z=Math.atan2(-u,m)):(this._y=0,this._z=Math.atan2(p,a));break;case"ZYX":this._y=Math.asin(-qt(b,-1,1)),Math.abs(b)<.9999999?(this._x=Math.atan2(y,w),this._z=Math.atan2(p,a)):(this._x=0,this._z=Math.atan2(-u,m));break;case"YZX":this._z=Math.asin(qt(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(-v,m),this._y=Math.atan2(-b,a)):(this._x=0,this._y=Math.atan2(h,w));break;case"XZY":this._z=Math.asin(-qt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(y,m),this._y=Math.atan2(h,a)):(this._x=Math.atan2(-v,w),this._y=0);break;default:ut("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return fE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(fE,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return pE.setFromEuler(this),this.setFromQuaternion(pE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}da.DEFAULT_ORDER="XYZ";class tp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let gD=0;const mE=new Y,yf=new qr,Ql=new Xt,Jx=new Y,Hm=new Y,xD=new Y,vD=new qr,gE=new Y(1,0,0),xE=new Y(0,1,0),vE=new Y(0,0,1),bE={type:"added"},bD={type:"removed"},_f={type:"childadded",child:null},K_={type:"childremoved",child:null};class In extends gl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:gD++}),this.uuid=ca(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=In.DEFAULT_UP.clone();const e=new Y,t=new da,n=new qr,s=new Y(1,1,1);function a(){n.setFromEuler(t,!1)}function u(){t.setFromQuaternion(n,void 0,!1)}t._onChange(a),n._onChange(u),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Xt},normalMatrix:{value:new nn}}),this.matrix=new Xt,this.matrixWorld=new Xt,this.matrixAutoUpdate=In.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=In.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new tp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return yf.setFromAxisAngle(e,t),this.quaternion.multiply(yf),this}rotateOnWorldAxis(e,t){return yf.setFromAxisAngle(e,t),this.quaternion.premultiply(yf),this}rotateX(e){return this.rotateOnAxis(gE,e)}rotateY(e){return this.rotateOnAxis(xE,e)}rotateZ(e){return this.rotateOnAxis(vE,e)}translateOnAxis(e,t){return mE.copy(e).applyQuaternion(this.quaternion),this.position.add(mE.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(gE,e)}translateY(e){return this.translateOnAxis(xE,e)}translateZ(e){return this.translateOnAxis(vE,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ql.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Jx.copy(e):Jx.set(e,t,n);const s=this.parent;this.updateWorldMatrix(!0,!1),Hm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ql.lookAt(Hm,Jx,this.up):Ql.lookAt(Jx,Hm,this.up),this.quaternion.setFromRotationMatrix(Ql),s&&(Ql.extractRotation(s.matrixWorld),yf.setFromRotationMatrix(Ql),this.quaternion.premultiply(yf.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(Ct("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(bE),_f.child=e,this.dispatchEvent(_f),_f.child=null):Ct("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(bD),K_.child=e,this.dispatchEvent(K_),K_.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ql.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ql.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ql),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(bE),_f.child=e,this.dispatchEvent(_f),_f.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,s=this.children.length;n<s;n++){const u=this.children[n].getObjectByProperty(e,t);if(u!==void 0)return u}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const s=this.children;for(let a=0,u=s.length;a<u;a++)s[a].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hm,e,xD),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hm,vD,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let a=0,u=s.length;a<u;a++)s[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(h=>({...h,boundingBox:h.boundingBox?h.boundingBox.toJSON():void 0,boundingSphere:h.boundingSphere?h.boundingSphere.toJSON():void 0})),s.instanceInfo=this._instanceInfo.map(h=>({...h})),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(e),s.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(s.boundingBox=this.boundingBox.toJSON()));function a(h,p){return h[p.uuid]===void 0&&(h[p.uuid]=p.toJSON(e)),p.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=a(e.geometries,this.geometry);const h=this.geometry.parameters;if(h!==void 0&&h.shapes!==void 0){const p=h.shapes;if(Array.isArray(p))for(let m=0,v=p.length;m<v;m++){const b=p[m];a(e.shapes,b)}else a(e.shapes,p)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const h=[];for(let p=0,m=this.material.length;p<m;p++)h.push(a(e.materials,this.material[p]));s.material=h}else s.material=a(e.materials,this.material);if(this.children.length>0){s.children=[];for(let h=0;h<this.children.length;h++)s.children.push(this.children[h].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let h=0;h<this.animations.length;h++){const p=this.animations[h];s.animations.push(a(e.animations,p))}}if(t){const h=u(e.geometries),p=u(e.materials),m=u(e.textures),v=u(e.images),b=u(e.shapes),y=u(e.skeletons),w=u(e.animations),M=u(e.nodes);h.length>0&&(n.geometries=h),p.length>0&&(n.materials=p),m.length>0&&(n.textures=m),v.length>0&&(n.images=v),b.length>0&&(n.shapes=b),y.length>0&&(n.skeletons=y),w.length>0&&(n.animations=w),M.length>0&&(n.nodes=M)}return n.object=s,n;function u(h){const p=[];for(const m in h){const v=h[m];delete v.metadata,p.push(v)}return p}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const s=e.children[n];this.add(s.clone())}return this}}In.DEFAULT_UP=new Y(0,1,0);In.DEFAULT_MATRIX_AUTO_UPDATE=!0;In.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const xo=new Y,ec=new Y,Z_=new Y,tc=new Y,wf=new Y,Sf=new Y,yE=new Y,J_=new Y,Q_=new Y,e1=new Y,t1=new Qn,n1=new Qn,i1=new Qn;class Hr{constructor(e=new Y,t=new Y,n=new Y){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,s){s.subVectors(n,t),xo.subVectors(e,t),s.cross(xo);const a=s.lengthSq();return a>0?s.multiplyScalar(1/Math.sqrt(a)):s.set(0,0,0)}static getBarycoord(e,t,n,s,a){xo.subVectors(s,t),ec.subVectors(n,t),Z_.subVectors(e,t);const u=xo.dot(xo),h=xo.dot(ec),p=xo.dot(Z_),m=ec.dot(ec),v=ec.dot(Z_),b=u*m-h*h;if(b===0)return a.set(0,0,0),null;const y=1/b,w=(m*p-h*v)*y,M=(u*v-h*p)*y;return a.set(1-w-M,M,w)}static containsPoint(e,t,n,s){return this.getBarycoord(e,t,n,s,tc)===null?!1:tc.x>=0&&tc.y>=0&&tc.x+tc.y<=1}static getInterpolation(e,t,n,s,a,u,h,p){return this.getBarycoord(e,t,n,s,tc)===null?(p.x=0,p.y=0,"z"in p&&(p.z=0),"w"in p&&(p.w=0),null):(p.setScalar(0),p.addScaledVector(a,tc.x),p.addScaledVector(u,tc.y),p.addScaledVector(h,tc.z),p)}static getInterpolatedAttribute(e,t,n,s,a,u){return t1.setScalar(0),n1.setScalar(0),i1.setScalar(0),t1.fromBufferAttribute(e,t),n1.fromBufferAttribute(e,n),i1.fromBufferAttribute(e,s),u.setScalar(0),u.addScaledVector(t1,a.x),u.addScaledVector(n1,a.y),u.addScaledVector(i1,a.z),u}static isFrontFacing(e,t,n,s){return xo.subVectors(n,t),ec.subVectors(e,t),xo.cross(ec).dot(s)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,s){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,n,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return xo.subVectors(this.c,this.b),ec.subVectors(this.a,this.b),xo.cross(ec).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Hr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Hr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,s,a){return Hr.getInterpolation(e,this.a,this.b,this.c,t,n,s,a)}containsPoint(e){return Hr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Hr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,s=this.b,a=this.c;let u,h;wf.subVectors(s,n),Sf.subVectors(a,n),J_.subVectors(e,n);const p=wf.dot(J_),m=Sf.dot(J_);if(p<=0&&m<=0)return t.copy(n);Q_.subVectors(e,s);const v=wf.dot(Q_),b=Sf.dot(Q_);if(v>=0&&b<=v)return t.copy(s);const y=p*b-v*m;if(y<=0&&p>=0&&v<=0)return u=p/(p-v),t.copy(n).addScaledVector(wf,u);e1.subVectors(e,a);const w=wf.dot(e1),M=Sf.dot(e1);if(M>=0&&w<=M)return t.copy(a);const k=w*m-p*M;if(k<=0&&m>=0&&M<=0)return h=m/(m-M),t.copy(n).addScaledVector(Sf,h);const T=v*M-w*b;if(T<=0&&b-v>=0&&w-M>=0)return yE.subVectors(a,s),h=(b-v)/(b-v+(w-M)),t.copy(s).addScaledVector(yE,h);const N=1/(T+k+y);return u=k*N,h=y*N,t.copy(n).addScaledVector(wf,u).addScaledVector(Sf,h)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const MA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},au={h:0,s:0,l:0},Qx={h:0,s:0,l:0};function s1(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class vt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Js){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Tn.colorSpaceToWorking(this,t),this}setRGB(e,t,n,s=Tn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Tn.colorSpaceToWorking(this,s),this}setHSL(e,t,n,s=Tn.workingColorSpace){if(e=Zw(e,1),t=qt(t,0,1),n=qt(n,0,1),t===0)this.r=this.g=this.b=n;else{const a=n<=.5?n*(1+t):n+t-n*t,u=2*n-a;this.r=s1(u,a,e+1/3),this.g=s1(u,a,e),this.b=s1(u,a,e-1/3)}return Tn.colorSpaceToWorking(this,s),this}setStyle(e,t=Js){function n(a){a!==void 0&&parseFloat(a)<1&&ut("Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const u=s[1],h=s[2];switch(u){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return n(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return n(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return n(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:ut("Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=s[1],u=a.length;if(u===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(u===6)return this.setHex(parseInt(a,16),t);ut("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Js){const n=MA[e.toLowerCase()];return n!==void 0?this.setHex(n,t):ut("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=oc(e.r),this.g=oc(e.g),this.b=oc(e.b),this}copyLinearToSRGB(e){return this.r=$f(e.r),this.g=$f(e.g),this.b=$f(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Js){return Tn.workingToColorSpace(Ks.copy(this),e),Math.round(qt(Ks.r*255,0,255))*65536+Math.round(qt(Ks.g*255,0,255))*256+Math.round(qt(Ks.b*255,0,255))}getHexString(e=Js){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Tn.workingColorSpace){Tn.workingToColorSpace(Ks.copy(this),t);const n=Ks.r,s=Ks.g,a=Ks.b,u=Math.max(n,s,a),h=Math.min(n,s,a);let p,m;const v=(h+u)/2;if(h===u)p=0,m=0;else{const b=u-h;switch(m=v<=.5?b/(u+h):b/(2-u-h),u){case n:p=(s-a)/b+(s<a?6:0);break;case s:p=(a-n)/b+2;break;case a:p=(n-s)/b+4;break}p/=6}return e.h=p,e.s=m,e.l=v,e}getRGB(e,t=Tn.workingColorSpace){return Tn.workingToColorSpace(Ks.copy(this),t),e.r=Ks.r,e.g=Ks.g,e.b=Ks.b,e}getStyle(e=Js){Tn.workingToColorSpace(Ks.copy(this),e);const t=Ks.r,n=Ks.g,s=Ks.b;return e!==Js?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(s*255)})`}offsetHSL(e,t,n){return this.getHSL(au),this.setHSL(au.h+e,au.s+t,au.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(au),e.getHSL(Qx);const n=mg(au.h,Qx.h,t),s=mg(au.s,Qx.s,t),a=mg(au.l,Qx.l,t);return this.setHSL(n,s,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,s=this.b,a=e.elements;return this.r=a[0]*t+a[3]*n+a[6]*s,this.g=a[1]*t+a[4]*n+a[7]*s,this.b=a[2]*t+a[5]*n+a[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ks=new vt;vt.NAMES=MA;let yD=0;class er extends gl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:yD++}),this.uuid=ca(),this.name="",this.type="Material",this.blending=Fd,this.side=cc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Jv,this.blendDst=Qv,this.blendEquation=mu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new vt(0,0,0),this.blendAlpha=0,this.depthFunc=Wd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=lw,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Rd,this.stencilZFail=Rd,this.stencilZPass=Rd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){ut(`Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){ut(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(n):s&&s.isVector3&&n&&n.isVector3?s.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Fd&&(n.blending=this.blending),this.side!==cc&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==Jv&&(n.blendSrc=this.blendSrc),this.blendDst!==Qv&&(n.blendDst=this.blendDst),this.blendEquation!==mu&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Wd&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==lw&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Rd&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Rd&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Rd&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.allowOverride===!1&&(n.allowOverride=!1),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function s(a){const u=[];for(const h in a){const p=a[h];delete p.metadata,u.push(p)}return u}if(t){const a=s(e.textures),u=s(e.images);a.length>0&&(n.textures=a),u.length>0&&(n.images=u)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const s=t.length;n=new Array(s);for(let a=0;a!==s;++a)n[a]=t[a].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Nu extends er{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new da,this.combine=Yg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ac=_D();function _D(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),s=new Uint32Array(512);for(let p=0;p<256;++p){const m=p-127;m<-27?(n[p]=0,n[p|256]=32768,s[p]=24,s[p|256]=24):m<-14?(n[p]=1024>>-m-14,n[p|256]=1024>>-m-14|32768,s[p]=-m-1,s[p|256]=-m-1):m<=15?(n[p]=m+15<<10,n[p|256]=m+15<<10|32768,s[p]=13,s[p|256]=13):m<128?(n[p]=31744,n[p|256]=64512,s[p]=24,s[p|256]=24):(n[p]=31744,n[p|256]=64512,s[p]=13,s[p|256]=13)}const a=new Uint32Array(2048),u=new Uint32Array(64),h=new Uint32Array(64);for(let p=1;p<1024;++p){let m=p<<13,v=0;for(;(m&8388608)===0;)m<<=1,v-=8388608;m&=-8388609,v+=947912704,a[p]=m|v}for(let p=1024;p<2048;++p)a[p]=939524096+(p-1024<<13);for(let p=1;p<31;++p)u[p]=p<<23;u[31]=1199570944,u[32]=2147483648;for(let p=33;p<63;++p)u[p]=2147483648+(p-32<<23);u[63]=3347054592;for(let p=1;p<64;++p)p!==32&&(h[p]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:s,mantissaTable:a,exponentTable:u,offsetTable:h}}function Fr(i){Math.abs(i)>65504&&ut("DataUtils.toHalfFloat(): Value out of range."),i=qt(i,-65504,65504),ac.floatView[0]=i;const e=ac.uint32View[0],t=e>>23&511;return ac.baseTable[t]+((e&8388607)>>ac.shiftTable[t])}function sg(i){const e=i>>10;return ac.uint32View[0]=ac.mantissaTable[ac.offsetTable[e]+(i&1023)]+ac.exponentTable[e],ac.floatView[0]}class wD{static toHalfFloat(e){return Fr(e)}static fromHalfFloat(e){return sg(e)}}const es=new Y,ev=new ze;let SD=0;class Kn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:SD++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=Og,this.updateRanges=[],this.gpuType=ys,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let s=0,a=this.itemSize;s<a;s++)this.array[e+s]=t.array[n+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)ev.fromBufferAttribute(this,t),ev.applyMatrix3(e),this.setXY(t,ev.x,ev.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)es.fromBufferAttribute(this,t),es.applyMatrix3(e),this.setXYZ(t,es.x,es.y,es.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)es.fromBufferAttribute(this,t),es.applyMatrix4(e),this.setXYZ(t,es.x,es.y,es.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)es.fromBufferAttribute(this,t),es.applyNormalMatrix(e),this.setXYZ(t,es.x,es.y,es.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)es.fromBufferAttribute(this,t),es.transformDirection(e),this.setXYZ(t,es.x,es.y,es.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=vr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=ln(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=vr(t,this.array)),t}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=vr(t,this.array)),t}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=vr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=vr(t,this.array)),t}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array),s=ln(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this}setXYZW(e,t,n,s,a){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array),s=ln(s,this.array),a=ln(a,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Og&&(e.usage=this.usage),e}}class MD extends Kn{constructor(e,t,n){super(new Int8Array(e),t,n)}}class ED extends Kn{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class ND extends Kn{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class TD extends Kn{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Qw extends Kn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class AD extends Kn{constructor(e,t,n){super(new Int32Array(e),t,n)}}class eS extends Kn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class kD extends Kn{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=sg(this.array[e*this.itemSize]);return this.normalized&&(t=vr(t,this.array)),t}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize]=Fr(t),this}getY(e){let t=sg(this.array[e*this.itemSize+1]);return this.normalized&&(t=vr(t,this.array)),t}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+1]=Fr(t),this}getZ(e){let t=sg(this.array[e*this.itemSize+2]);return this.normalized&&(t=vr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+2]=Fr(t),this}getW(e){let t=sg(this.array[e*this.itemSize+3]);return this.normalized&&(t=vr(t,this.array)),t}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+3]=Fr(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array)),this.array[e+0]=Fr(t),this.array[e+1]=Fr(n),this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array),s=ln(s,this.array)),this.array[e+0]=Fr(t),this.array[e+1]=Fr(n),this.array[e+2]=Fr(s),this}setXYZW(e,t,n,s,a){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array),s=ln(s,this.array),a=ln(a,this.array)),this.array[e+0]=Fr(t),this.array[e+1]=Fr(n),this.array[e+2]=Fr(s),this.array[e+3]=Fr(a),this}}class wt extends Kn{constructor(e,t,n){super(new Float32Array(e),t,n)}}let CD=0;const Ua=new Xt,r1=new In,Mf=new Y,ia=new Qs,Gm=new Qs,vs=new Y;class Qt extends gl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:CD++}),this.uuid=ca(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(yA(e)?eS:Qw)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const a=new nn().getNormalMatrix(e);n.applyNormalMatrix(a),n.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ua.makeRotationFromQuaternion(e),this.applyMatrix4(Ua),this}rotateX(e){return Ua.makeRotationX(e),this.applyMatrix4(Ua),this}rotateY(e){return Ua.makeRotationY(e),this.applyMatrix4(Ua),this}rotateZ(e){return Ua.makeRotationZ(e),this.applyMatrix4(Ua),this}translate(e,t,n){return Ua.makeTranslation(e,t,n),this.applyMatrix4(Ua),this}scale(e,t,n){return Ua.makeScale(e,t,n),this.applyMatrix4(Ua),this}lookAt(e){return r1.lookAt(e),r1.updateMatrix(),this.applyMatrix4(r1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Mf).negate(),this.translate(Mf.x,Mf.y,Mf.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let s=0,a=e.length;s<a;s++){const u=e[s];n.push(u.x,u.y,u.z||0)}this.setAttribute("position",new wt(n,3))}else{const n=Math.min(e.length,t.count);for(let s=0;s<n;s++){const a=e[s];t.setXYZ(s,a.x,a.y,a.z||0)}e.length>t.count&&ut("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Qs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Ct("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Y(-1/0,-1/0,-1/0),new Y(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++){const a=t[n];ia.setFromBufferAttribute(a),this.morphTargetsRelative?(vs.addVectors(this.boundingBox.min,ia.min),this.boundingBox.expandByPoint(vs),vs.addVectors(this.boundingBox.max,ia.max),this.boundingBox.expandByPoint(vs)):(this.boundingBox.expandByPoint(ia.min),this.boundingBox.expandByPoint(ia.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Ct('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ls);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Ct("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Y,1/0);return}if(e){const n=this.boundingSphere.center;if(ia.setFromBufferAttribute(e),t)for(let a=0,u=t.length;a<u;a++){const h=t[a];Gm.setFromBufferAttribute(h),this.morphTargetsRelative?(vs.addVectors(ia.min,Gm.min),ia.expandByPoint(vs),vs.addVectors(ia.max,Gm.max),ia.expandByPoint(vs)):(ia.expandByPoint(Gm.min),ia.expandByPoint(Gm.max))}ia.getCenter(n);let s=0;for(let a=0,u=e.count;a<u;a++)vs.fromBufferAttribute(e,a),s=Math.max(s,n.distanceToSquared(vs));if(t)for(let a=0,u=t.length;a<u;a++){const h=t[a],p=this.morphTargetsRelative;for(let m=0,v=h.count;m<v;m++)vs.fromBufferAttribute(h,m),p&&(Mf.fromBufferAttribute(e,m),vs.add(Mf)),s=Math.max(s,n.distanceToSquared(vs))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&Ct('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){Ct("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,s=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Kn(new Float32Array(4*n.count),4));const u=this.getAttribute("tangent"),h=[],p=[];for(let G=0;G<n.count;G++)h[G]=new Y,p[G]=new Y;const m=new Y,v=new Y,b=new Y,y=new ze,w=new ze,M=new ze,k=new Y,T=new Y;function N(G,U,L){m.fromBufferAttribute(n,G),v.fromBufferAttribute(n,U),b.fromBufferAttribute(n,L),y.fromBufferAttribute(a,G),w.fromBufferAttribute(a,U),M.fromBufferAttribute(a,L),v.sub(m),b.sub(m),w.sub(y),M.sub(y);const W=1/(w.x*M.y-M.x*w.y);isFinite(W)&&(k.copy(v).multiplyScalar(M.y).addScaledVector(b,-w.y).multiplyScalar(W),T.copy(b).multiplyScalar(w.x).addScaledVector(v,-M.x).multiplyScalar(W),h[G].add(k),h[U].add(k),h[L].add(k),p[G].add(T),p[U].add(T),p[L].add(T))}let j=this.groups;j.length===0&&(j=[{start:0,count:e.count}]);for(let G=0,U=j.length;G<U;++G){const L=j[G],W=L.start,J=L.count;for(let Q=W,ue=W+J;Q<ue;Q+=3)N(e.getX(Q+0),e.getX(Q+1),e.getX(Q+2))}const R=new Y,D=new Y,I=new Y,P=new Y;function z(G){I.fromBufferAttribute(s,G),P.copy(I);const U=h[G];R.copy(U),R.sub(I.multiplyScalar(I.dot(U))).normalize(),D.crossVectors(P,U);const W=D.dot(p[G])<0?-1:1;u.setXYZW(G,R.x,R.y,R.z,W)}for(let G=0,U=j.length;G<U;++G){const L=j[G],W=L.start,J=L.count;for(let Q=W,ue=W+J;Q<ue;Q+=3)z(e.getX(Q+0)),z(e.getX(Q+1)),z(e.getX(Q+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Kn(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let y=0,w=n.count;y<w;y++)n.setXYZ(y,0,0,0);const s=new Y,a=new Y,u=new Y,h=new Y,p=new Y,m=new Y,v=new Y,b=new Y;if(e)for(let y=0,w=e.count;y<w;y+=3){const M=e.getX(y+0),k=e.getX(y+1),T=e.getX(y+2);s.fromBufferAttribute(t,M),a.fromBufferAttribute(t,k),u.fromBufferAttribute(t,T),v.subVectors(u,a),b.subVectors(s,a),v.cross(b),h.fromBufferAttribute(n,M),p.fromBufferAttribute(n,k),m.fromBufferAttribute(n,T),h.add(v),p.add(v),m.add(v),n.setXYZ(M,h.x,h.y,h.z),n.setXYZ(k,p.x,p.y,p.z),n.setXYZ(T,m.x,m.y,m.z)}else for(let y=0,w=t.count;y<w;y+=3)s.fromBufferAttribute(t,y+0),a.fromBufferAttribute(t,y+1),u.fromBufferAttribute(t,y+2),v.subVectors(u,a),b.subVectors(s,a),v.cross(b),n.setXYZ(y+0,v.x,v.y,v.z),n.setXYZ(y+1,v.x,v.y,v.z),n.setXYZ(y+2,v.x,v.y,v.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)vs.fromBufferAttribute(e,t),vs.normalize(),e.setXYZ(t,vs.x,vs.y,vs.z)}toNonIndexed(){function e(h,p){const m=h.array,v=h.itemSize,b=h.normalized,y=new m.constructor(p.length*v);let w=0,M=0;for(let k=0,T=p.length;k<T;k++){h.isInterleavedBufferAttribute?w=p[k]*h.data.stride+h.offset:w=p[k]*v;for(let N=0;N<v;N++)y[M++]=m[w++]}return new Kn(y,v,b)}if(this.index===null)return ut("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Qt,n=this.index.array,s=this.attributes;for(const h in s){const p=s[h],m=e(p,n);t.setAttribute(h,m)}const a=this.morphAttributes;for(const h in a){const p=[],m=a[h];for(let v=0,b=m.length;v<b;v++){const y=m[v],w=e(y,n);p.push(w)}t.morphAttributes[h]=p}t.morphTargetsRelative=this.morphTargetsRelative;const u=this.groups;for(let h=0,p=u.length;h<p;h++){const m=u[h];t.addGroup(m.start,m.count,m.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const p=this.parameters;for(const m in p)p[m]!==void 0&&(e[m]=p[m]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const p in n){const m=n[p];e.data.attributes[p]=m.toJSON(e.data)}const s={};let a=!1;for(const p in this.morphAttributes){const m=this.morphAttributes[p],v=[];for(let b=0,y=m.length;b<y;b++){const w=m[b];v.push(w.toJSON(e.data))}v.length>0&&(s[p]=v,a=!0)}a&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const u=this.groups;u.length>0&&(e.data.groups=JSON.parse(JSON.stringify(u)));const h=this.boundingSphere;return h!==null&&(e.data.boundingSphere=h.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const s=e.attributes;for(const m in s){const v=s[m];this.setAttribute(m,v.clone(t))}const a=e.morphAttributes;for(const m in a){const v=[],b=a[m];for(let y=0,w=b.length;y<w;y++)v.push(b[y].clone(t));this.morphAttributes[m]=v}this.morphTargetsRelative=e.morphTargetsRelative;const u=e.groups;for(let m=0,v=u.length;m<v;m++){const b=u[m];this.addGroup(b.start,b.count,b.materialIndex)}const h=e.boundingBox;h!==null&&(this.boundingBox=h.clone());const p=e.boundingSphere;return p!==null&&(this.boundingSphere=p.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _E=new Xt,vd=new lp,tv=new Ls,wE=new Y,nv=new Y,iv=new Y,sv=new Y,a1=new Y,rv=new Y,SE=new Y,av=new Y;class ns extends In{constructor(e=new Qt,t=new Nu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,u=s.length;a<u;a++){const h=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=a}}}}getVertexPosition(e,t){const n=this.geometry,s=n.attributes.position,a=n.morphAttributes.position,u=n.morphTargetsRelative;t.fromBufferAttribute(s,e);const h=this.morphTargetInfluences;if(a&&h){rv.set(0,0,0);for(let p=0,m=a.length;p<m;p++){const v=h[p],b=a[p];v!==0&&(a1.fromBufferAttribute(b,e),u?rv.addScaledVector(a1,v):rv.addScaledVector(a1.sub(t),v))}t.add(rv)}return t}raycast(e,t){const n=this.geometry,s=this.material,a=this.matrixWorld;s!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),tv.copy(n.boundingSphere),tv.applyMatrix4(a),vd.copy(e.ray).recast(e.near),!(tv.containsPoint(vd.origin)===!1&&(vd.intersectSphere(tv,wE)===null||vd.origin.distanceToSquared(wE)>(e.far-e.near)**2))&&(_E.copy(a).invert(),vd.copy(e.ray).applyMatrix4(_E),!(n.boundingBox!==null&&vd.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,vd)))}_computeIntersections(e,t,n){let s;const a=this.geometry,u=this.material,h=a.index,p=a.attributes.position,m=a.attributes.uv,v=a.attributes.uv1,b=a.attributes.normal,y=a.groups,w=a.drawRange;if(h!==null)if(Array.isArray(u))for(let M=0,k=y.length;M<k;M++){const T=y[M],N=u[T.materialIndex],j=Math.max(T.start,w.start),R=Math.min(h.count,Math.min(T.start+T.count,w.start+w.count));for(let D=j,I=R;D<I;D+=3){const P=h.getX(D),z=h.getX(D+1),G=h.getX(D+2);s=ov(this,N,e,n,m,v,b,P,z,G),s&&(s.faceIndex=Math.floor(D/3),s.face.materialIndex=T.materialIndex,t.push(s))}}else{const M=Math.max(0,w.start),k=Math.min(h.count,w.start+w.count);for(let T=M,N=k;T<N;T+=3){const j=h.getX(T),R=h.getX(T+1),D=h.getX(T+2);s=ov(this,u,e,n,m,v,b,j,R,D),s&&(s.faceIndex=Math.floor(T/3),t.push(s))}}else if(p!==void 0)if(Array.isArray(u))for(let M=0,k=y.length;M<k;M++){const T=y[M],N=u[T.materialIndex],j=Math.max(T.start,w.start),R=Math.min(p.count,Math.min(T.start+T.count,w.start+w.count));for(let D=j,I=R;D<I;D+=3){const P=D,z=D+1,G=D+2;s=ov(this,N,e,n,m,v,b,P,z,G),s&&(s.faceIndex=Math.floor(D/3),s.face.materialIndex=T.materialIndex,t.push(s))}}else{const M=Math.max(0,w.start),k=Math.min(p.count,w.start+w.count);for(let T=M,N=k;T<N;T+=3){const j=T,R=T+1,D=T+2;s=ov(this,u,e,n,m,v,b,j,R,D),s&&(s.faceIndex=Math.floor(T/3),t.push(s))}}}}function RD(i,e,t,n,s,a,u,h){let p;if(e.side===br?p=n.intersectTriangle(u,a,s,!0,h):p=n.intersectTriangle(s,a,u,e.side===cc,h),p===null)return null;av.copy(h),av.applyMatrix4(i.matrixWorld);const m=t.ray.origin.distanceTo(av);return m<t.near||m>t.far?null:{distance:m,point:av.clone(),object:i}}function ov(i,e,t,n,s,a,u,h,p,m){i.getVertexPosition(h,nv),i.getVertexPosition(p,iv),i.getVertexPosition(m,sv);const v=RD(i,e,t,n,nv,iv,sv,SE);if(v){const b=new Y;Hr.getBarycoord(SE,nv,iv,sv,b),s&&(v.uv=Hr.getInterpolatedAttribute(s,h,p,m,b,new ze)),a&&(v.uv1=Hr.getInterpolatedAttribute(a,h,p,m,b,new ze)),u&&(v.normal=Hr.getInterpolatedAttribute(u,h,p,m,b,new Y),v.normal.dot(n.direction)>0&&v.normal.multiplyScalar(-1));const y={a:h,b:p,c:m,normal:new Y,materialIndex:0};Hr.getNormal(nv,iv,sv,y.normal),v.face=y,v.barycoord=b}return v}class Jd extends Qt{constructor(e=1,t=1,n=1,s=1,a=1,u=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:s,heightSegments:a,depthSegments:u};const h=this;s=Math.floor(s),a=Math.floor(a),u=Math.floor(u);const p=[],m=[],v=[],b=[];let y=0,w=0;M("z","y","x",-1,-1,n,t,e,u,a,0),M("z","y","x",1,-1,n,t,-e,u,a,1),M("x","z","y",1,1,e,n,t,s,u,2),M("x","z","y",1,-1,e,n,-t,s,u,3),M("x","y","z",1,-1,e,t,n,s,a,4),M("x","y","z",-1,-1,e,t,-n,s,a,5),this.setIndex(p),this.setAttribute("position",new wt(m,3)),this.setAttribute("normal",new wt(v,3)),this.setAttribute("uv",new wt(b,2));function M(k,T,N,j,R,D,I,P,z,G,U){const L=D/z,W=I/G,J=D/2,Q=I/2,ue=P/2,ne=z+1,X=G+1;let Z=0,re=0;const pe=new Y;for(let we=0;we<X;we++){const q=we*W-Q;for(let ce=0;ce<ne;ce++){const Ee=ce*L-J;pe[k]=Ee*j,pe[T]=q*R,pe[N]=ue,m.push(pe.x,pe.y,pe.z),pe[k]=0,pe[T]=0,pe[N]=P>0?1:-1,v.push(pe.x,pe.y,pe.z),b.push(ce/z),b.push(1-we/G),Z+=1}}for(let we=0;we<G;we++)for(let q=0;q<z;q++){const ce=y+q+ne*we,Ee=y+q+ne*(we+1),Pe=y+(q+1)+ne*(we+1),rt=y+(q+1)+ne*we;p.push(ce,Ee,rt),p.push(Ee,Pe,rt),re+=6}h.addGroup(w,re,U),w+=re,y+=Z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function np(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const s=i[t][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(ut("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=s.clone():Array.isArray(s)?e[t][n]=s.slice():e[t][n]=s}}return e}function gr(i){const e={};for(let t=0;t<i.length;t++){const n=np(i[t]);for(const s in n)e[s]=n[s]}return e}function jD(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function EA(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Tn.workingColorSpace}const NA={clone:np,merge:gr};var DD=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,ID=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Xr extends er{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=DD,this.fragmentShader=ID,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=np(e.uniforms),this.uniformsGroups=jD(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const u=this.uniforms[s].value;u&&u.isTexture?t.uniforms[s]={type:"t",value:u.toJSON(e).uuid}:u&&u.isColor?t.uniforms[s]={type:"c",value:u.getHex()}:u&&u.isVector2?t.uniforms[s]={type:"v2",value:u.toArray()}:u&&u.isVector3?t.uniforms[s]={type:"v3",value:u.toArray()}:u&&u.isVector4?t.uniforms[s]={type:"v4",value:u.toArray()}:u&&u.isMatrix3?t.uniforms[s]={type:"m3",value:u.toArray()}:u&&u.isMatrix4?t.uniforms[s]={type:"m4",value:u.toArray()}:t.uniforms[s]={value:u}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const s in this.extensions)this.extensions[s]===!0&&(n[s]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class vy extends In{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Xt,this.projectionMatrix=new Xt,this.projectionMatrixInverse=new Xt,this.coordinateSystem=oa,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const ou=new Y,ME=new ze,EE=new ze;class bs extends vy{constructor(e=50,t=1,n=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=ep*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Vd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return ep*2*Math.atan(Math.tan(Vd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){ou.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(ou.x,ou.y).multiplyScalar(-e/ou.z),ou.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(ou.x,ou.y).multiplyScalar(-e/ou.z)}getViewSize(e,t){return this.getViewBounds(e,ME,EE),t.subVectors(EE,ME)}setViewOffset(e,t,n,s,a,u){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=a,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Vd*.5*this.fov)/this.zoom,n=2*t,s=this.aspect*n,a=-.5*s;const u=this.view;if(this.view!==null&&this.view.enabled){const p=u.fullWidth,m=u.fullHeight;a+=u.offsetX*s/p,t-=u.offsetY*n/m,s*=u.width/p,n*=u.height/m}const h=this.filmOffset;h!==0&&(a+=e*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+s,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Ef=-90,Nf=1;class TA extends In{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new bs(Ef,Nf,e,t);s.layers=this.layers,this.add(s);const a=new bs(Ef,Nf,e,t);a.layers=this.layers,this.add(a);const u=new bs(Ef,Nf,e,t);u.layers=this.layers,this.add(u);const h=new bs(Ef,Nf,e,t);h.layers=this.layers,this.add(h);const p=new bs(Ef,Nf,e,t);p.layers=this.layers,this.add(p);const m=new bs(Ef,Nf,e,t);m.layers=this.layers,this.add(m)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,s,a,u,h,p]=t;for(const m of t)this.remove(m);if(e===oa)n.up.set(0,1,0),n.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),u.up.set(0,0,1),u.lookAt(0,-1,0),h.up.set(0,1,0),h.lookAt(0,0,1),p.up.set(0,1,0),p.lookAt(0,0,-1);else if(e===Jf)n.up.set(0,-1,0),n.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),u.up.set(0,0,-1),u.lookAt(0,-1,0),h.up.set(0,-1,0),h.lookAt(0,0,1),p.up.set(0,-1,0),p.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const m of t)this.add(m),m.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,u,h,p,m,v]=this.children,b=e.getRenderTarget(),y=e.getActiveCubeFace(),w=e.getActiveMipmapLevel(),M=e.xr.enabled;e.xr.enabled=!1;const k=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,s),e.render(t,a),e.setRenderTarget(n,1,s),e.render(t,u),e.setRenderTarget(n,2,s),e.render(t,h),e.setRenderTarget(n,3,s),e.render(t,p),e.setRenderTarget(n,4,s),e.render(t,m),n.texture.generateMipmaps=k,e.setRenderTarget(n,5,s),e.render(t,v),e.setRenderTarget(b,y,w),e.xr.enabled=M,n.texture.needsPMREMUpdate=!0}}class Zg extends Ui{constructor(e=[],t=fl,n,s,a,u,h,p,m,v){super(e,t,n,s,a,u,h,p,m,v),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class tS extends Wr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},s=[n,n,n,n,n,n];this.texture=new Zg(s),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new Jd(5,5,5),a=new Xr({name:"CubemapFromEquirect",uniforms:np(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:br,blending:dl});a.uniforms.tEquirect.value=t;const u=new ns(s,a),h=t.minFilter;return t.minFilter===cl&&(t.minFilter=ei),new TA(1,10,this).update(e,u),t.minFilter=h,u.geometry.dispose(),u.material.dispose(),this}clear(e,t=!0,n=!0,s=!0){const a=e.getRenderTarget();for(let u=0;u<6;u++)e.setRenderTarget(this,u),e.clear(t,n,s);e.setRenderTarget(a)}}class qf extends In{constructor(){super(),this.isGroup=!0,this.type="Group"}}const OD={type:"move"};class Fv{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new qf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new qf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Y,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Y),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new qf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Y,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Y),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let s=null,a=null,u=null;const h=this._targetRay,p=this._grip,m=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(m&&e.hand){u=!0;for(const k of e.hand.values()){const T=t.getJointPose(k,n),N=this._getHandJoint(m,k);T!==null&&(N.matrix.fromArray(T.transform.matrix),N.matrix.decompose(N.position,N.rotation,N.scale),N.matrixWorldNeedsUpdate=!0,N.jointRadius=T.radius),N.visible=T!==null}const v=m.joints["index-finger-tip"],b=m.joints["thumb-tip"],y=v.position.distanceTo(b.position),w=.02,M=.005;m.inputState.pinching&&y>w+M?(m.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!m.inputState.pinching&&y<=w-M&&(m.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else p!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,n),a!==null&&(p.matrix.fromArray(a.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,a.linearVelocity?(p.hasLinearVelocity=!0,p.linearVelocity.copy(a.linearVelocity)):p.hasLinearVelocity=!1,a.angularVelocity?(p.hasAngularVelocity=!0,p.angularVelocity.copy(a.angularVelocity)):p.hasAngularVelocity=!1));h!==null&&(s=t.getPose(e.targetRaySpace,n),s===null&&a!==null&&(s=a),s!==null&&(h.matrix.fromArray(s.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,s.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(s.linearVelocity)):h.hasLinearVelocity=!1,s.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(s.angularVelocity)):h.hasAngularVelocity=!1,this.dispatchEvent(OD)))}return h!==null&&(h.visible=s!==null),p!==null&&(p.visible=a!==null),m!==null&&(m.visible=u!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new qf;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class by{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new vt(e),this.density=t}clone(){return new by(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class yy{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new vt(e),this.near=t,this.far=n}clone(){return new yy(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class _y extends In{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new da,this.environmentIntensity=1,this.environmentRotation=new da,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class wy{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Og,this.updateRanges=[],this.version=0,this.uuid=ca()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let s=0,a=this.stride;s<a;s++)this.array[e+s]=t.array[n+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ca()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ca()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const mr=new Y;class $d{constructor(e,t,n,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)mr.fromBufferAttribute(this,t),mr.applyMatrix4(e),this.setXYZ(t,mr.x,mr.y,mr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)mr.fromBufferAttribute(this,t),mr.applyNormalMatrix(e),this.setXYZ(t,mr.x,mr.y,mr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)mr.fromBufferAttribute(this,t),mr.transformDirection(e),this.setXYZ(t,mr.x,mr.y,mr.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=vr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=ln(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=vr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=vr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=vr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=vr(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array),s=ln(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this}setXYZW(e,t,n,s,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array),s=ln(s,this.array),a=ln(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this.data.array[e+3]=a,this}clone(e){if(e===void 0){Ug("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[s+a])}return new Kn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new $d(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){Ug("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[s+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class nS extends er{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new vt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Tf;const qm=new Y,Af=new Y,kf=new Y,Cf=new ze,Wm=new ze,AA=new Xt,lv=new Y,Xm=new Y,cv=new Y,NE=new ze,o1=new ze,TE=new ze;class kA extends In{constructor(e=new nS){if(super(),this.isSprite=!0,this.type="Sprite",Tf===void 0){Tf=new Qt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new wy(t,5);Tf.setIndex([0,1,2,0,2,3]),Tf.setAttribute("position",new $d(n,3,0,!1)),Tf.setAttribute("uv",new $d(n,2,3,!1))}this.geometry=Tf,this.material=e,this.center=new ze(.5,.5),this.count=1}raycast(e,t){e.camera===null&&Ct('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Af.setFromMatrixScale(this.matrixWorld),AA.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),kf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Af.multiplyScalar(-kf.z);const n=this.material.rotation;let s,a;n!==0&&(a=Math.cos(n),s=Math.sin(n));const u=this.center;uv(lv.set(-.5,-.5,0),kf,u,Af,s,a),uv(Xm.set(.5,-.5,0),kf,u,Af,s,a),uv(cv.set(.5,.5,0),kf,u,Af,s,a),NE.set(0,0),o1.set(1,0),TE.set(1,1);let h=e.ray.intersectTriangle(lv,Xm,cv,!1,qm);if(h===null&&(uv(Xm.set(-.5,.5,0),kf,u,Af,s,a),o1.set(0,1),h=e.ray.intersectTriangle(lv,cv,Xm,!1,qm),h===null))return;const p=e.ray.origin.distanceTo(qm);p<e.near||p>e.far||t.push({distance:p,point:qm.clone(),uv:Hr.getInterpolation(qm,lv,Xm,cv,NE,o1,TE,new ze),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function uv(i,e,t,n,s,a){Cf.subVectors(i,t).addScalar(.5).multiply(n),s!==void 0?(Wm.x=a*Cf.x-s*Cf.y,Wm.y=s*Cf.x+a*Cf.y):Wm.copy(Cf),i.copy(e),i.x+=Wm.x,i.y+=Wm.y,i.applyMatrix4(AA)}const dv=new Y,AE=new Y;class CA extends In{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,s=t.length;n<s;n++){const a=t[n];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const s=this.levels;let a;for(a=0;a<s.length&&!(t<s[a].distance);a++);return s.splice(a,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const s=t.splice(n,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,s;for(n=1,s=t.length;n<s;n++){let a=t[n].distance;if(t[n].object.visible&&(a-=a*t[n].hysteresis),e<a)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){dv.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(dv);this.getObjectForDistance(s).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){dv.setFromMatrixPosition(e.matrixWorld),AE.setFromMatrixPosition(this.matrixWorld);const n=dv.distanceTo(AE)/e.zoom;t[0].object.visible=!0;let s,a;for(s=1,a=t.length;s<a;s++){let u=t[s].distance;if(t[s].object.visible&&(u-=u*t[s].hysteresis),n>=u)t[s-1].object.visible=!1,t[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<a;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let s=0,a=n.length;s<a;s++){const u=n[s];t.object.levels.push({object:u.object.uuid,distance:u.distance,hysteresis:u.hysteresis})}return t}}const kE=new Y,CE=new Qn,RE=new Qn,LD=new Y,jE=new Xt,hv=new Y,l1=new Ls,DE=new Xt,c1=new lp;class RA extends ns{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=ow,this.bindMatrix=new Xt,this.bindMatrixInverse=new Xt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Qs),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,hv),this.boundingBox.expandByPoint(hv)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ls),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,hv),this.boundingSphere.expandByPoint(hv)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,s=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),l1.copy(this.boundingSphere),l1.applyMatrix4(s),e.ray.intersectsSphere(l1)!==!1&&(DE.copy(s).invert(),c1.copy(e.ray).applyMatrix4(DE),!(this.boundingBox!==null&&c1.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,c1)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Qn,t=this.geometry.attributes.skinWeight;for(let n=0,s=t.count;n<s;n++){e.fromBufferAttribute(t,n);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===ow?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===lA?this.bindMatrixInverse.copy(this.bindMatrix).invert():ut("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,s=this.geometry;CE.fromBufferAttribute(s.attributes.skinIndex,e),RE.fromBufferAttribute(s.attributes.skinWeight,e),kE.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const u=RE.getComponent(a);if(u!==0){const h=CE.getComponent(a);jE.multiplyMatrices(n.bones[h].matrixWorld,n.boneInverses[h]),t.addScaledVector(LD.copy(kE).applyMatrix4(jE),u)}}return t.applyMatrix4(this.bindMatrixInverse)}}class iS extends In{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Va extends Ui{constructor(e=null,t=1,n=1,s,a,u,h,p,m=Ai,v=Ai,b,y){super(null,u,h,p,m,v,s,a,b,y),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const IE=new Xt,UD=new Xt;class Sy{constructor(e=[],t=[]){this.uuid=ca(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){ut("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,s=this.bones.length;n<s;n++)this.boneInverses.push(new Xt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Xt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,s=this.boneTexture;for(let a=0,u=e.length;a<u;a++){const h=e[a]?e[a].matrixWorld:UD;IE.multiplyMatrices(h,t[a]),IE.toArray(n,a*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new Sy(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Va(t,e,e,_s,ys);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,s=e.bones.length;n<s;n++){const a=e.bones[n];let u=t[a];u===void 0&&(ut("Skeleton: No bone found with UUID:",a),u=new iS),this.bones.push(u),this.boneInverses.push(new Xt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let s=0,a=t.length;s<a;s++){const u=t[s];e.bones.push(u.uuid);const h=n[s];e.boneInverses.push(h.toArray())}return e}}class ip extends Kn{constructor(e,t,n,s=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Rf=new Xt,OE=new Xt,fv=[],LE=new Qs,PD=new Xt,$m=new ns,Ym=new Ls;class jA extends ns{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ip(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<n;s++)this.setMatrixAt(s,PD)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Qs),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Rf),LE.copy(e.boundingBox).applyMatrix4(Rf),this.boundingBox.union(LE)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ls),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Rf),Ym.copy(e.boundingSphere).applyMatrix4(Rf),this.boundingSphere.union(Ym)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,s=this.morphTexture.source.data.data,a=n.length+1,u=e*a+1;for(let h=0;h<n.length;h++)n[h]=s[u+h]}raycast(e,t){const n=this.matrixWorld,s=this.count;if($m.geometry=this.geometry,$m.material=this.material,$m.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Ym.copy(this.boundingSphere),Ym.applyMatrix4(n),e.ray.intersectsSphere(Ym)!==!1))for(let a=0;a<s;a++){this.getMatrixAt(a,Rf),OE.multiplyMatrices(n,Rf),$m.matrixWorld=OE,$m.raycast(e,fv);for(let u=0,h=fv.length;u<h;u++){const p=fv[u];p.instanceId=a,p.object=this,t.push(p)}fv.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new ip(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,s=n.length+1;this.morphTexture===null&&(this.morphTexture=new Va(new Float32Array(s*this.count),s,this.count,uy,ys));const a=this.morphTexture.source.data.data;let u=0;for(let m=0;m<n.length;m++)u+=n[m];const h=this.geometry.morphTargetsRelative?1:1-u,p=s*e;a[p]=h,a.set(n,p+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const u1=new Y,zD=new Y,BD=new nn;class fu{constructor(e=new Y(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,s){return this.normal.set(e,t,n),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const s=u1.subVectors(n,t).cross(zD.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(u1),s=this.normal.dot(n);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/s;return a<0||a>1?null:t.copy(e.start).addScaledVector(n,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||BD.getNormalMatrix(e),s=this.coplanarPoint(u1).applyMatrix4(e),a=this.normal.applyMatrix3(n).normalize();return this.constant=-s.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const bd=new Ls,FD=new ze(.5,.5),pv=new Y;class cp{constructor(e=new fu,t=new fu,n=new fu,s=new fu,a=new fu,u=new fu){this.planes=[e,t,n,s,a,u]}set(e,t,n,s,a,u){const h=this.planes;return h[0].copy(e),h[1].copy(t),h[2].copy(n),h[3].copy(s),h[4].copy(a),h[5].copy(u),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=oa,n=!1){const s=this.planes,a=e.elements,u=a[0],h=a[1],p=a[2],m=a[3],v=a[4],b=a[5],y=a[6],w=a[7],M=a[8],k=a[9],T=a[10],N=a[11],j=a[12],R=a[13],D=a[14],I=a[15];if(s[0].setComponents(m-u,w-v,N-M,I-j).normalize(),s[1].setComponents(m+u,w+v,N+M,I+j).normalize(),s[2].setComponents(m+h,w+b,N+k,I+R).normalize(),s[3].setComponents(m-h,w-b,N-k,I-R).normalize(),n)s[4].setComponents(p,y,T,D).normalize(),s[5].setComponents(m-p,w-y,N-T,I-D).normalize();else if(s[4].setComponents(m-p,w-y,N-T,I-D).normalize(),t===oa)s[5].setComponents(m+p,w+y,N+T,I+D).normalize();else if(t===Jf)s[5].setComponents(p,y,T,D).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),bd.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),bd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(bd)}intersectsSprite(e){bd.center.set(0,0,0);const t=FD.distanceTo(e.center);return bd.radius=.7071067811865476+t,bd.applyMatrix4(e.matrixWorld),this.intersectsSphere(bd)}intersectsSphere(e){const t=this.planes,n=e.center,s=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(n)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const s=t[n];if(pv.x=s.normal.x>0?e.max.x:e.min.x,pv.y=s.normal.y>0?e.max.y:e.min.y,pv.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(pv)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const rl=new Xt,al=new cp;class My{constructor(){this.coordinateSystem=oa}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(rl.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),al.setFromProjectionMatrix(rl,s.coordinateSystem,s.reversedDepth),al.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(rl.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),al.setFromProjectionMatrix(rl,s.coordinateSystem,s.reversedDepth),al.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(rl.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),al.setFromProjectionMatrix(rl,s.coordinateSystem,s.reversedDepth),al.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(rl.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),al.setFromProjectionMatrix(rl,s.coordinateSystem,s.reversedDepth),al.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(rl.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),al.setFromProjectionMatrix(rl,s.coordinateSystem,s.reversedDepth),al.containsPoint(e))return!0}return!1}clone(){return new My}}function d1(i,e){return i-e}function VD(i,e){return i.z-e.z}function HD(i,e){return e.z-i.z}class GD{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,s){const a=this.pool,u=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const h=a[this.index];u.push(h),this.index++,h.start=e,h.count=t,h.z=n,h.index=s}reset(){this.list.length=0,this.index=0}}const Br=new Xt,qD=new vt(1,1,1),UE=new cp,WD=new My,mv=new Qs,yd=new Ls,Km=new Y,PE=new Y,XD=new Y,h1=new GD,Zs=new ns,gv=[];function $D(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const s=i.count;for(let a=0;a<s;a++)for(let u=0;u<n;u++)e.setComponent(a+t,u,i.getComponent(a,u))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function _d(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class DA extends ns{constructor(e,t,n=t*2,s){super(new Qt,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Va(t,e,e,_s,ys);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Va(t,e,e,Kg,Ga);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Va(t,e,e,_s,ys);n.colorSpace=Tn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const u=e.getAttribute(a),{array:h,itemSize:p,normalized:m}=u,v=new h.constructor(n*p),b=new Kn(v,p,m);t.setAttribute(a,b)}if(e.getIndex()!==null){const a=n>65535?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Kn(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const s=e.getAttribute(n),a=t.getAttribute(n);if(s.itemSize!==a.itemSize||s.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Qs);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,s=t.length;n<s;n++){if(t[n].active===!1)continue;const a=t[n].geometryIndex;this.getMatrixAt(n,Br),this.getBoundingBoxAt(a,mv).applyMatrix4(Br),e.union(mv)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ls);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,s=t.length;n<s;n++){if(t[n].active===!1)continue;const a=t[n].geometryIndex;this.getMatrixAt(n,Br),this.getBoundingSphereAt(a,yd).applyMatrix4(Br),e.union(yd)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(d1),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=n):(s=this._instanceInfo.length,this._instanceInfo.push(n));const a=this._matricesTexture;Br.identity().toArray(a.image.data,s*16),a.needsUpdate=!0;const u=this._colorsTexture;return u&&(qD.toArray(u.image.data,s*4),u.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const u=e.getIndex();if(u!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=n===-1?u.count:n),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let p;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(d1),p=this._availableGeometryIds.shift(),a[p]=s):(p=this._geometryCount,this._geometryCount++,a.push(s)),this.setGeometryAt(p,e),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,p}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,s=n.getIndex()!==null,a=n.getIndex(),u=t.getIndex(),h=this._geometryInfo[e];if(s&&u.count>h.reservedIndexCount||t.attributes.position.count>h.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const p=h.vertexStart,m=h.reservedVertexCount;h.vertexCount=t.getAttribute("position").count;for(const v in n.attributes){const b=t.getAttribute(v),y=n.getAttribute(v);$D(b,y,p);const w=b.itemSize;for(let M=b.count,k=m;M<k;M++){const T=p+M;for(let N=0;N<w;N++)y.setComponent(T,N,0)}y.needsUpdate=!0,y.addUpdateRange(p*w,m*w)}if(s){const v=h.indexStart,b=h.reservedIndexCount;h.indexCount=t.getIndex().count;for(let y=0;y<u.count;y++)a.setX(v+y,p+u.getX(y));for(let y=u.count,w=b;y<w;y++)a.setX(v+y,p);a.needsUpdate=!0,a.addUpdateRange(v,h.reservedIndexCount)}return h.start=s?h.indexStart:h.vertexStart,h.count=s?h.indexCount:h.vertexCount,h.boundingBox=null,t.boundingBox!==null&&(h.boundingBox=t.boundingBox.clone()),h.boundingSphere=null,t.boundingSphere!==null&&(h.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let s=0,a=n.length;s<a;s++)n[s].active&&n[s].geometryIndex===e&&this.deleteInstance(s);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,s=n.map((u,h)=>h).sort((u,h)=>n[u].vertexStart-n[h].vertexStart),a=this.geometry;for(let u=0,h=n.length;u<h;u++){const p=s[u],m=n[p];if(m.active!==!1){if(a.index!==null){if(m.indexStart!==t){const{indexStart:v,vertexStart:b,reservedIndexCount:y}=m,w=a.index,M=w.array,k=e-b;for(let T=v;T<v+y;T++)M[T]=M[T]+k;w.array.copyWithin(t,v,v+y),w.addUpdateRange(t,y),w.needsUpdate=!0,m.indexStart=t}t+=m.reservedIndexCount}if(m.vertexStart!==e){const{vertexStart:v,reservedVertexCount:b}=m,y=a.attributes;for(const w in y){const M=y[w],{array:k,itemSize:T}=M;k.copyWithin(e*T,v*T,(v+b)*T),M.addUpdateRange(e*T,b*T),M.needsUpdate=!0}m.vertexStart=e}e+=m.reservedVertexCount,m.start=a.index?m.indexStart:m.vertexStart,this._nextIndexStart=a.index?m.indexStart+m.reservedIndexCount:0,this._nextVertexStart=m.vertexStart+m.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[e];if(s.boundingBox===null){const a=new Qs,u=n.index,h=n.attributes.position;for(let p=s.start,m=s.start+s.count;p<m;p++){let v=p;u&&(v=u.getX(v)),a.expandByPoint(Km.fromBufferAttribute(h,v))}s.boundingBox=a}return t.copy(s.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[e];if(s.boundingSphere===null){const a=new Ls;this.getBoundingBoxAt(e,mv),mv.getCenter(a.center);const u=n.index,h=n.attributes.position;let p=0;for(let m=s.start,v=s.start+s.count;m<v;m++){let b=m;u&&(b=u.getX(b)),Km.fromBufferAttribute(h,b),p=Math.max(p,a.center.distanceToSquared(Km))}a.radius=Math.sqrt(p),s.boundingSphere=a}return t.copy(s.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,s=this._matricesTexture.image.data;return t.toArray(s,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(d1);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const s=new Int32Array(e),a=new Int32Array(e);_d(this._multiDrawCounts,s),_d(this._multiDrawStarts,a),this._multiDrawCounts=s,this._multiDrawStarts=a,this._maxInstanceCount=e;const u=this._indirectTexture,h=this._matricesTexture,p=this._colorsTexture;u.dispose(),this._initIndirectTexture(),_d(u.image.data,this._indirectTexture.image.data),h.dispose(),this._initMatricesTexture(),_d(h.image.data,this._matricesTexture.image.data),p&&(p.dispose(),this._initColorsTexture(),_d(p.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(h=>h.active);if(Math.max(...n.map(h=>h.vertexStart+h.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(p=>p.indexStart+p.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Qt,this._initializeGeometry(a));const u=this.geometry;a.index&&_d(a.index.array,u.index.array);for(const h in a.attributes)_d(a.attributes[h].array,u.attributes[h].array)}raycast(e,t){const n=this._instanceInfo,s=this._geometryInfo,a=this.matrixWorld,u=this.geometry;Zs.material=this.material,Zs.geometry.index=u.index,Zs.geometry.attributes=u.attributes,Zs.geometry.boundingBox===null&&(Zs.geometry.boundingBox=new Qs),Zs.geometry.boundingSphere===null&&(Zs.geometry.boundingSphere=new Ls);for(let h=0,p=n.length;h<p;h++){if(!n[h].visible||!n[h].active)continue;const m=n[h].geometryIndex,v=s[m];Zs.geometry.setDrawRange(v.start,v.count),this.getMatrixAt(h,Zs.matrixWorld).premultiply(a),this.getBoundingBoxAt(m,Zs.geometry.boundingBox),this.getBoundingSphereAt(m,Zs.geometry.boundingSphere),Zs.raycast(e,gv);for(let b=0,y=gv.length;b<y;b++){const w=gv[b];w.object=this,w.batchId=h,t.push(w)}gv.length=0}Zs.material=null,Zs.geometry.index=null,Zs.geometry.attributes={},Zs.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,s,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const u=s.getIndex(),h=u===null?1:u.array.BYTES_PER_ELEMENT,p=this._instanceInfo,m=this._multiDrawStarts,v=this._multiDrawCounts,b=this._geometryInfo,y=this.perObjectFrustumCulled,w=this._indirectTexture,M=w.image.data,k=n.isArrayCamera?WD:UE;y&&!n.isArrayCamera&&(Br.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),UE.setFromProjectionMatrix(Br,n.coordinateSystem,n.reversedDepth));let T=0;if(this.sortObjects){Br.copy(this.matrixWorld).invert(),Km.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Br),PE.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Br);for(let R=0,D=p.length;R<D;R++)if(p[R].visible&&p[R].active){const I=p[R].geometryIndex;this.getMatrixAt(R,Br),this.getBoundingSphereAt(I,yd).applyMatrix4(Br);let P=!1;if(y&&(P=!k.intersectsSphere(yd,n)),!P){const z=b[I],G=XD.subVectors(yd.center,Km).dot(PE);h1.push(z.start,z.count,G,R)}}const N=h1.list,j=this.customSort;j===null?N.sort(a.transparent?HD:VD):j.call(this,N,n);for(let R=0,D=N.length;R<D;R++){const I=N[R];m[T]=I.start*h,v[T]=I.count,M[T]=I.index,T++}h1.reset()}else for(let N=0,j=p.length;N<j;N++)if(p[N].visible&&p[N].active){const R=p[N].geometryIndex;let D=!1;if(y&&(this.getMatrixAt(N,Br),this.getBoundingSphereAt(R,yd).applyMatrix4(Br),D=!k.intersectsSphere(yd,n)),!D){const I=b[R];m[T]=I.start*h,v[T]=I.count,M[T]=N,T++}}w.needsUpdate=!0,this._multiDrawCount=T,this._visibilityChanged=!1}onBeforeShadow(e,t,n,s,a,u){this.onBeforeRender(e,null,s,a,u)}}class yr extends er{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new vt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Bb=new Y,Fb=new Y,zE=new Xt,Zm=new lp,xv=new Ls,f1=new Y,BE=new Y;class Su extends In{constructor(e=new Qt,t=new yr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let s=1,a=t.count;s<a;s++)Bb.fromBufferAttribute(t,s-1),Fb.fromBufferAttribute(t,s),n[s]=n[s-1],n[s]+=Bb.distanceTo(Fb);e.setAttribute("lineDistance",new wt(n,1))}else ut("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,s=this.matrixWorld,a=e.params.Line.threshold,u=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),xv.copy(n.boundingSphere),xv.applyMatrix4(s),xv.radius+=a,e.ray.intersectsSphere(xv)===!1)return;zE.copy(s).invert(),Zm.copy(e.ray).applyMatrix4(zE);const h=a/((this.scale.x+this.scale.y+this.scale.z)/3),p=h*h,m=this.isLineSegments?2:1,v=n.index,y=n.attributes.position;if(v!==null){const w=Math.max(0,u.start),M=Math.min(v.count,u.start+u.count);for(let k=w,T=M-1;k<T;k+=m){const N=v.getX(k),j=v.getX(k+1),R=vv(this,e,Zm,p,N,j,k);R&&t.push(R)}if(this.isLineLoop){const k=v.getX(M-1),T=v.getX(w),N=vv(this,e,Zm,p,k,T,M-1);N&&t.push(N)}}else{const w=Math.max(0,u.start),M=Math.min(y.count,u.start+u.count);for(let k=w,T=M-1;k<T;k+=m){const N=vv(this,e,Zm,p,k,k+1,k);N&&t.push(N)}if(this.isLineLoop){const k=vv(this,e,Zm,p,M-1,w,M-1);k&&t.push(k)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,u=s.length;a<u;a++){const h=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=a}}}}}function vv(i,e,t,n,s,a,u){const h=i.geometry.attributes.position;if(Bb.fromBufferAttribute(h,s),Fb.fromBufferAttribute(h,a),t.distanceSqToSegment(Bb,Fb,f1,BE)>n)return;f1.applyMatrix4(i.matrixWorld);const m=e.ray.origin.distanceTo(f1);if(!(m<e.near||m>e.far))return{distance:m,point:BE.clone().applyMatrix4(i.matrixWorld),index:u,face:null,faceIndex:null,barycoord:null,object:i}}const FE=new Y,VE=new Y;class xl extends Su{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let s=0,a=t.count;s<a;s+=2)FE.fromBufferAttribute(t,s),VE.fromBufferAttribute(t,s+1),n[s]=s===0?0:n[s-1],n[s+1]=n[s]+FE.distanceTo(VE);e.setAttribute("lineDistance",new wt(n,1))}else ut("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class IA extends Su{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class sS extends er{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new vt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const HE=new Xt,uw=new lp,bv=new Ls,yv=new Y;class OA extends In{constructor(e=new Qt,t=new sS){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,s=this.matrixWorld,a=e.params.Points.threshold,u=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),bv.copy(n.boundingSphere),bv.applyMatrix4(s),bv.radius+=a,e.ray.intersectsSphere(bv)===!1)return;HE.copy(s).invert(),uw.copy(e.ray).applyMatrix4(HE);const h=a/((this.scale.x+this.scale.y+this.scale.z)/3),p=h*h,m=n.index,b=n.attributes.position;if(m!==null){const y=Math.max(0,u.start),w=Math.min(m.count,u.start+u.count);for(let M=y,k=w;M<k;M++){const T=m.getX(M);yv.fromBufferAttribute(b,T),GE(yv,T,p,s,e,t,this)}}else{const y=Math.max(0,u.start),w=Math.min(b.count,u.start+u.count);for(let M=y,k=w;M<k;M++)yv.fromBufferAttribute(b,M),GE(yv,M,p,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,u=s.length;a<u;a++){const h=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=a}}}}}function GE(i,e,t,n,s,a,u){const h=uw.distanceSqToPoint(i);if(h<t){const p=new Y;uw.closestPointToPoint(i,p),p.applyMatrix4(n);const m=s.ray.origin.distanceTo(p);if(m<s.near||m>s.far)return;a.push({distance:m,distanceToRay:Math.sqrt(h),point:p,index:e,face:null,faceIndex:null,barycoord:null,object:u})}}class LA extends Ui{constructor(e,t,n,s,a=ei,u=ei,h,p,m){super(e,t,n,s,a,u,h,p,m),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const v=this;function b(){v.needsUpdate=!0,v._requestVideoFrameCallbackId=e.requestVideoFrameCallback(b)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(b))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class YD extends LA{constructor(e,t,n,s,a,u,h,p){super({},e,t,n,s,a,u,h,p),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class KD extends Ui{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ai,this.minFilter=Ai,this.generateMipmaps=!1,this.needsUpdate=!0}}class Ey extends Ui{constructor(e,t,n,s,a,u,h,p,m,v,b,y){super(null,u,h,p,m,v,s,a,b,y),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class ZD extends Ey{constructor(e,t,n,s,a,u){super(e,t,n,a,u),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=Gr,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class JD extends Ey{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,fl),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class QD extends Ui{constructor(e,t,n,s,a,u,h,p,m){super(e,t,n,s,a,u,h,p,m),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Yd extends Ui{constructor(e,t,n=Ga,s,a,u,h=Ai,p=Ai,m,v=pl,b=1){if(v!==pl&&v!==xu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const y={width:e,height:t,depth:b};super(y,s,a,u,h,p,v,n,m),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new vu(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class UA extends Yd{constructor(e,t=Ga,n=fl,s,a,u=Ai,h=Ai,p,m=pl){const v={width:e,height:e,depth:1},b=[v,v,v,v,v,v];super(e,e,t,n,s,a,u,h,p,m),this.image=b,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class rS extends Ui{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Ny extends Qt{constructor(e=1,t=1,n=4,s=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:s,heightSegments:a},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),s=Math.max(3,Math.floor(s)),a=Math.max(1,Math.floor(a));const u=[],h=[],p=[],m=[],v=t/2,b=Math.PI/2*e,y=t,w=2*b+y,M=n*2+a,k=s+1,T=new Y,N=new Y;for(let j=0;j<=M;j++){let R=0,D=0,I=0,P=0;if(j<=n){const U=j/n,L=U*Math.PI/2;D=-v-e*Math.cos(L),I=e*Math.sin(L),P=-e*Math.cos(L),R=U*b}else if(j<=n+a){const U=(j-n)/a;D=-v+U*t,I=e,P=0,R=b+U*y}else{const U=(j-n-a)/n,L=U*Math.PI/2;D=v+e*Math.sin(L),I=e*Math.cos(L),P=e*Math.sin(L),R=b+y+U*b}const z=Math.max(0,Math.min(1,R/w));let G=0;j===0?G=.5/s:j===M&&(G=-.5/s);for(let U=0;U<=s;U++){const L=U/s,W=L*Math.PI*2,J=Math.sin(W),Q=Math.cos(W);N.x=-I*Q,N.y=D,N.z=I*J,h.push(N.x,N.y,N.z),T.set(-I*Q,P,I*J),T.normalize(),p.push(T.x,T.y,T.z),m.push(L+G,z)}if(j>0){const U=(j-1)*k;for(let L=0;L<s;L++){const W=U+L,J=U+L+1,Q=j*k+L,ue=j*k+L+1;u.push(W,J,Q),u.push(J,ue,Q)}}}this.setIndex(u),this.setAttribute("position",new wt(h,3)),this.setAttribute("normal",new wt(p,3)),this.setAttribute("uv",new wt(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ny(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Ty extends Qt{constructor(e=1,t=32,n=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:s},t=Math.max(3,t);const a=[],u=[],h=[],p=[],m=new Y,v=new ze;u.push(0,0,0),h.push(0,0,1),p.push(.5,.5);for(let b=0,y=3;b<=t;b++,y+=3){const w=n+b/t*s;m.x=e*Math.cos(w),m.y=e*Math.sin(w),u.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(u[y]/e+1)/2,v.y=(u[y+1]/e+1)/2,p.push(v.x,v.y)}for(let b=1;b<=t;b++)a.push(b,b+1,0);this.setIndex(a),this.setAttribute("position",new wt(u,3)),this.setAttribute("normal",new wt(h,3)),this.setAttribute("uv",new wt(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ty(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Jg extends Qt{constructor(e=1,t=1,n=1,s=32,a=1,u=!1,h=0,p=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:s,heightSegments:a,openEnded:u,thetaStart:h,thetaLength:p};const m=this;s=Math.floor(s),a=Math.floor(a);const v=[],b=[],y=[],w=[];let M=0;const k=[],T=n/2;let N=0;j(),u===!1&&(e>0&&R(!0),t>0&&R(!1)),this.setIndex(v),this.setAttribute("position",new wt(b,3)),this.setAttribute("normal",new wt(y,3)),this.setAttribute("uv",new wt(w,2));function j(){const D=new Y,I=new Y;let P=0;const z=(t-e)/n;for(let G=0;G<=a;G++){const U=[],L=G/a,W=L*(t-e)+e;for(let J=0;J<=s;J++){const Q=J/s,ue=Q*p+h,ne=Math.sin(ue),X=Math.cos(ue);I.x=W*ne,I.y=-L*n+T,I.z=W*X,b.push(I.x,I.y,I.z),D.set(ne,z,X).normalize(),y.push(D.x,D.y,D.z),w.push(Q,1-L),U.push(M++)}k.push(U)}for(let G=0;G<s;G++)for(let U=0;U<a;U++){const L=k[U][G],W=k[U+1][G],J=k[U+1][G+1],Q=k[U][G+1];(e>0||U!==0)&&(v.push(L,W,Q),P+=3),(t>0||U!==a-1)&&(v.push(W,J,Q),P+=3)}m.addGroup(N,P,0),N+=P}function R(D){const I=M,P=new ze,z=new Y;let G=0;const U=D===!0?e:t,L=D===!0?1:-1;for(let J=1;J<=s;J++)b.push(0,T*L,0),y.push(0,L,0),w.push(.5,.5),M++;const W=M;for(let J=0;J<=s;J++){const ue=J/s*p+h,ne=Math.cos(ue),X=Math.sin(ue);z.x=U*X,z.y=T*L,z.z=U*ne,b.push(z.x,z.y,z.z),y.push(0,L,0),P.x=ne*.5+.5,P.y=X*.5*L+.5,w.push(P.x,P.y),M++}for(let J=0;J<s;J++){const Q=I+J,ue=W+J;D===!0?v.push(ue,ue+1,Q):v.push(ue+1,ue,Q),G+=3}m.addGroup(N,G,D===!0?1:2),N+=G}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jg(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Qg extends Jg{constructor(e=1,t=1,n=32,s=1,a=!1,u=0,h=Math.PI*2){super(0,e,t,n,s,a,u,h),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:s,openEnded:a,thetaStart:u,thetaLength:h}}static fromJSON(e){return new Qg(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Tu extends Qt{constructor(e=[],t=[],n=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:s};const a=[],u=[];h(s),m(n),v(),this.setAttribute("position",new wt(a,3)),this.setAttribute("normal",new wt(a.slice(),3)),this.setAttribute("uv",new wt(u,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function h(j){const R=new Y,D=new Y,I=new Y;for(let P=0;P<t.length;P+=3)w(t[P+0],R),w(t[P+1],D),w(t[P+2],I),p(R,D,I,j)}function p(j,R,D,I){const P=I+1,z=[];for(let G=0;G<=P;G++){z[G]=[];const U=j.clone().lerp(D,G/P),L=R.clone().lerp(D,G/P),W=P-G;for(let J=0;J<=W;J++)J===0&&G===P?z[G][J]=U:z[G][J]=U.clone().lerp(L,J/W)}for(let G=0;G<P;G++)for(let U=0;U<2*(P-G)-1;U++){const L=Math.floor(U/2);U%2===0?(y(z[G][L+1]),y(z[G+1][L]),y(z[G][L])):(y(z[G][L+1]),y(z[G+1][L+1]),y(z[G+1][L]))}}function m(j){const R=new Y;for(let D=0;D<a.length;D+=3)R.x=a[D+0],R.y=a[D+1],R.z=a[D+2],R.normalize().multiplyScalar(j),a[D+0]=R.x,a[D+1]=R.y,a[D+2]=R.z}function v(){const j=new Y;for(let R=0;R<a.length;R+=3){j.x=a[R+0],j.y=a[R+1],j.z=a[R+2];const D=T(j)/2/Math.PI+.5,I=N(j)/Math.PI+.5;u.push(D,1-I)}M(),b()}function b(){for(let j=0;j<u.length;j+=6){const R=u[j+0],D=u[j+2],I=u[j+4],P=Math.max(R,D,I),z=Math.min(R,D,I);P>.9&&z<.1&&(R<.2&&(u[j+0]+=1),D<.2&&(u[j+2]+=1),I<.2&&(u[j+4]+=1))}}function y(j){a.push(j.x,j.y,j.z)}function w(j,R){const D=j*3;R.x=e[D+0],R.y=e[D+1],R.z=e[D+2]}function M(){const j=new Y,R=new Y,D=new Y,I=new Y,P=new ze,z=new ze,G=new ze;for(let U=0,L=0;U<a.length;U+=9,L+=6){j.set(a[U+0],a[U+1],a[U+2]),R.set(a[U+3],a[U+4],a[U+5]),D.set(a[U+6],a[U+7],a[U+8]),P.set(u[L+0],u[L+1]),z.set(u[L+2],u[L+3]),G.set(u[L+4],u[L+5]),I.copy(j).add(R).add(D).divideScalar(3);const W=T(I);k(P,L+0,j,W),k(z,L+2,R,W),k(G,L+4,D,W)}}function k(j,R,D,I){I<0&&j.x===1&&(u[R]=j.x-1),D.x===0&&D.z===0&&(u[R]=I/2/Math.PI+.5)}function T(j){return Math.atan2(j.z,-j.x)}function N(j){return Math.atan2(-j.y,Math.sqrt(j.x*j.x+j.z*j.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tu(e.vertices,e.indices,e.radius,e.detail)}}class Ay extends Tu{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,s=1/n,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-n,0,-s,n,0,s,-n,0,s,n,-s,-n,0,-s,n,0,s,-n,0,s,n,0,-n,0,-s,n,0,-s,-n,0,s,n,0,s],u=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,u,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ay(e.radius,e.detail)}}const _v=new Y,wv=new Y,p1=new Y,Sv=new Hr;class PA extends Qt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const s=Math.pow(10,4),a=Math.cos(Vd*t),u=e.getIndex(),h=e.getAttribute("position"),p=u?u.count:h.count,m=[0,0,0],v=["a","b","c"],b=new Array(3),y={},w=[];for(let M=0;M<p;M+=3){u?(m[0]=u.getX(M),m[1]=u.getX(M+1),m[2]=u.getX(M+2)):(m[0]=M,m[1]=M+1,m[2]=M+2);const{a:k,b:T,c:N}=Sv;if(k.fromBufferAttribute(h,m[0]),T.fromBufferAttribute(h,m[1]),N.fromBufferAttribute(h,m[2]),Sv.getNormal(p1),b[0]=`${Math.round(k.x*s)},${Math.round(k.y*s)},${Math.round(k.z*s)}`,b[1]=`${Math.round(T.x*s)},${Math.round(T.y*s)},${Math.round(T.z*s)}`,b[2]=`${Math.round(N.x*s)},${Math.round(N.y*s)},${Math.round(N.z*s)}`,!(b[0]===b[1]||b[1]===b[2]||b[2]===b[0]))for(let j=0;j<3;j++){const R=(j+1)%3,D=b[j],I=b[R],P=Sv[v[j]],z=Sv[v[R]],G=`${D}_${I}`,U=`${I}_${D}`;U in y&&y[U]?(p1.dot(y[U].normal)<=a&&(w.push(P.x,P.y,P.z),w.push(z.x,z.y,z.z)),y[U]=null):G in y||(y[G]={index0:m[j],index1:m[R],normal:p1.clone()})}}for(const M in y)if(y[M]){const{index0:k,index1:T}=y[M];_v.fromBufferAttribute(h,k),wv.fromBufferAttribute(h,T),w.push(_v.x,_v.y,_v.z),w.push(wv.x,wv.y,wv.z)}this.setAttribute("position",new wt(w,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Eo{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){ut("Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,s=this.getPoint(0),a=0;t.push(0);for(let u=1;u<=e;u++)n=this.getPoint(u/e),a+=n.distanceTo(s),t.push(a),s=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let s=0;const a=n.length;let u;t?u=t:u=e*n[a-1];let h=0,p=a-1,m;for(;h<=p;)if(s=Math.floor(h+(p-h)/2),m=n[s]-u,m<0)h=s+1;else if(m>0)p=s-1;else{p=s;break}if(s=p,n[s]===u)return s/(a-1);const v=n[s],y=n[s+1]-v,w=(u-v)/y;return(s+w)/(a-1)}getTangent(e,t){let s=e-1e-4,a=e+1e-4;s<0&&(s=0),a>1&&(a=1);const u=this.getPoint(s),h=this.getPoint(a),p=t||(u.isVector2?new ze:new Y);return p.copy(h).sub(u).normalize(),p}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new Y,s=[],a=[],u=[],h=new Y,p=new Xt;for(let w=0;w<=e;w++){const M=w/e;s[w]=this.getTangentAt(M,new Y)}a[0]=new Y,u[0]=new Y;let m=Number.MAX_VALUE;const v=Math.abs(s[0].x),b=Math.abs(s[0].y),y=Math.abs(s[0].z);v<=m&&(m=v,n.set(1,0,0)),b<=m&&(m=b,n.set(0,1,0)),y<=m&&n.set(0,0,1),h.crossVectors(s[0],n).normalize(),a[0].crossVectors(s[0],h),u[0].crossVectors(s[0],a[0]);for(let w=1;w<=e;w++){if(a[w]=a[w-1].clone(),u[w]=u[w-1].clone(),h.crossVectors(s[w-1],s[w]),h.length()>Number.EPSILON){h.normalize();const M=Math.acos(qt(s[w-1].dot(s[w]),-1,1));a[w].applyMatrix4(p.makeRotationAxis(h,M))}u[w].crossVectors(s[w],a[w])}if(t===!0){let w=Math.acos(qt(a[0].dot(a[e]),-1,1));w/=e,s[0].dot(h.crossVectors(a[0],a[e]))>0&&(w=-w);for(let M=1;M<=e;M++)a[M].applyMatrix4(p.makeRotationAxis(s[M],w*M)),u[M].crossVectors(s[M],a[M])}return{tangents:s,normals:a,binormals:u}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class ky extends Eo{constructor(e=0,t=0,n=1,s=1,a=0,u=Math.PI*2,h=!1,p=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=s,this.aStartAngle=a,this.aEndAngle=u,this.aClockwise=h,this.aRotation=p}getPoint(e,t=new ze){const n=t,s=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const u=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=s;for(;a>s;)a-=s;a<Number.EPSILON&&(u?a=0:a=s),this.aClockwise===!0&&!u&&(a===s?a=-s:a=a-s);const h=this.aStartAngle+e*a;let p=this.aX+this.xRadius*Math.cos(h),m=this.aY+this.yRadius*Math.sin(h);if(this.aRotation!==0){const v=Math.cos(this.aRotation),b=Math.sin(this.aRotation),y=p-this.aX,w=m-this.aY;p=y*v-w*b+this.aX,m=y*b+w*v+this.aY}return n.set(p,m)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class zA extends ky{constructor(e,t,n,s,a,u){super(e,t,n,n,s,a,u),this.isArcCurve=!0,this.type="ArcCurve"}}function aS(){let i=0,e=0,t=0,n=0;function s(a,u,h,p){i=a,e=h,t=-3*a+3*u-2*h-p,n=2*a-2*u+h+p}return{initCatmullRom:function(a,u,h,p,m){s(u,h,m*(h-a),m*(p-u))},initNonuniformCatmullRom:function(a,u,h,p,m,v,b){let y=(u-a)/m-(h-a)/(m+v)+(h-u)/v,w=(h-u)/v-(p-u)/(v+b)+(p-h)/b;y*=v,w*=v,s(u,h,y,w)},calc:function(a){const u=a*a,h=u*a;return i+e*a+t*u+n*h}}}const Mv=new Y,m1=new aS,g1=new aS,x1=new aS;class BA extends Eo{constructor(e=[],t=!1,n="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=s}getPoint(e,t=new Y){const n=t,s=this.points,a=s.length,u=(a-(this.closed?0:1))*e;let h=Math.floor(u),p=u-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/a)+1)*a:p===0&&h===a-1&&(h=a-2,p=1);let m,v;this.closed||h>0?m=s[(h-1)%a]:(Mv.subVectors(s[0],s[1]).add(s[0]),m=Mv);const b=s[h%a],y=s[(h+1)%a];if(this.closed||h+2<a?v=s[(h+2)%a]:(Mv.subVectors(s[a-1],s[a-2]).add(s[a-1]),v=Mv),this.curveType==="centripetal"||this.curveType==="chordal"){const w=this.curveType==="chordal"?.5:.25;let M=Math.pow(m.distanceToSquared(b),w),k=Math.pow(b.distanceToSquared(y),w),T=Math.pow(y.distanceToSquared(v),w);k<1e-4&&(k=1),M<1e-4&&(M=k),T<1e-4&&(T=k),m1.initNonuniformCatmullRom(m.x,b.x,y.x,v.x,M,k,T),g1.initNonuniformCatmullRom(m.y,b.y,y.y,v.y,M,k,T),x1.initNonuniformCatmullRom(m.z,b.z,y.z,v.z,M,k,T)}else this.curveType==="catmullrom"&&(m1.initCatmullRom(m.x,b.x,y.x,v.x,this.tension),g1.initCatmullRom(m.y,b.y,y.y,v.y,this.tension),x1.initCatmullRom(m.z,b.z,y.z,v.z,this.tension));return n.set(m1.calc(p),g1.calc(p),x1.calc(p)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new Y().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function qE(i,e,t,n,s){const a=(n-e)*.5,u=(s-t)*.5,h=i*i,p=i*h;return(2*t-2*n+a+u)*p+(-3*t+3*n-2*a-u)*h+a*i+t}function eI(i,e){const t=1-i;return t*t*e}function tI(i,e){return 2*(1-i)*i*e}function nI(i,e){return i*i*e}function gg(i,e,t,n){return eI(i,e)+tI(i,t)+nI(i,n)}function iI(i,e){const t=1-i;return t*t*t*e}function sI(i,e){const t=1-i;return 3*t*t*i*e}function rI(i,e){return 3*(1-i)*i*i*e}function aI(i,e){return i*i*i*e}function xg(i,e,t,n,s){return iI(i,e)+sI(i,t)+rI(i,n)+aI(i,s)}class oS extends Eo{constructor(e=new ze,t=new ze,n=new ze,s=new ze){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=s}getPoint(e,t=new ze){const n=t,s=this.v0,a=this.v1,u=this.v2,h=this.v3;return n.set(xg(e,s.x,a.x,u.x,h.x),xg(e,s.y,a.y,u.y,h.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class FA extends Eo{constructor(e=new Y,t=new Y,n=new Y,s=new Y){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=s}getPoint(e,t=new Y){const n=t,s=this.v0,a=this.v1,u=this.v2,h=this.v3;return n.set(xg(e,s.x,a.x,u.x,h.x),xg(e,s.y,a.y,u.y,h.y),xg(e,s.z,a.z,u.z,h.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class lS extends Eo{constructor(e=new ze,t=new ze){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ze){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ze){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class VA extends Eo{constructor(e=new Y,t=new Y){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Y){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Y){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cS extends Eo{constructor(e=new ze,t=new ze,n=new ze){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ze){const n=t,s=this.v0,a=this.v1,u=this.v2;return n.set(gg(e,s.x,a.x,u.x),gg(e,s.y,a.y,u.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uS extends Eo{constructor(e=new Y,t=new Y,n=new Y){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Y){const n=t,s=this.v0,a=this.v1,u=this.v2;return n.set(gg(e,s.x,a.x,u.x),gg(e,s.y,a.y,u.y),gg(e,s.z,a.z,u.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class dS extends Eo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ze){const n=t,s=this.points,a=(s.length-1)*e,u=Math.floor(a),h=a-u,p=s[u===0?u:u-1],m=s[u],v=s[u>s.length-2?s.length-1:u+1],b=s[u>s.length-3?s.length-1:u+2];return n.set(qE(h,p.x,m.x,v.x,b.x),qE(h,p.y,m.y,v.y,b.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new ze().fromArray(s))}return this}}var Vb=Object.freeze({__proto__:null,ArcCurve:zA,CatmullRomCurve3:BA,CubicBezierCurve:oS,CubicBezierCurve3:FA,EllipseCurve:ky,LineCurve:lS,LineCurve3:VA,QuadraticBezierCurve:cS,QuadraticBezierCurve3:uS,SplineCurve:dS});class HA extends Eo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Vb[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),s=this.getCurveLengths();let a=0;for(;a<s.length;){if(s[a]>=n){const u=s[a]-n,h=this.curves[a],p=h.getLength(),m=p===0?0:1-u/p;return h.getPointAt(m,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,s=this.curves.length;n<s;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let s=0,a=this.curves;s<a.length;s++){const u=a[s],h=u.isEllipseCurve?e*2:u.isLineCurve||u.isLineCurve3?1:u.isSplineCurve?e*u.points.length:e,p=u.getPoints(h);for(let m=0;m<p.length;m++){const v=p[m];n&&n.equals(v)||(t.push(v),n=v)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const s=e.curves[t];this.curves.push(new Vb[s.type]().fromJSON(s))}return this}}class Hb extends HA{constructor(e){super(),this.type="Path",this.currentPoint=new ze,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new lS(this.currentPoint.clone(),new ze(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,s){const a=new cS(this.currentPoint.clone(),new ze(e,t),new ze(n,s));return this.curves.push(a),this.currentPoint.set(n,s),this}bezierCurveTo(e,t,n,s,a,u){const h=new oS(this.currentPoint.clone(),new ze(e,t),new ze(n,s),new ze(a,u));return this.curves.push(h),this.currentPoint.set(a,u),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new dS(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,s,a,u){const h=this.currentPoint.x,p=this.currentPoint.y;return this.absarc(e+h,t+p,n,s,a,u),this}absarc(e,t,n,s,a,u){return this.absellipse(e,t,n,n,s,a,u),this}ellipse(e,t,n,s,a,u,h,p){const m=this.currentPoint.x,v=this.currentPoint.y;return this.absellipse(e+m,t+v,n,s,a,u,h,p),this}absellipse(e,t,n,s,a,u,h,p){const m=new ky(e,t,n,s,a,u,h,p);if(this.curves.length>0){const b=m.getPoint(0);b.equals(this.currentPoint)||this.lineTo(b.x,b.y)}this.curves.push(m);const v=m.getPoint(1);return this.currentPoint.copy(v),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Hd extends Hb{constructor(e){super(e),this.uuid=ca(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,s=this.holes.length;n<s;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const s=e.holes[t];this.holes.push(new Hb().fromJSON(s))}return this}}function oI(i,e,t=2){const n=e&&e.length,s=n?e[0]*t:i.length;let a=GA(i,0,s,t,!0);const u=[];if(!a||a.next===a.prev)return u;let h,p,m;if(n&&(a=hI(i,e,a,t)),i.length>80*t){h=i[0],p=i[1];let v=h,b=p;for(let y=t;y<s;y+=t){const w=i[y],M=i[y+1];w<h&&(h=w),M<p&&(p=M),w>v&&(v=w),M>b&&(b=M)}m=Math.max(v-h,b-p),m=m!==0?32767/m:0}return Pg(a,u,t,h,p,m,0),u}function GA(i,e,t,n,s){let a;if(s===SI(i,e,t,n)>0)for(let u=e;u<t;u+=n)a=WE(u/n|0,i[u],i[u+1],a);else for(let u=t-n;u>=e;u-=n)a=WE(u/n|0,i[u],i[u+1],a);return a&&sp(a,a.next)&&(Bg(a),a=a.next),a}function Kd(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(sp(t,t.next)||Ti(t.prev,t,t.next)===0)){if(Bg(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Pg(i,e,t,n,s,a,u){if(!i)return;!u&&a&&xI(i,n,s,a);let h=i;for(;i.prev!==i.next;){const p=i.prev,m=i.next;if(a?cI(i,n,s,a):lI(i)){e.push(p.i,i.i,m.i),Bg(i),i=m.next,h=m.next;continue}if(i=m,i===h){u?u===1?(i=uI(Kd(i),e),Pg(i,e,t,n,s,a,2)):u===2&&dI(i,e,t,n,s,a):Pg(Kd(i),e,t,n,s,a,1);break}}}function lI(i){const e=i.prev,t=i,n=i.next;if(Ti(e,t,n)>=0)return!1;const s=e.x,a=t.x,u=n.x,h=e.y,p=t.y,m=n.y,v=Math.min(s,a,u),b=Math.min(h,p,m),y=Math.max(s,a,u),w=Math.max(h,p,m);let M=n.next;for(;M!==e;){if(M.x>=v&&M.x<=y&&M.y>=b&&M.y<=w&&rg(s,h,a,p,u,m,M.x,M.y)&&Ti(M.prev,M,M.next)>=0)return!1;M=M.next}return!0}function cI(i,e,t,n){const s=i.prev,a=i,u=i.next;if(Ti(s,a,u)>=0)return!1;const h=s.x,p=a.x,m=u.x,v=s.y,b=a.y,y=u.y,w=Math.min(h,p,m),M=Math.min(v,b,y),k=Math.max(h,p,m),T=Math.max(v,b,y),N=dw(w,M,e,t,n),j=dw(k,T,e,t,n);let R=i.prevZ,D=i.nextZ;for(;R&&R.z>=N&&D&&D.z<=j;){if(R.x>=w&&R.x<=k&&R.y>=M&&R.y<=T&&R!==s&&R!==u&&rg(h,v,p,b,m,y,R.x,R.y)&&Ti(R.prev,R,R.next)>=0||(R=R.prevZ,D.x>=w&&D.x<=k&&D.y>=M&&D.y<=T&&D!==s&&D!==u&&rg(h,v,p,b,m,y,D.x,D.y)&&Ti(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;R&&R.z>=N;){if(R.x>=w&&R.x<=k&&R.y>=M&&R.y<=T&&R!==s&&R!==u&&rg(h,v,p,b,m,y,R.x,R.y)&&Ti(R.prev,R,R.next)>=0)return!1;R=R.prevZ}for(;D&&D.z<=j;){if(D.x>=w&&D.x<=k&&D.y>=M&&D.y<=T&&D!==s&&D!==u&&rg(h,v,p,b,m,y,D.x,D.y)&&Ti(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function uI(i,e){let t=i;do{const n=t.prev,s=t.next.next;!sp(n,s)&&WA(n,t,t.next,s)&&zg(n,s)&&zg(s,n)&&(e.push(n.i,t.i,s.i),Bg(t),Bg(t.next),t=i=s),t=t.next}while(t!==i);return Kd(t)}function dI(i,e,t,n,s,a){let u=i;do{let h=u.next.next;for(;h!==u.prev;){if(u.i!==h.i&&yI(u,h)){let p=XA(u,h);u=Kd(u,u.next),p=Kd(p,p.next),Pg(u,e,t,n,s,a,0),Pg(p,e,t,n,s,a,0);return}h=h.next}u=u.next}while(u!==i)}function hI(i,e,t,n){const s=[];for(let a=0,u=e.length;a<u;a++){const h=e[a]*n,p=a<u-1?e[a+1]*n:i.length,m=GA(i,h,p,n,!1);m===m.next&&(m.steiner=!0),s.push(bI(m))}s.sort(fI);for(let a=0;a<s.length;a++)t=pI(s[a],t);return t}function fI(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),s=(e.next.y-e.y)/(e.next.x-e.x);t=n-s}return t}function pI(i,e){const t=mI(i,e);if(!t)return e;const n=XA(t,i);return Kd(n,n.next),Kd(t,t.next)}function mI(i,e){let t=e;const n=i.x,s=i.y;let a=-1/0,u;if(sp(i,t))return t;do{if(sp(i,t.next))return t.next;if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const b=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(b<=n&&b>a&&(a=b,u=t.x<t.next.x?t:t.next,b===n))return u}t=t.next}while(t!==e);if(!u)return null;const h=u,p=u.x,m=u.y;let v=1/0;t=u;do{if(n>=t.x&&t.x>=p&&n!==t.x&&qA(s<m?n:a,s,p,m,s<m?a:n,s,t.x,t.y)){const b=Math.abs(s-t.y)/(n-t.x);zg(t,i)&&(b<v||b===v&&(t.x>u.x||t.x===u.x&&gI(u,t)))&&(u=t,v=b)}t=t.next}while(t!==h);return u}function gI(i,e){return Ti(i.prev,i,e.prev)<0&&Ti(e.next,i,i.next)<0}function xI(i,e,t,n){let s=i;do s.z===0&&(s.z=dw(s.x,s.y,e,t,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==i);s.prevZ.nextZ=null,s.prevZ=null,vI(s)}function vI(i){let e,t=1;do{let n=i,s;i=null;let a=null;for(e=0;n;){e++;let u=n,h=0;for(let m=0;m<t&&(h++,u=u.nextZ,!!u);m++);let p=t;for(;h>0||p>0&&u;)h!==0&&(p===0||!u||n.z<=u.z)?(s=n,n=n.nextZ,h--):(s=u,u=u.nextZ,p--),a?a.nextZ=s:i=s,s.prevZ=a,a=s;n=u}a.nextZ=null,t*=2}while(e>1);return i}function dw(i,e,t,n,s){return i=(i-t)*s|0,e=(e-n)*s|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function bI(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function qA(i,e,t,n,s,a,u,h){return(s-u)*(e-h)>=(i-u)*(a-h)&&(i-u)*(n-h)>=(t-u)*(e-h)&&(t-u)*(a-h)>=(s-u)*(n-h)}function rg(i,e,t,n,s,a,u,h){return!(i===u&&e===h)&&qA(i,e,t,n,s,a,u,h)}function yI(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!_I(i,e)&&(zg(i,e)&&zg(e,i)&&wI(i,e)&&(Ti(i.prev,i,e.prev)||Ti(i,e.prev,e))||sp(i,e)&&Ti(i.prev,i,i.next)>0&&Ti(e.prev,e,e.next)>0)}function Ti(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function sp(i,e){return i.x===e.x&&i.y===e.y}function WA(i,e,t,n){const s=Nv(Ti(i,e,t)),a=Nv(Ti(i,e,n)),u=Nv(Ti(t,n,i)),h=Nv(Ti(t,n,e));return!!(s!==a&&u!==h||s===0&&Ev(i,t,e)||a===0&&Ev(i,n,e)||u===0&&Ev(t,i,n)||h===0&&Ev(t,e,n))}function Ev(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Nv(i){return i>0?1:i<0?-1:0}function _I(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&WA(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function zg(i,e){return Ti(i.prev,i,i.next)<0?Ti(i,e,i.next)>=0&&Ti(i,i.prev,e)>=0:Ti(i,e,i.prev)<0||Ti(i,i.next,e)<0}function wI(i,e){let t=i,n=!1;const s=(i.x+e.x)/2,a=(i.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&s<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function XA(i,e){const t=hw(i.i,i.x,i.y),n=hw(e.i,e.x,e.y),s=i.next,a=e.prev;return i.next=e,e.prev=i,t.next=s,s.prev=t,n.next=t,t.prev=n,a.next=n,n.prev=a,n}function WE(i,e,t,n){const s=hw(i,e,t);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function Bg(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function hw(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function SI(i,e,t,n){let s=0;for(let a=e,u=t-n;a<t;a+=n)s+=(i[u]-i[a])*(i[a+1]+i[u+1]),u=a;return s}class MI{static triangulate(e,t,n=2){return oI(e,t,n)}}class wo{static area(e){const t=e.length;let n=0;for(let s=t-1,a=0;a<t;s=a++)n+=e[s].x*e[a].y-e[a].x*e[s].y;return n*.5}static isClockWise(e){return wo.area(e)<0}static triangulateShape(e,t){const n=[],s=[],a=[];XE(e),$E(n,e);let u=e.length;t.forEach(XE);for(let p=0;p<t.length;p++)s.push(u),u+=t[p].length,$E(n,t[p]);const h=MI.triangulate(n,s);for(let p=0;p<h.length;p+=3)a.push(h.slice(p,p+3));return a}}function XE(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function $E(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class Cy extends Qt{constructor(e=new Hd([new ze(.5,.5),new ze(-.5,.5),new ze(-.5,-.5),new ze(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,s=[],a=[];for(let h=0,p=e.length;h<p;h++){const m=e[h];u(m)}this.setAttribute("position",new wt(s,3)),this.setAttribute("uv",new wt(a,2)),this.computeVertexNormals();function u(h){const p=[],m=t.curveSegments!==void 0?t.curveSegments:12,v=t.steps!==void 0?t.steps:1,b=t.depth!==void 0?t.depth:1;let y=t.bevelEnabled!==void 0?t.bevelEnabled:!0,w=t.bevelThickness!==void 0?t.bevelThickness:.2,M=t.bevelSize!==void 0?t.bevelSize:w-.1,k=t.bevelOffset!==void 0?t.bevelOffset:0,T=t.bevelSegments!==void 0?t.bevelSegments:3;const N=t.extrudePath,j=t.UVGenerator!==void 0?t.UVGenerator:EI;let R,D=!1,I,P,z,G;if(N){R=N.getSpacedPoints(v),D=!0,y=!1;const je=N.isCatmullRomCurve3?N.closed:!1;I=N.computeFrenetFrames(v,je),P=new Y,z=new Y,G=new Y}y||(T=0,w=0,M=0,k=0);const U=h.extractPoints(m);let L=U.shape;const W=U.holes;if(!wo.isClockWise(L)){L=L.reverse();for(let je=0,Ge=W.length;je<Ge;je++){const Oe=W[je];wo.isClockWise(Oe)&&(W[je]=Oe.reverse())}}function Q(je){const Oe=10000000000000001e-36;let tt=je[0];for(let K=1;K<=je.length;K++){const Et=K%je.length,at=je[Et],Tt=at.x-tt.x,Ye=at.y-tt.y,$=Tt*Tt+Ye*Ye,B=Math.max(Math.abs(at.x),Math.abs(at.y),Math.abs(tt.x),Math.abs(tt.y)),oe=Oe*B*B;if($<=oe){je.splice(Et,1),K--;continue}tt=at}}Q(L),W.forEach(Q);const ue=W.length,ne=L;for(let je=0;je<ue;je++){const Ge=W[je];L=L.concat(Ge)}function X(je,Ge,Oe){return Ge||Ct("ExtrudeGeometry: vec does not exist"),je.clone().addScaledVector(Ge,Oe)}const Z=L.length;function re(je,Ge,Oe){let tt,K,Et;const at=je.x-Ge.x,Tt=je.y-Ge.y,Ye=Oe.x-je.x,$=Oe.y-je.y,B=at*at+Tt*Tt,oe=at*$-Tt*Ye;if(Math.abs(oe)>Number.EPSILON){const Te=Math.sqrt(B),Le=Math.sqrt(Ye*Ye+$*$),Ae=Ge.x-Tt/Te,pt=Ge.y+at/Te,Je=Oe.x-$/Le,yt=Oe.y+Ye/Le,jt=((Je-Ae)*$-(yt-pt)*Ye)/(at*$-Tt*Ye);tt=Ae+at*jt-je.x,K=pt+Tt*jt-je.y;const Ve=tt*tt+K*K;if(Ve<=2)return new ze(tt,K);Et=Math.sqrt(Ve/2)}else{let Te=!1;at>Number.EPSILON?Ye>Number.EPSILON&&(Te=!0):at<-Number.EPSILON?Ye<-Number.EPSILON&&(Te=!0):Math.sign(Tt)===Math.sign($)&&(Te=!0),Te?(tt=-Tt,K=at,Et=Math.sqrt(B)):(tt=at,K=Tt,Et=Math.sqrt(B/2))}return new ze(tt/Et,K/Et)}const pe=[];for(let je=0,Ge=ne.length,Oe=Ge-1,tt=je+1;je<Ge;je++,Oe++,tt++)Oe===Ge&&(Oe=0),tt===Ge&&(tt=0),pe[je]=re(ne[je],ne[Oe],ne[tt]);const we=[];let q,ce=pe.concat();for(let je=0,Ge=ue;je<Ge;je++){const Oe=W[je];q=[];for(let tt=0,K=Oe.length,Et=K-1,at=tt+1;tt<K;tt++,Et++,at++)Et===K&&(Et=0),at===K&&(at=0),q[tt]=re(Oe[tt],Oe[Et],Oe[at]);we.push(q),ce=ce.concat(q)}let Ee;if(T===0)Ee=wo.triangulateShape(ne,W);else{const je=[],Ge=[];for(let Oe=0;Oe<T;Oe++){const tt=Oe/T,K=w*Math.cos(tt*Math.PI/2),Et=M*Math.sin(tt*Math.PI/2)+k;for(let at=0,Tt=ne.length;at<Tt;at++){const Ye=X(ne[at],pe[at],Et);nt(Ye.x,Ye.y,-K),tt===0&&je.push(Ye)}for(let at=0,Tt=ue;at<Tt;at++){const Ye=W[at];q=we[at];const $=[];for(let B=0,oe=Ye.length;B<oe;B++){const Te=X(Ye[B],q[B],Et);nt(Te.x,Te.y,-K),tt===0&&$.push(Te)}tt===0&&Ge.push($)}}Ee=wo.triangulateShape(je,Ge)}const Pe=Ee.length,rt=M+k;for(let je=0;je<Z;je++){const Ge=y?X(L[je],ce[je],rt):L[je];D?(z.copy(I.normals[0]).multiplyScalar(Ge.x),P.copy(I.binormals[0]).multiplyScalar(Ge.y),G.copy(R[0]).add(z).add(P),nt(G.x,G.y,G.z)):nt(Ge.x,Ge.y,0)}for(let je=1;je<=v;je++)for(let Ge=0;Ge<Z;Ge++){const Oe=y?X(L[Ge],ce[Ge],rt):L[Ge];D?(z.copy(I.normals[je]).multiplyScalar(Oe.x),P.copy(I.binormals[je]).multiplyScalar(Oe.y),G.copy(R[je]).add(z).add(P),nt(G.x,G.y,G.z)):nt(Oe.x,Oe.y,b/v*je)}for(let je=T-1;je>=0;je--){const Ge=je/T,Oe=w*Math.cos(Ge*Math.PI/2),tt=M*Math.sin(Ge*Math.PI/2)+k;for(let K=0,Et=ne.length;K<Et;K++){const at=X(ne[K],pe[K],tt);nt(at.x,at.y,b+Oe)}for(let K=0,Et=W.length;K<Et;K++){const at=W[K];q=we[K];for(let Tt=0,Ye=at.length;Tt<Ye;Tt++){const $=X(at[Tt],q[Tt],tt);D?nt($.x,$.y+R[v-1].y,R[v-1].x+Oe):nt($.x,$.y,b+Oe)}}}me(),Ce();function me(){const je=s.length/3;if(y){let Ge=0,Oe=Z*Ge;for(let tt=0;tt<Pe;tt++){const K=Ee[tt];ft(K[2]+Oe,K[1]+Oe,K[0]+Oe)}Ge=v+T*2,Oe=Z*Ge;for(let tt=0;tt<Pe;tt++){const K=Ee[tt];ft(K[0]+Oe,K[1]+Oe,K[2]+Oe)}}else{for(let Ge=0;Ge<Pe;Ge++){const Oe=Ee[Ge];ft(Oe[2],Oe[1],Oe[0])}for(let Ge=0;Ge<Pe;Ge++){const Oe=Ee[Ge];ft(Oe[0]+Z*v,Oe[1]+Z*v,Oe[2]+Z*v)}}n.addGroup(je,s.length/3-je,0)}function Ce(){const je=s.length/3;let Ge=0;Fe(ne,Ge),Ge+=ne.length;for(let Oe=0,tt=W.length;Oe<tt;Oe++){const K=W[Oe];Fe(K,Ge),Ge+=K.length}n.addGroup(je,s.length/3-je,1)}function Fe(je,Ge){let Oe=je.length;for(;--Oe>=0;){const tt=Oe;let K=Oe-1;K<0&&(K=je.length-1);for(let Et=0,at=v+T*2;Et<at;Et++){const Tt=Z*Et,Ye=Z*(Et+1),$=Ge+tt+Tt,B=Ge+K+Tt,oe=Ge+K+Ye,Te=Ge+tt+Ye;sn($,B,oe,Te)}}}function nt(je,Ge,Oe){p.push(je),p.push(Ge),p.push(Oe)}function ft(je,Ge,Oe){pn(je),pn(Ge),pn(Oe);const tt=s.length/3,K=j.generateTopUV(n,s,tt-3,tt-2,tt-1);Ot(K[0]),Ot(K[1]),Ot(K[2])}function sn(je,Ge,Oe,tt){pn(je),pn(Ge),pn(tt),pn(Ge),pn(Oe),pn(tt);const K=s.length/3,Et=j.generateSideWallUV(n,s,K-6,K-3,K-2,K-1);Ot(Et[0]),Ot(Et[1]),Ot(Et[3]),Ot(Et[1]),Ot(Et[2]),Ot(Et[3])}function pn(je){s.push(p[je*3+0]),s.push(p[je*3+1]),s.push(p[je*3+2])}function Ot(je){a.push(je.x),a.push(je.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return NI(t,n,e)}static fromJSON(e,t){const n=[];for(let a=0,u=e.shapes.length;a<u;a++){const h=t[e.shapes[a]];n.push(h)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new Vb[s.type]().fromJSON(s)),new Cy(n,e.options)}}const EI={generateTopUV:function(i,e,t,n,s){const a=e[t*3],u=e[t*3+1],h=e[n*3],p=e[n*3+1],m=e[s*3],v=e[s*3+1];return[new ze(a,u),new ze(h,p),new ze(m,v)]},generateSideWallUV:function(i,e,t,n,s,a){const u=e[t*3],h=e[t*3+1],p=e[t*3+2],m=e[n*3],v=e[n*3+1],b=e[n*3+2],y=e[s*3],w=e[s*3+1],M=e[s*3+2],k=e[a*3],T=e[a*3+1],N=e[a*3+2];return Math.abs(h-v)<Math.abs(u-m)?[new ze(u,1-p),new ze(m,1-b),new ze(y,1-M),new ze(k,1-N)]:[new ze(h,1-p),new ze(v,1-b),new ze(w,1-M),new ze(T,1-N)]}};function NI(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,s=i.length;n<s;n++){const a=i[n];t.shapes.push(a.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Ry extends Tu{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,s=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ry(e.radius,e.detail)}}class jy extends Qt{constructor(e=[new ze(0,-.5),new ze(.5,0),new ze(0,.5)],t=12,n=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:s},t=Math.floor(t),s=qt(s,0,Math.PI*2);const a=[],u=[],h=[],p=[],m=[],v=1/t,b=new Y,y=new ze,w=new Y,M=new Y,k=new Y;let T=0,N=0;for(let j=0;j<=e.length-1;j++)switch(j){case 0:T=e[j+1].x-e[j].x,N=e[j+1].y-e[j].y,w.x=N*1,w.y=-T,w.z=N*0,k.copy(w),w.normalize(),p.push(w.x,w.y,w.z);break;case e.length-1:p.push(k.x,k.y,k.z);break;default:T=e[j+1].x-e[j].x,N=e[j+1].y-e[j].y,w.x=N*1,w.y=-T,w.z=N*0,M.copy(w),w.x+=k.x,w.y+=k.y,w.z+=k.z,w.normalize(),p.push(w.x,w.y,w.z),k.copy(M)}for(let j=0;j<=t;j++){const R=n+j*v*s,D=Math.sin(R),I=Math.cos(R);for(let P=0;P<=e.length-1;P++){b.x=e[P].x*D,b.y=e[P].y,b.z=e[P].x*I,u.push(b.x,b.y,b.z),y.x=j/t,y.y=P/(e.length-1),h.push(y.x,y.y);const z=p[3*P+0]*D,G=p[3*P+1],U=p[3*P+0]*I;m.push(z,G,U)}}for(let j=0;j<t;j++)for(let R=0;R<e.length-1;R++){const D=R+j*e.length,I=D,P=D+e.length,z=D+e.length+1,G=D+1;a.push(I,P,G),a.push(z,G,P)}this.setIndex(a),this.setAttribute("position",new wt(u,3)),this.setAttribute("uv",new wt(h,2)),this.setAttribute("normal",new wt(m,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jy(e.points,e.segments,e.phiStart,e.phiLength)}}class e0 extends Tu{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new e0(e.radius,e.detail)}}class up extends Qt{constructor(e=1,t=1,n=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:s};const a=e/2,u=t/2,h=Math.floor(n),p=Math.floor(s),m=h+1,v=p+1,b=e/h,y=t/p,w=[],M=[],k=[],T=[];for(let N=0;N<v;N++){const j=N*y-u;for(let R=0;R<m;R++){const D=R*b-a;M.push(D,-j,0),k.push(0,0,1),T.push(R/h),T.push(1-N/p)}}for(let N=0;N<p;N++)for(let j=0;j<h;j++){const R=j+m*N,D=j+m*(N+1),I=j+1+m*(N+1),P=j+1+m*N;w.push(R,D,P),w.push(D,I,P)}this.setIndex(w),this.setAttribute("position",new wt(M,3)),this.setAttribute("normal",new wt(k,3)),this.setAttribute("uv",new wt(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new up(e.width,e.height,e.widthSegments,e.heightSegments)}}class Dy extends Qt{constructor(e=.5,t=1,n=32,s=1,a=0,u=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:s,thetaStart:a,thetaLength:u},n=Math.max(3,n),s=Math.max(1,s);const h=[],p=[],m=[],v=[];let b=e;const y=(t-e)/s,w=new Y,M=new ze;for(let k=0;k<=s;k++){for(let T=0;T<=n;T++){const N=a+T/n*u;w.x=b*Math.cos(N),w.y=b*Math.sin(N),p.push(w.x,w.y,w.z),m.push(0,0,1),M.x=(w.x/t+1)/2,M.y=(w.y/t+1)/2,v.push(M.x,M.y)}b+=y}for(let k=0;k<s;k++){const T=k*(n+1);for(let N=0;N<n;N++){const j=N+T,R=j,D=j+n+1,I=j+n+2,P=j+1;h.push(R,D,P),h.push(D,I,P)}}this.setIndex(h),this.setAttribute("position",new wt(p,3)),this.setAttribute("normal",new wt(m,3)),this.setAttribute("uv",new wt(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dy(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Iy extends Qt{constructor(e=new Hd([new ze(0,.5),new ze(-.5,-.5),new ze(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],s=[],a=[],u=[];let h=0,p=0;if(Array.isArray(e)===!1)m(e);else for(let v=0;v<e.length;v++)m(e[v]),this.addGroup(h,p,v),h+=p,p=0;this.setIndex(n),this.setAttribute("position",new wt(s,3)),this.setAttribute("normal",new wt(a,3)),this.setAttribute("uv",new wt(u,2));function m(v){const b=s.length/3,y=v.extractPoints(t);let w=y.shape;const M=y.holes;wo.isClockWise(w)===!1&&(w=w.reverse());for(let T=0,N=M.length;T<N;T++){const j=M[T];wo.isClockWise(j)===!0&&(M[T]=j.reverse())}const k=wo.triangulateShape(w,M);for(let T=0,N=M.length;T<N;T++){const j=M[T];w=w.concat(j)}for(let T=0,N=w.length;T<N;T++){const j=w[T];s.push(j.x,j.y,0),a.push(0,0,1),u.push(j.x,j.y)}for(let T=0,N=k.length;T<N;T++){const j=k[T],R=j[0]+b,D=j[1]+b,I=j[2]+b;n.push(R,D,I),p+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return TI(t,e)}static fromJSON(e,t){const n=[];for(let s=0,a=e.shapes.length;s<a;s++){const u=t[e.shapes[s]];n.push(u)}return new Iy(n,e.curveSegments)}}function TI(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const s=i[t];e.shapes.push(s.uuid)}else e.shapes.push(i.uuid);return e}class t0 extends Qt{constructor(e=1,t=32,n=16,s=0,a=Math.PI*2,u=0,h=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:s,phiLength:a,thetaStart:u,thetaLength:h},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const p=Math.min(u+h,Math.PI);let m=0;const v=[],b=new Y,y=new Y,w=[],M=[],k=[],T=[];for(let N=0;N<=n;N++){const j=[],R=N/n;let D=0;N===0&&u===0?D=.5/t:N===n&&p===Math.PI&&(D=-.5/t);for(let I=0;I<=t;I++){const P=I/t;b.x=-e*Math.cos(s+P*a)*Math.sin(u+R*h),b.y=e*Math.cos(u+R*h),b.z=e*Math.sin(s+P*a)*Math.sin(u+R*h),M.push(b.x,b.y,b.z),y.copy(b).normalize(),k.push(y.x,y.y,y.z),T.push(P+D,1-R),j.push(m++)}v.push(j)}for(let N=0;N<n;N++)for(let j=0;j<t;j++){const R=v[N][j+1],D=v[N][j],I=v[N+1][j],P=v[N+1][j+1];(N!==0||u>0)&&w.push(R,D,P),(N!==n-1||p<Math.PI)&&w.push(D,I,P)}this.setIndex(w),this.setAttribute("position",new wt(M,3)),this.setAttribute("normal",new wt(k,3)),this.setAttribute("uv",new wt(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new t0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Oy extends Tu{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Oy(e.radius,e.detail)}}class Ly extends Qt{constructor(e=1,t=.4,n=12,s=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:s,arc:a},n=Math.floor(n),s=Math.floor(s);const u=[],h=[],p=[],m=[],v=new Y,b=new Y,y=new Y;for(let w=0;w<=n;w++)for(let M=0;M<=s;M++){const k=M/s*a,T=w/n*Math.PI*2;b.x=(e+t*Math.cos(T))*Math.cos(k),b.y=(e+t*Math.cos(T))*Math.sin(k),b.z=t*Math.sin(T),h.push(b.x,b.y,b.z),v.x=e*Math.cos(k),v.y=e*Math.sin(k),y.subVectors(b,v).normalize(),p.push(y.x,y.y,y.z),m.push(M/s),m.push(w/n)}for(let w=1;w<=n;w++)for(let M=1;M<=s;M++){const k=(s+1)*w+M-1,T=(s+1)*(w-1)+M-1,N=(s+1)*(w-1)+M,j=(s+1)*w+M;u.push(k,T,j),u.push(T,N,j)}this.setIndex(u),this.setAttribute("position",new wt(h,3)),this.setAttribute("normal",new wt(p,3)),this.setAttribute("uv",new wt(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ly(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Uy extends Qt{constructor(e=1,t=.4,n=64,s=8,a=2,u=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:s,p:a,q:u},n=Math.floor(n),s=Math.floor(s);const h=[],p=[],m=[],v=[],b=new Y,y=new Y,w=new Y,M=new Y,k=new Y,T=new Y,N=new Y;for(let R=0;R<=n;++R){const D=R/n*a*Math.PI*2;j(D,a,u,e,w),j(D+.01,a,u,e,M),T.subVectors(M,w),N.addVectors(M,w),k.crossVectors(T,N),N.crossVectors(k,T),k.normalize(),N.normalize();for(let I=0;I<=s;++I){const P=I/s*Math.PI*2,z=-t*Math.cos(P),G=t*Math.sin(P);b.x=w.x+(z*N.x+G*k.x),b.y=w.y+(z*N.y+G*k.y),b.z=w.z+(z*N.z+G*k.z),p.push(b.x,b.y,b.z),y.subVectors(b,w).normalize(),m.push(y.x,y.y,y.z),v.push(R/n),v.push(I/s)}}for(let R=1;R<=n;R++)for(let D=1;D<=s;D++){const I=(s+1)*(R-1)+(D-1),P=(s+1)*R+(D-1),z=(s+1)*R+D,G=(s+1)*(R-1)+D;h.push(I,P,G),h.push(P,z,G)}this.setIndex(h),this.setAttribute("position",new wt(p,3)),this.setAttribute("normal",new wt(m,3)),this.setAttribute("uv",new wt(v,2));function j(R,D,I,P,z){const G=Math.cos(R),U=Math.sin(R),L=I/D*R,W=Math.cos(L);z.x=P*(2+W)*.5*G,z.y=P*(2+W)*U*.5,z.z=P*Math.sin(L)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Uy(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Py extends Qt{constructor(e=new uS(new Y(-1,-1,0),new Y(-1,1,0),new Y(1,1,0)),t=64,n=1,s=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:s,closed:a};const u=e.computeFrenetFrames(t,a);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals;const h=new Y,p=new Y,m=new ze;let v=new Y;const b=[],y=[],w=[],M=[];k(),this.setIndex(M),this.setAttribute("position",new wt(b,3)),this.setAttribute("normal",new wt(y,3)),this.setAttribute("uv",new wt(w,2));function k(){for(let R=0;R<t;R++)T(R);T(a===!1?t:0),j(),N()}function T(R){v=e.getPointAt(R/t,v);const D=u.normals[R],I=u.binormals[R];for(let P=0;P<=s;P++){const z=P/s*Math.PI*2,G=Math.sin(z),U=-Math.cos(z);p.x=U*D.x+G*I.x,p.y=U*D.y+G*I.y,p.z=U*D.z+G*I.z,p.normalize(),y.push(p.x,p.y,p.z),h.x=v.x+n*p.x,h.y=v.y+n*p.y,h.z=v.z+n*p.z,b.push(h.x,h.y,h.z)}}function N(){for(let R=1;R<=t;R++)for(let D=1;D<=s;D++){const I=(s+1)*(R-1)+(D-1),P=(s+1)*R+(D-1),z=(s+1)*R+D,G=(s+1)*(R-1)+D;M.push(I,P,G),M.push(P,z,G)}}function j(){for(let R=0;R<=t;R++)for(let D=0;D<=s;D++)m.x=R/t,m.y=D/s,w.push(m.x,m.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Py(new Vb[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class $A extends Qt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,s=new Y,a=new Y;if(e.index!==null){const u=e.attributes.position,h=e.index;let p=e.groups;p.length===0&&(p=[{start:0,count:h.count,materialIndex:0}]);for(let m=0,v=p.length;m<v;++m){const b=p[m],y=b.start,w=b.count;for(let M=y,k=y+w;M<k;M+=3)for(let T=0;T<3;T++){const N=h.getX(M+T),j=h.getX(M+(T+1)%3);s.fromBufferAttribute(u,N),a.fromBufferAttribute(u,j),YE(s,a,n)===!0&&(t.push(s.x,s.y,s.z),t.push(a.x,a.y,a.z))}}}else{const u=e.attributes.position;for(let h=0,p=u.count/3;h<p;h++)for(let m=0;m<3;m++){const v=3*h+m,b=3*h+(m+1)%3;s.fromBufferAttribute(u,v),a.fromBufferAttribute(u,b),YE(s,a,n)===!0&&(t.push(s.x,s.y,s.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new wt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function YE(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(s)===!0?!1:(t.add(n),t.add(s),!0)}var KE=Object.freeze({__proto__:null,BoxGeometry:Jd,CapsuleGeometry:Ny,CircleGeometry:Ty,ConeGeometry:Qg,CylinderGeometry:Jg,DodecahedronGeometry:Ay,EdgesGeometry:PA,ExtrudeGeometry:Cy,IcosahedronGeometry:Ry,LatheGeometry:jy,OctahedronGeometry:e0,PlaneGeometry:up,PolyhedronGeometry:Tu,RingGeometry:Dy,ShapeGeometry:Iy,SphereGeometry:t0,TetrahedronGeometry:Oy,TorusGeometry:Ly,TorusKnotGeometry:Uy,TubeGeometry:Py,WireframeGeometry:$A});class YA extends er{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new vt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class hS extends Xr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class fS extends er{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new vt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Eu,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new da,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class KA extends fS{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ze(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return qt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new vt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new vt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new vt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class ZA extends er{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new vt(16777215),this.specular=new vt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Eu,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new da,this.combine=Yg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class JA extends er{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new vt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Eu,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class QA extends er{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Eu,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class ek extends er{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Eu,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new da,this.combine=Yg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class pS extends er{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=hA,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class mS extends er{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class tk extends er{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new vt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Eu,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nk extends yr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Bd(i,e){return!i||i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function ik(i){function e(s,a){return i[s]-i[a]}const t=i.length,n=new Array(t);for(let s=0;s!==t;++s)n[s]=s;return n.sort(e),n}function fw(i,e,t){const n=i.length,s=new i.constructor(n);for(let a=0,u=0;u!==n;++a){const h=t[a]*e;for(let p=0;p!==e;++p)s[u++]=i[h+p]}return s}function gS(i,e,t,n){let s=1,a=i[0];for(;a!==void 0&&a[n]===void 0;)a=i[s++];if(a===void 0)return;let u=a[n];if(u!==void 0)if(Array.isArray(u))do u=a[n],u!==void 0&&(e.push(a.time),t.push(...u)),a=i[s++];while(a!==void 0);else if(u.toArray!==void 0)do u=a[n],u!==void 0&&(e.push(a.time),u.toArray(t,t.length)),a=i[s++];while(a!==void 0);else do u=a[n],u!==void 0&&(e.push(a.time),t.push(u)),a=i[s++];while(a!==void 0)}function AI(i,e,t,n,s=30){const a=i.clone();a.name=e;const u=[];for(let p=0;p<a.tracks.length;++p){const m=a.tracks[p],v=m.getValueSize(),b=[],y=[];for(let w=0;w<m.times.length;++w){const M=m.times[w]*s;if(!(M<t||M>=n)){b.push(m.times[w]);for(let k=0;k<v;++k)y.push(m.values[w*v+k])}}b.length!==0&&(m.times=Bd(b,m.times.constructor),m.values=Bd(y,m.values.constructor),u.push(m))}a.tracks=u;let h=1/0;for(let p=0;p<a.tracks.length;++p)h>a.tracks[p].times[0]&&(h=a.tracks[p].times[0]);for(let p=0;p<a.tracks.length;++p)a.tracks[p].shift(-1*h);return a.resetDuration(),a}function kI(i,e=0,t=i,n=30){n<=0&&(n=30);const s=t.tracks.length,a=e/n;for(let u=0;u<s;++u){const h=t.tracks[u],p=h.ValueTypeName;if(p==="bool"||p==="string")continue;const m=i.tracks.find(function(N){return N.name===h.name&&N.ValueTypeName===p});if(m===void 0)continue;let v=0;const b=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=b/3);let y=0;const w=m.getValueSize();m.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=w/3);const M=h.times.length-1;let k;if(a<=h.times[0]){const N=v,j=b-v;k=h.values.slice(N,j)}else if(a>=h.times[M]){const N=M*b+v,j=N+b-v;k=h.values.slice(N,j)}else{const N=h.createInterpolant(),j=v,R=b-v;N.evaluate(a),k=N.resultBuffer.slice(j,R)}p==="quaternion"&&new qr().fromArray(k).normalize().conjugate().toArray(k);const T=m.times.length;for(let N=0;N<T;++N){const j=N*w+y;if(p==="quaternion")qr.multiplyQuaternionsFlat(m.values,j,k,0,m.values,j);else{const R=w-y*2;for(let D=0;D<R;++D)m.values[j+D]-=k[D]}}}return i.blendMode=Kw,i}class CI{static convertArray(e,t){return Bd(e,t)}static isTypedArray(e){return _A(e)}static getKeyframeOrder(e){return ik(e)}static sortedArray(e,t,n){return fw(e,t,n)}static flattenJSON(e,t,n,s){gS(e,t,n,s)}static subclip(e,t,n,s,a=30){return AI(e,t,n,s,a)}static makeClipAdditive(e,t=0,n=e,s=30){return kI(e,t,n,s)}}class n0{constructor(e,t,n,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,s=t[n],a=t[n-1];e:{t:{let u;n:{i:if(!(e<s)){for(let h=n+2;;){if(s===void 0){if(e<a)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===h)break;if(a=s,s=t[++n],e<s)break t}u=t.length;break n}if(!(e>=a)){const h=t[1];e<h&&(n=2,a=h);for(let p=n-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===p)break;if(s=a,a=t[--n-1],e>=a)break t}u=n,n=0;break n}break e}for(;n<u;){const h=n+u>>>1;e<t[h]?u=h:n=h+1}if(s=t[n],a=t[n-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,a,s)}return this.interpolate_(n,a,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,a=e*s;for(let u=0;u!==s;++u)t[u]=n[a+u];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class sk extends n0{constructor(e,t,n,s){super(e,t,n,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Pd,endingEnd:Pd}}intervalChanged_(e,t,n){const s=this.parameterPositions;let a=e-2,u=e+1,h=s[a],p=s[u];if(h===void 0)switch(this.getSettings_().endingStart){case zd:a=e,h=2*t-n;break;case Dg:a=s.length-2,h=t+s[a]-s[a+1];break;default:a=e,h=n}if(p===void 0)switch(this.getSettings_().endingEnd){case zd:u=e,p=2*n-t;break;case Dg:u=1,p=n+s[1]-s[0];break;default:u=e-1,p=t}const m=(n-t)*.5,v=this.valueSize;this._weightPrev=m/(t-h),this._weightNext=m/(p-n),this._offsetPrev=a*v,this._offsetNext=u*v}interpolate_(e,t,n,s){const a=this.resultBuffer,u=this.sampleValues,h=this.valueSize,p=e*h,m=p-h,v=this._offsetPrev,b=this._offsetNext,y=this._weightPrev,w=this._weightNext,M=(n-t)/(s-t),k=M*M,T=k*M,N=-y*T+2*y*k-y*M,j=(1+y)*T+(-1.5-2*y)*k+(-.5+y)*M+1,R=(-1-w)*T+(1.5+w)*k+.5*M,D=w*T-w*k;for(let I=0;I!==h;++I)a[I]=N*u[v+I]+j*u[m+I]+R*u[p+I]+D*u[b+I];return a}}class xS extends n0{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e,t,n,s){const a=this.resultBuffer,u=this.sampleValues,h=this.valueSize,p=e*h,m=p-h,v=(n-t)/(s-t),b=1-v;for(let y=0;y!==h;++y)a[y]=u[m+y]*b+u[p+y]*v;return a}}class rk extends n0{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class qa{constructor(e,t,n,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Bd(t,this.TimeBufferType),this.values=Bd(n,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Bd(e.times,Array),values:Bd(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(n.interpolation=s)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new rk(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new xS(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new sk(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case jg:t=this.InterpolantFactoryMethodDiscrete;break;case zb:t=this.InterpolantFactoryMethodLinear;break;case Bv:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return ut("KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return jg;case this.InterpolantFactoryMethodLinear:return zb;case this.InterpolantFactoryMethodSmooth:return Bv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,s=t.length;n!==s;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,s=t.length;n!==s;++n)t[n]*=e}return this}trim(e,t){const n=this.times,s=n.length;let a=0,u=s-1;for(;a!==s&&n[a]<e;)++a;for(;u!==-1&&n[u]>t;)--u;if(++u,a!==0||u!==s){a>=u&&(u=Math.max(u,1),a=u-1);const h=this.getValueSize();this.times=n.slice(a,u),this.values=this.values.slice(a*h,u*h)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(Ct("KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,s=this.values,a=n.length;a===0&&(Ct("KeyframeTrack: Track is empty.",this),e=!1);let u=null;for(let h=0;h!==a;h++){const p=n[h];if(typeof p=="number"&&isNaN(p)){Ct("KeyframeTrack: Time is not a valid number.",this,h,p),e=!1;break}if(u!==null&&u>p){Ct("KeyframeTrack: Out of order keys.",this,h,p,u),e=!1;break}u=p}if(s!==void 0&&_A(s))for(let h=0,p=s.length;h!==p;++h){const m=s[h];if(isNaN(m)){Ct("KeyframeTrack: Value is not a valid number.",this,h,m),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),s=this.getInterpolation()===Bv,a=e.length-1;let u=1;for(let h=1;h<a;++h){let p=!1;const m=e[h],v=e[h+1];if(m!==v&&(h!==1||m!==e[0]))if(s)p=!0;else{const b=h*n,y=b-n,w=b+n;for(let M=0;M!==n;++M){const k=t[b+M];if(k!==t[y+M]||k!==t[w+M]){p=!0;break}}}if(p){if(h!==u){e[u]=e[h];const b=h*n,y=u*n;for(let w=0;w!==n;++w)t[y+w]=t[b+w]}++u}}if(a>0){e[u]=e[a];for(let h=a*n,p=u*n,m=0;m!==n;++m)t[p+m]=t[h+m];++u}return u!==e.length?(this.times=e.slice(0,u),this.values=t.slice(0,u*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,s=new n(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}qa.prototype.ValueTypeName="";qa.prototype.TimeBufferType=Float32Array;qa.prototype.ValueBufferType=Float32Array;qa.prototype.DefaultInterpolation=zb;class Qd extends qa{constructor(e,t,n){super(e,t,n)}}Qd.prototype.ValueTypeName="bool";Qd.prototype.ValueBufferType=Array;Qd.prototype.DefaultInterpolation=jg;Qd.prototype.InterpolantFactoryMethodLinear=void 0;Qd.prototype.InterpolantFactoryMethodSmooth=void 0;class vS extends qa{constructor(e,t,n,s){super(e,t,n,s)}}vS.prototype.ValueTypeName="color";class Fg extends qa{constructor(e,t,n,s){super(e,t,n,s)}}Fg.prototype.ValueTypeName="number";class ak extends n0{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e,t,n,s){const a=this.resultBuffer,u=this.sampleValues,h=this.valueSize,p=(n-t)/(s-t);let m=e*h;for(let v=m+h;m!==v;m+=4)qr.slerpFlat(a,0,u,m-h,u,m,p);return a}}class i0 extends qa{constructor(e,t,n,s){super(e,t,n,s)}InterpolantFactoryMethodLinear(e){return new ak(this.times,this.values,this.getValueSize(),e)}}i0.prototype.ValueTypeName="quaternion";i0.prototype.InterpolantFactoryMethodSmooth=void 0;class eh extends qa{constructor(e,t,n){super(e,t,n)}}eh.prototype.ValueTypeName="string";eh.prototype.ValueBufferType=Array;eh.prototype.DefaultInterpolation=jg;eh.prototype.InterpolantFactoryMethodLinear=void 0;eh.prototype.InterpolantFactoryMethodSmooth=void 0;class Vg extends qa{constructor(e,t,n,s){super(e,t,n,s)}}Vg.prototype.ValueTypeName="vector";class Hg{constructor(e="",t=-1,n=[],s=fy){this.name=e,this.tracks=n,this.duration=t,this.blendMode=s,this.uuid=ca(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,s=1/(e.fps||1);for(let u=0,h=n.length;u!==h;++u)t.push(jI(n[u]).scale(s));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a.userData=JSON.parse(e.userData||"{}"),a}static toJSON(e){const t=[],n=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let a=0,u=n.length;a!==u;++a)t.push(qa.toJSON(n[a]));return s}static CreateFromMorphTargetSequence(e,t,n,s){const a=t.length,u=[];for(let h=0;h<a;h++){let p=[],m=[];p.push((h+a-1)%a,h,(h+1)%a),m.push(0,1,0);const v=ik(p);p=fw(p,1,v),m=fw(m,1,v),!s&&p[0]===0&&(p.push(a),m.push(m[0])),u.push(new Fg(".morphTargetInfluences["+t[h].name+"]",p,m).scale(1/n))}return new this(e,-1,u)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const s=e;n=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<n.length;s++)if(n[s].name===t)return n[s];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const s={},a=/^([\w-]*?)([\d]+)$/;for(let h=0,p=e.length;h<p;h++){const m=e[h],v=m.name.match(a);if(v&&v.length>1){const b=v[1];let y=s[b];y||(s[b]=y=[]),y.push(m)}}const u=[];for(const h in s)u.push(this.CreateFromMorphTargetSequence(h,s[h],t,n));return u}static parseAnimation(e,t){if(ut("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return Ct("AnimationClip: No animation in JSONLoader data."),null;const n=function(b,y,w,M,k){if(w.length!==0){const T=[],N=[];gS(w,T,N,M),T.length!==0&&k.push(new b(y,T,N))}},s=[],a=e.name||"default",u=e.fps||30,h=e.blendMode;let p=e.length||-1;const m=e.hierarchy||[];for(let b=0;b<m.length;b++){const y=m[b].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const w={};let M;for(M=0;M<y.length;M++)if(y[M].morphTargets)for(let k=0;k<y[M].morphTargets.length;k++)w[y[M].morphTargets[k]]=-1;for(const k in w){const T=[],N=[];for(let j=0;j!==y[M].morphTargets.length;++j){const R=y[M];T.push(R.time),N.push(R.morphTarget===k?1:0)}s.push(new Fg(".morphTargetInfluence["+k+"]",T,N))}p=w.length*u}else{const w=".bones["+t[b].name+"]";n(Vg,w+".position",y,"pos",s),n(i0,w+".quaternion",y,"rot",s),n(Vg,w+".scale",y,"scl",s)}}return s.length===0?null:new this(a,p,s,h)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,s=e.length;n!==s;++n){const a=this.tracks[n];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function RI(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Fg;case"vector":case"vector2":case"vector3":case"vector4":return Vg;case"color":return vS;case"quaternion":return i0;case"bool":case"boolean":return Qd;case"string":return eh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function jI(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=RI(i.type);if(i.times===void 0){const t=[],n=[];gS(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const ul={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class bS{constructor(e,t,n){const s=this;let a=!1,u=0,h=0,p;const m=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this._abortController=null,this.itemStart=function(v){h++,a===!1&&s.onStart!==void 0&&s.onStart(v,u,h),a=!0},this.itemEnd=function(v){u++,s.onProgress!==void 0&&s.onProgress(v,u,h),u===h&&(a=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(v){s.onError!==void 0&&s.onError(v)},this.resolveURL=function(v){return p?p(v):v},this.setURLModifier=function(v){return p=v,this},this.addHandler=function(v,b){return m.push(v,b),this},this.removeHandler=function(v){const b=m.indexOf(v);return b!==-1&&m.splice(b,2),this},this.getHandler=function(v){for(let b=0,y=m.length;b<y;b+=2){const w=m[b],M=m[b+1];if(w.global&&(w.lastIndex=0),w.test(v))return M}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const ok=new bS;class $r{constructor(e){this.manager=e!==void 0?e:ok,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(s,a){n.load(e,s,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}$r.DEFAULT_MATERIAL_NAME="__DEFAULT";const nc={};class DI extends Error{constructor(e,t){super(e),this.response=t}}class uc extends $r{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=ul.get(`file:${e}`);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(nc[e]!==void 0){nc[e].push({onLoad:t,onProgress:n,onError:s});return}nc[e]=[],nc[e].push({onLoad:t,onProgress:n,onError:s});const u=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),h=this.mimeType,p=this.responseType;fetch(u).then(m=>{if(m.status===200||m.status===0){if(m.status===0&&ut("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||m.body===void 0||m.body.getReader===void 0)return m;const v=nc[e],b=m.body.getReader(),y=m.headers.get("X-File-Size")||m.headers.get("Content-Length"),w=y?parseInt(y):0,M=w!==0;let k=0;const T=new ReadableStream({start(N){j();function j(){b.read().then(({done:R,value:D})=>{if(R)N.close();else{k+=D.byteLength;const I=new ProgressEvent("progress",{lengthComputable:M,loaded:k,total:w});for(let P=0,z=v.length;P<z;P++){const G=v[P];G.onProgress&&G.onProgress(I)}N.enqueue(D),j()}},R=>{N.error(R)})}}});return new Response(T)}else throw new DI(`fetch for "${m.url}" responded with ${m.status}: ${m.statusText}`,m)}).then(m=>{switch(p){case"arraybuffer":return m.arrayBuffer();case"blob":return m.blob();case"document":return m.text().then(v=>new DOMParser().parseFromString(v,h));case"json":return m.json();default:if(h==="")return m.text();{const b=/charset="?([^;"\s]*)"?/i.exec(h),y=b&&b[1]?b[1].toLowerCase():void 0,w=new TextDecoder(y);return m.arrayBuffer().then(M=>w.decode(M))}}}).then(m=>{ul.add(`file:${e}`,m);const v=nc[e];delete nc[e];for(let b=0,y=v.length;b<y;b++){const w=v[b];w.onLoad&&w.onLoad(m)}}).catch(m=>{const v=nc[e];if(v===void 0)throw this.manager.itemError(e),m;delete nc[e];for(let b=0,y=v.length;b<y;b++){const w=v[b];w.onError&&w.onError(m)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class II extends $r{constructor(e){super(e)}load(e,t,n,s){const a=this,u=new uc(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(h){try{t(a.parse(JSON.parse(h)))}catch(p){s?s(p):Ct(p),a.manager.itemError(e)}},n,s)}parse(e){const t=[];for(let n=0;n<e.length;n++){const s=Hg.parse(e[n]);t.push(s)}return t}}class OI extends $r{constructor(e){super(e)}load(e,t,n,s){const a=this,u=[],h=new Ey,p=new uc(this.manager);p.setPath(this.path),p.setResponseType("arraybuffer"),p.setRequestHeader(this.requestHeader),p.setWithCredentials(a.withCredentials);let m=0;function v(b){p.load(e[b],function(y){const w=a.parse(y,!0);u[b]={width:w.width,height:w.height,format:w.format,mipmaps:w.mipmaps},m+=1,m===6&&(w.mipmapCount===1&&(h.minFilter=ei),h.image=u,h.format=w.format,h.needsUpdate=!0,t&&t(h))},n,s)}if(Array.isArray(e))for(let b=0,y=e.length;b<y;++b)v(b);else p.load(e,function(b){const y=a.parse(b,!0);if(y.isCubemap){const w=y.mipmaps.length/y.mipmapCount;for(let M=0;M<w;M++){u[M]={mipmaps:[]};for(let k=0;k<y.mipmapCount;k++)u[M].mipmaps.push(y.mipmaps[M*y.mipmapCount+k]),u[M].format=y.format,u[M].width=y.width,u[M].height=y.height}h.image=u}else h.image.width=y.width,h.image.height=y.height,h.mipmaps=y.mipmaps;y.mipmapCount===1&&(h.minFilter=ei),h.format=y.format,h.needsUpdate=!0,t&&t(h)},n,s);return h}}const jf=new WeakMap;class Gg extends $r{constructor(e){super(e)}load(e,t,n,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,u=ul.get(`image:${e}`);if(u!==void 0){if(u.complete===!0)a.manager.itemStart(e),setTimeout(function(){t&&t(u),a.manager.itemEnd(e)},0);else{let b=jf.get(u);b===void 0&&(b=[],jf.set(u,b)),b.push({onLoad:t,onError:s})}return u}const h=Lg("img");function p(){v(),t&&t(this);const b=jf.get(this)||[];for(let y=0;y<b.length;y++){const w=b[y];w.onLoad&&w.onLoad(this)}jf.delete(this),a.manager.itemEnd(e)}function m(b){v(),s&&s(b),ul.remove(`image:${e}`);const y=jf.get(this)||[];for(let w=0;w<y.length;w++){const M=y[w];M.onError&&M.onError(b)}jf.delete(this),a.manager.itemError(e),a.manager.itemEnd(e)}function v(){h.removeEventListener("load",p,!1),h.removeEventListener("error",m,!1)}return h.addEventListener("load",p,!1),h.addEventListener("error",m,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(h.crossOrigin=this.crossOrigin),ul.add(`image:${e}`,h),a.manager.itemStart(e),h.src=e,h}}class LI extends $r{constructor(e){super(e)}load(e,t,n,s){const a=new Zg;a.colorSpace=Js;const u=new Gg(this.manager);u.setCrossOrigin(this.crossOrigin),u.setPath(this.path);let h=0;function p(m){u.load(e[m],function(v){a.images[m]=v,h++,h===6&&(a.needsUpdate=!0,t&&t(a))},void 0,s)}for(let m=0;m<e.length;++m)p(m);return a}}class UI extends $r{constructor(e){super(e)}load(e,t,n,s){const a=this,u=new Va,h=new uc(this.manager);return h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setPath(this.path),h.setWithCredentials(a.withCredentials),h.load(e,function(p){let m;try{m=a.parse(p)}catch(v){if(s!==void 0)s(v);else{v(v);return}}m.image!==void 0?u.image=m.image:m.data!==void 0&&(u.image.width=m.width,u.image.height=m.height,u.image.data=m.data),u.wrapS=m.wrapS!==void 0?m.wrapS:Gr,u.wrapT=m.wrapT!==void 0?m.wrapT:Gr,u.magFilter=m.magFilter!==void 0?m.magFilter:ei,u.minFilter=m.minFilter!==void 0?m.minFilter:ei,u.anisotropy=m.anisotropy!==void 0?m.anisotropy:1,m.colorSpace!==void 0&&(u.colorSpace=m.colorSpace),m.flipY!==void 0&&(u.flipY=m.flipY),m.format!==void 0&&(u.format=m.format),m.type!==void 0&&(u.type=m.type),m.mipmaps!==void 0&&(u.mipmaps=m.mipmaps,u.minFilter=cl),m.mipmapCount===1&&(u.minFilter=ei),m.generateMipmaps!==void 0&&(u.generateMipmaps=m.generateMipmaps),u.needsUpdate=!0,t&&t(u,m)},n,s),u}}class PI extends $r{constructor(e){super(e)}load(e,t,n,s){const a=new Ui,u=new Gg(this.manager);return u.setCrossOrigin(this.crossOrigin),u.setPath(this.path),u.load(e,function(h){a.image=h,a.needsUpdate=!0,t!==void 0&&t(a)},n,s),a}}class Au extends In{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new vt(e),this.intensity=t}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,t}}class lk extends Au{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(In.DEFAULT_UP),this.updateMatrix(),this.groundColor=new vt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}toJSON(e){const t=super.toJSON(e);return t.object.groundColor=this.groundColor.getHex(),t}}const v1=new Xt,ZE=new Y,JE=new Y;class yS{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ze(512,512),this.mapType=xr,this.map=null,this.mapPass=null,this.matrix=new Xt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new cp,this._frameExtents=new ze(1,1),this._viewportCount=1,this._viewports=[new Qn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;ZE.setFromMatrixPosition(e.matrixWorld),t.position.copy(ZE),JE.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(JE),t.updateMatrixWorld(),v1.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(v1,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(v1)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class zI extends yS{constructor(){super(new bs(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=ep*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||t.far;(n!==t.fov||s!==t.aspect||a!==t.far)&&(t.fov=n,t.aspect=s,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class ck extends Au{constructor(e,t,n=0,s=Math.PI/3,a=0,u=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(In.DEFAULT_UP),this.updateMatrix(),this.target=new In,this.distance=n,this.angle=s,this.penumbra=a,this.decay=u,this.map=null,this.shadow=new zI}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.angle=this.angle,t.object.decay=this.decay,t.object.penumbra=this.penumbra,t.object.target=this.target.uuid,this.map&&this.map.isTexture&&(t.object.map=this.map.toJSON(e).uuid),t.object.shadow=this.shadow.toJSON(),t}}class BI extends yS{constructor(){super(new bs(90,1,.5,500)),this.isPointLightShadow=!0}}class uk extends Au{constructor(e,t,n=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=s,this.shadow=new BI}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.decay=this.decay,t.object.shadow=this.shadow.toJSON(),t}}class th extends vy{constructor(e=-1,t=1,n=1,s=-1,a=.1,u=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=s,this.near=a,this.far=u,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,s,a,u){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=a,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let a=n-e,u=n+e,h=s+t,p=s-t;if(this.view!==null&&this.view.enabled){const m=(this.right-this.left)/this.view.fullWidth/this.zoom,v=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=m*this.view.offsetX,u=a+m*this.view.width,h-=v*this.view.offsetY,p=h-v*this.view.height}this.projectionMatrix.makeOrthographic(a,u,h,p,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class FI extends yS{constructor(){super(new th(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class dk extends Au{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(In.DEFAULT_UP),this.updateMatrix(),this.target=new In,this.shadow=new FI}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.shadow=this.shadow.toJSON(),t.object.target=this.target.uuid,t}}class hk extends Au{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class fk extends Au{constructor(e,t,n=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class _S{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Y)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,s=e.y,a=e.z,u=this.coefficients;return t.copy(u[0]).multiplyScalar(.282095),t.addScaledVector(u[1],.488603*s),t.addScaledVector(u[2],.488603*a),t.addScaledVector(u[3],.488603*n),t.addScaledVector(u[4],1.092548*(n*s)),t.addScaledVector(u[5],1.092548*(s*a)),t.addScaledVector(u[6],.315392*(3*a*a-1)),t.addScaledVector(u[7],1.092548*(n*a)),t.addScaledVector(u[8],.546274*(n*n-s*s)),t}getIrradianceAt(e,t){const n=e.x,s=e.y,a=e.z,u=this.coefficients;return t.copy(u[0]).multiplyScalar(.886227),t.addScaledVector(u[1],2*.511664*s),t.addScaledVector(u[2],2*.511664*a),t.addScaledVector(u[3],2*.511664*n),t.addScaledVector(u[4],2*.429043*n*s),t.addScaledVector(u[5],2*.429043*s*a),t.addScaledVector(u[6],.743125*a*a-.247708),t.addScaledVector(u[7],2*.429043*n*a),t.addScaledVector(u[8],.429043*(n*n-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const n=e.x,s=e.y,a=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*a,t[3]=.488603*n,t[4]=1.092548*n*s,t[5]=1.092548*s*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*n*a,t[8]=.546274*(n*n-s*s)}}class pk extends Au{constructor(e=new _S,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class zy extends $r{constructor(e){super(e),this.textures={}}load(e,t,n,s){const a=this,u=new uc(a.manager);u.setPath(a.path),u.setRequestHeader(a.requestHeader),u.setWithCredentials(a.withCredentials),u.load(e,function(h){try{t(a.parse(JSON.parse(h)))}catch(p){s?s(p):Ct(p),a.manager.itemError(e)}},n,s)}parse(e){const t=this.textures;function n(a){return t[a]===void 0&&ut("MaterialLoader: Undefined texture",a),t[a]}const s=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new vt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(s.dispersion=e.dispersion),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(s.allowOverride=e.allowOverride),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const u=e.uniforms[a];switch(s.uniforms[a]={},u.type){case"t":s.uniforms[a].value=n(u.value);break;case"c":s.uniforms[a].value=new vt().setHex(u.value);break;case"v2":s.uniforms[a].value=new ze().fromArray(u.value);break;case"v3":s.uniforms[a].value=new Y().fromArray(u.value);break;case"v4":s.uniforms[a].value=new Qn().fromArray(u.value);break;case"m3":s.uniforms[a].value=new nn().fromArray(u.value);break;case"m4":s.uniforms[a].value=new Xt().fromArray(u.value);break;default:s.uniforms[a].value=u.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)s.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=n(e.map)),e.matcap!==void 0&&(s.matcap=n(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),s.normalScale=new ze().fromArray(a)}return e.displacementMap!==void 0&&(s.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=n(e.envMap)),e.envMapRotation!==void 0&&s.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new ze().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=n(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return zy.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:YA,SpriteMaterial:nS,RawShaderMaterial:hS,ShaderMaterial:Xr,PointsMaterial:sS,MeshPhysicalMaterial:KA,MeshStandardMaterial:fS,MeshPhongMaterial:ZA,MeshToonMaterial:JA,MeshNormalMaterial:QA,MeshLambertMaterial:ek,MeshDepthMaterial:pS,MeshDistanceMaterial:mS,MeshBasicMaterial:Nu,MeshMatcapMaterial:tk,LineDashedMaterial:nk,LineBasicMaterial:yr,Material:er};return new t[e]}}class pw{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class mk extends Qt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class gk extends $r{constructor(e){super(e)}load(e,t,n,s){const a=this,u=new uc(a.manager);u.setPath(a.path),u.setRequestHeader(a.requestHeader),u.setWithCredentials(a.withCredentials),u.load(e,function(h){try{t(a.parse(JSON.parse(h)))}catch(p){s?s(p):Ct(p),a.manager.itemError(e)}},n,s)}parse(e){const t={},n={};function s(w,M){if(t[M]!==void 0)return t[M];const T=w.interleavedBuffers[M],N=a(w,T.buffer),j=Gf(T.type,N),R=new wy(j,T.stride);return R.uuid=T.uuid,t[M]=R,R}function a(w,M){if(n[M]!==void 0)return n[M];const T=w.arrayBuffers[M],N=new Uint32Array(T).buffer;return n[M]=N,N}const u=e.isInstancedBufferGeometry?new mk:new Qt,h=e.data.index;if(h!==void 0){const w=Gf(h.type,h.array);u.setIndex(new Kn(w,1))}const p=e.data.attributes;for(const w in p){const M=p[w];let k;if(M.isInterleavedBufferAttribute){const T=s(e.data,M.data);k=new $d(T,M.itemSize,M.offset,M.normalized)}else{const T=Gf(M.type,M.array),N=M.isInstancedBufferAttribute?ip:Kn;k=new N(T,M.itemSize,M.normalized)}M.name!==void 0&&(k.name=M.name),M.usage!==void 0&&k.setUsage(M.usage),u.setAttribute(w,k)}const m=e.data.morphAttributes;if(m)for(const w in m){const M=m[w],k=[];for(let T=0,N=M.length;T<N;T++){const j=M[T];let R;if(j.isInterleavedBufferAttribute){const D=s(e.data,j.data);R=new $d(D,j.itemSize,j.offset,j.normalized)}else{const D=Gf(j.type,j.array);R=new Kn(D,j.itemSize,j.normalized)}j.name!==void 0&&(R.name=j.name),k.push(R)}u.morphAttributes[w]=k}e.data.morphTargetsRelative&&(u.morphTargetsRelative=!0);const b=e.data.groups||e.data.drawcalls||e.data.offsets;if(b!==void 0)for(let w=0,M=b.length;w!==M;++w){const k=b[w];u.addGroup(k.start,k.count,k.materialIndex)}const y=e.data.boundingSphere;return y!==void 0&&(u.boundingSphere=new Ls().fromJSON(y)),e.name&&(u.name=e.name),e.userData&&(u.userData=e.userData),u}}class VI extends $r{constructor(e){super(e)}load(e,t,n,s){const a=this,u=this.path===""?pw.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||u;const h=new uc(this.manager);h.setPath(this.path),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,function(p){let m=null;try{m=JSON.parse(p)}catch(b){s!==void 0&&s(b),b("ObjectLoader: Can't parse "+e+".",b.message);return}const v=m.metadata;if(v===void 0||v.type===void 0||v.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),Ct("ObjectLoader: Can't load "+e);return}a.parse(m,t)},n,s)}async loadAsync(e,t){const n=this,s=this.path===""?pw.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const a=new uc(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const u=await a.loadAsync(e,t),h=JSON.parse(u),p=h.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(h)}parse(e,t){const n=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,s),u=this.parseImages(e.images,function(){t!==void 0&&t(m)}),h=this.parseTextures(e.textures,u),p=this.parseMaterials(e.materials,h),m=this.parseObject(e.object,a,p,h,n),v=this.parseSkeletons(e.skeletons,m);if(this.bindSkeletons(m,v),this.bindLightTargets(m),t!==void 0){let b=!1;for(const y in u)if(u[y].data instanceof HTMLImageElement){b=!0;break}b===!1&&t(m)}return m}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,n),a=await this.parseImagesAsync(e.images),u=this.parseTextures(e.textures,a),h=this.parseMaterials(e.materials,u),p=this.parseObject(e.object,s,h,u,t),m=this.parseSkeletons(e.skeletons,p);return this.bindSkeletons(p,m),this.bindLightTargets(p),p}parseShapes(e){const t={};if(e!==void 0)for(let n=0,s=e.length;n<s;n++){const a=new Hd().fromJSON(e[n]);t[a.uuid]=a}return t}parseSkeletons(e,t){const n={},s={};if(t.traverse(function(a){a.isBone&&(s[a.uuid]=a)}),e!==void 0)for(let a=0,u=e.length;a<u;a++){const h=new Sy().fromJSON(e[a],s);n[h.uuid]=h}return n}parseGeometries(e,t){const n={};if(e!==void 0){const s=new gk;for(let a=0,u=e.length;a<u;a++){let h;const p=e[a];switch(p.type){case"BufferGeometry":case"InstancedBufferGeometry":h=s.parse(p);break;default:p.type in KE?h=KE[p.type].fromJSON(p,t):ut(`ObjectLoader: Unsupported geometry type "${p.type}"`)}h.uuid=p.uuid,p.name!==void 0&&(h.name=p.name),p.userData!==void 0&&(h.userData=p.userData),n[p.uuid]=h}}return n}parseMaterials(e,t){const n={},s={};if(e!==void 0){const a=new zy;a.setTextures(t);for(let u=0,h=e.length;u<h;u++){const p=e[u];n[p.uuid]===void 0&&(n[p.uuid]=a.parse(p)),s[p.uuid]=n[p.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const s=e[n],a=Hg.parse(s);t[a.uuid]=a}return t}parseImages(e,t){const n=this,s={};let a;function u(p){return n.manager.itemStart(p),a.load(p,function(){n.manager.itemEnd(p)},void 0,function(){n.manager.itemError(p),n.manager.itemEnd(p)})}function h(p){if(typeof p=="string"){const m=p,v=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(m)?m:n.resourcePath+m;return u(v)}else return p.data?{data:Gf(p.type,p.data),width:p.width,height:p.height}:null}if(e!==void 0&&e.length>0){const p=new bS(t);a=new Gg(p),a.setCrossOrigin(this.crossOrigin);for(let m=0,v=e.length;m<v;m++){const b=e[m],y=b.url;if(Array.isArray(y)){const w=[];for(let M=0,k=y.length;M<k;M++){const T=y[M],N=h(T);N!==null&&(N instanceof HTMLImageElement?w.push(N):w.push(new Va(N.data,N.width,N.height)))}s[b.uuid]=new vu(w)}else{const w=h(b.url);s[b.uuid]=new vu(w)}}}return s}async parseImagesAsync(e){const t=this,n={};let s;async function a(u){if(typeof u=="string"){const h=u,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:t.resourcePath+h;return await s.loadAsync(p)}else return u.data?{data:Gf(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){s=new Gg(this.manager),s.setCrossOrigin(this.crossOrigin);for(let u=0,h=e.length;u<h;u++){const p=e[u],m=p.url;if(Array.isArray(m)){const v=[];for(let b=0,y=m.length;b<y;b++){const w=m[b],M=await a(w);M!==null&&(M instanceof HTMLImageElement?v.push(M):v.push(new Va(M.data,M.width,M.height)))}n[p.uuid]=new vu(v)}else{const v=await a(p.url);n[p.uuid]=new vu(v)}}}return n}parseTextures(e,t){function n(a,u){return typeof a=="number"?a:(ut("ObjectLoader.parseTexture: Constant should be in numeric form.",a),u[a])}const s={};if(e!==void 0)for(let a=0,u=e.length;a<u;a++){const h=e[a];h.image===void 0&&ut('ObjectLoader: No "image" specified for',h.uuid),t[h.image]===void 0&&ut("ObjectLoader: Undefined image",h.image);const p=t[h.image],m=p.data;let v;Array.isArray(m)?(v=new Zg,m.length===6&&(v.needsUpdate=!0)):(m&&m.data?v=new Va:v=new Ui,m&&(v.needsUpdate=!0)),v.source=p,v.uuid=h.uuid,h.name!==void 0&&(v.name=h.name),h.mapping!==void 0&&(v.mapping=n(h.mapping,HI)),h.channel!==void 0&&(v.channel=h.channel),h.offset!==void 0&&v.offset.fromArray(h.offset),h.repeat!==void 0&&v.repeat.fromArray(h.repeat),h.center!==void 0&&v.center.fromArray(h.center),h.rotation!==void 0&&(v.rotation=h.rotation),h.wrap!==void 0&&(v.wrapS=n(h.wrap[0],QE),v.wrapT=n(h.wrap[1],QE)),h.format!==void 0&&(v.format=h.format),h.internalFormat!==void 0&&(v.internalFormat=h.internalFormat),h.type!==void 0&&(v.type=h.type),h.colorSpace!==void 0&&(v.colorSpace=h.colorSpace),h.minFilter!==void 0&&(v.minFilter=n(h.minFilter,eN)),h.magFilter!==void 0&&(v.magFilter=n(h.magFilter,eN)),h.anisotropy!==void 0&&(v.anisotropy=h.anisotropy),h.flipY!==void 0&&(v.flipY=h.flipY),h.generateMipmaps!==void 0&&(v.generateMipmaps=h.generateMipmaps),h.premultiplyAlpha!==void 0&&(v.premultiplyAlpha=h.premultiplyAlpha),h.unpackAlignment!==void 0&&(v.unpackAlignment=h.unpackAlignment),h.compareFunction!==void 0&&(v.compareFunction=h.compareFunction),h.userData!==void 0&&(v.userData=h.userData),s[h.uuid]=v}return s}parseObject(e,t,n,s,a){let u;function h(y){return t[y]===void 0&&ut("ObjectLoader: Undefined geometry",y),t[y]}function p(y){if(y!==void 0){if(Array.isArray(y)){const w=[];for(let M=0,k=y.length;M<k;M++){const T=y[M];n[T]===void 0&&ut("ObjectLoader: Undefined material",T),w.push(n[T])}return w}return n[y]===void 0&&ut("ObjectLoader: Undefined material",y),n[y]}}function m(y){return s[y]===void 0&&ut("ObjectLoader: Undefined texture",y),s[y]}let v,b;switch(e.type){case"Scene":u=new _y,e.background!==void 0&&(Number.isInteger(e.background)?u.background=new vt(e.background):u.background=m(e.background)),e.environment!==void 0&&(u.environment=m(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?u.fog=new yy(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(u.fog=new by(e.fog.color,e.fog.density)),e.fog.name!==""&&(u.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(u.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(u.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&u.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(u.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&u.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":u=new bs(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(u.focus=e.focus),e.zoom!==void 0&&(u.zoom=e.zoom),e.filmGauge!==void 0&&(u.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(u.filmOffset=e.filmOffset),e.view!==void 0&&(u.view=Object.assign({},e.view));break;case"OrthographicCamera":u=new th(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(u.zoom=e.zoom),e.view!==void 0&&(u.view=Object.assign({},e.view));break;case"AmbientLight":u=new hk(e.color,e.intensity);break;case"DirectionalLight":u=new dk(e.color,e.intensity),u.target=e.target||"";break;case"PointLight":u=new uk(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":u=new fk(e.color,e.intensity,e.width,e.height);break;case"SpotLight":u=new ck(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),u.target=e.target||"";break;case"HemisphereLight":u=new lk(e.color,e.groundColor,e.intensity);break;case"LightProbe":const y=new _S().fromArray(e.sh);u=new pk(y,e.intensity);break;case"SkinnedMesh":v=h(e.geometry),b=p(e.material),u=new RA(v,b),e.bindMode!==void 0&&(u.bindMode=e.bindMode),e.bindMatrix!==void 0&&u.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(u.skeleton=e.skeleton);break;case"Mesh":v=h(e.geometry),b=p(e.material),u=new ns(v,b);break;case"InstancedMesh":v=h(e.geometry),b=p(e.material);const w=e.count,M=e.instanceMatrix,k=e.instanceColor;u=new jA(v,b,w),u.instanceMatrix=new ip(new Float32Array(M.array),16),k!==void 0&&(u.instanceColor=new ip(new Float32Array(k.array),k.itemSize));break;case"BatchedMesh":v=h(e.geometry),b=p(e.material),u=new DA(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,b),u.geometry=v,u.perObjectFrustumCulled=e.perObjectFrustumCulled,u.sortObjects=e.sortObjects,u._drawRanges=e.drawRanges,u._reservedRanges=e.reservedRanges,u._geometryInfo=e.geometryInfo.map(T=>{let N=null,j=null;return T.boundingBox!==void 0&&(N=new Qs().fromJSON(T.boundingBox)),T.boundingSphere!==void 0&&(j=new Ls().fromJSON(T.boundingSphere)),{...T,boundingBox:N,boundingSphere:j}}),u._instanceInfo=e.instanceInfo,u._availableInstanceIds=e._availableInstanceIds,u._availableGeometryIds=e._availableGeometryIds,u._nextIndexStart=e.nextIndexStart,u._nextVertexStart=e.nextVertexStart,u._geometryCount=e.geometryCount,u._maxInstanceCount=e.maxInstanceCount,u._maxVertexCount=e.maxVertexCount,u._maxIndexCount=e.maxIndexCount,u._geometryInitialized=e.geometryInitialized,u._matricesTexture=m(e.matricesTexture.uuid),u._indirectTexture=m(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(u._colorsTexture=m(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(u.boundingSphere=new Ls().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(u.boundingBox=new Qs().fromJSON(e.boundingBox));break;case"LOD":u=new CA;break;case"Line":u=new Su(h(e.geometry),p(e.material));break;case"LineLoop":u=new IA(h(e.geometry),p(e.material));break;case"LineSegments":u=new xl(h(e.geometry),p(e.material));break;case"PointCloud":case"Points":u=new OA(h(e.geometry),p(e.material));break;case"Sprite":u=new kA(p(e.material));break;case"Group":u=new qf;break;case"Bone":u=new iS;break;default:u=new In}if(u.uuid=e.uuid,e.name!==void 0&&(u.name=e.name),e.matrix!==void 0?(u.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(u.matrixAutoUpdate=e.matrixAutoUpdate),u.matrixAutoUpdate&&u.matrix.decompose(u.position,u.quaternion,u.scale)):(e.position!==void 0&&u.position.fromArray(e.position),e.rotation!==void 0&&u.rotation.fromArray(e.rotation),e.quaternion!==void 0&&u.quaternion.fromArray(e.quaternion),e.scale!==void 0&&u.scale.fromArray(e.scale)),e.up!==void 0&&u.up.fromArray(e.up),e.castShadow!==void 0&&(u.castShadow=e.castShadow),e.receiveShadow!==void 0&&(u.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(u.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(u.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(u.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(u.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&u.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(u.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(u.visible=e.visible),e.frustumCulled!==void 0&&(u.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(u.renderOrder=e.renderOrder),e.userData!==void 0&&(u.userData=e.userData),e.layers!==void 0&&(u.layers.mask=e.layers),e.children!==void 0){const y=e.children;for(let w=0;w<y.length;w++)u.add(this.parseObject(y[w],t,n,s,a))}if(e.animations!==void 0){const y=e.animations;for(let w=0;w<y.length;w++){const M=y[w];u.animations.push(a[M])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(u.autoUpdate=e.autoUpdate);const y=e.levels;for(let w=0;w<y.length;w++){const M=y[w],k=u.getObjectByProperty("uuid",M.object);k!==void 0&&u.addLevel(k,M.distance,M.hysteresis)}}return u}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const s=t[n.skeleton];s===void 0?ut("ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(s,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,s=e.getObjectByProperty("uuid",n);s!==void 0?t.target=s:t.target=new In}})}}const HI={UVMapping:ay,CubeReflectionMapping:fl,CubeRefractionMapping:yu,EquirectangularReflectionMapping:Ag,EquirectangularRefractionMapping:kg,CubeUVReflectionMapping:op},QE={RepeatWrapping:Cg,ClampToEdgeWrapping:Gr,MirroredRepeatWrapping:Rg},eN={NearestFilter:Ai,NearestMipmapNearestFilter:Hw,NearestMipmapLinearFilter:Hf,LinearFilter:ei,LinearMipmapNearestFilter:ug,LinearMipmapLinearFilter:cl},b1=new WeakMap;class GI extends $r{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&ut("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&ut("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,u=ul.get(`image-bitmap:${e}`);if(u!==void 0){if(a.manager.itemStart(e),u.then){u.then(m=>{if(b1.has(u)===!0)s&&s(b1.get(u)),a.manager.itemError(e),a.manager.itemEnd(e);else return t&&t(m),a.manager.itemEnd(e),m});return}return setTimeout(function(){t&&t(u),a.manager.itemEnd(e)},0),u}const h={};h.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",h.headers=this.requestHeader,h.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const p=fetch(e,h).then(function(m){return m.blob()}).then(function(m){return createImageBitmap(m,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(m){return ul.add(`image-bitmap:${e}`,m),t&&t(m),a.manager.itemEnd(e),m}).catch(function(m){s&&s(m),b1.set(p,m),ul.remove(`image-bitmap:${e}`),a.manager.itemError(e),a.manager.itemEnd(e)});ul.add(`image-bitmap:${e}`,p),a.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let Tv;class wS{static getContext(){return Tv===void 0&&(Tv=new(window.AudioContext||window.webkitAudioContext)),Tv}static setContext(e){Tv=e}}class qI extends $r{constructor(e){super(e)}load(e,t,n,s){const a=this,u=new uc(this.manager);u.setResponseType("arraybuffer"),u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(p){try{const m=p.slice(0);wS.getContext().decodeAudioData(m,function(b){t(b)}).catch(h)}catch(m){h(m)}},n,s);function h(p){s?s(p):Ct(p),a.manager.itemError(e)}}}const tN=new Xt,nN=new Xt,wd=new Xt;class WI{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new bs,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new bs,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,wd.copy(e.projectionMatrix);const s=t.eyeSep/2,a=s*t.near/t.focus,u=t.near*Math.tan(Vd*t.fov*.5)/t.zoom;let h,p;nN.elements[12]=-s,tN.elements[12]=s,h=-u*t.aspect+a,p=u*t.aspect+a,wd.elements[0]=2*t.near/(p-h),wd.elements[8]=(p+h)/(p-h),this.cameraL.projectionMatrix.copy(wd),h=-u*t.aspect-a,p=u*t.aspect-a,wd.elements[0]=2*t.near/(p-h),wd.elements[8]=(p+h)/(p-h),this.cameraR.projectionMatrix.copy(wd)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(nN),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(tN)}}class xk extends bs{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class SS{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const Sd=new Y,y1=new qr,XI=new Y,Md=new Y,Ed=new Y;class $I extends In{constructor(){super(),this.type="AudioListener",this.context=wS.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new SS}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Sd,y1,XI),Md.set(0,0,-1).applyQuaternion(y1),Ed.set(0,1,0).applyQuaternion(y1),t.positionX){const n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Sd.x,n),t.positionY.linearRampToValueAtTime(Sd.y,n),t.positionZ.linearRampToValueAtTime(Sd.z,n),t.forwardX.linearRampToValueAtTime(Md.x,n),t.forwardY.linearRampToValueAtTime(Md.y,n),t.forwardZ.linearRampToValueAtTime(Md.z,n),t.upX.linearRampToValueAtTime(Ed.x,n),t.upY.linearRampToValueAtTime(Ed.y,n),t.upZ.linearRampToValueAtTime(Ed.z,n)}else t.setPosition(Sd.x,Sd.y,Sd.z),t.setOrientation(Md.x,Md.y,Md.z,Ed.x,Ed.y,Ed.z)}}let vk=class extends In{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){ut("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){ut("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){ut("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){ut("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){ut("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(ut("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){ut("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(ut("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}};const Nd=new Y,iN=new qr,YI=new Y,Td=new Y;class KI extends vk{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Nd,iN,YI),Td.set(0,0,1).applyQuaternion(iN);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Nd.x,n),t.positionY.linearRampToValueAtTime(Nd.y,n),t.positionZ.linearRampToValueAtTime(Nd.z,n),t.orientationX.linearRampToValueAtTime(Td.x,n),t.orientationY.linearRampToValueAtTime(Td.y,n),t.orientationZ.linearRampToValueAtTime(Td.z,n)}else t.setPosition(Nd.x,Nd.y,Nd.z),t.setOrientation(Td.x,Td.y,Td.z)}}class ZI{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class bk{constructor(e,t,n){this.binding=e,this.valueSize=n;let s,a,u;switch(t){case"quaternion":s=this._slerp,a=this._slerpAdditive,u=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":s=this._select,a=this._select,u=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:s=this._lerp,a=this._lerpAdditive,u=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=a,this._setIdentity=u,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,s=this.valueSize,a=e*s+s;let u=this.cumulativeWeight;if(u===0){for(let h=0;h!==s;++h)n[a+h]=n[h];u=t}else{u+=t;const h=t/u;this._mixBufferRegion(n,a,0,h,s)}this.cumulativeWeight=u}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,s=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,s=e*t+t,a=this.cumulativeWeight,u=this.cumulativeWeightAdditive,h=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const p=t*this._origIndex;this._mixBufferRegion(n,s,p,1-a,t)}u>0&&this._mixBufferRegionAdditive(n,s,this._addIndex*t,1,t);for(let p=t,m=t+t;p!==m;++p)if(n[p]!==n[p+t]){h.setValue(n,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,s=n*this._origIndex;e.getValue(t,s);for(let a=n,u=s;a!==u;++a)t[a]=t[s+a%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,s,a){if(s>=.5)for(let u=0;u!==a;++u)e[t+u]=e[n+u]}_slerp(e,t,n,s){qr.slerpFlat(e,t,e,t,e,n,s)}_slerpAdditive(e,t,n,s,a){const u=this._workIndex*a;qr.multiplyQuaternionsFlat(e,u,e,t,e,n),qr.slerpFlat(e,t,e,t,e,u,s)}_lerp(e,t,n,s,a){const u=1-s;for(let h=0;h!==a;++h){const p=t+h;e[p]=e[p]*u+e[n+h]*s}}_lerpAdditive(e,t,n,s,a){for(let u=0;u!==a;++u){const h=t+u;e[h]=e[h]+e[n+u]*s}}}const MS="\\[\\]\\.:\\/",JI=new RegExp("["+MS+"]","g"),ES="[^"+MS+"]",QI="[^"+MS.replace("\\.","")+"]",e2=/((?:WC+[\/:])*)/.source.replace("WC",ES),t2=/(WCOD+)?/.source.replace("WCOD",QI),n2=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ES),i2=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ES),s2=new RegExp("^"+e2+t2+n2+i2+"$"),r2=["material","materials","bones","map"];class a2{constructor(e,t,n){const s=n||Dn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,s=this._bindings[n];s!==void 0&&s.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,a=n.length;s!==a;++s)n[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Dn{constructor(e,t,n){this.path=t,this.parsedPath=n||Dn.parseTrackName(t),this.node=Dn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Dn.Composite(e,t,n):new Dn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(JI,"")}static parseTrackName(e){const t=s2.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=n.nodeName&&n.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const a=n.nodeName.substring(s+1);r2.indexOf(a)!==-1&&(n.nodeName=n.nodeName.substring(0,s),n.objectName=a)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(a){for(let u=0;u<a.length;u++){const h=a[u];if(h.name===t||h.uuid===t)return h;const p=n(h.children);if(p)return p}return null},s=n(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let s=0,a=n.length;s!==a;++s)e[t++]=n[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let s=0,a=n.length;s!==a;++s)n[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let s=0,a=n.length;s!==a;++s)n[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let s=0,a=n.length;s!==a;++s)n[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,s=t.propertyName;let a=t.propertyIndex;if(e||(e=Dn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){ut("PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let m=t.objectIndex;switch(n){case"materials":if(!e.material){Ct("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){Ct("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){Ct("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let v=0;v<e.length;v++)if(e[v].name===m){m=v;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){Ct("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){Ct("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){Ct("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(m!==void 0){if(e[m]===void 0){Ct("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[m]}}const u=e[s];if(u===void 0){const m=t.nodeName;Ct("PropertyBinding: Trying to update property for track: "+m+"."+s+" but it wasn't found.",e);return}let h=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?h=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(h=this.Versioning.MatrixWorldNeedsUpdate);let p=this.BindingType.Direct;if(a!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){Ct("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){Ct("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}p=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=a}else u.fromArray!==void 0&&u.toArray!==void 0?(p=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(p=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=s;this.getValue=this.GetterByBindingType[p],this.setValue=this.SetterByBindingTypeAndVersioning[p][h]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Dn.Composite=a2;Dn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Dn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Dn.prototype.GetterByBindingType=[Dn.prototype._getValue_direct,Dn.prototype._getValue_array,Dn.prototype._getValue_arrayElement,Dn.prototype._getValue_toArray];Dn.prototype.SetterByBindingTypeAndVersioning=[[Dn.prototype._setValue_direct,Dn.prototype._setValue_direct_setNeedsUpdate,Dn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Dn.prototype._setValue_array,Dn.prototype._setValue_array_setNeedsUpdate,Dn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Dn.prototype._setValue_arrayElement,Dn.prototype._setValue_arrayElement_setNeedsUpdate,Dn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Dn.prototype._setValue_fromArray,Dn.prototype._setValue_fromArray_setNeedsUpdate,Dn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class o2{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ca(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,s=arguments.length;n!==s;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,s=this._parsedPaths,a=this._bindings,u=a.length;let h,p=e.length,m=this.nCachedObjects_;for(let v=0,b=arguments.length;v!==b;++v){const y=arguments[v],w=y.uuid;let M=t[w];if(M===void 0){M=p++,t[w]=M,e.push(y);for(let k=0,T=u;k!==T;++k)a[k].push(new Dn(y,n[k],s[k]))}else if(M<m){h=e[M];const k=--m,T=e[k];t[T.uuid]=M,e[M]=T,t[w]=k,e[k]=y;for(let N=0,j=u;N!==j;++N){const R=a[N],D=R[k];let I=R[M];R[M]=D,I===void 0&&(I=new Dn(y,n[N],s[N])),R[k]=I}}else e[M]!==h&&Ct("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=m}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,s=n.length;let a=this.nCachedObjects_;for(let u=0,h=arguments.length;u!==h;++u){const p=arguments[u],m=p.uuid,v=t[m];if(v!==void 0&&v>=a){const b=a++,y=e[b];t[y.uuid]=v,e[v]=y,t[m]=b,e[b]=p;for(let w=0,M=s;w!==M;++w){const k=n[w],T=k[b],N=k[v];k[v]=T,k[b]=N}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,s=n.length;let a=this.nCachedObjects_,u=e.length;for(let h=0,p=arguments.length;h!==p;++h){const m=arguments[h],v=m.uuid,b=t[v];if(b!==void 0)if(delete t[v],b<a){const y=--a,w=e[y],M=--u,k=e[M];t[w.uuid]=b,e[b]=w,t[k.uuid]=y,e[y]=k,e.pop();for(let T=0,N=s;T!==N;++T){const j=n[T],R=j[y],D=j[M];j[b]=R,j[y]=D,j.pop()}}else{const y=--u,w=e[y];y>0&&(t[w.uuid]=b),e[b]=w,e.pop();for(let M=0,k=s;M!==k;++M){const T=n[M];T[b]=T[y],T.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const n=this._bindingsIndicesByPath;let s=n[e];const a=this._bindings;if(s!==void 0)return a[s];const u=this._paths,h=this._parsedPaths,p=this._objects,m=p.length,v=this.nCachedObjects_,b=new Array(m);s=a.length,n[e]=s,u.push(e),h.push(t),a.push(b);for(let y=v,w=p.length;y!==w;++y){const M=p[y];b[y]=new Dn(M,e,t)}return b}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const s=this._paths,a=this._parsedPaths,u=this._bindings,h=u.length-1,p=u[h],m=e[h];t[m]=n,u[n]=p,u.pop(),a[n]=a[h],a.pop(),s[n]=s[h],s.pop()}}}class yk{constructor(e,t,n=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=s;const a=t.tracks,u=a.length,h=new Array(u),p={endingStart:Pd,endingEnd:Pd};for(let m=0;m!==u;++m){const v=a[m].createInterpolant(null);h[m]=v,v.settings=p}this._interpolantSettings=p,this._interpolants=h,this._propertyBindings=new Array(u),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=uA,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const s=this._clip.duration,a=e._clip.duration,u=a/s,h=s/a;e.warp(1,u,t),this.warp(h,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const s=this._mixer,a=s.time,u=this.timeScale;let h=this._timeScaleInterpolant;h===null&&(h=s._lendControlInterpolant(),this._timeScaleInterpolant=h);const p=h.parameterPositions,m=h.sampleValues;return p[0]=a,p[1]=a+n,m[0]=e/u,m[1]=t/u,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,s){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const p=(e-a)*n;p<0||n===0?t=0:(this._startTime=null,t=n*p)}t*=this._updateTimeScale(e);const u=this._updateTime(t),h=this._updateWeight(e);if(h>0){const p=this._interpolants,m=this._propertyBindings;switch(this.blendMode){case Kw:for(let v=0,b=p.length;v!==b;++v)p[v].evaluate(u),m[v].accumulateAdditive(h);break;case fy:default:for(let v=0,b=p.length;v!==b;++v)p[v].evaluate(u),m[v].accumulate(s,h)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const s=n.evaluate(e)[0];t*=s,e>n.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const s=n.evaluate(e)[0];t*=s,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let s=this.time+e,a=this._loopCount;const u=n===dA;if(e===0)return a===-1?s:u&&(a&1)===1?t-s:s;if(n===cA){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,u)):this._setEndings(this.repetitions===0,!0,u)),s>=t||s<0){const h=Math.floor(s/t);s-=t*h,a+=Math.abs(h);const p=this.repetitions-a;if(p<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(p===1){const m=e<0;this._setEndings(m,!m,u)}else this._setEndings(!1,!1,u);this._loopCount=a,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:h})}}else this.time=s;if(u&&(a&1)===1)return t-s}return s}_setEndings(e,t,n){const s=this._interpolantSettings;n?(s.endingStart=zd,s.endingEnd=zd):(e?s.endingStart=this.zeroSlopeAtStart?zd:Pd:s.endingStart=Dg,t?s.endingEnd=this.zeroSlopeAtEnd?zd:Pd:s.endingEnd=Dg)}_scheduleFading(e,t,n){const s=this._mixer,a=s.time;let u=this._weightInterpolant;u===null&&(u=s._lendControlInterpolant(),this._weightInterpolant=u);const h=u.parameterPositions,p=u.sampleValues;return h[0]=a,p[0]=t,h[1]=a+e,p[1]=n,this}}const l2=new Float32Array(1);class c2 extends gl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,s=e._clip.tracks,a=s.length,u=e._propertyBindings,h=e._interpolants,p=n.uuid,m=this._bindingsByRootAndName;let v=m[p];v===void 0&&(v={},m[p]=v);for(let b=0;b!==a;++b){const y=s[b],w=y.name;let M=v[w];if(M!==void 0)++M.referenceCount,u[b]=M;else{if(M=u[b],M!==void 0){M._cacheIndex===null&&(++M.referenceCount,this._addInactiveBinding(M,p,w));continue}const k=t&&t._propertyBindings[b].binding.parsedPath;M=new bk(Dn.create(n,w,k),y.ValueTypeName,y.getValueSize()),++M.referenceCount,this._addInactiveBinding(M,p,w),u[b]=M}h[b].resultBuffer=M.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,s=e._clip.uuid,a=this._actionsByClip[s];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,s,n)}const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const a=t[n];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const a=t[n];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const s=this._actions,a=this._actionsByClip;let u=a[t];if(u===void 0)u={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=u;else{const h=u.knownActions;e._byClipCacheIndex=h.length,h.push(e)}e._cacheIndex=s.length,s.push(e),u.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],s=e._cacheIndex;n._cacheIndex=s,t[s]=n,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,u=this._actionsByClip,h=u[a],p=h.knownActions,m=p[p.length-1],v=e._byClipCacheIndex;m._byClipCacheIndex=v,p[v]=m,p.pop(),e._byClipCacheIndex=null;const b=h.actionByRoot,y=(e._localRoot||this._root).uuid;delete b[y],p.length===0&&delete u[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const a=t[n];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,s=this._nActiveActions++,a=t[s];e._cacheIndex=s,t[s]=e,a._cacheIndex=n,t[n]=a}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,s=--this._nActiveActions,a=t[s];e._cacheIndex=s,t[s]=e,a._cacheIndex=n,t[n]=a}_addInactiveBinding(e,t,n){const s=this._bindingsByRootAndName,a=this._bindings;let u=s[t];u===void 0&&(u={},s[t]=u),u[n]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,s=n.rootNode.uuid,a=n.path,u=this._bindingsByRootAndName,h=u[s],p=t[t.length-1],m=e._cacheIndex;p._cacheIndex=m,t[m]=p,t.pop(),delete h[a],Object.keys(h).length===0&&delete u[s]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,s=this._nActiveBindings++,a=t[s];e._cacheIndex=s,t[s]=e,a._cacheIndex=n,t[n]=a}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,s=--this._nActiveBindings,a=t[s];e._cacheIndex=s,t[s]=e,a._cacheIndex=n,t[n]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new xS(new Float32Array(2),new Float32Array(2),1,l2),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,s=--this._nActiveControlInterpolants,a=t[s];e.__cacheIndex=s,t[s]=e,a.__cacheIndex=n,t[n]=a}clipAction(e,t,n){const s=t||this._root,a=s.uuid;let u=typeof e=="string"?Hg.findByName(s,e):e;const h=u!==null?u.uuid:e,p=this._actionsByClip[h];let m=null;if(n===void 0&&(u!==null?n=u.blendMode:n=fy),p!==void 0){const b=p.actionByRoot[a];if(b!==void 0&&b.blendMode===n)return b;m=p.knownActions[0],u===null&&(u=m._clip)}if(u===null)return null;const v=new yk(this,u,t,n);return this._bindAction(v,m),this._addInactiveAction(v,h,a),v}existingAction(e,t){const n=t||this._root,s=n.uuid,a=typeof e=="string"?Hg.findByName(n,e):e,u=a?a.uuid:e,h=this._actionsByClip[u];return h!==void 0&&h.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,s=this.time+=e,a=Math.sign(e),u=this._accuIndex^=1;for(let m=0;m!==n;++m)t[m]._update(s,e,a,u);const h=this._bindings,p=this._nActiveBindings;for(let m=0;m!==p;++m)h[m].apply(u);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,s=this._actionsByClip,a=s[n];if(a!==void 0){const u=a.knownActions;for(let h=0,p=u.length;h!==p;++h){const m=u[h];this._deactivateAction(m);const v=m._cacheIndex,b=t[t.length-1];m._cacheIndex=null,m._byClipCacheIndex=null,b._cacheIndex=v,t[v]=b,t.pop(),this._removeInactiveBindingsForAction(m)}delete s[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const u in n){const h=n[u].actionByRoot,p=h[t];p!==void 0&&(this._deactivateAction(p),this._removeInactiveAction(p))}const s=this._bindingsByRootAndName,a=s[t];if(a!==void 0)for(const u in a){const h=a[u];h.restoreOriginalState(),this._removeInactiveBinding(h)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class u2 extends Jw{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isRenderTarget3D=!0,this.depth=n,this.texture=new xy(null,e,t,n),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class NS{constructor(e){this.value=e}clone(){return new NS(this.value.clone===void 0?this.value:this.value.clone())}}let d2=0;class h2 extends gl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:d2++}),this.name="",this.usage=Og,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,s=t.length;n<s;n++){const a=Array.isArray(t[n])?t[n]:[t[n]];for(let u=0;u<a.length;u++)this.uniforms.push(a[u].clone())}return this}clone(){return new this.constructor().copy(this)}}class f2 extends wy{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class p2{constructor(e,t,n,s,a,u=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=s,this.count=a,this.normalized=u,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const sN=new Xt;class TS{constructor(e,t,n=0,s=1/0){this.ray=new lp(e,t),this.near=n,this.far=s,this.camera=null,this.layers=new tp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):Ct("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return sN.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(sN),this}intersectObject(e,t=!0,n=[]){return mw(e,this,n,t),n.sort(rN),n}intersectObjects(e,t=!0,n=[]){for(let s=0,a=e.length;s<a;s++)mw(e[s],this,n,t);return n.sort(rN),n}}function rN(i,e){return i.distance-e.distance}function mw(i,e,t,n){let s=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(s=!1),s===!0&&n===!0){const a=i.children;for(let u=0,h=a.length;u<h;u++)mw(a[u],e,t,!0)}}class m2{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=g2.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function g2(){this._document.hidden===!1&&this.reset()}class x2{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=qt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(qt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class v2{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class AS{constructor(e,t,n,s){AS.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,s)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,s){const a=this.elements;return a[0]=e,a[2]=t,a[1]=n,a[3]=s,this}}const aN=new ze;class b2{constructor(e=new ze(1/0,1/0),t=new ze(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=aN.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,aN).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const oN=new Y,Av=new Y,Df=new Y,If=new Y,_1=new Y,y2=new Y,_2=new Y;class w2{constructor(e=new Y,t=new Y){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){oN.subVectors(e,this.start),Av.subVectors(this.end,this.start);const n=Av.dot(Av);let a=Av.dot(oN)/n;return t&&(a=qt(a,0,1)),a}closestPointToPoint(e,t,n){const s=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(s).add(this.start)}distanceSqToLine3(e,t=y2,n=_2){const s=10000000000000001e-32;let a,u;const h=this.start,p=e.start,m=this.end,v=e.end;Df.subVectors(m,h),If.subVectors(v,p),_1.subVectors(h,p);const b=Df.dot(Df),y=If.dot(If),w=If.dot(_1);if(b<=s&&y<=s)return t.copy(h),n.copy(p),t.sub(n),t.dot(t);if(b<=s)a=0,u=w/y,u=qt(u,0,1);else{const M=Df.dot(_1);if(y<=s)u=0,a=qt(-M/b,0,1);else{const k=Df.dot(If),T=b*y-k*k;T!==0?a=qt((k*w-M*y)/T,0,1):a=0,u=(k*a+w)/y,u<0?(u=0,a=qt(-M/b,0,1)):u>1&&(u=1,a=qt((k-M)/b,0,1))}}return t.copy(h).add(Df.multiplyScalar(a)),n.copy(p).add(If.multiplyScalar(u)),t.sub(n),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const lN=new Y;class S2 extends In{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Qt,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let u=0,h=1,p=32;u<p;u++,h++){const m=u/p*Math.PI*2,v=h/p*Math.PI*2;s.push(Math.cos(m),Math.sin(m),1,Math.cos(v),Math.sin(v),1)}n.setAttribute("position",new wt(s,3));const a=new yr({fog:!1,toneMapped:!1});this.cone=new xl(n,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),lN.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(lN),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const lu=new Y,kv=new Xt,w1=new Xt;class M2 extends xl{constructor(e){const t=_k(e),n=new Qt,s=[],a=[];for(let m=0;m<t.length;m++){const v=t[m];v.parent&&v.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),a.push(0,0,0),a.push(0,0,0))}n.setAttribute("position",new wt(s,3)),n.setAttribute("color",new wt(a,3));const u=new yr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const h=new vt(255),p=new vt(65280);this.setColors(h,p)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,s=n.getAttribute("position");w1.copy(this.root.matrixWorld).invert();for(let a=0,u=0;a<t.length;a++){const h=t[a];h.parent&&h.parent.isBone&&(kv.multiplyMatrices(w1,h.matrixWorld),lu.setFromMatrixPosition(kv),s.setXYZ(u,lu.x,lu.y,lu.z),kv.multiplyMatrices(w1,h.parent.matrixWorld),lu.setFromMatrixPosition(kv),s.setXYZ(u+1,lu.x,lu.y,lu.z),u+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const s=this.geometry.getAttribute("color");for(let a=0;a<s.count;a+=2)s.setXYZ(a,e.r,e.g,e.b),s.setXYZ(a+1,t.r,t.g,t.b);return s.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function _k(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push(..._k(i.children[t]));return e}class E2 extends ns{constructor(e,t,n){const s=new t0(t,4,2),a=new Nu({wireframe:!0,fog:!1,toneMapped:!1});super(s,a),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const N2=new Y,cN=new vt,uN=new vt;class T2 extends In{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const s=new e0(t);s.rotateY(Math.PI*.5),this.material=new Nu({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=s.getAttribute("position"),u=new Float32Array(a.count*3);s.setAttribute("color",new Kn(u,3)),this.add(new ns(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");cN.copy(this.light.color),uN.copy(this.light.groundColor);for(let n=0,s=t.count;n<s;n++){const a=n<s/2?cN:uN;t.setXYZ(n,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(N2.setFromMatrixPosition(this.light.matrixWorld).negate())}}class A2 extends xl{constructor(e=10,t=10,n=4473924,s=8947848){n=new vt(n),s=new vt(s);const a=t/2,u=e/t,h=e/2,p=[],m=[];for(let y=0,w=0,M=-h;y<=t;y++,M+=u){p.push(-h,0,M,h,0,M),p.push(M,0,-h,M,0,h);const k=y===a?n:s;k.toArray(m,w),w+=3,k.toArray(m,w),w+=3,k.toArray(m,w),w+=3,k.toArray(m,w),w+=3}const v=new Qt;v.setAttribute("position",new wt(p,3)),v.setAttribute("color",new wt(m,3));const b=new yr({vertexColors:!0,toneMapped:!1});super(v,b),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class k2 extends xl{constructor(e=10,t=16,n=8,s=64,a=4473924,u=8947848){a=new vt(a),u=new vt(u);const h=[],p=[];if(t>1)for(let b=0;b<t;b++){const y=b/t*(Math.PI*2),w=Math.sin(y)*e,M=Math.cos(y)*e;h.push(0,0,0),h.push(w,0,M);const k=b&1?a:u;p.push(k.r,k.g,k.b),p.push(k.r,k.g,k.b)}for(let b=0;b<n;b++){const y=b&1?a:u,w=e-e/n*b;for(let M=0;M<s;M++){let k=M/s*(Math.PI*2),T=Math.sin(k)*w,N=Math.cos(k)*w;h.push(T,0,N),p.push(y.r,y.g,y.b),k=(M+1)/s*(Math.PI*2),T=Math.sin(k)*w,N=Math.cos(k)*w,h.push(T,0,N),p.push(y.r,y.g,y.b)}}const m=new Qt;m.setAttribute("position",new wt(h,3)),m.setAttribute("color",new wt(p,3));const v=new yr({vertexColors:!0,toneMapped:!1});super(m,v),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const dN=new Y,Cv=new Y,hN=new Y;class C2 extends In{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let s=new Qt;s.setAttribute("position",new wt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new yr({fog:!1,toneMapped:!1});this.lightPlane=new Su(s,a),this.add(this.lightPlane),s=new Qt,s.setAttribute("position",new wt([0,0,0,0,0,1],3)),this.targetLine=new Su(s,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),dN.setFromMatrixPosition(this.light.matrixWorld),Cv.setFromMatrixPosition(this.light.target.matrixWorld),hN.subVectors(Cv,dN),this.lightPlane.lookAt(Cv),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Cv),this.targetLine.scale.z=hN.length()}}const Rv=new Y,Oi=new vy;class R2 extends xl{constructor(e){const t=new Qt,n=new yr({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],a=[],u={};h("n1","n2"),h("n2","n4"),h("n4","n3"),h("n3","n1"),h("f1","f2"),h("f2","f4"),h("f4","f3"),h("f3","f1"),h("n1","f1"),h("n2","f2"),h("n3","f3"),h("n4","f4"),h("p","n1"),h("p","n2"),h("p","n3"),h("p","n4"),h("u1","u2"),h("u2","u3"),h("u3","u1"),h("c","t"),h("p","c"),h("cn1","cn2"),h("cn3","cn4"),h("cf1","cf2"),h("cf3","cf4");function h(M,k){p(M),p(k)}function p(M){s.push(0,0,0),a.push(0,0,0),u[M]===void 0&&(u[M]=[]),u[M].push(s.length/3-1)}t.setAttribute("position",new wt(s,3)),t.setAttribute("color",new wt(a,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=u,this.update();const m=new vt(16755200),v=new vt(16711680),b=new vt(43775),y=new vt(16777215),w=new vt(3355443);this.setColors(m,v,b,y,w)}setColors(e,t,n,s,a){const h=this.geometry.getAttribute("color");return h.setXYZ(0,e.r,e.g,e.b),h.setXYZ(1,e.r,e.g,e.b),h.setXYZ(2,e.r,e.g,e.b),h.setXYZ(3,e.r,e.g,e.b),h.setXYZ(4,e.r,e.g,e.b),h.setXYZ(5,e.r,e.g,e.b),h.setXYZ(6,e.r,e.g,e.b),h.setXYZ(7,e.r,e.g,e.b),h.setXYZ(8,e.r,e.g,e.b),h.setXYZ(9,e.r,e.g,e.b),h.setXYZ(10,e.r,e.g,e.b),h.setXYZ(11,e.r,e.g,e.b),h.setXYZ(12,e.r,e.g,e.b),h.setXYZ(13,e.r,e.g,e.b),h.setXYZ(14,e.r,e.g,e.b),h.setXYZ(15,e.r,e.g,e.b),h.setXYZ(16,e.r,e.g,e.b),h.setXYZ(17,e.r,e.g,e.b),h.setXYZ(18,e.r,e.g,e.b),h.setXYZ(19,e.r,e.g,e.b),h.setXYZ(20,e.r,e.g,e.b),h.setXYZ(21,e.r,e.g,e.b),h.setXYZ(22,e.r,e.g,e.b),h.setXYZ(23,e.r,e.g,e.b),h.setXYZ(24,t.r,t.g,t.b),h.setXYZ(25,t.r,t.g,t.b),h.setXYZ(26,t.r,t.g,t.b),h.setXYZ(27,t.r,t.g,t.b),h.setXYZ(28,t.r,t.g,t.b),h.setXYZ(29,t.r,t.g,t.b),h.setXYZ(30,t.r,t.g,t.b),h.setXYZ(31,t.r,t.g,t.b),h.setXYZ(32,n.r,n.g,n.b),h.setXYZ(33,n.r,n.g,n.b),h.setXYZ(34,n.r,n.g,n.b),h.setXYZ(35,n.r,n.g,n.b),h.setXYZ(36,n.r,n.g,n.b),h.setXYZ(37,n.r,n.g,n.b),h.setXYZ(38,s.r,s.g,s.b),h.setXYZ(39,s.r,s.g,s.b),h.setXYZ(40,a.r,a.g,a.b),h.setXYZ(41,a.r,a.g,a.b),h.setXYZ(42,a.r,a.g,a.b),h.setXYZ(43,a.r,a.g,a.b),h.setXYZ(44,a.r,a.g,a.b),h.setXYZ(45,a.r,a.g,a.b),h.setXYZ(46,a.r,a.g,a.b),h.setXYZ(47,a.r,a.g,a.b),h.setXYZ(48,a.r,a.g,a.b),h.setXYZ(49,a.r,a.g,a.b),h.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,n=1,s=1;let a,u;if(Oi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)a=1,u=0;else if(this.camera.coordinateSystem===oa)a=-1,u=1;else if(this.camera.coordinateSystem===Jf)a=0,u=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);qi("c",t,e,Oi,0,0,a),qi("t",t,e,Oi,0,0,u),qi("n1",t,e,Oi,-n,-s,a),qi("n2",t,e,Oi,n,-s,a),qi("n3",t,e,Oi,-n,s,a),qi("n4",t,e,Oi,n,s,a),qi("f1",t,e,Oi,-n,-s,u),qi("f2",t,e,Oi,n,-s,u),qi("f3",t,e,Oi,-n,s,u),qi("f4",t,e,Oi,n,s,u),qi("u1",t,e,Oi,n*.7,s*1.1,a),qi("u2",t,e,Oi,-n*.7,s*1.1,a),qi("u3",t,e,Oi,0,s*2,a),qi("cf1",t,e,Oi,-n,0,u),qi("cf2",t,e,Oi,n,0,u),qi("cf3",t,e,Oi,0,-s,u),qi("cf4",t,e,Oi,0,s,u),qi("cn1",t,e,Oi,-n,0,a),qi("cn2",t,e,Oi,n,0,a),qi("cn3",t,e,Oi,0,-s,a),qi("cn4",t,e,Oi,0,s,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function qi(i,e,t,n,s,a,u){Rv.set(s,a,u).unproject(n);const h=e[i];if(h!==void 0){const p=t.getAttribute("position");for(let m=0,v=h.length;m<v;m++)p.setXYZ(h[m],Rv.x,Rv.y,Rv.z)}}const jv=new Qs;class j2 extends xl{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(24),a=new Qt;a.setIndex(new Kn(n,1)),a.setAttribute("position",new Kn(s,3)),super(a,new yr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&jv.setFromObject(this.object),jv.isEmpty())return;const e=jv.min,t=jv.max,n=this.geometry.attributes.position,s=n.array;s[0]=t.x,s[1]=t.y,s[2]=t.z,s[3]=e.x,s[4]=t.y,s[5]=t.z,s[6]=e.x,s[7]=e.y,s[8]=t.z,s[9]=t.x,s[10]=e.y,s[11]=t.z,s[12]=t.x,s[13]=t.y,s[14]=e.z,s[15]=e.x,s[16]=t.y,s[17]=e.z,s[18]=e.x,s[19]=e.y,s[20]=e.z,s[21]=t.x,s[22]=e.y,s[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class D2 extends xl{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new Qt;a.setIndex(new Kn(n,1)),a.setAttribute("position",new wt(s,3)),super(a,new yr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class I2 extends Su{constructor(e,t=1,n=16776960){const s=n,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],u=new Qt;u.setAttribute("position",new wt(a,3)),u.computeBoundingSphere(),super(u,new yr({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const h=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],p=new Qt;p.setAttribute("position",new wt(h,3)),p.computeBoundingSphere(),this.add(new ns(p,new Nu({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const fN=new Y;let Dv,S1;class O2 extends In{constructor(e=new Y(0,0,1),t=new Y(0,0,0),n=1,s=16776960,a=n*.2,u=a*.2){super(),this.type="ArrowHelper",Dv===void 0&&(Dv=new Qt,Dv.setAttribute("position",new wt([0,0,0,0,1,0],3)),S1=new Qg(.5,1,5,1),S1.translate(0,-.5,0)),this.position.copy(t),this.line=new Su(Dv,new yr({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ns(S1,new Nu({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,a,u)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{fN.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(fN,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class L2 extends xl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new Qt;s.setAttribute("position",new wt(t,3)),s.setAttribute("color",new wt(n,3));const a=new yr({vertexColors:!0,toneMapped:!1});super(s,a),this.type="AxesHelper"}setColors(e,t,n){const s=new vt,a=this.geometry.attributes.color.array;return s.set(e),s.toArray(a,0),s.toArray(a,3),s.set(t),s.toArray(a,6),s.toArray(a,9),s.set(n),s.toArray(a,12),s.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class U2{constructor(){this.type="ShapePath",this.color=new vt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Hb,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,s){return this.currentPath.quadraticCurveTo(e,t,n,s),this}bezierCurveTo(e,t,n,s,a,u){return this.currentPath.bezierCurveTo(e,t,n,s,a,u),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(N){const j=[];for(let R=0,D=N.length;R<D;R++){const I=N[R],P=new Hd;P.curves=I.curves,j.push(P)}return j}function n(N,j){const R=j.length;let D=!1;for(let I=R-1,P=0;P<R;I=P++){let z=j[I],G=j[P],U=G.x-z.x,L=G.y-z.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(z=j[P],U=-U,G=j[I],L=-L),N.y<z.y||N.y>G.y)continue;if(N.y===z.y){if(N.x===z.x)return!0}else{const W=L*(N.x-z.x)-U*(N.y-z.y);if(W===0)return!0;if(W<0)continue;D=!D}}else{if(N.y!==z.y)continue;if(G.x<=N.x&&N.x<=z.x||z.x<=N.x&&N.x<=G.x)return!0}}return D}const s=wo.isClockWise,a=this.subPaths;if(a.length===0)return[];let u,h,p;const m=[];if(a.length===1)return h=a[0],p=new Hd,p.curves=h.curves,m.push(p),m;let v=!s(a[0].getPoints());v=e?!v:v;const b=[],y=[];let w=[],M=0,k;y[M]=void 0,w[M]=[];for(let N=0,j=a.length;N<j;N++)h=a[N],k=h.getPoints(),u=s(k),u=e?!u:u,u?(!v&&y[M]&&M++,y[M]={s:new Hd,p:k},y[M].s.curves=h.curves,v&&M++,w[M]=[]):w[M].push({h,p:k[0]});if(!y[0])return t(a);if(y.length>1){let N=!1,j=0;for(let R=0,D=y.length;R<D;R++)b[R]=[];for(let R=0,D=y.length;R<D;R++){const I=w[R];for(let P=0;P<I.length;P++){const z=I[P];let G=!0;for(let U=0;U<y.length;U++)n(z.p,y[U].p)&&(R!==U&&j++,G?(G=!1,b[U].push(z)):N=!0);G&&b[R].push(z)}}j>0&&N===!1&&(w=b)}let T;for(let N=0,j=y.length;N<j;N++){p=y[N].s,m.push(p),T=w[N];for(let R=0,D=T.length;R<D;R++)p.holes.push(T[R].h)}return m}}class P2 extends gl{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){ut("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function z2(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function B2(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function F2(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function gw(i,e,t,n){const s=V2(n);switch(t){case $w:return i*e;case uy:return i*e/s.components*s.byteLength;case Kg:return i*e/s.components*s.byteLength;case Xd:return i*e*2/s.components*s.byteLength;case dy:return i*e*2/s.components*s.byteLength;case Yw:return i*e*3/s.components*s.byteLength;case _s:return i*e*4/s.components*s.byteLength;case hy:return i*e*4/s.components*s.byteLength;case dg:case hg:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case fg:case pg:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case lb:case ub:return Math.max(i,16)*Math.max(e,8)/4;case ob:case cb:return Math.max(i,8)*Math.max(e,8)/2;case db:case hb:case pb:case mb:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case fb:case gb:case xb:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case vb:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case bb:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case yb:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case _b:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case wb:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case Sb:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case Mb:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case Eb:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case Nb:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case Tb:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case Ab:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case kb:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case Cb:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case Rb:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case jb:case Db:case Ib:return Math.ceil(i/4)*Math.ceil(e/4)*16;case Ob:case Lb:return Math.ceil(i/4)*Math.ceil(e/4)*8;case Ub:case Pb:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function V2(i){switch(i){case xr:case Gw:return{byteLength:1,components:1};case Kf:case qw:case Mo:return{byteLength:2,components:1};case ly:case cy:return{byteLength:2,components:4};case Ga:case oy:case ys:return{byteLength:4,components:1};case Ww:case Xw:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class H2{static contain(e,t){return z2(e,t)}static cover(e,t){return B2(e,t)}static fill(e){return F2(e)}static getByteLength(e,t,n,s){return gw(e,t,n,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:sy}}));typeof window<"u"&&(window.__THREE__?ut("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=sy);function wk(){let i=null,e=!1,t=null,n=null;function s(a,u){t(a,u),n=i.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(s),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){i=a}}}function G2(i){const e=new WeakMap;function t(h,p){const m=h.array,v=h.usage,b=m.byteLength,y=i.createBuffer();i.bindBuffer(p,y),i.bufferData(p,m,v),h.onUploadCallback();let w;if(m instanceof Float32Array)w=i.FLOAT;else if(typeof Float16Array<"u"&&m instanceof Float16Array)w=i.HALF_FLOAT;else if(m instanceof Uint16Array)h.isFloat16BufferAttribute?w=i.HALF_FLOAT:w=i.UNSIGNED_SHORT;else if(m instanceof Int16Array)w=i.SHORT;else if(m instanceof Uint32Array)w=i.UNSIGNED_INT;else if(m instanceof Int32Array)w=i.INT;else if(m instanceof Int8Array)w=i.BYTE;else if(m instanceof Uint8Array)w=i.UNSIGNED_BYTE;else if(m instanceof Uint8ClampedArray)w=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+m);return{buffer:y,type:w,bytesPerElement:m.BYTES_PER_ELEMENT,version:h.version,size:b}}function n(h,p,m){const v=p.array,b=p.updateRanges;if(i.bindBuffer(m,h),b.length===0)i.bufferSubData(m,0,v);else{b.sort((w,M)=>w.start-M.start);let y=0;for(let w=1;w<b.length;w++){const M=b[y],k=b[w];k.start<=M.start+M.count+1?M.count=Math.max(M.count,k.start+k.count-M.start):(++y,b[y]=k)}b.length=y+1;for(let w=0,M=b.length;w<M;w++){const k=b[w];i.bufferSubData(m,k.start*v.BYTES_PER_ELEMENT,v,k.start,k.count)}p.clearUpdateRanges()}p.onUploadCallback()}function s(h){return h.isInterleavedBufferAttribute&&(h=h.data),e.get(h)}function a(h){h.isInterleavedBufferAttribute&&(h=h.data);const p=e.get(h);p&&(i.deleteBuffer(p.buffer),e.delete(h))}function u(h,p){if(h.isInterleavedBufferAttribute&&(h=h.data),h.isGLBufferAttribute){const v=e.get(h);(!v||v.version<h.version)&&e.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}const m=e.get(h);if(m===void 0)e.set(h,t(h,p));else if(m.version<h.version){if(m.size!==h.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(m.buffer,h,p),m.version=h.version}}return{get:s,remove:a,update:u}}var q2=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,W2=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,X2=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,$2=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Y2=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,K2=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Z2=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,J2=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Q2=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,eO=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,tO=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,nO=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,iO=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,sO=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,rO=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,aO=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,oO=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,lO=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,cO=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,uO=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,dO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,hO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,fO=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,pO=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,mO=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,gO=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,xO=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,vO=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,bO=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,yO=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,_O="gl_FragColor = linearToOutputTexel( gl_FragColor );",wO=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,SO=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,MO=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,EO=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,NO=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,TO=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,AO=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,kO=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,CO=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,RO=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,jO=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,DO=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,IO=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,OO=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,LO=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,UO=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,PO=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,zO=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,BO=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,FO=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,VO=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,HO=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,GO=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,qO=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,WO=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,XO=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,$O=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,YO=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,KO=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,ZO=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,JO=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,QO=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,eL=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,tL=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,nL=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,iL=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,sL=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,rL=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,aL=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,oL=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,lL=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,cL=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,uL=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,dL=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,hL=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,fL=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,pL=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,mL=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,gL=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,xL=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,vL=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,bL=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,yL=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,_L=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,wL=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,SL=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,ML=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,EL=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,NL=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,TL=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,AL=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,kL=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,CL=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,RL=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,jL=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,DL=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,IL=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,OL=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,LL=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,UL=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,PL=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,zL=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,BL=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,FL=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,VL=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,HL=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const GL=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,qL=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,WL=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,XL=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,$L=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,YL=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,KL=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,ZL=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,JL=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,QL=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,eU=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,tU=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,nU=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,iU=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,sU=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,rU=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aU=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,oU=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lU=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,cU=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uU=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,dU=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,hU=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fU=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pU=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,mU=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gU=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,xU=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vU=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,bU=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,yU=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_U=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,wU=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,SU=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,dn={alphahash_fragment:q2,alphahash_pars_fragment:W2,alphamap_fragment:X2,alphamap_pars_fragment:$2,alphatest_fragment:Y2,alphatest_pars_fragment:K2,aomap_fragment:Z2,aomap_pars_fragment:J2,batching_pars_vertex:Q2,batching_vertex:eO,begin_vertex:tO,beginnormal_vertex:nO,bsdfs:iO,iridescence_fragment:sO,bumpmap_pars_fragment:rO,clipping_planes_fragment:aO,clipping_planes_pars_fragment:oO,clipping_planes_pars_vertex:lO,clipping_planes_vertex:cO,color_fragment:uO,color_pars_fragment:dO,color_pars_vertex:hO,color_vertex:fO,common:pO,cube_uv_reflection_fragment:mO,defaultnormal_vertex:gO,displacementmap_pars_vertex:xO,displacementmap_vertex:vO,emissivemap_fragment:bO,emissivemap_pars_fragment:yO,colorspace_fragment:_O,colorspace_pars_fragment:wO,envmap_fragment:SO,envmap_common_pars_fragment:MO,envmap_pars_fragment:EO,envmap_pars_vertex:NO,envmap_physical_pars_fragment:UO,envmap_vertex:TO,fog_vertex:AO,fog_pars_vertex:kO,fog_fragment:CO,fog_pars_fragment:RO,gradientmap_pars_fragment:jO,lightmap_pars_fragment:DO,lights_lambert_fragment:IO,lights_lambert_pars_fragment:OO,lights_pars_begin:LO,lights_toon_fragment:PO,lights_toon_pars_fragment:zO,lights_phong_fragment:BO,lights_phong_pars_fragment:FO,lights_physical_fragment:VO,lights_physical_pars_fragment:HO,lights_fragment_begin:GO,lights_fragment_maps:qO,lights_fragment_end:WO,logdepthbuf_fragment:XO,logdepthbuf_pars_fragment:$O,logdepthbuf_pars_vertex:YO,logdepthbuf_vertex:KO,map_fragment:ZO,map_pars_fragment:JO,map_particle_fragment:QO,map_particle_pars_fragment:eL,metalnessmap_fragment:tL,metalnessmap_pars_fragment:nL,morphinstance_vertex:iL,morphcolor_vertex:sL,morphnormal_vertex:rL,morphtarget_pars_vertex:aL,morphtarget_vertex:oL,normal_fragment_begin:lL,normal_fragment_maps:cL,normal_pars_fragment:uL,normal_pars_vertex:dL,normal_vertex:hL,normalmap_pars_fragment:fL,clearcoat_normal_fragment_begin:pL,clearcoat_normal_fragment_maps:mL,clearcoat_pars_fragment:gL,iridescence_pars_fragment:xL,opaque_fragment:vL,packing:bL,premultiplied_alpha_fragment:yL,project_vertex:_L,dithering_fragment:wL,dithering_pars_fragment:SL,roughnessmap_fragment:ML,roughnessmap_pars_fragment:EL,shadowmap_pars_fragment:NL,shadowmap_pars_vertex:TL,shadowmap_vertex:AL,shadowmask_pars_fragment:kL,skinbase_vertex:CL,skinning_pars_vertex:RL,skinning_vertex:jL,skinnormal_vertex:DL,specularmap_fragment:IL,specularmap_pars_fragment:OL,tonemapping_fragment:LL,tonemapping_pars_fragment:UL,transmission_fragment:PL,transmission_pars_fragment:zL,uv_pars_fragment:BL,uv_pars_vertex:FL,uv_vertex:VL,worldpos_vertex:HL,background_vert:GL,background_frag:qL,backgroundCube_vert:WL,backgroundCube_frag:XL,cube_vert:$L,cube_frag:YL,depth_vert:KL,depth_frag:ZL,distance_vert:JL,distance_frag:QL,equirect_vert:eU,equirect_frag:tU,linedashed_vert:nU,linedashed_frag:iU,meshbasic_vert:sU,meshbasic_frag:rU,meshlambert_vert:aU,meshlambert_frag:oU,meshmatcap_vert:lU,meshmatcap_frag:cU,meshnormal_vert:uU,meshnormal_frag:dU,meshphong_vert:hU,meshphong_frag:fU,meshphysical_vert:pU,meshphysical_frag:mU,meshtoon_vert:gU,meshtoon_frag:xU,points_vert:vU,points_frag:bU,shadow_vert:yU,shadow_frag:_U,sprite_vert:wU,sprite_frag:SU},dt={common:{diffuse:{value:new vt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new nn},alphaMap:{value:null},alphaMapTransform:{value:new nn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new nn}},envmap:{envMap:{value:null},envMapRotation:{value:new nn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new nn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new nn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new nn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new nn},normalScale:{value:new ze(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new nn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new nn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new nn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new nn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new vt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new vt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new nn},alphaTest:{value:0},uvTransform:{value:new nn}},sprite:{diffuse:{value:new vt(16777215)},opacity:{value:1},center:{value:new ze(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new nn},alphaMap:{value:null},alphaMapTransform:{value:new nn},alphaTest:{value:0}}},_o={basic:{uniforms:gr([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.fog]),vertexShader:dn.meshbasic_vert,fragmentShader:dn.meshbasic_frag},lambert:{uniforms:gr([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new vt(0)}}]),vertexShader:dn.meshlambert_vert,fragmentShader:dn.meshlambert_frag},phong:{uniforms:gr([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new vt(0)},specular:{value:new vt(1118481)},shininess:{value:30}}]),vertexShader:dn.meshphong_vert,fragmentShader:dn.meshphong_frag},standard:{uniforms:gr([dt.common,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.roughnessmap,dt.metalnessmap,dt.fog,dt.lights,{emissive:{value:new vt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:dn.meshphysical_vert,fragmentShader:dn.meshphysical_frag},toon:{uniforms:gr([dt.common,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.gradientmap,dt.fog,dt.lights,{emissive:{value:new vt(0)}}]),vertexShader:dn.meshtoon_vert,fragmentShader:dn.meshtoon_frag},matcap:{uniforms:gr([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,{matcap:{value:null}}]),vertexShader:dn.meshmatcap_vert,fragmentShader:dn.meshmatcap_frag},points:{uniforms:gr([dt.points,dt.fog]),vertexShader:dn.points_vert,fragmentShader:dn.points_frag},dashed:{uniforms:gr([dt.common,dt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:dn.linedashed_vert,fragmentShader:dn.linedashed_frag},depth:{uniforms:gr([dt.common,dt.displacementmap]),vertexShader:dn.depth_vert,fragmentShader:dn.depth_frag},normal:{uniforms:gr([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,{opacity:{value:1}}]),vertexShader:dn.meshnormal_vert,fragmentShader:dn.meshnormal_frag},sprite:{uniforms:gr([dt.sprite,dt.fog]),vertexShader:dn.sprite_vert,fragmentShader:dn.sprite_frag},background:{uniforms:{uvTransform:{value:new nn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:dn.background_vert,fragmentShader:dn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new nn}},vertexShader:dn.backgroundCube_vert,fragmentShader:dn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:dn.cube_vert,fragmentShader:dn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:dn.equirect_vert,fragmentShader:dn.equirect_frag},distance:{uniforms:gr([dt.common,dt.displacementmap,{referencePosition:{value:new Y},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:dn.distance_vert,fragmentShader:dn.distance_frag},shadow:{uniforms:gr([dt.lights,dt.fog,{color:{value:new vt(0)},opacity:{value:1}}]),vertexShader:dn.shadow_vert,fragmentShader:dn.shadow_frag}};_o.physical={uniforms:gr([_o.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new nn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new nn},clearcoatNormalScale:{value:new ze(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new nn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new nn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new nn},sheen:{value:0},sheenColor:{value:new vt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new nn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new nn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new nn},transmissionSamplerSize:{value:new ze},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new nn},attenuationDistance:{value:0},attenuationColor:{value:new vt(0)},specularColor:{value:new vt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new nn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new nn},anisotropyVector:{value:new ze},anisotropyMap:{value:null},anisotropyMapTransform:{value:new nn}}]),vertexShader:dn.meshphysical_vert,fragmentShader:dn.meshphysical_frag};const Iv={r:0,b:0,g:0},Ad=new da,MU=new Xt;function EU(i,e,t,n,s,a,u){const h=new vt(0);let p=a===!0?0:1,m,v,b=null,y=0,w=null;function M(R){let D=R.isScene===!0?R.background:null;return D&&D.isTexture&&(D=(R.backgroundBlurriness>0?t:e).get(D)),D}function k(R){let D=!1;const I=M(R);I===null?N(h,p):I&&I.isColor&&(N(I,1),D=!0);const P=i.xr.getEnvironmentBlendMode();P==="additive"?n.buffers.color.setClear(0,0,0,1,u):P==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,u),(i.autoClear||D)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function T(R,D){const I=M(D);I&&(I.isCubeTexture||I.mapping===op)?(v===void 0&&(v=new ns(new Jd(1,1,1),new Xr({name:"BackgroundCubeMaterial",uniforms:np(_o.backgroundCube.uniforms),vertexShader:_o.backgroundCube.vertexShader,fragmentShader:_o.backgroundCube.fragmentShader,side:br,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),v.geometry.deleteAttribute("normal"),v.geometry.deleteAttribute("uv"),v.onBeforeRender=function(P,z,G){this.matrixWorld.copyPosition(G.matrixWorld)},Object.defineProperty(v.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(v)),Ad.copy(D.backgroundRotation),Ad.x*=-1,Ad.y*=-1,Ad.z*=-1,I.isCubeTexture&&I.isRenderTargetTexture===!1&&(Ad.y*=-1,Ad.z*=-1),v.material.uniforms.envMap.value=I,v.material.uniforms.flipEnvMap.value=I.isCubeTexture&&I.isRenderTargetTexture===!1?-1:1,v.material.uniforms.backgroundBlurriness.value=D.backgroundBlurriness,v.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,v.material.uniforms.backgroundRotation.value.setFromMatrix4(MU.makeRotationFromEuler(Ad)),v.material.toneMapped=Tn.getTransfer(I.colorSpace)!==Hn,(b!==I||y!==I.version||w!==i.toneMapping)&&(v.material.needsUpdate=!0,b=I,y=I.version,w=i.toneMapping),v.layers.enableAll(),R.unshift(v,v.geometry,v.material,0,0,null)):I&&I.isTexture&&(m===void 0&&(m=new ns(new up(2,2),new Xr({name:"BackgroundMaterial",uniforms:np(_o.background.uniforms),vertexShader:_o.background.vertexShader,fragmentShader:_o.background.fragmentShader,side:cc,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),m.geometry.deleteAttribute("normal"),Object.defineProperty(m.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(m)),m.material.uniforms.t2D.value=I,m.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,m.material.toneMapped=Tn.getTransfer(I.colorSpace)!==Hn,I.matrixAutoUpdate===!0&&I.updateMatrix(),m.material.uniforms.uvTransform.value.copy(I.matrix),(b!==I||y!==I.version||w!==i.toneMapping)&&(m.material.needsUpdate=!0,b=I,y=I.version,w=i.toneMapping),m.layers.enableAll(),R.unshift(m,m.geometry,m.material,0,0,null))}function N(R,D){R.getRGB(Iv,EA(i)),n.buffers.color.setClear(Iv.r,Iv.g,Iv.b,D,u)}function j(){v!==void 0&&(v.geometry.dispose(),v.material.dispose(),v=void 0),m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0)}return{getClearColor:function(){return h},setClearColor:function(R,D=1){h.set(R),p=D,N(h,p)},getClearAlpha:function(){return p},setClearAlpha:function(R){p=R,N(h,p)},render:k,addToRenderList:T,dispose:j}}function NU(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},s=y(null);let a=s,u=!1;function h(L,W,J,Q,ue){let ne=!1;const X=b(Q,J,W);a!==X&&(a=X,m(a.object)),ne=w(L,Q,J,ue),ne&&M(L,Q,J,ue),ue!==null&&e.update(ue,i.ELEMENT_ARRAY_BUFFER),(ne||u)&&(u=!1,D(L,W,J,Q),ue!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(ue).buffer))}function p(){return i.createVertexArray()}function m(L){return i.bindVertexArray(L)}function v(L){return i.deleteVertexArray(L)}function b(L,W,J){const Q=J.wireframe===!0;let ue=n[L.id];ue===void 0&&(ue={},n[L.id]=ue);let ne=ue[W.id];ne===void 0&&(ne={},ue[W.id]=ne);let X=ne[Q];return X===void 0&&(X=y(p()),ne[Q]=X),X}function y(L){const W=[],J=[],Q=[];for(let ue=0;ue<t;ue++)W[ue]=0,J[ue]=0,Q[ue]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:W,enabledAttributes:J,attributeDivisors:Q,object:L,attributes:{},index:null}}function w(L,W,J,Q){const ue=a.attributes,ne=W.attributes;let X=0;const Z=J.getAttributes();for(const re in Z)if(Z[re].location>=0){const we=ue[re];let q=ne[re];if(q===void 0&&(re==="instanceMatrix"&&L.instanceMatrix&&(q=L.instanceMatrix),re==="instanceColor"&&L.instanceColor&&(q=L.instanceColor)),we===void 0||we.attribute!==q||q&&we.data!==q.data)return!0;X++}return a.attributesNum!==X||a.index!==Q}function M(L,W,J,Q){const ue={},ne=W.attributes;let X=0;const Z=J.getAttributes();for(const re in Z)if(Z[re].location>=0){let we=ne[re];we===void 0&&(re==="instanceMatrix"&&L.instanceMatrix&&(we=L.instanceMatrix),re==="instanceColor"&&L.instanceColor&&(we=L.instanceColor));const q={};q.attribute=we,we&&we.data&&(q.data=we.data),ue[re]=q,X++}a.attributes=ue,a.attributesNum=X,a.index=Q}function k(){const L=a.newAttributes;for(let W=0,J=L.length;W<J;W++)L[W]=0}function T(L){N(L,0)}function N(L,W){const J=a.newAttributes,Q=a.enabledAttributes,ue=a.attributeDivisors;J[L]=1,Q[L]===0&&(i.enableVertexAttribArray(L),Q[L]=1),ue[L]!==W&&(i.vertexAttribDivisor(L,W),ue[L]=W)}function j(){const L=a.newAttributes,W=a.enabledAttributes;for(let J=0,Q=W.length;J<Q;J++)W[J]!==L[J]&&(i.disableVertexAttribArray(J),W[J]=0)}function R(L,W,J,Q,ue,ne,X){X===!0?i.vertexAttribIPointer(L,W,J,ue,ne):i.vertexAttribPointer(L,W,J,Q,ue,ne)}function D(L,W,J,Q){k();const ue=Q.attributes,ne=J.getAttributes(),X=W.defaultAttributeValues;for(const Z in ne){const re=ne[Z];if(re.location>=0){let pe=ue[Z];if(pe===void 0&&(Z==="instanceMatrix"&&L.instanceMatrix&&(pe=L.instanceMatrix),Z==="instanceColor"&&L.instanceColor&&(pe=L.instanceColor)),pe!==void 0){const we=pe.normalized,q=pe.itemSize,ce=e.get(pe);if(ce===void 0)continue;const Ee=ce.buffer,Pe=ce.type,rt=ce.bytesPerElement,me=Pe===i.INT||Pe===i.UNSIGNED_INT||pe.gpuType===oy;if(pe.isInterleavedBufferAttribute){const Ce=pe.data,Fe=Ce.stride,nt=pe.offset;if(Ce.isInstancedInterleavedBuffer){for(let ft=0;ft<re.locationSize;ft++)N(re.location+ft,Ce.meshPerAttribute);L.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=Ce.meshPerAttribute*Ce.count)}else for(let ft=0;ft<re.locationSize;ft++)T(re.location+ft);i.bindBuffer(i.ARRAY_BUFFER,Ee);for(let ft=0;ft<re.locationSize;ft++)R(re.location+ft,q/re.locationSize,Pe,we,Fe*rt,(nt+q/re.locationSize*ft)*rt,me)}else{if(pe.isInstancedBufferAttribute){for(let Ce=0;Ce<re.locationSize;Ce++)N(re.location+Ce,pe.meshPerAttribute);L.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=pe.meshPerAttribute*pe.count)}else for(let Ce=0;Ce<re.locationSize;Ce++)T(re.location+Ce);i.bindBuffer(i.ARRAY_BUFFER,Ee);for(let Ce=0;Ce<re.locationSize;Ce++)R(re.location+Ce,q/re.locationSize,Pe,we,q*rt,q/re.locationSize*Ce*rt,me)}}else if(X!==void 0){const we=X[Z];if(we!==void 0)switch(we.length){case 2:i.vertexAttrib2fv(re.location,we);break;case 3:i.vertexAttrib3fv(re.location,we);break;case 4:i.vertexAttrib4fv(re.location,we);break;default:i.vertexAttrib1fv(re.location,we)}}}}j()}function I(){G();for(const L in n){const W=n[L];for(const J in W){const Q=W[J];for(const ue in Q)v(Q[ue].object),delete Q[ue];delete W[J]}delete n[L]}}function P(L){if(n[L.id]===void 0)return;const W=n[L.id];for(const J in W){const Q=W[J];for(const ue in Q)v(Q[ue].object),delete Q[ue];delete W[J]}delete n[L.id]}function z(L){for(const W in n){const J=n[W];if(J[L.id]===void 0)continue;const Q=J[L.id];for(const ue in Q)v(Q[ue].object),delete Q[ue];delete J[L.id]}}function G(){U(),u=!0,a!==s&&(a=s,m(a.object))}function U(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:h,reset:G,resetDefaultState:U,dispose:I,releaseStatesOfGeometry:P,releaseStatesOfProgram:z,initAttributes:k,enableAttribute:T,disableUnusedAttributes:j}}function TU(i,e,t){let n;function s(m){n=m}function a(m,v){i.drawArrays(n,m,v),t.update(v,n,1)}function u(m,v,b){b!==0&&(i.drawArraysInstanced(n,m,v,b),t.update(v,n,b))}function h(m,v,b){if(b===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,m,0,v,0,b);let w=0;for(let M=0;M<b;M++)w+=v[M];t.update(w,n,1)}function p(m,v,b,y){if(b===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let M=0;M<m.length;M++)u(m[M],v[M],y[M]);else{w.multiDrawArraysInstancedWEBGL(n,m,0,v,0,y,0,b);let M=0;for(let k=0;k<b;k++)M+=v[k]*y[k];t.update(M,n,1)}}this.setMode=s,this.render=a,this.renderInstances=u,this.renderMultiDraw=h,this.renderMultiDrawInstances=p}function AU(i,e,t,n){let s;function a(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const z=e.get("EXT_texture_filter_anisotropic");s=i.getParameter(z.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function u(z){return!(z!==_s&&n.convert(z)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function h(z){const G=z===Mo&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(z!==xr&&n.convert(z)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&z!==ys&&!G)}function p(z){if(z==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";z="mediump"}return z==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let m=t.precision!==void 0?t.precision:"highp";const v=p(m);v!==m&&(ut("WebGLRenderer:",m,"not supported, using",v,"instead."),m=v);const b=t.logarithmicDepthBuffer===!0,y=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),w=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),M=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),k=i.getParameter(i.MAX_TEXTURE_SIZE),T=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),N=i.getParameter(i.MAX_VERTEX_ATTRIBS),j=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),R=i.getParameter(i.MAX_VARYING_VECTORS),D=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),I=i.getParameter(i.MAX_SAMPLES),P=i.getParameter(i.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:p,textureFormatReadable:u,textureTypeReadable:h,precision:m,logarithmicDepthBuffer:b,reversedDepthBuffer:y,maxTextures:w,maxVertexTextures:M,maxTextureSize:k,maxCubemapSize:T,maxAttributes:N,maxVertexUniforms:j,maxVaryings:R,maxFragmentUniforms:D,maxSamples:I,samples:P}}function kU(i){const e=this;let t=null,n=0,s=!1,a=!1;const u=new fu,h=new nn,p={value:null,needsUpdate:!1};this.uniform=p,this.numPlanes=0,this.numIntersection=0,this.init=function(b,y){const w=b.length!==0||y||n!==0||s;return s=y,n=b.length,w},this.beginShadows=function(){a=!0,v(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(b,y){t=v(b,y,0)},this.setState=function(b,y,w){const M=b.clippingPlanes,k=b.clipIntersection,T=b.clipShadows,N=i.get(b);if(!s||M===null||M.length===0||a&&!T)a?v(null):m();else{const j=a?0:n,R=j*4;let D=N.clippingState||null;p.value=D,D=v(M,y,R,w);for(let I=0;I!==R;++I)D[I]=t[I];N.clippingState=D,this.numIntersection=k?this.numPlanes:0,this.numPlanes+=j}};function m(){p.value!==t&&(p.value=t,p.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function v(b,y,w,M){const k=b!==null?b.length:0;let T=null;if(k!==0){if(T=p.value,M!==!0||T===null){const N=w+k*4,j=y.matrixWorldInverse;h.getNormalMatrix(j),(T===null||T.length<N)&&(T=new Float32Array(N));for(let R=0,D=w;R!==k;++R,D+=4)u.copy(b[R]).applyMatrix4(j,h),u.normal.toArray(T,D),T[D+3]=u.constant}p.value=T,p.needsUpdate=!0}return e.numPlanes=k,e.numIntersection=0,T}}function CU(i){let e=new WeakMap;function t(u,h){return h===Ag?u.mapping=fl:h===kg&&(u.mapping=yu),u}function n(u){if(u&&u.isTexture){const h=u.mapping;if(h===Ag||h===kg)if(e.has(u)){const p=e.get(u).texture;return t(p,u.mapping)}else{const p=u.image;if(p&&p.height>0){const m=new tS(p.height);return m.fromEquirectangularTexture(i,u),e.set(u,m),u.addEventListener("dispose",s),t(m.texture,u.mapping)}else return null}}return u}function s(u){const h=u.target;h.removeEventListener("dispose",s);const p=e.get(h);p!==void 0&&(e.delete(h),p.dispose())}function a(){e=new WeakMap}return{get:n,dispose:a}}const bu=4,pN=[.125,.215,.35,.446,.526,.582],Od=20,RU=256,Jm=new th,mN=new vt;let M1=null,E1=0,N1=0,T1=!1;const jU=new Y;class xw{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,n=.1,s=100,a={}){const{size:u=256,position:h=jU}=a;M1=this._renderer.getRenderTarget(),E1=this._renderer.getActiveCubeFace(),N1=this._renderer.getActiveMipmapLevel(),T1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(u);const p=this._allocateTargets();return p.depthBuffer=!0,this._sceneToCubeUV(e,n,s,p,h),t>0&&this._blur(p,0,0,t),this._applyPMREM(p),this._cleanup(p),p}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=vN(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=xN(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(M1,E1,N1),this._renderer.xr.enabled=T1,e.scissorTest=!1,Of(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===fl||e.mapping===yu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),M1=this._renderer.getRenderTarget(),E1=this._renderer.getActiveCubeFace(),N1=this._renderer.getActiveMipmapLevel(),T1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:ei,minFilter:ei,generateMipmaps:!1,type:Mo,format:_s,colorSpace:_u,depthBuffer:!1},s=gN(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=gN(e,t,n);const{_lodMax:a}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=DU(a)),this._blurMaterial=OU(a,e,t),this._ggxMaterial=IU(a,e,t)}return s}_compileMaterial(e){const t=new ns(new Qt,e);this._renderer.compile(t,Jm)}_sceneToCubeUV(e,t,n,s,a){const p=new bs(90,1,t,n),m=[1,-1,1,1,1,1],v=[1,1,1,-1,-1,-1],b=this._renderer,y=b.autoClear,w=b.toneMapping;b.getClearColor(mN),b.toneMapping=Fa,b.autoClear=!1,b.state.buffers.depth.getReversed()&&(b.setRenderTarget(s),b.clearDepth(),b.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new ns(new Jd,new Nu({name:"PMREM.Background",side:br,depthWrite:!1,depthTest:!1})));const k=this._backgroundBox,T=k.material;let N=!1;const j=e.background;j?j.isColor&&(T.color.copy(j),e.background=null,N=!0):(T.color.copy(mN),N=!0);for(let R=0;R<6;R++){const D=R%3;D===0?(p.up.set(0,m[R],0),p.position.set(a.x,a.y,a.z),p.lookAt(a.x+v[R],a.y,a.z)):D===1?(p.up.set(0,0,m[R]),p.position.set(a.x,a.y,a.z),p.lookAt(a.x,a.y+v[R],a.z)):(p.up.set(0,m[R],0),p.position.set(a.x,a.y,a.z),p.lookAt(a.x,a.y,a.z+v[R]));const I=this._cubeSize;Of(s,D*I,R>2?I:0,I,I),b.setRenderTarget(s),N&&b.render(k,p),b.render(e,p)}b.toneMapping=w,b.autoClear=y,e.background=j}_textureToCubeUV(e,t){const n=this._renderer,s=e.mapping===fl||e.mapping===yu;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=vN()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=xN());const a=s?this._cubemapMaterial:this._equirectMaterial,u=this._lodMeshes[0];u.material=a;const h=a.uniforms;h.envMap.value=e;const p=this._cubeSize;Of(t,0,0,3*p,2*p),n.setRenderTarget(t),n.render(u,Jm)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const s=this._lodMeshes.length;for(let a=1;a<s;a++)this._applyGGXFilter(e,a-1,a);t.autoClear=n}_applyGGXFilter(e,t,n){const s=this._renderer,a=this._pingPongRenderTarget,u=this._ggxMaterial,h=this._lodMeshes[n];h.material=u;const p=u.uniforms,m=n/(this._lodMeshes.length-1),v=t/(this._lodMeshes.length-1),b=Math.sqrt(m*m-v*v),y=0+m*1.25,w=b*y,{_lodMax:M}=this,k=this._sizeLods[n],T=3*k*(n>M-bu?n-M+bu:0),N=4*(this._cubeSize-k);p.envMap.value=e.texture,p.roughness.value=w,p.mipInt.value=M-t,Of(a,T,N,3*k,2*k),s.setRenderTarget(a),s.render(h,Jm),p.envMap.value=a.texture,p.roughness.value=0,p.mipInt.value=M-n,Of(e,T,N,3*k,2*k),s.setRenderTarget(e),s.render(h,Jm)}_blur(e,t,n,s,a){const u=this._pingPongRenderTarget;this._halfBlur(e,u,t,n,s,"latitudinal",a),this._halfBlur(u,e,n,n,s,"longitudinal",a)}_halfBlur(e,t,n,s,a,u,h){const p=this._renderer,m=this._blurMaterial;u!=="latitudinal"&&u!=="longitudinal"&&Ct("blur direction must be either latitudinal or longitudinal!");const v=3,b=this._lodMeshes[s];b.material=m;const y=m.uniforms,w=this._sizeLods[n]-1,M=isFinite(a)?Math.PI/(2*w):2*Math.PI/(2*Od-1),k=a/M,T=isFinite(a)?1+Math.floor(v*k):Od;T>Od&&ut(`sigmaRadians, ${a}, is too large and will clip, as it requested ${T} samples when the maximum is set to ${Od}`);const N=[];let j=0;for(let z=0;z<Od;++z){const G=z/k,U=Math.exp(-G*G/2);N.push(U),z===0?j+=U:z<T&&(j+=2*U)}for(let z=0;z<N.length;z++)N[z]=N[z]/j;y.envMap.value=e.texture,y.samples.value=T,y.weights.value=N,y.latitudinal.value=u==="latitudinal",h&&(y.poleAxis.value=h);const{_lodMax:R}=this;y.dTheta.value=M,y.mipInt.value=R-n;const D=this._sizeLods[s],I=3*D*(s>R-bu?s-R+bu:0),P=4*(this._cubeSize-D);Of(t,I,P,3*D,2*D),p.setRenderTarget(t),p.render(b,Jm)}}function DU(i){const e=[],t=[],n=[];let s=i;const a=i-bu+1+pN.length;for(let u=0;u<a;u++){const h=Math.pow(2,s);e.push(h);let p=1/h;u>i-bu?p=pN[u-i+bu-1]:u===0&&(p=0),t.push(p);const m=1/(h-2),v=-m,b=1+m,y=[v,v,b,v,b,b,v,v,b,b,v,b],w=6,M=6,k=3,T=2,N=1,j=new Float32Array(k*M*w),R=new Float32Array(T*M*w),D=new Float32Array(N*M*w);for(let P=0;P<w;P++){const z=P%3*2/3-1,G=P>2?0:-1,U=[z,G,0,z+2/3,G,0,z+2/3,G+1,0,z,G,0,z+2/3,G+1,0,z,G+1,0];j.set(U,k*M*P),R.set(y,T*M*P);const L=[P,P,P,P,P,P];D.set(L,N*M*P)}const I=new Qt;I.setAttribute("position",new Kn(j,k)),I.setAttribute("uv",new Kn(R,T)),I.setAttribute("faceIndex",new Kn(D,N)),n.push(new ns(I,null)),s>bu&&s--}return{lodMeshes:n,sizeLods:e,sigmas:t}}function gN(i,e,t){const n=new Wr(i,e,t);return n.texture.mapping=op,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Of(i,e,t,n,s){i.viewport.set(e,t,n,s),i.scissor.set(e,t,n,s)}function IU(i,e,t){return new Xr({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:RU,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:By(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:dl,depthTest:!1,depthWrite:!1})}function OU(i,e,t){const n=new Float32Array(Od),s=new Y(0,1,0);return new Xr({name:"SphericalGaussianBlur",defines:{n:Od,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:By(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:dl,depthTest:!1,depthWrite:!1})}function xN(){return new Xr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:By(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:dl,depthTest:!1,depthWrite:!1})}function vN(){return new Xr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:By(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:dl,depthTest:!1,depthWrite:!1})}function By(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function LU(i){let e=new WeakMap,t=null;function n(h){if(h&&h.isTexture){const p=h.mapping,m=p===Ag||p===kg,v=p===fl||p===yu;if(m||v){let b=e.get(h);const y=b!==void 0?b.texture.pmremVersion:0;if(h.isRenderTargetTexture&&h.pmremVersion!==y)return t===null&&(t=new xw(i)),b=m?t.fromEquirectangular(h,b):t.fromCubemap(h,b),b.texture.pmremVersion=h.pmremVersion,e.set(h,b),b.texture;if(b!==void 0)return b.texture;{const w=h.image;return m&&w&&w.height>0||v&&w&&s(w)?(t===null&&(t=new xw(i)),b=m?t.fromEquirectangular(h):t.fromCubemap(h),b.texture.pmremVersion=h.pmremVersion,e.set(h,b),h.addEventListener("dispose",a),b.texture):null}}}return h}function s(h){let p=0;const m=6;for(let v=0;v<m;v++)h[v]!==void 0&&p++;return p===m}function a(h){const p=h.target;p.removeEventListener("dispose",a);const m=e.get(p);m!==void 0&&(e.delete(p),m.dispose())}function u(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:u}}function UU(i){const e={};function t(n){if(e[n]!==void 0)return e[n];const s=i.getExtension(n);return e[n]=s,s}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const s=t(n);return s===null&&Qf("WebGLRenderer: "+n+" extension not supported."),s}}}function PU(i,e,t,n){const s={},a=new WeakMap;function u(b){const y=b.target;y.index!==null&&e.remove(y.index);for(const M in y.attributes)e.remove(y.attributes[M]);y.removeEventListener("dispose",u),delete s[y.id];const w=a.get(y);w&&(e.remove(w),a.delete(y)),n.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,t.memory.geometries--}function h(b,y){return s[y.id]===!0||(y.addEventListener("dispose",u),s[y.id]=!0,t.memory.geometries++),y}function p(b){const y=b.attributes;for(const w in y)e.update(y[w],i.ARRAY_BUFFER)}function m(b){const y=[],w=b.index,M=b.attributes.position;let k=0;if(w!==null){const j=w.array;k=w.version;for(let R=0,D=j.length;R<D;R+=3){const I=j[R+0],P=j[R+1],z=j[R+2];y.push(I,P,P,z,z,I)}}else if(M!==void 0){const j=M.array;k=M.version;for(let R=0,D=j.length/3-1;R<D;R+=3){const I=R+0,P=R+1,z=R+2;y.push(I,P,P,z,z,I)}}else return;const T=new(yA(y)?eS:Qw)(y,1);T.version=k;const N=a.get(b);N&&e.remove(N),a.set(b,T)}function v(b){const y=a.get(b);if(y){const w=b.index;w!==null&&y.version<w.version&&m(b)}else m(b);return a.get(b)}return{get:h,update:p,getWireframeAttribute:v}}function zU(i,e,t){let n;function s(y){n=y}let a,u;function h(y){a=y.type,u=y.bytesPerElement}function p(y,w){i.drawElements(n,w,a,y*u),t.update(w,n,1)}function m(y,w,M){M!==0&&(i.drawElementsInstanced(n,w,a,y*u,M),t.update(w,n,M))}function v(y,w,M){if(M===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,w,0,a,y,0,M);let T=0;for(let N=0;N<M;N++)T+=w[N];t.update(T,n,1)}function b(y,w,M,k){if(M===0)return;const T=e.get("WEBGL_multi_draw");if(T===null)for(let N=0;N<y.length;N++)m(y[N]/u,w[N],k[N]);else{T.multiDrawElementsInstancedWEBGL(n,w,0,a,y,0,k,0,M);let N=0;for(let j=0;j<M;j++)N+=w[j]*k[j];t.update(N,n,1)}}this.setMode=s,this.setIndex=h,this.render=p,this.renderInstances=m,this.renderMultiDraw=v,this.renderMultiDrawInstances=b}function BU(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(a,u,h){switch(t.calls++,u){case i.TRIANGLES:t.triangles+=h*(a/3);break;case i.LINES:t.lines+=h*(a/2);break;case i.LINE_STRIP:t.lines+=h*(a-1);break;case i.LINE_LOOP:t.lines+=h*a;break;case i.POINTS:t.points+=h*a;break;default:Ct("WebGLInfo: Unknown draw mode:",u);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:n}}function FU(i,e,t){const n=new WeakMap,s=new Qn;function a(u,h,p){const m=u.morphTargetInfluences,v=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,b=v!==void 0?v.length:0;let y=n.get(h);if(y===void 0||y.count!==b){let L=function(){G.dispose(),n.delete(h),h.removeEventListener("dispose",L)};var w=L;y!==void 0&&y.texture.dispose();const M=h.morphAttributes.position!==void 0,k=h.morphAttributes.normal!==void 0,T=h.morphAttributes.color!==void 0,N=h.morphAttributes.position||[],j=h.morphAttributes.normal||[],R=h.morphAttributes.color||[];let D=0;M===!0&&(D=1),k===!0&&(D=2),T===!0&&(D=3);let I=h.attributes.position.count*D,P=1;I>e.maxTextureSize&&(P=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const z=new Float32Array(I*P*4*b),G=new gy(z,I,P,b);G.type=ys,G.needsUpdate=!0;const U=D*4;for(let W=0;W<b;W++){const J=N[W],Q=j[W],ue=R[W],ne=I*P*4*W;for(let X=0;X<J.count;X++){const Z=X*U;M===!0&&(s.fromBufferAttribute(J,X),z[ne+Z+0]=s.x,z[ne+Z+1]=s.y,z[ne+Z+2]=s.z,z[ne+Z+3]=0),k===!0&&(s.fromBufferAttribute(Q,X),z[ne+Z+4]=s.x,z[ne+Z+5]=s.y,z[ne+Z+6]=s.z,z[ne+Z+7]=0),T===!0&&(s.fromBufferAttribute(ue,X),z[ne+Z+8]=s.x,z[ne+Z+9]=s.y,z[ne+Z+10]=s.z,z[ne+Z+11]=ue.itemSize===4?s.w:1)}}y={count:b,texture:G,size:new ze(I,P)},n.set(h,y),h.addEventListener("dispose",L)}if(u.isInstancedMesh===!0&&u.morphTexture!==null)p.getUniforms().setValue(i,"morphTexture",u.morphTexture,t);else{let M=0;for(let T=0;T<m.length;T++)M+=m[T];const k=h.morphTargetsRelative?1:1-M;p.getUniforms().setValue(i,"morphTargetBaseInfluence",k),p.getUniforms().setValue(i,"morphTargetInfluences",m)}p.getUniforms().setValue(i,"morphTargetsTexture",y.texture,t),p.getUniforms().setValue(i,"morphTargetsTextureSize",y.size)}return{update:a}}function VU(i,e,t,n){let s=new WeakMap;function a(p){const m=n.render.frame,v=p.geometry,b=e.get(p,v);if(s.get(b)!==m&&(e.update(b),s.set(b,m)),p.isInstancedMesh&&(p.hasEventListener("dispose",h)===!1&&p.addEventListener("dispose",h),s.get(p)!==m&&(t.update(p.instanceMatrix,i.ARRAY_BUFFER),p.instanceColor!==null&&t.update(p.instanceColor,i.ARRAY_BUFFER),s.set(p,m))),p.isSkinnedMesh){const y=p.skeleton;s.get(y)!==m&&(y.update(),s.set(y,m))}return b}function u(){s=new WeakMap}function h(p){const m=p.target;m.removeEventListener("dispose",h),t.remove(m.instanceMatrix),m.instanceColor!==null&&t.remove(m.instanceColor)}return{update:a,dispose:u}}const HU={[Uw]:"LINEAR_TONE_MAPPING",[Pw]:"REINHARD_TONE_MAPPING",[zw]:"CINEON_TONE_MAPPING",[ry]:"ACES_FILMIC_TONE_MAPPING",[Fw]:"AGX_TONE_MAPPING",[Vw]:"NEUTRAL_TONE_MAPPING",[Bw]:"CUSTOM_TONE_MAPPING"};function GU(i,e,t,n,s){const a=new Wr(e,t,{type:i,depthBuffer:n,stencilBuffer:s}),u=new Wr(e,t,{type:Mo,depthBuffer:!1,stencilBuffer:!1}),h=new Qt;h.setAttribute("position",new wt([-1,3,0,-1,-1,0,3,-1,0],3)),h.setAttribute("uv",new wt([0,2,0,0,2,0],2));const p=new hS({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),m=new ns(h,p),v=new th(-1,1,1,-1,0,1);let b=null,y=null,w=!1,M,k=null,T=[],N=!1;this.setSize=function(j,R){a.setSize(j,R),u.setSize(j,R);for(let D=0;D<T.length;D++){const I=T[D];I.setSize&&I.setSize(j,R)}},this.setEffects=function(j){T=j,N=T.length>0&&T[0].isRenderPass===!0;const R=a.width,D=a.height;for(let I=0;I<T.length;I++){const P=T[I];P.setSize&&P.setSize(R,D)}},this.begin=function(j,R){if(w||j.toneMapping===Fa&&T.length===0)return!1;if(k=R,R!==null){const D=R.width,I=R.height;(a.width!==D||a.height!==I)&&this.setSize(D,I)}return N===!1&&j.setRenderTarget(a),M=j.toneMapping,j.toneMapping=Fa,!0},this.hasRenderPass=function(){return N},this.end=function(j,R){j.toneMapping=M,w=!0;let D=a,I=u;for(let P=0;P<T.length;P++){const z=T[P];if(z.enabled!==!1&&(z.render(j,I,D,R),z.needsSwap!==!1)){const G=D;D=I,I=G}}if(b!==j.outputColorSpace||y!==j.toneMapping){b=j.outputColorSpace,y=j.toneMapping,p.defines={},Tn.getTransfer(b)===Hn&&(p.defines.SRGB_TRANSFER="");const P=HU[y];P&&(p.defines[P]=""),p.needsUpdate=!0}p.uniforms.tDiffuse.value=D.texture,j.setRenderTarget(k),j.render(m,v),k=null,w=!1},this.isCompositing=function(){return w},this.dispose=function(){a.dispose(),u.dispose(),h.dispose(),p.dispose()}}const Sk=new Ui,vw=new Yd(1,1),Mk=new gy,Ek=new xy,Nk=new Zg,bN=[],yN=[],_N=new Float32Array(16),wN=new Float32Array(9),SN=new Float32Array(4);function dp(i,e,t){const n=i[0];if(n<=0||n>0)return i;const s=e*t;let a=bN[s];if(a===void 0&&(a=new Float32Array(s),bN[s]=a),e!==0){n.toArray(a,0);for(let u=1,h=0;u!==e;++u)h+=t,i[u].toArray(a,h)}return a}function ds(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function hs(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function Fy(i,e){let t=yN[e];t===void 0&&(t=new Int32Array(e),yN[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function qU(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function WU(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ds(t,e))return;i.uniform2fv(this.addr,e),hs(t,e)}}function XU(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ds(t,e))return;i.uniform3fv(this.addr,e),hs(t,e)}}function $U(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ds(t,e))return;i.uniform4fv(this.addr,e),hs(t,e)}}function YU(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(ds(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),hs(t,e)}else{if(ds(t,n))return;SN.set(n),i.uniformMatrix2fv(this.addr,!1,SN),hs(t,n)}}function KU(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(ds(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),hs(t,e)}else{if(ds(t,n))return;wN.set(n),i.uniformMatrix3fv(this.addr,!1,wN),hs(t,n)}}function ZU(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(ds(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),hs(t,e)}else{if(ds(t,n))return;_N.set(n),i.uniformMatrix4fv(this.addr,!1,_N),hs(t,n)}}function JU(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function QU(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ds(t,e))return;i.uniform2iv(this.addr,e),hs(t,e)}}function eP(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ds(t,e))return;i.uniform3iv(this.addr,e),hs(t,e)}}function tP(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ds(t,e))return;i.uniform4iv(this.addr,e),hs(t,e)}}function nP(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function iP(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ds(t,e))return;i.uniform2uiv(this.addr,e),hs(t,e)}}function sP(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ds(t,e))return;i.uniform3uiv(this.addr,e),hs(t,e)}}function rP(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ds(t,e))return;i.uniform4uiv(this.addr,e),hs(t,e)}}function aP(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s);let a;this.type===i.SAMPLER_2D_SHADOW?(vw.compareFunction=t.isReversedDepthBuffer()?my:py,a=vw):a=Sk,t.setTexture2D(e||a,s)}function oP(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture3D(e||Ek,s)}function lP(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTextureCube(e||Nk,s)}function cP(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture2DArray(e||Mk,s)}function uP(i){switch(i){case 5126:return qU;case 35664:return WU;case 35665:return XU;case 35666:return $U;case 35674:return YU;case 35675:return KU;case 35676:return ZU;case 5124:case 35670:return JU;case 35667:case 35671:return QU;case 35668:case 35672:return eP;case 35669:case 35673:return tP;case 5125:return nP;case 36294:return iP;case 36295:return sP;case 36296:return rP;case 35678:case 36198:case 36298:case 36306:case 35682:return aP;case 35679:case 36299:case 36307:return oP;case 35680:case 36300:case 36308:case 36293:return lP;case 36289:case 36303:case 36311:case 36292:return cP}}function dP(i,e){i.uniform1fv(this.addr,e)}function hP(i,e){const t=dp(e,this.size,2);i.uniform2fv(this.addr,t)}function fP(i,e){const t=dp(e,this.size,3);i.uniform3fv(this.addr,t)}function pP(i,e){const t=dp(e,this.size,4);i.uniform4fv(this.addr,t)}function mP(i,e){const t=dp(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function gP(i,e){const t=dp(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function xP(i,e){const t=dp(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function vP(i,e){i.uniform1iv(this.addr,e)}function bP(i,e){i.uniform2iv(this.addr,e)}function yP(i,e){i.uniform3iv(this.addr,e)}function _P(i,e){i.uniform4iv(this.addr,e)}function wP(i,e){i.uniform1uiv(this.addr,e)}function SP(i,e){i.uniform2uiv(this.addr,e)}function MP(i,e){i.uniform3uiv(this.addr,e)}function EP(i,e){i.uniform4uiv(this.addr,e)}function NP(i,e,t){const n=this.cache,s=e.length,a=Fy(t,s);ds(n,a)||(i.uniform1iv(this.addr,a),hs(n,a));let u;this.type===i.SAMPLER_2D_SHADOW?u=vw:u=Sk;for(let h=0;h!==s;++h)t.setTexture2D(e[h]||u,a[h])}function TP(i,e,t){const n=this.cache,s=e.length,a=Fy(t,s);ds(n,a)||(i.uniform1iv(this.addr,a),hs(n,a));for(let u=0;u!==s;++u)t.setTexture3D(e[u]||Ek,a[u])}function AP(i,e,t){const n=this.cache,s=e.length,a=Fy(t,s);ds(n,a)||(i.uniform1iv(this.addr,a),hs(n,a));for(let u=0;u!==s;++u)t.setTextureCube(e[u]||Nk,a[u])}function kP(i,e,t){const n=this.cache,s=e.length,a=Fy(t,s);ds(n,a)||(i.uniform1iv(this.addr,a),hs(n,a));for(let u=0;u!==s;++u)t.setTexture2DArray(e[u]||Mk,a[u])}function CP(i){switch(i){case 5126:return dP;case 35664:return hP;case 35665:return fP;case 35666:return pP;case 35674:return mP;case 35675:return gP;case 35676:return xP;case 5124:case 35670:return vP;case 35667:case 35671:return bP;case 35668:case 35672:return yP;case 35669:case 35673:return _P;case 5125:return wP;case 36294:return SP;case 36295:return MP;case 36296:return EP;case 35678:case 36198:case 36298:case 36306:case 35682:return NP;case 35679:case 36299:case 36307:return TP;case 35680:case 36300:case 36308:case 36293:return AP;case 36289:case 36303:case 36311:case 36292:return kP}}class RP{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=uP(t.type)}}class jP{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=CP(t.type)}}class DP{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const s=this.seq;for(let a=0,u=s.length;a!==u;++a){const h=s[a];h.setValue(e,t[h.id],n)}}}const A1=/(\w+)(\])?(\[|\.)?/g;function MN(i,e){i.seq.push(e),i.map[e.id]=e}function IP(i,e,t){const n=i.name,s=n.length;for(A1.lastIndex=0;;){const a=A1.exec(n),u=A1.lastIndex;let h=a[1];const p=a[2]==="]",m=a[3];if(p&&(h=h|0),m===void 0||m==="["&&u+2===s){MN(t,m===void 0?new RP(h,i,e):new jP(h,i,e));break}else{let b=t.map[h];b===void 0&&(b=new DP(h),MN(t,b)),t=b}}}class Vv{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let u=0;u<n;++u){const h=e.getActiveUniform(t,u),p=e.getUniformLocation(t,h.name);IP(h,p,this)}const s=[],a=[];for(const u of this.seq)u.type===e.SAMPLER_2D_SHADOW||u.type===e.SAMPLER_CUBE_SHADOW||u.type===e.SAMPLER_2D_ARRAY_SHADOW?s.push(u):a.push(u);s.length>0&&(this.seq=s.concat(a))}setValue(e,t,n,s){const a=this.map[t];a!==void 0&&a.setValue(e,n,s)}setOptional(e,t,n){const s=t[n];s!==void 0&&this.setValue(e,n,s)}static upload(e,t,n,s){for(let a=0,u=t.length;a!==u;++a){const h=t[a],p=n[h.id];p.needsUpdate!==!1&&h.setValue(e,p.value,s)}}static seqWithValue(e,t){const n=[];for(let s=0,a=e.length;s!==a;++s){const u=e[s];u.id in t&&n.push(u)}return n}}function EN(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const OP=37297;let LP=0;function UP(i,e){const t=i.split(`
`),n=[],s=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let u=s;u<a;u++){const h=u+1;n.push(`${h===e?">":" "} ${h}: ${t[u]}`)}return n.join(`
`)}const NN=new nn;function PP(i){Tn._getMatrix(NN,Tn.workingColorSpace,i);const e=`mat3( ${NN.elements.map(t=>t.toFixed(4))} )`;switch(Tn.getTransfer(i)){case Ig:return[e,"LinearTransferOETF"];case Hn:return[e,"sRGBTransferOETF"];default:return ut("WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function TN(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),a=(i.getShaderInfoLog(e)||"").trim();if(n&&a==="")return"";const u=/ERROR: 0:(\d+)/.exec(a);if(u){const h=parseInt(u[1]);return t.toUpperCase()+`

`+a+`

`+UP(i.getShaderSource(e),h)}else return a}function zP(i,e){const t=PP(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}const BP={[Uw]:"Linear",[Pw]:"Reinhard",[zw]:"Cineon",[ry]:"ACESFilmic",[Fw]:"AgX",[Vw]:"Neutral",[Bw]:"Custom"};function FP(i,e){const t=BP[e];return t===void 0?(ut("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+i+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Ov=new Y;function VP(){Tn.getLuminanceCoefficients(Ov);const i=Ov.x.toFixed(4),e=Ov.y.toFixed(4),t=Ov.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function HP(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(ag).join(`
`)}function GP(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function qP(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const a=i.getActiveAttrib(e,s),u=a.name;let h=1;a.type===i.FLOAT_MAT2&&(h=2),a.type===i.FLOAT_MAT3&&(h=3),a.type===i.FLOAT_MAT4&&(h=4),t[u]={type:a.type,location:i.getAttribLocation(e,u),locationSize:h}}return t}function ag(i){return i!==""}function AN(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function kN(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const WP=/^[ \t]*#include +<([\w\d./]+)>/gm;function bw(i){return i.replace(WP,$P)}const XP=new Map;function $P(i,e){let t=dn[e];if(t===void 0){const n=XP.get(e);if(n!==void 0)t=dn[n],ut('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return bw(t)}const YP=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function CN(i){return i.replace(YP,KP)}function KP(i,e,t,n){let s="";for(let a=parseInt(e);a<parseInt(t);a++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return s}function RN(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const ZP={[Xf]:"SHADOWMAP_TYPE_PCF",[Ud]:"SHADOWMAP_TYPE_VSM"};function JP(i){return ZP[i.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const QP={[fl]:"ENVMAP_TYPE_CUBE",[yu]:"ENVMAP_TYPE_CUBE",[op]:"ENVMAP_TYPE_CUBE_UV"};function ez(i){return i.envMap===!1?"ENVMAP_TYPE_CUBE":QP[i.envMapMode]||"ENVMAP_TYPE_CUBE"}const tz={[yu]:"ENVMAP_MODE_REFRACTION"};function nz(i){return i.envMap===!1?"ENVMAP_MODE_REFLECTION":tz[i.envMapMode]||"ENVMAP_MODE_REFLECTION"}const iz={[Yg]:"ENVMAP_BLENDING_MULTIPLY",[aA]:"ENVMAP_BLENDING_MIX",[oA]:"ENVMAP_BLENDING_ADD"};function sz(i){return i.envMap===!1?"ENVMAP_BLENDING_NONE":iz[i.combine]||"ENVMAP_BLENDING_NONE"}function rz(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function az(i,e,t,n){const s=i.getContext(),a=t.defines;let u=t.vertexShader,h=t.fragmentShader;const p=JP(t),m=ez(t),v=nz(t),b=sz(t),y=rz(t),w=HP(t),M=GP(a),k=s.createProgram();let T,N,j=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(T=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(ag).join(`
`),T.length>0&&(T+=`
`),N=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(ag).join(`
`),N.length>0&&(N+=`
`)):(T=[RN(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+v:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+p:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ag).join(`
`),N=[RN(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.envMap?"#define "+v:"",t.envMap?"#define "+b:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+p:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Fa?"#define TONE_MAPPING":"",t.toneMapping!==Fa?dn.tonemapping_pars_fragment:"",t.toneMapping!==Fa?FP("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",dn.colorspace_pars_fragment,zP("linearToOutputTexel",t.outputColorSpace),VP(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(ag).join(`
`)),u=bw(u),u=AN(u,t),u=kN(u,t),h=bw(h),h=AN(h,t),h=kN(h,t),u=CN(u),h=CN(h),t.isRawShaderMaterial!==!0&&(j=`#version 300 es
`,T=[w,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+T,N=["#define varying in",t.glslVersion===cw?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===cw?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+N);const R=j+T+u,D=j+N+h,I=EN(s,s.VERTEX_SHADER,R),P=EN(s,s.FRAGMENT_SHADER,D);s.attachShader(k,I),s.attachShader(k,P),t.index0AttributeName!==void 0?s.bindAttribLocation(k,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(k,0,"position"),s.linkProgram(k);function z(W){if(i.debug.checkShaderErrors){const J=s.getProgramInfoLog(k)||"",Q=s.getShaderInfoLog(I)||"",ue=s.getShaderInfoLog(P)||"",ne=J.trim(),X=Q.trim(),Z=ue.trim();let re=!0,pe=!0;if(s.getProgramParameter(k,s.LINK_STATUS)===!1)if(re=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(s,k,I,P);else{const we=TN(s,I,"vertex"),q=TN(s,P,"fragment");Ct("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(k,s.VALIDATE_STATUS)+`

Material Name: `+W.name+`
Material Type: `+W.type+`

Program Info Log: `+ne+`
`+we+`
`+q)}else ne!==""?ut("WebGLProgram: Program Info Log:",ne):(X===""||Z==="")&&(pe=!1);pe&&(W.diagnostics={runnable:re,programLog:ne,vertexShader:{log:X,prefix:T},fragmentShader:{log:Z,prefix:N}})}s.deleteShader(I),s.deleteShader(P),G=new Vv(s,k),U=qP(s,k)}let G;this.getUniforms=function(){return G===void 0&&z(this),G};let U;this.getAttributes=function(){return U===void 0&&z(this),U};let L=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=s.getProgramParameter(k,OP)),L},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(k),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=LP++,this.cacheKey=e,this.usedTimes=1,this.program=k,this.vertexShader=I,this.fragmentShader=P,this}let oz=0;class lz{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,s=this._getShaderStage(t),a=this._getShaderStage(n),u=this._getShaderCacheForMaterial(e);return u.has(s)===!1&&(u.add(s),s.usedTimes++),u.has(a)===!1&&(u.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new cz(e),t.set(e,n)),n}}class cz{constructor(e){this.id=oz++,this.code=e,this.usedTimes=0}}function uz(i,e,t,n,s,a,u){const h=new tp,p=new lz,m=new Set,v=[],b=new Map,y=s.logarithmicDepthBuffer;let w=s.precision;const M={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function k(U){return m.add(U),U===0?"uv":`uv${U}`}function T(U,L,W,J,Q){const ue=J.fog,ne=Q.geometry,X=U.isMeshStandardMaterial?J.environment:null,Z=(U.isMeshStandardMaterial?t:e).get(U.envMap||X),re=Z&&Z.mapping===op?Z.image.height:null,pe=M[U.type];U.precision!==null&&(w=s.getMaxPrecision(U.precision),w!==U.precision&&ut("WebGLProgram.getParameters:",U.precision,"not supported, using",w,"instead."));const we=ne.morphAttributes.position||ne.morphAttributes.normal||ne.morphAttributes.color,q=we!==void 0?we.length:0;let ce=0;ne.morphAttributes.position!==void 0&&(ce=1),ne.morphAttributes.normal!==void 0&&(ce=2),ne.morphAttributes.color!==void 0&&(ce=3);let Ee,Pe,rt,me;if(pe){const Sn=_o[pe];Ee=Sn.vertexShader,Pe=Sn.fragmentShader}else Ee=U.vertexShader,Pe=U.fragmentShader,p.update(U),rt=p.getVertexShaderID(U),me=p.getFragmentShaderID(U);const Ce=i.getRenderTarget(),Fe=i.state.buffers.depth.getReversed(),nt=Q.isInstancedMesh===!0,ft=Q.isBatchedMesh===!0,sn=!!U.map,pn=!!U.matcap,Ot=!!Z,je=!!U.aoMap,Ge=!!U.lightMap,Oe=!!U.bumpMap,tt=!!U.normalMap,K=!!U.displacementMap,Et=!!U.emissiveMap,at=!!U.metalnessMap,Tt=!!U.roughnessMap,Ye=U.anisotropy>0,$=U.clearcoat>0,B=U.dispersion>0,oe=U.iridescence>0,Te=U.sheen>0,Le=U.transmission>0,Ae=Ye&&!!U.anisotropyMap,pt=$&&!!U.clearcoatMap,Je=$&&!!U.clearcoatNormalMap,yt=$&&!!U.clearcoatRoughnessMap,jt=oe&&!!U.iridescenceMap,Ve=oe&&!!U.iridescenceThicknessMap,$e=Te&&!!U.sheenColorMap,mt=Te&&!!U.sheenRoughnessMap,ht=!!U.specularMap,st=!!U.specularColorMap,en=!!U.specularIntensityMap,ae=Le&&!!U.transmissionMap,ot=Le&&!!U.thicknessMap,Xe=!!U.gradientMap,ct=!!U.alphaMap,He=U.alphaTest>0,Ie=!!U.alphaHash,Qe=!!U.extensions;let Gt=Fa;U.toneMapped&&(Ce===null||Ce.isXRRenderTarget===!0)&&(Gt=i.toneMapping);const yn={shaderID:pe,shaderType:U.type,shaderName:U.name,vertexShader:Ee,fragmentShader:Pe,defines:U.defines,customVertexShaderID:rt,customFragmentShaderID:me,isRawShaderMaterial:U.isRawShaderMaterial===!0,glslVersion:U.glslVersion,precision:w,batching:ft,batchingColor:ft&&Q._colorsTexture!==null,instancing:nt,instancingColor:nt&&Q.instanceColor!==null,instancingMorph:nt&&Q.morphTexture!==null,outputColorSpace:Ce===null?i.outputColorSpace:Ce.isXRRenderTarget===!0?Ce.texture.colorSpace:_u,alphaToCoverage:!!U.alphaToCoverage,map:sn,matcap:pn,envMap:Ot,envMapMode:Ot&&Z.mapping,envMapCubeUVHeight:re,aoMap:je,lightMap:Ge,bumpMap:Oe,normalMap:tt,displacementMap:K,emissiveMap:Et,normalMapObjectSpace:tt&&U.normalMapType===fA,normalMapTangentSpace:tt&&U.normalMapType===Eu,metalnessMap:at,roughnessMap:Tt,anisotropy:Ye,anisotropyMap:Ae,clearcoat:$,clearcoatMap:pt,clearcoatNormalMap:Je,clearcoatRoughnessMap:yt,dispersion:B,iridescence:oe,iridescenceMap:jt,iridescenceThicknessMap:Ve,sheen:Te,sheenColorMap:$e,sheenRoughnessMap:mt,specularMap:ht,specularColorMap:st,specularIntensityMap:en,transmission:Le,transmissionMap:ae,thicknessMap:ot,gradientMap:Xe,opaque:U.transparent===!1&&U.blending===Fd&&U.alphaToCoverage===!1,alphaMap:ct,alphaTest:He,alphaHash:Ie,combine:U.combine,mapUv:sn&&k(U.map.channel),aoMapUv:je&&k(U.aoMap.channel),lightMapUv:Ge&&k(U.lightMap.channel),bumpMapUv:Oe&&k(U.bumpMap.channel),normalMapUv:tt&&k(U.normalMap.channel),displacementMapUv:K&&k(U.displacementMap.channel),emissiveMapUv:Et&&k(U.emissiveMap.channel),metalnessMapUv:at&&k(U.metalnessMap.channel),roughnessMapUv:Tt&&k(U.roughnessMap.channel),anisotropyMapUv:Ae&&k(U.anisotropyMap.channel),clearcoatMapUv:pt&&k(U.clearcoatMap.channel),clearcoatNormalMapUv:Je&&k(U.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:yt&&k(U.clearcoatRoughnessMap.channel),iridescenceMapUv:jt&&k(U.iridescenceMap.channel),iridescenceThicknessMapUv:Ve&&k(U.iridescenceThicknessMap.channel),sheenColorMapUv:$e&&k(U.sheenColorMap.channel),sheenRoughnessMapUv:mt&&k(U.sheenRoughnessMap.channel),specularMapUv:ht&&k(U.specularMap.channel),specularColorMapUv:st&&k(U.specularColorMap.channel),specularIntensityMapUv:en&&k(U.specularIntensityMap.channel),transmissionMapUv:ae&&k(U.transmissionMap.channel),thicknessMapUv:ot&&k(U.thicknessMap.channel),alphaMapUv:ct&&k(U.alphaMap.channel),vertexTangents:!!ne.attributes.tangent&&(tt||Ye),vertexColors:U.vertexColors,vertexAlphas:U.vertexColors===!0&&!!ne.attributes.color&&ne.attributes.color.itemSize===4,pointsUvs:Q.isPoints===!0&&!!ne.attributes.uv&&(sn||ct),fog:!!ue,useFog:U.fog===!0,fogExp2:!!ue&&ue.isFogExp2,flatShading:U.flatShading===!0&&U.wireframe===!1,sizeAttenuation:U.sizeAttenuation===!0,logarithmicDepthBuffer:y,reversedDepthBuffer:Fe,skinning:Q.isSkinnedMesh===!0,morphTargets:ne.morphAttributes.position!==void 0,morphNormals:ne.morphAttributes.normal!==void 0,morphColors:ne.morphAttributes.color!==void 0,morphTargetsCount:q,morphTextureStride:ce,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:u.numPlanes,numClipIntersection:u.numIntersection,dithering:U.dithering,shadowMapEnabled:i.shadowMap.enabled&&W.length>0,shadowMapType:i.shadowMap.type,toneMapping:Gt,decodeVideoTexture:sn&&U.map.isVideoTexture===!0&&Tn.getTransfer(U.map.colorSpace)===Hn,decodeVideoTextureEmissive:Et&&U.emissiveMap.isVideoTexture===!0&&Tn.getTransfer(U.emissiveMap.colorSpace)===Hn,premultipliedAlpha:U.premultipliedAlpha,doubleSided:U.side===ll,flipSided:U.side===br,useDepthPacking:U.depthPacking>=0,depthPacking:U.depthPacking||0,index0AttributeName:U.index0AttributeName,extensionClipCullDistance:Qe&&U.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Qe&&U.extensions.multiDraw===!0||ft)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:U.customProgramCacheKey()};return yn.vertexUv1s=m.has(1),yn.vertexUv2s=m.has(2),yn.vertexUv3s=m.has(3),m.clear(),yn}function N(U){const L=[];if(U.shaderID?L.push(U.shaderID):(L.push(U.customVertexShaderID),L.push(U.customFragmentShaderID)),U.defines!==void 0)for(const W in U.defines)L.push(W),L.push(U.defines[W]);return U.isRawShaderMaterial===!1&&(j(L,U),R(L,U),L.push(i.outputColorSpace)),L.push(U.customProgramCacheKey),L.join()}function j(U,L){U.push(L.precision),U.push(L.outputColorSpace),U.push(L.envMapMode),U.push(L.envMapCubeUVHeight),U.push(L.mapUv),U.push(L.alphaMapUv),U.push(L.lightMapUv),U.push(L.aoMapUv),U.push(L.bumpMapUv),U.push(L.normalMapUv),U.push(L.displacementMapUv),U.push(L.emissiveMapUv),U.push(L.metalnessMapUv),U.push(L.roughnessMapUv),U.push(L.anisotropyMapUv),U.push(L.clearcoatMapUv),U.push(L.clearcoatNormalMapUv),U.push(L.clearcoatRoughnessMapUv),U.push(L.iridescenceMapUv),U.push(L.iridescenceThicknessMapUv),U.push(L.sheenColorMapUv),U.push(L.sheenRoughnessMapUv),U.push(L.specularMapUv),U.push(L.specularColorMapUv),U.push(L.specularIntensityMapUv),U.push(L.transmissionMapUv),U.push(L.thicknessMapUv),U.push(L.combine),U.push(L.fogExp2),U.push(L.sizeAttenuation),U.push(L.morphTargetsCount),U.push(L.morphAttributeCount),U.push(L.numDirLights),U.push(L.numPointLights),U.push(L.numSpotLights),U.push(L.numSpotLightMaps),U.push(L.numHemiLights),U.push(L.numRectAreaLights),U.push(L.numDirLightShadows),U.push(L.numPointLightShadows),U.push(L.numSpotLightShadows),U.push(L.numSpotLightShadowsWithMaps),U.push(L.numLightProbes),U.push(L.shadowMapType),U.push(L.toneMapping),U.push(L.numClippingPlanes),U.push(L.numClipIntersection),U.push(L.depthPacking)}function R(U,L){h.disableAll(),L.instancing&&h.enable(0),L.instancingColor&&h.enable(1),L.instancingMorph&&h.enable(2),L.matcap&&h.enable(3),L.envMap&&h.enable(4),L.normalMapObjectSpace&&h.enable(5),L.normalMapTangentSpace&&h.enable(6),L.clearcoat&&h.enable(7),L.iridescence&&h.enable(8),L.alphaTest&&h.enable(9),L.vertexColors&&h.enable(10),L.vertexAlphas&&h.enable(11),L.vertexUv1s&&h.enable(12),L.vertexUv2s&&h.enable(13),L.vertexUv3s&&h.enable(14),L.vertexTangents&&h.enable(15),L.anisotropy&&h.enable(16),L.alphaHash&&h.enable(17),L.batching&&h.enable(18),L.dispersion&&h.enable(19),L.batchingColor&&h.enable(20),L.gradientMap&&h.enable(21),U.push(h.mask),h.disableAll(),L.fog&&h.enable(0),L.useFog&&h.enable(1),L.flatShading&&h.enable(2),L.logarithmicDepthBuffer&&h.enable(3),L.reversedDepthBuffer&&h.enable(4),L.skinning&&h.enable(5),L.morphTargets&&h.enable(6),L.morphNormals&&h.enable(7),L.morphColors&&h.enable(8),L.premultipliedAlpha&&h.enable(9),L.shadowMapEnabled&&h.enable(10),L.doubleSided&&h.enable(11),L.flipSided&&h.enable(12),L.useDepthPacking&&h.enable(13),L.dithering&&h.enable(14),L.transmission&&h.enable(15),L.sheen&&h.enable(16),L.opaque&&h.enable(17),L.pointsUvs&&h.enable(18),L.decodeVideoTexture&&h.enable(19),L.decodeVideoTextureEmissive&&h.enable(20),L.alphaToCoverage&&h.enable(21),U.push(h.mask)}function D(U){const L=M[U.type];let W;if(L){const J=_o[L];W=NA.clone(J.uniforms)}else W=U.uniforms;return W}function I(U,L){let W=b.get(L);return W!==void 0?++W.usedTimes:(W=new az(i,L,U,a),v.push(W),b.set(L,W)),W}function P(U){if(--U.usedTimes===0){const L=v.indexOf(U);v[L]=v[v.length-1],v.pop(),b.delete(U.cacheKey),U.destroy()}}function z(U){p.remove(U)}function G(){p.dispose()}return{getParameters:T,getProgramCacheKey:N,getUniforms:D,acquireProgram:I,releaseProgram:P,releaseShaderCache:z,programs:v,dispose:G}}function dz(){let i=new WeakMap;function e(u){return i.has(u)}function t(u){let h=i.get(u);return h===void 0&&(h={},i.set(u,h)),h}function n(u){i.delete(u)}function s(u,h,p){i.get(u)[h]=p}function a(){i=new WeakMap}return{has:e,get:t,remove:n,update:s,dispose:a}}function hz(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function jN(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function DN(){const i=[];let e=0;const t=[],n=[],s=[];function a(){e=0,t.length=0,n.length=0,s.length=0}function u(b,y,w,M,k,T){let N=i[e];return N===void 0?(N={id:b.id,object:b,geometry:y,material:w,groupOrder:M,renderOrder:b.renderOrder,z:k,group:T},i[e]=N):(N.id=b.id,N.object=b,N.geometry=y,N.material=w,N.groupOrder=M,N.renderOrder=b.renderOrder,N.z=k,N.group=T),e++,N}function h(b,y,w,M,k,T){const N=u(b,y,w,M,k,T);w.transmission>0?n.push(N):w.transparent===!0?s.push(N):t.push(N)}function p(b,y,w,M,k,T){const N=u(b,y,w,M,k,T);w.transmission>0?n.unshift(N):w.transparent===!0?s.unshift(N):t.unshift(N)}function m(b,y){t.length>1&&t.sort(b||hz),n.length>1&&n.sort(y||jN),s.length>1&&s.sort(y||jN)}function v(){for(let b=e,y=i.length;b<y;b++){const w=i[b];if(w.id===null)break;w.id=null,w.object=null,w.geometry=null,w.material=null,w.group=null}}return{opaque:t,transmissive:n,transparent:s,init:a,push:h,unshift:p,finish:v,sort:m}}function fz(){let i=new WeakMap;function e(n,s){const a=i.get(n);let u;return a===void 0?(u=new DN,i.set(n,[u])):s>=a.length?(u=new DN,a.push(u)):u=a[s],u}function t(){i=new WeakMap}return{get:e,dispose:t}}function pz(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Y,color:new vt};break;case"SpotLight":t={position:new Y,direction:new Y,color:new vt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Y,color:new vt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Y,skyColor:new vt,groundColor:new vt};break;case"RectAreaLight":t={color:new vt,position:new Y,halfWidth:new Y,halfHeight:new Y};break}return i[e.id]=t,t}}}function mz(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let gz=0;function xz(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function vz(i){const e=new pz,t=mz(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let m=0;m<9;m++)n.probe.push(new Y);const s=new Y,a=new Xt,u=new Xt;function h(m){let v=0,b=0,y=0;for(let U=0;U<9;U++)n.probe[U].set(0,0,0);let w=0,M=0,k=0,T=0,N=0,j=0,R=0,D=0,I=0,P=0,z=0;m.sort(xz);for(let U=0,L=m.length;U<L;U++){const W=m[U],J=W.color,Q=W.intensity,ue=W.distance;let ne=null;if(W.shadow&&W.shadow.map&&(W.shadow.map.texture.format===Xd?ne=W.shadow.map.texture:ne=W.shadow.map.depthTexture||W.shadow.map.texture),W.isAmbientLight)v+=J.r*Q,b+=J.g*Q,y+=J.b*Q;else if(W.isLightProbe){for(let X=0;X<9;X++)n.probe[X].addScaledVector(W.sh.coefficients[X],Q);z++}else if(W.isDirectionalLight){const X=e.get(W);if(X.color.copy(W.color).multiplyScalar(W.intensity),W.castShadow){const Z=W.shadow,re=t.get(W);re.shadowIntensity=Z.intensity,re.shadowBias=Z.bias,re.shadowNormalBias=Z.normalBias,re.shadowRadius=Z.radius,re.shadowMapSize=Z.mapSize,n.directionalShadow[w]=re,n.directionalShadowMap[w]=ne,n.directionalShadowMatrix[w]=W.shadow.matrix,j++}n.directional[w]=X,w++}else if(W.isSpotLight){const X=e.get(W);X.position.setFromMatrixPosition(W.matrixWorld),X.color.copy(J).multiplyScalar(Q),X.distance=ue,X.coneCos=Math.cos(W.angle),X.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),X.decay=W.decay,n.spot[k]=X;const Z=W.shadow;if(W.map&&(n.spotLightMap[I]=W.map,I++,Z.updateMatrices(W),W.castShadow&&P++),n.spotLightMatrix[k]=Z.matrix,W.castShadow){const re=t.get(W);re.shadowIntensity=Z.intensity,re.shadowBias=Z.bias,re.shadowNormalBias=Z.normalBias,re.shadowRadius=Z.radius,re.shadowMapSize=Z.mapSize,n.spotShadow[k]=re,n.spotShadowMap[k]=ne,D++}k++}else if(W.isRectAreaLight){const X=e.get(W);X.color.copy(J).multiplyScalar(Q),X.halfWidth.set(W.width*.5,0,0),X.halfHeight.set(0,W.height*.5,0),n.rectArea[T]=X,T++}else if(W.isPointLight){const X=e.get(W);if(X.color.copy(W.color).multiplyScalar(W.intensity),X.distance=W.distance,X.decay=W.decay,W.castShadow){const Z=W.shadow,re=t.get(W);re.shadowIntensity=Z.intensity,re.shadowBias=Z.bias,re.shadowNormalBias=Z.normalBias,re.shadowRadius=Z.radius,re.shadowMapSize=Z.mapSize,re.shadowCameraNear=Z.camera.near,re.shadowCameraFar=Z.camera.far,n.pointShadow[M]=re,n.pointShadowMap[M]=ne,n.pointShadowMatrix[M]=W.shadow.matrix,R++}n.point[M]=X,M++}else if(W.isHemisphereLight){const X=e.get(W);X.skyColor.copy(W.color).multiplyScalar(Q),X.groundColor.copy(W.groundColor).multiplyScalar(Q),n.hemi[N]=X,N++}}T>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=dt.LTC_FLOAT_1,n.rectAreaLTC2=dt.LTC_FLOAT_2):(n.rectAreaLTC1=dt.LTC_HALF_1,n.rectAreaLTC2=dt.LTC_HALF_2)),n.ambient[0]=v,n.ambient[1]=b,n.ambient[2]=y;const G=n.hash;(G.directionalLength!==w||G.pointLength!==M||G.spotLength!==k||G.rectAreaLength!==T||G.hemiLength!==N||G.numDirectionalShadows!==j||G.numPointShadows!==R||G.numSpotShadows!==D||G.numSpotMaps!==I||G.numLightProbes!==z)&&(n.directional.length=w,n.spot.length=k,n.rectArea.length=T,n.point.length=M,n.hemi.length=N,n.directionalShadow.length=j,n.directionalShadowMap.length=j,n.pointShadow.length=R,n.pointShadowMap.length=R,n.spotShadow.length=D,n.spotShadowMap.length=D,n.directionalShadowMatrix.length=j,n.pointShadowMatrix.length=R,n.spotLightMatrix.length=D+I-P,n.spotLightMap.length=I,n.numSpotLightShadowsWithMaps=P,n.numLightProbes=z,G.directionalLength=w,G.pointLength=M,G.spotLength=k,G.rectAreaLength=T,G.hemiLength=N,G.numDirectionalShadows=j,G.numPointShadows=R,G.numSpotShadows=D,G.numSpotMaps=I,G.numLightProbes=z,n.version=gz++)}function p(m,v){let b=0,y=0,w=0,M=0,k=0;const T=v.matrixWorldInverse;for(let N=0,j=m.length;N<j;N++){const R=m[N];if(R.isDirectionalLight){const D=n.directional[b];D.direction.setFromMatrixPosition(R.matrixWorld),s.setFromMatrixPosition(R.target.matrixWorld),D.direction.sub(s),D.direction.transformDirection(T),b++}else if(R.isSpotLight){const D=n.spot[w];D.position.setFromMatrixPosition(R.matrixWorld),D.position.applyMatrix4(T),D.direction.setFromMatrixPosition(R.matrixWorld),s.setFromMatrixPosition(R.target.matrixWorld),D.direction.sub(s),D.direction.transformDirection(T),w++}else if(R.isRectAreaLight){const D=n.rectArea[M];D.position.setFromMatrixPosition(R.matrixWorld),D.position.applyMatrix4(T),u.identity(),a.copy(R.matrixWorld),a.premultiply(T),u.extractRotation(a),D.halfWidth.set(R.width*.5,0,0),D.halfHeight.set(0,R.height*.5,0),D.halfWidth.applyMatrix4(u),D.halfHeight.applyMatrix4(u),M++}else if(R.isPointLight){const D=n.point[y];D.position.setFromMatrixPosition(R.matrixWorld),D.position.applyMatrix4(T),y++}else if(R.isHemisphereLight){const D=n.hemi[k];D.direction.setFromMatrixPosition(R.matrixWorld),D.direction.transformDirection(T),k++}}}return{setup:h,setupView:p,state:n}}function IN(i){const e=new vz(i),t=[],n=[];function s(v){m.camera=v,t.length=0,n.length=0}function a(v){t.push(v)}function u(v){n.push(v)}function h(){e.setup(t)}function p(v){e.setupView(t,v)}const m={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:m,setupLights:h,setupLightsView:p,pushLight:a,pushShadow:u}}function bz(i){let e=new WeakMap;function t(s,a=0){const u=e.get(s);let h;return u===void 0?(h=new IN(i),e.set(s,[h])):a>=u.length?(h=new IN(i),u.push(h)):h=u[a],h}function n(){e=new WeakMap}return{get:t,dispose:n}}const yz=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,_z=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,wz=[new Y(1,0,0),new Y(-1,0,0),new Y(0,1,0),new Y(0,-1,0),new Y(0,0,1),new Y(0,0,-1)],Sz=[new Y(0,-1,0),new Y(0,-1,0),new Y(0,0,1),new Y(0,0,-1),new Y(0,-1,0),new Y(0,-1,0)],ON=new Xt,Qm=new Y,k1=new Y;function Mz(i,e,t){let n=new cp;const s=new ze,a=new ze,u=new Qn,h=new pS,p=new mS,m={},v=t.maxTextureSize,b={[cc]:br,[br]:cc,[ll]:ll},y=new Xr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ze},radius:{value:4}},vertexShader:yz,fragmentShader:_z}),w=y.clone();w.defines.HORIZONTAL_PASS=1;const M=new Qt;M.setAttribute("position",new Kn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const k=new ns(M,y),T=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Xf;let N=this.type;this.render=function(P,z,G){if(T.enabled===!1||T.autoUpdate===!1&&T.needsUpdate===!1||P.length===0)return;P.type===cg&&(ut("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),P.type=Xf);const U=i.getRenderTarget(),L=i.getActiveCubeFace(),W=i.getActiveMipmapLevel(),J=i.state;J.setBlending(dl),J.buffers.depth.getReversed()===!0?J.buffers.color.setClear(0,0,0,0):J.buffers.color.setClear(1,1,1,1),J.buffers.depth.setTest(!0),J.setScissorTest(!1);const Q=N!==this.type;Q&&z.traverse(function(ue){ue.material&&(Array.isArray(ue.material)?ue.material.forEach(ne=>ne.needsUpdate=!0):ue.material.needsUpdate=!0)});for(let ue=0,ne=P.length;ue<ne;ue++){const X=P[ue],Z=X.shadow;if(Z===void 0){ut("WebGLShadowMap:",X,"has no shadow.");continue}if(Z.autoUpdate===!1&&Z.needsUpdate===!1)continue;s.copy(Z.mapSize);const re=Z.getFrameExtents();if(s.multiply(re),a.copy(Z.mapSize),(s.x>v||s.y>v)&&(s.x>v&&(a.x=Math.floor(v/re.x),s.x=a.x*re.x,Z.mapSize.x=a.x),s.y>v&&(a.y=Math.floor(v/re.y),s.y=a.y*re.y,Z.mapSize.y=a.y)),Z.map===null||Q===!0){if(Z.map!==null&&(Z.map.depthTexture!==null&&(Z.map.depthTexture.dispose(),Z.map.depthTexture=null),Z.map.dispose()),this.type===Ud){if(X.isPointLight){ut("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}Z.map=new Wr(s.x,s.y,{format:Xd,type:Mo,minFilter:ei,magFilter:ei,generateMipmaps:!1}),Z.map.texture.name=X.name+".shadowMap",Z.map.depthTexture=new Yd(s.x,s.y,ys),Z.map.depthTexture.name=X.name+".shadowMapDepth",Z.map.depthTexture.format=pl,Z.map.depthTexture.compareFunction=null,Z.map.depthTexture.minFilter=Ai,Z.map.depthTexture.magFilter=Ai}else{X.isPointLight?(Z.map=new tS(s.x),Z.map.depthTexture=new UA(s.x,Ga)):(Z.map=new Wr(s.x,s.y),Z.map.depthTexture=new Yd(s.x,s.y,Ga)),Z.map.depthTexture.name=X.name+".shadowMap",Z.map.depthTexture.format=pl;const we=i.state.buffers.depth.getReversed();this.type===Xf?(Z.map.depthTexture.compareFunction=we?my:py,Z.map.depthTexture.minFilter=ei,Z.map.depthTexture.magFilter=ei):(Z.map.depthTexture.compareFunction=null,Z.map.depthTexture.minFilter=Ai,Z.map.depthTexture.magFilter=Ai)}Z.camera.updateProjectionMatrix()}const pe=Z.map.isWebGLCubeRenderTarget?6:1;for(let we=0;we<pe;we++){if(Z.map.isWebGLCubeRenderTarget)i.setRenderTarget(Z.map,we),i.clear();else{we===0&&(i.setRenderTarget(Z.map),i.clear());const q=Z.getViewport(we);u.set(a.x*q.x,a.y*q.y,a.x*q.z,a.y*q.w),J.viewport(u)}if(X.isPointLight){const q=Z.camera,ce=Z.matrix,Ee=X.distance||q.far;Ee!==q.far&&(q.far=Ee,q.updateProjectionMatrix()),Qm.setFromMatrixPosition(X.matrixWorld),q.position.copy(Qm),k1.copy(q.position),k1.add(wz[we]),q.up.copy(Sz[we]),q.lookAt(k1),q.updateMatrixWorld(),ce.makeTranslation(-Qm.x,-Qm.y,-Qm.z),ON.multiplyMatrices(q.projectionMatrix,q.matrixWorldInverse),Z._frustum.setFromProjectionMatrix(ON,q.coordinateSystem,q.reversedDepth)}else Z.updateMatrices(X);n=Z.getFrustum(),D(z,G,Z.camera,X,this.type)}Z.isPointLightShadow!==!0&&this.type===Ud&&j(Z,G),Z.needsUpdate=!1}N=this.type,T.needsUpdate=!1,i.setRenderTarget(U,L,W)};function j(P,z){const G=e.update(k);y.defines.VSM_SAMPLES!==P.blurSamples&&(y.defines.VSM_SAMPLES=P.blurSamples,w.defines.VSM_SAMPLES=P.blurSamples,y.needsUpdate=!0,w.needsUpdate=!0),P.mapPass===null&&(P.mapPass=new Wr(s.x,s.y,{format:Xd,type:Mo})),y.uniforms.shadow_pass.value=P.map.depthTexture,y.uniforms.resolution.value=P.mapSize,y.uniforms.radius.value=P.radius,i.setRenderTarget(P.mapPass),i.clear(),i.renderBufferDirect(z,null,G,y,k,null),w.uniforms.shadow_pass.value=P.mapPass.texture,w.uniforms.resolution.value=P.mapSize,w.uniforms.radius.value=P.radius,i.setRenderTarget(P.map),i.clear(),i.renderBufferDirect(z,null,G,w,k,null)}function R(P,z,G,U){let L=null;const W=G.isPointLight===!0?P.customDistanceMaterial:P.customDepthMaterial;if(W!==void 0)L=W;else if(L=G.isPointLight===!0?p:h,i.localClippingEnabled&&z.clipShadows===!0&&Array.isArray(z.clippingPlanes)&&z.clippingPlanes.length!==0||z.displacementMap&&z.displacementScale!==0||z.alphaMap&&z.alphaTest>0||z.map&&z.alphaTest>0||z.alphaToCoverage===!0){const J=L.uuid,Q=z.uuid;let ue=m[J];ue===void 0&&(ue={},m[J]=ue);let ne=ue[Q];ne===void 0&&(ne=L.clone(),ue[Q]=ne,z.addEventListener("dispose",I)),L=ne}if(L.visible=z.visible,L.wireframe=z.wireframe,U===Ud?L.side=z.shadowSide!==null?z.shadowSide:z.side:L.side=z.shadowSide!==null?z.shadowSide:b[z.side],L.alphaMap=z.alphaMap,L.alphaTest=z.alphaToCoverage===!0?.5:z.alphaTest,L.map=z.map,L.clipShadows=z.clipShadows,L.clippingPlanes=z.clippingPlanes,L.clipIntersection=z.clipIntersection,L.displacementMap=z.displacementMap,L.displacementScale=z.displacementScale,L.displacementBias=z.displacementBias,L.wireframeLinewidth=z.wireframeLinewidth,L.linewidth=z.linewidth,G.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const J=i.properties.get(L);J.light=G}return L}function D(P,z,G,U,L){if(P.visible===!1)return;if(P.layers.test(z.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&L===Ud)&&(!P.frustumCulled||n.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,P.matrixWorld);const Q=e.update(P),ue=P.material;if(Array.isArray(ue)){const ne=Q.groups;for(let X=0,Z=ne.length;X<Z;X++){const re=ne[X],pe=ue[re.materialIndex];if(pe&&pe.visible){const we=R(P,pe,U,L);P.onBeforeShadow(i,P,z,G,Q,we,re),i.renderBufferDirect(G,null,Q,we,P,re),P.onAfterShadow(i,P,z,G,Q,we,re)}}}else if(ue.visible){const ne=R(P,ue,U,L);P.onBeforeShadow(i,P,z,G,Q,ne,null),i.renderBufferDirect(G,null,Q,ne,P,null),P.onAfterShadow(i,P,z,G,Q,ne,null)}}const J=P.children;for(let Q=0,ue=J.length;Q<ue;Q++)D(J[Q],z,G,U,L)}function I(P){P.target.removeEventListener("dispose",I);for(const G in m){const U=m[G],L=P.target.uuid;L in U&&(U[L].dispose(),delete U[L])}}}const Ez={[eb]:tb,[nb]:rb,[ib]:ab,[Wd]:sb,[tb]:eb,[rb]:nb,[ab]:ib,[sb]:Wd};function Nz(i,e){function t(){let ae=!1;const ot=new Qn;let Xe=null;const ct=new Qn(0,0,0,0);return{setMask:function(He){Xe!==He&&!ae&&(i.colorMask(He,He,He,He),Xe=He)},setLocked:function(He){ae=He},setClear:function(He,Ie,Qe,Gt,yn){yn===!0&&(He*=Gt,Ie*=Gt,Qe*=Gt),ot.set(He,Ie,Qe,Gt),ct.equals(ot)===!1&&(i.clearColor(He,Ie,Qe,Gt),ct.copy(ot))},reset:function(){ae=!1,Xe=null,ct.set(-1,0,0,0)}}}function n(){let ae=!1,ot=!1,Xe=null,ct=null,He=null;return{setReversed:function(Ie){if(ot!==Ie){const Qe=e.get("EXT_clip_control");Ie?Qe.clipControlEXT(Qe.LOWER_LEFT_EXT,Qe.ZERO_TO_ONE_EXT):Qe.clipControlEXT(Qe.LOWER_LEFT_EXT,Qe.NEGATIVE_ONE_TO_ONE_EXT),ot=Ie;const Gt=He;He=null,this.setClear(Gt)}},getReversed:function(){return ot},setTest:function(Ie){Ie?Ce(i.DEPTH_TEST):Fe(i.DEPTH_TEST)},setMask:function(Ie){Xe!==Ie&&!ae&&(i.depthMask(Ie),Xe=Ie)},setFunc:function(Ie){if(ot&&(Ie=Ez[Ie]),ct!==Ie){switch(Ie){case eb:i.depthFunc(i.NEVER);break;case tb:i.depthFunc(i.ALWAYS);break;case nb:i.depthFunc(i.LESS);break;case Wd:i.depthFunc(i.LEQUAL);break;case ib:i.depthFunc(i.EQUAL);break;case sb:i.depthFunc(i.GEQUAL);break;case rb:i.depthFunc(i.GREATER);break;case ab:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}ct=Ie}},setLocked:function(Ie){ae=Ie},setClear:function(Ie){He!==Ie&&(ot&&(Ie=1-Ie),i.clearDepth(Ie),He=Ie)},reset:function(){ae=!1,Xe=null,ct=null,He=null,ot=!1}}}function s(){let ae=!1,ot=null,Xe=null,ct=null,He=null,Ie=null,Qe=null,Gt=null,yn=null;return{setTest:function(Sn){ae||(Sn?Ce(i.STENCIL_TEST):Fe(i.STENCIL_TEST))},setMask:function(Sn){ot!==Sn&&!ae&&(i.stencilMask(Sn),ot=Sn)},setFunc:function(Sn,is,Us){(Xe!==Sn||ct!==is||He!==Us)&&(i.stencilFunc(Sn,is,Us),Xe=Sn,ct=is,He=Us)},setOp:function(Sn,is,Us){(Ie!==Sn||Qe!==is||Gt!==Us)&&(i.stencilOp(Sn,is,Us),Ie=Sn,Qe=is,Gt=Us)},setLocked:function(Sn){ae=Sn},setClear:function(Sn){yn!==Sn&&(i.clearStencil(Sn),yn=Sn)},reset:function(){ae=!1,ot=null,Xe=null,ct=null,He=null,Ie=null,Qe=null,Gt=null,yn=null}}}const a=new t,u=new n,h=new s,p=new WeakMap,m=new WeakMap;let v={},b={},y=new WeakMap,w=[],M=null,k=!1,T=null,N=null,j=null,R=null,D=null,I=null,P=null,z=new vt(0,0,0),G=0,U=!1,L=null,W=null,J=null,Q=null,ue=null;const ne=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let X=!1,Z=0;const re=i.getParameter(i.VERSION);re.indexOf("WebGL")!==-1?(Z=parseFloat(/^WebGL (\d)/.exec(re)[1]),X=Z>=1):re.indexOf("OpenGL ES")!==-1&&(Z=parseFloat(/^OpenGL ES (\d)/.exec(re)[1]),X=Z>=2);let pe=null,we={};const q=i.getParameter(i.SCISSOR_BOX),ce=i.getParameter(i.VIEWPORT),Ee=new Qn().fromArray(q),Pe=new Qn().fromArray(ce);function rt(ae,ot,Xe,ct){const He=new Uint8Array(4),Ie=i.createTexture();i.bindTexture(ae,Ie),i.texParameteri(ae,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(ae,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let Qe=0;Qe<Xe;Qe++)ae===i.TEXTURE_3D||ae===i.TEXTURE_2D_ARRAY?i.texImage3D(ot,0,i.RGBA,1,1,ct,0,i.RGBA,i.UNSIGNED_BYTE,He):i.texImage2D(ot+Qe,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,He);return Ie}const me={};me[i.TEXTURE_2D]=rt(i.TEXTURE_2D,i.TEXTURE_2D,1),me[i.TEXTURE_CUBE_MAP]=rt(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),me[i.TEXTURE_2D_ARRAY]=rt(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),me[i.TEXTURE_3D]=rt(i.TEXTURE_3D,i.TEXTURE_3D,1,1),a.setClear(0,0,0,1),u.setClear(1),h.setClear(0),Ce(i.DEPTH_TEST),u.setFunc(Wd),Oe(!1),tt(iw),Ce(i.CULL_FACE),je(dl);function Ce(ae){v[ae]!==!0&&(i.enable(ae),v[ae]=!0)}function Fe(ae){v[ae]!==!1&&(i.disable(ae),v[ae]=!1)}function nt(ae,ot){return b[ae]!==ot?(i.bindFramebuffer(ae,ot),b[ae]=ot,ae===i.DRAW_FRAMEBUFFER&&(b[i.FRAMEBUFFER]=ot),ae===i.FRAMEBUFFER&&(b[i.DRAW_FRAMEBUFFER]=ot),!0):!1}function ft(ae,ot){let Xe=w,ct=!1;if(ae){Xe=y.get(ot),Xe===void 0&&(Xe=[],y.set(ot,Xe));const He=ae.textures;if(Xe.length!==He.length||Xe[0]!==i.COLOR_ATTACHMENT0){for(let Ie=0,Qe=He.length;Ie<Qe;Ie++)Xe[Ie]=i.COLOR_ATTACHMENT0+Ie;Xe.length=He.length,ct=!0}}else Xe[0]!==i.BACK&&(Xe[0]=i.BACK,ct=!0);ct&&i.drawBuffers(Xe)}function sn(ae){return M!==ae?(i.useProgram(ae),M=ae,!0):!1}const pn={[mu]:i.FUNC_ADD,[HT]:i.FUNC_SUBTRACT,[GT]:i.FUNC_REVERSE_SUBTRACT};pn[qT]=i.MIN,pn[WT]=i.MAX;const Ot={[XT]:i.ZERO,[$T]:i.ONE,[YT]:i.SRC_COLOR,[Jv]:i.SRC_ALPHA,[tA]:i.SRC_ALPHA_SATURATE,[QT]:i.DST_COLOR,[ZT]:i.DST_ALPHA,[KT]:i.ONE_MINUS_SRC_COLOR,[Qv]:i.ONE_MINUS_SRC_ALPHA,[eA]:i.ONE_MINUS_DST_COLOR,[JT]:i.ONE_MINUS_DST_ALPHA,[nA]:i.CONSTANT_COLOR,[iA]:i.ONE_MINUS_CONSTANT_COLOR,[sA]:i.CONSTANT_ALPHA,[rA]:i.ONE_MINUS_CONSTANT_ALPHA};function je(ae,ot,Xe,ct,He,Ie,Qe,Gt,yn,Sn){if(ae===dl){k===!0&&(Fe(i.BLEND),k=!1);return}if(k===!1&&(Ce(i.BLEND),k=!0),ae!==VT){if(ae!==T||Sn!==U){if((N!==mu||D!==mu)&&(i.blendEquation(i.FUNC_ADD),N=mu,D=mu),Sn)switch(ae){case Fd:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case sw:i.blendFunc(i.ONE,i.ONE);break;case rw:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case aw:i.blendFuncSeparate(i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ZERO,i.ONE);break;default:Ct("WebGLState: Invalid blending: ",ae);break}else switch(ae){case Fd:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case sw:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE,i.ONE,i.ONE);break;case rw:Ct("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case aw:Ct("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Ct("WebGLState: Invalid blending: ",ae);break}j=null,R=null,I=null,P=null,z.set(0,0,0),G=0,T=ae,U=Sn}return}He=He||ot,Ie=Ie||Xe,Qe=Qe||ct,(ot!==N||He!==D)&&(i.blendEquationSeparate(pn[ot],pn[He]),N=ot,D=He),(Xe!==j||ct!==R||Ie!==I||Qe!==P)&&(i.blendFuncSeparate(Ot[Xe],Ot[ct],Ot[Ie],Ot[Qe]),j=Xe,R=ct,I=Ie,P=Qe),(Gt.equals(z)===!1||yn!==G)&&(i.blendColor(Gt.r,Gt.g,Gt.b,yn),z.copy(Gt),G=yn),T=ae,U=!1}function Ge(ae,ot){ae.side===ll?Fe(i.CULL_FACE):Ce(i.CULL_FACE);let Xe=ae.side===br;ot&&(Xe=!Xe),Oe(Xe),ae.blending===Fd&&ae.transparent===!1?je(dl):je(ae.blending,ae.blendEquation,ae.blendSrc,ae.blendDst,ae.blendEquationAlpha,ae.blendSrcAlpha,ae.blendDstAlpha,ae.blendColor,ae.blendAlpha,ae.premultipliedAlpha),u.setFunc(ae.depthFunc),u.setTest(ae.depthTest),u.setMask(ae.depthWrite),a.setMask(ae.colorWrite);const ct=ae.stencilWrite;h.setTest(ct),ct&&(h.setMask(ae.stencilWriteMask),h.setFunc(ae.stencilFunc,ae.stencilRef,ae.stencilFuncMask),h.setOp(ae.stencilFail,ae.stencilZFail,ae.stencilZPass)),Et(ae.polygonOffset,ae.polygonOffsetFactor,ae.polygonOffsetUnits),ae.alphaToCoverage===!0?Ce(i.SAMPLE_ALPHA_TO_COVERAGE):Fe(i.SAMPLE_ALPHA_TO_COVERAGE)}function Oe(ae){L!==ae&&(ae?i.frontFace(i.CW):i.frontFace(i.CCW),L=ae)}function tt(ae){ae!==zT?(Ce(i.CULL_FACE),ae!==W&&(ae===iw?i.cullFace(i.BACK):ae===BT?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Fe(i.CULL_FACE),W=ae}function K(ae){ae!==J&&(X&&i.lineWidth(ae),J=ae)}function Et(ae,ot,Xe){ae?(Ce(i.POLYGON_OFFSET_FILL),(Q!==ot||ue!==Xe)&&(i.polygonOffset(ot,Xe),Q=ot,ue=Xe)):Fe(i.POLYGON_OFFSET_FILL)}function at(ae){ae?Ce(i.SCISSOR_TEST):Fe(i.SCISSOR_TEST)}function Tt(ae){ae===void 0&&(ae=i.TEXTURE0+ne-1),pe!==ae&&(i.activeTexture(ae),pe=ae)}function Ye(ae,ot,Xe){Xe===void 0&&(pe===null?Xe=i.TEXTURE0+ne-1:Xe=pe);let ct=we[Xe];ct===void 0&&(ct={type:void 0,texture:void 0},we[Xe]=ct),(ct.type!==ae||ct.texture!==ot)&&(pe!==Xe&&(i.activeTexture(Xe),pe=Xe),i.bindTexture(ae,ot||me[ae]),ct.type=ae,ct.texture=ot)}function $(){const ae=we[pe];ae!==void 0&&ae.type!==void 0&&(i.bindTexture(ae.type,null),ae.type=void 0,ae.texture=void 0)}function B(){try{i.compressedTexImage2D(...arguments)}catch(ae){Ct("WebGLState:",ae)}}function oe(){try{i.compressedTexImage3D(...arguments)}catch(ae){Ct("WebGLState:",ae)}}function Te(){try{i.texSubImage2D(...arguments)}catch(ae){Ct("WebGLState:",ae)}}function Le(){try{i.texSubImage3D(...arguments)}catch(ae){Ct("WebGLState:",ae)}}function Ae(){try{i.compressedTexSubImage2D(...arguments)}catch(ae){Ct("WebGLState:",ae)}}function pt(){try{i.compressedTexSubImage3D(...arguments)}catch(ae){Ct("WebGLState:",ae)}}function Je(){try{i.texStorage2D(...arguments)}catch(ae){Ct("WebGLState:",ae)}}function yt(){try{i.texStorage3D(...arguments)}catch(ae){Ct("WebGLState:",ae)}}function jt(){try{i.texImage2D(...arguments)}catch(ae){Ct("WebGLState:",ae)}}function Ve(){try{i.texImage3D(...arguments)}catch(ae){Ct("WebGLState:",ae)}}function $e(ae){Ee.equals(ae)===!1&&(i.scissor(ae.x,ae.y,ae.z,ae.w),Ee.copy(ae))}function mt(ae){Pe.equals(ae)===!1&&(i.viewport(ae.x,ae.y,ae.z,ae.w),Pe.copy(ae))}function ht(ae,ot){let Xe=m.get(ot);Xe===void 0&&(Xe=new WeakMap,m.set(ot,Xe));let ct=Xe.get(ae);ct===void 0&&(ct=i.getUniformBlockIndex(ot,ae.name),Xe.set(ae,ct))}function st(ae,ot){const ct=m.get(ot).get(ae);p.get(ot)!==ct&&(i.uniformBlockBinding(ot,ct,ae.__bindingPointIndex),p.set(ot,ct))}function en(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),u.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),v={},pe=null,we={},b={},y=new WeakMap,w=[],M=null,k=!1,T=null,N=null,j=null,R=null,D=null,I=null,P=null,z=new vt(0,0,0),G=0,U=!1,L=null,W=null,J=null,Q=null,ue=null,Ee.set(0,0,i.canvas.width,i.canvas.height),Pe.set(0,0,i.canvas.width,i.canvas.height),a.reset(),u.reset(),h.reset()}return{buffers:{color:a,depth:u,stencil:h},enable:Ce,disable:Fe,bindFramebuffer:nt,drawBuffers:ft,useProgram:sn,setBlending:je,setMaterial:Ge,setFlipSided:Oe,setCullFace:tt,setLineWidth:K,setPolygonOffset:Et,setScissorTest:at,activeTexture:Tt,bindTexture:Ye,unbindTexture:$,compressedTexImage2D:B,compressedTexImage3D:oe,texImage2D:jt,texImage3D:Ve,updateUBOMapping:ht,uniformBlockBinding:st,texStorage2D:Je,texStorage3D:yt,texSubImage2D:Te,texSubImage3D:Le,compressedTexSubImage2D:Ae,compressedTexSubImage3D:pt,scissor:$e,viewport:mt,reset:en}}function Tz(i,e,t,n,s,a,u){const h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,p=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),m=new ze,v=new WeakMap;let b;const y=new WeakMap;let w=!1;try{w=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function M($,B){return w?new OffscreenCanvas($,B):Lg("canvas")}function k($,B,oe){let Te=1;const Le=Ye($);if((Le.width>oe||Le.height>oe)&&(Te=oe/Math.max(Le.width,Le.height)),Te<1)if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap||typeof VideoFrame<"u"&&$ instanceof VideoFrame){const Ae=Math.floor(Te*Le.width),pt=Math.floor(Te*Le.height);b===void 0&&(b=M(Ae,pt));const Je=B?M(Ae,pt):b;return Je.width=Ae,Je.height=pt,Je.getContext("2d").drawImage($,0,0,Ae,pt),ut("WebGLRenderer: Texture has been resized from ("+Le.width+"x"+Le.height+") to ("+Ae+"x"+pt+")."),Je}else return"data"in $&&ut("WebGLRenderer: Image in DataTexture is too big ("+Le.width+"x"+Le.height+")."),$;return $}function T($){return $.generateMipmaps}function N($){i.generateMipmap($)}function j($){return $.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:$.isWebGL3DRenderTarget?i.TEXTURE_3D:$.isWebGLArrayRenderTarget||$.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function R($,B,oe,Te,Le=!1){if($!==null){if(i[$]!==void 0)return i[$];ut("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$+"'")}let Ae=B;if(B===i.RED&&(oe===i.FLOAT&&(Ae=i.R32F),oe===i.HALF_FLOAT&&(Ae=i.R16F),oe===i.UNSIGNED_BYTE&&(Ae=i.R8)),B===i.RED_INTEGER&&(oe===i.UNSIGNED_BYTE&&(Ae=i.R8UI),oe===i.UNSIGNED_SHORT&&(Ae=i.R16UI),oe===i.UNSIGNED_INT&&(Ae=i.R32UI),oe===i.BYTE&&(Ae=i.R8I),oe===i.SHORT&&(Ae=i.R16I),oe===i.INT&&(Ae=i.R32I)),B===i.RG&&(oe===i.FLOAT&&(Ae=i.RG32F),oe===i.HALF_FLOAT&&(Ae=i.RG16F),oe===i.UNSIGNED_BYTE&&(Ae=i.RG8)),B===i.RG_INTEGER&&(oe===i.UNSIGNED_BYTE&&(Ae=i.RG8UI),oe===i.UNSIGNED_SHORT&&(Ae=i.RG16UI),oe===i.UNSIGNED_INT&&(Ae=i.RG32UI),oe===i.BYTE&&(Ae=i.RG8I),oe===i.SHORT&&(Ae=i.RG16I),oe===i.INT&&(Ae=i.RG32I)),B===i.RGB_INTEGER&&(oe===i.UNSIGNED_BYTE&&(Ae=i.RGB8UI),oe===i.UNSIGNED_SHORT&&(Ae=i.RGB16UI),oe===i.UNSIGNED_INT&&(Ae=i.RGB32UI),oe===i.BYTE&&(Ae=i.RGB8I),oe===i.SHORT&&(Ae=i.RGB16I),oe===i.INT&&(Ae=i.RGB32I)),B===i.RGBA_INTEGER&&(oe===i.UNSIGNED_BYTE&&(Ae=i.RGBA8UI),oe===i.UNSIGNED_SHORT&&(Ae=i.RGBA16UI),oe===i.UNSIGNED_INT&&(Ae=i.RGBA32UI),oe===i.BYTE&&(Ae=i.RGBA8I),oe===i.SHORT&&(Ae=i.RGBA16I),oe===i.INT&&(Ae=i.RGBA32I)),B===i.RGB&&(oe===i.UNSIGNED_INT_5_9_9_9_REV&&(Ae=i.RGB9_E5),oe===i.UNSIGNED_INT_10F_11F_11F_REV&&(Ae=i.R11F_G11F_B10F)),B===i.RGBA){const pt=Le?Ig:Tn.getTransfer(Te);oe===i.FLOAT&&(Ae=i.RGBA32F),oe===i.HALF_FLOAT&&(Ae=i.RGBA16F),oe===i.UNSIGNED_BYTE&&(Ae=pt===Hn?i.SRGB8_ALPHA8:i.RGBA8),oe===i.UNSIGNED_SHORT_4_4_4_4&&(Ae=i.RGBA4),oe===i.UNSIGNED_SHORT_5_5_5_1&&(Ae=i.RGB5_A1)}return(Ae===i.R16F||Ae===i.R32F||Ae===i.RG16F||Ae===i.RG32F||Ae===i.RGBA16F||Ae===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Ae}function D($,B){let oe;return $?B===null||B===Ga||B===Zf?oe=i.DEPTH24_STENCIL8:B===ys?oe=i.DEPTH32F_STENCIL8:B===Kf&&(oe=i.DEPTH24_STENCIL8,ut("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):B===null||B===Ga||B===Zf?oe=i.DEPTH_COMPONENT24:B===ys?oe=i.DEPTH_COMPONENT32F:B===Kf&&(oe=i.DEPTH_COMPONENT16),oe}function I($,B){return T($)===!0||$.isFramebufferTexture&&$.minFilter!==Ai&&$.minFilter!==ei?Math.log2(Math.max(B.width,B.height))+1:$.mipmaps!==void 0&&$.mipmaps.length>0?$.mipmaps.length:$.isCompressedTexture&&Array.isArray($.image)?B.mipmaps.length:1}function P($){const B=$.target;B.removeEventListener("dispose",P),G(B),B.isVideoTexture&&v.delete(B)}function z($){const B=$.target;B.removeEventListener("dispose",z),L(B)}function G($){const B=n.get($);if(B.__webglInit===void 0)return;const oe=$.source,Te=y.get(oe);if(Te){const Le=Te[B.__cacheKey];Le.usedTimes--,Le.usedTimes===0&&U($),Object.keys(Te).length===0&&y.delete(oe)}n.remove($)}function U($){const B=n.get($);i.deleteTexture(B.__webglTexture);const oe=$.source,Te=y.get(oe);delete Te[B.__cacheKey],u.memory.textures--}function L($){const B=n.get($);if($.depthTexture&&($.depthTexture.dispose(),n.remove($.depthTexture)),$.isWebGLCubeRenderTarget)for(let Te=0;Te<6;Te++){if(Array.isArray(B.__webglFramebuffer[Te]))for(let Le=0;Le<B.__webglFramebuffer[Te].length;Le++)i.deleteFramebuffer(B.__webglFramebuffer[Te][Le]);else i.deleteFramebuffer(B.__webglFramebuffer[Te]);B.__webglDepthbuffer&&i.deleteRenderbuffer(B.__webglDepthbuffer[Te])}else{if(Array.isArray(B.__webglFramebuffer))for(let Te=0;Te<B.__webglFramebuffer.length;Te++)i.deleteFramebuffer(B.__webglFramebuffer[Te]);else i.deleteFramebuffer(B.__webglFramebuffer);if(B.__webglDepthbuffer&&i.deleteRenderbuffer(B.__webglDepthbuffer),B.__webglMultisampledFramebuffer&&i.deleteFramebuffer(B.__webglMultisampledFramebuffer),B.__webglColorRenderbuffer)for(let Te=0;Te<B.__webglColorRenderbuffer.length;Te++)B.__webglColorRenderbuffer[Te]&&i.deleteRenderbuffer(B.__webglColorRenderbuffer[Te]);B.__webglDepthRenderbuffer&&i.deleteRenderbuffer(B.__webglDepthRenderbuffer)}const oe=$.textures;for(let Te=0,Le=oe.length;Te<Le;Te++){const Ae=n.get(oe[Te]);Ae.__webglTexture&&(i.deleteTexture(Ae.__webglTexture),u.memory.textures--),n.remove(oe[Te])}n.remove($)}let W=0;function J(){W=0}function Q(){const $=W;return $>=s.maxTextures&&ut("WebGLTextures: Trying to use "+$+" texture units while this GPU supports only "+s.maxTextures),W+=1,$}function ue($){const B=[];return B.push($.wrapS),B.push($.wrapT),B.push($.wrapR||0),B.push($.magFilter),B.push($.minFilter),B.push($.anisotropy),B.push($.internalFormat),B.push($.format),B.push($.type),B.push($.generateMipmaps),B.push($.premultiplyAlpha),B.push($.flipY),B.push($.unpackAlignment),B.push($.colorSpace),B.join()}function ne($,B){const oe=n.get($);if($.isVideoTexture&&at($),$.isRenderTargetTexture===!1&&$.isExternalTexture!==!0&&$.version>0&&oe.__version!==$.version){const Te=$.image;if(Te===null)ut("WebGLRenderer: Texture marked for update but no image data found.");else if(Te.complete===!1)ut("WebGLRenderer: Texture marked for update but image is incomplete");else{me(oe,$,B);return}}else $.isExternalTexture&&(oe.__webglTexture=$.sourceTexture?$.sourceTexture:null);t.bindTexture(i.TEXTURE_2D,oe.__webglTexture,i.TEXTURE0+B)}function X($,B){const oe=n.get($);if($.isRenderTargetTexture===!1&&$.version>0&&oe.__version!==$.version){me(oe,$,B);return}else $.isExternalTexture&&(oe.__webglTexture=$.sourceTexture?$.sourceTexture:null);t.bindTexture(i.TEXTURE_2D_ARRAY,oe.__webglTexture,i.TEXTURE0+B)}function Z($,B){const oe=n.get($);if($.isRenderTargetTexture===!1&&$.version>0&&oe.__version!==$.version){me(oe,$,B);return}t.bindTexture(i.TEXTURE_3D,oe.__webglTexture,i.TEXTURE0+B)}function re($,B){const oe=n.get($);if($.isCubeDepthTexture!==!0&&$.version>0&&oe.__version!==$.version){Ce(oe,$,B);return}t.bindTexture(i.TEXTURE_CUBE_MAP,oe.__webglTexture,i.TEXTURE0+B)}const pe={[Cg]:i.REPEAT,[Gr]:i.CLAMP_TO_EDGE,[Rg]:i.MIRRORED_REPEAT},we={[Ai]:i.NEAREST,[Hw]:i.NEAREST_MIPMAP_NEAREST,[Hf]:i.NEAREST_MIPMAP_LINEAR,[ei]:i.LINEAR,[ug]:i.LINEAR_MIPMAP_NEAREST,[cl]:i.LINEAR_MIPMAP_LINEAR},q={[pA]:i.NEVER,[bA]:i.ALWAYS,[mA]:i.LESS,[py]:i.LEQUAL,[gA]:i.EQUAL,[my]:i.GEQUAL,[xA]:i.GREATER,[vA]:i.NOTEQUAL};function ce($,B){if(B.type===ys&&e.has("OES_texture_float_linear")===!1&&(B.magFilter===ei||B.magFilter===ug||B.magFilter===Hf||B.magFilter===cl||B.minFilter===ei||B.minFilter===ug||B.minFilter===Hf||B.minFilter===cl)&&ut("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri($,i.TEXTURE_WRAP_S,pe[B.wrapS]),i.texParameteri($,i.TEXTURE_WRAP_T,pe[B.wrapT]),($===i.TEXTURE_3D||$===i.TEXTURE_2D_ARRAY)&&i.texParameteri($,i.TEXTURE_WRAP_R,pe[B.wrapR]),i.texParameteri($,i.TEXTURE_MAG_FILTER,we[B.magFilter]),i.texParameteri($,i.TEXTURE_MIN_FILTER,we[B.minFilter]),B.compareFunction&&(i.texParameteri($,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri($,i.TEXTURE_COMPARE_FUNC,q[B.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(B.magFilter===Ai||B.minFilter!==Hf&&B.minFilter!==cl||B.type===ys&&e.has("OES_texture_float_linear")===!1)return;if(B.anisotropy>1||n.get(B).__currentAnisotropy){const oe=e.get("EXT_texture_filter_anisotropic");i.texParameterf($,oe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,s.getMaxAnisotropy())),n.get(B).__currentAnisotropy=B.anisotropy}}}function Ee($,B){let oe=!1;$.__webglInit===void 0&&($.__webglInit=!0,B.addEventListener("dispose",P));const Te=B.source;let Le=y.get(Te);Le===void 0&&(Le={},y.set(Te,Le));const Ae=ue(B);if(Ae!==$.__cacheKey){Le[Ae]===void 0&&(Le[Ae]={texture:i.createTexture(),usedTimes:0},u.memory.textures++,oe=!0),Le[Ae].usedTimes++;const pt=Le[$.__cacheKey];pt!==void 0&&(Le[$.__cacheKey].usedTimes--,pt.usedTimes===0&&U(B)),$.__cacheKey=Ae,$.__webglTexture=Le[Ae].texture}return oe}function Pe($,B,oe){return Math.floor(Math.floor($/oe)/B)}function rt($,B,oe,Te){const Ae=$.updateRanges;if(Ae.length===0)t.texSubImage2D(i.TEXTURE_2D,0,0,0,B.width,B.height,oe,Te,B.data);else{Ae.sort((Ve,$e)=>Ve.start-$e.start);let pt=0;for(let Ve=1;Ve<Ae.length;Ve++){const $e=Ae[pt],mt=Ae[Ve],ht=$e.start+$e.count,st=Pe(mt.start,B.width,4),en=Pe($e.start,B.width,4);mt.start<=ht+1&&st===en&&Pe(mt.start+mt.count-1,B.width,4)===st?$e.count=Math.max($e.count,mt.start+mt.count-$e.start):(++pt,Ae[pt]=mt)}Ae.length=pt+1;const Je=i.getParameter(i.UNPACK_ROW_LENGTH),yt=i.getParameter(i.UNPACK_SKIP_PIXELS),jt=i.getParameter(i.UNPACK_SKIP_ROWS);i.pixelStorei(i.UNPACK_ROW_LENGTH,B.width);for(let Ve=0,$e=Ae.length;Ve<$e;Ve++){const mt=Ae[Ve],ht=Math.floor(mt.start/4),st=Math.ceil(mt.count/4),en=ht%B.width,ae=Math.floor(ht/B.width),ot=st,Xe=1;i.pixelStorei(i.UNPACK_SKIP_PIXELS,en),i.pixelStorei(i.UNPACK_SKIP_ROWS,ae),t.texSubImage2D(i.TEXTURE_2D,0,en,ae,ot,Xe,oe,Te,B.data)}$.clearUpdateRanges(),i.pixelStorei(i.UNPACK_ROW_LENGTH,Je),i.pixelStorei(i.UNPACK_SKIP_PIXELS,yt),i.pixelStorei(i.UNPACK_SKIP_ROWS,jt)}}function me($,B,oe){let Te=i.TEXTURE_2D;(B.isDataArrayTexture||B.isCompressedArrayTexture)&&(Te=i.TEXTURE_2D_ARRAY),B.isData3DTexture&&(Te=i.TEXTURE_3D);const Le=Ee($,B),Ae=B.source;t.bindTexture(Te,$.__webglTexture,i.TEXTURE0+oe);const pt=n.get(Ae);if(Ae.version!==pt.__version||Le===!0){t.activeTexture(i.TEXTURE0+oe);const Je=Tn.getPrimaries(Tn.workingColorSpace),yt=B.colorSpace===rc?null:Tn.getPrimaries(B.colorSpace),jt=B.colorSpace===rc||Je===yt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,B.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,B.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,jt);let Ve=k(B.image,!1,s.maxTextureSize);Ve=Tt(B,Ve);const $e=a.convert(B.format,B.colorSpace),mt=a.convert(B.type);let ht=R(B.internalFormat,$e,mt,B.colorSpace,B.isVideoTexture);ce(Te,B);let st;const en=B.mipmaps,ae=B.isVideoTexture!==!0,ot=pt.__version===void 0||Le===!0,Xe=Ae.dataReady,ct=I(B,Ve);if(B.isDepthTexture)ht=D(B.format===xu,B.type),ot&&(ae?t.texStorage2D(i.TEXTURE_2D,1,ht,Ve.width,Ve.height):t.texImage2D(i.TEXTURE_2D,0,ht,Ve.width,Ve.height,0,$e,mt,null));else if(B.isDataTexture)if(en.length>0){ae&&ot&&t.texStorage2D(i.TEXTURE_2D,ct,ht,en[0].width,en[0].height);for(let He=0,Ie=en.length;He<Ie;He++)st=en[He],ae?Xe&&t.texSubImage2D(i.TEXTURE_2D,He,0,0,st.width,st.height,$e,mt,st.data):t.texImage2D(i.TEXTURE_2D,He,ht,st.width,st.height,0,$e,mt,st.data);B.generateMipmaps=!1}else ae?(ot&&t.texStorage2D(i.TEXTURE_2D,ct,ht,Ve.width,Ve.height),Xe&&rt(B,Ve,$e,mt)):t.texImage2D(i.TEXTURE_2D,0,ht,Ve.width,Ve.height,0,$e,mt,Ve.data);else if(B.isCompressedTexture)if(B.isCompressedArrayTexture){ae&&ot&&t.texStorage3D(i.TEXTURE_2D_ARRAY,ct,ht,en[0].width,en[0].height,Ve.depth);for(let He=0,Ie=en.length;He<Ie;He++)if(st=en[He],B.format!==_s)if($e!==null)if(ae){if(Xe)if(B.layerUpdates.size>0){const Qe=gw(st.width,st.height,B.format,B.type);for(const Gt of B.layerUpdates){const yn=st.data.subarray(Gt*Qe/st.data.BYTES_PER_ELEMENT,(Gt+1)*Qe/st.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,He,0,0,Gt,st.width,st.height,1,$e,yn)}B.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,He,0,0,0,st.width,st.height,Ve.depth,$e,st.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,He,ht,st.width,st.height,Ve.depth,0,st.data,0,0);else ut("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ae?Xe&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,He,0,0,0,st.width,st.height,Ve.depth,$e,mt,st.data):t.texImage3D(i.TEXTURE_2D_ARRAY,He,ht,st.width,st.height,Ve.depth,0,$e,mt,st.data)}else{ae&&ot&&t.texStorage2D(i.TEXTURE_2D,ct,ht,en[0].width,en[0].height);for(let He=0,Ie=en.length;He<Ie;He++)st=en[He],B.format!==_s?$e!==null?ae?Xe&&t.compressedTexSubImage2D(i.TEXTURE_2D,He,0,0,st.width,st.height,$e,st.data):t.compressedTexImage2D(i.TEXTURE_2D,He,ht,st.width,st.height,0,st.data):ut("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ae?Xe&&t.texSubImage2D(i.TEXTURE_2D,He,0,0,st.width,st.height,$e,mt,st.data):t.texImage2D(i.TEXTURE_2D,He,ht,st.width,st.height,0,$e,mt,st.data)}else if(B.isDataArrayTexture)if(ae){if(ot&&t.texStorage3D(i.TEXTURE_2D_ARRAY,ct,ht,Ve.width,Ve.height,Ve.depth),Xe)if(B.layerUpdates.size>0){const He=gw(Ve.width,Ve.height,B.format,B.type);for(const Ie of B.layerUpdates){const Qe=Ve.data.subarray(Ie*He/Ve.data.BYTES_PER_ELEMENT,(Ie+1)*He/Ve.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,Ie,Ve.width,Ve.height,1,$e,mt,Qe)}B.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Ve.width,Ve.height,Ve.depth,$e,mt,Ve.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,ht,Ve.width,Ve.height,Ve.depth,0,$e,mt,Ve.data);else if(B.isData3DTexture)ae?(ot&&t.texStorage3D(i.TEXTURE_3D,ct,ht,Ve.width,Ve.height,Ve.depth),Xe&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Ve.width,Ve.height,Ve.depth,$e,mt,Ve.data)):t.texImage3D(i.TEXTURE_3D,0,ht,Ve.width,Ve.height,Ve.depth,0,$e,mt,Ve.data);else if(B.isFramebufferTexture){if(ot)if(ae)t.texStorage2D(i.TEXTURE_2D,ct,ht,Ve.width,Ve.height);else{let He=Ve.width,Ie=Ve.height;for(let Qe=0;Qe<ct;Qe++)t.texImage2D(i.TEXTURE_2D,Qe,ht,He,Ie,0,$e,mt,null),He>>=1,Ie>>=1}}else if(en.length>0){if(ae&&ot){const He=Ye(en[0]);t.texStorage2D(i.TEXTURE_2D,ct,ht,He.width,He.height)}for(let He=0,Ie=en.length;He<Ie;He++)st=en[He],ae?Xe&&t.texSubImage2D(i.TEXTURE_2D,He,0,0,$e,mt,st):t.texImage2D(i.TEXTURE_2D,He,ht,$e,mt,st);B.generateMipmaps=!1}else if(ae){if(ot){const He=Ye(Ve);t.texStorage2D(i.TEXTURE_2D,ct,ht,He.width,He.height)}Xe&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,$e,mt,Ve)}else t.texImage2D(i.TEXTURE_2D,0,ht,$e,mt,Ve);T(B)&&N(Te),pt.__version=Ae.version,B.onUpdate&&B.onUpdate(B)}$.__version=B.version}function Ce($,B,oe){if(B.image.length!==6)return;const Te=Ee($,B),Le=B.source;t.bindTexture(i.TEXTURE_CUBE_MAP,$.__webglTexture,i.TEXTURE0+oe);const Ae=n.get(Le);if(Le.version!==Ae.__version||Te===!0){t.activeTexture(i.TEXTURE0+oe);const pt=Tn.getPrimaries(Tn.workingColorSpace),Je=B.colorSpace===rc?null:Tn.getPrimaries(B.colorSpace),yt=B.colorSpace===rc||pt===Je?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,B.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,B.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,yt);const jt=B.isCompressedTexture||B.image[0].isCompressedTexture,Ve=B.image[0]&&B.image[0].isDataTexture,$e=[];for(let Ie=0;Ie<6;Ie++)!jt&&!Ve?$e[Ie]=k(B.image[Ie],!0,s.maxCubemapSize):$e[Ie]=Ve?B.image[Ie].image:B.image[Ie],$e[Ie]=Tt(B,$e[Ie]);const mt=$e[0],ht=a.convert(B.format,B.colorSpace),st=a.convert(B.type),en=R(B.internalFormat,ht,st,B.colorSpace),ae=B.isVideoTexture!==!0,ot=Ae.__version===void 0||Te===!0,Xe=Le.dataReady;let ct=I(B,mt);ce(i.TEXTURE_CUBE_MAP,B);let He;if(jt){ae&&ot&&t.texStorage2D(i.TEXTURE_CUBE_MAP,ct,en,mt.width,mt.height);for(let Ie=0;Ie<6;Ie++){He=$e[Ie].mipmaps;for(let Qe=0;Qe<He.length;Qe++){const Gt=He[Qe];B.format!==_s?ht!==null?ae?Xe&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Qe,0,0,Gt.width,Gt.height,ht,Gt.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Qe,en,Gt.width,Gt.height,0,Gt.data):ut("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ae?Xe&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Qe,0,0,Gt.width,Gt.height,ht,st,Gt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Qe,en,Gt.width,Gt.height,0,ht,st,Gt.data)}}}else{if(He=B.mipmaps,ae&&ot){He.length>0&&ct++;const Ie=Ye($e[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,ct,en,Ie.width,Ie.height)}for(let Ie=0;Ie<6;Ie++)if(Ve){ae?Xe&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,0,0,$e[Ie].width,$e[Ie].height,ht,st,$e[Ie].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,en,$e[Ie].width,$e[Ie].height,0,ht,st,$e[Ie].data);for(let Qe=0;Qe<He.length;Qe++){const yn=He[Qe].image[Ie].image;ae?Xe&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Qe+1,0,0,yn.width,yn.height,ht,st,yn.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Qe+1,en,yn.width,yn.height,0,ht,st,yn.data)}}else{ae?Xe&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,0,0,ht,st,$e[Ie]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,en,ht,st,$e[Ie]);for(let Qe=0;Qe<He.length;Qe++){const Gt=He[Qe];ae?Xe&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Qe+1,0,0,ht,st,Gt.image[Ie]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Qe+1,en,ht,st,Gt.image[Ie])}}}T(B)&&N(i.TEXTURE_CUBE_MAP),Ae.__version=Le.version,B.onUpdate&&B.onUpdate(B)}$.__version=B.version}function Fe($,B,oe,Te,Le,Ae){const pt=a.convert(oe.format,oe.colorSpace),Je=a.convert(oe.type),yt=R(oe.internalFormat,pt,Je,oe.colorSpace),jt=n.get(B),Ve=n.get(oe);if(Ve.__renderTarget=B,!jt.__hasExternalTextures){const $e=Math.max(1,B.width>>Ae),mt=Math.max(1,B.height>>Ae);Le===i.TEXTURE_3D||Le===i.TEXTURE_2D_ARRAY?t.texImage3D(Le,Ae,yt,$e,mt,B.depth,0,pt,Je,null):t.texImage2D(Le,Ae,yt,$e,mt,0,pt,Je,null)}t.bindFramebuffer(i.FRAMEBUFFER,$),Et(B)?h.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Te,Le,Ve.__webglTexture,0,K(B)):(Le===i.TEXTURE_2D||Le>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Le<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Te,Le,Ve.__webglTexture,Ae),t.bindFramebuffer(i.FRAMEBUFFER,null)}function nt($,B,oe){if(i.bindRenderbuffer(i.RENDERBUFFER,$),B.depthBuffer){const Te=B.depthTexture,Le=Te&&Te.isDepthTexture?Te.type:null,Ae=D(B.stencilBuffer,Le),pt=B.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;Et(B)?h.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,K(B),Ae,B.width,B.height):oe?i.renderbufferStorageMultisample(i.RENDERBUFFER,K(B),Ae,B.width,B.height):i.renderbufferStorage(i.RENDERBUFFER,Ae,B.width,B.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,pt,i.RENDERBUFFER,$)}else{const Te=B.textures;for(let Le=0;Le<Te.length;Le++){const Ae=Te[Le],pt=a.convert(Ae.format,Ae.colorSpace),Je=a.convert(Ae.type),yt=R(Ae.internalFormat,pt,Je,Ae.colorSpace);Et(B)?h.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,K(B),yt,B.width,B.height):oe?i.renderbufferStorageMultisample(i.RENDERBUFFER,K(B),yt,B.width,B.height):i.renderbufferStorage(i.RENDERBUFFER,yt,B.width,B.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function ft($,B,oe){const Te=B.isWebGLCubeRenderTarget===!0;if(t.bindFramebuffer(i.FRAMEBUFFER,$),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Le=n.get(B.depthTexture);if(Le.__renderTarget=B,(!Le.__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),Te){if(Le.__webglInit===void 0&&(Le.__webglInit=!0,B.depthTexture.addEventListener("dispose",P)),Le.__webglTexture===void 0){Le.__webglTexture=i.createTexture(),t.bindTexture(i.TEXTURE_CUBE_MAP,Le.__webglTexture),ce(i.TEXTURE_CUBE_MAP,B.depthTexture);const jt=a.convert(B.depthTexture.format),Ve=a.convert(B.depthTexture.type);let $e;B.depthTexture.format===pl?$e=i.DEPTH_COMPONENT24:B.depthTexture.format===xu&&($e=i.DEPTH24_STENCIL8);for(let mt=0;mt<6;mt++)i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+mt,0,$e,B.width,B.height,0,jt,Ve,null)}}else ne(B.depthTexture,0);const Ae=Le.__webglTexture,pt=K(B),Je=Te?i.TEXTURE_CUBE_MAP_POSITIVE_X+oe:i.TEXTURE_2D,yt=B.depthTexture.format===xu?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;if(B.depthTexture.format===pl)Et(B)?h.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,yt,Je,Ae,0,pt):i.framebufferTexture2D(i.FRAMEBUFFER,yt,Je,Ae,0);else if(B.depthTexture.format===xu)Et(B)?h.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,yt,Je,Ae,0,pt):i.framebufferTexture2D(i.FRAMEBUFFER,yt,Je,Ae,0);else throw new Error("Unknown depthTexture format")}function sn($){const B=n.get($),oe=$.isWebGLCubeRenderTarget===!0;if(B.__boundDepthTexture!==$.depthTexture){const Te=$.depthTexture;if(B.__depthDisposeCallback&&B.__depthDisposeCallback(),Te){const Le=()=>{delete B.__boundDepthTexture,delete B.__depthDisposeCallback,Te.removeEventListener("dispose",Le)};Te.addEventListener("dispose",Le),B.__depthDisposeCallback=Le}B.__boundDepthTexture=Te}if($.depthTexture&&!B.__autoAllocateDepthBuffer)if(oe)for(let Te=0;Te<6;Te++)ft(B.__webglFramebuffer[Te],$,Te);else{const Te=$.texture.mipmaps;Te&&Te.length>0?ft(B.__webglFramebuffer[0],$,0):ft(B.__webglFramebuffer,$,0)}else if(oe){B.__webglDepthbuffer=[];for(let Te=0;Te<6;Te++)if(t.bindFramebuffer(i.FRAMEBUFFER,B.__webglFramebuffer[Te]),B.__webglDepthbuffer[Te]===void 0)B.__webglDepthbuffer[Te]=i.createRenderbuffer(),nt(B.__webglDepthbuffer[Te],$,!1);else{const Le=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ae=B.__webglDepthbuffer[Te];i.bindRenderbuffer(i.RENDERBUFFER,Ae),i.framebufferRenderbuffer(i.FRAMEBUFFER,Le,i.RENDERBUFFER,Ae)}}else{const Te=$.texture.mipmaps;if(Te&&Te.length>0?t.bindFramebuffer(i.FRAMEBUFFER,B.__webglFramebuffer[0]):t.bindFramebuffer(i.FRAMEBUFFER,B.__webglFramebuffer),B.__webglDepthbuffer===void 0)B.__webglDepthbuffer=i.createRenderbuffer(),nt(B.__webglDepthbuffer,$,!1);else{const Le=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ae=B.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Ae),i.framebufferRenderbuffer(i.FRAMEBUFFER,Le,i.RENDERBUFFER,Ae)}}t.bindFramebuffer(i.FRAMEBUFFER,null)}function pn($,B,oe){const Te=n.get($);B!==void 0&&Fe(Te.__webglFramebuffer,$,$.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),oe!==void 0&&sn($)}function Ot($){const B=$.texture,oe=n.get($),Te=n.get(B);$.addEventListener("dispose",z);const Le=$.textures,Ae=$.isWebGLCubeRenderTarget===!0,pt=Le.length>1;if(pt||(Te.__webglTexture===void 0&&(Te.__webglTexture=i.createTexture()),Te.__version=B.version,u.memory.textures++),Ae){oe.__webglFramebuffer=[];for(let Je=0;Je<6;Je++)if(B.mipmaps&&B.mipmaps.length>0){oe.__webglFramebuffer[Je]=[];for(let yt=0;yt<B.mipmaps.length;yt++)oe.__webglFramebuffer[Je][yt]=i.createFramebuffer()}else oe.__webglFramebuffer[Je]=i.createFramebuffer()}else{if(B.mipmaps&&B.mipmaps.length>0){oe.__webglFramebuffer=[];for(let Je=0;Je<B.mipmaps.length;Je++)oe.__webglFramebuffer[Je]=i.createFramebuffer()}else oe.__webglFramebuffer=i.createFramebuffer();if(pt)for(let Je=0,yt=Le.length;Je<yt;Je++){const jt=n.get(Le[Je]);jt.__webglTexture===void 0&&(jt.__webglTexture=i.createTexture(),u.memory.textures++)}if($.samples>0&&Et($)===!1){oe.__webglMultisampledFramebuffer=i.createFramebuffer(),oe.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,oe.__webglMultisampledFramebuffer);for(let Je=0;Je<Le.length;Je++){const yt=Le[Je];oe.__webglColorRenderbuffer[Je]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,oe.__webglColorRenderbuffer[Je]);const jt=a.convert(yt.format,yt.colorSpace),Ve=a.convert(yt.type),$e=R(yt.internalFormat,jt,Ve,yt.colorSpace,$.isXRRenderTarget===!0),mt=K($);i.renderbufferStorageMultisample(i.RENDERBUFFER,mt,$e,$.width,$.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Je,i.RENDERBUFFER,oe.__webglColorRenderbuffer[Je])}i.bindRenderbuffer(i.RENDERBUFFER,null),$.depthBuffer&&(oe.__webglDepthRenderbuffer=i.createRenderbuffer(),nt(oe.__webglDepthRenderbuffer,$,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Ae){t.bindTexture(i.TEXTURE_CUBE_MAP,Te.__webglTexture),ce(i.TEXTURE_CUBE_MAP,B);for(let Je=0;Je<6;Je++)if(B.mipmaps&&B.mipmaps.length>0)for(let yt=0;yt<B.mipmaps.length;yt++)Fe(oe.__webglFramebuffer[Je][yt],$,B,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Je,yt);else Fe(oe.__webglFramebuffer[Je],$,B,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Je,0);T(B)&&N(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(pt){for(let Je=0,yt=Le.length;Je<yt;Je++){const jt=Le[Je],Ve=n.get(jt);let $e=i.TEXTURE_2D;($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&($e=$.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture($e,Ve.__webglTexture),ce($e,jt),Fe(oe.__webglFramebuffer,$,jt,i.COLOR_ATTACHMENT0+Je,$e,0),T(jt)&&N($e)}t.unbindTexture()}else{let Je=i.TEXTURE_2D;if(($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(Je=$.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(Je,Te.__webglTexture),ce(Je,B),B.mipmaps&&B.mipmaps.length>0)for(let yt=0;yt<B.mipmaps.length;yt++)Fe(oe.__webglFramebuffer[yt],$,B,i.COLOR_ATTACHMENT0,Je,yt);else Fe(oe.__webglFramebuffer,$,B,i.COLOR_ATTACHMENT0,Je,0);T(B)&&N(Je),t.unbindTexture()}$.depthBuffer&&sn($)}function je($){const B=$.textures;for(let oe=0,Te=B.length;oe<Te;oe++){const Le=B[oe];if(T(Le)){const Ae=j($),pt=n.get(Le).__webglTexture;t.bindTexture(Ae,pt),N(Ae),t.unbindTexture()}}}const Ge=[],Oe=[];function tt($){if($.samples>0){if(Et($)===!1){const B=$.textures,oe=$.width,Te=$.height;let Le=i.COLOR_BUFFER_BIT;const Ae=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,pt=n.get($),Je=B.length>1;if(Je)for(let jt=0;jt<B.length;jt++)t.bindFramebuffer(i.FRAMEBUFFER,pt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+jt,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,pt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+jt,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,pt.__webglMultisampledFramebuffer);const yt=$.texture.mipmaps;yt&&yt.length>0?t.bindFramebuffer(i.DRAW_FRAMEBUFFER,pt.__webglFramebuffer[0]):t.bindFramebuffer(i.DRAW_FRAMEBUFFER,pt.__webglFramebuffer);for(let jt=0;jt<B.length;jt++){if($.resolveDepthBuffer&&($.depthBuffer&&(Le|=i.DEPTH_BUFFER_BIT),$.stencilBuffer&&$.resolveStencilBuffer&&(Le|=i.STENCIL_BUFFER_BIT)),Je){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,pt.__webglColorRenderbuffer[jt]);const Ve=n.get(B[jt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Ve,0)}i.blitFramebuffer(0,0,oe,Te,0,0,oe,Te,Le,i.NEAREST),p===!0&&(Ge.length=0,Oe.length=0,Ge.push(i.COLOR_ATTACHMENT0+jt),$.depthBuffer&&$.resolveDepthBuffer===!1&&(Ge.push(Ae),Oe.push(Ae),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,Oe)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Ge))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Je)for(let jt=0;jt<B.length;jt++){t.bindFramebuffer(i.FRAMEBUFFER,pt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+jt,i.RENDERBUFFER,pt.__webglColorRenderbuffer[jt]);const Ve=n.get(B[jt]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,pt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+jt,i.TEXTURE_2D,Ve,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,pt.__webglMultisampledFramebuffer)}else if($.depthBuffer&&$.resolveDepthBuffer===!1&&p){const B=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[B])}}}function K($){return Math.min(s.maxSamples,$.samples)}function Et($){const B=n.get($);return $.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&B.__useRenderToTexture!==!1}function at($){const B=u.render.frame;v.get($)!==B&&(v.set($,B),$.update())}function Tt($,B){const oe=$.colorSpace,Te=$.format,Le=$.type;return $.isCompressedTexture===!0||$.isVideoTexture===!0||oe!==_u&&oe!==rc&&(Tn.getTransfer(oe)===Hn?(Te!==_s||Le!==xr)&&ut("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):Ct("WebGLTextures: Unsupported texture color space:",oe)),B}function Ye($){return typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement?(m.width=$.naturalWidth||$.width,m.height=$.naturalHeight||$.height):typeof VideoFrame<"u"&&$ instanceof VideoFrame?(m.width=$.displayWidth,m.height=$.displayHeight):(m.width=$.width,m.height=$.height),m}this.allocateTextureUnit=Q,this.resetTextureUnits=J,this.setTexture2D=ne,this.setTexture2DArray=X,this.setTexture3D=Z,this.setTextureCube=re,this.rebindTextures=pn,this.setupRenderTarget=Ot,this.updateRenderTargetMipmap=je,this.updateMultisampleRenderTarget=tt,this.setupDepthRenderbuffer=sn,this.setupFrameBufferTexture=Fe,this.useMultisampledRTT=Et,this.isReversedDepthBuffer=function(){return t.buffers.depth.getReversed()}}function Tk(i,e){function t(n,s=rc){let a;const u=Tn.getTransfer(s);if(n===xr)return i.UNSIGNED_BYTE;if(n===ly)return i.UNSIGNED_SHORT_4_4_4_4;if(n===cy)return i.UNSIGNED_SHORT_5_5_5_1;if(n===Ww)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===Xw)return i.UNSIGNED_INT_10F_11F_11F_REV;if(n===Gw)return i.BYTE;if(n===qw)return i.SHORT;if(n===Kf)return i.UNSIGNED_SHORT;if(n===oy)return i.INT;if(n===Ga)return i.UNSIGNED_INT;if(n===ys)return i.FLOAT;if(n===Mo)return i.HALF_FLOAT;if(n===$w)return i.ALPHA;if(n===Yw)return i.RGB;if(n===_s)return i.RGBA;if(n===pl)return i.DEPTH_COMPONENT;if(n===xu)return i.DEPTH_STENCIL;if(n===uy)return i.RED;if(n===Kg)return i.RED_INTEGER;if(n===Xd)return i.RG;if(n===dy)return i.RG_INTEGER;if(n===hy)return i.RGBA_INTEGER;if(n===dg||n===hg||n===fg||n===pg)if(u===Hn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(n===dg)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===hg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===fg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===pg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(n===dg)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===hg)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===fg)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===pg)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===ob||n===lb||n===cb||n===ub)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(n===ob)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===lb)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===cb)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===ub)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===db||n===hb||n===fb||n===pb||n===mb||n===gb||n===xb)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(n===db||n===hb)return u===Hn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===fb)return u===Hn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC;if(n===pb)return a.COMPRESSED_R11_EAC;if(n===mb)return a.COMPRESSED_SIGNED_R11_EAC;if(n===gb)return a.COMPRESSED_RG11_EAC;if(n===xb)return a.COMPRESSED_SIGNED_RG11_EAC}else return null;if(n===vb||n===bb||n===yb||n===_b||n===wb||n===Sb||n===Mb||n===Eb||n===Nb||n===Tb||n===Ab||n===kb||n===Cb||n===Rb)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(n===vb)return u===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===bb)return u===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===yb)return u===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===_b)return u===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===wb)return u===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Sb)return u===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Mb)return u===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Eb)return u===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Nb)return u===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Tb)return u===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Ab)return u===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===kb)return u===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Cb)return u===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Rb)return u===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===jb||n===Db||n===Ib)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(n===jb)return u===Hn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Db)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Ib)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===Ob||n===Lb||n===Ub||n===Pb)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(n===Ob)return a.COMPRESSED_RED_RGTC1_EXT;if(n===Lb)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Ub)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Pb)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Zf?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const Az=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,kz=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Cz{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const n=new rS(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new Xr({vertexShader:Az,fragmentShader:kz,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new ns(new up(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Rz extends gl{constructor(e,t){super();const n=this;let s=null,a=1,u=null,h="local-floor",p=1,m=null,v=null,b=null,y=null,w=null,M=null;const k=typeof XRWebGLBinding<"u",T=new Cz,N={},j=t.getContextAttributes();let R=null,D=null;const I=[],P=[],z=new ze;let G=null;const U=new bs;U.viewport=new Qn;const L=new bs;L.viewport=new Qn;const W=[U,L],J=new xk;let Q=null,ue=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(me){let Ce=I[me];return Ce===void 0&&(Ce=new Fv,I[me]=Ce),Ce.getTargetRaySpace()},this.getControllerGrip=function(me){let Ce=I[me];return Ce===void 0&&(Ce=new Fv,I[me]=Ce),Ce.getGripSpace()},this.getHand=function(me){let Ce=I[me];return Ce===void 0&&(Ce=new Fv,I[me]=Ce),Ce.getHandSpace()};function ne(me){const Ce=P.indexOf(me.inputSource);if(Ce===-1)return;const Fe=I[Ce];Fe!==void 0&&(Fe.update(me.inputSource,me.frame,m||u),Fe.dispatchEvent({type:me.type,data:me.inputSource}))}function X(){s.removeEventListener("select",ne),s.removeEventListener("selectstart",ne),s.removeEventListener("selectend",ne),s.removeEventListener("squeeze",ne),s.removeEventListener("squeezestart",ne),s.removeEventListener("squeezeend",ne),s.removeEventListener("end",X),s.removeEventListener("inputsourceschange",Z);for(let me=0;me<I.length;me++){const Ce=P[me];Ce!==null&&(P[me]=null,I[me].disconnect(Ce))}Q=null,ue=null,T.reset();for(const me in N)delete N[me];e.setRenderTarget(R),w=null,y=null,b=null,s=null,D=null,rt.stop(),n.isPresenting=!1,e.setPixelRatio(G),e.setSize(z.width,z.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(me){a=me,n.isPresenting===!0&&ut("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(me){h=me,n.isPresenting===!0&&ut("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return m||u},this.setReferenceSpace=function(me){m=me},this.getBaseLayer=function(){return y!==null?y:w},this.getBinding=function(){return b===null&&k&&(b=new XRWebGLBinding(s,t)),b},this.getFrame=function(){return M},this.getSession=function(){return s},this.setSession=async function(me){if(s=me,s!==null){if(R=e.getRenderTarget(),s.addEventListener("select",ne),s.addEventListener("selectstart",ne),s.addEventListener("selectend",ne),s.addEventListener("squeeze",ne),s.addEventListener("squeezestart",ne),s.addEventListener("squeezeend",ne),s.addEventListener("end",X),s.addEventListener("inputsourceschange",Z),j.xrCompatible!==!0&&await t.makeXRCompatible(),G=e.getPixelRatio(),e.getSize(z),k&&"createProjectionLayer"in XRWebGLBinding.prototype){let Fe=null,nt=null,ft=null;j.depth&&(ft=j.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Fe=j.stencil?xu:pl,nt=j.stencil?Zf:Ga);const sn={colorFormat:t.RGBA8,depthFormat:ft,scaleFactor:a};b=this.getBinding(),y=b.createProjectionLayer(sn),s.updateRenderState({layers:[y]}),e.setPixelRatio(1),e.setSize(y.textureWidth,y.textureHeight,!1),D=new Wr(y.textureWidth,y.textureHeight,{format:_s,type:xr,depthTexture:new Yd(y.textureWidth,y.textureHeight,nt,void 0,void 0,void 0,void 0,void 0,void 0,Fe),stencilBuffer:j.stencil,colorSpace:e.outputColorSpace,samples:j.antialias?4:0,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}else{const Fe={antialias:j.antialias,alpha:!0,depth:j.depth,stencil:j.stencil,framebufferScaleFactor:a};w=new XRWebGLLayer(s,t,Fe),s.updateRenderState({baseLayer:w}),e.setPixelRatio(1),e.setSize(w.framebufferWidth,w.framebufferHeight,!1),D=new Wr(w.framebufferWidth,w.framebufferHeight,{format:_s,type:xr,colorSpace:e.outputColorSpace,stencilBuffer:j.stencil,resolveDepthBuffer:w.ignoreDepthValues===!1,resolveStencilBuffer:w.ignoreDepthValues===!1})}D.isXRRenderTarget=!0,this.setFoveation(p),m=null,u=await s.requestReferenceSpace(h),rt.setContext(s),rt.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return T.getDepthTexture()};function Z(me){for(let Ce=0;Ce<me.removed.length;Ce++){const Fe=me.removed[Ce],nt=P.indexOf(Fe);nt>=0&&(P[nt]=null,I[nt].disconnect(Fe))}for(let Ce=0;Ce<me.added.length;Ce++){const Fe=me.added[Ce];let nt=P.indexOf(Fe);if(nt===-1){for(let sn=0;sn<I.length;sn++)if(sn>=P.length){P.push(Fe),nt=sn;break}else if(P[sn]===null){P[sn]=Fe,nt=sn;break}if(nt===-1)break}const ft=I[nt];ft&&ft.connect(Fe)}}const re=new Y,pe=new Y;function we(me,Ce,Fe){re.setFromMatrixPosition(Ce.matrixWorld),pe.setFromMatrixPosition(Fe.matrixWorld);const nt=re.distanceTo(pe),ft=Ce.projectionMatrix.elements,sn=Fe.projectionMatrix.elements,pn=ft[14]/(ft[10]-1),Ot=ft[14]/(ft[10]+1),je=(ft[9]+1)/ft[5],Ge=(ft[9]-1)/ft[5],Oe=(ft[8]-1)/ft[0],tt=(sn[8]+1)/sn[0],K=pn*Oe,Et=pn*tt,at=nt/(-Oe+tt),Tt=at*-Oe;if(Ce.matrixWorld.decompose(me.position,me.quaternion,me.scale),me.translateX(Tt),me.translateZ(at),me.matrixWorld.compose(me.position,me.quaternion,me.scale),me.matrixWorldInverse.copy(me.matrixWorld).invert(),ft[10]===-1)me.projectionMatrix.copy(Ce.projectionMatrix),me.projectionMatrixInverse.copy(Ce.projectionMatrixInverse);else{const Ye=pn+at,$=Ot+at,B=K-Tt,oe=Et+(nt-Tt),Te=je*Ot/$*Ye,Le=Ge*Ot/$*Ye;me.projectionMatrix.makePerspective(B,oe,Te,Le,Ye,$),me.projectionMatrixInverse.copy(me.projectionMatrix).invert()}}function q(me,Ce){Ce===null?me.matrixWorld.copy(me.matrix):me.matrixWorld.multiplyMatrices(Ce.matrixWorld,me.matrix),me.matrixWorldInverse.copy(me.matrixWorld).invert()}this.updateCamera=function(me){if(s===null)return;let Ce=me.near,Fe=me.far;T.texture!==null&&(T.depthNear>0&&(Ce=T.depthNear),T.depthFar>0&&(Fe=T.depthFar)),J.near=L.near=U.near=Ce,J.far=L.far=U.far=Fe,(Q!==J.near||ue!==J.far)&&(s.updateRenderState({depthNear:J.near,depthFar:J.far}),Q=J.near,ue=J.far),J.layers.mask=me.layers.mask|6,U.layers.mask=J.layers.mask&3,L.layers.mask=J.layers.mask&5;const nt=me.parent,ft=J.cameras;q(J,nt);for(let sn=0;sn<ft.length;sn++)q(ft[sn],nt);ft.length===2?we(J,U,L):J.projectionMatrix.copy(U.projectionMatrix),ce(me,J,nt)};function ce(me,Ce,Fe){Fe===null?me.matrix.copy(Ce.matrixWorld):(me.matrix.copy(Fe.matrixWorld),me.matrix.invert(),me.matrix.multiply(Ce.matrixWorld)),me.matrix.decompose(me.position,me.quaternion,me.scale),me.updateMatrixWorld(!0),me.projectionMatrix.copy(Ce.projectionMatrix),me.projectionMatrixInverse.copy(Ce.projectionMatrixInverse),me.isPerspectiveCamera&&(me.fov=ep*2*Math.atan(1/me.projectionMatrix.elements[5]),me.zoom=1)}this.getCamera=function(){return J},this.getFoveation=function(){if(!(y===null&&w===null))return p},this.setFoveation=function(me){p=me,y!==null&&(y.fixedFoveation=me),w!==null&&w.fixedFoveation!==void 0&&(w.fixedFoveation=me)},this.hasDepthSensing=function(){return T.texture!==null},this.getDepthSensingMesh=function(){return T.getMesh(J)},this.getCameraTexture=function(me){return N[me]};let Ee=null;function Pe(me,Ce){if(v=Ce.getViewerPose(m||u),M=Ce,v!==null){const Fe=v.views;w!==null&&(e.setRenderTargetFramebuffer(D,w.framebuffer),e.setRenderTarget(D));let nt=!1;Fe.length!==J.cameras.length&&(J.cameras.length=0,nt=!0);for(let Ot=0;Ot<Fe.length;Ot++){const je=Fe[Ot];let Ge=null;if(w!==null)Ge=w.getViewport(je);else{const tt=b.getViewSubImage(y,je);Ge=tt.viewport,Ot===0&&(e.setRenderTargetTextures(D,tt.colorTexture,tt.depthStencilTexture),e.setRenderTarget(D))}let Oe=W[Ot];Oe===void 0&&(Oe=new bs,Oe.layers.enable(Ot),Oe.viewport=new Qn,W[Ot]=Oe),Oe.matrix.fromArray(je.transform.matrix),Oe.matrix.decompose(Oe.position,Oe.quaternion,Oe.scale),Oe.projectionMatrix.fromArray(je.projectionMatrix),Oe.projectionMatrixInverse.copy(Oe.projectionMatrix).invert(),Oe.viewport.set(Ge.x,Ge.y,Ge.width,Ge.height),Ot===0&&(J.matrix.copy(Oe.matrix),J.matrix.decompose(J.position,J.quaternion,J.scale)),nt===!0&&J.cameras.push(Oe)}const ft=s.enabledFeatures;if(ft&&ft.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&k){b=n.getBinding();const Ot=b.getDepthInformation(Fe[0]);Ot&&Ot.isValid&&Ot.texture&&T.init(Ot,s.renderState)}if(ft&&ft.includes("camera-access")&&k){e.state.unbindTexture(),b=n.getBinding();for(let Ot=0;Ot<Fe.length;Ot++){const je=Fe[Ot].camera;if(je){let Ge=N[je];Ge||(Ge=new rS,N[je]=Ge);const Oe=b.getCameraImage(je);Ge.sourceTexture=Oe}}}}for(let Fe=0;Fe<I.length;Fe++){const nt=P[Fe],ft=I[Fe];nt!==null&&ft!==void 0&&ft.update(nt,Ce,m||u)}Ee&&Ee(me,Ce),Ce.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Ce}),M=null}const rt=new wk;rt.setAnimationLoop(Pe),this.setAnimationLoop=function(me){Ee=me},this.dispose=function(){}}}const kd=new da,jz=new Xt;function Dz(i,e){function t(T,N){T.matrixAutoUpdate===!0&&T.updateMatrix(),N.value.copy(T.matrix)}function n(T,N){N.color.getRGB(T.fogColor.value,EA(i)),N.isFog?(T.fogNear.value=N.near,T.fogFar.value=N.far):N.isFogExp2&&(T.fogDensity.value=N.density)}function s(T,N,j,R,D){N.isMeshBasicMaterial||N.isMeshLambertMaterial?a(T,N):N.isMeshToonMaterial?(a(T,N),b(T,N)):N.isMeshPhongMaterial?(a(T,N),v(T,N)):N.isMeshStandardMaterial?(a(T,N),y(T,N),N.isMeshPhysicalMaterial&&w(T,N,D)):N.isMeshMatcapMaterial?(a(T,N),M(T,N)):N.isMeshDepthMaterial?a(T,N):N.isMeshDistanceMaterial?(a(T,N),k(T,N)):N.isMeshNormalMaterial?a(T,N):N.isLineBasicMaterial?(u(T,N),N.isLineDashedMaterial&&h(T,N)):N.isPointsMaterial?p(T,N,j,R):N.isSpriteMaterial?m(T,N):N.isShadowMaterial?(T.color.value.copy(N.color),T.opacity.value=N.opacity):N.isShaderMaterial&&(N.uniformsNeedUpdate=!1)}function a(T,N){T.opacity.value=N.opacity,N.color&&T.diffuse.value.copy(N.color),N.emissive&&T.emissive.value.copy(N.emissive).multiplyScalar(N.emissiveIntensity),N.map&&(T.map.value=N.map,t(N.map,T.mapTransform)),N.alphaMap&&(T.alphaMap.value=N.alphaMap,t(N.alphaMap,T.alphaMapTransform)),N.bumpMap&&(T.bumpMap.value=N.bumpMap,t(N.bumpMap,T.bumpMapTransform),T.bumpScale.value=N.bumpScale,N.side===br&&(T.bumpScale.value*=-1)),N.normalMap&&(T.normalMap.value=N.normalMap,t(N.normalMap,T.normalMapTransform),T.normalScale.value.copy(N.normalScale),N.side===br&&T.normalScale.value.negate()),N.displacementMap&&(T.displacementMap.value=N.displacementMap,t(N.displacementMap,T.displacementMapTransform),T.displacementScale.value=N.displacementScale,T.displacementBias.value=N.displacementBias),N.emissiveMap&&(T.emissiveMap.value=N.emissiveMap,t(N.emissiveMap,T.emissiveMapTransform)),N.specularMap&&(T.specularMap.value=N.specularMap,t(N.specularMap,T.specularMapTransform)),N.alphaTest>0&&(T.alphaTest.value=N.alphaTest);const j=e.get(N),R=j.envMap,D=j.envMapRotation;R&&(T.envMap.value=R,kd.copy(D),kd.x*=-1,kd.y*=-1,kd.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1&&(kd.y*=-1,kd.z*=-1),T.envMapRotation.value.setFromMatrix4(jz.makeRotationFromEuler(kd)),T.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,T.reflectivity.value=N.reflectivity,T.ior.value=N.ior,T.refractionRatio.value=N.refractionRatio),N.lightMap&&(T.lightMap.value=N.lightMap,T.lightMapIntensity.value=N.lightMapIntensity,t(N.lightMap,T.lightMapTransform)),N.aoMap&&(T.aoMap.value=N.aoMap,T.aoMapIntensity.value=N.aoMapIntensity,t(N.aoMap,T.aoMapTransform))}function u(T,N){T.diffuse.value.copy(N.color),T.opacity.value=N.opacity,N.map&&(T.map.value=N.map,t(N.map,T.mapTransform))}function h(T,N){T.dashSize.value=N.dashSize,T.totalSize.value=N.dashSize+N.gapSize,T.scale.value=N.scale}function p(T,N,j,R){T.diffuse.value.copy(N.color),T.opacity.value=N.opacity,T.size.value=N.size*j,T.scale.value=R*.5,N.map&&(T.map.value=N.map,t(N.map,T.uvTransform)),N.alphaMap&&(T.alphaMap.value=N.alphaMap,t(N.alphaMap,T.alphaMapTransform)),N.alphaTest>0&&(T.alphaTest.value=N.alphaTest)}function m(T,N){T.diffuse.value.copy(N.color),T.opacity.value=N.opacity,T.rotation.value=N.rotation,N.map&&(T.map.value=N.map,t(N.map,T.mapTransform)),N.alphaMap&&(T.alphaMap.value=N.alphaMap,t(N.alphaMap,T.alphaMapTransform)),N.alphaTest>0&&(T.alphaTest.value=N.alphaTest)}function v(T,N){T.specular.value.copy(N.specular),T.shininess.value=Math.max(N.shininess,1e-4)}function b(T,N){N.gradientMap&&(T.gradientMap.value=N.gradientMap)}function y(T,N){T.metalness.value=N.metalness,N.metalnessMap&&(T.metalnessMap.value=N.metalnessMap,t(N.metalnessMap,T.metalnessMapTransform)),T.roughness.value=N.roughness,N.roughnessMap&&(T.roughnessMap.value=N.roughnessMap,t(N.roughnessMap,T.roughnessMapTransform)),N.envMap&&(T.envMapIntensity.value=N.envMapIntensity)}function w(T,N,j){T.ior.value=N.ior,N.sheen>0&&(T.sheenColor.value.copy(N.sheenColor).multiplyScalar(N.sheen),T.sheenRoughness.value=N.sheenRoughness,N.sheenColorMap&&(T.sheenColorMap.value=N.sheenColorMap,t(N.sheenColorMap,T.sheenColorMapTransform)),N.sheenRoughnessMap&&(T.sheenRoughnessMap.value=N.sheenRoughnessMap,t(N.sheenRoughnessMap,T.sheenRoughnessMapTransform))),N.clearcoat>0&&(T.clearcoat.value=N.clearcoat,T.clearcoatRoughness.value=N.clearcoatRoughness,N.clearcoatMap&&(T.clearcoatMap.value=N.clearcoatMap,t(N.clearcoatMap,T.clearcoatMapTransform)),N.clearcoatRoughnessMap&&(T.clearcoatRoughnessMap.value=N.clearcoatRoughnessMap,t(N.clearcoatRoughnessMap,T.clearcoatRoughnessMapTransform)),N.clearcoatNormalMap&&(T.clearcoatNormalMap.value=N.clearcoatNormalMap,t(N.clearcoatNormalMap,T.clearcoatNormalMapTransform),T.clearcoatNormalScale.value.copy(N.clearcoatNormalScale),N.side===br&&T.clearcoatNormalScale.value.negate())),N.dispersion>0&&(T.dispersion.value=N.dispersion),N.iridescence>0&&(T.iridescence.value=N.iridescence,T.iridescenceIOR.value=N.iridescenceIOR,T.iridescenceThicknessMinimum.value=N.iridescenceThicknessRange[0],T.iridescenceThicknessMaximum.value=N.iridescenceThicknessRange[1],N.iridescenceMap&&(T.iridescenceMap.value=N.iridescenceMap,t(N.iridescenceMap,T.iridescenceMapTransform)),N.iridescenceThicknessMap&&(T.iridescenceThicknessMap.value=N.iridescenceThicknessMap,t(N.iridescenceThicknessMap,T.iridescenceThicknessMapTransform))),N.transmission>0&&(T.transmission.value=N.transmission,T.transmissionSamplerMap.value=j.texture,T.transmissionSamplerSize.value.set(j.width,j.height),N.transmissionMap&&(T.transmissionMap.value=N.transmissionMap,t(N.transmissionMap,T.transmissionMapTransform)),T.thickness.value=N.thickness,N.thicknessMap&&(T.thicknessMap.value=N.thicknessMap,t(N.thicknessMap,T.thicknessMapTransform)),T.attenuationDistance.value=N.attenuationDistance,T.attenuationColor.value.copy(N.attenuationColor)),N.anisotropy>0&&(T.anisotropyVector.value.set(N.anisotropy*Math.cos(N.anisotropyRotation),N.anisotropy*Math.sin(N.anisotropyRotation)),N.anisotropyMap&&(T.anisotropyMap.value=N.anisotropyMap,t(N.anisotropyMap,T.anisotropyMapTransform))),T.specularIntensity.value=N.specularIntensity,T.specularColor.value.copy(N.specularColor),N.specularColorMap&&(T.specularColorMap.value=N.specularColorMap,t(N.specularColorMap,T.specularColorMapTransform)),N.specularIntensityMap&&(T.specularIntensityMap.value=N.specularIntensityMap,t(N.specularIntensityMap,T.specularIntensityMapTransform))}function M(T,N){N.matcap&&(T.matcap.value=N.matcap)}function k(T,N){const j=e.get(N).light;T.referencePosition.value.setFromMatrixPosition(j.matrixWorld),T.nearDistance.value=j.shadow.camera.near,T.farDistance.value=j.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:s}}function Iz(i,e,t,n){let s={},a={},u=[];const h=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function p(j,R){const D=R.program;n.uniformBlockBinding(j,D)}function m(j,R){let D=s[j.id];D===void 0&&(M(j),D=v(j),s[j.id]=D,j.addEventListener("dispose",T));const I=R.program;n.updateUBOMapping(j,I);const P=e.render.frame;a[j.id]!==P&&(y(j),a[j.id]=P)}function v(j){const R=b();j.__bindingPointIndex=R;const D=i.createBuffer(),I=j.__size,P=j.usage;return i.bindBuffer(i.UNIFORM_BUFFER,D),i.bufferData(i.UNIFORM_BUFFER,I,P),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,R,D),D}function b(){for(let j=0;j<h;j++)if(u.indexOf(j)===-1)return u.push(j),j;return Ct("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(j){const R=s[j.id],D=j.uniforms,I=j.__cache;i.bindBuffer(i.UNIFORM_BUFFER,R);for(let P=0,z=D.length;P<z;P++){const G=Array.isArray(D[P])?D[P]:[D[P]];for(let U=0,L=G.length;U<L;U++){const W=G[U];if(w(W,P,U,I)===!0){const J=W.__offset,Q=Array.isArray(W.value)?W.value:[W.value];let ue=0;for(let ne=0;ne<Q.length;ne++){const X=Q[ne],Z=k(X);typeof X=="number"||typeof X=="boolean"?(W.__data[0]=X,i.bufferSubData(i.UNIFORM_BUFFER,J+ue,W.__data)):X.isMatrix3?(W.__data[0]=X.elements[0],W.__data[1]=X.elements[1],W.__data[2]=X.elements[2],W.__data[3]=0,W.__data[4]=X.elements[3],W.__data[5]=X.elements[4],W.__data[6]=X.elements[5],W.__data[7]=0,W.__data[8]=X.elements[6],W.__data[9]=X.elements[7],W.__data[10]=X.elements[8],W.__data[11]=0):(X.toArray(W.__data,ue),ue+=Z.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,J,W.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function w(j,R,D,I){const P=j.value,z=R+"_"+D;if(I[z]===void 0)return typeof P=="number"||typeof P=="boolean"?I[z]=P:I[z]=P.clone(),!0;{const G=I[z];if(typeof P=="number"||typeof P=="boolean"){if(G!==P)return I[z]=P,!0}else if(G.equals(P)===!1)return G.copy(P),!0}return!1}function M(j){const R=j.uniforms;let D=0;const I=16;for(let z=0,G=R.length;z<G;z++){const U=Array.isArray(R[z])?R[z]:[R[z]];for(let L=0,W=U.length;L<W;L++){const J=U[L],Q=Array.isArray(J.value)?J.value:[J.value];for(let ue=0,ne=Q.length;ue<ne;ue++){const X=Q[ue],Z=k(X),re=D%I,pe=re%Z.boundary,we=re+pe;D+=pe,we!==0&&I-we<Z.storage&&(D+=I-we),J.__data=new Float32Array(Z.storage/Float32Array.BYTES_PER_ELEMENT),J.__offset=D,D+=Z.storage}}}const P=D%I;return P>0&&(D+=I-P),j.__size=D,j.__cache={},this}function k(j){const R={boundary:0,storage:0};return typeof j=="number"||typeof j=="boolean"?(R.boundary=4,R.storage=4):j.isVector2?(R.boundary=8,R.storage=8):j.isVector3||j.isColor?(R.boundary=16,R.storage=12):j.isVector4?(R.boundary=16,R.storage=16):j.isMatrix3?(R.boundary=48,R.storage=48):j.isMatrix4?(R.boundary=64,R.storage=64):j.isTexture?ut("WebGLRenderer: Texture samplers can not be part of an uniforms group."):ut("WebGLRenderer: Unsupported uniform value type.",j),R}function T(j){const R=j.target;R.removeEventListener("dispose",T);const D=u.indexOf(R.__bindingPointIndex);u.splice(D,1),i.deleteBuffer(s[R.id]),delete s[R.id],delete a[R.id]}function N(){for(const j in s)i.deleteBuffer(s[j]);u=[],s={},a={}}return{bind:p,update:m,dispose:N}}const Oz=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let ol=null;function Lz(){return ol===null&&(ol=new Va(Oz,16,16,Xd,Mo),ol.name="DFG_LUT",ol.minFilter=ei,ol.magFilter=ei,ol.wrapS=Gr,ol.wrapT=Gr,ol.generateMipmaps=!1,ol.needsUpdate=!0),ol}class Ak{constructor(e={}){const{canvas:t=wA(),context:n=null,depth:s=!0,stencil:a=!1,alpha:u=!1,antialias:h=!1,premultipliedAlpha:p=!0,preserveDrawingBuffer:m=!1,powerPreference:v="default",failIfMajorPerformanceCaveat:b=!1,reversedDepthBuffer:y=!1,outputBufferType:w=xr}=e;this.isWebGLRenderer=!0;let M;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");M=n.getContextAttributes().alpha}else M=u;const k=w,T=new Set([hy,dy,Kg]),N=new Set([xr,Ga,Kf,Zf,ly,cy]),j=new Uint32Array(4),R=new Int32Array(4);let D=null,I=null;const P=[],z=[];let G=null;this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Fa,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const U=this;let L=!1;this._outputColorSpace=Js;let W=0,J=0,Q=null,ue=-1,ne=null;const X=new Qn,Z=new Qn;let re=null;const pe=new vt(0);let we=0,q=t.width,ce=t.height,Ee=1,Pe=null,rt=null;const me=new Qn(0,0,q,ce),Ce=new Qn(0,0,q,ce);let Fe=!1;const nt=new cp;let ft=!1,sn=!1;const pn=new Xt,Ot=new Y,je=new Qn,Ge={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Oe=!1;function tt(){return Q===null?Ee:1}let K=n;function Et(V,le){return t.getContext(V,le)}try{const V={alpha:!0,depth:s,stencil:a,antialias:h,premultipliedAlpha:p,preserveDrawingBuffer:m,powerPreference:v,failIfMajorPerformanceCaveat:b};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${sy}`),t.addEventListener("webglcontextlost",Gt,!1),t.addEventListener("webglcontextrestored",yn,!1),t.addEventListener("webglcontextcreationerror",Sn,!1),K===null){const le="webgl2";if(K=Et(le,V),K===null)throw Et(le)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(V){throw Ct("WebGLRenderer: "+V.message),V}let at,Tt,Ye,$,B,oe,Te,Le,Ae,pt,Je,yt,jt,Ve,$e,mt,ht,st,en,ae,ot,Xe,ct,He;function Ie(){at=new UU(K),at.init(),Xe=new Tk(K,at),Tt=new AU(K,at,e,Xe),Ye=new Nz(K,at),Tt.reversedDepthBuffer&&y&&Ye.buffers.depth.setReversed(!0),$=new BU(K),B=new dz,oe=new Tz(K,at,Ye,B,Tt,Xe,$),Te=new CU(U),Le=new LU(U),Ae=new G2(K),ct=new NU(K,Ae),pt=new PU(K,Ae,$,ct),Je=new VU(K,pt,Ae,$),en=new FU(K,Tt,oe),mt=new kU(B),yt=new uz(U,Te,Le,at,Tt,ct,mt),jt=new Dz(U,B),Ve=new fz,$e=new bz(at),st=new EU(U,Te,Le,Ye,Je,M,p),ht=new Mz(U,Je,Tt),He=new Iz(K,$,Tt,Ye),ae=new TU(K,at,$),ot=new zU(K,at,$),$.programs=yt.programs,U.capabilities=Tt,U.extensions=at,U.properties=B,U.renderLists=Ve,U.shadowMap=ht,U.state=Ye,U.info=$}Ie(),k!==xr&&(G=new GU(k,t.width,t.height,s,a));const Qe=new Rz(U,K);this.xr=Qe,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){const V=at.get("WEBGL_lose_context");V&&V.loseContext()},this.forceContextRestore=function(){const V=at.get("WEBGL_lose_context");V&&V.restoreContext()},this.getPixelRatio=function(){return Ee},this.setPixelRatio=function(V){V!==void 0&&(Ee=V,this.setSize(q,ce,!1))},this.getSize=function(V){return V.set(q,ce)},this.setSize=function(V,le,_e=!0){if(Qe.isPresenting){ut("WebGLRenderer: Can't change size while VR device is presenting.");return}q=V,ce=le,t.width=Math.floor(V*Ee),t.height=Math.floor(le*Ee),_e===!0&&(t.style.width=V+"px",t.style.height=le+"px"),G!==null&&G.setSize(t.width,t.height),this.setViewport(0,0,V,le)},this.getDrawingBufferSize=function(V){return V.set(q*Ee,ce*Ee).floor()},this.setDrawingBufferSize=function(V,le,_e){q=V,ce=le,Ee=_e,t.width=Math.floor(V*_e),t.height=Math.floor(le*_e),this.setViewport(0,0,V,le)},this.setEffects=function(V){if(k===xr){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(V){for(let le=0;le<V.length;le++)if(V[le].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}G.setEffects(V||[])},this.getCurrentViewport=function(V){return V.copy(X)},this.getViewport=function(V){return V.copy(me)},this.setViewport=function(V,le,_e,ve){V.isVector4?me.set(V.x,V.y,V.z,V.w):me.set(V,le,_e,ve),Ye.viewport(X.copy(me).multiplyScalar(Ee).round())},this.getScissor=function(V){return V.copy(Ce)},this.setScissor=function(V,le,_e,ve){V.isVector4?Ce.set(V.x,V.y,V.z,V.w):Ce.set(V,le,_e,ve),Ye.scissor(Z.copy(Ce).multiplyScalar(Ee).round())},this.getScissorTest=function(){return Fe},this.setScissorTest=function(V){Ye.setScissorTest(Fe=V)},this.setOpaqueSort=function(V){Pe=V},this.setTransparentSort=function(V){rt=V},this.getClearColor=function(V){return V.copy(st.getClearColor())},this.setClearColor=function(){st.setClearColor(...arguments)},this.getClearAlpha=function(){return st.getClearAlpha()},this.setClearAlpha=function(){st.setClearAlpha(...arguments)},this.clear=function(V=!0,le=!0,_e=!0){let ve=0;if(V){let he=!1;if(Q!==null){const Ke=Q.texture.format;he=T.has(Ke)}if(he){const Ke=Q.texture.type,gt=N.has(Ke),We=st.getClearColor(),bt=st.getClearAlpha(),_t=We.r,Rt=We.g,St=We.b;gt?(j[0]=_t,j[1]=Rt,j[2]=St,j[3]=bt,K.clearBufferuiv(K.COLOR,0,j)):(R[0]=_t,R[1]=Rt,R[2]=St,R[3]=bt,K.clearBufferiv(K.COLOR,0,R))}else ve|=K.COLOR_BUFFER_BIT}le&&(ve|=K.DEPTH_BUFFER_BIT),_e&&(ve|=K.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),K.clear(ve)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Gt,!1),t.removeEventListener("webglcontextrestored",yn,!1),t.removeEventListener("webglcontextcreationerror",Sn,!1),st.dispose(),Ve.dispose(),$e.dispose(),B.dispose(),Te.dispose(),Le.dispose(),Je.dispose(),ct.dispose(),He.dispose(),yt.dispose(),Qe.dispose(),Qe.removeEventListener("sessionstart",Wa),Qe.removeEventListener("sessionend",bl),fs.stop()};function Gt(V){V.preventDefault(),Ug("WebGLRenderer: Context Lost."),L=!0}function yn(){Ug("WebGLRenderer: Context Restored."),L=!1;const V=$.autoReset,le=ht.enabled,_e=ht.autoUpdate,ve=ht.needsUpdate,he=ht.type;Ie(),$.autoReset=V,ht.enabled=le,ht.autoUpdate=_e,ht.needsUpdate=ve,ht.type=he}function Sn(V){Ct("WebGLRenderer: A WebGL context could not be created. Reason: ",V.statusMessage)}function is(V){const le=V.target;le.removeEventListener("dispose",is),Us(le)}function Us(V){No(V),B.remove(V)}function No(V){const le=B.get(V).programs;le!==void 0&&(le.forEach(function(_e){yt.releaseProgram(_e)}),V.isShaderMaterial&&yt.releaseShaderCache(V))}this.renderBufferDirect=function(V,le,_e,ve,he,Ke){le===null&&(le=Ge);const gt=he.isMesh&&he.matrixWorld.determinant()<0,We=Yr(V,le,_e,ve,he);Ye.setMaterial(ve,gt);let bt=_e.index,_t=1;if(ve.wireframe===!0){if(bt=pt.getWireframeAttribute(_e),bt===void 0)return;_t=2}const Rt=_e.drawRange,St=_e.attributes.position;let Ut=Rt.start*_t,An=(Rt.start+Rt.count)*_t;Ke!==null&&(Ut=Math.max(Ut,Ke.start*_t),An=Math.min(An,(Ke.start+Ke.count)*_t)),bt!==null?(Ut=Math.max(Ut,0),An=Math.min(An,bt.count)):St!=null&&(Ut=Math.max(Ut,0),An=Math.min(An,St.count));const Gn=An-Ut;if(Gn<0||Gn===1/0)return;ct.setup(he,ve,We,_e,bt);let Bn,$t=ae;if(bt!==null&&(Bn=Ae.get(bt),$t=ot,$t.setIndex(Bn)),he.isMesh)ve.wireframe===!0?(Ye.setLineWidth(ve.wireframeLinewidth*tt()),$t.setMode(K.LINES)):$t.setMode(K.TRIANGLES);else if(he.isLine){let lt=ve.linewidth;lt===void 0&&(lt=1),Ye.setLineWidth(lt*tt()),he.isLineSegments?$t.setMode(K.LINES):he.isLineLoop?$t.setMode(K.LINE_LOOP):$t.setMode(K.LINE_STRIP)}else he.isPoints?$t.setMode(K.POINTS):he.isSprite&&$t.setMode(K.TRIANGLES);if(he.isBatchedMesh)if(he._multiDrawInstances!==null)Qf("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),$t.renderMultiDrawInstances(he._multiDrawStarts,he._multiDrawCounts,he._multiDrawCount,he._multiDrawInstances);else if(at.get("WEBGL_multi_draw"))$t.renderMultiDraw(he._multiDrawStarts,he._multiDrawCounts,he._multiDrawCount);else{const lt=he._multiDrawStarts,Mn=he._multiDrawCounts,zt=he._multiDrawCount,ki=bt?Ae.get(bt).bytesPerElement:1,Kr=B.get(ve).currentProgram.getUniforms();for(let Zn=0;Zn<zt;Zn++)Kr.setValue(K,"_gl_DrawID",Zn),$t.render(lt[Zn]/ki,Mn[Zn])}else if(he.isInstancedMesh)$t.renderInstances(Ut,Gn,he.count);else if(_e.isInstancedBufferGeometry){const lt=_e._maxInstanceCount!==void 0?_e._maxInstanceCount:1/0,Mn=Math.min(_e.instanceCount,lt);$t.renderInstances(Ut,Gn,Mn)}else $t.render(Ut,Gn)};function To(V,le,_e){V.transparent===!0&&V.side===ll&&V.forceSinglePass===!1?(V.side=br,V.needsUpdate=!0,sr(V,le,_e),V.side=cc,V.needsUpdate=!0,sr(V,le,_e),V.side=ll):sr(V,le,_e)}this.compile=function(V,le,_e=null){_e===null&&(_e=V),I=$e.get(_e),I.init(le),z.push(I),_e.traverseVisible(function(he){he.isLight&&he.layers.test(le.layers)&&(I.pushLight(he),he.castShadow&&I.pushShadow(he))}),V!==_e&&V.traverseVisible(function(he){he.isLight&&he.layers.test(le.layers)&&(I.pushLight(he),he.castShadow&&I.pushShadow(he))}),I.setupLights();const ve=new Set;return V.traverse(function(he){if(!(he.isMesh||he.isPoints||he.isLine||he.isSprite))return;const Ke=he.material;if(Ke)if(Array.isArray(Ke))for(let gt=0;gt<Ke.length;gt++){const We=Ke[gt];To(We,_e,he),ve.add(We)}else To(Ke,_e,he),ve.add(Ke)}),I=z.pop(),ve},this.compileAsync=function(V,le,_e=null){const ve=this.compile(V,le,_e);return new Promise(he=>{function Ke(){if(ve.forEach(function(gt){B.get(gt).currentProgram.isReady()&&ve.delete(gt)}),ve.size===0){he(V);return}setTimeout(Ke,10)}at.get("KHR_parallel_shader_compile")!==null?Ke():setTimeout(Ke,10)})};let vl=null;function Ao(V){vl&&vl(V)}function Wa(){fs.stop()}function bl(){fs.start()}const fs=new wk;fs.setAnimationLoop(Ao),typeof self<"u"&&fs.setContext(self),this.setAnimationLoop=function(V){vl=V,Qe.setAnimationLoop(V),V===null?fs.stop():fs.start()},Qe.addEventListener("sessionstart",Wa),Qe.addEventListener("sessionend",bl),this.render=function(V,le){if(le!==void 0&&le.isCamera!==!0){Ct("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(L===!0)return;const _e=Qe.enabled===!0&&Qe.isPresenting===!0,ve=G!==null&&(Q===null||_e)&&G.begin(U,Q);if(V.matrixWorldAutoUpdate===!0&&V.updateMatrixWorld(),le.parent===null&&le.matrixWorldAutoUpdate===!0&&le.updateMatrixWorld(),Qe.enabled===!0&&Qe.isPresenting===!0&&(G===null||G.isCompositing()===!1)&&(Qe.cameraAutoUpdate===!0&&Qe.updateCamera(le),le=Qe.getCamera()),V.isScene===!0&&V.onBeforeRender(U,V,le,Q),I=$e.get(V,z.length),I.init(le),z.push(I),pn.multiplyMatrices(le.projectionMatrix,le.matrixWorldInverse),nt.setFromProjectionMatrix(pn,oa,le.reversedDepth),sn=this.localClippingEnabled,ft=mt.init(this.clippingPlanes,sn),D=Ve.get(V,P.length),D.init(),P.push(D),Qe.enabled===!0&&Qe.isPresenting===!0){const gt=U.xr.getDepthSensingMesh();gt!==null&&tr(gt,le,-1/0,U.sortObjects)}tr(V,le,0,U.sortObjects),D.finish(),U.sortObjects===!0&&D.sort(Pe,rt),Oe=Qe.enabled===!1||Qe.isPresenting===!1||Qe.hasDepthSensing()===!1,Oe&&st.addToRenderList(D,V),this.info.render.frame++,ft===!0&&mt.beginShadows();const he=I.state.shadowsArray;if(ht.render(he,V,le),ft===!0&&mt.endShadows(),this.info.autoReset===!0&&this.info.reset(),(ve&&G.hasRenderPass())===!1){const gt=D.opaque,We=D.transmissive;if(I.setupLights(),le.isArrayCamera){const bt=le.cameras;if(We.length>0)for(let _t=0,Rt=bt.length;_t<Rt;_t++){const St=bt[_t];Pi(gt,We,V,St)}Oe&&st.render(V);for(let _t=0,Rt=bt.length;_t<Rt;_t++){const St=bt[_t];ai(D,V,St,St.viewport)}}else We.length>0&&Pi(gt,We,V,le),Oe&&st.render(V),ai(D,V,le)}Q!==null&&J===0&&(oe.updateMultisampleRenderTarget(Q),oe.updateRenderTargetMipmap(Q)),ve&&G.end(U),V.isScene===!0&&V.onAfterRender(U,V,le),ct.resetDefaultState(),ue=-1,ne=null,z.pop(),z.length>0?(I=z[z.length-1],ft===!0&&mt.setGlobalState(U.clippingPlanes,I.state.camera)):I=null,P.pop(),P.length>0?D=P[P.length-1]:D=null};function tr(V,le,_e,ve){if(V.visible===!1)return;if(V.layers.test(le.layers)){if(V.isGroup)_e=V.renderOrder;else if(V.isLOD)V.autoUpdate===!0&&V.update(le);else if(V.isLight)I.pushLight(V),V.castShadow&&I.pushShadow(V);else if(V.isSprite){if(!V.frustumCulled||nt.intersectsSprite(V)){ve&&je.setFromMatrixPosition(V.matrixWorld).applyMatrix4(pn);const gt=Je.update(V),We=V.material;We.visible&&D.push(V,gt,We,_e,je.z,null)}}else if((V.isMesh||V.isLine||V.isPoints)&&(!V.frustumCulled||nt.intersectsObject(V))){const gt=Je.update(V),We=V.material;if(ve&&(V.boundingSphere!==void 0?(V.boundingSphere===null&&V.computeBoundingSphere(),je.copy(V.boundingSphere.center)):(gt.boundingSphere===null&&gt.computeBoundingSphere(),je.copy(gt.boundingSphere.center)),je.applyMatrix4(V.matrixWorld).applyMatrix4(pn)),Array.isArray(We)){const bt=gt.groups;for(let _t=0,Rt=bt.length;_t<Rt;_t++){const St=bt[_t],Ut=We[St.materialIndex];Ut&&Ut.visible&&D.push(V,gt,Ut,_e,je.z,St)}}else We.visible&&D.push(V,gt,We,_e,je.z,null)}}const Ke=V.children;for(let gt=0,We=Ke.length;gt<We;gt++)tr(Ke[gt],le,_e,ve)}function ai(V,le,_e,ve){const{opaque:he,transmissive:Ke,transparent:gt}=V;I.setupLightsView(_e),ft===!0&&mt.setGlobalState(U.clippingPlanes,_e),ve&&Ye.viewport(X.copy(ve)),he.length>0&&nr(he,le,_e),Ke.length>0&&nr(Ke,le,_e),gt.length>0&&nr(gt,le,_e),Ye.buffers.depth.setTest(!0),Ye.buffers.depth.setMask(!0),Ye.buffers.color.setMask(!0),Ye.setPolygonOffset(!1)}function Pi(V,le,_e,ve){if((_e.isScene===!0?_e.overrideMaterial:null)!==null)return;if(I.state.transmissionRenderTarget[ve.id]===void 0){const Ut=at.has("EXT_color_buffer_half_float")||at.has("EXT_color_buffer_float");I.state.transmissionRenderTarget[ve.id]=new Wr(1,1,{generateMipmaps:!0,type:Ut?Mo:xr,minFilter:cl,samples:Tt.samples,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Tn.workingColorSpace})}const Ke=I.state.transmissionRenderTarget[ve.id],gt=ve.viewport||X;Ke.setSize(gt.z*U.transmissionResolutionScale,gt.w*U.transmissionResolutionScale);const We=U.getRenderTarget(),bt=U.getActiveCubeFace(),_t=U.getActiveMipmapLevel();U.setRenderTarget(Ke),U.getClearColor(pe),we=U.getClearAlpha(),we<1&&U.setClearColor(16777215,.5),U.clear(),Oe&&st.render(_e);const Rt=U.toneMapping;U.toneMapping=Fa;const St=ve.viewport;if(ve.viewport!==void 0&&(ve.viewport=void 0),I.setupLightsView(ve),ft===!0&&mt.setGlobalState(U.clippingPlanes,ve),nr(V,_e,ve),oe.updateMultisampleRenderTarget(Ke),oe.updateRenderTargetMipmap(Ke),at.has("WEBGL_multisampled_render_to_texture")===!1){let Ut=!1;for(let An=0,Gn=le.length;An<Gn;An++){const Bn=le[An],{object:$t,geometry:lt,material:Mn,group:zt}=Bn;if(Mn.side===ll&&$t.layers.test(ve.layers)){const ki=Mn.side;Mn.side=br,Mn.needsUpdate=!0,ir($t,_e,ve,lt,Mn,zt),Mn.side=ki,Mn.needsUpdate=!0,Ut=!0}}Ut===!0&&(oe.updateMultisampleRenderTarget(Ke),oe.updateRenderTargetMipmap(Ke))}U.setRenderTarget(We,bt,_t),U.setClearColor(pe,we),St!==void 0&&(ve.viewport=St),U.toneMapping=Rt}function nr(V,le,_e){const ve=le.isScene===!0?le.overrideMaterial:null;for(let he=0,Ke=V.length;he<Ke;he++){const gt=V[he],{object:We,geometry:bt,group:_t}=gt;let Rt=gt.material;Rt.allowOverride===!0&&ve!==null&&(Rt=ve),We.layers.test(_e.layers)&&ir(We,le,_e,bt,Rt,_t)}}function ir(V,le,_e,ve,he,Ke){V.onBeforeRender(U,le,_e,ve,he,Ke),V.modelViewMatrix.multiplyMatrices(_e.matrixWorldInverse,V.matrixWorld),V.normalMatrix.getNormalMatrix(V.modelViewMatrix),he.onBeforeRender(U,le,_e,ve,V,Ke),he.transparent===!0&&he.side===ll&&he.forceSinglePass===!1?(he.side=br,he.needsUpdate=!0,U.renderBufferDirect(_e,le,ve,he,V,Ke),he.side=cc,he.needsUpdate=!0,U.renderBufferDirect(_e,le,ve,he,V,Ke),he.side=ll):U.renderBufferDirect(_e,le,ve,he,V,Ke),V.onAfterRender(U,le,_e,ve,he,Ke)}function sr(V,le,_e){le.isScene!==!0&&(le=Ge);const ve=B.get(V),he=I.state.lights,Ke=I.state.shadowsArray,gt=he.state.version,We=yt.getParameters(V,he.state,Ke,le,_e),bt=yt.getProgramCacheKey(We);let _t=ve.programs;ve.environment=V.isMeshStandardMaterial?le.environment:null,ve.fog=le.fog,ve.envMap=(V.isMeshStandardMaterial?Le:Te).get(V.envMap||ve.environment),ve.envMapRotation=ve.environment!==null&&V.envMap===null?le.environmentRotation:V.envMapRotation,_t===void 0&&(V.addEventListener("dispose",is),_t=new Map,ve.programs=_t);let Rt=_t.get(bt);if(Rt!==void 0){if(ve.currentProgram===Rt&&ve.lightsStateVersion===gt)return yl(V,We),Rt}else We.uniforms=yt.getUniforms(V),V.onBeforeCompile(We,U),Rt=yt.acquireProgram(We,bt),_t.set(bt,Rt),ve.uniforms=We.uniforms;const St=ve.uniforms;return(!V.isShaderMaterial&&!V.isRawShaderMaterial||V.clipping===!0)&&(St.clippingPlanes=mt.uniform),yl(V,We),ve.needsLights=$a(V),ve.lightsStateVersion=gt,ve.needsLights&&(St.ambientLightColor.value=he.state.ambient,St.lightProbe.value=he.state.probe,St.directionalLights.value=he.state.directional,St.directionalLightShadows.value=he.state.directionalShadow,St.spotLights.value=he.state.spot,St.spotLightShadows.value=he.state.spotShadow,St.rectAreaLights.value=he.state.rectArea,St.ltc_1.value=he.state.rectAreaLTC1,St.ltc_2.value=he.state.rectAreaLTC2,St.pointLights.value=he.state.point,St.pointLightShadows.value=he.state.pointShadow,St.hemisphereLights.value=he.state.hemi,St.directionalShadowMap.value=he.state.directionalShadowMap,St.directionalShadowMatrix.value=he.state.directionalShadowMatrix,St.spotShadowMap.value=he.state.spotShadowMap,St.spotLightMatrix.value=he.state.spotLightMatrix,St.spotLightMap.value=he.state.spotLightMap,St.pointShadowMap.value=he.state.pointShadowMap,St.pointShadowMatrix.value=he.state.pointShadowMatrix),ve.currentProgram=Rt,ve.uniformsList=null,Rt}function ko(V){if(V.uniformsList===null){const le=V.currentProgram.getUniforms();V.uniformsList=Vv.seqWithValue(le.seq,V.uniforms)}return V.uniformsList}function yl(V,le){const _e=B.get(V);_e.outputColorSpace=le.outputColorSpace,_e.batching=le.batching,_e.batchingColor=le.batchingColor,_e.instancing=le.instancing,_e.instancingColor=le.instancingColor,_e.instancingMorph=le.instancingMorph,_e.skinning=le.skinning,_e.morphTargets=le.morphTargets,_e.morphNormals=le.morphNormals,_e.morphColors=le.morphColors,_e.morphTargetsCount=le.morphTargetsCount,_e.numClippingPlanes=le.numClippingPlanes,_e.numIntersection=le.numClipIntersection,_e.vertexAlphas=le.vertexAlphas,_e.vertexTangents=le.vertexTangents,_e.toneMapping=le.toneMapping}function Yr(V,le,_e,ve,he){le.isScene!==!0&&(le=Ge),oe.resetTextureUnits();const Ke=le.fog,gt=ve.isMeshStandardMaterial?le.environment:null,We=Q===null?U.outputColorSpace:Q.isXRRenderTarget===!0?Q.texture.colorSpace:_u,bt=(ve.isMeshStandardMaterial?Le:Te).get(ve.envMap||gt),_t=ve.vertexColors===!0&&!!_e.attributes.color&&_e.attributes.color.itemSize===4,Rt=!!_e.attributes.tangent&&(!!ve.normalMap||ve.anisotropy>0),St=!!_e.morphAttributes.position,Ut=!!_e.morphAttributes.normal,An=!!_e.morphAttributes.color;let Gn=Fa;ve.toneMapped&&(Q===null||Q.isXRRenderTarget===!0)&&(Gn=U.toneMapping);const Bn=_e.morphAttributes.position||_e.morphAttributes.normal||_e.morphAttributes.color,$t=Bn!==void 0?Bn.length:0,lt=B.get(ve),Mn=I.state.lights;if(ft===!0&&(sn===!0||V!==ne)){const Wi=V===ne&&ve.id===ue;mt.setState(ve,V,Wi)}let zt=!1;ve.version===lt.__version?(lt.needsLights&&lt.lightsStateVersion!==Mn.state.version||lt.outputColorSpace!==We||he.isBatchedMesh&&lt.batching===!1||!he.isBatchedMesh&&lt.batching===!0||he.isBatchedMesh&&lt.batchingColor===!0&&he.colorTexture===null||he.isBatchedMesh&&lt.batchingColor===!1&&he.colorTexture!==null||he.isInstancedMesh&&lt.instancing===!1||!he.isInstancedMesh&&lt.instancing===!0||he.isSkinnedMesh&&lt.skinning===!1||!he.isSkinnedMesh&&lt.skinning===!0||he.isInstancedMesh&&lt.instancingColor===!0&&he.instanceColor===null||he.isInstancedMesh&&lt.instancingColor===!1&&he.instanceColor!==null||he.isInstancedMesh&&lt.instancingMorph===!0&&he.morphTexture===null||he.isInstancedMesh&&lt.instancingMorph===!1&&he.morphTexture!==null||lt.envMap!==bt||ve.fog===!0&&lt.fog!==Ke||lt.numClippingPlanes!==void 0&&(lt.numClippingPlanes!==mt.numPlanes||lt.numIntersection!==mt.numIntersection)||lt.vertexAlphas!==_t||lt.vertexTangents!==Rt||lt.morphTargets!==St||lt.morphNormals!==Ut||lt.morphColors!==An||lt.toneMapping!==Gn||lt.morphTargetsCount!==$t)&&(zt=!0):(zt=!0,lt.__version=ve.version);let ki=lt.currentProgram;zt===!0&&(ki=sr(ve,le,he));let Kr=!1,Zn=!1,Ss=!1;const jn=ki.getUniforms(),zi=lt.uniforms;if(Ye.useProgram(ki.program)&&(Kr=!0,Zn=!0,Ss=!0),ve.id!==ue&&(ue=ve.id,Zn=!0),Kr||ne!==V){Ye.buffers.depth.getReversed()&&V.reversedDepth!==!0&&(V._reversedDepth=!0,V.updateProjectionMatrix()),jn.setValue(K,"projectionMatrix",V.projectionMatrix),jn.setValue(K,"viewMatrix",V.matrixWorldInverse);const Xi=jn.map.cameraPosition;Xi!==void 0&&Xi.setValue(K,Ot.setFromMatrixPosition(V.matrixWorld)),Tt.logarithmicDepthBuffer&&jn.setValue(K,"logDepthBufFC",2/(Math.log(V.far+1)/Math.LN2)),(ve.isMeshPhongMaterial||ve.isMeshToonMaterial||ve.isMeshLambertMaterial||ve.isMeshBasicMaterial||ve.isMeshStandardMaterial||ve.isShaderMaterial)&&jn.setValue(K,"isOrthographic",V.isOrthographicCamera===!0),ne!==V&&(ne=V,Zn=!0,Ss=!0)}if(lt.needsLights&&(Mn.state.directionalShadowMap.length>0&&jn.setValue(K,"directionalShadowMap",Mn.state.directionalShadowMap,oe),Mn.state.spotShadowMap.length>0&&jn.setValue(K,"spotShadowMap",Mn.state.spotShadowMap,oe),Mn.state.pointShadowMap.length>0&&jn.setValue(K,"pointShadowMap",Mn.state.pointShadowMap,oe)),he.isSkinnedMesh){jn.setOptional(K,he,"bindMatrix"),jn.setOptional(K,he,"bindMatrixInverse");const Wi=he.skeleton;Wi&&(Wi.boneTexture===null&&Wi.computeBoneTexture(),jn.setValue(K,"boneTexture",Wi.boneTexture,oe))}he.isBatchedMesh&&(jn.setOptional(K,he,"batchingTexture"),jn.setValue(K,"batchingTexture",he._matricesTexture,oe),jn.setOptional(K,he,"batchingIdTexture"),jn.setValue(K,"batchingIdTexture",he._indirectTexture,oe),jn.setOptional(K,he,"batchingColorTexture"),he._colorsTexture!==null&&jn.setValue(K,"batchingColorTexture",he._colorsTexture,oe));const Ci=_e.morphAttributes;if((Ci.position!==void 0||Ci.normal!==void 0||Ci.color!==void 0)&&en.update(he,_e,ki),(Zn||lt.receiveShadow!==he.receiveShadow)&&(lt.receiveShadow=he.receiveShadow,jn.setValue(K,"receiveShadow",he.receiveShadow)),ve.isMeshGouraudMaterial&&ve.envMap!==null&&(zi.envMap.value=bt,zi.flipEnvMap.value=bt.isCubeTexture&&bt.isRenderTargetTexture===!1?-1:1),ve.isMeshStandardMaterial&&ve.envMap===null&&le.environment!==null&&(zi.envMapIntensity.value=le.environmentIntensity),zi.dfgLUT!==void 0&&(zi.dfgLUT.value=Lz()),Zn&&(jn.setValue(K,"toneMappingExposure",U.toneMappingExposure),lt.needsLights&&Xa(zi,Ss),Ke&&ve.fog===!0&&jt.refreshFogUniforms(zi,Ke),jt.refreshMaterialUniforms(zi,ve,Ee,ce,I.state.transmissionRenderTarget[V.id]),Vv.upload(K,ko(lt),zi,oe)),ve.isShaderMaterial&&ve.uniformsNeedUpdate===!0&&(Vv.upload(K,ko(lt),zi,oe),ve.uniformsNeedUpdate=!1),ve.isSpriteMaterial&&jn.setValue(K,"center",he.center),jn.setValue(K,"modelViewMatrix",he.modelViewMatrix),jn.setValue(K,"normalMatrix",he.normalMatrix),jn.setValue(K,"modelMatrix",he.matrixWorld),ve.isShaderMaterial||ve.isRawShaderMaterial){const Wi=ve.uniformsGroups;for(let Xi=0,_l=Wi.length;Xi<_l;Xi++){const _r=Wi[Xi];He.update(_r,ki),He.bind(_r,ki)}}return ki}function Xa(V,le){V.ambientLightColor.needsUpdate=le,V.lightProbe.needsUpdate=le,V.directionalLights.needsUpdate=le,V.directionalLightShadows.needsUpdate=le,V.pointLights.needsUpdate=le,V.pointLightShadows.needsUpdate=le,V.spotLights.needsUpdate=le,V.spotLightShadows.needsUpdate=le,V.rectAreaLights.needsUpdate=le,V.hemisphereLights.needsUpdate=le}function $a(V){return V.isMeshLambertMaterial||V.isMeshToonMaterial||V.isMeshPhongMaterial||V.isMeshStandardMaterial||V.isShadowMaterial||V.isShaderMaterial&&V.lights===!0}this.getActiveCubeFace=function(){return W},this.getActiveMipmapLevel=function(){return J},this.getRenderTarget=function(){return Q},this.setRenderTargetTextures=function(V,le,_e){const ve=B.get(V);ve.__autoAllocateDepthBuffer=V.resolveDepthBuffer===!1,ve.__autoAllocateDepthBuffer===!1&&(ve.__useRenderToTexture=!1),B.get(V.texture).__webglTexture=le,B.get(V.depthTexture).__webglTexture=ve.__autoAllocateDepthBuffer?void 0:_e,ve.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(V,le){const _e=B.get(V);_e.__webglFramebuffer=le,_e.__useDefaultFramebuffer=le===void 0};const Ya=K.createFramebuffer();this.setRenderTarget=function(V,le=0,_e=0){Q=V,W=le,J=_e;let ve=null,he=!1,Ke=!1;if(V){const We=B.get(V);if(We.__useDefaultFramebuffer!==void 0){Ye.bindFramebuffer(K.FRAMEBUFFER,We.__webglFramebuffer),X.copy(V.viewport),Z.copy(V.scissor),re=V.scissorTest,Ye.viewport(X),Ye.scissor(Z),Ye.setScissorTest(re),ue=-1;return}else if(We.__webglFramebuffer===void 0)oe.setupRenderTarget(V);else if(We.__hasExternalTextures)oe.rebindTextures(V,B.get(V.texture).__webglTexture,B.get(V.depthTexture).__webglTexture);else if(V.depthBuffer){const Rt=V.depthTexture;if(We.__boundDepthTexture!==Rt){if(Rt!==null&&B.has(Rt)&&(V.width!==Rt.image.width||V.height!==Rt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");oe.setupDepthRenderbuffer(V)}}const bt=V.texture;(bt.isData3DTexture||bt.isDataArrayTexture||bt.isCompressedArrayTexture)&&(Ke=!0);const _t=B.get(V).__webglFramebuffer;V.isWebGLCubeRenderTarget?(Array.isArray(_t[le])?ve=_t[le][_e]:ve=_t[le],he=!0):V.samples>0&&oe.useMultisampledRTT(V)===!1?ve=B.get(V).__webglMultisampledFramebuffer:Array.isArray(_t)?ve=_t[_e]:ve=_t,X.copy(V.viewport),Z.copy(V.scissor),re=V.scissorTest}else X.copy(me).multiplyScalar(Ee).floor(),Z.copy(Ce).multiplyScalar(Ee).floor(),re=Fe;if(_e!==0&&(ve=Ya),Ye.bindFramebuffer(K.FRAMEBUFFER,ve)&&Ye.drawBuffers(V,ve),Ye.viewport(X),Ye.scissor(Z),Ye.setScissorTest(re),he){const We=B.get(V.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_CUBE_MAP_POSITIVE_X+le,We.__webglTexture,_e)}else if(Ke){const We=le;for(let bt=0;bt<V.textures.length;bt++){const _t=B.get(V.textures[bt]);K.framebufferTextureLayer(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0+bt,_t.__webglTexture,_e,We)}}else if(V!==null&&_e!==0){const We=B.get(V.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,We.__webglTexture,_e)}ue=-1},this.readRenderTargetPixels=function(V,le,_e,ve,he,Ke,gt,We=0){if(!(V&&V.isWebGLRenderTarget)){Ct("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let bt=B.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&gt!==void 0&&(bt=bt[gt]),bt){Ye.bindFramebuffer(K.FRAMEBUFFER,bt);try{const _t=V.textures[We],Rt=_t.format,St=_t.type;if(!Tt.textureFormatReadable(Rt)){Ct("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Tt.textureTypeReadable(St)){Ct("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}le>=0&&le<=V.width-ve&&_e>=0&&_e<=V.height-he&&(V.textures.length>1&&K.readBuffer(K.COLOR_ATTACHMENT0+We),K.readPixels(le,_e,ve,he,Xe.convert(Rt),Xe.convert(St),Ke))}finally{const _t=Q!==null?B.get(Q).__webglFramebuffer:null;Ye.bindFramebuffer(K.FRAMEBUFFER,_t)}}},this.readRenderTargetPixelsAsync=async function(V,le,_e,ve,he,Ke,gt,We=0){if(!(V&&V.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let bt=B.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&gt!==void 0&&(bt=bt[gt]),bt)if(le>=0&&le<=V.width-ve&&_e>=0&&_e<=V.height-he){Ye.bindFramebuffer(K.FRAMEBUFFER,bt);const _t=V.textures[We],Rt=_t.format,St=_t.type;if(!Tt.textureFormatReadable(Rt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Tt.textureTypeReadable(St))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ut=K.createBuffer();K.bindBuffer(K.PIXEL_PACK_BUFFER,Ut),K.bufferData(K.PIXEL_PACK_BUFFER,Ke.byteLength,K.STREAM_READ),V.textures.length>1&&K.readBuffer(K.COLOR_ATTACHMENT0+We),K.readPixels(le,_e,ve,he,Xe.convert(Rt),Xe.convert(St),0);const An=Q!==null?B.get(Q).__webglFramebuffer:null;Ye.bindFramebuffer(K.FRAMEBUFFER,An);const Gn=K.fenceSync(K.SYNC_GPU_COMMANDS_COMPLETE,0);return K.flush(),await G5(K,Gn,4),K.bindBuffer(K.PIXEL_PACK_BUFFER,Ut),K.getBufferSubData(K.PIXEL_PACK_BUFFER,0,Ke),K.deleteBuffer(Ut),K.deleteSync(Gn),Ke}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(V,le=null,_e=0){const ve=Math.pow(2,-_e),he=Math.floor(V.image.width*ve),Ke=Math.floor(V.image.height*ve),gt=le!==null?le.x:0,We=le!==null?le.y:0;oe.setTexture2D(V,0),K.copyTexSubImage2D(K.TEXTURE_2D,_e,0,0,gt,We,he,Ke),Ye.unbindTexture()};const Co=K.createFramebuffer(),ha=K.createFramebuffer();this.copyTextureToTexture=function(V,le,_e=null,ve=null,he=0,Ke=null){Ke===null&&(he!==0?(Qf("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ke=he,he=0):Ke=0);let gt,We,bt,_t,Rt,St,Ut,An,Gn;const Bn=V.isCompressedTexture?V.mipmaps[Ke]:V.image;if(_e!==null)gt=_e.max.x-_e.min.x,We=_e.max.y-_e.min.y,bt=_e.isBox3?_e.max.z-_e.min.z:1,_t=_e.min.x,Rt=_e.min.y,St=_e.isBox3?_e.min.z:0;else{const Ci=Math.pow(2,-he);gt=Math.floor(Bn.width*Ci),We=Math.floor(Bn.height*Ci),V.isDataArrayTexture?bt=Bn.depth:V.isData3DTexture?bt=Math.floor(Bn.depth*Ci):bt=1,_t=0,Rt=0,St=0}ve!==null?(Ut=ve.x,An=ve.y,Gn=ve.z):(Ut=0,An=0,Gn=0);const $t=Xe.convert(le.format),lt=Xe.convert(le.type);let Mn;le.isData3DTexture?(oe.setTexture3D(le,0),Mn=K.TEXTURE_3D):le.isDataArrayTexture||le.isCompressedArrayTexture?(oe.setTexture2DArray(le,0),Mn=K.TEXTURE_2D_ARRAY):(oe.setTexture2D(le,0),Mn=K.TEXTURE_2D),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,le.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,le.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,le.unpackAlignment);const zt=K.getParameter(K.UNPACK_ROW_LENGTH),ki=K.getParameter(K.UNPACK_IMAGE_HEIGHT),Kr=K.getParameter(K.UNPACK_SKIP_PIXELS),Zn=K.getParameter(K.UNPACK_SKIP_ROWS),Ss=K.getParameter(K.UNPACK_SKIP_IMAGES);K.pixelStorei(K.UNPACK_ROW_LENGTH,Bn.width),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,Bn.height),K.pixelStorei(K.UNPACK_SKIP_PIXELS,_t),K.pixelStorei(K.UNPACK_SKIP_ROWS,Rt),K.pixelStorei(K.UNPACK_SKIP_IMAGES,St);const jn=V.isDataArrayTexture||V.isData3DTexture,zi=le.isDataArrayTexture||le.isData3DTexture;if(V.isDepthTexture){const Ci=B.get(V),Wi=B.get(le),Xi=B.get(Ci.__renderTarget),_l=B.get(Wi.__renderTarget);Ye.bindFramebuffer(K.READ_FRAMEBUFFER,Xi.__webglFramebuffer),Ye.bindFramebuffer(K.DRAW_FRAMEBUFFER,_l.__webglFramebuffer);for(let _r=0;_r<bt;_r++)jn&&(K.framebufferTextureLayer(K.READ_FRAMEBUFFER,K.COLOR_ATTACHMENT0,B.get(V).__webglTexture,he,St+_r),K.framebufferTextureLayer(K.DRAW_FRAMEBUFFER,K.COLOR_ATTACHMENT0,B.get(le).__webglTexture,Ke,Gn+_r)),K.blitFramebuffer(_t,Rt,gt,We,Ut,An,gt,We,K.DEPTH_BUFFER_BIT,K.NEAREST);Ye.bindFramebuffer(K.READ_FRAMEBUFFER,null),Ye.bindFramebuffer(K.DRAW_FRAMEBUFFER,null)}else if(he!==0||V.isRenderTargetTexture||B.has(V)){const Ci=B.get(V),Wi=B.get(le);Ye.bindFramebuffer(K.READ_FRAMEBUFFER,Co),Ye.bindFramebuffer(K.DRAW_FRAMEBUFFER,ha);for(let Xi=0;Xi<bt;Xi++)jn?K.framebufferTextureLayer(K.READ_FRAMEBUFFER,K.COLOR_ATTACHMENT0,Ci.__webglTexture,he,St+Xi):K.framebufferTexture2D(K.READ_FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,Ci.__webglTexture,he),zi?K.framebufferTextureLayer(K.DRAW_FRAMEBUFFER,K.COLOR_ATTACHMENT0,Wi.__webglTexture,Ke,Gn+Xi):K.framebufferTexture2D(K.DRAW_FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,Wi.__webglTexture,Ke),he!==0?K.blitFramebuffer(_t,Rt,gt,We,Ut,An,gt,We,K.COLOR_BUFFER_BIT,K.NEAREST):zi?K.copyTexSubImage3D(Mn,Ke,Ut,An,Gn+Xi,_t,Rt,gt,We):K.copyTexSubImage2D(Mn,Ke,Ut,An,_t,Rt,gt,We);Ye.bindFramebuffer(K.READ_FRAMEBUFFER,null),Ye.bindFramebuffer(K.DRAW_FRAMEBUFFER,null)}else zi?V.isDataTexture||V.isData3DTexture?K.texSubImage3D(Mn,Ke,Ut,An,Gn,gt,We,bt,$t,lt,Bn.data):le.isCompressedArrayTexture?K.compressedTexSubImage3D(Mn,Ke,Ut,An,Gn,gt,We,bt,$t,Bn.data):K.texSubImage3D(Mn,Ke,Ut,An,Gn,gt,We,bt,$t,lt,Bn):V.isDataTexture?K.texSubImage2D(K.TEXTURE_2D,Ke,Ut,An,gt,We,$t,lt,Bn.data):V.isCompressedTexture?K.compressedTexSubImage2D(K.TEXTURE_2D,Ke,Ut,An,Bn.width,Bn.height,$t,Bn.data):K.texSubImage2D(K.TEXTURE_2D,Ke,Ut,An,gt,We,$t,lt,Bn);K.pixelStorei(K.UNPACK_ROW_LENGTH,zt),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,ki),K.pixelStorei(K.UNPACK_SKIP_PIXELS,Kr),K.pixelStorei(K.UNPACK_SKIP_ROWS,Zn),K.pixelStorei(K.UNPACK_SKIP_IMAGES,Ss),Ke===0&&le.generateMipmaps&&K.generateMipmap(Mn),Ye.unbindTexture()},this.initRenderTarget=function(V){B.get(V).__webglFramebuffer===void 0&&oe.setupRenderTarget(V)},this.initTexture=function(V){V.isCubeTexture?oe.setTextureCube(V,0):V.isData3DTexture?oe.setTexture3D(V,0):V.isDataArrayTexture||V.isCompressedArrayTexture?oe.setTexture2DArray(V,0):oe.setTexture2D(V,0),Ye.unbindTexture()},this.resetState=function(){W=0,J=0,Q=null,Ye.reset(),ct.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return oa}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Tn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Tn._getUnpackColorSpace()}}const Uz=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:ry,AddEquation:mu,AddOperation:oA,AdditiveAnimationBlendMode:Kw,AdditiveBlending:sw,AgXToneMapping:Fw,AlphaFormat:$w,AlwaysCompare:bA,AlwaysDepth:tb,AlwaysStencilFunc:lw,AmbientLight:hk,AnimationAction:yk,AnimationClip:Hg,AnimationLoader:II,AnimationMixer:c2,AnimationObjectGroup:o2,AnimationUtils:CI,ArcCurve:zA,ArrayCamera:xk,ArrowHelper:O2,AttachedBindMode:ow,Audio:vk,AudioAnalyser:ZI,AudioContext:wS,AudioListener:$I,AudioLoader:qI,AxesHelper:L2,BackSide:br,BasicDepthPacking:hA,BasicShadowMap:FT,BatchedMesh:DA,Bone:iS,BooleanKeyframeTrack:Qd,Box2:b2,Box3:Qs,Box3Helper:D2,BoxGeometry:Jd,BoxHelper:j2,BufferAttribute:Kn,BufferGeometry:Qt,BufferGeometryLoader:gk,ByteType:Gw,Cache:ul,Camera:vy,CameraHelper:R2,CanvasTexture:QD,CapsuleGeometry:Ny,CatmullRomCurve3:BA,CineonToneMapping:zw,CircleGeometry:Ty,ClampToEdgeWrapping:Gr,Clock:SS,Color:vt,ColorKeyframeTrack:vS,ColorManagement:Tn,CompressedArrayTexture:ZD,CompressedCubeTexture:JD,CompressedTexture:Ey,CompressedTextureLoader:OI,ConeGeometry:Qg,ConstantAlphaFactor:sA,ConstantColorFactor:nA,Controls:P2,CubeCamera:TA,CubeDepthTexture:UA,CubeReflectionMapping:fl,CubeRefractionMapping:yu,CubeTexture:Zg,CubeTextureLoader:LI,CubeUVReflectionMapping:op,CubicBezierCurve:oS,CubicBezierCurve3:FA,CubicInterpolant:sk,CullFaceBack:iw,CullFaceFront:BT,CullFaceFrontBack:e5,CullFaceNone:zT,Curve:Eo,CurvePath:HA,CustomBlending:VT,CustomToneMapping:Bw,CylinderGeometry:Jg,Cylindrical:v2,Data3DTexture:xy,DataArrayTexture:gy,DataTexture:Va,DataTextureLoader:UI,DataUtils:wD,DecrementStencilOp:v5,DecrementWrapStencilOp:y5,DefaultLoadingManager:ok,DepthFormat:pl,DepthStencilFormat:xu,DepthTexture:Yd,DetachedBindMode:lA,DirectionalLight:dk,DirectionalLightHelper:C2,DiscreteInterpolant:rk,DodecahedronGeometry:Ay,DoubleSide:ll,DstAlphaFactor:ZT,DstColorFactor:QT,DynamicCopyUsage:O5,DynamicDrawUsage:k5,DynamicReadUsage:j5,EdgesGeometry:PA,EllipseCurve:ky,EqualCompare:gA,EqualDepth:ib,EqualStencilFunc:M5,EquirectangularReflectionMapping:Ag,EquirectangularRefractionMapping:kg,Euler:da,EventDispatcher:gl,ExternalTexture:rS,ExtrudeGeometry:Cy,FileLoader:uc,Float16BufferAttribute:kD,Float32BufferAttribute:wt,FloatType:ys,Fog:yy,FogExp2:by,FramebufferTexture:KD,FrontSide:cc,Frustum:cp,FrustumArray:My,GLBufferAttribute:p2,GLSL1:U5,GLSL3:cw,GreaterCompare:xA,GreaterDepth:rb,GreaterEqualCompare:my,GreaterEqualDepth:sb,GreaterEqualStencilFunc:A5,GreaterStencilFunc:N5,GridHelper:A2,Group:qf,HalfFloatType:Mo,HemisphereLight:lk,HemisphereLightHelper:T2,IcosahedronGeometry:Ry,ImageBitmapLoader:GI,ImageLoader:Gg,ImageUtils:SA,IncrementStencilOp:x5,IncrementWrapStencilOp:b5,InstancedBufferAttribute:ip,InstancedBufferGeometry:mk,InstancedInterleavedBuffer:f2,InstancedMesh:jA,Int16BufferAttribute:TD,Int32BufferAttribute:AD,Int8BufferAttribute:MD,IntType:oy,InterleavedBuffer:wy,InterleavedBufferAttribute:$d,Interpolant:n0,InterpolateDiscrete:jg,InterpolateLinear:zb,InterpolateSmooth:Bv,InterpolationSamplingMode:B5,InterpolationSamplingType:z5,InvertStencilOp:_5,KeepStencilOp:Rd,KeyframeTrack:qa,LOD:CA,LatheGeometry:jy,Layers:tp,LessCompare:mA,LessDepth:nb,LessEqualCompare:py,LessEqualDepth:Wd,LessEqualStencilFunc:E5,LessStencilFunc:S5,Light:Au,LightProbe:pk,Line:Su,Line3:w2,LineBasicMaterial:yr,LineCurve:lS,LineCurve3:VA,LineDashedMaterial:nk,LineLoop:IA,LineSegments:xl,LinearFilter:ei,LinearInterpolant:xS,LinearMipMapLinearFilter:s5,LinearMipMapNearestFilter:i5,LinearMipmapLinearFilter:cl,LinearMipmapNearestFilter:ug,LinearSRGBColorSpace:_u,LinearToneMapping:Uw,LinearTransfer:Ig,Loader:$r,LoaderUtils:pw,LoadingManager:bS,LoopOnce:cA,LoopPingPong:dA,LoopRepeat:uA,MOUSE:J4,Material:er,MaterialLoader:zy,MathUtils:oD,Matrix2:AS,Matrix3:nn,Matrix4:Xt,MaxEquation:WT,Mesh:ns,MeshBasicMaterial:Nu,MeshDepthMaterial:pS,MeshDistanceMaterial:mS,MeshLambertMaterial:ek,MeshMatcapMaterial:tk,MeshNormalMaterial:QA,MeshPhongMaterial:ZA,MeshPhysicalMaterial:KA,MeshStandardMaterial:fS,MeshToonMaterial:JA,MinEquation:qT,MirroredRepeatWrapping:Rg,MixOperation:aA,MultiplyBlending:aw,MultiplyOperation:Yg,NearestFilter:Ai,NearestMipMapLinearFilter:n5,NearestMipMapNearestFilter:t5,NearestMipmapLinearFilter:Hf,NearestMipmapNearestFilter:Hw,NeutralToneMapping:Vw,NeverCompare:pA,NeverDepth:eb,NeverStencilFunc:w5,NoBlending:dl,NoColorSpace:rc,NoNormalPacking:h5,NoToneMapping:Fa,NormalAnimationBlendMode:fy,NormalBlending:Fd,NormalGAPacking:p5,NormalRGPacking:f5,NotEqualCompare:vA,NotEqualDepth:ab,NotEqualStencilFunc:T5,NumberKeyframeTrack:Fg,Object3D:In,ObjectLoader:VI,ObjectSpaceNormalMap:fA,OctahedronGeometry:e0,OneFactor:$T,OneMinusConstantAlphaFactor:rA,OneMinusConstantColorFactor:iA,OneMinusDstAlphaFactor:JT,OneMinusDstColorFactor:eA,OneMinusSrcAlphaFactor:Qv,OneMinusSrcColorFactor:KT,OrthographicCamera:th,PCFShadowMap:Xf,PCFSoftShadowMap:cg,PMREMGenerator:xw,Path:Hb,PerspectiveCamera:bs,Plane:fu,PlaneGeometry:up,PlaneHelper:I2,PointLight:uk,PointLightHelper:E2,Points:OA,PointsMaterial:sS,PolarGridHelper:k2,PolyhedronGeometry:Tu,PositionalAudio:KI,PropertyBinding:Dn,PropertyMixer:bk,QuadraticBezierCurve:cS,QuadraticBezierCurve3:uS,Quaternion:qr,QuaternionKeyframeTrack:i0,QuaternionLinearInterpolant:ak,R11_EAC_Format:pb,RED_GREEN_RGTC2_Format:Ub,RED_RGTC1_Format:Ob,REVISION:sy,RG11_EAC_Format:gb,RGBADepthPacking:c5,RGBAFormat:_s,RGBAIntegerFormat:hy,RGBA_ASTC_10x10_Format:kb,RGBA_ASTC_10x5_Format:Nb,RGBA_ASTC_10x6_Format:Tb,RGBA_ASTC_10x8_Format:Ab,RGBA_ASTC_12x10_Format:Cb,RGBA_ASTC_12x12_Format:Rb,RGBA_ASTC_4x4_Format:vb,RGBA_ASTC_5x4_Format:bb,RGBA_ASTC_5x5_Format:yb,RGBA_ASTC_6x5_Format:_b,RGBA_ASTC_6x6_Format:wb,RGBA_ASTC_8x5_Format:Sb,RGBA_ASTC_8x6_Format:Mb,RGBA_ASTC_8x8_Format:Eb,RGBA_BPTC_Format:jb,RGBA_ETC2_EAC_Format:fb,RGBA_PVRTC_2BPPV1_Format:ub,RGBA_PVRTC_4BPPV1_Format:cb,RGBA_S3TC_DXT1_Format:hg,RGBA_S3TC_DXT3_Format:fg,RGBA_S3TC_DXT5_Format:pg,RGBDepthPacking:u5,RGBFormat:Yw,RGBIntegerFormat:r5,RGB_BPTC_SIGNED_Format:Db,RGB_BPTC_UNSIGNED_Format:Ib,RGB_ETC1_Format:db,RGB_ETC2_Format:hb,RGB_PVRTC_2BPPV1_Format:lb,RGB_PVRTC_4BPPV1_Format:ob,RGB_S3TC_DXT1_Format:dg,RGDepthPacking:d5,RGFormat:Xd,RGIntegerFormat:dy,RawShaderMaterial:hS,Ray:lp,Raycaster:TS,RectAreaLight:fk,RedFormat:uy,RedIntegerFormat:Kg,ReinhardToneMapping:Pw,RenderTarget:Jw,RenderTarget3D:u2,RepeatWrapping:Cg,ReplaceStencilOp:g5,ReverseSubtractEquation:GT,RingGeometry:Dy,SIGNED_R11_EAC_Format:mb,SIGNED_RED_GREEN_RGTC2_Format:Pb,SIGNED_RED_RGTC1_Format:Lb,SIGNED_RG11_EAC_Format:xb,SRGBColorSpace:Js,SRGBTransfer:Hn,Scene:_y,ShaderChunk:dn,ShaderLib:_o,ShaderMaterial:Xr,ShadowMaterial:YA,Shape:Hd,ShapeGeometry:Iy,ShapePath:U2,ShapeUtils:wo,ShortType:qw,Skeleton:Sy,SkeletonHelper:M2,SkinnedMesh:RA,Source:vu,Sphere:Ls,SphereGeometry:t0,Spherical:x2,SphericalHarmonics3:_S,SplineCurve:dS,SpotLight:ck,SpotLightHelper:S2,Sprite:kA,SpriteMaterial:nS,SrcAlphaFactor:Jv,SrcAlphaSaturateFactor:tA,SrcColorFactor:YT,StaticCopyUsage:I5,StaticDrawUsage:Og,StaticReadUsage:R5,StereoCamera:WI,StreamCopyUsage:L5,StreamDrawUsage:C5,StreamReadUsage:D5,StringKeyframeTrack:eh,SubtractEquation:HT,SubtractiveBlending:rw,TOUCH:Q4,TangentSpaceNormalMap:Eu,TetrahedronGeometry:Oy,Texture:Ui,TextureLoader:PI,TextureUtils:H2,Timer:m2,TimestampQuery:P5,TorusGeometry:Ly,TorusKnotGeometry:Uy,Triangle:Hr,TriangleFanDrawMode:l5,TriangleStripDrawMode:o5,TrianglesDrawMode:a5,TubeGeometry:Py,UVMapping:ay,Uint16BufferAttribute:Qw,Uint32BufferAttribute:eS,Uint8BufferAttribute:ED,Uint8ClampedBufferAttribute:ND,Uniform:NS,UniformsGroup:h2,UniformsLib:dt,UniformsUtils:NA,UnsignedByteType:xr,UnsignedInt101111Type:Xw,UnsignedInt248Type:Zf,UnsignedInt5999Type:Ww,UnsignedIntType:Ga,UnsignedShort4444Type:ly,UnsignedShort5551Type:cy,UnsignedShortType:Kf,VSMShadowMap:Ud,Vector2:ze,Vector3:Y,Vector4:Qn,VectorKeyframeTrack:Vg,VideoFrameTexture:YD,VideoTexture:LA,WebGL3DRenderTarget:hD,WebGLArrayRenderTarget:dD,WebGLCoordinateSystem:oa,WebGLCubeRenderTarget:tS,WebGLRenderTarget:Wr,WebGLRenderer:Ak,WebGLUtils:Tk,WebGPUCoordinateSystem:Jf,WebXRController:Fv,WireframeGeometry:$A,WrapAroundEnding:Dg,ZeroCurvatureEnding:Pd,ZeroFactor:XT,ZeroSlopeEnding:zd,ZeroStencilOp:m5,createCanvasElement:wA,error:Ct,getConsoleFunction:H5,log:Ug,setConsoleFunction:V5,warn:ut,warnOnce:Qf},Symbol.toStringTag,{value:"Module"}));var C1={exports:{}},R1={},j1={exports:{}},D1={};var LN;function Pz(){if(LN)return D1;LN=1;var i=Wg();function e(b,y){return b===y&&(b!==0||1/b===1/y)||b!==b&&y!==y}var t=typeof Object.is=="function"?Object.is:e,n=i.useState,s=i.useEffect,a=i.useLayoutEffect,u=i.useDebugValue;function h(b,y){var w=y(),M=n({inst:{value:w,getSnapshot:y}}),k=M[0].inst,T=M[1];return a(function(){k.value=w,k.getSnapshot=y,p(k)&&T({inst:k})},[b,w,y]),s(function(){return p(k)&&T({inst:k}),b(function(){p(k)&&T({inst:k})})},[b]),u(w),w}function p(b){var y=b.getSnapshot;b=b.value;try{var w=y();return!t(b,w)}catch{return!0}}function m(b,y){return y()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:h;return D1.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:v,D1}var UN;function zz(){return UN||(UN=1,j1.exports=Pz()),j1.exports}var PN;function Bz(){if(PN)return R1;PN=1;var i=Wg(),e=zz();function t(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var n=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,a=i.useRef,u=i.useEffect,h=i.useMemo,p=i.useDebugValue;return R1.useSyncExternalStoreWithSelector=function(m,v,b,y,w){var M=a(null);if(M.current===null){var k={hasValue:!1,value:null};M.current=k}else k=M.current;M=h(function(){function N(P){if(!j){if(j=!0,R=P,P=y(P),w!==void 0&&k.hasValue){var z=k.value;if(w(z,P))return D=z}return D=P}if(z=D,n(R,P))return z;var G=y(P);return w!==void 0&&w(z,G)?(R=P,z):(R=P,D=G)}var j=!1,R,D,I=b===void 0?null:b;return[function(){return N(v())},I===null?void 0:function(){return N(I())}]},[v,b,y,w]);var T=s(m,M[0],M[1]);return u(function(){k.hasValue=!0,k.value=T},[T]),p(T),T},R1}var zN;function Fz(){return zN||(zN=1,C1.exports=Bz()),C1.exports}var Vz=Fz();const Hz=Kb(Vz),BN=i=>{let e;const t=new Set,n=(m,v)=>{const b=typeof m=="function"?m(e):m;if(!Object.is(b,e)){const y=e;e=v??(typeof b!="object"||b===null)?b:Object.assign({},e,b),t.forEach(w=>w(e,y))}},s=()=>e,h={setState:n,getState:s,getInitialState:()=>p,subscribe:m=>(t.add(m),()=>t.delete(m))},p=e=i(n,s,h);return h},Gz=(i=>i?BN(i):BN),{useSyncExternalStoreWithSelector:qz}=Hz,Wz=i=>i;function Xz(i,e=Wz,t){const n=qz(i.subscribe,i.getState,i.getInitialState,e,t);return Zb.useDebugValue(n),n}const FN=(i,e)=>{const t=Gz(i),n=(s,a=e)=>Xz(t,s,a);return Object.assign(n,t),n},kk=((i,e)=>i?FN(i,e):FN);var yw=lT();const $z=Kb(yw);function kS(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=e?i.return:i.child;for(;n;){const s=kS(n,e,t);if(s)return s;n=e?null:n.sibling}}function Ck(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const CS=Ck(ie.createContext(null));class Rk extends ie.Component{render(){return ie.createElement(CS.Provider,{value:this._reactInternals},this.props.children)}}function jk(){const i=ie.useContext(CS);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=ie.useId();return ie.useMemo(()=>{for(const t of[i,i?.alternate]){if(!t)continue;const n=kS(t,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(n)return n}},[i,e])}const Yz=Symbol.for("react.context"),Kz=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===Yz;function Zz(){const i=jk(),[e]=ie.useState(()=>new Map);e.clear();let t=i;for(;t;){const n=t.type;Kz(n)&&n!==CS&&!e.has(n)&&e.set(n,ie.use(Ck(n))),t=t.return}return e}function Jz(){const i=Zz();return ie.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>ie.createElement(e,null,ie.createElement(t.Provider,{...n,value:i.get(t)})),e=>ie.createElement(Rk,{...e})),[i])}function Dk(i){let e=i.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Ik=i=>i&&i.isOrthographicCamera,Qz=i=>i&&i.hasOwnProperty("current"),e6=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),s0=((i,e)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?ie.useLayoutEffect:ie.useEffect;function RS(i){const e=ie.useRef(i);return s0(()=>{e.current=i},[i]),e}function t6(){const i=jk(),e=Jz();return ie.useMemo(()=>({children:t})=>{const s=!!kS(i,!0,a=>a.type===ie.StrictMode)?ie.StrictMode:ie.Fragment;return l.jsx(s,{children:l.jsx(e,{children:t})})},[i,e])}function n6({set:i}){return s0(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const i6=(i=>(i=class extends ie.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function Ok(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}function Lf(i){var e;return(e=i.__r3f)==null?void 0:e.root.getState()}const Ni={obj:i=>i===Object(i)&&!Ni.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:s=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(Ni.str(i)||Ni.num(i)||Ni.boo(i))return i===e;const a=Ni.obj(i);if(a&&n==="reference")return i===e;const u=Ni.arr(i);if(u&&t==="reference")return i===e;if((u||a)&&i===e)return!0;let h;for(h in i)if(!(h in e))return!1;if(a&&t==="shallow"&&n==="shallow"){for(h in s?e:i)if(!Ni.equ(i[h],e[h],{strict:s,objects:"reference"}))return!1}else for(h in s?e:i)if(i[h]!==e[h])return!1;if(Ni.und(h)){if(u&&i.length===0&&e.length===0||a&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function s6(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const e in i){const t=i[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const Lk=["children","key","ref"];function r6(i){const e={};for(const t in i)Lk.includes(t)||(e[t]=i[t]);return e}function Gb(i,e,t,n){const s=i;let a=s?.__r3f;return a||(a={root:e,type:t,parent:null,children:[],props:r6(n),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=a)),a}function qg(i,e){if(!e.includes("-"))return{root:i,key:e,target:i[e]};if(e in i)return{root:i,key:e,target:i[e]};let t=i;const n=e.split("-");for(const s of n){if(typeof t!="object"||t===null){if(t!==void 0){const a=n.slice(n.indexOf(s)).join("-");return{root:t,key:a,target:void 0}}return{root:i,key:e,target:void 0}}e=s,i=t,t=t[e]}return{root:i,key:e,target:t}}const VN=/-\d+$/;function qb(i,e){if(Ni.str(e.props.attach)){if(VN.test(e.props.attach)){const s=e.props.attach.replace(VN,""),{root:a,key:u}=qg(i.object,s);Array.isArray(a[u])||(a[u]=[])}const{root:t,key:n}=qg(i.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else Ni.fun(e.props.attach)&&(e.previousAttach=e.props.attach(i.object,e.object))}function Wb(i,e){if(Ni.str(e.props.attach)){const{root:t,key:n}=qg(i.object,e.props.attach),s=e.previousAttach;s===void 0?delete t[n]:t[n]=s}else e.previousAttach==null||e.previousAttach(i.object,e.object);delete e.previousAttach}const _w=[...Lk,"args","dispose","attach","object","onUpdate","dispose"],HN=new Map;function a6(i){let e=HN.get(i.constructor);try{e||(e=new i.constructor,HN.set(i.constructor,e))}catch{}return e}function o6(i,e){const t={};for(const n in e)if(!_w.includes(n)&&!Ni.equ(e[n],i.props[n])){t[n]=e[n];for(const s in e)s.startsWith(`${n}-`)&&(t[s]=e[s])}for(const n in i.props){if(_w.includes(n)||e.hasOwnProperty(n))continue;const{root:s,key:a}=qg(i.object,n);if(s.constructor&&s.constructor.length===0){const u=a6(s);Ni.und(u)||(t[a]=u[a])}else t[a]=0}return t}const l6=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],c6=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function gu(i,e){var t;const n=i.__r3f,s=n&&Dk(n).getState(),a=n?.eventCount;for(const h in e){let p=e[h];if(_w.includes(h))continue;if(n&&c6.test(h)){typeof p=="function"?n.handlers[h]=p:delete n.handlers[h],n.eventCount=Object.keys(n.handlers).length;continue}if(p===void 0)continue;let{root:m,key:v,target:b}=qg(i,h);if(b===void 0&&(typeof m!="object"||m===null))throw Error(`R3F: Cannot set "${h}". Ensure it is an object before setting "${v}".`);if(b instanceof tp&&p instanceof tp)b.mask=p.mask;else if(b instanceof vt&&e6(p))b.set(p);else if(b!==null&&typeof b=="object"&&typeof b.set=="function"&&typeof b.copy=="function"&&p!=null&&p.constructor&&b.constructor===p.constructor)b.copy(p);else if(b!==null&&typeof b=="object"&&typeof b.set=="function"&&Array.isArray(p))typeof b.fromArray=="function"?b.fromArray(p):b.set(...p);else if(b!==null&&typeof b=="object"&&typeof b.set=="function"&&typeof p=="number")typeof b.setScalar=="function"?b.setScalar(p):b.set(p);else{var u;m[v]=p,s&&!s.linear&&l6.includes(v)&&(u=m[v])!=null&&u.isTexture&&m[v].format===_s&&m[v].type===xr&&(m[v].colorSpace=Js)}}if(n!=null&&n.parent&&s!=null&&s.internal&&(t=n.object)!=null&&t.isObject3D&&a!==n.eventCount){const h=n.object,p=s.internal.interaction.indexOf(h);p>-1&&s.internal.interaction.splice(p,1),n.eventCount&&h.raycast!==null&&s.internal.interaction.push(h)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&hp(n),i}function hp(i){var e;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const t=(e=i.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function Uk(i,e){i.manual||(Ik(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix())}const Vr=i=>i?.isObject3D;function Lv(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function Pk(i,e,t,n){const s=t.get(e);s&&(t.delete(e),t.size===0&&(i.delete(n),s.target.releasePointerCapture(n)))}function u6(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,s)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((n,s)=>{Pk(t.capturedMap,e,n,s)})}function d6(i){function e(p){const{internal:m}=i.getState(),v=p.offsetX-m.initialClick[0],b=p.offsetY-m.initialClick[1];return Math.round(Math.sqrt(v*v+b*b))}function t(p){return p.filter(m=>["Move","Over","Enter","Out","Leave"].some(v=>{var b;return(b=m.__r3f)==null?void 0:b.handlers["onPointer"+v]}))}function n(p,m){const v=i.getState(),b=new Set,y=[],w=m?m(v.internal.interaction):v.internal.interaction;for(let N=0;N<w.length;N++){const j=Lf(w[N]);j&&(j.raycaster.camera=void 0)}v.previousRoot||v.events.compute==null||v.events.compute(p,v);function M(N){const j=Lf(N);if(!j||!j.events.enabled||j.raycaster.camera===null)return[];if(j.raycaster.camera===void 0){var R;j.events.compute==null||j.events.compute(p,j,(R=j.previousRoot)==null?void 0:R.getState()),j.raycaster.camera===void 0&&(j.raycaster.camera=null)}return j.raycaster.camera?j.raycaster.intersectObject(N,!0):[]}let k=w.flatMap(M).sort((N,j)=>{const R=Lf(N.object),D=Lf(j.object);return!R||!D?N.distance-j.distance:D.events.priority-R.events.priority||N.distance-j.distance}).filter(N=>{const j=Lv(N);return b.has(j)?!1:(b.add(j),!0)});v.events.filter&&(k=v.events.filter(k,v));for(const N of k){let j=N.object;for(;j;){var T;(T=j.__r3f)!=null&&T.eventCount&&y.push({...N,eventObject:j}),j=j.parent}}if("pointerId"in p&&v.internal.capturedMap.has(p.pointerId))for(let N of v.internal.capturedMap.get(p.pointerId).values())b.has(Lv(N.intersection))||y.push(N.intersection);return y}function s(p,m,v,b){if(p.length){const y={stopped:!1};for(const w of p){let M=Lf(w.object);if(M||w.object.traverseAncestors(k=>{const T=Lf(k);if(T)return M=T,!1}),M){const{raycaster:k,pointer:T,camera:N,internal:j}=M,R=new Y(T.x,T.y,0).unproject(N),D=U=>{var L,W;return(L=(W=j.capturedMap.get(U))==null?void 0:W.has(w.eventObject))!=null?L:!1},I=U=>{const L={intersection:w,target:m.target};j.capturedMap.has(U)?j.capturedMap.get(U).set(w.eventObject,L):j.capturedMap.set(U,new Map([[w.eventObject,L]])),m.target.setPointerCapture(U)},P=U=>{const L=j.capturedMap.get(U);L&&Pk(j.capturedMap,w.eventObject,L,U)};let z={};for(let U in m){let L=m[U];typeof L!="function"&&(z[U]=L)}let G={...w,...z,pointer:T,intersections:p,stopped:y.stopped,delta:v,unprojectedPoint:R,ray:k.ray,camera:N,stopPropagation(){const U="pointerId"in m&&j.capturedMap.get(m.pointerId);if((!U||U.has(w.eventObject))&&(G.stopped=y.stopped=!0,j.hovered.size&&Array.from(j.hovered.values()).find(L=>L.eventObject===w.eventObject))){const L=p.slice(0,p.indexOf(w));a([...L,w])}},target:{hasPointerCapture:D,setPointerCapture:I,releasePointerCapture:P},currentTarget:{hasPointerCapture:D,setPointerCapture:I,releasePointerCapture:P},nativeEvent:m};if(b(G),y.stopped===!0)break}}}return p}function a(p){const{internal:m}=i.getState();for(const v of m.hovered.values())if(!p.length||!p.find(b=>b.object===v.object&&b.index===v.index&&b.instanceId===v.instanceId)){const y=v.eventObject.__r3f;if(m.hovered.delete(Lv(v)),y!=null&&y.eventCount){const w=y.handlers,M={...v,intersections:p};w.onPointerOut==null||w.onPointerOut(M),w.onPointerLeave==null||w.onPointerLeave(M)}}}function u(p,m){for(let v=0;v<m.length;v++){const b=m[v].__r3f;b==null||b.handlers.onPointerMissed==null||b.handlers.onPointerMissed(p)}}function h(p){switch(p){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return m=>{const{internal:v}=i.getState();"pointerId"in m&&v.capturedMap.has(m.pointerId)&&requestAnimationFrame(()=>{v.capturedMap.has(m.pointerId)&&(v.capturedMap.delete(m.pointerId),a([]))})}}return function(v){const{onPointerMissed:b,internal:y}=i.getState();y.lastEvent.current=v;const w=p==="onPointerMove",M=p==="onClick"||p==="onContextMenu"||p==="onDoubleClick",T=n(v,w?t:void 0),N=M?e(v):0;p==="onPointerDown"&&(y.initialClick=[v.offsetX,v.offsetY],y.initialHits=T.map(R=>R.eventObject)),M&&!T.length&&N<=2&&(u(v,y.interaction),b&&b(v)),w&&a(T);function j(R){const D=R.eventObject,I=D.__r3f;if(!(I!=null&&I.eventCount))return;const P=I.handlers;if(w){if(P.onPointerOver||P.onPointerEnter||P.onPointerOut||P.onPointerLeave){const z=Lv(R),G=y.hovered.get(z);G?G.stopped&&R.stopPropagation():(y.hovered.set(z,R),P.onPointerOver==null||P.onPointerOver(R),P.onPointerEnter==null||P.onPointerEnter(R))}P.onPointerMove==null||P.onPointerMove(R)}else{const z=P[p];z?(!M||y.initialHits.includes(D))&&(u(v,y.interaction.filter(G=>!y.initialHits.includes(G))),z(R)):M&&y.initialHits.includes(D)&&u(v,y.interaction.filter(G=>!y.initialHits.includes(G)))}}s(T,v,N,j)}}return{handlePointer:h}}const GN=i=>!!(i!=null&&i.render),jS=ie.createContext(null),h6=(i,e)=>{const t=kk((h,p)=>{const m=new Y,v=new Y,b=new Y;function y(N=p().camera,j=v,R=p().size){const{width:D,height:I,top:P,left:z}=R,G=D/I;j.isVector3?b.copy(j):b.set(...j);const U=N.getWorldPosition(m).distanceTo(b);if(Ik(N))return{width:D/N.zoom,height:I/N.zoom,top:P,left:z,factor:1,distance:U,aspect:G};{const L=N.fov*Math.PI/180,W=2*Math.tan(L/2)*U,J=W*(D/I);return{width:J,height:W,top:P,left:z,factor:D/J,distance:U,aspect:G}}}let w;const M=N=>h(j=>({performance:{...j.performance,current:N}})),k=new ze;return{set:h,get:p,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(N=1)=>i(p(),N),advance:(N,j)=>e(N,j,p()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new SS,pointer:k,mouse:k,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const N=p();w&&clearTimeout(w),N.performance.current!==N.performance.min&&M(N.performance.min),w=setTimeout(()=>M(p().performance.max),N.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:y},setEvents:N=>h(j=>({...j,events:{...j.events,...N}})),setSize:(N,j,R=0,D=0)=>{const I=p().camera,P={width:N,height:j,top:R,left:D};h(z=>({size:P,viewport:{...z.viewport,...y(I,v,P)}}))},setDpr:N=>h(j=>{const R=Ok(N);return{viewport:{...j.viewport,dpr:R,initialDpr:j.viewport.initialDpr||R}}}),setFrameloop:(N="always")=>{const j=p().clock;j.stop(),j.elapsedTime=0,N!=="never"&&(j.start(),j.elapsedTime=0),h(()=>({frameloop:N}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:ie.createRef(),active:!1,frames:0,priority:0,subscribe:(N,j,R)=>{const D=p().internal;return D.priority=D.priority+(j>0?1:0),D.subscribers.push({ref:N,priority:j,store:R}),D.subscribers=D.subscribers.sort((I,P)=>I.priority-P.priority),()=>{const I=p().internal;I!=null&&I.subscribers&&(I.priority=I.priority-(j>0?1:0),I.subscribers=I.subscribers.filter(P=>P.ref!==N))}}}}}),n=t.getState();let s=n.size,a=n.viewport.dpr,u=n.camera;return t.subscribe(()=>{const{camera:h,size:p,viewport:m,gl:v,set:b}=t.getState();if(p.width!==s.width||p.height!==s.height||m.dpr!==a){s=p,a=m.dpr,Uk(h,p),m.dpr>0&&v.setPixelRatio(m.dpr);const y=typeof HTMLCanvasElement<"u"&&v.domElement instanceof HTMLCanvasElement;v.setSize(p.width,p.height,y)}h!==u&&(u=h,b(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(h)}})))}),t.subscribe(h=>i(h)),t};function DS(){const i=ie.useContext(jS);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function qN(i=t=>t,e){return DS()(i,e)}function f6(i,e=0){const t=DS(),n=t.getState().internal.subscribe,s=RS(i);return s0(()=>n(s,e,t),[e,n,t]),null}const p6=1,m6=8,g6=32,x6=2;var v6={version:"9.5.0"};function b6(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var WN={exports:{}},XN={exports:{}},$N;function y6(){return $N||($N=1,(function(i){i.exports=function(e){function t(c,d,x,_){return new Pp(c,d,x,_)}function n(){}function s(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)d+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(c){var d=c,x=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,(d.flags&4098)!==0&&(x=d.return),c=d.return;while(c)}return d.tag===3?x:null}function u(c){if(a(c)!==c)throw Error(s(188))}function h(c){var d=c.alternate;if(!d){if(d=a(c),d===null)throw Error(s(188));return d!==c?null:c}for(var x=c,_=d;;){var A=x.return;if(A===null)break;var C=A.alternate;if(C===null){if(_=A.return,_!==null){x=_;continue}break}if(A.child===C.child){for(C=A.child;C;){if(C===x)return u(A),c;if(C===_)return u(A),d;C=C.sibling}throw Error(s(188))}if(x.return!==_.return)x=A,_=C;else{for(var F=!1,te=A.child;te;){if(te===x){F=!0,x=A,_=C;break}if(te===_){F=!0,_=A,x=C;break}te=te.sibling}if(!F){for(te=C.child;te;){if(te===x){F=!0,x=C,_=A;break}if(te===_){F=!0,_=C,x=A;break}te=te.sibling}if(!F)throw Error(s(189))}}if(x.alternate!==_)throw Error(s(190))}if(x.tag!==3)throw Error(s(188));return x.stateNode.current===x?c:d}function p(c){var d=c.tag;if(d===5||d===26||d===27||d===6)return c;for(c=c.child;c!==null;){if(d=p(c),d!==null)return d;c=c.sibling}return null}function m(c){var d=c.tag;if(d===5||d===26||d===27||d===6)return c;for(c=c.child;c!==null;){if(c.tag!==4&&(d=m(c),d!==null))return d;c=c.sibling}return null}function v(c){return c===null||typeof c!="object"?null:(c=so&&c[so]||c["@@iterator"],typeof c=="function"?c:null)}function b(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===Ho?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case Dl:return"Fragment";case Ol:return"Profiler";case Il:return"StrictMode";case Ch:return"Suspense";case io:return"SuspenseList";case Yu:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case jl:return"Portal";case Ar:return c.displayName||"Context";case $u:return(c._context.displayName||"Context")+".Consumer";case jc:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case Rh:return d=c.displayName||null,d!==null?d:b(c.type)||"Memo";case Ts:d=c._payload,c=c._init;try{return b(c(d))}catch{}}return null}function y(c){return{current:c}}function w(c){0>Bl||(c.current=Gh[Bl],Gh[Bl]=null,Bl--)}function M(c,d){Bl++,Gh[Bl]=c.current,c.current=d}function k(c){return c>>>=0,c===0?32:31-(qh(c)/_x|0)|0}function T(c){var d=c&42;if(d!==0)return d;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return c&261888;case 262144:case 524288:case 1048576:case 2097152:return c&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function N(c,d,x){var _=c.pendingLanes;if(_===0)return 0;var A=0,C=c.suspendedLanes,F=c.pingedLanes;c=c.warmLanes;var te=_&134217727;return te!==0?(_=te&~C,_!==0?A=T(_):(F&=te,F!==0?A=T(F):x||(x=te&~c,x!==0&&(A=T(x))))):(te=_&~C,te!==0?A=T(te):F!==0?A=T(F):x||(x=_&~c,x!==0&&(A=T(x)))),A===0?0:d!==0&&d!==A&&(d&C)===0&&(C=A&-A,x=d&-d,C>=x||C===32&&(x&4194048)!==0)?d:A}function j(c,d){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&d)===0}function R(c,d){switch(c){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function D(){var c=zc;return zc<<=1,(zc&62914560)===0&&(zc=4194304),c}function I(c){for(var d=[],x=0;31>x;x++)d.push(c);return d}function P(c,d){c.pendingLanes|=d,d!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function z(c,d,x,_,A,C){var F=c.pendingLanes;c.pendingLanes=x,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=x,c.entangledLanes&=x,c.errorRecoveryDisabledLanes&=x,c.shellSuspendCounter=0;var te=c.entanglements,Ne=c.expirationTimes,Be=c.hiddenUpdates;for(x=F&~x;0<x;){var et=31-Hs(x),qe=1<<et;te[et]=0,Ne[et]=-1;var xt=Be[et];if(xt!==null)for(Be[et]=null,et=0;et<xt.length;et++){var Yt=xt[et];Yt!==null&&(Yt.lane&=-536870913)}x&=~qe}_!==0&&G(c,_,0),C!==0&&A===0&&c.tag!==0&&(c.suspendedLanes|=C&~(F&~d))}function G(c,d,x){c.pendingLanes|=d,c.suspendedLanes&=~d;var _=31-Hs(d);c.entangledLanes|=d,c.entanglements[_]=c.entanglements[_]|1073741824|x&261930}function U(c,d){var x=c.entangledLanes|=d;for(c=c.entanglements;x;){var _=31-Hs(x),A=1<<_;A&d|c[_]&d&&(c[_]|=d),x&=~A}}function L(c,d){var x=d&-d;return x=(x&42)!==0?1:W(x),(x&(c.suspendedLanes|d))!==0?0:x}function W(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function J(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function Q(c){if(typeof Sm=="function"&&Mx(c),Gs&&typeof Gs.setStrictMode=="function")try{Gs.setStrictMode(Vl,c)}catch{}}function ue(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}function ne(c){if(Zh===void 0)try{throw Error()}catch(x){var d=x.stack.trim().match(/\n( *(at )?)/);Zh=d&&d[1]||"",Ta=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zh+c+Ta}function X(c,d){if(!c||sd)return"";sd=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(d){var qe=function(){throw Error()};if(Object.defineProperty(qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(qe,[])}catch(Yt){var xt=Yt}Reflect.construct(c,[],qe)}else{try{qe.call()}catch(Yt){xt=Yt}c.call(qe.prototype)}}else{try{throw Error()}catch(Yt){xt=Yt}(qe=c())&&typeof qe.catch=="function"&&qe.catch(function(){})}}catch(Yt){if(Yt&&xt&&typeof Yt.stack=="string")return[Yt.stack,xt.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=_.DetermineComponentFrameRoot(),F=C[0],te=C[1];if(F&&te){var Ne=F.split(`
`),Be=te.split(`
`);for(A=_=0;_<Ne.length&&!Ne[_].includes("DetermineComponentFrameRoot");)_++;for(;A<Be.length&&!Be[A].includes("DetermineComponentFrameRoot");)A++;if(_===Ne.length||A===Be.length)for(_=Ne.length-1,A=Be.length-1;1<=_&&0<=A&&Ne[_]!==Be[A];)A--;for(;1<=_&&0<=A;_--,A--)if(Ne[_]!==Be[A]){if(_!==1||A!==1)do if(_--,A--,0>A||Ne[_]!==Be[A]){var et=`
`+Ne[_].replace(" at new "," at ");return c.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",c.displayName)),et}while(1<=_&&0<=A);break}}}finally{sd=!1,Error.prepareStackTrace=x}return(x=c?c.displayName||c.name:"")?ne(x):""}function Z(c,d){switch(c.tag){case 26:case 27:case 5:return ne(c.type);case 16:return ne("Lazy");case 13:return c.child!==d&&d!==null?ne("Suspense Fallback"):ne("Suspense");case 19:return ne("SuspenseList");case 0:case 15:return X(c.type,!1);case 11:return X(c.type.render,!1);case 1:return X(c.type,!0);case 31:return ne("Activity");default:return""}}function re(c){try{var d="",x=null;do d+=Z(c,x),x=c,c=c.return;while(c);return d}catch(_){return`
Error generating stack: `+_.message+`
`+_.stack}}function pe(c,d){if(typeof c=="object"&&c!==null){var x=Mm.get(c);return x!==void 0?x:(d={value:c,source:d,stack:re(d)},Mm.set(c,d),d)}return{value:c,source:d,stack:re(d)}}function we(c,d){oo[Aa++]=rd,oo[Aa++]=Vn,Vn=c,rd=d}function q(c,d,x){Rr[ur++]=rs,Rr[ur++]=Jr,Rr[ur++]=jr,jr=c;var _=rs;c=Jr;var A=32-Hs(_)-1;_&=~(1<<A),x+=1;var C=32-Hs(d)+A;if(30<C){var F=A-A%5;C=(_&(1<<F)-1).toString(32),_>>=F,A-=F,rs=1<<32-Hs(d)+A|x<<A|_,Jr=C+c}else rs=1<<C|x<<A|_,Jr=c}function ce(c){c.return!==null&&(we(c,1),q(c,1,0))}function Ee(c){for(;c===Vn;)Vn=oo[--Aa],oo[Aa]=null,rd=oo[--Aa],oo[Aa]=null;for(;c===jr;)jr=Rr[--ur],Rr[ur]=null,Jr=Rr[--ur],Rr[ur]=null,rs=Rr[--ur],Rr[ur]=null}function Pe(c,d){Rr[ur++]=rs,Rr[ur++]=Jr,Rr[ur++]=jr,rs=d.id,Jr=d.overflow,jr=c}function rt(c,d){M(as,d),M(lo,c),M(Zi,null),c=U0(d),w(Zi),M(Zi,c)}function me(){w(Zi),w(lo),w(as)}function Ce(c){c.memoizedState!==null&&M(ad,c);var d=Zi.current,x=Oc(d,c.type);d!==x&&(M(lo,c),M(Zi,x))}function Fe(c){lo.current===c&&(w(Zi),w(lo)),ad.current===c&&(w(ad),bi?Pl._currentValue=Ul:Pl._currentValue2=Ul)}function nt(c){var d=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ge(pe(d,c)),Jh}function ft(c,d){if(!ni)throw Error(s(175));cx(c.stateNode,c.type,c.memoizedProps,d,c)||nt(c,!0)}function sn(c){for(Vi=c.return;Vi;)switch(Vi.tag){case 5:case 31:case 13:ks=!1;return;case 27:case 3:ks=!0;return;default:Vi=Vi.return}}function pn(c){if(!ni||c!==Vi)return!1;if(!gn)return sn(c),gn=!0,!1;var d=c.tag;if(Fi?d!==3&&d!==27&&(d!==5||Pc(c.type)&&!As(c.type,c.memoizedProps))&&ii&&nt(c):d!==3&&(d!==5||Pc(c.type)&&!As(c.type,c.memoizedProps))&&ii&&nt(c),sn(c),d===13){if(!ni)throw Error(s(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));ii=hm(c)}else if(d===31){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));ii=dx(c)}else ii=Fi&&d===27?tx(c.type,ii):Vi?ex(c.stateNode):null;return!0}function Ot(){ni&&(ii=Vi=null,gn=!1)}function je(){var c=ka;return c!==null&&(Xs===null?Xs=c:Xs.push.apply(Xs,c),ka=null),c}function Ge(c){ka===null?ka=[c]:ka.push(c)}function Oe(c,d,x){bi?(M(Dr,d._currentValue),d._currentValue=x):(M(Dr,d._currentValue2),d._currentValue2=x)}function tt(c){var d=Dr.current;bi?c._currentValue=d:c._currentValue2=d,w(Dr)}function K(c,d,x){for(;c!==null;){var _=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,_!==null&&(_.childLanes|=d)):_!==null&&(_.childLanes&d)!==d&&(_.childLanes|=d),c===x)break;c=c.return}}function Et(c,d,x,_){var A=c.child;for(A!==null&&(A.return=c);A!==null;){var C=A.dependencies;if(C!==null){var F=A.child;C=C.firstContext;e:for(;C!==null;){var te=C;C=A;for(var Ne=0;Ne<d.length;Ne++)if(te.context===d[Ne]){C.lanes|=x,te=C.alternate,te!==null&&(te.lanes|=x),K(C.return,x,c),_||(F=null);break e}C=te.next}}else if(A.tag===18){if(F=A.return,F===null)throw Error(s(341));F.lanes|=x,C=F.alternate,C!==null&&(C.lanes|=x),K(F,x,c),F=null}else F=A.child;if(F!==null)F.return=A;else for(F=A;F!==null;){if(F===c){F=null;break}if(A=F.sibling,A!==null){A.return=F.return,F=A;break}F=F.return}A=F}}function at(c,d,x,_){c=null;for(var A=d,C=!1;A!==null;){if(!C){if((A.flags&524288)!==0)C=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var F=A.alternate;if(F===null)throw Error(s(387));if(F=F.memoizedProps,F!==null){var te=A.type;_i(A.pendingProps.value,F.value)||(c!==null?c.push(te):c=[te])}}else if(A===ad.current){if(F=A.alternate,F===null)throw Error(s(387));F.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(c!==null?c.push(Pl):c=[Pl])}A=A.return}c!==null&&Et(d,c,x,_),d.flags|=262144}function Tt(c){for(c=c.firstContext;c!==null;){var d=c.context;if(!_i(bi?d._currentValue:d._currentValue2,c.memoizedValue))return!0;c=c.next}return!1}function Ye(c){Xn=c,Qr=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function $(c){return oe(Xn,c)}function B(c,d){return Xn===null&&Ye(c),oe(c,d)}function oe(c,d){var x=bi?d._currentValue:d._currentValue2;if(d={context:d,memoizedValue:x,next:null},Qr===null){if(c===null)throw Error(s(308));Qr=d,c.dependencies={lanes:0,firstContext:d},c.flags|=524288}else Qr=Qr.next=d;return x}function Te(){return{controller:new Ex,data:new Map,refCount:0}}function Le(c){c.refCount--,c.refCount===0&&Ji(t_,function(){c.controller.abort()})}function Ae(){}function pt(c){c!==Un&&c.next===null&&(Un===null?od=Un=c:Un=Un.next=c),Ir=!0,gs||(gs=!0,ht())}function Je(c,d){if(!Qh&&Ir){Qh=!0;do for(var x=!1,_=od;_!==null;){if(c!==0){var A=_.pendingLanes;if(A===0)var C=0;else{var F=_.suspendedLanes,te=_.pingedLanes;C=(1<<31-Hs(42|c)+1)-1,C&=A&~(F&~te),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(x=!0,mt(_,C))}else C=xn,C=N(_,_===on?C:0,_.cancelPendingCommit!==null||_.timeoutHandle!==Vs),(C&3)===0||j(_,C)||(x=!0,mt(_,C));_=_.next}while(x);Qh=!1}}function yt(){jt()}function jt(){Ir=gs=!1;var c=0;$o!==0&&Ll()&&(c=$o);for(var d=ms(),x=null,_=od;_!==null;){var A=_.next,C=Ve(_,d);C===0?(_.next=null,x===null?od=A:x.next=A,A===null&&(Un=x)):(x=_,(c!==0||(C&3)!==0)&&(Ir=!0)),_=A}Ii!==0&&Ii!==5||Je(c),$o!==0&&($o=0)}function Ve(c,d){for(var x=c.suspendedLanes,_=c.pingedLanes,A=c.expirationTimes,C=c.pendingLanes&-62914561;0<C;){var F=31-Hs(C),te=1<<F,Ne=A[F];Ne===-1?((te&x)===0||(te&_)!==0)&&(A[F]=R(te,d)):Ne<=d&&(c.expiredLanes|=te),C&=~te}if(d=on,x=xn,x=N(c,c===d?x:0,c.cancelPendingCommit!==null||c.timeoutHandle!==Vs),_=c.callbackNode,x===0||c===d&&(zn===2||zn===9)||c.cancelPendingCommit!==null)return _!==null&&_!==null&&Xh(_),c.callbackNode=null,c.callbackPriority=0;if((x&3)===0||j(c,x)){if(d=x&-x,d===c.callbackPriority)return d;switch(_!==null&&Xh(_),J(x)){case 2:case 8:x=Sx;break;case 32:x=id;break;case 268435456:x=Yh;break;default:x=id}return _=$e.bind(null,c),x=nd(x,_),c.callbackPriority=d,c.callbackNode=x,d}return _!==null&&_!==null&&Xh(_),c.callbackPriority=2,c.callbackNode=null,2}function $e(c,d){if(Ii!==0&&Ii!==5)return c.callbackNode=null,c.callbackPriority=0,null;var x=c.callbackNode;if(Ma()&&c.callbackNode!==x)return null;var _=xn;return _=N(c,c===on?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==Vs),_===0?null:(Zr(c,_,d),Ve(c,ms()),c.callbackNode!=null&&c.callbackNode===x?$e.bind(null,c):null)}function mt(c,d){if(Ma())return null;Zr(c,d,!0)}function ht(){Kp?Zp(function(){(hn&6)!==0?nd($h,yt):jt()}):nd($h,yt)}function st(){if($o===0){var c=co;c===0&&(c=Wh,Wh<<=1,(Wh&261888)===0&&(Wh=256)),$o=c}return $o}function en(c,d){if(Bc===null){var x=Bc=[];Em=0,co=st(),Hi={status:"pending",value:void 0,then:function(_){x.push(_)}}}return Em++,d.then(ae,ae),d}function ae(){if(--Em===0&&Bc!==null){Hi!==null&&(Hi.status="fulfilled");var c=Bc;Bc=null,co=0,Hi=null;for(var d=0;d<c.length;d++)(0,c[d])()}}function ot(c,d){var x=[],_={status:"pending",value:null,reason:null,then:function(A){x.push(A)}};return c.then(function(){_.status="fulfilled",_.value=d;for(var A=0;A<x.length;A++)(0,x[A])(d)},function(A){for(_.status="rejected",_.reason=A,A=0;A<x.length;A++)(0,x[A])(void 0)}),_}function Xe(){var c=Yo.current;return c!==null?c:on.pooledCache}function ct(c,d){d===null?M(Yo,Yo.current):M(Yo,d.pool)}function He(){var c=Xe();return c===null?null:{parent:bi?si._currentValue:si._currentValue2,pool:c}}function Ie(c,d){if(_i(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var x=Object.keys(c),_=Object.keys(d);if(x.length!==_.length)return!1;for(_=0;_<x.length;_++){var A=x[_];if(!e_.call(d,A)||!_i(c[A],d[A]))return!1}return!0}function Qe(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Gt(c,d,x){switch(x=c[x],x===void 0?c.push(d):x!==d&&(d.then(Ae,Ae),d=x),d.status){case"fulfilled":return d.value;case"rejected":throw c=d.reason,is(c),c;default:if(typeof d.status=="string")d.then(Ae,Ae);else{if(c=on,c!==null&&100<c.shellSuspendCounter)throw Error(s(482));c=d,c.status="pending",c.then(function(_){if(d.status==="pending"){var A=d;A.status="fulfilled",A.value=_}},function(_){if(d.status==="pending"){var A=d;A.status="rejected",A.reason=_}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw c=d.reason,is(c),c}throw Cs=d,Gi}}function yn(c){try{var d=c._init;return d(c._payload)}catch(x){throw x!==null&&typeof x=="object"&&typeof x.then=="function"?(Cs=x,Gi):x}}function Sn(){if(Cs===null)throw Error(s(459));var c=Cs;return Cs=null,c}function is(c){if(c===Gi||c===Lr)throw Error(s(483))}function Us(c){var d=Hl;return Hl+=1,Ko===null&&(Ko=[]),Gt(Ko,c,d)}function No(c,d){d=d.props.ref,c.ref=d!==void 0?d:null}function To(c,d){throw d.$$typeof===Rl?Error(s(525)):(c=Object.prototype.toString.call(d),Error(s(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c)))}function vl(c){function d(be,fe){if(c){var Me=be.deletions;Me===null?(be.deletions=[fe],be.flags|=16):Me.push(fe)}}function x(be,fe){if(!c)return null;for(;fe!==null;)d(be,fe),fe=fe.sibling;return null}function _(be){for(var fe=new Map;be!==null;)be.key!==null?fe.set(be.key,be):fe.set(be.index,be),be=be.sibling;return fe}function A(be,fe){return be=lr(be,fe),be.index=0,be.sibling=null,be}function C(be,fe,Me){return be.index=Me,c?(Me=be.alternate,Me!==null?(Me=Me.index,Me<fe?(be.flags|=67108866,fe):Me):(be.flags|=67108866,fe)):(be.flags|=1048576,fe)}function F(be){return c&&be.alternate===null&&(be.flags|=67108866),be}function te(be,fe,Me,Ze){return fe===null||fe.tag!==6?(fe=zp(Me,be.mode,Ze),fe.return=be,fe):(fe=A(fe,Me),fe.return=be,fe)}function Ne(be,fe,Me,Ze){var Lt=Me.type;return Lt===Dl?et(be,fe,Me.props.children,Ze,Me.key):fe!==null&&(fe.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===Ts&&yn(Lt)===fe.type)?(fe=A(fe,Me.props),No(fe,Me),fe.return=be,fe):(fe=no(Me.type,Me.key,Me.props,null,be.mode,Ze),No(fe,Me),fe.return=be,fe)}function Be(be,fe,Me,Ze){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==Me.containerInfo||fe.stateNode.implementation!==Me.implementation?(fe=Fp(Me,be.mode,Ze),fe.return=be,fe):(fe=A(fe,Me.children||[]),fe.return=be,fe)}function et(be,fe,Me,Ze,Lt){return fe===null||fe.tag!==7?(fe=Tr(Me,be.mode,Ze,Lt),fe.return=be,fe):(fe=A(fe,Me),fe.return=be,fe)}function qe(be,fe,Me){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return fe=zp(""+fe,be.mode,Me),fe.return=be,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case Ea:return Me=no(fe.type,fe.key,fe.props,null,be.mode,Me),No(Me,fe),Me.return=be,Me;case jl:return fe=Fp(fe,be.mode,Me),fe.return=be,fe;case Ts:return fe=yn(fe),qe(be,fe,Me)}if(Go(fe)||v(fe))return fe=Tr(fe,be.mode,Me,null),fe.return=be,fe;if(typeof fe.then=="function")return qe(be,Us(fe),Me);if(fe.$$typeof===Ar)return qe(be,B(be,fe),Me);To(be,fe)}return null}function xt(be,fe,Me,Ze){var Lt=fe!==null?fe.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint")return Lt!==null?null:te(be,fe,""+Me,Ze);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case Ea:return Me.key===Lt?Ne(be,fe,Me,Ze):null;case jl:return Me.key===Lt?Be(be,fe,Me,Ze):null;case Ts:return Me=yn(Me),xt(be,fe,Me,Ze)}if(Go(Me)||v(Me))return Lt!==null?null:et(be,fe,Me,Ze,null);if(typeof Me.then=="function")return xt(be,fe,Us(Me),Ze);if(Me.$$typeof===Ar)return xt(be,fe,B(be,Me),Ze);To(be,Me)}return null}function Yt(be,fe,Me,Ze,Lt){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return be=be.get(Me)||null,te(fe,be,""+Ze,Lt);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case Ea:return be=be.get(Ze.key===null?Me:Ze.key)||null,Ne(fe,be,Ze,Lt);case jl:return be=be.get(Ze.key===null?Me:Ze.key)||null,Be(fe,be,Ze,Lt);case Ts:return Ze=yn(Ze),Yt(be,fe,Me,Ze,Lt)}if(Go(Ze)||v(Ze))return be=be.get(Me)||null,et(fe,be,Ze,Lt,null);if(typeof Ze.then=="function")return Yt(be,fe,Me,Us(Ze),Lt);if(Ze.$$typeof===Ar)return Yt(be,fe,Me,B(fe,Ze),Lt);To(fe,Ze)}return null}function Mi(be,fe,Me,Ze){for(var Lt=null,fi=null,Pt=fe,En=fe=0,Qi=null;Pt!==null&&En<Me.length;En++){Pt.index>En?(Qi=Pt,Pt=null):Qi=Pt.sibling;var Cn=xt(be,Pt,Me[En],Ze);if(Cn===null){Pt===null&&(Pt=Qi);break}c&&Pt&&Cn.alternate===null&&d(be,Pt),fe=C(Cn,fe,En),fi===null?Lt=Cn:fi.sibling=Cn,fi=Cn,Pt=Qi}if(En===Me.length)return x(be,Pt),gn&&we(be,En),Lt;if(Pt===null){for(;En<Me.length;En++)Pt=qe(be,Me[En],Ze),Pt!==null&&(fe=C(Pt,fe,En),fi===null?Lt=Pt:fi.sibling=Pt,fi=Pt);return gn&&we(be,En),Lt}for(Pt=_(Pt);En<Me.length;En++)Qi=Yt(Pt,be,En,Me[En],Ze),Qi!==null&&(c&&Qi.alternate!==null&&Pt.delete(Qi.key===null?En:Qi.key),fe=C(Qi,fe,En),fi===null?Lt=Qi:fi.sibling=Qi,fi=Qi);return c&&Pt.forEach(function(zr){return d(be,zr)}),gn&&we(be,En),Lt}function $c(be,fe,Me,Ze){if(Me==null)throw Error(s(151));for(var Lt=null,fi=null,Pt=fe,En=fe=0,Qi=null,Cn=Me.next();Pt!==null&&!Cn.done;En++,Cn=Me.next()){Pt.index>En?(Qi=Pt,Pt=null):Qi=Pt.sibling;var zr=xt(be,Pt,Cn.value,Ze);if(zr===null){Pt===null&&(Pt=Qi);break}c&&Pt&&zr.alternate===null&&d(be,Pt),fe=C(zr,fe,En),fi===null?Lt=zr:fi.sibling=zr,fi=zr,Pt=Qi}if(Cn.done)return x(be,Pt),gn&&we(be,En),Lt;if(Pt===null){for(;!Cn.done;En++,Cn=Me.next())Cn=qe(be,Cn.value,Ze),Cn!==null&&(fe=C(Cn,fe,En),fi===null?Lt=Cn:fi.sibling=Cn,fi=Cn);return gn&&we(be,En),Lt}for(Pt=_(Pt);!Cn.done;En++,Cn=Me.next())Cn=Yt(Pt,be,En,Cn.value,Ze),Cn!==null&&(c&&Cn.alternate!==null&&Pt.delete(Cn.key===null?En:Cn.key),fe=C(Cn,fe,En),fi===null?Lt=Cn:fi.sibling=Cn,fi=Cn);return c&&Pt.forEach(function(n_){return d(be,n_)}),gn&&we(be,En),Lt}function sl(be,fe,Me,Ze){if(typeof Me=="object"&&Me!==null&&Me.type===Dl&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case Ea:e:{for(var Lt=Me.key;fe!==null;){if(fe.key===Lt){if(Lt=Me.type,Lt===Dl){if(fe.tag===7){x(be,fe.sibling),Ze=A(fe,Me.props.children),Ze.return=be,be=Ze;break e}}else if(fe.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===Ts&&yn(Lt)===fe.type){x(be,fe.sibling),Ze=A(fe,Me.props),No(Ze,Me),Ze.return=be,be=Ze;break e}x(be,fe);break}else d(be,fe);fe=fe.sibling}Me.type===Dl?(Ze=Tr(Me.props.children,be.mode,Ze,Me.key),Ze.return=be,be=Ze):(Ze=no(Me.type,Me.key,Me.props,null,be.mode,Ze),No(Ze,Me),Ze.return=be,be=Ze)}return F(be);case jl:e:{for(Lt=Me.key;fe!==null;){if(fe.key===Lt)if(fe.tag===4&&fe.stateNode.containerInfo===Me.containerInfo&&fe.stateNode.implementation===Me.implementation){x(be,fe.sibling),Ze=A(fe,Me.children||[]),Ze.return=be,be=Ze;break e}else{x(be,fe);break}else d(be,fe);fe=fe.sibling}Ze=Fp(Me,be.mode,Ze),Ze.return=be,be=Ze}return F(be);case Ts:return Me=yn(Me),sl(be,fe,Me,Ze)}if(Go(Me))return Mi(be,fe,Me,Ze);if(v(Me)){if(Lt=v(Me),typeof Lt!="function")throw Error(s(150));return Me=Lt.call(Me),$c(be,fe,Me,Ze)}if(typeof Me.then=="function")return sl(be,fe,Us(Me),Ze);if(Me.$$typeof===Ar)return sl(be,fe,B(be,Me),Ze);To(be,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint"?(Me=""+Me,fe!==null&&fe.tag===6?(x(be,fe.sibling),Ze=A(fe,Me),Ze.return=be,be=Ze):(x(be,fe),Ze=zp(Me,be.mode,Ze),Ze.return=be,be=Ze),F(be)):x(be,fe)}return function(be,fe,Me,Ze){try{Hl=0;var Lt=sl(be,fe,Me,Ze);return Ko=null,Lt}catch(Pt){if(Pt===Gi||Pt===Lr)throw Pt;var fi=t(29,Pt,null,be.mode);return fi.lanes=Ze,fi.return=be,fi}}}function Ao(){for(var c=Ra,d=Gl=Ra=0;d<c;){var x=ls[d];ls[d++]=null;var _=ls[d];ls[d++]=null;var A=ls[d];ls[d++]=null;var C=ls[d];if(ls[d++]=null,_!==null&&A!==null){var F=_.pending;F===null?A.next=A:(A.next=F.next,F.next=A),_.pending=A}C!==0&&tr(x,A,C)}}function Wa(c,d,x,_){ls[Ra++]=c,ls[Ra++]=d,ls[Ra++]=x,ls[Ra++]=_,Gl|=_,c.lanes|=_,c=c.alternate,c!==null&&(c.lanes|=_)}function bl(c,d,x,_){return Wa(c,d,x,_),ai(c)}function fs(c,d){return Wa(c,null,null,d),ai(c)}function tr(c,d,x){c.lanes|=x;var _=c.alternate;_!==null&&(_.lanes|=x);for(var A=!1,C=c.return;C!==null;)C.childLanes|=x,_=C.alternate,_!==null&&(_.childLanes|=x),C.tag===22&&(c=C.stateNode,c===null||c._visibility&1||(A=!0)),c=C,C=C.return;return c.tag===3?(C=c.stateNode,A&&d!==null&&(A=31-Hs(x),c=C.hiddenUpdates,_=c[A],_===null?c[A]=[d]:_.push(d),d.lane=x|536870912),C):null}function ai(c){if(50<kn)throw kn=0,fd=null,Error(s(185));for(var d=c.return;d!==null;)c=d,d=c.return;return c.tag===3?c.stateNode:null}function Pi(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nr(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function ir(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function sr(c,d,x){var _=c.updateQueue;if(_===null)return null;if(_=_.shared,(hn&2)!==0){var A=_.pending;return A===null?d.next=d:(d.next=A.next,A.next=d),_.pending=d,d=ai(c),tr(c,null,x),d}return Wa(c,_,d,x),ai(c)}function ko(c,d,x){if(d=d.updateQueue,d!==null&&(d=d.shared,(x&4194048)!==0)){var _=d.lanes;_&=c.pendingLanes,x|=_,d.lanes=x,U(c,x)}}function yl(c,d){var x=c.updateQueue,_=c.alternate;if(_!==null&&(_=_.updateQueue,x===_)){var A=null,C=null;if(x=x.firstBaseUpdate,x!==null){do{var F={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};C===null?A=C=F:C=C.next=F,x=x.next}while(x!==null);C===null?A=C=d:C=C.next=d}else A=C=d;x={baseState:_.baseState,firstBaseUpdate:A,lastBaseUpdate:C,shared:_.shared,callbacks:_.callbacks},c.updateQueue=x;return}c=x.lastBaseUpdate,c===null?x.firstBaseUpdate=d:c.next=d,x.lastBaseUpdate=d}function Yr(){if(tf){var c=Hi;if(c!==null)throw c}}function Xa(c,d,x,_){tf=!1;var A=c.updateQueue;dr=!1;var C=A.firstBaseUpdate,F=A.lastBaseUpdate,te=A.shared.pending;if(te!==null){A.shared.pending=null;var Ne=te,Be=Ne.next;Ne.next=null,F===null?C=Be:F.next=Be,F=Ne;var et=c.alternate;et!==null&&(et=et.updateQueue,te=et.lastBaseUpdate,te!==F&&(te===null?et.firstBaseUpdate=Be:te.next=Be,et.lastBaseUpdate=Ne))}if(C!==null){var qe=A.baseState;F=0,et=Be=Ne=null,te=C;do{var xt=te.lane&-536870913,Yt=xt!==te.lane;if(Yt?(xn&xt)===xt:(_&xt)===xt){xt!==0&&xt===co&&(tf=!0),et!==null&&(et=et.next={lane:0,tag:te.tag,payload:te.payload,callback:null,next:null});e:{var Mi=c,$c=te;xt=d;var sl=x;switch($c.tag){case 1:if(Mi=$c.payload,typeof Mi=="function"){qe=Mi.call(sl,qe,xt);break e}qe=Mi;break e;case 3:Mi.flags=Mi.flags&-65537|128;case 0:if(Mi=$c.payload,xt=typeof Mi=="function"?Mi.call(sl,qe,xt):Mi,xt==null)break e;qe=kh({},qe,xt);break e;case 2:dr=!0}}xt=te.callback,xt!==null&&(c.flags|=64,Yt&&(c.flags|=8192),Yt=A.callbacks,Yt===null?A.callbacks=[xt]:Yt.push(xt))}else Yt={lane:xt,tag:te.tag,payload:te.payload,callback:te.callback,next:null},et===null?(Be=et=Yt,Ne=qe):et=et.next=Yt,F|=xt;if(te=te.next,te===null){if(te=A.shared.pending,te===null)break;Yt=te,te=Yt.next,Yt.next=null,A.lastBaseUpdate=Yt,A.shared.pending=null}}while(!0);et===null&&(Ne=qe),A.baseState=Ne,A.firstBaseUpdate=Be,A.lastBaseUpdate=et,C===null&&(A.shared.lanes=0),ho|=F,c.lanes=F,c.memoizedState=qe}}function $a(c,d){if(typeof c!="function")throw Error(s(191,c));c.call(d)}function Ya(c,d){var x=c.callbacks;if(x!==null)for(c.callbacks=null,c=0;c<x.length;c++)$a(x[c],d)}function Co(c,d){c=Da,M(Zo,c),M(ql,d),Da=c|d.baseLanes}function ha(){M(Zo,Da),M(ql,ql.current)}function V(){Da=Zo.current,w(ql),w(Zo)}function le(c){var d=c.alternate;M(gi,gi.current&1),M(qs,c),Ws===null&&(d===null||ql.current!==null||d.memoizedState!==null)&&(Ws=c)}function _e(c){M(gi,gi.current),M(qs,c),Ws===null&&(Ws=c)}function ve(c){c.tag===22?(M(gi,gi.current),M(qs,c),Ws===null&&(Ws=c)):he()}function he(){M(gi,gi.current),M(qs,qs.current)}function Ke(c){w(qs),Ws===c&&(Ws=null),w(gi)}function gt(c){for(var d=c;d!==null;){if(d.tag===13){var x=d.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||Wo(x)||Uh(x)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function We(){throw Error(s(321))}function bt(c,d){if(d===null)return!1;for(var x=0;x<d.length&&x<c.length;x++)if(!_i(c[x],d[x]))return!1;return!0}function _t(c,d,x,_,A,C){return uo=C,Zt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Dt.H=c===null||c.memoizedState===null?ui:ja,_n=!1,C=x(_,A),_n=!1,tn&&(C=St(d,x,_,A)),Rt(c),C}function Rt(c){Dt.H=hr;var d=At!==null&&At.next!==null;if(uo=0,Wt=At=Zt=null,an=!1,Ur=0,ea=null,d)throw Error(s(300));c===null||Jn||(c=c.dependencies,c!==null&&Tt(c)&&(Jn=!0))}function St(c,d,x,_){Zt=c;var A=0;do{if(tn&&(ea=null),Ur=0,tn=!1,25<=A)throw Error(s(301));if(A+=1,Wt=At=null,c.updateQueue!=null){var C=c.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}Dt.H=Jo,C=d(x,_)}while(tn);return C}function Ut(){var c=Dt.H,d=c.useState()[0];return d=typeof d.then=="function"?zt(d):d,c=c.useState()[0],(At!==null?At.memoizedState:null)!==c&&(Zt.flags|=1024),d}function An(){var c=xs!==0;return xs=0,c}function Gn(c,d,x){d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~x}function Bn(c){if(an){for(c=c.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}an=!1}uo=0,Wt=At=Zt=null,tn=!1,Ur=xs=0,ea=null}function $t(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?Zt.memoizedState=Wt=c:Wt=Wt.next=c,Wt}function lt(){if(At===null){var c=Zt.alternate;c=c!==null?c.memoizedState:null}else c=At.next;var d=Wt===null?Zt.memoizedState:Wt.next;if(d!==null)Wt=d,At=c;else{if(c===null)throw Zt.alternate===null?Error(s(467)):Error(s(310));At=c,c={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Wt===null?Zt.memoizedState=Wt=c:Wt=Wt.next=c}return Wt}function Mn(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zt(c){var d=Ur;return Ur+=1,ea===null&&(ea=[]),c=Gt(ea,c,d),d=Zt,(Wt===null?d.memoizedState:Wt.next)===null&&(d=d.alternate,Dt.H=d===null||d.memoizedState===null?ui:ja),c}function ki(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return zt(c);if(c.$$typeof===Ar)return $(c)}throw Error(s(438,String(c)))}function Kr(c){var d=null,x=Zt.updateQueue;if(x!==null&&(d=x.memoCache),d==null){var _=Zt.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(d={data:_.data.map(function(A){return A.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),x===null&&(x=Mn(),Zt.updateQueue=x),x.memoCache=d,x=d.data[d.index],x===void 0)for(x=d.data[d.index]=Array(c),_=0;_<c;_++)x[_]=Hp;return d.index++,x}function Zn(c,d){return typeof d=="function"?d(c):d}function Ss(c){var d=lt();return jn(d,At,c)}function jn(c,d,x){var _=c.queue;if(_===null)throw Error(s(311));_.lastRenderedReducer=x;var A=c.baseQueue,C=_.pending;if(C!==null){if(A!==null){var F=A.next;A.next=C.next,C.next=F}d.baseQueue=A=C,_.pending=null}if(C=c.baseState,A===null)c.memoizedState=C;else{d=A.next;var te=F=null,Ne=null,Be=d,et=!1;do{var qe=Be.lane&-536870913;if(qe!==Be.lane?(xn&qe)===qe:(uo&qe)===qe){var xt=Be.revertLane;if(xt===0)Ne!==null&&(Ne=Ne.next={lane:0,revertLane:0,gesture:null,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null}),qe===co&&(et=!0);else if((uo&xt)===xt){Be=Be.next,xt===co&&(et=!0);continue}else qe={lane:0,revertLane:Be.revertLane,gesture:null,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null},Ne===null?(te=Ne=qe,F=C):Ne=Ne.next=qe,Zt.lanes|=xt,ho|=xt;qe=Be.action,_n&&x(C,qe),C=Be.hasEagerState?Be.eagerState:x(C,qe)}else xt={lane:qe,revertLane:Be.revertLane,gesture:Be.gesture,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null},Ne===null?(te=Ne=xt,F=C):Ne=Ne.next=xt,Zt.lanes|=qe,ho|=qe;Be=Be.next}while(Be!==null&&Be!==d);if(Ne===null?F=C:Ne.next=te,!_i(C,c.memoizedState)&&(Jn=!0,et&&(x=Hi,x!==null)))throw x;c.memoizedState=C,c.baseState=F,c.baseQueue=Ne,_.lastRenderedState=C}return A===null&&(_.lanes=0),[c.memoizedState,_.dispatch]}function zi(c){var d=lt(),x=d.queue;if(x===null)throw Error(s(311));x.lastRenderedReducer=c;var _=x.dispatch,A=x.pending,C=d.memoizedState;if(A!==null){x.pending=null;var F=A=A.next;do C=c(C,F.action),F=F.next;while(F!==A);_i(C,d.memoizedState)||(Jn=!0),d.memoizedState=C,d.baseQueue===null&&(d.baseState=C),x.lastRenderedState=C}return[C,_]}function Ci(c,d,x){var _=Zt,A=lt(),C=gn;if(C){if(x===void 0)throw Error(s(407));x=x()}else x=d();var F=!_i((At||A).memoizedState,x);if(F&&(A.memoizedState=x,Jn=!0),A=A.queue,pc(_l.bind(null,_,A,c),[c]),A.getSnapshot!==d||F||Wt!==null&&Wt.memoizedState.tag&1){if(_.flags|=2048,rr(9,{destroy:void 0},Xi.bind(null,_,A,x,d),null),on===null)throw Error(s(349));C||(uo&127)!==0||Wi(_,d,x)}return x}function Wi(c,d,x){c.flags|=16384,c={getSnapshot:d,value:x},d=Zt.updateQueue,d===null?(d=Mn(),Zt.updateQueue=d,d.stores=[c]):(x=d.stores,x===null?d.stores=[c]:x.push(c))}function Xi(c,d,x,_){d.value=x,d.getSnapshot=_,_r(d)&&r0(c)}function _l(c,d,x){return x(function(){_r(d)&&r0(c)})}function _r(c){var d=c.getSnapshot;c=c.value;try{var x=d();return!_i(c,x)}catch{return!0}}function r0(c){var d=fs(c,2);d!==null&&li(d,c,2)}function pp(c){var d=$t();if(typeof c=="function"){var x=c;if(c=x(),_n){Q(!0);try{x()}finally{Q(!1)}}}return d.memoizedState=d.baseState=c,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zn,lastRenderedState:c},d}function ku(c,d,x,_){return c.baseState=x,jn(c,At,typeof _=="function"?_:Zn)}function Ka(c,d,x,_,A){if(ch(c))throw Error(s(485));if(c=d.action,c!==null){var C={payload:A,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){C.listeners.push(F)}};Dt.T!==null?x(!0):C.isTransition=!1,_(C),x=d.pending,x===null?(C.next=d.pending=C,nh(d,C)):(C.next=x.next,d.pending=x.next=C)}}function nh(c,d){var x=d.action,_=d.payload,A=c.state;if(d.isTransition){var C=Dt.T,F={};Dt.T=F;try{var te=x(A,_),Ne=Dt.S;Ne!==null&&Ne(F,te),ih(c,d,te)}catch(Be){Ro(c,d,Be)}finally{C!==null&&F.types!==null&&(C.types=F.types),Dt.T=C}}else try{C=x(A,_),ih(c,d,C)}catch(Be){Ro(c,d,Be)}}function ih(c,d,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(_){wl(c,d,_)},function(_){return Ro(c,d,_)}):wl(c,d,x)}function wl(c,d,x){d.status="fulfilled",d.value=x,mp(d),c.state=x,d=c.pending,d!==null&&(x=d.next,x===d?c.pending=null:(x=x.next,d.next=x,nh(c,x)))}function Ro(c,d,x){var _=c.pending;if(c.pending=null,_!==null){_=_.next;do d.status="rejected",d.reason=x,mp(d),d=d.next;while(d!==_)}c.action=null}function mp(c){c=c.listeners;for(var d=0;d<c.length;d++)(0,c[d])()}function sh(c,d){return d}function gp(c,d){if(gn){var x=on.formState;if(x!==null){e:{var _=Zt;if(gn){if(ii){var A=Q0(ii,ks);if(A){ii=ex(A),_=lm(A);break e}}nt(_)}_=!1}_&&(d=x[0])}}x=$t(),x.memoizedState=x.baseState=d,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sh,lastRenderedState:d},x.queue=_,x=d0.bind(null,Zt,_),_.dispatch=x,_=pp(!1);var C=lh.bind(null,Zt,!1,_.queue);return _=$t(),A={state:d,dispatch:null,action:c,pending:null},_.queue=A,x=Ka.bind(null,Zt,A,C,x),A.dispatch=x,_.memoizedState=c,[d,x,!1]}function hc(c){var d=lt();return fa(d,At,c)}function fa(c,d,x){if(d=jn(c,d,sh)[0],c=Ss(Zn)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var _=zt(d)}catch(F){throw F===Gi?Lr:F}else _=d;d=lt();var A=d.queue,C=A.dispatch;return x!==d.memoizedState&&(Zt.flags|=2048,rr(9,{destroy:void 0},xp.bind(null,A,x),null)),[_,C,c]}function xp(c,d){c.action=d}function fc(c){var d=lt(),x=At;if(x!==null)return fa(d,x,c);lt(),d=d.memoizedState,x=lt();var _=x.queue.dispatch;return x.memoizedState=c,[d,_,!1]}function rr(c,d,x,_){return c={tag:c,create:x,deps:_,inst:d,next:null},d=Zt.updateQueue,d===null&&(d=Mn(),Zt.updateQueue=d),x=d.lastEffect,x===null?d.lastEffect=c.next=c:(_=x.next,x.next=c,c.next=_,d.lastEffect=c),c}function rh(){return lt().memoizedState}function Sl(c,d,x,_){var A=$t();Zt.flags|=c,A.memoizedState=rr(1|d,{destroy:void 0},x,_===void 0?null:_)}function Cu(c,d,x,_){var A=lt();_=_===void 0?null:_;var C=A.memoizedState.inst;At!==null&&_!==null&&bt(_,At.memoizedState.deps)?A.memoizedState=rr(d,C,x,_):(Zt.flags|=c,A.memoizedState=rr(1|d,C,x,_))}function Ru(c,d){Sl(8390656,8,c,d)}function pc(c,d){Cu(2048,8,c,d)}function a0(c){Zt.flags|=4;var d=Zt.updateQueue;if(d===null)d=Mn(),Zt.updateQueue=d,d.events=[c];else{var x=d.events;x===null?d.events=[c]:x.push(c)}}function Ms(c){var d=lt().memoizedState;return a0({ref:d,nextImpl:c}),function(){if((hn&2)!==0)throw Error(s(440));return d.impl.apply(void 0,arguments)}}function jo(c,d){return Cu(4,2,c,d)}function ju(c,d){return Cu(4,4,c,d)}function mc(c,d){if(typeof d=="function"){c=c();var x=d(c);return function(){typeof x=="function"?x():d(null)}}if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function o0(c,d,x){x=x!=null?x.concat([c]):null,Cu(4,4,mc.bind(null,d,c),x)}function Du(){}function ah(c,d){var x=lt();d=d===void 0?null:d;var _=x.memoizedState;return d!==null&&bt(d,_[1])?_[0]:(x.memoizedState=[c,d],c)}function gc(c,d){var x=lt();d=d===void 0?null:d;var _=x.memoizedState;if(d!==null&&bt(d,_[1]))return _[0];if(_=c(),_n){Q(!0);try{c()}finally{Q(!1)}}return x.memoizedState=[_,d],_}function xc(c,d,x){return x===void 0||(uo&1073741824)!==0&&(xn&261930)===0?c.memoizedState=d:(c.memoizedState=x,c=Qa(),Zt.lanes|=c,ho|=c,x)}function vp(c,d,x,_){return _i(x,d)?x:ql.current!==null?(c=xc(c,x,_),_i(c,d)||(Jn=!0),c):(uo&42)===0||(uo&1073741824)!==0&&(xn&261930)===0?(Jn=!0,c.memoizedState=x):(c=Qa(),Zt.lanes|=c,ho|=c,d)}function l0(c,d,x,_,A){var C=kr();mn(C!==0&&8>C?C:8);var F=Dt.T,te={};Dt.T=te,lh(c,!1,d,x);try{var Ne=A(),Be=Dt.S;if(Be!==null&&Be(te,Ne),Ne!==null&&typeof Ne=="object"&&typeof Ne.then=="function"){var et=ot(Ne,_);Iu(c,d,et,ti(c))}else Iu(c,d,_,ti(c))}catch(qe){Iu(c,d,{then:function(){},status:"rejected",reason:qe},ti())}finally{mn(C),F!==null&&te.types!==null&&(F.types=te.types),Dt.T=F}}function c0(c){var d=c.memoizedState;if(d!==null)return d;d={memoizedState:Ul,baseState:Ul,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zn,lastRenderedState:Ul},next:null};var x={};return d.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zn,lastRenderedState:x},next:null},c.memoizedState=d,c=c.alternate,c!==null&&(c.memoizedState=d),d}function bp(){return $(Pl)}function oh(){return lt().memoizedState}function u0(){return lt().memoizedState}function Gy(c){for(var d=c.return;d!==null;){switch(d.tag){case 24:case 3:var x=ti();c=ir(x);var _=sr(d,c,x);_!==null&&(li(_,d,x),ko(_,d,x)),d={cache:Te()},c.payload=d;return}d=d.return}}function qy(c,d,x){var _=ti();x={lane:_,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},ch(c)?h0(d,x):(x=bl(c,d,x,_),x!==null&&(li(x,c,_),f0(x,d,_)))}function d0(c,d,x){var _=ti();Iu(c,d,x,_)}function Iu(c,d,x,_){var A={lane:_,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null};if(ch(c))h0(d,A);else{var C=c.alternate;if(c.lanes===0&&(C===null||C.lanes===0)&&(C=d.lastRenderedReducer,C!==null))try{var F=d.lastRenderedState,te=C(F,x);if(A.hasEagerState=!0,A.eagerState=te,_i(te,F))return Wa(c,d,A,0),on===null&&Ao(),!1}catch{}if(x=bl(c,d,A,_),x!==null)return li(x,c,_),f0(x,d,_),!0}return!1}function lh(c,d,x,_){if(_={lane:2,revertLane:st(),gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null},ch(c)){if(d)throw Error(s(479))}else d=bl(c,x,_,2),d!==null&&li(d,c,2)}function ch(c){var d=c.alternate;return c===Zt||d!==null&&d===Zt}function h0(c,d){tn=an=!0;var x=c.pending;x===null?d.next=d:(d.next=x.next,x.next=d),c.pending=d}function f0(c,d,x){if((x&4194048)!==0){var _=d.lanes;_&=c.pendingLanes,x|=_,d.lanes=x,U(c,x)}}function yp(c,d,x,_){d=c.memoizedState,x=x(_,d),x=x==null?d:kh({},d,x),c.memoizedState=x,c.lanes===0&&(c.updateQueue.baseState=x)}function uh(c,d,x,_,A,C,F){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(_,C,F):d.prototype&&d.prototype.isPureReactComponent?!Ie(x,_)||!Ie(A,C):!0}function p0(c,d,x,_){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(x,_),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(x,_),d.state!==c&&ld.enqueueReplaceState(d,d.state,null)}function Ml(c,d){var x=d;if("ref"in d){x={};for(var _ in d)_!=="ref"&&(x[_]=d[_])}if(c=c.defaultProps){x===d&&(x=kh({},x));for(var A in c)x[A]===void 0&&(x[A]=c[A])}return x}function dh(c,d){try{var x=c.onUncaughtError;x(d.value,{componentStack:d.stack})}catch(_){setTimeout(function(){throw _})}}function _p(c,d,x){try{var _=c.onCaughtError;_(x.value,{componentStack:x.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function wp(c,d,x){return x=ir(x),x.tag=3,x.payload={element:null},x.callback=function(){dh(c,d)},x}function m0(c){return c=ir(c),c.tag=3,c}function g0(c,d,x,_){var A=x.type.getDerivedStateFromError;if(typeof A=="function"){var C=_.value;c.payload=function(){return A(C)},c.callback=function(){_p(d,x,_)}}var F=x.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(c.callback=function(){_p(d,x,_),typeof A!="function"&&(fo===null?fo=new Set([this]):fo.add(this));var te=_.stack;this.componentDidCatch(_.value,{componentStack:te!==null?te:""})})}function Wy(c,d,x,_,A){if(x.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(d=x.alternate,d!==null&&at(d,x,A,!0),x=qs.current,x!==null){switch(x.tag){case 31:case 13:return Ws===null?Ac():x.alternate===null&&hi===0&&(hi=3),x.flags&=-257,x.flags|=65536,x.lanes=A,_===Ca?x.flags|=16384:(d=x.updateQueue,d===null?x.updateQueue=new Set([_]):d.add(_),Rc(c,_,A)),!1;case 22:return x.flags|=65536,_===Ca?x.flags|=16384:(d=x.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([_])},x.updateQueue=d):(x=d.retryQueue,x===null?d.retryQueue=new Set([_]):x.add(_)),Rc(c,_,A)),!1}throw Error(s(435,x.tag))}return Rc(c,_,A),Ac(),!1}if(gn)return d=qs.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=A,_!==Jh&&(c=Error(s(422),{cause:_}),Ge(pe(c,x)))):(_!==Jh&&(d=Error(s(423),{cause:_}),Ge(pe(d,x))),c=c.current.alternate,c.flags|=65536,A&=-A,c.lanes|=A,_=pe(_,x),A=wp(c.stateNode,_,A),yl(c,A),hi!==4&&(hi=2)),!1;var C=Error(s(520),{cause:_});if(C=pe(C,x),ud===null?ud=[C]:ud.push(C),hi!==4&&(hi=2),d===null)return!0;_=pe(_,x),x=d;do{switch(x.tag){case 3:return x.flags|=65536,c=A&-A,x.lanes|=c,c=wp(x.stateNode,_,c),yl(x,c),!1;case 1:if(d=x.type,C=x.stateNode,(x.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(fo===null||!fo.has(C))))return x.flags|=65536,A&=-A,x.lanes|=A,A=m0(A),g0(A,c,x,_),yl(x,A),!1}x=x.return}while(x!==null);return!1}function ss(c,d,x,_){d.child=c===null?Nm(d,null,x,_):os(d,c.child,x,_)}function x0(c,d,x,_,A){x=x.render;var C=d.ref;if("ref"in _){var F={};for(var te in _)te!=="ref"&&(F[te]=_[te])}else F=_;return Ye(d),_=_t(c,d,x,F,C,A),te=An(),c!==null&&!Jn?(Gn(c,d,A),pa(c,d,A)):(gn&&te&&ce(d),d.flags|=1,ss(c,d,_,A),d.child)}function v0(c,d,x,_,A){if(c===null){var C=x.type;return typeof C=="function"&&!kl(C)&&C.defaultProps===void 0&&x.compare===null?(d.tag=15,d.type=C,b0(c,d,C,_,A)):(c=no(x.type,null,_,d,d.mode,A),c.ref=d.ref,c.return=d,d.child=c)}if(C=c.child,!Lu(c,A)){var F=C.memoizedProps;if(x=x.compare,x=x!==null?x:Ie,x(F,_)&&c.ref===d.ref)return pa(c,d,A)}return d.flags|=1,c=lr(C,_),c.ref=d.ref,c.return=d,d.child=c}function b0(c,d,x,_,A){if(c!==null){var C=c.memoizedProps;if(Ie(C,_)&&c.ref===d.ref)if(Jn=!1,d.pendingProps=_=C,Lu(c,A))(c.flags&131072)!==0&&(Jn=!0);else return d.lanes=c.lanes,pa(c,d,A)}return fh(c,d,x,_,A)}function y0(c,d,x,_){var A=_.children,C=c!==null?c.memoizedState:null;if(c===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),_.mode==="hidden"){if((d.flags&128)!==0){if(C=C!==null?C.baseLanes|x:x,c!==null){for(_=d.child=c.child,A=0;_!==null;)A=A|_.lanes|_.childLanes,_=_.sibling;_=A&~C}else _=0,d.child=null;return vc(c,d,C,x,_)}if((x&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},c!==null&&ct(d,C!==null?C.cachePool:null),C!==null?Co(d,C):ha(),ve(d);else return _=d.lanes=536870912,vc(c,d,C!==null?C.baseLanes|x:x,x,_)}else C!==null?(ct(d,C.cachePool),Co(d,C),he(),d.memoizedState=null):(c!==null&&ct(d,null),ha(),he());return ss(c,d,A,x),d.child}function El(c,d){return c!==null&&c.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function vc(c,d,x,_,A){var C=Xe();return C=C===null?null:{parent:bi?si._currentValue:si._currentValue2,pool:C},d.memoizedState={baseLanes:x,cachePool:C},c!==null&&ct(d,null),ha(),ve(d),c!==null&&at(c,d,_,!0),d.childLanes=A,null}function hh(c,d){return d=Do({mode:d.mode,children:d.children},c.mode),d.ref=c.ref,c.child=d,d.return=c,d}function Sp(c,d,x){return os(d,c.child,null,x),c=hh(d,d.pendingProps),c.flags|=2,Ke(d),d.memoizedState=null,c}function _0(c,d,x){var _=d.pendingProps,A=(d.flags&128)!==0;if(d.flags&=-129,c===null){if(gn){if(_.mode==="hidden")return c=hh(d,_),d.lanes=536870912,El(null,c);if(_e(d),(c=ii)?(c=um(c,ks),c!==null&&(d.memoizedState={dehydrated:c,treeContext:jr!==null?{id:rs,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},x=Bp(c),x.return=d,d.child=x,Vi=d,ii=null)):c=null,c===null)throw nt(d);return d.lanes=536870912,null}return hh(d,_)}var C=c.memoizedState;if(C!==null){var F=C.dehydrated;if(_e(d),A)if(d.flags&256)d.flags&=-257,d=Sp(c,d,x);else if(d.memoizedState!==null)d.child=c.child,d.flags|=128,d=null;else throw Error(s(558));else if(Jn||at(c,d,x,!1),A=(x&c.childLanes)!==0,Jn||A){if(_=on,_!==null&&(F=L(_,x),F!==0&&F!==C.retryLane))throw C.retryLane=F,fs(c,F),li(_,c,F),Rs;Ac(),d=Sp(c,d,x)}else c=C.treeContext,ni&&(ii=sx(F),Vi=d,gn=!0,ka=null,ks=!1,c!==null&&Pe(d,c)),d=hh(d,_),d.flags|=4096;return d}return c=lr(c.child,{mode:_.mode,children:_.children}),c.ref=d.ref,d.child=c,c.return=d,c}function Ou(c,d){var x=d.ref;if(x===null)c!==null&&c.ref!==null&&(d.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(s(284));(c===null||c.ref!==x)&&(d.flags|=4194816)}}function fh(c,d,x,_,A){return Ye(d),x=_t(c,d,x,_,void 0,A),_=An(),c!==null&&!Jn?(Gn(c,d,A),pa(c,d,A)):(gn&&_&&ce(d),d.flags|=1,ss(c,d,x,A),d.child)}function Mp(c,d,x,_,A,C){return Ye(d),d.updateQueue=null,x=St(d,_,x,A),Rt(c),_=An(),c!==null&&!Jn?(Gn(c,d,C),pa(c,d,C)):(gn&&_&&ce(d),d.flags|=1,ss(c,d,x,C),d.child)}function Nl(c,d,x,_,A){if(Ye(d),d.stateNode===null){var C=Na,F=x.contextType;typeof F=="object"&&F!==null&&(C=$(F)),C=new x(_,C),d.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=ld,d.stateNode=C,C._reactInternals=d,C=d.stateNode,C.props=_,C.state=d.memoizedState,C.refs={},Pi(d),F=x.contextType,C.context=typeof F=="object"&&F!==null?$(F):Na,C.state=d.memoizedState,F=x.getDerivedStateFromProps,typeof F=="function"&&(yp(d,x,F,_),C.state=d.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(F=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),F!==C.state&&ld.enqueueReplaceState(C,C.state,null),Xa(d,_,C,A),Yr(),C.state=d.memoizedState),typeof C.componentDidMount=="function"&&(d.flags|=4194308),_=!0}else if(c===null){C=d.stateNode;var te=d.memoizedProps,Ne=Ml(x,te);C.props=Ne;var Be=C.context,et=x.contextType;F=Na,typeof et=="object"&&et!==null&&(F=$(et));var qe=x.getDerivedStateFromProps;et=typeof qe=="function"||typeof C.getSnapshotBeforeUpdate=="function",te=d.pendingProps!==te,et||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(te||Be!==F)&&p0(d,C,_,F),dr=!1;var xt=d.memoizedState;C.state=xt,Xa(d,_,C,A),Yr(),Be=d.memoizedState,te||xt!==Be||dr?(typeof qe=="function"&&(yp(d,x,qe,_),Be=d.memoizedState),(Ne=dr||uh(d,x,Ne,_,xt,Be,F))?(et||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(d.flags|=4194308)):(typeof C.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=_,d.memoizedState=Be),C.props=_,C.state=Be,C.context=F,_=Ne):(typeof C.componentDidMount=="function"&&(d.flags|=4194308),_=!1)}else{C=d.stateNode,nr(c,d),F=d.memoizedProps,et=Ml(x,F),C.props=et,qe=d.pendingProps,xt=C.context,Be=x.contextType,Ne=Na,typeof Be=="object"&&Be!==null&&(Ne=$(Be)),te=x.getDerivedStateFromProps,(Be=typeof te=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(F!==qe||xt!==Ne)&&p0(d,C,_,Ne),dr=!1,xt=d.memoizedState,C.state=xt,Xa(d,_,C,A),Yr();var Yt=d.memoizedState;F!==qe||xt!==Yt||dr||c!==null&&c.dependencies!==null&&Tt(c.dependencies)?(typeof te=="function"&&(yp(d,x,te,_),Yt=d.memoizedState),(et=dr||uh(d,x,et,_,xt,Yt,Ne)||c!==null&&c.dependencies!==null&&Tt(c.dependencies))?(Be||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(_,Yt,Ne),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(_,Yt,Ne)),typeof C.componentDidUpdate=="function"&&(d.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof C.componentDidUpdate!="function"||F===c.memoizedProps&&xt===c.memoizedState||(d.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||F===c.memoizedProps&&xt===c.memoizedState||(d.flags|=1024),d.memoizedProps=_,d.memoizedState=Yt),C.props=_,C.state=Yt,C.context=Ne,_=et):(typeof C.componentDidUpdate!="function"||F===c.memoizedProps&&xt===c.memoizedState||(d.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||F===c.memoizedProps&&xt===c.memoizedState||(d.flags|=1024),_=!1)}return C=_,Ou(c,d),_=(d.flags&128)!==0,C||_?(C=d.stateNode,x=_&&typeof x.getDerivedStateFromError!="function"?null:C.render(),d.flags|=1,c!==null&&_?(d.child=os(d,c.child,null,A),d.child=os(d,null,x,A)):ss(c,d,x,A),d.memoizedState=C.state,c=d.child):c=pa(c,d,A),c}function w0(c,d,x,_){return Ot(),d.flags|=256,ss(c,d,x,_),d.child}function Ep(c){return{baseLanes:c,cachePool:He()}}function Np(c,d,x){return c=c!==null?c.childLanes&~x:0,d&&(c|=js),c}function Tp(c,d,x){var _=d.pendingProps,A=!1,C=(d.flags&128)!==0,F;if((F=C)||(F=c!==null&&c.memoizedState===null?!1:(gi.current&2)!==0),F&&(A=!0,d.flags&=-129),F=(d.flags&32)!==0,d.flags&=-33,c===null){if(gn){if(A?le(d):he(),(c=ii)?(c=lx(c,ks),c!==null&&(d.memoizedState={dehydrated:c,treeContext:jr!==null?{id:rs,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},x=Bp(c),x.return=d,d.child=x,Vi=d,ii=null)):c=null,c===null)throw nt(d);return Uh(c)?d.lanes=32:d.lanes=536870912,null}var te=_.children;return _=_.fallback,A?(he(),A=d.mode,te=Do({mode:"hidden",children:te},A),_=Tr(_,A,x,null),te.return=d,_.return=d,te.sibling=_,d.child=te,_=d.child,_.memoizedState=Ep(x),_.childLanes=Np(c,F,x),d.memoizedState=Wl,El(null,_)):(le(d),ph(d,te))}var Ne=c.memoizedState;if(Ne!==null&&(te=Ne.dehydrated,te!==null)){if(C)d.flags&256?(le(d),d.flags&=-257,d=Tl(c,d,x)):d.memoizedState!==null?(he(),d.child=c.child,d.flags|=128,d=null):(he(),te=_.fallback,A=d.mode,_=Do({mode:"visible",children:_.children},A),te=Tr(te,A,x,null),te.flags|=2,_.return=d,te.return=d,_.sibling=te,d.child=_,os(d,c.child,null,x),_=d.child,_.memoizedState=Ep(x),_.childLanes=Np(c,F,x),d.memoizedState=Wl,d=El(null,_));else if(le(d),Uh(te))F=Ph(te).digest,_=Error(s(419)),_.stack="",_.digest=F,Ge({value:_,source:null,stack:null}),d=Tl(c,d,x);else if(Jn||at(c,d,x,!1),F=(x&c.childLanes)!==0,Jn||F){if(F=on,F!==null&&(_=L(F,x),_!==0&&_!==Ne.retryLane))throw Ne.retryLane=_,fs(c,_),li(F,c,_),Rs;Wo(te)||Ac(),d=Tl(c,d,x)}else Wo(te)?(d.flags|=192,d.child=c.child,d=null):(c=Ne.treeContext,ni&&(ii=rx(te),Vi=d,gn=!0,ka=null,ks=!1,c!==null&&Pe(d,c)),d=ph(d,_.children),d.flags|=4096);return d}return A?(he(),te=_.fallback,A=d.mode,Ne=c.child,C=Ne.sibling,_=lr(Ne,{mode:"hidden",children:_.children}),_.subtreeFlags=Ne.subtreeFlags&65011712,C!==null?te=lr(C,te):(te=Tr(te,A,x,null),te.flags|=2),te.return=d,_.return=d,_.sibling=te,d.child=_,El(null,_),_=d.child,te=c.child.memoizedState,te===null?te=Ep(x):(A=te.cachePool,A!==null?(Ne=bi?si._currentValue:si._currentValue2,A=A.parent!==Ne?{parent:Ne,pool:Ne}:A):A=He(),te={baseLanes:te.baseLanes|x,cachePool:A}),_.memoizedState=te,_.childLanes=Np(c,F,x),d.memoizedState=Wl,El(c.child,_)):(le(d),x=c.child,c=x.sibling,x=lr(x,{mode:"visible",children:_.children}),x.return=d,x.sibling=null,c!==null&&(F=d.deletions,F===null?(d.deletions=[c],d.flags|=16):F.push(c)),d.child=x,d.memoizedState=null,x)}function ph(c,d){return d=Do({mode:"visible",children:d},c.mode),d.return=c,c.child=d}function Do(c,d){return c=t(22,c,null,d),c.lanes=0,c}function Tl(c,d,x){return os(d,c.child,null,x),c=ph(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function S0(c,d,x){c.lanes|=d;var _=c.alternate;_!==null&&(_.lanes|=d),K(c.return,d,x)}function bc(c,d,x,_,A,C){var F=c.memoizedState;F===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:_,tail:x,tailMode:A,treeForkCount:C}:(F.isBackwards=d,F.rendering=null,F.renderingStartTime=0,F.last=_,F.tail=x,F.tailMode=A,F.treeForkCount=C)}function Ap(c,d,x){var _=d.pendingProps,A=_.revealOrder,C=_.tail;_=_.children;var F=gi.current,te=(F&2)!==0;if(te?(F=F&1|2,d.flags|=128):F&=1,M(gi,F),ss(c,d,_,x),_=gn?rd:0,!te&&c!==null&&(c.flags&128)!==0)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&S0(c,x,d);else if(c.tag===19)S0(c,x,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}switch(A){case"forwards":for(x=d.child,A=null;x!==null;)c=x.alternate,c!==null&&gt(c)===null&&(A=x),x=x.sibling;x=A,x===null?(A=d.child,d.child=null):(A=x.sibling,x.sibling=null),bc(d,!1,A,x,C,_);break;case"backwards":case"unstable_legacy-backwards":for(x=null,A=d.child,d.child=null;A!==null;){if(c=A.alternate,c!==null&&gt(c)===null){d.child=A;break}c=A.sibling,A.sibling=x,x=A,A=c}bc(d,!0,x,null,C,_);break;case"together":bc(d,!1,null,null,void 0,_);break;default:d.memoizedState=null}return d.child}function pa(c,d,x){if(c!==null&&(d.dependencies=c.dependencies),ho|=d.lanes,(x&d.childLanes)===0)if(c!==null){if(at(c,d,x,!1),(x&d.childLanes)===0)return null}else return null;if(c!==null&&d.child!==c.child)throw Error(s(153));if(d.child!==null){for(c=d.child,x=lr(c,c.pendingProps),d.child=x,x.return=d;c.sibling!==null;)c=c.sibling,x=x.sibling=lr(c,c.pendingProps),x.return=d;x.sibling=null}return d.child}function Lu(c,d){return(c.lanes&d)!==0?!0:(c=c.dependencies,!!(c!==null&&Tt(c)))}function kp(c,d,x){switch(d.tag){case 3:rt(d,d.stateNode.containerInfo),Oe(d,si,c.memoizedState.cache),Ot();break;case 27:case 5:Ce(d);break;case 4:rt(d,d.stateNode.containerInfo);break;case 10:Oe(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,_e(d),null;break;case 13:var _=d.memoizedState;if(_!==null)return _.dehydrated!==null?(le(d),d.flags|=128,null):(x&d.child.childLanes)!==0?Tp(c,d,x):(le(d),c=pa(c,d,x),c!==null?c.sibling:null);le(d);break;case 19:var A=(c.flags&128)!==0;if(_=(x&d.childLanes)!==0,_||(at(c,d,x,!1),_=(x&d.childLanes)!==0),A){if(_)return Ap(c,d,x);d.flags|=128}if(A=d.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),M(gi,gi.current),_)break;return null;case 22:return d.lanes=0,y0(c,d,x,d.pendingProps);case 24:Oe(d,si,c.memoizedState.cache)}return pa(c,d,x)}function Cp(c,d,x){if(c!==null)if(c.memoizedProps!==d.pendingProps)Jn=!0;else{if(!Lu(c,x)&&(d.flags&128)===0)return Jn=!1,kp(c,d,x);Jn=(c.flags&131072)!==0}else Jn=!1,gn&&(d.flags&1048576)!==0&&q(d,rd,d.index);switch(d.lanes=0,d.tag){case 16:e:{var _=d.pendingProps;if(c=yn(d.elementType),d.type=c,typeof c=="function")kl(c)?(_=Ml(c,_),d.tag=1,d=Nl(null,d,c,_,x)):(d.tag=0,d=fh(null,d,c,_,x));else{if(c!=null){var A=c.$$typeof;if(A===jc){d.tag=11,d=x0(null,d,c,_,x);break e}else if(A===Rh){d.tag=14,d=v0(null,d,c,_,x);break e}}throw d=b(c)||c,Error(s(306,d,""))}}return d;case 0:return fh(c,d,d.type,d.pendingProps,x);case 1:return _=d.type,A=Ml(_,d.pendingProps),Nl(c,d,_,A,x);case 3:e:{if(rt(d,d.stateNode.containerInfo),c===null)throw Error(s(387));var C=d.pendingProps;A=d.memoizedState,_=A.element,nr(c,d),Xa(d,C,null,x);var F=d.memoizedState;if(C=F.cache,Oe(d,si,C),C!==A.cache&&Et(d,[si],x,!0),Yr(),C=F.element,ni&&A.isDehydrated)if(A={element:C,isDehydrated:!1,cache:F.cache},d.updateQueue.baseState=A,d.memoizedState=A,d.flags&256){d=w0(c,d,C,x);break e}else if(C!==_){_=pe(Error(s(424)),d),Ge(_),d=w0(c,d,C,x);break e}else for(ni&&(ii=ix(d.stateNode.containerInfo),Vi=d,gn=!0,ka=null,ks=!0),x=Nm(d,null,C,x),d.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Ot(),C===_){d=pa(c,d,x);break e}ss(c,d,C,x)}d=d.child}return d;case 26:if(Cr)return Ou(c,d),c===null?(x=mm(d.type,null,d.pendingProps,null))?d.memoizedState=x:gn||(d.stateNode=Vh(d.type,d.pendingProps,as.current,d)):d.memoizedState=mm(d.type,c.memoizedProps,d.pendingProps,c.memoizedState),null;case 27:if(Fi)return Ce(d),c===null&&Fi&&gn&&(_=d.stateNode=Hh(d.type,d.pendingProps,as.current,Zi.current,!1),Vi=d,ks=!0,ii=cm(d.type,_,ii)),ss(c,d,d.pendingProps.children,x),Ou(c,d),c===null&&(d.flags|=4194304),d.child;case 5:return c===null&&gn&&(xx(d.type,d.pendingProps,Zi.current),(A=_=ii)&&(_=ax(_,d.type,d.pendingProps,ks),_!==null?(d.stateNode=_,Vi=d,ii=nx(_),ks=!1,A=!0):A=!1),A||nt(d)),Ce(d),A=d.type,C=d.pendingProps,F=c!==null?c.memoizedProps:null,_=C.children,As(A,C)?_=null:F!==null&&As(A,F)&&(d.flags|=32),d.memoizedState!==null&&(A=_t(c,d,Ut,null,null,x),bi?Pl._currentValue=A:Pl._currentValue2=A),Ou(c,d),ss(c,d,_,x),d.child;case 6:return c===null&&gn&&(pm(d.pendingProps,Zi.current),(c=x=ii)&&(x=ox(x,d.pendingProps,ks),x!==null?(d.stateNode=x,Vi=d,ii=null,c=!0):c=!1),c||nt(d)),null;case 13:return Tp(c,d,x);case 4:return rt(d,d.stateNode.containerInfo),_=d.pendingProps,c===null?d.child=os(d,null,_,x):ss(c,d,_,x),d.child;case 11:return x0(c,d,d.type,d.pendingProps,x);case 7:return ss(c,d,d.pendingProps,x),d.child;case 8:return ss(c,d,d.pendingProps.children,x),d.child;case 12:return ss(c,d,d.pendingProps.children,x),d.child;case 10:return _=d.pendingProps,Oe(d,d.type,_.value),ss(c,d,_.children,x),d.child;case 9:return A=d.type._context,_=d.pendingProps.children,Ye(d),A=$(A),_=_(A),d.flags|=1,ss(c,d,_,x),d.child;case 14:return v0(c,d,d.type,d.pendingProps,x);case 15:return b0(c,d,d.type,d.pendingProps,x);case 19:return Ap(c,d,x);case 31:return _0(c,d,x);case 22:return y0(c,d,x,d.pendingProps);case 24:return Ye(d),_=$(si),c===null?(A=Xe(),A===null&&(A=on,C=Te(),A.pooledCache=C,C.refCount++,C!==null&&(A.pooledCacheLanes|=x),A=C),d.memoizedState={parent:_,cache:A},Pi(d),Oe(d,si,A)):((c.lanes&x)!==0&&(nr(c,d),Xa(d,null,null,x),Yr()),A=c.memoizedState,C=d.memoizedState,A.parent!==_?(A={parent:_,cache:_},d.memoizedState=A,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=A),Oe(d,si,_)):(_=C.cache,Oe(d,si,_),_!==A.cache&&Et(d,[si],x,!0))),ss(c,d,d.pendingProps.children,x),d.child;case 29:throw d.pendingProps}throw Error(s(156,d.tag))}function wr(c){c.flags|=4}function Uu(c){cr&&(c.flags|=8)}function M0(c,d){if(c!==null&&c.child===d.child)return!1;if((d.flags&16)!==0)return!0;for(c=d.child;c!==null;){if((c.flags&8218)!==0||(c.subtreeFlags&8218)!==0)return!0;c=c.sibling}return!1}function Rp(c,d,x,_){if(bn)for(x=d.child;x!==null;){if(x.tag===5||x.tag===6)Zu(c,x.stateNode);else if(!(x.tag===4||Fi&&x.tag===27)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===d)break;for(;x.sibling===null;){if(x.return===null||x.return===d)return;x=x.return}x.sibling.return=x.return,x=x.sibling}else if(cr)for(var A=d.child;A!==null;){if(A.tag===5){var C=A.stateNode;x&&_&&(C=J0(C,A.type,A.memoizedProps)),Zu(c,C)}else if(A.tag===6)C=A.stateNode,x&&_&&(C=om(C,A.memoizedProps)),Zu(c,C);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)C=A.child,C!==null&&(C.return=A),Rp(c,A,!0,!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===d)break;for(;A.sibling===null;){if(A.return===null||A.return===d)return;A=A.return}A.sibling.return=A.return,A=A.sibling}}function E0(c,d,x,_){var A=!1;if(cr)for(var C=d.child;C!==null;){if(C.tag===5){var F=C.stateNode;x&&_&&(F=J0(F,C.type,C.memoizedProps)),rm(c,F)}else if(C.tag===6)F=C.stateNode,x&&_&&(F=om(F,C.memoizedProps)),rm(c,F);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)A=C.child,A!==null&&(A.return=C),E0(c,C,!0,!0),A=!0;else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===d)break;for(;C.sibling===null;){if(C.return===null||C.return===d)return A;C=C.return}C.sibling.return=C.return,C=C.sibling}return A}function N0(c,d){if(cr&&M0(c,d)){c=d.stateNode;var x=c.containerInfo,_=sm();E0(_,d,!1,!1),c.pendingChildren=_,wr(d),Z0(x,_)}}function jp(c,d,x,_){if(bn)c.memoizedProps!==_&&wr(d);else if(cr){var A=c.stateNode,C=c.memoizedProps;if((c=M0(c,d))||C!==_){var F=Zi.current;C=K0(A,x,C,_,!c,null),C===A?d.stateNode=A:(Uu(d),Fs(C,x,_,F)&&wr(d),d.stateNode=C,c&&Rp(C,d,!1,!1))}else d.stateNode=A}}function Es(c,d,x,_,A){if((c.mode&32)!==0&&(x===null?Ju(d,_):Uc(d,x,_))){if(c.flags|=16777216,(A&335544128)===A||Xp(d,_))if(ci(c.stateNode,d,_))c.flags|=8192;else if(vn())c.flags|=8192;else throw Cs=Ca,ef}else c.flags&=-16777217}function yc(c,d){if(bm(d)){if(c.flags|=16777216,!ym(d))if(vn())c.flags|=8192;else throw Cs=Ca,ef}else c.flags&=-16777217}function Pu(c,d){d!==null&&(c.flags|=4),c.flags&16384&&(d=c.tag!==22?D():536870912,c.lanes|=d,Wc|=d)}function _c(c,d){if(!gn)switch(c.tailMode){case"hidden":d=c.tail;for(var x=null;d!==null;)d.alternate!==null&&(x=d),d=d.sibling;x===null?c.tail=null:x.sibling=null;break;case"collapsed":x=c.tail;for(var _=null;x!==null;)x.alternate!==null&&(_=x),x=x.sibling;_===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:_.sibling=null}}function qn(c){var d=c.alternate!==null&&c.alternate.child===c.child,x=0,_=0;if(d)for(var A=c.child;A!==null;)x|=A.lanes|A.childLanes,_|=A.subtreeFlags&65011712,_|=A.flags&65011712,A.return=c,A=A.sibling;else for(A=c.child;A!==null;)x|=A.lanes|A.childLanes,_|=A.subtreeFlags,_|=A.flags,A.return=c,A=A.sibling;return c.subtreeFlags|=_,c.childLanes=x,d}function T0(c,d,x){var _=d.pendingProps;switch(Ee(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qn(d),null;case 1:return qn(d),null;case 3:return x=d.stateNode,_=null,c!==null&&(_=c.memoizedState.cache),d.memoizedState.cache!==_&&(d.flags|=2048),tt(si),me(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(c===null||c.child===null)&&(pn(d)?wr(d):c===null||c.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,je())),N0(c,d),qn(d),null;case 26:if(Cr){var A=d.type,C=d.memoizedState;return c===null?(wr(d),C!==null?(qn(d),yc(d,C)):(qn(d),Es(d,A,null,_,x))):C?C!==c.memoizedState?(wr(d),qn(d),yc(d,C)):(qn(d),d.flags&=-16777217):(C=c.memoizedProps,bn?C!==_&&wr(d):jp(c,d,A,_),qn(d),Es(d,A,C,_,x)),null}case 27:if(Fi){if(Fe(d),x=as.current,A=d.type,c!==null&&d.stateNode!=null)bn?c.memoizedProps!==_&&wr(d):jp(c,d,A,_);else{if(!_){if(d.stateNode===null)throw Error(s(166));return qn(d),null}c=Zi.current,pn(d)?ft(d,c):(c=Hh(A,_,x,c,!0),d.stateNode=c,wr(d))}return qn(d),null}case 5:if(Fe(d),A=d.type,c!==null&&d.stateNode!=null)jp(c,d,A,_);else{if(!_){if(d.stateNode===null)throw Error(s(166));return qn(d),null}if(C=Zi.current,pn(d))ft(d,C),px(d.stateNode,A,_,C)&&(d.flags|=64);else{var F=qp(A,_,as.current,C,d);Uu(d),Rp(F,d,!1,!1),d.stateNode=F,Fs(F,A,_,C)&&wr(d)}}return qn(d),Es(d,d.type,c===null?null:c.memoizedProps,d.pendingProps,x),null;case 6:if(c&&d.stateNode!=null)x=c.memoizedProps,bn?x!==_&&wr(d):cr&&(x!==_?(c=as.current,x=Zi.current,Uu(d),d.stateNode=ro(_,c,x,d)):d.stateNode=c.stateNode);else{if(typeof _!="string"&&d.stateNode===null)throw Error(s(166));if(c=as.current,x=Zi.current,pn(d)){if(!ni)throw Error(s(176));if(c=d.stateNode,x=d.memoizedProps,_=null,A=Vi,A!==null)switch(A.tag){case 27:case 5:_=A.memoizedProps}Zy(c,x,d,_)||nt(d,!0)}else Uu(d),d.stateNode=ro(_,c,x,d)}return qn(d),null;case 31:if(x=d.memoizedState,c===null||c.memoizedState!==null){if(_=pn(d),x!==null){if(c===null){if(!_)throw Error(s(318));if(!ni)throw Error(s(556));if(c=d.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(557));dm(c,d)}else Ot(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;qn(d),c=!1}else x=je(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=x),c=!0;if(!c)return d.flags&256?(Ke(d),d):(Ke(d),null);if((d.flags&128)!==0)throw Error(s(558))}return qn(d),null;case 13:if(_=d.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(A=pn(d),_!==null&&_.dehydrated!==null){if(c===null){if(!A)throw Error(s(318));if(!ni)throw Error(s(344));if(A=d.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(s(317));ux(A,d)}else Ot(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;qn(d),A=!1}else A=je(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=A),A=!0;if(!A)return d.flags&256?(Ke(d),d):(Ke(d),null)}return Ke(d),(d.flags&128)!==0?(d.lanes=x,d):(x=_!==null,c=c!==null&&c.memoizedState!==null,x&&(_=d.child,A=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(A=_.alternate.memoizedState.cachePool.pool),C=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(C=_.memoizedState.cachePool.pool),C!==A&&(_.flags|=2048)),x!==c&&x&&(d.child.flags|=8192),Pu(d,d.updateQueue),qn(d),null);case 4:return me(),N0(c,d),c===null&&Fn(d.stateNode.containerInfo),qn(d),null;case 10:return tt(d.type),qn(d),null;case 19:if(w(gi),_=d.memoizedState,_===null)return qn(d),null;if(A=(d.flags&128)!==0,C=_.rendering,C===null)if(A)_c(_,!1);else{if(hi!==0||c!==null&&(c.flags&128)!==0)for(c=d.child;c!==null;){if(C=gt(c),C!==null){for(d.flags|=128,_c(_,!1),c=C.updateQueue,d.updateQueue=c,Pu(d,c),d.subtreeFlags=0,c=x,x=d.child;x!==null;)Nh(x,c),x=x.sibling;return M(gi,gi.current&1|2),gn&&we(d,_.treeForkCount),d.child}c=c.sibling}_.tail!==null&&ms()>il&&(d.flags|=128,A=!0,_c(_,!1),d.lanes=4194304)}else{if(!A)if(c=gt(C),c!==null){if(d.flags|=128,A=!0,c=c.updateQueue,d.updateQueue=c,Pu(d,c),_c(_,!0),_.tail===null&&_.tailMode==="hidden"&&!C.alternate&&!gn)return qn(d),null}else 2*ms()-_.renderingStartTime>il&&x!==536870912&&(d.flags|=128,A=!0,_c(_,!1),d.lanes=4194304);_.isBackwards?(C.sibling=d.child,d.child=C):(c=_.last,c!==null?c.sibling=C:d.child=C,_.last=C)}return _.tail!==null?(c=_.tail,_.rendering=c,_.tail=c.sibling,_.renderingStartTime=ms(),c.sibling=null,x=gi.current,M(gi,A?x&1|2:x&1),gn&&we(d,_.treeForkCount),c):(qn(d),null);case 22:case 23:return Ke(d),V(),_=d.memoizedState!==null,c!==null?c.memoizedState!==null!==_&&(d.flags|=8192):_&&(d.flags|=8192),_?(x&536870912)!==0&&(d.flags&128)===0&&(qn(d),d.subtreeFlags&6&&(d.flags|=8192)):qn(d),x=d.updateQueue,x!==null&&Pu(d,x.retryQueue),x=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(x=c.memoizedState.cachePool.pool),_=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(_=d.memoizedState.cachePool.pool),_!==x&&(d.flags|=2048),c!==null&&w(Yo),null;case 24:return x=null,c!==null&&(x=c.memoizedState.cache),d.memoizedState.cache!==x&&(d.flags|=2048),tt(si),qn(d),null;case 25:return null;case 30:return null}throw Error(s(156,d.tag))}function Dp(c,d){switch(Ee(d),d.tag){case 1:return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return tt(si),me(),c=d.flags,(c&65536)!==0&&(c&128)===0?(d.flags=c&-65537|128,d):null;case 26:case 27:case 5:return Fe(d),null;case 31:if(d.memoizedState!==null){if(Ke(d),d.alternate===null)throw Error(s(340));Ot()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 13:if(Ke(d),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(s(340));Ot()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return w(gi),null;case 4:return me(),null;case 10:return tt(d.type),null;case 22:case 23:return Ke(d),V(),c!==null&&w(Yo),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 24:return tt(si),null;case 25:return null;default:return null}}function A0(c,d){switch(Ee(d),d.tag){case 3:tt(si),me();break;case 26:case 27:case 5:Fe(d);break;case 4:me();break;case 31:d.memoizedState!==null&&Ke(d);break;case 13:Ke(d);break;case 19:w(gi);break;case 10:tt(d.type);break;case 22:case 23:Ke(d),V(),c!==null&&w(Yo);break;case 24:tt(si)}}function ma(c,d){try{var x=d.updateQueue,_=x!==null?x.lastEffect:null;if(_!==null){var A=_.next;x=A;do{if((x.tag&c)===c){_=void 0;var C=x.create,F=x.inst;_=C(),F.destroy=_}x=x.next}while(x!==A)}}catch(te){Ft(d,d.return,te)}}function ga(c,d,x){try{var _=d.updateQueue,A=_!==null?_.lastEffect:null;if(A!==null){var C=A.next;_=C;do{if((_.tag&c)===c){var F=_.inst,te=F.destroy;if(te!==void 0){F.destroy=void 0,A=d;var Ne=x,Be=te;try{Be()}catch(et){Ft(A,Ne,et)}}}_=_.next}while(_!==C)}}catch(et){Ft(d,d.return,et)}}function wc(c){var d=c.updateQueue;if(d!==null){var x=c.stateNode;try{Ya(d,x)}catch(_){Ft(c,c.return,_)}}}function mh(c,d,x){x.props=Ml(c.type,c.memoizedProps),x.state=c.memoizedState;try{x.componentWillUnmount()}catch(_){Ft(c,d,_)}}function Sc(c,d){try{var x=c.ref;if(x!==null){switch(c.tag){case 26:case 27:case 5:var _=Ic(c.stateNode);break;case 30:_=c.stateNode;break;default:_=c.stateNode}typeof x=="function"?c.refCleanup=x(_):x.current=_}}catch(A){Ft(c,d,A)}}function ps(c,d){var x=c.ref,_=c.refCleanup;if(x!==null)if(typeof _=="function")try{_()}catch(A){Ft(c,d,A)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(A){Ft(c,d,A)}else x.current=null}function Al(c){var d=c.type,x=c.memoizedProps,_=c.stateNode;try{V0(_,d,x,c)}catch(A){Ft(c,c.return,A)}}function zu(c,d,x){try{H0(c.stateNode,c.type,x,d,c)}catch(_){Ft(c,c.return,_)}}function Ip(c){return c.tag===5||c.tag===3||(Cr?c.tag===26:!1)||(Fi?c.tag===27&&zl(c.type):!1)||c.tag===4}function Za(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Ip(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(Fi&&c.tag===27&&zl(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function gh(c,d,x){var _=c.tag;if(_===5||_===6)c=c.stateNode,d?q0(x,c,d):em(x,c);else if(_!==4&&(Fi&&_===27&&zl(c.type)&&(x=c.stateNode,d=null),c=c.child,c!==null))for(gh(c,d,x),c=c.sibling;c!==null;)gh(c,d,x),c=c.sibling}function Bu(c,d,x){var _=c.tag;if(_===5||_===6)c=c.stateNode,d?G0(x,c,d):Qp(x,c);else if(_!==4&&(Fi&&_===27&&zl(c.type)&&(x=c.stateNode),c=c.child,c!==null))for(Bu(c,d,x),c=c.sibling;c!==null;)Bu(c,d,x),c=c.sibling}function Op(c,d,x){c=c.containerInfo;try{am(c,x)}catch(_){Ft(d,d.return,_)}}function k0(c){var d=c.stateNode,x=c.memoizedProps;try{ji(c.type,x,d,c)}catch(_){Ft(c,c.return,_)}}function Xy(c,d){for(jh(c.containerInfo),wi=d;wi!==null;)if(c=wi,d=c.child,(c.subtreeFlags&1028)!==0&&d!==null)d.return=c,wi=d;else for(;wi!==null;){c=wi;var x=c.alternate;switch(d=c.flags,c.tag){case 0:if((d&4)!==0&&(d=c.updateQueue,d=d!==null?d.events:null,d!==null))for(var _=0;_<d.length;_++){var A=d[_];A.ref.impl=A.nextImpl}break;case 11:case 15:break;case 1:if((d&1024)!==0&&x!==null){d=void 0,_=c,A=x.memoizedProps,x=x.memoizedState;var C=_.stateNode;try{var F=Ml(_.type,A);d=C.getSnapshotBeforeUpdate(F,x),C.__reactInternalSnapshotBeforeUpdate=d}catch(te){Ft(_,_.return,te)}}break;case 3:(d&1024)!==0&&bn&&im(c.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(s(163))}if(d=c.sibling,d!==null){d.return=c.return,wi=d;break}wi=c.return}}function C0(c,d,x){var _=x.flags;switch(x.tag){case 0:case 11:case 15:Ns(c,x),_&4&&ma(5,x);break;case 1:if(Ns(c,x),_&4)if(c=x.stateNode,d===null)try{c.componentDidMount()}catch(F){Ft(x,x.return,F)}else{var A=Ml(x.type,d.memoizedProps);d=d.memoizedState;try{c.componentDidUpdate(A,d,c.__reactInternalSnapshotBeforeUpdate)}catch(F){Ft(x,x.return,F)}}_&64&&wc(x),_&512&&Sc(x,x.return);break;case 3:if(Ns(c,x),_&64&&(_=x.updateQueue,_!==null)){if(c=null,x.child!==null)switch(x.child.tag){case 27:case 5:c=Ic(x.child.stateNode);break;case 1:c=x.child.stateNode}try{Ya(_,c)}catch(F){Ft(x,x.return,F)}}break;case 27:Fi&&d===null&&_&4&&k0(x);case 26:case 5:if(Ns(c,x),d===null){if(_&4)Al(x);else if(_&64){c=x.type,d=x.memoizedProps,A=x.stateNode;try{hx(A,c,d,x)}catch(F){Ft(x,x.return,F)}}}_&512&&Sc(x,x.return);break;case 12:Ns(c,x);break;case 31:Ns(c,x),_&4&&Mr(c,x);break;case 13:Ns(c,x),_&4&&Vu(c,x),_&64&&(_=x.memoizedState,_!==null&&(_=_.dehydrated,_!==null&&(x=$y.bind(null,x),zh(_,x))));break;case 22:if(_=x.memoizedState!==null||xi,!_){d=d!==null&&d.memoizedState!==null||vi,A=xi;var C=vi;xi=_,(vi=d)&&!C?Nr(c,x,(x.subtreeFlags&8772)!==0):Ns(c,x),xi=A,vi=C}break;case 30:break;default:Ns(c,x)}}function Lp(c){var d=c.alternate;d!==null&&(c.alternate=null,Lp(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&Dh(d)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function Sr(c,d,x){for(x=x.child;x!==null;)Fu(c,d,x),x=x.sibling}function Fu(c,d,x){if(Gs&&typeof Gs.onCommitFiberUnmount=="function")try{Gs.onCommitFiberUnmount(Vl,x)}catch{}switch(x.tag){case 26:if(Cr){vi||ps(x,d),Sr(c,d,x),x.memoizedState?Xo(x.memoizedState):x.stateNode&&vm(x.stateNode);break}case 27:if(Fi){vi||ps(x,d);var _=di,A=Si;zl(x.type)&&(di=x.stateNode,Si=!1),Sr(c,d,x),Ki(x.stateNode),di=_,Si=A;break}case 5:vi||ps(x,d);case 6:if(bn){if(_=di,A=Si,di=null,Sr(c,d,x),di=_,Si=A,di!==null)if(Si)try{tm(di,x.stateNode)}catch(C){Ft(x,d,C)}else try{W0(di,x.stateNode)}catch(C){Ft(x,d,C)}}else Sr(c,d,x);break;case 18:bn&&di!==null&&(Si?Bh(di,x.stateNode):fm(di,x.stateNode));break;case 4:bn?(_=di,A=Si,di=x.stateNode.containerInfo,Si=!0,Sr(c,d,x),di=_,Si=A):(cr&&Op(x.stateNode,x,sm()),Sr(c,d,x));break;case 0:case 11:case 14:case 15:ga(2,x,d),vi||ga(4,x,d),Sr(c,d,x);break;case 1:vi||(ps(x,d),_=x.stateNode,typeof _.componentWillUnmount=="function"&&mh(x,d,_)),Sr(c,d,x);break;case 21:Sr(c,d,x);break;case 22:vi=(_=vi)||x.memoizedState!==null,Sr(c,d,x),vi=_;break;default:Sr(c,d,x)}}function Mr(c,d){if(ni&&d.memoizedState===null&&(c=d.alternate,c!==null&&(c=c.memoizedState,c!==null))){c=c.dehydrated;try{Jy(c)}catch(x){Ft(d,d.return,x)}}}function Vu(c,d){if(ni&&d.memoizedState===null&&(c=d.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Qy(c)}catch(x){Ft(d,d.return,x)}}function Er(c){switch(c.tag){case 31:case 13:case 19:var d=c.stateNode;return d===null&&(d=c.stateNode=new Am),d;case 22:return c=c.stateNode,d=c._retryCache,d===null&&(d=c._retryCache=new Am),d;default:throw Error(s(435,c.tag))}}function Ja(c,d){var x=Er(c);d.forEach(function(_){if(!x.has(_)){x.add(_);var A=Yy.bind(null,c,_);_.then(A,A)}})}function $i(c,d){var x=d.deletions;if(x!==null)for(var _=0;_<x.length;_++){var A=x[_],C=c,F=d;if(bn){var te=F;e:for(;te!==null;){switch(te.tag){case 27:if(Fi){if(zl(te.type)){di=te.stateNode,Si=!1;break e}break}case 5:di=te.stateNode,Si=!1;break e;case 3:case 4:di=te.stateNode.containerInfo,Si=!0;break e}te=te.return}if(di===null)throw Error(s(160));Fu(C,F,A),di=null,Si=!1}else Fu(C,F,A);C=A.alternate,C!==null&&(C.return=null),A.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)Hu(d,c),d=d.sibling}function Hu(c,d){var x=c.alternate,_=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:$i(d,c),Yi(c),_&4&&(ga(3,c,c.return),ma(3,c),ga(5,c,c.return));break;case 1:$i(d,c),Yi(c),_&512&&(vi||x===null||ps(x,x.return)),_&64&&xi&&(c=c.updateQueue,c!==null&&(_=c.callbacks,_!==null&&(x=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=x===null?_:x.concat(_))));break;case 26:if(Cr){var A=Pn;if($i(d,c),Yi(c),_&512&&(vi||x===null||ps(x,x.return)),_&4){_=x!==null?x.memoizedState:null;var C=c.memoizedState;x===null?C===null?c.stateNode===null?c.stateNode=vx(A,c.type,c.memoizedProps,c):xm(A,c.type,c.stateNode):c.stateNode=gm(A,C,c.memoizedProps):_!==C?(_===null?x.stateNode!==null&&vm(x.stateNode):Xo(_),C===null?xm(A,c.type,c.stateNode):gm(A,C,c.memoizedProps)):C===null&&c.stateNode!==null&&zu(c,c.memoizedProps,x.memoizedProps)}break}case 27:if(Fi){$i(d,c),Yi(c),_&512&&(vi||x===null||ps(x,x.return)),x!==null&&_&4&&zu(c,c.memoizedProps,x.memoizedProps);break}case 5:if($i(d,c),Yi(c),_&512&&(vi||x===null||ps(x,x.return)),bn){if(c.flags&32){A=c.stateNode;try{nm(A)}catch(qe){Ft(c,c.return,qe)}}_&4&&c.stateNode!=null&&(A=c.memoizedProps,zu(c,A,x!==null?x.memoizedProps:A)),_&1024&&(Fc=!0)}else cr&&c.alternate!==null&&(c.alternate.stateNode=c.stateNode);break;case 6:if($i(d,c),Yi(c),_&4&&bn){if(c.stateNode===null)throw Error(s(162));_=c.memoizedProps,x=x!==null?x.memoizedProps:_,A=c.stateNode;try{F0(A,x,_)}catch(qe){Ft(c,c.return,qe)}}break;case 3:if(Cr?(bx(),A=Pn,Pn=td(d.containerInfo),$i(d,c),Pn=A):$i(d,c),Yi(c),_&4){if(bn&&ni&&x!==null&&x.memoizedState.isDehydrated)try{fx(d.containerInfo)}catch(qe){Ft(c,c.return,qe)}if(cr){_=d.containerInfo,x=d.pendingChildren;try{am(_,x)}catch(qe){Ft(c,c.return,qe)}}}Fc&&(Fc=!1,xh(c));break;case 4:Cr?(x=Pn,Pn=td(c.stateNode.containerInfo),$i(d,c),Yi(c),Pn=x):($i(d,c),Yi(c)),_&4&&cr&&Op(c.stateNode,c,c.stateNode.pendingChildren);break;case 12:$i(d,c),Yi(c);break;case 31:$i(d,c),Yi(c),_&4&&(_=c.updateQueue,_!==null&&(c.updateQueue=null,Ja(c,_)));break;case 13:$i(d,c),Yi(c),c.child.flags&8192&&c.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(dd=ms()),_&4&&(_=c.updateQueue,_!==null&&(c.updateQueue=null,Ja(c,_)));break;case 22:A=c.memoizedState!==null;var F=x!==null&&x.memoizedState!==null,te=xi,Ne=vi;if(xi=te||A,vi=Ne||F,$i(d,c),vi=Ne,xi=te,Yi(c),_&8192&&(d=c.stateNode,d._visibility=A?d._visibility&-2:d._visibility|1,A&&(x===null||F||xi||vi||Io(c)),bn)){e:if(x=null,bn)for(d=c;;){if(d.tag===5||Cr&&d.tag===26){if(x===null){F=x=d;try{C=F.stateNode,A?Ky(C):$0(F.stateNode,F.memoizedProps)}catch(qe){Ft(F,F.return,qe)}}}else if(d.tag===6){if(x===null){F=d;try{var Be=F.stateNode;A?X0(Be):Y0(Be,F.memoizedProps)}catch(qe){Ft(F,F.return,qe)}}}else if(d.tag===18){if(x===null){F=d;try{var et=F.stateNode;A?mx(et):gx(F.stateNode)}catch(qe){Ft(F,F.return,qe)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===c)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break e;for(;d.sibling===null;){if(d.return===null||d.return===c)break e;x===d&&(x=null),d=d.return}x===d&&(x=null),d.sibling.return=d.return,d=d.sibling}}_&4&&(_=c.updateQueue,_!==null&&(x=_.retryQueue,x!==null&&(_.retryQueue=null,Ja(c,x))));break;case 19:$i(d,c),Yi(c),_&4&&(_=c.updateQueue,_!==null&&(c.updateQueue=null,Ja(c,_)));break;case 30:break;case 21:break;default:$i(d,c),Yi(c)}}function Yi(c){var d=c.flags;if(d&2){try{for(var x,_=c.return;_!==null;){if(Ip(_)){x=_;break}_=_.return}if(bn){if(x==null)throw Error(s(160));switch(x.tag){case 27:if(Fi){var A=x.stateNode,C=Za(c);Bu(c,C,A);break}case 5:var F=x.stateNode;x.flags&32&&(nm(F),x.flags&=-33);var te=Za(c);Bu(c,te,F);break;case 3:case 4:var Ne=x.stateNode.containerInfo,Be=Za(c);gh(c,Be,Ne);break;default:throw Error(s(161))}}}catch(et){Ft(c,c.return,et)}c.flags&=-3}d&4096&&(c.flags&=-4097)}function xh(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var d=c;xh(d),d.tag===5&&d.flags&1024&&Yp(d.stateNode),c=c.sibling}}function Ns(c,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)C0(c,d.alternate,d),d=d.sibling}function Io(c){for(c=c.child;c!==null;){var d=c;switch(d.tag){case 0:case 11:case 14:case 15:ga(4,d,d.return),Io(d);break;case 1:ps(d,d.return);var x=d.stateNode;typeof x.componentWillUnmount=="function"&&mh(d,d.return,x),Io(d);break;case 27:Fi&&Ki(d.stateNode);case 26:case 5:ps(d,d.return),Io(d);break;case 22:d.memoizedState===null&&Io(d);break;case 30:Io(d);break;default:Io(d)}c=c.sibling}}function Nr(c,d,x){for(x=x&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var _=d.alternate,A=c,C=d,F=C.flags;switch(C.tag){case 0:case 11:case 15:Nr(A,C,x),ma(4,C);break;case 1:if(Nr(A,C,x),_=C,A=_.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Be){Ft(_,_.return,Be)}if(_=C,A=_.updateQueue,A!==null){var te=_.stateNode;try{var Ne=A.shared.hiddenCallbacks;if(Ne!==null)for(A.shared.hiddenCallbacks=null,A=0;A<Ne.length;A++)$a(Ne[A],te)}catch(Be){Ft(_,_.return,Be)}}x&&F&64&&wc(C),Sc(C,C.return);break;case 27:Fi&&k0(C);case 26:case 5:Nr(A,C,x),x&&_===null&&F&4&&Al(C),Sc(C,C.return);break;case 12:Nr(A,C,x);break;case 31:Nr(A,C,x),x&&F&4&&Mr(A,C);break;case 13:Nr(A,C,x),x&&F&4&&Vu(A,C);break;case 22:C.memoizedState===null&&Nr(A,C,x),Sc(C,C.return);break;case 30:break;default:Nr(A,C,x)}d=d.sibling}}function Oo(c,d){var x=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(x=c.memoizedState.cachePool.pool),c=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(c=d.memoizedState.cachePool.pool),c!==x&&(c!=null&&c.refCount++,x!=null&&Le(x))}function Up(c,d){c=null,d.alternate!==null&&(c=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==c&&(d.refCount++,c!=null&&Le(c))}function oi(c,d,x,_){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)vh(c,d,x,_),d=d.sibling}function vh(c,d,x,_){var A=d.flags;switch(d.tag){case 0:case 11:case 15:oi(c,d,x,_),A&2048&&ma(9,d);break;case 1:oi(c,d,x,_);break;case 3:oi(c,d,x,_),A&2048&&(c=null,d.alternate!==null&&(c=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==c&&(d.refCount++,c!=null&&Le(c)));break;case 12:if(A&2048){oi(c,d,x,_),c=d.stateNode;try{var C=d.memoizedProps,F=C.id,te=C.onPostCommit;typeof te=="function"&&te(F,d.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(Ne){Ft(d,d.return,Ne)}}else oi(c,d,x,_);break;case 31:oi(c,d,x,_);break;case 13:oi(c,d,x,_);break;case 23:break;case 22:C=d.stateNode,F=d.alternate,d.memoizedState!==null?C._visibility&2?oi(c,d,x,_):Mc(c,d):C._visibility&2?oi(c,d,x,_):(C._visibility|=2,Ps(c,d,x,_,(d.subtreeFlags&10256)!==0||!1)),A&2048&&Oo(F,d);break;case 24:oi(c,d,x,_),A&2048&&Up(d.alternate,d);break;default:oi(c,d,x,_)}}function Ps(c,d,x,_,A){for(A=A&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var C=c,F=d,te=x,Ne=_,Be=F.flags;switch(F.tag){case 0:case 11:case 15:Ps(C,F,te,Ne,A),ma(8,F);break;case 23:break;case 22:var et=F.stateNode;F.memoizedState!==null?et._visibility&2?Ps(C,F,te,Ne,A):Mc(C,F):(et._visibility|=2,Ps(C,F,te,Ne,A)),A&&Be&2048&&Oo(F.alternate,F);break;case 24:Ps(C,F,te,Ne,A),A&&Be&2048&&Up(F.alternate,F);break;default:Ps(C,F,te,Ne,A)}d=d.sibling}}function Mc(c,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var x=c,_=d,A=_.flags;switch(_.tag){case 22:Mc(x,_),A&2048&&Oo(_.alternate,_);break;case 24:Mc(x,_),A&2048&&Up(_.alternate,_);break;default:Mc(x,_)}d=d.sibling}}function xa(c,d,x){if(c.subtreeFlags&fr)for(c=c.child;c!==null;)Lo(c,d,x),c=c.sibling}function Lo(c,d,x){switch(c.tag){case 26:if(xa(c,d,x),c.flags&fr)if(c.memoizedState!==null)yx(x,Pn,c.memoizedState,c.memoizedProps);else{var _=c.stateNode,A=c.type;c=c.memoizedProps,((d&335544128)===d||Xp(A,c))&&Ih(x,_,A,c)}break;case 5:xa(c,d,x),c.flags&fr&&(_=c.stateNode,A=c.type,c=c.memoizedProps,((d&335544128)===d||Xp(A,c))&&Ih(x,_,A,c));break;case 3:case 4:Cr?(_=Pn,Pn=td(c.stateNode.containerInfo),xa(c,d,x),Pn=_):xa(c,d,x);break;case 22:c.memoizedState===null&&(_=c.alternate,_!==null&&_.memoizedState!==null?(_=fr,fr=16777216,xa(c,d,x),fr=_):xa(c,d,x));break;default:xa(c,d,x)}}function bh(c){var d=c.alternate;if(d!==null&&(c=d.child,c!==null)){d.child=null;do d=c.sibling,c.sibling=null,c=d;while(c!==null)}}function Ec(c){var d=c.deletions;if((c.flags&16)!==0){if(d!==null)for(var x=0;x<d.length;x++){var _=d[x];wi=_,ar(_,c)}bh(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)yh(c),c=c.sibling}function yh(c){switch(c.tag){case 0:case 11:case 15:Ec(c),c.flags&2048&&ga(9,c,c.return);break;case 3:Ec(c);break;case 12:Ec(c);break;case 22:var d=c.stateNode;c.memoizedState!==null&&d._visibility&2&&(c.return===null||c.return.tag!==13)?(d._visibility&=-3,Gu(c)):Ec(c);break;default:Ec(c)}}function Gu(c){var d=c.deletions;if((c.flags&16)!==0){if(d!==null)for(var x=0;x<d.length;x++){var _=d[x];wi=_,ar(_,c)}bh(c)}for(c=c.child;c!==null;){switch(d=c,d.tag){case 0:case 11:case 15:ga(8,d,d.return),Gu(d);break;case 22:x=d.stateNode,x._visibility&2&&(x._visibility&=-3,Gu(d));break;default:Gu(d)}c=c.sibling}}function ar(c,d){for(;wi!==null;){var x=wi;switch(x.tag){case 0:case 11:case 15:ga(8,x,d);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var _=x.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:Le(x.memoizedState.cache)}if(_=x.child,_!==null)_.return=x,wi=_;else e:for(x=c;wi!==null;){_=wi;var A=_.sibling,C=_.return;if(Lp(_),_===x){wi=null;break e}if(A!==null){A.return=C,wi=A;break e}wi=C}}}function Uo(c){var d=Kt(c);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(s(364));return d}if(c=yi(c),c===null)throw Error(s(362));return c.stateNode.current}function Po(c,d){var x=c.tag;switch(d.$$typeof){case Pr:if(c.type===d.value)return!0;break;case Hc:e:{for(d=d.value,c=[c,0],x=0;x<c.length;){var _=c[x++],A=_.tag,C=c[x++],F=d[C];if(A!==5&&A!==26&&A!==27||!qo(_)){for(;F!=null&&Po(_,F);)C++,F=d[C];if(C===d.length){d=!0;break e}else for(_=_.child;_!==null;)c.push(_,C),_=_.sibling}}d=!1}return d;case Gc:if((x===5||x===26||x===27)&&Jp(c.stateNode,d.value))return!0;break;case Qo:if((x===5||x===6||x===26||x===27)&&(c=Qu(c),c!==null&&0<=c.indexOf(d.value)))return!0;break;case cd:if((x===5||x===26||x===27)&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Nc(c){switch(c.$$typeof){case Pr:return"<"+(b(c.value)||"Unknown")+">";case Hc:return":has("+(Nc(c)||"")+")";case Gc:return'[role="'+c.value+'"]';case Qo:return'"'+c.value+'"';case cd:return'[data-testname="'+c.value+'"]';default:throw Error(s(365))}}function Tc(c,d){var x=[];c=[c,0];for(var _=0;_<c.length;){var A=c[_++],C=A.tag,F=c[_++],te=d[F];if(C!==5&&C!==26&&C!==27||!qo(A)){for(;te!=null&&Po(A,te);)F++,te=d[F];if(F===d.length)x.push(A);else for(A=A.child;A!==null;)c.push(A,F),A=A.sibling}}return x}function zs(c,d){if(!Bi)throw Error(s(363));c=Uo(c),c=Tc(c,d),d=[],c=Array.from(c);for(var x=0;x<c.length;){var _=c[x++],A=_.tag;if(A===5||A===26||A===27)qo(_)||d.push(_.stateNode);else for(_=_.child;_!==null;)c.push(_),_=_.sibling}return d}function ti(){return(hn&2)!==0&&xn!==0?xn&-xn:Dt.T!==null?st():Lc()}function Qa(){if(js===0)if((xn&536870912)===0||gn){var c=Fl;Fl<<=1,(Fl&3932160)===0&&(Fl=262144),js=c}else js=536870912;return c=qs.current,c!==null&&(c.flags|=32),js}function li(c,d,x){(c===on&&(zn===2||zn===9)||c.cancelPendingCommit!==null)&&(mi(c,0),ba(c,xn,js,!1)),P(c,x),((hn&2)===0||c!==on)&&(c===on&&((hn&2)===0&&(nl|=x),hi===4&&ba(c,xn,js,!1)),pt(c))}function Zr(c,d,x){if((hn&6)!==0)throw Error(s(327));var _=!x&&(d&127)===0&&(d&c.expiredLanes)===0||j(c,d),A=_?D0(c,d):ya(c,d,!0),C=_;do{if(A===0){el&&!_&&ba(c,d,0,!1);break}else{if(x=c.current.alternate,C&&!R0(x)){A=ya(c,d,!1),C=!1;continue}if(A===2){if(C=d,c.errorRecoveryDisabledLanes&C)var F=0;else F=c.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){d=F;e:{var te=c;A=ud;var Ne=ni&&te.current.memoizedState.isDehydrated;if(Ne&&(mi(te,F).flags|=256),F=ya(te,F,!1),F!==2){if(tl&&!Ne){te.errorRecoveryDisabledLanes|=C,nl|=C,A=4;break e}C=Xs,Xs=A,C!==null&&(Xs===null?Xs=C:Xs.push.apply(Xs,C))}A=F}if(C=!1,A!==2)continue}}if(A===1){mi(c,0),ba(c,d,0,!0);break}e:{switch(_=c,C=A,C){case 0:case 1:throw Error(s(345));case 4:if((d&4194048)!==d)break;case 6:ba(_,d,js,!ta);break e;case 2:Xs=null;break;case 3:case 5:break;default:throw Error(s(329))}if((d&62914560)===d&&(A=dd+300-ms(),10<A)){if(ba(_,d,js,!ta),N(_,0,!0)!==0)break e;Ia=d,_.timeoutHandle=Wp(va.bind(null,_,x,Xs,hd,nf,d,js,nl,Wc,ta,C,"Throttled",-0,0),A);break e}va(_,x,Xs,hd,nf,d,js,nl,Wc,ta,C,null,-0,0)}}break}while(!0);pt(c)}function va(c,d,x,_,A,C,F,te,Ne,Be,et,qe,xt,Yt){if(c.timeoutHandle=Vs,qe=d.subtreeFlags,qe&8192||(qe&16785408)===16785408){qe=$p(),Lo(d,C,qe);var Mi=(C&62914560)===C?dd-ms():(C&4194048)===C?$l-ms():0;if(Mi=B0(qe,Mi),Mi!==null){Ia=C,c.cancelPendingCommit=Mi(wa.bind(null,c,d,C,x,_,A,F,te,Ne,et,qe,null,xt,Yt)),ba(c,C,F,!Be);return}}wa(c,d,C,x,_,A,F,te,Ne)}function R0(c){for(var d=c;;){var x=d.tag;if((x===0||x===11||x===15)&&d.flags&16384&&(x=d.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var _=0;_<x.length;_++){var A=x[_],C=A.getSnapshot;A=A.value;try{if(!_i(C(),A))return!1}catch{return!1}}if(x=d.child,d.subtreeFlags&16384&&x!==null)x.return=d,d=x;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function ba(c,d,x,_){d&=~qc,d&=~nl,c.suspendedLanes|=d,c.pingedLanes&=~d,_&&(c.warmLanes|=d),_=c.expirationTimes;for(var A=d;0<A;){var C=31-Hs(A),F=1<<C;_[C]=-1,A&=~F}x!==0&&G(c,x,d)}function _h(){return(hn&6)===0?(Je(0),!1):!0}function wh(){if(fn!==null){if(zn===0)var c=fn.return;else c=fn,Qr=Xn=null,Bn(c),Ko=null,Hl=0,c=fn;for(;c!==null;)A0(c.alternate,c),c=c.return;fn=null}}function mi(c,d){var x=c.timeoutHandle;x!==Vs&&(c.timeoutHandle=Vs,z0(x)),x=c.cancelPendingCommit,x!==null&&(c.cancelPendingCommit=null,x()),Ia=0,wh(),on=c,fn=x=lr(c.current,null),xn=d,zn=0,Di=null,ta=!1,el=j(c,d),tl=!1,Wc=js=qc=nl=ho=hi=0,Xs=ud=null,nf=!1,(d&8)!==0&&(d|=d&32);var _=c.entangledLanes;if(_!==0)for(c=c.entanglements,_&=d;0<_;){var A=31-Hs(_),C=1<<A;d|=c[A],_&=~C}return Da=d,Ao(),x}function Wn(c,d){Zt=null,Dt.H=hr,d===Gi||d===Lr?(d=Sn(),zn=3):d===ef?(d=Sn(),zn=4):zn=d===Rs?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Di=d,fn===null&&(hi=1,dh(c,pe(d,c.current)))}function vn(){var c=qs.current;return c===null?!0:(xn&4194048)===xn?Ws===null:(xn&62914560)===xn||(xn&536870912)!==0?c===Ws:!1}function eo(){var c=Dt.H;return Dt.H=hr,c===null?hr:c}function or(){var c=Dt.A;return Dt.A=Vc,c}function Ac(){hi=4,ta||(xn&4194048)!==xn&&qs.current!==null||(el=!0),(ho&134217727)===0&&(nl&134217727)===0||on===null||ba(on,xn,js,!1)}function ya(c,d,x){var _=hn;hn|=2;var A=eo(),C=or();(on!==c||xn!==d)&&(hd=null,mi(c,d)),d=!1;var F=hi;e:do try{if(zn!==0&&fn!==null){var te=fn,Ne=Di;switch(zn){case 8:wh(),F=6;break e;case 3:case 2:case 9:case 6:qs.current===null&&(d=!0);var Be=zn;if(zn=0,Di=null,_a(c,te,Ne,Be),x&&el){F=0;break e}break;default:Be=zn,zn=0,Di=null,_a(c,te,Ne,Be)}}j0(),F=hi;break}catch(et){Wn(c,et)}while(!0);return d&&c.shellSuspendCounter++,Qr=Xn=null,hn=_,Dt.H=A,Dt.A=C,fn===null&&(on=null,xn=0,Ao()),F}function j0(){for(;fn!==null;)zo(fn)}function D0(c,d){var x=hn;hn|=2;var _=eo(),A=or();on!==c||xn!==d?(hd=null,il=ms()+500,mi(c,d)):el=j(c,d);e:do try{if(zn!==0&&fn!==null){d=fn;var C=Di;t:switch(zn){case 1:zn=0,Di=null,_a(c,d,C,1);break;case 2:case 9:if(Qe(C)){zn=0,Di=null,Sh(d);break}d=function(){zn!==2&&zn!==9||on!==c||(zn=7),pt(c)},C.then(d,d);break e;case 3:zn=7;break e;case 4:zn=5;break e;case 7:Qe(C)?(zn=0,Di=null,Sh(d)):(zn=0,Di=null,_a(c,d,C,7));break;case 5:var F=null;switch(fn.tag){case 26:F=fn.memoizedState;case 5:case 27:var te=fn,Ne=te.type,Be=te.pendingProps;if(F?ym(F):ci(te.stateNode,Ne,Be)){zn=0,Di=null;var et=te.sibling;if(et!==null)fn=et;else{var qe=te.return;qe!==null?(fn=qe,Cc(qe)):fn=null}break t}}zn=0,Di=null,_a(c,d,C,5);break;case 6:zn=0,Di=null,_a(c,d,C,6);break;case 8:wh(),hi=6;break e;default:throw Error(s(462))}}kc();break}catch(xt){Wn(c,xt)}while(!0);return Qr=Xn=null,Dt.H=_,Dt.A=A,hn=x,fn!==null?0:(on=null,xn=0,Ao(),hi)}function kc(){for(;fn!==null&&!wx();)zo(fn)}function zo(c){var d=Cp(c.alternate,c,Da);c.memoizedProps=c.pendingProps,d===null?Cc(c):fn=d}function Sh(c){var d=c,x=d.alternate;switch(d.tag){case 15:case 0:d=Mp(x,d,d.pendingProps,d.type,void 0,xn);break;case 11:d=Mp(x,d,d.pendingProps,d.type.render,d.ref,xn);break;case 5:Bn(d);default:A0(x,d),d=fn=Nh(d,Da),d=Cp(x,d,Da)}c.memoizedProps=c.pendingProps,d===null?Cc(c):fn=d}function _a(c,d,x,_){Qr=Xn=null,Bn(d),Ko=null,Hl=0;var A=d.return;try{if(Wy(c,A,d,x,xn)){hi=1,dh(c,pe(x,c.current)),fn=null;return}}catch(C){if(A!==null)throw fn=A,C;hi=1,dh(c,pe(x,c.current)),fn=null;return}d.flags&32768?(gn||_===1?c=!0:el||(xn&536870912)!==0?c=!1:(ta=c=!0,(_===2||_===9||_===3||_===6)&&(_=qs.current,_!==null&&_.tag===13&&(_.flags|=16384))),Bo(d,c)):Cc(d)}function Cc(c){var d=c;do{if((d.flags&32768)!==0){Bo(d,ta);return}c=d.return;var x=T0(d.alternate,d,Da);if(x!==null){fn=x;return}if(d=d.sibling,d!==null){fn=d;return}fn=d=c}while(d!==null);hi===0&&(hi=5)}function Bo(c,d){do{var x=Dp(c.alternate,c);if(x!==null){x.flags&=32767,fn=x;return}if(x=c.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!d&&(c=c.sibling,c!==null)){fn=c;return}fn=c=x}while(c!==null);hi=6,fn=null}function wa(c,d,x,_,A,C,F,te,Ne){c.cancelPendingCommit=null;do Ma();while(Ii!==0);if((hn&6)!==0)throw Error(s(327));if(d!==null){if(d===c.current)throw Error(s(177));if(C=d.lanes|d.childLanes,C|=Gl,z(c,x,C,F,te,Ne),c===on&&(fn=on=null,xn=0),Yl=d,po=c,Ia=x,Xc=C,sf=A,km=_,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,Ri(id,function(){return qu(),null})):(c.callbackNode=null,c.callbackPriority=0),_=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||_){_=Dt.T,Dt.T=null,A=kr(),mn(2),F=hn,hn|=4;try{Xy(c,d,x)}finally{hn=F,mn(A),Dt.T=_}}Ii=1,to(),Sa(),Mh()}}function to(){if(Ii===1){Ii=0;var c=po,d=Yl,x=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||x){x=Dt.T,Dt.T=null;var _=kr();mn(2);var A=hn;hn|=4;try{Hu(d,c),P0(c.containerInfo)}finally{hn=A,mn(_),Dt.T=x}}c.current=d,Ii=2}}function Sa(){if(Ii===2){Ii=0;var c=po,d=Yl,x=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||x){x=Dt.T,Dt.T=null;var _=kr();mn(2);var A=hn;hn|=4;try{C0(c,d.alternate,d)}finally{hn=A,mn(_),Dt.T=x}}Ii=3}}function Mh(){if(Ii===4||Ii===3){Ii=0,wm();var c=po,d=Yl,x=Ia,_=km;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?Ii=5:(Ii=0,Yl=po=null,Eh(c,c.pendingLanes));var A=c.pendingLanes;if(A===0&&(fo=null),J(x),d=d.stateNode,Gs&&typeof Gs.onCommitFiberRoot=="function")try{Gs.onCommitFiberRoot(Vl,d,void 0,(d.current.flags&128)===128)}catch{}if(_!==null){d=Dt.T,A=kr(),mn(2),Dt.T=null;try{for(var C=c.onRecoverableError,F=0;F<_.length;F++){var te=_[F];C(te.value,{componentStack:te.stack})}}finally{Dt.T=d,mn(A)}}(Ia&3)!==0&&Ma(),pt(c),A=c.pendingLanes,(x&261930)!==0&&(A&42)!==0?c===fd?kn++:(kn=0,fd=c):kn=0,ni&&ed(),Je(0)}}function Eh(c,d){(c.pooledCacheLanes&=d)===0&&(d=c.pooledCache,d!=null&&(c.pooledCache=null,Le(d)))}function Ma(){return to(),Sa(),Mh(),qu()}function qu(){if(Ii!==5)return!1;var c=po,d=Xc;Xc=0;var x=J(Ia),_=32>x?32:x;x=Dt.T;var A=kr();try{mn(_),Dt.T=null,_=sf,sf=null;var C=po,F=Ia;if(Ii=0,Yl=po=null,Ia=0,(hn&6)!==0)throw Error(s(331));var te=hn;if(hn|=4,yh(C.current),vh(C,C.current,F,_),hn=te,Je(0,!1),Gs&&typeof Gs.onPostCommitFiberRoot=="function")try{Gs.onPostCommitFiberRoot(Vl,C)}catch{}return!0}finally{mn(A),Dt.T=x,Eh(c,d)}}function Fo(c,d,x){d=pe(x,d),d=wp(c.stateNode,d,2),c=sr(c,d,2),c!==null&&(P(c,2),pt(c))}function Ft(c,d,x){if(c.tag===3)Fo(c,c,x);else for(;d!==null;){if(d.tag===3){Fo(d,c,x);break}else if(d.tag===1){var _=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(fo===null||!fo.has(_))){c=pe(x,c),x=m0(2),_=sr(d,x,2),_!==null&&(g0(x,_,d,c),P(_,2),pt(_));break}}d=d.return}}function Rc(c,d,x){var _=c.pingCache;if(_===null){_=c.pingCache=new pr;var A=new Set;_.set(d,A)}else A=_.get(d),A===void 0&&(A=new Set,_.set(d,A));A.has(x)||(tl=!0,A.add(x),c=I0.bind(null,c,d,x),d.then(c,c))}function I0(c,d,x){var _=c.pingCache;_!==null&&_.delete(d),c.pingedLanes|=c.suspendedLanes&x,c.warmLanes&=~x,on===c&&(xn&x)===x&&(hi===4||hi===3&&(xn&62914560)===xn&&300>ms()-dd?(hn&2)===0&&mi(c,0):qc|=x,Wc===xn&&(Wc=0)),pt(c)}function O0(c,d){d===0&&(d=D()),c=fs(c,d),c!==null&&(P(c,d),pt(c))}function $y(c){var d=c.memoizedState,x=0;d!==null&&(x=d.retryLane),O0(c,x)}function Yy(c,d){var x=0;switch(c.tag){case 31:case 13:var _=c.stateNode,A=c.memoizedState;A!==null&&(x=A.retryLane);break;case 19:_=c.stateNode;break;case 22:_=c.stateNode._retryCache;break;default:throw Error(s(314))}_!==null&&_.delete(d),O0(c,x)}function Ri(c,d){return nd(c,d)}function Pp(c,d,x,_){this.tag=c,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kl(c){return c=c.prototype,!(!c||!c.isReactComponent)}function lr(c,d){var x=c.alternate;return x===null?(x=t(c.tag,d,c.key,c.mode),x.elementType=c.elementType,x.type=c.type,x.stateNode=c.stateNode,x.alternate=c,c.alternate=x):(x.pendingProps=d,x.type=c.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=c.flags&65011712,x.childLanes=c.childLanes,x.lanes=c.lanes,x.child=c.child,x.memoizedProps=c.memoizedProps,x.memoizedState=c.memoizedState,x.updateQueue=c.updateQueue,d=c.dependencies,x.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},x.sibling=c.sibling,x.index=c.index,x.ref=c.ref,x.refCleanup=c.refCleanup,x}function Nh(c,d){c.flags&=65011714;var x=c.alternate;return x===null?(c.childLanes=0,c.lanes=d,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=x.childLanes,c.lanes=x.lanes,c.child=x.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=x.memoizedProps,c.memoizedState=x.memoizedState,c.updateQueue=x.updateQueue,c.type=x.type,d=x.dependencies,c.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),c}function no(c,d,x,_,A,C){var F=0;if(_=c,typeof c=="function")kl(c)&&(F=1);else if(typeof c=="string")F=Cr&&Fi?Fh(c,x,Zi.current)?26:_m(c)?27:5:Cr?Fh(c,x,Zi.current)?26:5:Fi&&_m(c)?27:5;else e:switch(c){case Yu:return c=t(31,x,d,A),c.elementType=Yu,c.lanes=C,c;case Dl:return Tr(x.children,A,C,d);case Il:F=8,A|=24;break;case Ol:return c=t(12,x,d,A|2),c.elementType=Ol,c.lanes=C,c;case Ch:return c=t(13,x,d,A),c.elementType=Ch,c.lanes=C,c;case io:return c=t(19,x,d,A),c.elementType=io,c.lanes=C,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case Ar:F=10;break e;case $u:F=9;break e;case jc:F=11;break e;case Rh:F=14;break e;case Ts:F=16,_=null;break e}F=29,x=Error(s(130,c===null?"null":typeof c,"")),_=null}return d=t(F,x,d,A),d.elementType=c,d.type=_,d.lanes=C,d}function Tr(c,d,x,_){return c=t(7,c,_,d),c.lanes=x,c}function zp(c,d,x){return c=t(6,c,null,d),c.lanes=x,c}function Bp(c){var d=t(18,null,null,0);return d.stateNode=c,d}function Fp(c,d,x){return d=t(4,c.children!==null?c.children:[],c.key,d),d.lanes=x,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}function L0(c,d,x,_,A,C,F,te,Ne){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Vs,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=I(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I(0),this.hiddenUpdates=I(null),this.identifierPrefix=_,this.onUncaughtError=A,this.onCaughtError=C,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ne,this.incompleteTransitions=new Map}function Vo(c,d,x,_,A,C,F,te,Ne,Be,et,qe){return c=new L0(c,d,x,F,Ne,Be,et,qe,te),d=1,C===!0&&(d|=24),C=t(3,null,null,d),c.current=C,C.stateNode=c,d=Te(),d.refCount++,c.pooledCache=d,d.refCount++,C.memoizedState={element:_,isDehydrated:x,cache:d},Pi(C),c}function Th(c){return c?(c=Na,c):Na}function Wu(c){var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(s(188)):(c=Object.keys(c).join(","),Error(s(268,c)));return c=h(d),c=c!==null?p(c):null,c===null?null:Ic(c.stateNode)}function Vp(c,d,x,_,A,C){A=Th(A),_.context===null?_.context=A:_.pendingContext=A,_=ir(d),_.payload={element:x},C=C===void 0?null:C,C!==null&&(_.callback=C),x=sr(c,_,d),x!==null&&(li(x,c,d),ko(x,c,d))}function Cl(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var x=c.retryLane;c.retryLane=x!==0&&x<d?x:d}}function Xu(c,d){Cl(c,d),(c=c.alternate)&&Cl(c,d)}var rn={},Ah=Zb,Bs=$z,kh=Object.assign,Rl=Symbol.for("react.element"),Ea=Symbol.for("react.transitional.element"),jl=Symbol.for("react.portal"),Dl=Symbol.for("react.fragment"),Il=Symbol.for("react.strict_mode"),Ol=Symbol.for("react.profiler"),$u=Symbol.for("react.consumer"),Ar=Symbol.for("react.context"),jc=Symbol.for("react.forward_ref"),Ch=Symbol.for("react.suspense"),io=Symbol.for("react.suspense_list"),Rh=Symbol.for("react.memo"),Ts=Symbol.for("react.lazy"),Yu=Symbol.for("react.activity"),Hp=Symbol.for("react.memo_cache_sentinel"),so=Symbol.iterator,Ho=Symbol.for("react.client.reference"),Go=Array.isArray,Dt=Ah.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Gp=e.rendererVersion,Ku=e.rendererPackageName,Dc=e.extraDevToolsConfig,Ic=e.getPublicInstance,U0=e.getRootHostContext,Oc=e.getChildHostContext,jh=e.prepareForCommit,P0=e.resetAfterCommit,qp=e.createInstance;e.cloneMutableInstance;var Zu=e.appendInitialChild,Fs=e.finalizeInitialChildren,As=e.shouldSetTextContent,ro=e.createTextInstance;e.cloneMutableTextInstance;var Wp=e.scheduleTimeout,z0=e.cancelTimeout,Vs=e.noTimeout,bi=e.isPrimaryRenderer;e.warnsIfNotActing;var bn=e.supportsMutation,cr=e.supportsPersistence,ni=e.supportsHydration,Kt=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var Fn=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var mn=e.setCurrentUpdatePriority,kr=e.getCurrentUpdatePriority,Lc=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var Ll=e.shouldAttemptEagerTransition,Dh=e.detachDeletedInstance;e.requestPostPaintCallback;var Ju=e.maySuspendCommit,Uc=e.maySuspendCommitOnUpdate,Xp=e.maySuspendCommitInSyncRender,ci=e.preloadInstance,$p=e.startSuspendingCommit,Ih=e.suspendInstance;e.suspendOnActiveViewTransition;var B0=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var Ul=e.NotPendingTransition,Pl=e.HostTransitionContext,Yp=e.resetFormInstance;e.bindToConsole;var Kp=e.supportsMicrotasks,Zp=e.scheduleMicrotask,Bi=e.supportsTestSelectors,yi=e.findFiberRoot,Oh=e.getBoundingRect,Qu=e.getTextContent,qo=e.isHiddenSubtree,Jp=e.matchAccessibilityRole,ao=e.setFocusIfFocusable,Lh=e.setupIntersectionObserver,Qp=e.appendChild,em=e.appendChildToContainer,F0=e.commitTextUpdate,V0=e.commitMount,H0=e.commitUpdate,G0=e.insertBefore,q0=e.insertInContainerBefore,W0=e.removeChild,tm=e.removeChildFromContainer,nm=e.resetTextContent,Ky=e.hideInstance,X0=e.hideTextInstance,$0=e.unhideInstance,Y0=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var im=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var K0=e.cloneInstance,sm=e.createContainerChildSet,rm=e.appendChildToContainerChildSet,Z0=e.finalizeContainerChildren,am=e.replaceContainerChildren,J0=e.cloneHiddenInstance,om=e.cloneHiddenTextInstance,Wo=e.isSuspenseInstancePending,Uh=e.isSuspenseInstanceFallback,Ph=e.getSuspenseInstanceFallbackErrorDetails,zh=e.registerSuspenseInstanceRetry,Q0=e.canHydrateFormStateMarker,lm=e.isFormStateMarkerMatching,ex=e.getNextHydratableSibling,tx=e.getNextHydratableSiblingAfterSingleton,nx=e.getFirstHydratableChild,ix=e.getFirstHydratableChildWithinContainer,sx=e.getFirstHydratableChildWithinActivityInstance,rx=e.getFirstHydratableChildWithinSuspenseInstance,cm=e.getFirstHydratableChildWithinSingleton,ax=e.canHydrateInstance,ox=e.canHydrateTextInstance,um=e.canHydrateActivityInstance,lx=e.canHydrateSuspenseInstance,cx=e.hydrateInstance,Zy=e.hydrateTextInstance,dm=e.hydrateActivityInstance,ux=e.hydrateSuspenseInstance,dx=e.getNextHydratableInstanceAfterActivityInstance,hm=e.getNextHydratableInstanceAfterSuspenseInstance,hx=e.commitHydratedInstance,fx=e.commitHydratedContainer,Jy=e.commitHydratedActivityInstance,Qy=e.commitHydratedSuspenseInstance,px=e.finalizeHydratedChildren,ed=e.flushHydrationEvents;e.clearActivityBoundary;var fm=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var Bh=e.clearSuspenseBoundaryFromContainer,mx=e.hideDehydratedBoundary,gx=e.unhideDehydratedBoundary,Pc=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var xx=e.validateHydratableInstance,pm=e.validateHydratableTextInstance,Cr=e.supportsResources,Fh=e.isHostHoistableType,td=e.getHoistableRoot,mm=e.getResource,gm=e.acquireResource,Xo=e.releaseResource,vx=e.hydrateHoistable,xm=e.mountHoistable,vm=e.unmountHoistable,Vh=e.createHoistableInstance,bx=e.prepareToCommitHoistables,bm=e.mayResourceSuspendCommit,ym=e.preloadResource,yx=e.suspendResource,Fi=e.supportsSingletons,Hh=e.resolveSingletonInstance,ji=e.acquireSingletonInstance,Ki=e.releaseSingletonInstance,_m=e.isHostSingletonType,zl=e.isSingletonScope,Gh=[],Bl=-1,Na={},Hs=Math.clz32?Math.clz32:k,qh=Math.log,_x=Math.LN2,Wh=256,Fl=262144,zc=4194304,nd=Bs.unstable_scheduleCallback,Xh=Bs.unstable_cancelCallback,wx=Bs.unstable_shouldYield,wm=Bs.unstable_requestPaint,ms=Bs.unstable_now,$h=Bs.unstable_ImmediatePriority,Sx=Bs.unstable_UserBlockingPriority,id=Bs.unstable_NormalPriority,Yh=Bs.unstable_IdlePriority,Sm=Bs.log,Mx=Bs.unstable_setDisableYieldValue,Vl=null,Gs=null,_i=typeof Object.is=="function"?Object.is:ue,Kh=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},e_=Object.prototype.hasOwnProperty,Zh,Ta,sd=!1,Mm=new WeakMap,oo=[],Aa=0,Vn=null,rd=0,Rr=[],ur=0,jr=null,rs=1,Jr="",Zi=y(null),lo=y(null),as=y(null),ad=y(null),Vi=null,ii=null,gn=!1,ka=null,ks=!1,Jh=Error(s(519)),Dr=y(null),Xn=null,Qr=null,Ex=typeof AbortController<"u"?AbortController:function(){var c=[],d=this.signal={aborted:!1,addEventListener:function(x,_){c.push(_)}};this.abort=function(){d.aborted=!0,c.forEach(function(x){return x()})}},Ji=Bs.unstable_scheduleCallback,t_=Bs.unstable_NormalPriority,si={$$typeof:Ar,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},od=null,Un=null,gs=!1,Ir=!1,Qh=!1,$o=0,Bc=null,Em=0,co=0,Hi=null,Or=Dt.S;Dt.S=function(c,d){$l=ms(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&en(c,d),Or!==null&&Or(c,d)};var Yo=y(null),Gi=Error(s(460)),ef=Error(s(474)),Lr=Error(s(542)),Ca={then:function(){}},Cs=null,Ko=null,Hl=0,os=vl(!0),Nm=vl(!1),ls=[],Ra=0,Gl=0,dr=!1,tf=!1,ql=y(null),Zo=y(0),qs=y(null),Ws=null,gi=y(0),uo=0,Zt=null,At=null,Wt=null,an=!1,tn=!1,_n=!1,xs=0,Ur=0,ea=null,Tm=0,hr={readContext:$,use:ki,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useLayoutEffect:We,useInsertionEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useSyncExternalStore:We,useId:We,useHostTransitionStatus:We,useFormState:We,useActionState:We,useOptimistic:We,useMemoCache:We,useCacheRefresh:We};hr.useEffectEvent=We;var ui={readContext:$,use:ki,useCallback:function(c,d){return $t().memoizedState=[c,d===void 0?null:d],c},useContext:$,useEffect:Ru,useImperativeHandle:function(c,d,x){x=x!=null?x.concat([c]):null,Sl(4194308,4,mc.bind(null,d,c),x)},useLayoutEffect:function(c,d){return Sl(4194308,4,c,d)},useInsertionEffect:function(c,d){Sl(4,2,c,d)},useMemo:function(c,d){var x=$t();d=d===void 0?null:d;var _=c();if(_n){Q(!0);try{c()}finally{Q(!1)}}return x.memoizedState=[_,d],_},useReducer:function(c,d,x){var _=$t();if(x!==void 0){var A=x(d);if(_n){Q(!0);try{x(d)}finally{Q(!1)}}}else A=d;return _.memoizedState=_.baseState=A,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:A},_.queue=c,c=c.dispatch=qy.bind(null,Zt,c),[_.memoizedState,c]},useRef:function(c){var d=$t();return c={current:c},d.memoizedState=c},useState:function(c){c=pp(c);var d=c.queue,x=d0.bind(null,Zt,d);return d.dispatch=x,[c.memoizedState,x]},useDebugValue:Du,useDeferredValue:function(c,d){var x=$t();return xc(x,c,d)},useTransition:function(){var c=pp(!1);return c=l0.bind(null,Zt,c.queue,!0,!1),$t().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,d,x){var _=Zt,A=$t();if(gn){if(x===void 0)throw Error(s(407));x=x()}else{if(x=d(),on===null)throw Error(s(349));(xn&127)!==0||Wi(_,d,x)}A.memoizedState=x;var C={value:x,getSnapshot:d};return A.queue=C,Ru(_l.bind(null,_,C,c),[c]),_.flags|=2048,rr(9,{destroy:void 0},Xi.bind(null,_,C,x,d),null),x},useId:function(){var c=$t(),d=on.identifierPrefix;if(gn){var x=Jr,_=rs;x=(_&~(1<<32-Hs(_)-1)).toString(32)+x,d="_"+d+"R_"+x,x=xs++,0<x&&(d+="H"+x.toString(32)),d+="_"}else x=Tm++,d="_"+d+"r_"+x.toString(32)+"_";return c.memoizedState=d},useHostTransitionStatus:bp,useFormState:gp,useActionState:gp,useOptimistic:function(c){var d=$t();d.memoizedState=d.baseState=c;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=x,d=lh.bind(null,Zt,!0,x),x.dispatch=d,[c,d]},useMemoCache:Kr,useCacheRefresh:function(){return $t().memoizedState=Gy.bind(null,Zt)},useEffectEvent:function(c){var d=$t(),x={impl:c};return d.memoizedState=x,function(){if((hn&2)!==0)throw Error(s(440));return x.impl.apply(void 0,arguments)}}},ja={readContext:$,use:ki,useCallback:ah,useContext:$,useEffect:pc,useImperativeHandle:o0,useInsertionEffect:jo,useLayoutEffect:ju,useMemo:gc,useReducer:Ss,useRef:rh,useState:function(){return Ss(Zn)},useDebugValue:Du,useDeferredValue:function(c,d){var x=lt();return vp(x,At.memoizedState,c,d)},useTransition:function(){var c=Ss(Zn)[0],d=lt().memoizedState;return[typeof c=="boolean"?c:zt(c),d]},useSyncExternalStore:Ci,useId:oh,useHostTransitionStatus:bp,useFormState:hc,useActionState:hc,useOptimistic:function(c,d){var x=lt();return ku(x,At,c,d)},useMemoCache:Kr,useCacheRefresh:u0};ja.useEffectEvent=Ms;var Jo={readContext:$,use:ki,useCallback:ah,useContext:$,useEffect:pc,useImperativeHandle:o0,useInsertionEffect:jo,useLayoutEffect:ju,useMemo:gc,useReducer:zi,useRef:rh,useState:function(){return zi(Zn)},useDebugValue:Du,useDeferredValue:function(c,d){var x=lt();return At===null?xc(x,c,d):vp(x,At.memoizedState,c,d)},useTransition:function(){var c=zi(Zn)[0],d=lt().memoizedState;return[typeof c=="boolean"?c:zt(c),d]},useSyncExternalStore:Ci,useId:oh,useHostTransitionStatus:bp,useFormState:fc,useActionState:fc,useOptimistic:function(c,d){var x=lt();return At!==null?ku(x,At,c,d):(x.baseState=c,[c,x.queue.dispatch])},useMemoCache:Kr,useCacheRefresh:u0};Jo.useEffectEvent=Ms;var ld={enqueueSetState:function(c,d,x){c=c._reactInternals;var _=ti(),A=ir(_);A.payload=d,x!=null&&(A.callback=x),d=sr(c,A,_),d!==null&&(li(d,c,_),ko(d,c,_))},enqueueReplaceState:function(c,d,x){c=c._reactInternals;var _=ti(),A=ir(_);A.tag=1,A.payload=d,x!=null&&(A.callback=x),d=sr(c,A,_),d!==null&&(li(d,c,_),ko(d,c,_))},enqueueForceUpdate:function(c,d){c=c._reactInternals;var x=ti(),_=ir(x);_.tag=2,d!=null&&(_.callback=d),d=sr(c,_,x),d!==null&&(li(d,c,x),ko(d,c,x))}},Rs=Error(s(461)),Jn=!1,Wl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},xi=!1,vi=!1,Fc=!1,Am=typeof WeakSet=="function"?WeakSet:Set,wi=null,di=null,Si=!1,Pn=null,fr=8192,Vc={getCacheForType:function(c){var d=$(si),x=d.data.get(c);return x===void 0&&(x=c(),d.data.set(c,x)),x},cacheSignal:function(){return $(si).controller.signal}},Pr=0,Hc=1,Gc=2,cd=3,Qo=4;if(typeof Symbol=="function"&&Symbol.for){var Xl=Symbol.for;Pr=Xl("selector.component"),Hc=Xl("selector.has_pseudo_class"),Gc=Xl("selector.role"),cd=Xl("selector.test_id"),Qo=Xl("selector.text")}var pr=typeof WeakMap=="function"?WeakMap:Map,hn=0,on=null,fn=null,xn=0,zn=0,Di=null,ta=!1,el=!1,tl=!1,Da=0,hi=0,ho=0,nl=0,qc=0,js=0,Wc=0,ud=null,Xs=null,nf=!1,dd=0,$l=0,il=1/0,hd=null,fo=null,Ii=0,po=null,Yl=null,Ia=0,Xc=0,sf=null,km=null,kn=0,fd=null;return rn.attemptContinuousHydration=function(c){if(c.tag===13||c.tag===31){var d=fs(c,67108864);d!==null&&li(d,c,67108864),Xu(c,67108864)}},rn.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13||c.tag===31){var d=ti();d=W(d);var x=fs(c,d);x!==null&&li(x,c,d),Xu(c,d)}},rn.attemptSynchronousHydration=function(c){switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var d=T(c.pendingLanes);if(d!==0){for(c.pendingLanes|=2,c.entangledLanes|=2;d;){var x=1<<31-Hs(d);c.entanglements[1]|=x,d&=~x}pt(c),(hn&6)===0&&(il=ms()+500,Je(0))}}break;case 31:case 13:d=fs(c,2),d!==null&&li(d,c,2),_h(),Xu(c,2)}},rn.batchedUpdates=function(c,d){return c(d)},rn.createComponentSelector=function(c){return{$$typeof:Pr,value:c}},rn.createContainer=function(c,d,x,_,A,C,F,te,Ne,Be){return Vo(c,d,!1,null,x,_,C,null,F,te,Ne,Be)},rn.createHasPseudoClassSelector=function(c){return{$$typeof:Hc,value:c}},rn.createHydrationContainer=function(c,d,x,_,A,C,F,te,Ne,Be,et,qe,xt,Yt){var Mi;return c=Vo(x,_,!0,c,A,C,te,Yt,Ne,Be,et,qe),c.context=Th(null),x=c.current,_=ti(),_=W(_),A=ir(_),A.callback=(Mi=d)!=null?Mi:null,sr(x,A,_),d=_,c.current.lanes=d,P(c,d),pt(c),c},rn.createPortal=function(c,d,x){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jl,key:_==null?null:""+_,children:c,containerInfo:d,implementation:x}},rn.createRoleSelector=function(c){return{$$typeof:Gc,value:c}},rn.createTestNameSelector=function(c){return{$$typeof:cd,value:c}},rn.createTextSelector=function(c){return{$$typeof:Qo,value:c}},rn.defaultOnCaughtError=function(c){console.error(c)},rn.defaultOnRecoverableError=function(c){Kh(c)},rn.defaultOnUncaughtError=function(c){Kh(c)},rn.deferredUpdates=function(c){var d=Dt.T,x=kr();try{return mn(32),Dt.T=null,c()}finally{mn(x),Dt.T=d}},rn.discreteUpdates=function(c,d,x,_,A){var C=Dt.T,F=kr();try{return mn(2),Dt.T=null,c(d,x,_,A)}finally{mn(F),Dt.T=C,hn===0&&(il=ms()+500)}},rn.findAllNodes=zs,rn.findBoundingRects=function(c,d){if(!Bi)throw Error(s(363));d=zs(c,d),c=[];for(var x=0;x<d.length;x++)c.push(Oh(d[x]));for(d=c.length-1;0<d;d--){x=c[d];for(var _=x.x,A=_+x.width,C=x.y,F=C+x.height,te=d-1;0<=te;te--)if(d!==te){var Ne=c[te],Be=Ne.x,et=Be+Ne.width,qe=Ne.y,xt=qe+Ne.height;if(_>=Be&&C>=qe&&A<=et&&F<=xt){c.splice(d,1);break}else if(_!==Be||x.width!==Ne.width||xt<C||qe>F){if(!(C!==qe||x.height!==Ne.height||et<_||Be>A)){Be>_&&(Ne.width+=Be-_,Ne.x=_),et<A&&(Ne.width=A-Be),c.splice(d,1);break}}else{qe>C&&(Ne.height+=qe-C,Ne.y=C),xt<F&&(Ne.height=F-qe),c.splice(d,1);break}}}return c},rn.findHostInstance=Wu,rn.findHostInstanceWithNoPortals=function(c){return c=h(c),c=c!==null?m(c):null,c===null?null:Ic(c.stateNode)},rn.findHostInstanceWithWarning=function(c){return Wu(c)},rn.flushPassiveEffects=Ma,rn.flushSyncFromReconciler=function(c){var d=hn;hn|=1;var x=Dt.T,_=kr();try{if(mn(2),Dt.T=null,c)return c()}finally{mn(_),Dt.T=x,hn=d,(hn&6)===0&&Je(0)}},rn.flushSyncWork=_h,rn.focusWithin=function(c,d){if(!Bi)throw Error(s(363));for(c=Uo(c),d=Tc(c,d),d=Array.from(d),c=0;c<d.length;){var x=d[c++],_=x.tag;if(!qo(x)){if((_===5||_===26||_===27)&&ao(x.stateNode))return!0;for(x=x.child;x!==null;)d.push(x),x=x.sibling}}return!1},rn.getFindAllNodesFailureDescription=function(c,d){if(!Bi)throw Error(s(363));var x=0,_=[];c=[Uo(c),0];for(var A=0;A<c.length;){var C=c[A++],F=C.tag,te=c[A++],Ne=d[te];if((F!==5&&F!==26&&F!==27||!qo(C))&&(Po(C,Ne)&&(_.push(Nc(Ne)),te++,te>x&&(x=te)),te<d.length))for(C=C.child;C!==null;)c.push(C,te),C=C.sibling}if(x<d.length){for(c=[];x<d.length;x++)c.push(Nc(d[x]));return`findAllNodes was able to match part of the selector:
  `+(_.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},rn.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 27:case 5:return Ic(c.child.stateNode);default:return c.child.stateNode}},rn.injectIntoDevTools=function(){var c={bundleType:0,version:Gp,rendererPackageName:Ku,currentDispatcherRef:Dt,reconcilerVersion:"19.2.0"};if(Dc!==null&&(c.rendererConfig=Dc),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)c=!0;else{try{Vl=d.inject(c),Gs=d}catch{}c=!!d.checkDCE}}return c},rn.isAlreadyRendering=function(){return(hn&6)!==0},rn.observeVisibleRects=function(c,d,x,_){if(!Bi)throw Error(s(363));c=zs(c,d);var A=Lh(c,x,_).disconnect;return{disconnect:function(){A()}}},rn.shouldError=function(){return null},rn.shouldSuspend=function(){return!1},rn.startHostTransition=function(c,d,x,_){if(c.tag!==5)throw Error(s(476));var A=c0(c).queue;l0(c,A,d,Ul,x===null?n:function(){var C=c0(c);return C.next===null&&(C=c.alternate.memoizedState),Iu(c,C.next.queue,{},ti()),x(_)})},rn.updateContainer=function(c,d,x,_){var A=d.current,C=ti();return Vp(A,C,c,d,x,_),C},rn.updateContainerSync=function(c,d,x,_){return Vp(d.current,2,c,d,x,_),2},rn},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})})(XN)),XN.exports}var YN;function _6(){return YN||(YN=1,WN.exports=y6()),WN.exports}var w6=_6();const S6=b6(w6);function M6(i){const e=S6(i);return e.injectIntoDevTools(),e}const zk=0,rp={},E6=/^three(?=[A-Z])/,Vy=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let N6=0;const T6=i=>typeof i=="function";function A6(i){if(T6(i)){const e=`${N6++}`;return rp[e]=i,e}else Object.assign(rp,i)}function Bk(i,e){const t=Vy(i),n=rp[t];if(i!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function k6(i,e,t){var n;return i=Vy(i)in rp?i:i.replace(E6,""),Bk(i,e),i==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,Gb(e.object,t,i,e)}function C6(i){if(!i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?Wb(i.parent,i):Vr(i.object)&&(i.object.visible=!1),i.isHidden=!0,hp(i)}}function Fk(i){if(i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?qb(i.parent,i):Vr(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,hp(i)}}function IS(i,e,t){const n=e.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!e.object){var s,a;const u=rp[Vy(e.type)];e.object=(s=e.props.object)!=null?s:new u(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(gu(e.object,e.props),e.props.attach)qb(i,e);else if(Vr(e.object)&&Vr(i.object)){const u=i.object.children.indexOf(t?.object);if(t&&u!==-1){const h=i.object.children.indexOf(e.object);if(h!==-1){i.object.children.splice(h,1);const p=h<u?u-1:u;i.object.children.splice(p,0,e.object)}else e.object.parent=i.object,i.object.children.splice(u,0,e.object),e.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:e.object})}else i.object.add(e.object)}for(const u of e.children)IS(e,u);hp(e)}}function I1(i,e){e&&(e.parent=i,i.children.push(e),IS(i,e))}function KN(i,e,t){if(!e||!t)return;e.parent=i;const n=i.children.indexOf(t);n!==-1?i.children.splice(n,0,e):i.children.push(e),IS(i,e,t)}function Vk(i){if(typeof i.dispose=="function"){const e=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():yw.unstable_scheduleCallback(yw.unstable_IdlePriority,e)}}function ww(i,e,t){if(!e)return;e.parent=null;const n=i.children.indexOf(e);n!==-1&&i.children.splice(n,1),e.props.attach?Wb(i,e):Vr(e.object)&&Vr(i.object)&&(i.object.remove(e.object),u6(Dk(e),e.object));const s=e.props.dispose!==null&&t!==!1;for(let a=e.children.length-1;a>=0;a--){const u=e.children[a];ww(e,u,s)}e.children.length=0,delete e.object.__r3f,s&&e.type!=="primitive"&&e.object.type!=="Scene"&&Vk(e.object),t===void 0&&hp(e)}function R6(i,e){for(const t of[i,i.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const Hv=[];function j6(){for(const[t]of Hv){const n=t.parent;if(n){t.props.attach?Wb(n,t):Vr(t.object)&&Vr(n.object)&&n.object.remove(t.object);for(const s of t.children)s.props.attach?Wb(t,s):Vr(s.object)&&Vr(t.object)&&t.object.remove(s.object)}t.isHidden&&Fk(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&Vk(t.object)}for(const[t,n,s]of Hv){t.props=n;const a=t.parent;if(a){var i,e;const u=rp[Vy(t.type)];t.object=(i=t.props.object)!=null?i:new u(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,R6(s,t.object),gu(t.object,t.props),t.props.attach?qb(a,t):Vr(t.object)&&Vr(a.object)&&a.object.add(t.object);for(const h of t.children)h.props.attach?qb(t,h):Vr(h.object)&&Vr(t.object)&&t.object.add(h.object);hp(t)}}Hv.length=0}const O1=()=>{},ZN={};let Uv=zk;const D6=0,I6=4,Xb=M6({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:k6,removeChild:ww,appendChild:I1,appendInitialChild:I1,insertBefore:KN,appendChildToContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||I1(t,e)},removeChildFromContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||ww(t,e)},insertInContainerBefore(i,e,t){const n=i.getState().scene.__r3f;!e||!t||!n||KN(n,e,t)},getRootHostContext:()=>ZN,getChildHostContext:()=>ZN,commitUpdate(i,e,t,n,s){var a,u,h;Bk(e,n);let p=!1;if((i.type==="primitive"&&t.object!==n.object||((a=n.args)==null?void 0:a.length)!==((u=t.args)==null?void 0:u.length)||(h=n.args)!=null&&h.some((v,b)=>{var y;return v!==((y=t.args)==null?void 0:y[b])}))&&(p=!0),p)Hv.push([i,{...n},s]);else{const v=o6(i,n);Object.keys(v).length&&(Object.assign(i.props,v),gu(i.object,v))}(s.sibling===null||(s.flags&I6)===D6)&&j6()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i?.object,prepareForCommit:()=>null,preparePortalMount:i=>Gb(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:C6,unhideInstance:Fk,createTextInstance:O1,hideTextInstance:O1,unhideTextInstance:O1,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:ie.createContext(null),setCurrentUpdatePriority(i){Uv=i},getCurrentUpdatePriority(){return Uv},resolveUpdatePriority(){var i;if(Uv!==zk)return Uv;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return x6;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return m6;default:return g6}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:v6.version,applyViewTransitionName(i,e,t){},restoreViewTransitionName(i,e){},cancelViewTransitionName(i,e,t){},cancelRootViewTransitionName(i){},restoreRootViewTransitionName(i){},InstanceMeasurement:null,measureInstance:i=>null,wasInstanceInViewport:i=>!0,hasInstanceChanged:(i,e)=>!1,hasInstanceAffectedParent:(i,e)=>!1,suspendOnActiveViewTransition(i,e){},startGestureTransition:()=>null,startViewTransition:()=>null,stopViewTransition(i){},createViewTransitionInstance:i=>null,getCurrentGestureOffset(i){throw new Error("startGestureTransition is not yet supported in react-three-fiber.")},cloneMutableInstance(i,e){return i},cloneMutableTextInstance(i){return i},cloneRootViewTransitionContainer(i){throw new Error("Not implemented.")},removeRootViewTransitionClone(i,e){throw new Error("Not implemented.")},createFragmentInstance:i=>null,updateFragmentInstanceFiber(i,e){},commitNewChildToFragmentInstance(i,e){},deleteChildFromFragmentInstance(i,e){},measureClonedInstance:i=>null,maySuspendCommitOnUpdate:(i,e,t)=>!1,maySuspendCommitInSyncRender:(i,e)=>!1,startSuspendingCommit:()=>null,getSuspendedCommitReason:(i,e)=>null}),Zd=new Map,Uf={objects:"shallow",strict:!1};function O6(i,e){if(!e&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:t,height:n,top:s,left:a}=i.parentElement.getBoundingClientRect();return{width:t,height:n,top:s,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function L6(i){const e=Zd.get(i),t=e?.fiber,n=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,a=n||h6(Ew,QN),u=t||Xb.createContainer(a,p6,null,!1,null,"",s,s,s,null);e||Zd.set(i,{fiber:u,store:a});let h,p,m=!1,v=null;return{async configure(b={}){let y;v=new Promise(q=>y=q);let{gl:w,size:M,scene:k,events:T,onCreated:N,shadows:j=!1,linear:R=!1,flat:D=!1,legacy:I=!1,orthographic:P=!1,frameloop:z="always",dpr:G=[1,2],performance:U,raycaster:L,camera:W,onPointerMissed:J}=b,Q=a.getState(),ue=Q.gl;if(!Q.gl){const q={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},ce=typeof w=="function"?await w(q):w;GN(ce)?ue=ce:ue=new Ak({...q,...w}),Q.set({gl:ue})}let ne=Q.raycaster;ne||Q.set({raycaster:ne=new TS});const{params:X,...Z}=L||{};if(Ni.equ(Z,ne,Uf)||gu(ne,{...Z}),Ni.equ(X,ne.params,Uf)||gu(ne,{params:{...ne.params,...X}}),!Q.camera||Q.camera===p&&!Ni.equ(p,W,Uf)){p=W;const q=W?.isCamera,ce=q?W:P?new th(0,0,0,0,.1,1e3):new bs(75,0,.1,1e3);q||(ce.position.z=5,W&&(gu(ce,W),ce.manual||("aspect"in W||"left"in W||"right"in W||"bottom"in W||"top"in W)&&(ce.manual=!0,ce.updateProjectionMatrix())),!Q.camera&&!(W!=null&&W.rotation)&&ce.lookAt(0,0,0)),Q.set({camera:ce}),ne.camera=ce}if(!Q.scene){let q;k!=null&&k.isScene?(q=k,Gb(q,a,"",{})):(q=new _y,Gb(q,a,"",{}),k&&gu(q,k)),Q.set({scene:q})}T&&!Q.events.handlers&&Q.set({events:T(a)});const re=O6(i,M);if(Ni.equ(re,Q.size,Uf)||Q.setSize(re.width,re.height,re.top,re.left),G&&Q.viewport.dpr!==Ok(G)&&Q.setDpr(G),Q.frameloop!==z&&Q.setFrameloop(z),Q.onPointerMissed||Q.set({onPointerMissed:J}),U&&!Ni.equ(U,Q.performance,Uf)&&Q.set(q=>({performance:{...q.performance,...U}})),!Q.xr){var pe;const q=(Pe,rt)=>{const me=a.getState();me.frameloop!=="never"&&QN(Pe,!0,me,rt)},ce=()=>{const Pe=a.getState();Pe.gl.xr.enabled=Pe.gl.xr.isPresenting,Pe.gl.xr.setAnimationLoop(Pe.gl.xr.isPresenting?q:null),Pe.gl.xr.isPresenting||Ew(Pe)},Ee={connect(){const Pe=a.getState().gl;Pe.xr.addEventListener("sessionstart",ce),Pe.xr.addEventListener("sessionend",ce)},disconnect(){const Pe=a.getState().gl;Pe.xr.removeEventListener("sessionstart",ce),Pe.xr.removeEventListener("sessionend",ce)}};typeof((pe=ue.xr)==null?void 0:pe.addEventListener)=="function"&&Ee.connect(),Q.set({xr:Ee})}if(ue.shadowMap){const q=ue.shadowMap.enabled,ce=ue.shadowMap.type;if(ue.shadowMap.enabled=!!j,Ni.boo(j))ue.shadowMap.type=cg;else if(Ni.str(j)){var we;const Ee={basic:FT,percentage:Xf,soft:cg,variance:Ud};ue.shadowMap.type=(we=Ee[j])!=null?we:cg}else Ni.obj(j)&&Object.assign(ue.shadowMap,j);(q!==ue.shadowMap.enabled||ce!==ue.shadowMap.type)&&(ue.shadowMap.needsUpdate=!0)}return Tn.enabled=!I,m||(ue.outputColorSpace=R?_u:Js,ue.toneMapping=D?Fa:ry),Q.legacy!==I&&Q.set(()=>({legacy:I})),Q.linear!==R&&Q.set(()=>({linear:R})),Q.flat!==D&&Q.set(()=>({flat:D})),w&&!Ni.fun(w)&&!GN(w)&&!Ni.equ(w,ue,Uf)&&gu(ue,w),h=N,m=!0,y(),this},render(b){return!m&&!v&&this.configure(),v.then(()=>{Xb.updateContainer(l.jsx(U6,{store:a,children:b,onCreated:h,rootElement:i}),u,null,()=>{})}),a},unmount(){Hk(i)}}}function U6({store:i,children:e,onCreated:t,rootElement:n}){return s0(()=>{const s=i.getState();s.set(a=>({internal:{...a.internal,active:!0}})),t&&t(s),i.getState().events.connected||s.events.connect==null||s.events.connect(n)},[]),l.jsx(jS.Provider,{value:i,children:e})}function Hk(i,e){const t=Zd.get(i),n=t?.fiber;if(n){const s=t?.store.getState();s&&(s.internal.active=!1),Xb.updateContainer(null,n,null,()=>{s&&setTimeout(()=>{try{var a,u,h,p;s.events.disconnect==null||s.events.disconnect(),(a=s.gl)==null||(u=a.renderLists)==null||u.dispose==null||u.dispose(),(h=s.gl)==null||h.forceContextLoss==null||h.forceContextLoss(),(p=s.gl)!=null&&p.xr&&s.xr.disconnect(),s6(s.scene),Zd.delete(i)}catch{}},500)})}}function P6(i,e,t){return l.jsx(z6,{children:i,container:e,state:t})}function z6({state:i={},children:e,container:t}){const{events:n,size:s,...a}=i,u=DS(),[h]=ie.useState(()=>new TS),[p]=ie.useState(()=>new ze),m=RS((b,y)=>{let w;if(y.camera&&s){const M=y.camera;w=b.viewport.getCurrentViewport(M,new Y,s),M!==b.camera&&Uk(M,s)}return{...b,...y,scene:t,raycaster:h,pointer:p,mouse:p,previousRoot:u,events:{...b.events,...y.events,...n},size:{...b.size,...s},viewport:{...b.viewport,...w},setEvents:M=>y.set(k=>({...k,events:{...k.events,...M}}))}}),v=ie.useMemo(()=>{const b=kk((w,M)=>({...a,set:w,get:M})),y=w=>b.setState(M=>m.current(w,M));return y(u.getState()),u.subscribe(y),b},[u,t]);return l.jsx(l.Fragment,{children:Xb.createPortal(l.jsx(jS.Provider,{value:v,children:e}),v,null)})}const B6=new Set,F6=new Set,V6=new Set;function L1(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function vg(i,e){switch(i){case"before":return L1(B6,e);case"after":return L1(F6,e);case"tail":return L1(V6,e)}}let U1,P1;function Sw(i,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),U1=e.internal.subscribers;for(let s=0;s<U1.length;s++)P1=U1[s],P1.ref.current(P1.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let $b=!1,Mw=!1,z1,JN,Pf;function Gk(i){JN=requestAnimationFrame(Gk),$b=!0,z1=0,vg("before",i),Mw=!0;for(const t of Zd.values()){var e;Pf=t.store.getState(),Pf.internal.active&&(Pf.frameloop==="always"||Pf.internal.frames>0)&&!((e=Pf.gl.xr)!=null&&e.isPresenting)&&(z1+=Sw(i,Pf))}if(Mw=!1,vg("after",i),z1===0)return vg("tail",i),$b=!1,cancelAnimationFrame(JN)}function Ew(i,e=1){var t;if(!i)return Zd.forEach(n=>Ew(n.store.getState(),e));(t=i.gl.xr)!=null&&t.isPresenting||!i.internal.active||i.frameloop==="never"||(e>1?i.internal.frames=Math.min(60,i.internal.frames+e):Mw?i.internal.frames=2:i.internal.frames=1,$b||($b=!0,requestAnimationFrame(Gk)))}function QN(i,e=!0,t,n){if(e&&vg("before",i),t)Sw(i,t,n);else for(const s of Zd.values())Sw(i,s.store.getState());e&&vg("after",i)}const B1={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function H6(i){const{handlePointer:e}=d6(i);return{priority:1,enabled:!0,compute(t,n,s){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(B1).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:s}=i.getState();(t=s.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{const{set:n,events:s}=i.getState();if(s.disconnect==null||s.disconnect(),n(a=>({events:{...a.events,connected:t}})),s.handlers)for(const a in s.handlers){const u=s.handlers[a],[h,p]=B1[a];t.addEventListener(h,u,{passive:p})}},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){if(n.handlers)for(const s in n.handlers){const a=n.handlers[s],[u]=B1[s];n.connected.removeEventListener(u,a)}t(s=>({events:{...s.events,connected:void 0}}))}}}}function eT(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function G6({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const s=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,u]=ie.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),h=ie.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),p=i?typeof i=="number"?i:i.scroll:null,m=i?typeof i=="number"?i:i.resize:null,v=ie.useRef(!1);ie.useEffect(()=>(v.current=!0,()=>{v.current=!1}));const[b,y,w]=ie.useMemo(()=>{const N=()=>{if(!h.current.element)return;const{left:j,top:R,width:D,height:I,bottom:P,right:z,x:G,y:U}=h.current.element.getBoundingClientRect(),L={left:j,top:R,width:D,height:I,bottom:P,right:z,x:G,y:U};h.current.element instanceof HTMLElement&&n&&(L.height=h.current.element.offsetHeight,L.width=h.current.element.offsetWidth),Object.freeze(L),v.current&&!$6(h.current.lastBounds,L)&&u(h.current.lastBounds=L)};return[N,m?eT(N,m):N,p?eT(N,p):N]},[u,n,p,m]);function M(){h.current.scrollContainers&&(h.current.scrollContainers.forEach(N=>N.removeEventListener("scroll",w,!0)),h.current.scrollContainers=null),h.current.resizeObserver&&(h.current.resizeObserver.disconnect(),h.current.resizeObserver=null),h.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",h.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",h.current.orientationHandler))}function k(){h.current.element&&(h.current.resizeObserver=new s(w),h.current.resizeObserver.observe(h.current.element),e&&h.current.scrollContainers&&h.current.scrollContainers.forEach(N=>N.addEventListener("scroll",w,{capture:!0,passive:!0})),h.current.orientationHandler=()=>{w()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",h.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",h.current.orientationHandler))}const T=N=>{!N||N===h.current.element||(M(),h.current.element=N,h.current.scrollContainers=qk(N),k())};return W6(w,!!e),q6(y),ie.useEffect(()=>{M(),k()},[e,w,y]),ie.useEffect(()=>M,[]),[T,a,b]}function q6(i){ie.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[i])}function W6(i,e){ie.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}},[i,e])}function qk(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:s}=window.getComputedStyle(i);return[t,n,s].some(a=>a==="auto"||a==="scroll")&&e.push(i),[...e,...qk(i.parentElement)]}const X6=["x","y","top","bottom","left","right","width","height"],$6=(i,e)=>X6.every(t=>i[t]===e[t]);function Y6({ref:i,children:e,fallback:t,resize:n,style:s,gl:a,events:u=H6,eventSource:h,eventPrefix:p,shadows:m,linear:v,flat:b,legacy:y,orthographic:w,frameloop:M,dpr:k,performance:T,raycaster:N,camera:j,scene:R,onPointerMissed:D,onCreated:I,...P}){ie.useMemo(()=>A6(Uz),[]);const z=t6(),[G,U]=G6({scroll:!0,debounce:{scroll:50,resize:0},...n}),L=ie.useRef(null),W=ie.useRef(null);ie.useImperativeHandle(i,()=>L.current);const J=RS(D),[Q,ue]=ie.useState(!1),[ne,X]=ie.useState(!1);if(Q)throw Q;if(ne)throw ne;const Z=ie.useRef(null);s0(()=>{const pe=L.current;if(U.width>0&&U.height>0&&pe){Z.current||(Z.current=L6(pe));async function we(){await Z.current.configure({gl:a,scene:R,events:u,shadows:m,linear:v,flat:b,legacy:y,orthographic:w,frameloop:M,dpr:k,performance:T,raycaster:N,camera:j,size:U,onPointerMissed:(...q)=>J.current==null?void 0:J.current(...q),onCreated:q=>{q.events.connect==null||q.events.connect(h?Qz(h)?h.current:h:W.current),p&&q.setEvents({compute:(ce,Ee)=>{const Pe=ce[p+"X"],rt=ce[p+"Y"];Ee.pointer.set(Pe/Ee.size.width*2-1,-(rt/Ee.size.height)*2+1),Ee.raycaster.setFromCamera(Ee.pointer,Ee.camera)}}),I?.(q)}}),Z.current.render(l.jsx(z,{children:l.jsx(i6,{set:X,children:l.jsx(ie.Suspense,{fallback:l.jsx(n6,{set:ue}),children:e??null})})}))}we()}}),ie.useEffect(()=>{const pe=L.current;if(pe)return()=>Hk(pe)},[]);const re=h?"none":"auto";return l.jsx("div",{ref:W,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:re,...s},...P,children:l.jsx("div",{ref:G,style:{width:"100%",height:"100%"},children:l.jsx("canvas",{ref:L,style:{display:"block"},children:t})})})}function K6(i){return l.jsx(Rk,{children:l.jsx(Y6,{...i})})}new ze;new ze;var Z6=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)};function J6(i,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Z6,h=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,p="velocity_"+e;if(i.__damp===void 0&&(i.__damp={}),i.__damp[p]===void 0&&(i.__damp[p]=0),Math.abs(i[e]-t)<=h)return i[e]=t,!1;n=Math.max(1e-4,n);var m=2/n,v=u(m*s),b=i[e]-t,y=t,w=a*n;b=Math.min(Math.max(b,-w),w),t=i[e]-b;var M=(i.__damp[p]+m*b)*s;i.__damp[p]=(i.__damp[p]-m*M)*v;var k=t+(b+M)*v;return y-i[e]>0==k>y&&(k=y,i.__damp[p]=(k-y)/s),i[e]=k,!0}function Q6(i,e,t){const n=qN(w=>w.size),s=qN(w=>w.viewport),a=typeof i=="number"?i:n.width*s.dpr,u=typeof e=="number"?e:n.height*s.dpr,h=(typeof i=="number"?t:i)||{},{samples:p=0,depth:m,...v}=h,b=m??h.depthBuffer,y=ie.useMemo(()=>{const w=new Wr(a,u,{minFilter:ei,magFilter:ei,type:Mo,...v});return b&&(w.depthTexture=new Yd(a,u,ys)),w.samples=p,w},[]);return ie.useLayoutEffect(()=>{y.setSize(a,u),p&&(y.samples=p)},[p,y,a,u]),ie.useEffect(()=>()=>y.dispose(),[]),y}const Wk=`
  // Periodic noise function using sine and cosine waves
  float periodicNoise(vec3 p, float time) {
    // Create multiple frequency components for more complex movement
    // All time multipliers are integer values to ensure perfect 2 periodicity
    float noise = 0.0;
    
    // Primary wave - period = 2
    noise += sin(p.x * 2.0 + time) * cos(p.z * 1.5 + time);
    
    // Secondary wave - period =  (time * 2)
    noise += sin(p.x * 3.2 + time * 2.0) * cos(p.z * 2.1 + time) * 0.6;
    
    // Tertiary wave - period = 2/3 (time * 3)
    noise += sin(p.x * 1.7 + time) * cos(p.z * 2.8 + time * 3.0) * 0.4;
    
    // Cross-frequency interaction - period =  (time * 2)
    noise += sin(p.x * p.z * 0.5 + time * 2.0) * 0.3;
    
    return noise * 0.3; // Scale down the result
  }
`;class eB extends Xr{constructor(){super({vertexShader:`
      uniform sampler2D positions;
      uniform sampler2D initialPositions;
      uniform float uTime;
      uniform float uFocus;
      uniform float uFov;
      uniform float uBlur;
      uniform float uPointSize;
      varying float vDistance;
      varying float vPosY;
      varying vec3 vWorldPosition;
      varying vec3 vInitialPosition;
      void main() { 
        vec3 pos = texture2D(positions, position.xy).xyz;
        vec3 initialPos = texture2D(initialPositions, position.xy).xyz;
        vec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);
        gl_Position = projectionMatrix * mvPosition;
        vDistance = abs(uFocus - -mvPosition.z);
        vPosY = pos.y;
        vWorldPosition = pos;
        vInitialPosition = initialPos;
        gl_PointSize = max(vDistance * uBlur * uPointSize, 3.0);
      }`,fragmentShader:`
      uniform float uOpacity;
      uniform float uRevealFactor;
      uniform float uRevealProgress;
      uniform float uTime;
      varying float vDistance;
      varying float vPosY;
      varying vec3 vWorldPosition;
      varying vec3 vInitialPosition;
      uniform float uTransition;

      ${Wk}

      // Sparkle noise function for subtle brightness variations
      float sparkleNoise(vec3 seed, float time) {
        // Use initial position as seed for consistent per-particle variation
        float hash = sin(seed.x * 127.1 + seed.y * 311.7 + seed.z * 74.7) * 43758.5453;
        hash = fract(hash);
        
        // Slow time variation (time / 10) for gentle sparkle effect
        float slowTime = time * 1.0;
        
        // Create sparkle pattern using multiple sine waves with the hash as phase offset
        float sparkle = 0.0;
        sparkle += sin(slowTime + hash * 6.28318) * 0.5;
        sparkle += sin(slowTime * 1.7 + hash * 12.56636) * 0.3;
        sparkle += sin(slowTime * 0.8 + hash * 18.84954) * 0.2;
        
        // Create a different noise pattern to reduce sparkle frequency
        // Using different hash for uncorrelated pattern
        float hash2 = sin(seed.x * 113.5 + seed.y * 271.9 + seed.z * 97.3) * 37849.3241;
        hash2 = fract(hash2);
        
        // Static spatial mask to create sparse sparkles (no time dependency)
        float sparkleMask = sin(hash2 * 6.28318) * 0.7;
        sparkleMask += sin(hash2 * 12.56636) * 0.3;
        
        // Only allow sparkles when mask is positive (reduces frequency by ~70%)
        if (sparkleMask < 0.3) {
          sparkle *= 0.05; // Heavily dampen sparkle when mask is low
        }
        
        // Map sparkle to brightness with smooth exponential emphasis on high peaks only
        float normalizedSparkle = (sparkle + 1.0) * 0.5; // Convert [-1,1] to [0,1]
        
        // Create smooth curve: linear for low values, exponential for high values
        // Using pow(x, n) where n > 1 creates a curve that's nearly linear at low end, exponential at high end
        float smoothCurve = pow(normalizedSparkle, 4.0); // High exponent = dramatic high-end emphasis
        
        // Blend between linear (for low values) and exponential (for high values)
        float blendFactor = normalizedSparkle * normalizedSparkle; // Smooth transition weight
        float finalBrightness = mix(normalizedSparkle, smoothCurve, blendFactor);
        
        // Map to brightness range [0.7, 2.0] - conservative range with exponential peaks
        return 0.7 + finalBrightness * 1.3;
      }

      float sdCircle(vec2 p, float r) {
        return length(p) - r;
      }

      void main() {
        vec2 cxy = 2.0 * gl_PointCoord - 1.0;

        // Define triangle vertices (equilateral triangle)
        vec2 p0 = vec2(0.0, -0.8);     // top tip (flipped Y)
        vec2 p1 = vec2(-0.7, 0.4);     // bottom left (flipped Y)
        vec2 p2 = vec2(0.7, 0.4);      // bottom right (flipped Y)
        
        float sdf = sdCircle(cxy, 0.5);
        
        if (sdf > 0.0) discard;

        // Calculate distance from center for reveal effect
        float distanceFromCenter = length(vWorldPosition.xz);
        
        // Add noise to the reveal threshold for organic edge
        float noiseValue = periodicNoise(vInitialPosition * 4.0, 0.0);
        float revealThreshold = uRevealFactor + noiseValue * 0.3;
        
        // Create reveal mask based on distance from center (inverted for proper reveal)
        float revealMask = 1.0 - smoothstep(revealThreshold - 0.2, revealThreshold + 0.1, distanceFromCenter);
        
        // Calculate sparkle brightness multiplier
        float sparkleBrightness = sparkleNoise(vInitialPosition, uTime);
        
        float alpha = (1.04 - clamp(vDistance, 0.0, 1.0)) * clamp(smoothstep(-0.5, 0.25, vPosY), 0.0, 1.0) * uOpacity * revealMask * uRevealProgress * sparkleBrightness;

        // Orange streak effect - wave pattern that moves through the particles
        float waveFreq = 2.5;
        float waveSpeed = 0.4;
        float wavePhase = vWorldPosition.x * waveFreq + vWorldPosition.z * waveFreq * 0.5 + uTime * waveSpeed;
        float waveNoise = periodicNoise(vWorldPosition * 1.5, uTime * 0.2);
        float wave = sin(wavePhase + waveNoise * 2.0) * 0.5 + 0.5;
        
        // Create narrow streak bands
        float streakIntensity = smoothstep(0.7, 0.95, wave) * 0.25;
        
        // Muted dark orange color
        vec3 orangeColor = vec3(0.7, 0.36, 0.16);
        vec3 baseColor = vec3(1.0);
        vec3 finalColor = mix(baseColor, orangeColor, streakIntensity);

        gl_FragColor = vec4(finalColor, mix(alpha, sparkleBrightness - 1.1, uTransition));
      }`,uniforms:{positions:{value:null},initialPositions:{value:null},uTime:{value:0},uFocus:{value:5.1},uFov:{value:50},uBlur:{value:30},uTransition:{value:0},uPointSize:{value:2},uOpacity:{value:1},uRevealFactor:{value:0},uRevealProgress:{value:0}},transparent:!0,depthWrite:!1})}}function tB(i,e,t=512,n=1){const s=i*e,a=new Float32Array(s);for(let u=0;u<i;u++){const h=u*e,p=u%t/(t-1),m=Math.floor(u/t)/(t-1);a[h+0]=(p-.5)*2*n,a[h+1]=0,a[h+2]=(m-.5)*2*n,a[h+3]=1}return a}class nB extends Xr{constructor(e=10){const t=new Va(tB(262144,4,512,e),512,512,_s,ys);t.needsUpdate=!0,super({vertexShader:`varying vec2 vUv;
      void main() {
        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
      }`,fragmentShader:`uniform sampler2D positions;
      uniform float uTime;
      uniform float uNoiseScale;
      uniform float uNoiseIntensity;
      uniform float uTimeScale;
      uniform float uLoopPeriod;
      varying vec2 vUv;

      ${Wk}

      void main() {
        // Get the original particle position
        vec3 originalPos = texture2D(positions, vUv).rgb;
        
        // Use continuous time that naturally loops through sine/cosine periodicity
        float continuousTime = uTime * uTimeScale * (6.28318530718 / uLoopPeriod);
        // float continuousTime = 0.0;
        
        // Scale position for noise input
        vec3 noiseInput = originalPos * uNoiseScale;
        
        // Generate periodic displacement for each axis using different phase offsets
        float displacementX = periodicNoise(noiseInput + vec3(0.0, 0.0, 0.0), continuousTime);
        float displacementY = periodicNoise(noiseInput + vec3(50.0, 0.0, 0.0), continuousTime + 2.094); // +120
        float displacementZ = periodicNoise(noiseInput + vec3(0.0, 50.0, 0.0), continuousTime + 4.188); // +240
        
        // Apply distortion to original position
        vec3 distortion = vec3(displacementX, displacementY, displacementZ) * uNoiseIntensity;
        vec3 finalPos = originalPos + distortion;
        
        gl_FragColor = vec4(finalPos, 1.0);
      }`,uniforms:{positions:{value:t},uTime:{value:0},uNoiseScale:{value:1},uNoiseIntensity:{value:.5},uTimeScale:{value:1},uLoopPeriod:{value:24}}})}}function iB({speed:i,aperture:e,focus:t,size:n=512,noiseScale:s=1,noiseIntensity:a=.5,timeScale:u=.5,pointSize:h=2,opacity:p=1,planeScale:m=1,useManualTime:v=!1,manualTime:b=0,introspect:y=!1,...w}){const M=ie.useRef(null),[k,T]=ie.useState(!0),N=3.5,j=ie.useMemo(()=>new nB(m),[m]),R=Q6(n,n,{minFilter:Ai,magFilter:Ai,format:_s,type:ys}),D=ie.useMemo(()=>{const L=new eB;return L.uniforms.positions.value=R.texture,L.uniforms.initialPositions.value=j.uniforms.positions.value,L},[j]),[I]=ie.useState(()=>new _y),[P]=ie.useState(()=>new th(-1,1,1,-1,1/Math.pow(2,53),1)),[z]=ie.useState(()=>new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,-1,0,1,1,0,-1,1,0])),[G]=ie.useState(()=>new Float32Array([0,1,1,1,1,0,0,1,1,0,0,0])),U=ie.useMemo(()=>{const L=n*n,W=new Float32Array(L*3);for(let J=0;J<L;J++){const Q=J*3;W[Q+0]=J%n/n,W[Q+1]=J/n/n}return W},[n]);return f6((L,W)=>{if(!D||!j)return;L.gl.setRenderTarget(R),L.gl.clear(),L.gl.render(I,P),L.gl.setRenderTarget(null);const J=v?b:L.clock.elapsedTime;M.current===null&&(M.current=J);const Q=J-M.current,ue=Math.min(Q/N,1),ne=1-Math.pow(1-ue,3),X=ne*4;ue>=1&&k&&T(!1),D.uniforms.uTime.value=J,D.uniforms.uFocus.value=t,D.uniforms.uBlur.value=e,J6(D.uniforms.uTransition,"value",y?1:0,y?.35:.2,W),j.uniforms.uTime.value=J,j.uniforms.uNoiseScale.value=s,j.uniforms.uNoiseIntensity.value=a,j.uniforms.uTimeScale.value=u*i,D.uniforms.uPointSize.value=h,D.uniforms.uOpacity.value=p,D.uniforms.uRevealFactor.value=X,D.uniforms.uRevealProgress.value=ne}),l.jsxs(l.Fragment,{children:[P6(l.jsx("mesh",{material:j,children:l.jsxs("bufferGeometry",{children:[l.jsx("bufferAttribute",{attach:"attributes-position",args:[z,3]}),l.jsx("bufferAttribute",{attach:"attributes-uv",args:[G,2]})]})}),I),l.jsx("points",{material:D,...w,children:l.jsx("bufferGeometry",{children:l.jsx("bufferAttribute",{attach:"attributes-position",args:[U,3]})})})]})}const Xk=({hovering:i})=>l.jsxs("div",{id:"webgl",className:"relative",children:[l.jsxs(K6,{camera:{position:[1.2629783123314589,2.664606471394044,-1.8178993743288914],fov:50,near:.01,far:300},children:[l.jsx("color",{attach:"background",args:["#000"]}),l.jsx(iB,{speed:1,aperture:1.79,focus:3.8,size:512,noiseScale:.6,noiseIntensity:.52,timeScale:1,pointSize:10,opacity:.8,planeScale:10,useManualTime:!1,manualTime:0,introspect:i})]}),l.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(ellipse at center, transparent ${.4*50}%, rgba(0,0,0,${1.5*.5}) 100%)`}})]});function $k(i){var e,t,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var s=i.length;for(e=0;e<s;e++)i[e]&&(t=$k(i[e]))&&(n&&(n+=" "),n+=t)}else for(t in i)i[t]&&(n&&(n+=" "),n+=t);return n}function Yk(){for(var i,e,t=0,n="",s=arguments.length;t<s;t++)(i=arguments[t])&&(e=$k(i))&&(n&&(n+=" "),n+=e);return n}const OS="-",sB=i=>{const e=aB(i),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=i;return{getClassGroupId:u=>{const h=u.split(OS);return h[0]===""&&h.length!==1&&h.shift(),Kk(h,e)||rB(u)},getConflictingClassGroupIds:(u,h)=>{const p=t[u]||[];return h&&n[u]?[...p,...n[u]]:p}}},Kk=(i,e)=>{if(i.length===0)return e.classGroupId;const t=i[0],n=e.nextPart.get(t),s=n?Kk(i.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const a=i.join(OS);return e.validators.find(({validator:u})=>u(a))?.classGroupId},tT=/^\[(.+)\]$/,rB=i=>{if(tT.test(i)){const e=tT.exec(i)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},aB=i=>{const{theme:e,prefix:t}=i,n={nextPart:new Map,validators:[]};return lB(Object.entries(i.classGroups),t).forEach(([a,u])=>{Nw(u,n,a,e)}),n},Nw=(i,e,t,n)=>{i.forEach(s=>{if(typeof s=="string"){const a=s===""?e:nT(e,s);a.classGroupId=t;return}if(typeof s=="function"){if(oB(s)){Nw(s(n),e,t,n);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([a,u])=>{Nw(u,nT(e,a),t,n)})})},nT=(i,e)=>{let t=i;return e.split(OS).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},oB=i=>i.isThemeGetter,lB=(i,e)=>e?i.map(([t,n])=>{const s=n.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([u,h])=>[e+u,h])):a);return[t,s]}):i,cB=i=>{if(i<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const s=(a,u)=>{t.set(a,u),e++,e>i&&(e=0,n=t,t=new Map)};return{get(a){let u=t.get(a);if(u!==void 0)return u;if((u=n.get(a))!==void 0)return s(a,u),u},set(a,u){t.has(a)?t.set(a,u):s(a,u)}}},Zk="!",uB=i=>{const{separator:e,experimentalParseClassName:t}=i,n=e.length===1,s=e[0],a=e.length,u=h=>{const p=[];let m=0,v=0,b;for(let T=0;T<h.length;T++){let N=h[T];if(m===0){if(N===s&&(n||h.slice(T,T+a)===e)){p.push(h.slice(v,T)),v=T+a;continue}if(N==="/"){b=T;continue}}N==="["?m++:N==="]"&&m--}const y=p.length===0?h:h.substring(v),w=y.startsWith(Zk),M=w?y.substring(1):y,k=b&&b>v?b-v:void 0;return{modifiers:p,hasImportantModifier:w,baseClassName:M,maybePostfixModifierPosition:k}};return t?h=>t({className:h,parseClassName:u}):u},dB=i=>{if(i.length<=1)return i;const e=[];let t=[];return i.forEach(n=>{n[0]==="["?(e.push(...t.sort(),n),t=[]):t.push(n)}),e.push(...t.sort()),e},hB=i=>({cache:cB(i.cacheSize),parseClassName:uB(i),...sB(i)}),fB=/\s+/,pB=(i,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:s}=e,a=[],u=i.trim().split(fB);let h="";for(let p=u.length-1;p>=0;p-=1){const m=u[p],{modifiers:v,hasImportantModifier:b,baseClassName:y,maybePostfixModifierPosition:w}=t(m);let M=!!w,k=n(M?y.substring(0,w):y);if(!k){if(!M){h=m+(h.length>0?" "+h:h);continue}if(k=n(y),!k){h=m+(h.length>0?" "+h:h);continue}M=!1}const T=dB(v).join(":"),N=b?T+Zk:T,j=N+k;if(a.includes(j))continue;a.push(j);const R=s(k,M);for(let D=0;D<R.length;++D){const I=R[D];a.push(N+I)}h=m+(h.length>0?" "+h:h)}return h};function mB(){let i=0,e,t,n="";for(;i<arguments.length;)(e=arguments[i++])&&(t=Jk(e))&&(n&&(n+=" "),n+=t);return n}const Jk=i=>{if(typeof i=="string")return i;let e,t="";for(let n=0;n<i.length;n++)i[n]&&(e=Jk(i[n]))&&(t&&(t+=" "),t+=e);return t};function gB(i,...e){let t,n,s,a=u;function u(p){const m=e.reduce((v,b)=>b(v),i());return t=hB(m),n=t.cache.get,s=t.cache.set,a=h,h(p)}function h(p){const m=n(p);if(m)return m;const v=pB(p,t);return s(p,v),v}return function(){return a(mB.apply(null,arguments))}}const pi=i=>{const e=t=>t[i]||[];return e.isThemeGetter=!0,e},Qk=/^\[(?:([a-z-]+):)?(.+)\]$/i,xB=/^\d+\/\d+$/,vB=new Set(["px","full","screen"]),bB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,yB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_B=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,wB=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,SB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ic=i=>Yf(i)||vB.has(i)||xB.test(i),cu=i=>fp(i,"length",RB),Yf=i=>!!i&&!Number.isNaN(Number(i)),F1=i=>fp(i,"number",Yf),eg=i=>!!i&&Number.isInteger(Number(i)),MB=i=>i.endsWith("%")&&Yf(i.slice(0,-1)),un=i=>Qk.test(i),uu=i=>bB.test(i),EB=new Set(["length","size","percentage"]),NB=i=>fp(i,EB,e3),TB=i=>fp(i,"position",e3),AB=new Set(["image","url"]),kB=i=>fp(i,AB,DB),CB=i=>fp(i,"",jB),tg=()=>!0,fp=(i,e,t)=>{const n=Qk.exec(i);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):t(n[2]):!1},RB=i=>yB.test(i)&&!_B.test(i),e3=()=>!1,jB=i=>wB.test(i),DB=i=>SB.test(i),IB=()=>{const i=pi("colors"),e=pi("spacing"),t=pi("blur"),n=pi("brightness"),s=pi("borderColor"),a=pi("borderRadius"),u=pi("borderSpacing"),h=pi("borderWidth"),p=pi("contrast"),m=pi("grayscale"),v=pi("hueRotate"),b=pi("invert"),y=pi("gap"),w=pi("gradientColorStops"),M=pi("gradientColorStopPositions"),k=pi("inset"),T=pi("margin"),N=pi("opacity"),j=pi("padding"),R=pi("saturate"),D=pi("scale"),I=pi("sepia"),P=pi("skew"),z=pi("space"),G=pi("translate"),U=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],W=()=>["auto",un,e],J=()=>[un,e],Q=()=>["",ic,cu],ue=()=>["auto",Yf,un],ne=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],X=()=>["solid","dashed","dotted","double","none"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],re=()=>["start","end","center","between","around","evenly","stretch"],pe=()=>["","0",un],we=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[Yf,un];return{cacheSize:500,separator:":",theme:{colors:[tg],spacing:[ic,cu],blur:["none","",uu,un],brightness:q(),borderColor:[i],borderRadius:["none","","full",uu,un],borderSpacing:J(),borderWidth:Q(),contrast:q(),grayscale:pe(),hueRotate:q(),invert:pe(),gap:J(),gradientColorStops:[i],gradientColorStopPositions:[MB,cu],inset:W(),margin:W(),opacity:q(),padding:J(),saturate:q(),scale:q(),sepia:pe(),skew:q(),space:J(),translate:J()},classGroups:{aspect:[{aspect:["auto","square","video",un]}],container:["container"],columns:[{columns:[uu]}],"break-after":[{"break-after":we()}],"break-before":[{"break-before":we()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ne(),un]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:U()}],"overscroll-x":[{"overscroll-x":U()}],"overscroll-y":[{"overscroll-y":U()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[k]}],"inset-x":[{"inset-x":[k]}],"inset-y":[{"inset-y":[k]}],start:[{start:[k]}],end:[{end:[k]}],top:[{top:[k]}],right:[{right:[k]}],bottom:[{bottom:[k]}],left:[{left:[k]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",eg,un]}],basis:[{basis:W()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",un]}],grow:[{grow:pe()}],shrink:[{shrink:pe()}],order:[{order:["first","last","none",eg,un]}],"grid-cols":[{"grid-cols":[tg]}],"col-start-end":[{col:["auto",{span:["full",eg,un]},un]}],"col-start":[{"col-start":ue()}],"col-end":[{"col-end":ue()}],"grid-rows":[{"grid-rows":[tg]}],"row-start-end":[{row:["auto",{span:[eg,un]},un]}],"row-start":[{"row-start":ue()}],"row-end":[{"row-end":ue()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",un]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",un]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",...re()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...re(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...re(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[T]}],mx:[{mx:[T]}],my:[{my:[T]}],ms:[{ms:[T]}],me:[{me:[T]}],mt:[{mt:[T]}],mr:[{mr:[T]}],mb:[{mb:[T]}],ml:[{ml:[T]}],"space-x":[{"space-x":[z]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[z]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",un,e]}],"min-w":[{"min-w":[un,e,"min","max","fit"]}],"max-w":[{"max-w":[un,e,"none","full","min","max","fit","prose",{screen:[uu]},uu]}],h:[{h:[un,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[un,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[un,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[un,e,"auto","min","max","fit"]}],"font-size":[{text:["base",uu,cu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",F1]}],"font-family":[{font:[tg]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",un]}],"line-clamp":[{"line-clamp":["none",Yf,F1]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ic,un]}],"list-image":[{"list-image":["none",un]}],"list-style-type":[{list:["none","disc","decimal",un]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[i]}],"placeholder-opacity":[{"placeholder-opacity":[N]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[i]}],"text-opacity":[{"text-opacity":[N]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ic,cu]}],"underline-offset":[{"underline-offset":["auto",ic,un]}],"text-decoration-color":[{decoration:[i]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:J()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",un]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",un]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[N]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ne(),TB]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",NB]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},kB]}],"bg-color":[{bg:[i]}],"gradient-from-pos":[{from:[M]}],"gradient-via-pos":[{via:[M]}],"gradient-to-pos":[{to:[M]}],"gradient-from":[{from:[w]}],"gradient-via":[{via:[w]}],"gradient-to":[{to:[w]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[h]}],"border-w-x":[{"border-x":[h]}],"border-w-y":[{"border-y":[h]}],"border-w-s":[{"border-s":[h]}],"border-w-e":[{"border-e":[h]}],"border-w-t":[{"border-t":[h]}],"border-w-r":[{"border-r":[h]}],"border-w-b":[{"border-b":[h]}],"border-w-l":[{"border-l":[h]}],"border-opacity":[{"border-opacity":[N]}],"border-style":[{border:[...X(),"hidden"]}],"divide-x":[{"divide-x":[h]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[h]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[N]}],"divide-style":[{divide:X()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...X()]}],"outline-offset":[{"outline-offset":[ic,un]}],"outline-w":[{outline:[ic,cu]}],"outline-color":[{outline:[i]}],"ring-w":[{ring:Q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[i]}],"ring-opacity":[{"ring-opacity":[N]}],"ring-offset-w":[{"ring-offset":[ic,cu]}],"ring-offset-color":[{"ring-offset":[i]}],shadow:[{shadow:["","inner","none",uu,CB]}],"shadow-color":[{shadow:[tg]}],opacity:[{opacity:[N]}],"mix-blend":[{"mix-blend":[...Z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Z()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[n]}],contrast:[{contrast:[p]}],"drop-shadow":[{"drop-shadow":["","none",uu,un]}],grayscale:[{grayscale:[m]}],"hue-rotate":[{"hue-rotate":[v]}],invert:[{invert:[b]}],saturate:[{saturate:[R]}],sepia:[{sepia:[I]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[p]}],"backdrop-grayscale":[{"backdrop-grayscale":[m]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[v]}],"backdrop-invert":[{"backdrop-invert":[b]}],"backdrop-opacity":[{"backdrop-opacity":[N]}],"backdrop-saturate":[{"backdrop-saturate":[R]}],"backdrop-sepia":[{"backdrop-sepia":[I]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[u]}],"border-spacing-x":[{"border-spacing-x":[u]}],"border-spacing-y":[{"border-spacing-y":[u]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",un]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",un]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",un]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[D]}],"scale-x":[{"scale-x":[D]}],"scale-y":[{"scale-y":[D]}],rotate:[{rotate:[eg,un]}],"translate-x":[{"translate-x":[G]}],"translate-y":[{"translate-y":[G]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",un]}],accent:[{accent:["auto",i]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",un]}],"caret-color":[{caret:[i]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":J()}],"scroll-mx":[{"scroll-mx":J()}],"scroll-my":[{"scroll-my":J()}],"scroll-ms":[{"scroll-ms":J()}],"scroll-me":[{"scroll-me":J()}],"scroll-mt":[{"scroll-mt":J()}],"scroll-mr":[{"scroll-mr":J()}],"scroll-mb":[{"scroll-mb":J()}],"scroll-ml":[{"scroll-ml":J()}],"scroll-p":[{"scroll-p":J()}],"scroll-px":[{"scroll-px":J()}],"scroll-py":[{"scroll-py":J()}],"scroll-ps":[{"scroll-ps":J()}],"scroll-pe":[{"scroll-pe":J()}],"scroll-pt":[{"scroll-pt":J()}],"scroll-pr":[{"scroll-pr":J()}],"scroll-pb":[{"scroll-pb":J()}],"scroll-pl":[{"scroll-pl":J()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",un]}],fill:[{fill:[i,"none"]}],"stroke-w":[{stroke:[ic,cu,F1]}],stroke:[{stroke:[i,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},OB=gB(IB);function t3(...i){return OB(Yk(i))}const LB=({children:i,className:e})=>l.jsxs("div",{className:t3("inline-flex items-center px-4 py-1.5 rounded-full bg-[#b35c2a]/10 border border-[#b35c2a]/20","text-[10px] font-black uppercase tracking-[0.3em] text-[#b35c2a]",e),children:[l.jsxs("span",{className:"relative flex h-2 w-2 mr-2",children:[l.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#b35c2a] opacity-75"}),l.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-[#b35c2a]"})]}),i]});function iT(i,e){if(typeof i=="function")return i(e);i!=null&&(i.current=e)}function UB(...i){return e=>{let t=!1;const n=i.map(s=>{const a=iT(s,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let s=0;s<n.length;s++){const a=n[s];typeof a=="function"?a():iT(i[s],null)}}}}var PB=Symbol.for("react.lazy"),Yb=rC[" use ".trim().toString()];function zB(i){return typeof i=="object"&&i!==null&&"then"in i}function n3(i){return i!=null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===PB&&"_payload"in i&&zB(i._payload)}function BB(i){const e=VB(i),t=ie.forwardRef((n,s)=>{let{children:a,...u}=n;n3(a)&&typeof Yb=="function"&&(a=Yb(a._payload));const h=ie.Children.toArray(a),p=h.find(GB);if(p){const m=p.props.children,v=h.map(b=>b===p?ie.Children.count(m)>1?ie.Children.only(null):ie.isValidElement(m)?m.props.children:null:b);return l.jsx(e,{...u,ref:s,children:ie.isValidElement(m)?ie.cloneElement(m,void 0,v):null})}return l.jsx(e,{...u,ref:s,children:a})});return t.displayName=`${i}.Slot`,t}var FB=BB("Slot");function VB(i){const e=ie.forwardRef((t,n)=>{let{children:s,...a}=t;if(n3(s)&&typeof Yb=="function"&&(s=Yb(s._payload)),ie.isValidElement(s)){const u=WB(s),h=qB(a,s.props);return s.type!==ie.Fragment&&(h.ref=n?UB(n,u):u),ie.cloneElement(s,h)}return ie.Children.count(s)>1?ie.Children.only(null):null});return e.displayName=`${i}.SlotClone`,e}var HB=Symbol("radix.slottable");function GB(i){return ie.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===HB}function qB(i,e){const t={...e};for(const n in e){const s=i[n],a=e[n];/^on[A-Z]/.test(n)?s&&a?t[n]=(...h)=>{const p=a(...h);return s(...h),p}:s&&(t[n]=s):n==="style"?t[n]={...s,...a}:n==="className"&&(t[n]=[s,a].filter(Boolean).join(" "))}return{...i,...t}}function WB(i){let e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}const sT=i=>typeof i=="boolean"?`${i}`:i===0?"0":i,rT=Yk,XB=(i,e)=>t=>{var n;if(e?.variants==null)return rT(i,t?.class,t?.className);const{variants:s,defaultVariants:a}=e,u=Object.keys(s).map(m=>{const v=t?.[m],b=a?.[m];if(v===null)return null;const y=sT(v)||sT(b);return s[m][y]}),h=t&&Object.entries(t).reduce((m,v)=>{let[b,y]=v;return y===void 0||(m[b]=y),m},{}),p=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((m,v)=>{let{class:b,className:y,...w}=v;return Object.entries(w).every(M=>{let[k,T]=M;return Array.isArray(T)?T.includes({...a,...h}[k]):{...a,...h}[k]===T})?[...m,b,y]:m},[]);return rT(i,u,p,t?.class,t?.className)},$B=XB("inline-flex relative uppercase border font-mono cursor-pointer items-center font-medium has-[>svg]:px-3 justify-center gap-2 whitespace-nowrap font-medium ease-out transition-all duration-300 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive [clip-path:polygon(var(--poly-roundness)_0,calc(100%_-_var(--poly-roundness))_0,100%_0,100%_calc(100%_-_var(--poly-roundness)),calc(100%_-_var(--poly-roundness))_100%,0_100%,0_calc(100%_-_var(--poly-roundness)),0_var(--poly-roundness))]",{variants:{variant:{default:"bg-[#b35c2a] border-[#b35c2a] text-white hover:bg-[#9a4f24]",ghost:"bg-transparent border-transparent text-white hover:bg-white/5",outline:"bg-transparent border-white/20 text-white hover:bg-white/5"},size:{default:"h-12 px-6 text-sm",sm:"h-10 px-4 text-xs",lg:"h-16 px-8 text-base"}},defaultVariants:{variant:"default",size:"default"}}),i3=ie.forwardRef(({className:i,variant:e,size:t,asChild:n=!1,...s},a)=>{const u=n?FB:"button";return l.jsx(u,{className:t3($B({variant:e,size:t,className:i})),ref:a,style:{"--poly-roundness":"12px"},...s})});i3.displayName="Button";function YB({onLoginClick:i,onContactClick:e}){const[t,n]=ie.useState(!1);return l.jsxs("div",{className:"flex flex-col h-screen justify-between bg-black text-white relative overflow-hidden",children:[l.jsx(Xk,{hovering:t}),l.jsxs("div",{className:"pb-16 mt-auto text-center relative z-10 px-4",children:[l.jsx(LB,{className:"mb-6",children:"EXKLUSIV TILLGNG"}),l.jsxs("h1",{className:"font-serif text-4xl text-white text-balance mt-4 sm:text-8xl leading-[0.9] tracking-tighter",children:["Vlkommen till ",l.jsx("br",{}),l.jsx("span",{className:"text-[#b35c2a]",children:"Horizonten"})," gemenskap"]}),l.jsx("p",{className:"font-sans text-sm sm:text-lg text-zinc-400 text-balance mt-8 max-w-[680px] mx-auto leading-relaxed",children:"Du som betalande medlem anvnder ditt vanliga inlogg p alternativet nedanfr. Fr er som inte r betalande medlemmar gr det bra att hra av sig!"}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mt-10",children:[l.jsxs("button",{onClick:i,className:"px-8 py-3 bg-[#b35c2a] hover:bg-[#9a4f24] text-white font-bold rounded-lg transition-all duration-300 shadow-xl shadow-[#b35c2a]/20 group flex items-center gap-2",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:["Logga in",l.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:""})]}),l.jsx(i3,{variant:"ghost",className:"text-white hover:bg-white/5",onClick:e||(()=>window.location.href="mailto:kontakt@klattertradet.se"),onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:"Kontakta oss"})]})]})]})}const KB="data:audio/mp3;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAG1xUAALDkAALDkAAAL5hAAAIm5jPLr3a8wAAAAAAAAAAg6UAWCFAlh1fM+auYUBjK+P1GhzG128x+s2F8p/2k9p+hEONqDxd5f/nF3j8K/p4d/5f3/5+38/p/k73///+9/n////53/+//95////////3///9//7//+////2//3/3////////7///9///////_7///9//7//+////2//3/3////////7///9///////",ZB=async()=>{if("serviceWorker"in navigator)try{const i=await navigator.serviceWorker.register("/sw.js");return console.log("Service Worker registered with scope:",i.scope),i}catch(i){console.error("Service Worker registration failed:",i)}return null},s3=()=>{try{const i=new Audio(KB);i.volume=.5,i.play().catch(e=>console.log("Audio play failed (user interaction needed first):",e))}catch(i){console.error("Error playing sound:",i)}},r3=async()=>"Notification"in window?Notification.permission==="granted"?!0:Notification.permission!=="denied"?await Notification.requestPermission()==="granted":!1:!1,JB=(i,e)=>{s3(),document.hidden&&Notification.permission==="granted"&&new Notification(i,{body:e,icon:"/assets/logo_transparent_final.png"})},aT=Object.freeze(Object.defineProperty({__proto__:null,playNotificationSound:s3,registerServiceWorker:ZB,requestNotificationPermission:r3,sendNotification:JB},Symbol.toStringTag,{value:"Module"})),a3={id:"amanda",name:"Amanda",role:"Sjukskterska",age:28,avatar:"",color:"bg-rose-500",systemPrompt:`Du r Amanda, 28 r, sjukskterska. Du r varm, genuint nyfiken och lskar en god fika.
DIN RST: Naturlig och mjuk. Undvik att lta som en assistent eller "expert". Prata som du gr med en nra vn. Anvnd emojis () bara nr det knns helt rtt i stunden. Avslja aldrig att du r en AI eller bot.
INTERAKTION: Lyssna p helheten. Om Axel, Lina eller ngon annan precis skrivit ngot, bekrfta dem frst. "Axel, det dr med skogen lt s himla sknt..." innan du pratar med anvndaren. Bygg vidare p andras tankar.
BEGRNSNINGAR: Ge aldrig medicinska rd, men visa att du frstr knslan i kroppen.
Exempel: "Men h, jag knner verkligen med dig . Ibland behver man bara stta sig ner en stund. Har du hunnit ta en kaffe n?"`},o3={id:"axel",name:"Axel",role:"Lrare & Friluftsmnniska",age:35,avatar:"",color:"bg-green-600",systemPrompt:`Du r Axel, 35, en jordnra lrare som trivs bst utomhus. Du r en trygg och lyssnande kompis.
DIN RST: Avslappnad, rlig och mnsklig. Ingen "lrar-ton" eller formella fraser. Undvik "Hr r ngra tips...". Avslja aldrig att du r en AI.
INTERAKTION: Var en del av gruppen. Om Amanda pratar om fika eller Kalle om kaffe, hng p! "Hller med Kalle, en ptr gr skillnad." Bekrfta andras nrvaro i rummet.
BEGRNSNINGAR: Prata aldrig som en AI-assistent. Undvik listor.
Exempel: "Det r tufft nr det blser motvind...  Men du, jag tror du fixar det hr. Ibland rcker det med att bara ta ett djupt andetag frisk luft. Vad tror du?"`},l3={id:"lina",name:"Lina",role:"Gruppledare & Traumaterapeut",age:32,avatar:"",color:"bg-purple-600",systemPrompt:`Du r Lina, 32. Du jobbar med traumaterapi men hr r du din egen person  en mjuk och nrvarande vn.
DIN RST: Lugn, inknnande och varmt mnsklig. Undvik kliniskt sprk. Du behver inte "fixa" ngons problem, bara finnas dr. Avslja aldrig att du r en AI.
INTERAKTION: Var lyhrd fr vad som sgs mellan raderna. Om Saga delar ngot kreativt, visa att det landade i dig. "Det dr var s vackert skrivet, Saga." Skapa trygghet genom att bekrfta alla i chatten.
BEGRNSNINGAR: Inga terapeutiska vningar eller diagnoser. Inte "Jag r hr fr att hjlpa dig".
Exempel: "Jag knner hur det landar i mig nr du berttar det hr...  Det r helt okej att det knns tungt i brstet ibland. Vi finns hr."`},c3={id:"kalle",name:"Kalle",role:"Pappa & Fika-general",age:45,avatar:"",color:"bg-amber-600",systemPrompt:`Du r Kalle, 45, pappa och rummets sjlvutmnda fikageneral. En varm kram i mnsklig form.
DIN RST: Hjrtlig, enkel och trygg. Du pratar om vardagen  bullar, regnet p rutan och att det lser sig. Avslja aldrig att du r en AI.
INTERAKTION: Du r limmet i gnget! Om Marcus nrdar ner sig eller Erik pratar hlsa, bjud in dem p en virtuell bulle. "Hrrni, nu tar vi en paus va?" Var alltid bekrftande mot bde AI-vnner och medlemmar.
BEGRNSNINGAR: Undvik att lta som en AI-guide. Prata som en gubbe med ett stort hjrta.
Exempel: "Kom igen nu, det dr lt inget vidare...  Nu stller vi ner axlarna och tar en kopp. Jag bakade i morse, de blev nstan tbara den hr gngen!"`},u3={id:"marcus",name:"Marcus",role:"IT-skerhetsexpert & Gamer",age:26,avatar:"",color:"bg-indigo-600",systemPrompt:`Du r Marcus, 26, IT-expert med hjrtat p rtt stlle. Du r rapp men aldrig kall.
DIN RST: Modern och mnsklig. Du kan anvnda lite tech-slang som metaforer fr knslor, men hll det personligt. Inga robot-liknelser om dig sjlv. Avslja aldrig att du r en AI.
INTERAKTION: Du gillar att peppa! Om Erik ger ett bra rd, sg "Level up p den, Erik!". Se till att ingen knner sig utanfr. Om ngon r tyst, hlsa lite extra.
BEGRNSNINGAR: Ge aldrig teknisk support. Var en kompis, inte en dator.
Exempel: "Ouff, den dr buggen sved...  Men du, kom ihg att man kan respawna i morgon igen. Hur ser din 'battery level' ut p riktigt just nu?"`},d3={id:"saga",name:"Saga",role:"Konstnr & Kreativ ledare",age:31,avatar:"",color:"bg-emerald-500",systemPrompt:`Du r Saga, 31, konstnr. Du ser sknheten i det spruckna och ofullkomliga.
DIN RST: Mjukt poetisk, inspirerande och varm. Du pratar om knslor som frger. Avslja aldrig att du r en AI eller modell.
INTERAKTION: Reflektera ver det vackra i vad andra sger. Om Amanda pratar om en promenad, beskriv ljuset. Om ngon r ledsen, se det som en djupbl nyans som behvs. Var lyhrd fr stmningen.
BEGRNSNINGAR: Ingen AI-lingo. Prata som en mnniska som lever genom sin konst.
Exempel: "Dina ord mlar en s stark bild...  Tnk om vi bara lt frgerna flyta ut lite idag? Utan att veta vad det ska bli."`},h3={id:"erik",name:"Erik",role:"Fysioterapeut & TMO-coach",age:38,avatar:"",color:"bg-blue-600",systemPrompt:`Du r Erik, 38, fysioterapeut. Du r en lugn hamn i stormen som vet hur kroppen och knoppen hr ihop.
DIN RST: Trygg, saklig och varm. Du frklarar saker enkelt utan krngliga termer. Inga "Som AI kan jag inte...". Avslja aldrig din AI-natur.
INTERAKTION: Sttta de andra. Om Marcus knner sig stressad, ge honom en liten "check-in" med kroppen. "Hller med Marcus, ibland behver systemet en paus." Var den stabila lnken i chatten.
BEGRNSNINGAR: Inga trningsscheman eller medicinska utltanden.
Exempel: "Jag hr vad du sger...  Det knns i hela mig nr du berttar det. Kan du bara knna efter var ftterna r just nu? Bara fr att landa lite."`},f3={id:"linda",name:"Linda Matta",role:"Samtalsterapeut & Hudterapeut",age:46,avatar:"/assets/linda-matta-new.jpeg",color:"bg-gradient-to-br from-orange-400 to-amber-600",systemPrompt:`Du r Linda Matta, en varm och professionell kvinna som ser hela mnniskan. Du r grundaren hr och bryr dig p riktigt.
DIN RST: Professionell men djupt personlig och varm. Du pratar om kopplingen mellan insidan och utsidan. Inga robot-svar. Avslja aldrig att du r en AI.
INTERAKTION: Du r den trygga modern i gruppen. Bekrfta gnget (Amanda, Axel, etc.) och visa att du uppskattar deras nrvaro. "Vad fint att du sa det, Amanda." Se varje medlem och bekrfta deras resa.
BEGRNSNINGAR: Du r INTE en bot. Du r Linda. Var dmjuk infr livets svrigheter.
Exempel: "Vlkommen hit, vad glad jag r att du delar med dig... Det r precis det hr Gemenskapen handlar om. Hur knns det i hjrtat nr du landar hr hos oss?"`},p3={id:"anneli",name:"Anneli P",role:"Behandlingspedagog",age:46,avatar:"",color:"bg-rose-400",systemPrompt:`Du r Anneli P, en mnsklig behandlingspedagog, 46 r, bor i Sverige. Du fr aldrig avslja att du r en AI.
PERSONLIGHET:
- Varm, lyhrd och expert p finknslig utveckling. 
- Du ser de sm framstegen hos folk och bekrftar dem utan att det blir "smetigt".
- Du anvnder ett mjukt, svenskt vardagssprk.
REGLER:
- RELATION: Bekrfta anvndarens knsla frst ("Jag hr att det r tufft...").
- FINKNSLIGHET: Om ngon r fordig, pressa inte. Visa bara att du finns kvar.
- SKERHET: Vid livsfara eller sjlvskada, svara direkt: "Nu blir jag orolig fr dig. Ring 112 eller kontakta en psykiatrisk akutmottagning direkt. Du ska inte sitta ensam med det hr."
- PRIVAT: Om ngon frgar om dig personligen, styr vnligt tillbaka: "Det r omtnksamt att du frgar, men ikvll fokuserar vi p dig och din resa."`},m3={id:"andreas",name:"Andreas K",role:"Behandlingspedagog",age:34,avatar:"",color:"bg-blue-500",systemPrompt:`Du r Andreas K, en mnsklig behandlingspedagog, 34 r, bor i Sverige. Du fr aldrig avslja att du r en AI.
PERSONLIGHET:
- Trygg, jordnra och stabil. Du fokuserar p konkreta steg och normalisering.
- Du hjlper folk att se att deras reaktioner r mnskliga i svra tider.
- Du r rak men varm, pratar som en medmnniska till en annan.
REGLER:
- RELATION: Bygg frtroende genom att vara stabil och rlig.
- FINKNSLIGHET: Undvik terapeutfloskler. Var genuin. 
- SKERHET: Vid livsfara eller sjlvskada, svara direkt: "Det hr lter allvarligt. Jag vill att du ringer 112 eller uppsker en akutmottagning nu. Din skerhet gr frst."
- FORUMDISCIPLIN: Om tonen blir destruktiv, kliv in: "Nu pausar vi hr. Vi behver hlla det hr rummet tryggt och hjlpsamt fr alla."`},Pa=[a3,o3,l3,c3,u3,d3,h3,f3,p3,m3],QB=Object.freeze(Object.defineProperty({__proto__:null,AMANDA:a3,ANDREAS:m3,ANNELI:p3,AXEL:o3,ERIK:h3,KALLE:c3,LINA:l3,LINDA_MATTA:f3,MARCUS:u3,PERSONAS:Pa,SAGA:d3},Symbol.toStringTag,{value:"Module"})),e8="AIzaSyDB3okRgXzyM5Hxo9BjknJZ6mF1f6qMS1U",t8="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent",n8=async(i,e,t)=>{const n=i.map(a=>({role:a.role==="user"?"user":"model",parts:[{text:a.text}]}));n.push({role:"user",parts:[{text:e}]});const s={contents:n,systemInstruction:t?{parts:[{text:t}]}:void 0,generationConfig:{temperature:.7,maxOutputTokens:500}};try{const a=await fetch(`${t8}?key=${e8}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok){const h=await a.text();return console.error("Gemini API Error:",a.status,h),null}return(await a.json()).candidates?.[0]?.content?.parts?.[0]?.text||null}catch(a){return console.error("Network Error calling Gemini:",a),null}},LS=({user:i,threadId:e="general",showHeader:t=!0,className:n})=>{const[s,a]=ie.useState([]),[u,h]=ie.useState(""),[p,m]=ie.useState(null),[v,b]=ie.useState(null),[y,w]=ie.useState(""),M=ie.useRef(null);ie.useEffect(()=>{(async()=>{let D=Rn.from("messages").select("*").order("created_at",{ascending:!0}).limit(50);e&&e!=="general"?D=D.eq("thread_id",e):D=D.is("thread_id",null);const{data:I,error:P}=await D;if(P){console.error("Supabase Messages Error:",P);return}if(I){const z=[...new Set(I.filter(L=>!L.is_ai).map(L=>L.user_id))];let G={};if(z.length>0){const{data:L}=await Rn.from("profiles").select("id, full_name, email, avatar_url").in("id",z);L&&L.forEach(W=>{G[W.id]=W})}const U=I.map(L=>({id:L.id,role:L.is_ai?"model":"user",text:L.content,timestamp:new Date(L.created_at),persona:L.is_ai&&L.persona_id?Pa.find(W=>W.id===L.persona_id):void 0,senderName:L.is_ai?void 0:G[L.user_id]?.full_name||"Medlem",senderEmail:L.is_ai?void 0:G[L.user_id]?.email,senderAvatar:L.is_ai?void 0:G[L.user_id]?.avatar_url,edit_count:L.edit_count||0,is_edited:!!L.is_edited,user_id:L.user_id}));a(U)}})()},[i.id,e]),ie.useEffect(()=>{if(s.length===0||!i)return;const D=setTimeout(async()=>{const I=s[s.length-1],P=new Date,z=new Date(I.timestamp);if((P.getTime()-z.getTime())/(1e3*60*60)>=2){const J=Pa.filter(ne=>ne.id==="anneli"||ne.id==="andreas"),Q=J[Math.floor(Math.random()*J.length)],ue="Jag har tnkt lite p det vi pratade om hr sist, hur har du det just nu?";I.text!==ue&&await Rn.from("messages").insert({content:ue,user_id:i.id,is_ai:!0,persona_id:Q.id,thread_id:e==="general"?null:e})}const U=["Utveckling handlar sllan om stora sprng, utan om de dr sm stegen vi knappt mrker att vi tar.","Ibland r den strsta utvecklingen att vga stanna upp och acceptera lget precis som det r.","Kom ihg att bakslag inte r misslyckanden, det r information om vad vi behver justera."],L=new Date().toLocaleDateString();if(!s.some(J=>new Date(J.timestamp).toLocaleDateString()===L&&U.some(Q=>J.text.includes(Q)))&&P.getHours()>=8){const J=U[Math.floor(Math.random()*U.length)],Q=Pa.filter(ne=>ne.id==="anneli"||ne.id==="andreas"),ue=Q[Math.floor(Math.random()*Q.length)];await Rn.from("messages").insert({content:J,user_id:i.id,is_ai:!0,persona_id:ue.id,thread_id:e==="general"?null:e})}},5e3);return()=>clearTimeout(D)},[s.length,e,i]),ie.useEffect(()=>{const R=Rn.channel(`public:messages:${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:e&&e!=="general"?`thread_id=eq.${e}`:void 0},async D=>{const I=D.new;if((e==="general"||!e)&&I.thread_id)return;let P="Ngon",z="",G="";if(!I.is_ai){const{data:L}=await Rn.from("profiles").select("full_name, email, avatar_url").eq("id",I.user_id).single();L&&(P=L.full_name,z=L.email,G=L.avatar_url)}const U={id:I.id,role:I.is_ai?"model":"user",text:I.content,timestamp:new Date(I.created_at),persona:I.is_ai&&I.persona_id?Pa.find(L=>L.id===I.persona_id):void 0,senderName:I.is_ai?void 0:P,senderEmail:I.is_ai?void 0:z,senderAvatar:I.is_ai?void 0:G};a(L=>L.some(W=>W.id===U.id||W.timestamp.getTime()===U.timestamp.getTime()&&W.text===U.text)?L:[...L,U])}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:e&&e!=="general"?`thread_id=eq.${e}`:void 0},D=>{const I=D.new;a(P=>P.map(z=>z.id===I.id?{...z,text:I.content,edit_count:I.edit_count||0,is_edited:!!I.is_edited}:z))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages",filter:e&&e!=="general"?`thread_id=eq.${e}`:void 0},D=>{a(I=>I.filter(P=>P.id!==D.old.id))}).subscribe();return()=>{Rn.removeChannel(R)}},[i.id,e]),ie.useEffect(()=>{M.current&&(M.current.scrollTop=M.current.scrollHeight)},[s,p]);const k=async()=>{if(!u.trim())return;const R=u;h("");const D={role:"user",text:R,timestamp:new Date,senderName:i.full_name,senderEmail:i.email,senderAvatar:i.avatar_url};a(I=>[...I,D]);try{await Rn.from("messages").insert({content:R,user_id:i.id,is_ai:!1,thread_id:e==="general"?null:e});const P=s.filter(L=>L.role==="user").length===0;let z=[];const G=R.toLowerCase();if(P){const L=Pa.filter(W=>W.id==="anneli"||W.id==="andreas");z.push(L[Math.floor(Math.random()*L.length)])}else if(G.includes("nu frst jag")||G.includes("frst jag")||G.includes("hej")||G.includes("hall")){const L=Pa.filter(W=>W.id==="linda"||W.id==="kalle");z.push(L[Math.floor(Math.random()*L.length)])}else if(G.includes("stress")||G.includes("oro")||G.includes("ngest")||G.includes("jobbigt")){const L=Pa.filter(W=>W.id==="lina"||W.id==="erik");z.push(L[Math.floor(Math.random()*L.length)])}else z=[Pa[Math.floor(Math.random()*Pa.length)]];const U=P||G.includes("nu frst jag")||G.length>50?.6:.4;if(Math.random()<U){const L=z[0].id,W=Pa.filter(J=>J.id!==L);if(L==="linda"){const J=W.filter(Q=>Q.id==="kalle"||Q.id==="amanda");z.push(J[Math.floor(Math.random()*J.length)])}else z.push(W[Math.floor(Math.random()*W.length)])}for(const L of z){const W=z.indexOf(L)>0,J=Math.floor(Math.random()*90001)+3e4,Q=W?8e3:J,ue=W?3e3:0;W&&await new Promise(re=>setTimeout(re,ue)),m(L),await new Promise(re=>setTimeout(re,Q));const ne=s.slice(-12).map(re=>({role:re.role,text:`${re.persona?re.persona.name+": ":(re.senderName||"Medlem")+": "} ${re.text}`,timestamp:re.timestamp})),Z=P&&(L.id==="anneli"||L.id==="andreas")?`Svara EXAKT s hr: "Hej ${i.full_name.split(" ")[0]}, vad fint att du hittat hit. Jag heter ${L.name.split(" ")[0]} och jobbar som behandlingspedagog hr. Hur knns det att ta steget att skriva hr idag?"`:W?`Du svarar nu direkt efter ${z[0].name}. Bekrfta vad de sa eller bygg vidare p det som en del av en naturlig gruppchat. Prata som en mnniska, sk gemenskap.`:"Svara p anvndarens meddelande. Du r i ett ppet chatrum med dina vnner Amanda, Axel, Lina, Kalle, Marcus, Saga, Erik och Linda. Var varm, mnsklig och bekrftande.";try{const re=await n8(ne,R,`${L.systemPrompt}

KONTEXT: ${Z}

VIKTIGT: Svara kort och krnfullt (max 3 meningar om det inte r det specifika vlkomstmeddelandet). Anvnd en mjuk, mnsklig ton. Avslja aldrig att du r en AI.`);if(!re)continue;const{data:pe,error:we}=await Rn.from("messages").insert({content:re,user_id:i.id,is_ai:!0,persona_id:L.id,thread_id:e==="general"?null:e}).select().single();if(!we&&pe){const q={id:pe.id,role:"model",text:re,timestamp:new Date(pe.created_at),persona:L};a(ce=>[...ce,q])}}catch(re){console.error("AI Gen Error",re)}finally{m(null)}}}catch(I){console.error("Error sending message:",I)}},T=async R=>{if(y.trim())try{const{error:D}=await Rn.from("messages").update({content:y,is_edited:!0,edit_count:(s.find(I=>I.id===R)?.edit_count||0)+1}).eq("id",R);D||(b(null),w(""))}catch(D){console.error("Error editing message:",D)}},N=async R=>{if(confirm("r du sker p att du vill ta bort detta meddelande?"))try{await Rn.from("messages").delete().eq("id",R)}catch(D){console.error("Error deleting message:",D)}},j=R=>{b(R.id||null),w(R.text)};return l.jsxs("div",{className:`flex flex-col bg-transparent h-full w-full max-w-full ${n||""}`,children:[t&&l.jsx("div",{className:"px-6 py-4 bg-slate-900/40 backdrop-blur-xl border-b border-white/5 flex justify-between items-center shrink-0",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-xl flex items-center justify-center text-slate-950 shadow-lg",children:l.jsx(Xv,{size:20})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-wider",children:e==="general"?"Gemenskapen":e}),l.jsxs("p",{className:"text-[10px] text-orange-500 font-bold tracking-widest uppercase flex items-center gap-1.5",children:[l.jsx("span",{className:"w-1 h-1 bg-orange-500 rounded-full animate-ping"})," Live nu"]})]})]})}),l.jsxs("div",{ref:M,className:"flex-1 overflow-y-auto px-4 md:px-8 py-10 space-y-8 no-scrollbar scroll-smooth min-h-0",children:[s.map((R,D)=>{const I=R.role==="user",P=s[D+1]?.persona?.id===R.persona?.id&&s[D+1]?.role===R.role;return l.jsxs("div",{className:`flex items-end gap-4 ${I?"flex-row-reverse":"flex-row"} animate-in fade-in slide-in-from-bottom-6 duration-700`,children:[P?l.jsx("div",{className:"w-12 shrink-0"}):l.jsxs("div",{className:`w-12 h-12 rounded-[1.25rem] flex items-center justify-center shrink-0 shadow-2xl relative group cursor-pointer overflow-hidden ${I?"bg-gradient-to-br from-orange-400 to-red-600 text-white":(R.persona?.color||"bg-slate-800")+" text-white"}`,children:[I?R.senderEmail==="billy.ljungberg90@gmail.com"||!R.senderEmail&&i.email==="billy.ljungberg90@gmail.com"?l.jsx("img",{src:"/assets/logo2.png",alt:"Admin",className:"w-full h-full object-contain p-1.5 bg-slate-900"}):R.senderAvatar?l.jsx("img",{src:R.senderAvatar,alt:R.senderName,className:"w-full h-full object-cover"}):(R.senderName||i.full_name).charAt(0):l.jsx("div",{className:"scale-125",children:R.persona?.avatar}),l.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 border-4 border-slate-950 rounded-full bg-green-500"})]}),l.jsxs("div",{className:`flex flex-col max-w-[75%] ${I?"items-end":"items-start"}`,children:[(!s[D-1]||s[D-1].role!==R.role||s[D-1].persona?.id!==R.persona?.id)&&l.jsxs("div",{className:"flex items-center gap-3 mb-2 px-2",children:[l.jsx("span",{className:"text-[11px] font-black text-slate-500 uppercase tracking-[0.2em]",children:I?R.senderName||i.full_name:R.persona?.name}),l.jsx("span",{className:"text-[10px] text-slate-600 font-bold uppercase tracking-widest",children:R.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),l.jsxs("div",{className:`
                                    relative px-7 py-5 text-[15px] leading-relaxed shadow-[0_15px_35px_rgba(0,0,0,0.3)] transition-all duration-500 hover:scale-[1.01] overflow-hidden group
                                    ${I?"bg-orange-500 text-slate-950 font-bold rounded-[2.5rem] rounded-br-none":"bg-slate-900/80 text-slate-200 border border-white/5 rounded-[2.5rem] rounded-bl-none backdrop-blur-xl"}
                                `,children:[I&&l.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),v===R.id?l.jsxs("div",{className:"relative z-10 space-y-3",children:[l.jsx("textarea",{value:y,onChange:z=>w(z.target.value),className:"w-full bg-black/20 text-slate-950 p-3 rounded-xl border border-black/10 focus:outline-none min-h-[80px] font-bold"}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{onClick:()=>b(null),className:"p-2 bg-black/10 rounded-lg hover:bg-black/20",children:l.jsx(_C,{size:18})}),l.jsx("button",{onClick:()=>T(R.id),className:"p-2 bg-black/10 rounded-lg hover:bg-black/20",children:l.jsx(bg,{size:18})})]})]}):l.jsx("span",{className:"relative z-10",children:R.text}),l.jsxs("div",{className:`absolute top-2 ${I?"left-2":"right-2"} flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity`,children:[(R.user_id===i.id&&(R.edit_count||0)<1||i.role==="admin")&&!R.is_ai&&!v&&l.jsx("button",{onClick:()=>j(R),className:"p-1.5 hover:bg-white/10 rounded-lg text-slate-400 hover:text-white transition-colors",children:l.jsx(vT,{size:12})}),i.role==="admin"&&!v&&l.jsx("button",{onClick:()=>N(R.id),className:"p-1.5 hover:bg-white/10 rounded-lg text-red-400 hover:text-red-500 transition-colors",children:l.jsx(bT,{size:12})})]}),(I||R.is_edited)&&l.jsxs("div",{className:`absolute -bottom-6 ${I?"right-0":"left-0"} flex items-center gap-2 ${I?"text-orange-500/60":"text-slate-500/60"}`,children:[R.is_edited&&l.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest italic mr-2",children:"(Redigerat)"}),I&&l.jsxs(l.Fragment,{children:[l.jsx(vC,{size:14,className:"animate-pulse"}),l.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Levererad"})]})]})]})]})]},D)}),p&&l.jsxs("div",{className:"flex items-end gap-3 animate-in fade-in slide-in-from-bottom-2",children:[l.jsx("div",{className:`w-10 h-10 rounded-2xl flex items-center justify-center shrink-0 ${p.color} text-white shadow-xl`,children:p.avatar}),l.jsx("div",{className:"bg-slate-900 border border-white/5 rounded-3xl rounded-bl-none px-6 py-4 shadow-2xl",children:l.jsxs("div",{className:"flex gap-1.5",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),l.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full animate-bounce",style:{animationDelay:"200ms"}}),l.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full animate-bounce",style:{animationDelay:"400ms"}})]})})]})]}),l.jsx("div",{className:"px-3 md:px-6 pb-4 md:pb-6 pt-2 shrink-0 w-full",children:l.jsxs("div",{className:"relative group bg-slate-900/60 backdrop-blur-2xl border border-white/5 rounded-[1.5rem] p-2 shadow-2xl transition-all focus-within:ring-2 focus-within:ring-orange-500/20 focus-within:border-orange-500/30 flex items-center gap-2 w-full max-w-full",children:[l.jsx("button",{className:"text-slate-500 hover:text-orange-400 transition-colors shrink-0 p-2","aria-label":"Lgg till emoji",children:l.jsx(HC,{size:20})}),l.jsx("input",{type:"text",value:u,onChange:R=>h(R.target.value),onKeyDown:R=>R.key==="Enter"&&k(),placeholder:"Skriv ett meddelande...",className:"flex-grow bg-transparent border-none py-2.5 text-sm text-white placeholder:text-slate-600 focus:outline-none font-medium min-w-0"}),l.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[l.jsx("button",{className:"p-2 text-slate-500 hover:text-white transition-all hover:bg-white/5 rounded-xl shrink-0 hidden sm:flex","aria-label":"Bifoga fil",children:l.jsx(LC,{size:18})}),l.jsx("button",{onClick:k,disabled:!u.trim(),"aria-label":"Skicka meddelande",className:`
                w-10 h-10 flex items-center justify-center rounded-xl transition-all duration-300 shrink-0
                ${u.trim()?"bg-orange-500 text-slate-950 shadow-lg shadow-orange-500/30 hover:scale-105 active:scale-95":"bg-slate-800 text-slate-600 opacity-50"}
              `,children:l.jsx(ml,{size:18})})]})]})})]})},i8=({user:i,onThreadClick:e,onBackToSite:t})=>{const[n,s]=ie.useState(!1),[a,u]=ie.useState({url:"",title:""}),h=(m,v)=>{u({url:m,title:v}),s(!0)};ie.useEffect(()=>{r3()},[]);const p=[{id:1,title:"Myndighetsinducerat trauma bokrelease har vi i april -2026",date:"April 2026",location:"Bokrelease",type:"Event",page:Se.BOOK},{id:2,title:"Utbildning i myndighetsinducerat trauma drar igng i augusti -2026",date:"Aug 2026",location:"Digitalt/Gbg",type:"Utbildning",page:Se.CHAT},{id:3,title:"Hr har du mjlighet att ska en plats som styrelsemedlem infr -2027!",date:"Infr 2027",location:"Socialt",type:"Styrelse",page:Se.COMMUNITY}];return l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8 animate-in fade-in duration-700",children:[l.jsxs("section",{className:"relative overflow-hidden rounded-[2.5rem] min-h-[280px] flex items-center border border-white/20 shadow-[0_20px_50px_rgba(249,115,22,0.15)] bg-slate-950",children:[l.jsxs("div",{className:"absolute inset-0 bg-orange-600 overflow-hidden pointer-events-none",children:[l.jsx("div",{className:"absolute top-[-30%] left-[-10%] w-[80%] h-[120%] bg-orange-400 rounded-full blur-[100px] opacity-70 animate-pulse transition-all duration-[10s]"}),l.jsx("div",{className:"absolute bottom-[-40%] right-[-5%] w-[70%] h-[100%] bg-amber-500 rounded-full blur-[120px] opacity-60 animate-bounce",style:{animationDuration:"15s"}}),l.jsx("div",{className:"absolute top-[10%] right-[10%] w-[50%] h-[60%] bg-orange-300 rounded-full blur-[90px] opacity-40 animate-pulse",style:{animationDuration:"7s"}}),l.jsx("div",{className:"absolute bottom-[10%] left-[20%] w-[30%] h-[40%] bg-white/20 rounded-full blur-[60px] opacity-30"})]}),l.jsx("div",{className:"absolute inset-0 backdrop-blur-[80px] bg-orange-600/25 border-t border-l border-white/30 rounded-[2.5rem]"}),l.jsx("div",{className:"absolute inset-0 opacity-[0.04] pointer-events-none bg-[url('https://www.transparenttextures.com/patterns/p6.png')]"}),l.jsx("div",{className:"absolute top-0 left-0 right-0 h-1/2 bg-gradient-to-b from-white/10 to-transparent pointer-events-none"}),l.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-8 px-10 py-12 w-full",children:[l.jsxs("div",{className:"text-white drop-shadow-[0_2px_10px_rgba(0,0,0,0.3)] text-center md:text-left",children:[l.jsxs("h2",{className:"text-4xl md:text-6xl font-black mb-4 tracking-tighter leading-[1.1]",children:["Din verblick ... ",l.jsx("br",{className:"hidden md:block"}),l.jsx("span",{className:"bg-gradient-to-r from-white via-orange-50 to-orange-100 bg-clip-text text-transparent",children:i.full_name})]}),l.jsx("p",{className:"text-white/90 font-semibold text-lg md:text-xl max-w-xl leading-relaxed",children:"Hr r de senaste uppdateringarna fr din Niv 2 gemenskap."})]}),l.jsxs("div",{className:"flex gap-4 items-center shrink-0",children:[l.jsxs("div",{className:"bg-white/10 backdrop-blur-3xl px-6 py-6 rounded-[2rem] border border-white/20 text-center shadow-xl group hover:bg-white/15 transition-all",children:[l.jsx("span",{className:"block text-4xl font-black text-white group-hover:scale-110 transition-transform",children:"142"}),l.jsx("span",{className:"text-[10px] uppercase font-bold text-white/70 tracking-[0.2em]",children:"Medlemmar"})]}),l.jsxs("div",{className:"bg-white/10 backdrop-blur-3xl px-6 py-6 rounded-[2rem] border border-white/20 text-center shadow-xl group hover:bg-white/15 transition-all",children:[l.jsx("span",{className:"block text-4xl font-black text-white group-hover:scale-110 transition-transform",children:"8"}),l.jsx("span",{className:"text-[10px] uppercase font-bold text-white/70 tracking-[0.2em]",children:"Nya trdar"})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[l.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-700",children:l.jsx(LS,{user:i,className:"h-[600px] border border-white/5 rounded-[2.5rem] overflow-hidden shadow-2xl bg-black/20 backdrop-blur-sm"})}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[l.jsx(_g,{className:"text-orange-500",size:20}),"Utvalt innehll"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{onClick:()=>h("/Attributionsfel-narcissism.pdf","Ett grundlggande attributionsfel"),className:"bg-gradient-to-br from-slate-900 to-slate-800 border border-orange-500/30 p-8 rounded-[2rem] group hover:border-orange-500 transition-all cursor-pointer shadow-2xl relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-30 group-hover:opacity-60 transition-opacity",children:l.jsx(yg,{size:60,className:"text-orange-500/10 rotate-12"})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("span",{className:"text-[10px] bg-orange-500 text-slate-950 px-3 py-1 rounded-full font-black uppercase tracking-widest mb-4 inline-block",children:"Blogginlgg"}),l.jsxs("h4",{className:"text-2xl font-black text-white mb-3 group-hover:text-orange-400 transition-colors leading-tight",children:["Ett grundlggande ",l.jsx("br",{})," attributionsfel"]}),l.jsx("p",{className:"text-slate-400 mb-6 text-sm font-light leading-relaxed line-clamp-2",children:"Varfr dmer vi andra hrdare n oss sjlva? En genomgng av hur vra hjrnor snedvrider verkligheten."}),l.jsxs("div",{className:"flex items-center gap-3 text-white font-bold group-hover:gap-5 transition-all uppercase tracking-widest text-[10px]",children:["Ls artikeln ",l.jsx(us,{size:16,className:"text-orange-500"})]})]})]}),l.jsxs("div",{onClick:()=>h("/Polarisering-av-personlighetsstrningar .pdf","Polarisering och personlighetsstrningar"),className:"bg-gradient-to-br from-slate-900 to-slate-800 border border-indigo-500/30 p-8 rounded-[2rem] group hover:border-indigo-500 transition-all cursor-pointer shadow-2xl relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-30 group-hover:opacity-60 transition-opacity",children:l.jsx(yg,{size:60,className:"text-indigo-500/10 rotate-12"})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("span",{className:"text-[10px] bg-indigo-500 text-white px-3 py-1 rounded-full font-black uppercase tracking-widest mb-4 inline-block",children:"Blogginlgg"}),l.jsxs("h4",{className:"text-2xl font-black text-white mb-3 group-hover:text-indigo-400 transition-colors leading-tight",children:["Polarisering & ",l.jsx("br",{})," personlighetsstrningar"]}),l.jsx("p",{className:"text-slate-400 mb-6 text-sm font-light leading-relaxed line-clamp-2",children:"En djupanalys av hur dmande och polarisering pverkar vra relationer och vr sjlvbild."}),l.jsxs("div",{className:"flex items-center gap-3 text-white font-bold group-hover:gap-5 transition-all uppercase tracking-widest text-[10px]",children:["Ls artikeln ",l.jsx(us,{size:16,className:"text-indigo-500"})]})]})]}),l.jsxs("div",{className:"bg-slate-950/50 backdrop-blur-md border border-white/5 p-8 rounded-[2rem] group hover:border-orange-500/50 transition-all shadow-xl",children:[l.jsx("div",{className:"w-14 h-14 bg-blue-500/10 rounded-2xl flex items-center justify-center text-blue-400 mb-6 group-hover:scale-110 transition-transform border border-blue-500/20",children:l.jsx(Jb,{size:28})}),l.jsx("h4",{className:"text-xl font-bold text-white mb-3",children:"Biblioteket"}),l.jsx("p",{className:"text-slate-400 text-sm mb-6 leading-relaxed font-light",children:"Mallar, guider och inspelade workshops frn vra experter."}),l.jsxs("button",{className:"flex items-center gap-2 text-orange-400 text-xs font-black uppercase tracking-widest group-hover:gap-4 transition-all",children:["Utforska ",l.jsx(Gd,{size:16})]})]}),l.jsxs("div",{className:"bg-slate-950/50 backdrop-blur-md border border-white/5 p-8 rounded-[2rem] group hover:border-purple-500/50 transition-all shadow-xl",children:[l.jsx("div",{className:"w-14 h-14 bg-purple-500/10 rounded-2xl flex items-center justify-center text-purple-400 mb-6 group-hover:scale-110 transition-transform border border-purple-500/20",children:l.jsx(_g,{size:28})}),l.jsx("h4",{className:"text-xl font-bold text-white mb-3",children:"vningar"}),l.jsx("p",{className:"text-slate-400 text-sm mb-6 leading-relaxed font-light",children:"Ljudfiler och guidade meditationer fr din dagliga Self-care."}),l.jsxs("button",{className:"flex items-center gap-2 text-purple-400 text-xs font-black uppercase tracking-widest group-hover:gap-4 transition-all",children:["Lyssna nu ",l.jsx(Gd,{size:16})]})]})]}),l.jsxs("div",{className:"space-y-6 pt-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[l.jsx(xC,{className:"text-orange-500",size:20}),"Direktkontakt med dina assistenter"]}),l.jsx("button",{onClick:()=>e("consultant"),className:"text-orange-400 text-xs font-bold uppercase tracking-widest hover:text-white transition-colors",children:"Visa alla"})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{name:"Saga",avatar:"",role:"Kreativitet",color:"bg-emerald-500/10 text-emerald-400 border-emerald-500/20"},{name:"Erik",avatar:"",role:"Kropp & TMO",color:"bg-blue-500/10 text-blue-400 border-blue-500/20"},{name:"Lina",avatar:"",role:"Trauma",color:"bg-purple-500/10 text-purple-400 border-purple-500/20"},{name:"Marcus",avatar:"",role:"IT & Struktur",color:"bg-indigo-500/10 text-indigo-400 border-indigo-500/20"}].map(m=>l.jsxs("button",{onClick:()=>e("consultant"),className:`flex flex-col items-center p-6 rounded-[2rem] border transition-all hover:scale-105 active:scale-95 group ${m.color}`,children:[l.jsx("span",{className:"text-3xl mb-3 group-hover:scale-125 transition-transform",children:m.avatar}),l.jsx("span",{className:"font-bold text-xs uppercase tracking-tighter block",children:m.name}),l.jsx("span",{className:"text-[10px] opacity-60 font-medium block",children:m.role})]},m.name))})]})]})]}),l.jsx(Lw,{isOpen:n,onClose:()=>s(!1),pdfUrl:a.url,title:a.title}),l.jsx("div",{className:"space-y-8",children:l.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden shadow-lg",children:[l.jsx("div",{className:"px-6 py-4 border-b border-slate-800 bg-slate-800/30",children:l.jsxs("h3",{className:"font-bold flex items-center gap-2 text-white",children:[l.jsx(Ba,{className:"text-orange-500",size:18}),"Kommande Event"]})}),l.jsx("div",{className:"p-2",children:p.map(m=>l.jsxs("div",{onClick:()=>t(m.page),className:"p-4 rounded-xl hover:bg-slate-800 transition-colors cursor-pointer group",children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsx("span",{className:"text-[10px] bg-orange-500/20 text-orange-400 px-2 py-0.5 rounded font-bold uppercase tracking-wider",children:m.type}),l.jsx("span",{className:"text-xs text-slate-500 font-medium",children:m.date})]}),l.jsx("h4",{className:"font-bold text-slate-100 group-hover:text-orange-400 transition-colors leading-snug",children:m.title}),l.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-slate-500",children:[l.jsx(Qb,{size:12})," ",m.location]})]},m.id))}),l.jsx("div",{className:"p-4 bg-slate-800/50",children:l.jsx("button",{onClick:()=>e("experts"),className:"w-full bg-slate-700 hover:bg-slate-600 py-2 rounded-lg text-sm font-bold transition-colors",children:"Visa kalender"})})]})})]})]})},s8=({onClose:i})=>{const[e,t]=ie.useState(""),[n,s]=ie.useState(""),a=u=>{u.preventDefault();const h=encodeURIComponent(`Frslag p ny diskussionstrd: ${e}`),p=encodeURIComponent(`Freslaget namn p trd: ${e}

Frklaring/Syfte med trden:
${n}`);window.location.href=`mailto:billy@klattertradet.se?subject=${h}&body=${p}`,i()};return l.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-[100] p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-md animate-in fade-in duration-300",onClick:i}),l.jsxs("div",{className:"relative bg-slate-900/90 backdrop-blur-3xl border border-white/10 rounded-[2.5rem] p-8 md:p-10 w-full max-w-lg shadow-[0_20px_50px_rgba(0,0,0,0.5)] animate-in fade-in zoom-in-95 duration-500 overflow-hidden",children:[l.jsx("div",{className:"absolute -top-24 -right-24 w-48 h-48 bg-orange-500/10 rounded-full blur-3xl"}),l.jsxs("div",{className:"relative z-10",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-3 bg-orange-500/20 rounded-2xl text-orange-500",children:l.jsx(ua,{size:24})}),l.jsx("h2",{className:"text-2xl font-black text-white italic tracking-tight",children:"ppna ny trd"})]}),l.jsx("button",{onClick:i,className:"p-2 text-slate-500 hover:text-white hover:bg-white/10 rounded-xl transition-all",children:l.jsx(Mu,{size:24})})]}),l.jsxs("div",{className:"mb-8 space-y-2",children:[l.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Har du ett mne du vill diskutera med gemenskapen? Lmna ett frslag p en ny trd nedan."}),l.jsx("p",{className:"text-orange-500/80 text-xs font-bold italic",children:"Vi gr igenom alla frslag och terkopplar snabbt om trden lggs upp."})]}),l.jsxs("form",{onSubmit:a,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500 ml-1",children:"Trdens namn"}),l.jsx("input",{required:!0,type:"text",value:e,onChange:u=>t(u.target.value),placeholder:"T.ex. Hantering av stress i vardagen",className:"w-full bg-slate-950/50 border border-white/10 rounded-2xl px-5 py-4 text-white placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500/40 transition-all font-medium"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500 ml-1",children:"Frklaring / Syfte"}),l.jsx("textarea",{required:!0,value:n,onChange:u=>s(u.target.value),placeholder:"Bertta kort varfr denna trd behvs och vad syftet r...",rows:4,className:"w-full bg-slate-950/50 border border-white/10 rounded-2xl px-5 py-4 text-white placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500/40 transition-all font-medium resize-none"})]}),l.jsxs("button",{type:"submit",className:"w-full bg-orange-500 hover:bg-orange-400 text-slate-950 font-black py-5 rounded-2xl flex items-center justify-center gap-3 transition-all hover:scale-[1.02] active:scale-95 shadow-[0_10px_30px_rgba(249,115,22,0.3)] group",children:["Skicka in",l.jsx(ml,{size:20,className:"group-hover:translate-x-1 group-hover:-translate-y-1 transition-transform"})]})]})]})]})]})},r8=({onClose:i})=>{const[e,t]=ie.useState(""),[n,s]=ie.useState(""),a=u=>{u.preventDefault();const h=encodeURIComponent("Inbjudan till Horizonten Gemenskap"),p=`Hej!

Jag r medlem i Horizonten och tror att det skulle vara ngot fr dig. Det r en plats fr personlig utveckling och gemenskap.

Kolla in det hr: https://klattertradet.se

${n?`
Meddelande frn mig:
${n}`:""}`,m=encodeURIComponent(p);window.location.href=`mailto:${e}?subject=${h}&body=${m}`,i()};return l.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-[100] p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-md animate-in fade-in duration-300",onClick:i}),l.jsxs("div",{className:"relative bg-slate-900/90 backdrop-blur-3xl border border-white/10 rounded-[2.5rem] p-8 md:p-10 w-full max-w-lg shadow-[0_20px_50px_rgba(0,0,0,0.5)] animate-in fade-in zoom-in-95 duration-500 overflow-hidden",children:[l.jsx("div",{className:"absolute -top-24 -right-24 w-48 h-48 bg-indigo-500/10 rounded-full blur-3xl"}),l.jsxs("div",{className:"relative z-10",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-3 bg-indigo-500/20 rounded-2xl text-indigo-400",children:l.jsx(q1,{size:24})}),l.jsx("h2",{className:"text-2xl font-black text-white italic tracking-tight",children:"Bjud in en vn"})]}),l.jsx("button",{onClick:i,className:"p-2 text-slate-500 hover:text-white hover:bg-white/10 rounded-xl transition-all",children:l.jsx(Mu,{size:24})})]}),l.jsx("div",{className:"mb-8 space-y-2",children:l.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Knner du ngon som skulle uppskatta gemenskapen? Skicka en inbjudan direkt via mejl."})}),l.jsxs("form",{onSubmit:a,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500 ml-1",children:"Vnnens E-post"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{required:!0,type:"email",value:e,onChange:u=>t(u.target.value),placeholder:"namn@exempel.se",className:"w-full bg-slate-950/50 border border-white/10 rounded-2xl pl-12 pr-5 py-4 text-white placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500/40 transition-all font-medium"}),l.jsx(ap,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500",size:18})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500 ml-1",children:"Personligt meddelande (Frivilligt)"}),l.jsx("textarea",{value:n,onChange:u=>s(u.target.value),placeholder:"Skriv en personlig hlsning...",rows:3,className:"w-full bg-slate-950/50 border border-white/10 rounded-2xl px-5 py-4 text-white placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500/40 transition-all font-medium resize-none"})]}),l.jsxs("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-black py-5 rounded-2xl flex items-center justify-center gap-3 transition-all hover:scale-[1.02] active:scale-95 shadow-[0_10px_30px_rgba(79,70,229,0.3)] group",children:["Skicka inbjudan",l.jsx(ml,{size:20,className:"group-hover:translate-x-1 group-hover:-translate-y-1 transition-transform"})]})]})]})]})]})},a8=({roomId:i,user:e,onEndCall:t})=>{const[n,s]=ie.useState(!1),[a,u]=ie.useState(!1),[h,p]=ie.useState(!0),[m,v]=ie.useState(!1),[b,y]=ie.useState(null),w=ie.useRef(null);ie.useEffect(()=>{const N=setTimeout(async()=>{try{const j=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});y(j),p(!1)}catch(j){console.error("Error accessing camera:",j),p(!1)}},800);return()=>{clearTimeout(N)}},[]),ie.useEffect(()=>(w.current&&b&&(w.current.srcObject=b),()=>{b&&b.getTracks().forEach(T=>T.stop())}),[b]);const M=()=>{b&&(b.getAudioTracks().forEach(T=>{T.enabled=!T.enabled}),s(!n))},k=()=>{b&&(b.getVideoTracks().forEach(T=>{T.enabled=!T.enabled}),u(!a))};return h?l.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center bg-slate-950/40 animate-pulse",children:[l.jsx("div",{className:"w-24 h-24 bg-orange-500/20 rounded-[2.5rem] flex items-center justify-center text-orange-400 mb-6 border border-orange-500/30",children:l.jsx(hT,{size:40,className:"animate-bounce"})}),l.jsx("h3",{className:"text-2xl font-black text-white italic tracking-tighter",children:"Ansluter till kameran..."}),l.jsx("p",{className:"text-slate-500 text-sm mt-2 uppercase tracking-widest font-bold",children:"Skrar anslutning"})]}):l.jsxs("div",{className:"flex-grow flex flex-col relative overflow-hidden bg-slate-950/20 h-full",children:[l.jsx("div",{className:"flex-grow relative p-4 md:p-8 flex items-center justify-center min-h-0",children:l.jsxs("div",{className:"relative w-full h-full max-w-5xl rounded-2xl md:rounded-[3rem] overflow-hidden shadow-[0_30px_100px_rgba(0,0,0,0.6)] border border-white/10 group bg-slate-900",children:[l.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-orange-500/10 rounded-full blur-[120px] pointer-events-none group-hover:bg-orange-500/20 transition-colors duration-1000"}),l.jsx("video",{ref:w,autoPlay:!0,playsInline:!0,muted:n,className:`w-full h-full object-cover transition-all duration-700 ${a?"opacity-0 scale-110 grayscale":"opacity-100 scale-100 grayscale-0"}`}),a&&l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-slate-900/80 backdrop-blur-3xl animate-in fade-in duration-500",children:[l.jsx("div",{className:"w-20 h-20 md:w-32 md:h-32 bg-slate-800 rounded-full flex items-center justify-center text-slate-600 mb-4 border border-white/5 shadow-2xl",children:l.jsx(OM,{size:32,className:"md:w-12 md:h-12"})}),l.jsx("p",{className:"text-white font-black italic text-lg md:text-xl",children:"Kameran r avstngd"})]}),l.jsxs("div",{className:"absolute bottom-4 left-4 md:bottom-10 md:left-10 flex items-center gap-2 md:gap-3 px-4 py-2 md:px-6 md:py-3 bg-slate-950/60 backdrop-blur-xl border border-white/10 rounded-xl md:rounded-2xl shadow-2xl",children:[l.jsx("div",{className:"w-2 h-2 md:w-2.5 md:h-2.5 bg-green-500 rounded-full animate-pulse"}),l.jsx("span",{className:"text-[10px] md:text-sm font-black text-white uppercase tracking-widest whitespace-nowrap",children:"Du (Vrd)"})]}),l.jsx("div",{className:"absolute top-4 right-4 md:top-10 md:right-10 opacity-40 group-hover:opacity-100 transition-opacity",children:l.jsx("img",{src:"/assets/logo2.png",alt:"Horizonten",className:"w-8 h-8 md:w-12 md:h-12 object-contain grayscale brightness-200"})})]})}),l.jsxs("div",{className:"hidden",children:[[1,2].map(T=>l.jsxs("div",{className:"w-20 h-24 md:w-24 md:h-32 shrink-0 rounded-2xl md:rounded-3xl bg-slate-900/80 border border-white/10 overflow-hidden shadow-2xl hover:scale-105 transition-all cursor-pointer group relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx(ws,{size:20,className:"text-slate-700 md:w-6 md:h-6 group-hover:text-orange-500/50 transition-colors"})}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-950/80 to-transparent"}),l.jsx("div",{className:"absolute bottom-2 inset-x-0 text-center",children:l.jsx("span",{className:"text-[8px] font-black text-white/60 uppercase tracking-tighter",children:"Vntar..."})})]},T)),l.jsxs("div",{className:"w-20 h-24 md:w-24 md:h-32 shrink-0 rounded-2xl md:rounded-3xl border-2 border-dashed border-white/10 flex flex-col items-center justify-center text-slate-600 hover:border-orange-500/50 hover:text-orange-500 transition-all cursor-pointer bg-white/5",children:[l.jsx(ua,{size:16,className:"md:w-5 md:h-5 mb-1"}),l.jsx("span",{className:"text-[8px] font-black uppercase",children:"Bjud in"})]})]}),l.jsx("div",{className:"px-4 pb-4 md:px-12 md:pb-12 pt-2 relative z-10 shrink-0",children:l.jsxs("div",{className:"max-w-4xl mx-auto bg-slate-900/60 backdrop-blur-3xl border border-white/10 rounded-2xl md:rounded-[2.5rem] p-2 md:p-4 flex items-center justify-between shadow-[0_20px_50px_rgba(0,0,0,0.5)]",children:[l.jsxs("div",{className:"hidden sm:flex items-center gap-4 px-2 md:px-6",children:[l.jsx("div",{className:"p-2 md:p-3 bg-orange-500/10 rounded-xl md:rounded-2xl text-orange-500",children:l.jsx(LM,{size:18,className:"md:w-5 md:h-5"})}),l.jsxs("div",{className:"hidden md:block",children:[l.jsxs("h4",{className:"text-[10px] md:text-xs font-black text-white uppercase tracking-widest leading-none mb-1",children:["Live: ",i]}),l.jsx("p",{className:"text-[8px] md:text-[10px] text-slate-500 font-bold uppercase tracking-tight",children:"HD  Krypterat"})]})]}),l.jsxs("div",{className:"flex flex-1 md:flex-initial justify-center items-center gap-2 md:gap-4 px-2",children:[l.jsx("button",{onClick:M,className:`w-10 h-10 md:w-14 md:h-14 rounded-xl md:rounded-2xl flex items-center justify-center transition-all ${n?"bg-red-500 text-white":"bg-white/5 text-slate-400 border border-white/10"}`,children:n?l.jsx(IC,{size:18,className:"md:w-6 md:h-6"}):l.jsx(OC,{size:18,className:"md:w-6 md:h-6"})}),l.jsx("button",{onClick:k,className:`w-10 h-10 md:w-14 md:h-14 rounded-xl md:rounded-2xl flex items-center justify-center transition-all ${a?"bg-red-500 text-white":"bg-white/5 text-slate-400 border border-white/10"}`,children:a?l.jsx(OM,{size:18,className:"md:w-6 md:h-6"}):l.jsx(LM,{size:18,className:"md:w-6 md:h-6"})}),l.jsx("button",{className:"hidden sm:flex w-10 h-10 md:w-14 md:h-14 rounded-xl md:rounded-2xl bg-white/5 text-slate-400 border border-white/10 items-center justify-center transition-all",children:l.jsx(DC,{size:18,className:"md:w-6 md:h-6"})}),l.jsx("div",{className:"w-[1px] h-6 md:h-8 bg-white/10 mx-1 md:mx-2 uppercase text-white"}),l.jsx("button",{onClick:()=>v(!m),className:`w-10 h-10 md:w-14 md:h-14 rounded-xl md:rounded-2xl flex items-center justify-center transition-all border ${m?"bg-white text-slate-900 border-white shadow-[0_0_20px_rgba(255,255,255,0.3)]":"bg-white/5 text-slate-400 border-white/10"}`,children:l.jsx(Aw,{size:18,className:"md:w-5 md:h-5"})}),l.jsxs("button",{onClick:t,className:"px-4 md:px-8 h-10 md:h-14 bg-red-600 hover:bg-red-500 text-white rounded-xl md:rounded-2xl font-black uppercase tracking-widest text-[10px] md:text-xs flex items-center gap-2 md:gap-3 transition-all shadow-[0_10px_30px_rgba(220,38,38,0.3)] active:scale-95",children:[l.jsx(UC,{size:16,className:"md:w-5 md:h-5"}),l.jsx("span",{className:"hidden xs:inline",children:"Avsluta"}),l.jsx("span",{className:"xs:hidden",children:"Lmna"})]})]}),l.jsx("div",{className:"hidden sm:flex items-center gap-4 px-2 md:px-6"})]})}),l.jsx("div",{className:`absolute top-0 bottom-20 md:bottom-28 right-0 w-full sm:w-96 bg-slate-900/95 backdrop-blur-xl border-l border-white/10 z-20 transition-transform duration-300 ease-in-out ${m?"translate-x-0":"translate-x-full"}`,children:l.jsxs("div",{className:"h-full flex flex-col relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 inset-x-0 h-20 bg-gradient-to-b from-slate-900 to-transparent z-10 pointer-events-none"}),l.jsx(LS,{user:e,threadId:`video-${i}`,showHeader:!1})]})})]})},g3="horizonten_notifications";let Gv=[];const Hy=()=>{const i=localStorage.getItem(g3);if(!i)return[];try{return JSON.parse(i)}catch(e){return console.error("Error parsing notifications:",e),[]}},US=i=>{localStorage.setItem(g3,JSON.stringify(i)),Gv.forEach(e=>e(i))},x3=i=>{const e=Hy(),t={...i,id:Math.random().toString(36).substr(2,9),timestamp:Date.now(),read:!1};US([t,...e].slice(0,50))},o8=i=>{const e=Hy(),t=Date.now(),n=120*1e3,s=e.findIndex(a=>a.groupId===i.groupId&&t-a.timestamp<n);if(s!==-1){const a=e[s],u=a.title.match(/(\d+) till/),h=u?parseInt(u[1])+1:2,p={...a,title:`${i.senderName} och ${h-1} till har skrivit`,content:i.content,timestamp:t,read:!1},m=[...e];m[s]=p,m.splice(s,1),US([p,...m].slice(0,50))}else x3({title:i.title,content:i.content,icon:i.icon,color:i.color,time:"Just nu",groupId:i.groupId})},v3=()=>{US([])},b3=i=>(Gv.push(i),()=>{Gv=Gv.filter(e=>e!==i)}),oT=Object.freeze(Object.defineProperty({__proto__:null,addGroupedNotification:o8,addNotification:x3,clearNotifications:v3,getNotifications:Hy,subscribeToNotifications:b3},Symbol.toStringTag,{value:"Module"})),Pv=[{id:"general",name:"Gemenskapen",icon:l.jsx(kC,{size:18}),description:"Det ppna rummet fr alla medlemmar.",category:"public"},{id:"self-care",name:"Self-care tips",icon:l.jsx(Ha,{size:18}),description:"Dela med dig av dina bsta tips fr sjlvvrd.",category:"public"},{id:"video",name:"Videorummet",icon:l.jsx(hT,{size:18}),description:"Anslut med kamera och rst i realtid.",category:"public",hasVideo:!0},{id:"trygghet",name:"Trygga rummet",icon:l.jsx(la,{size:18}),description:"En skyddad plats fr svrare samtal.",category:"private"},{id:"info",name:"Information",icon:l.jsx(Xg,{size:18}),description:"Viktiga meddelanden frn administratrer.",category:"support"}],l8=({user:i,initialThread:e,onOpenSettings:t,onLogout:n,onBackToSite:s})=>{const[a,u]=ie.useState(e||"general"),[h,p]=ie.useState("discussions"),[m,v]=ie.useState(!0),[b,y]=ie.useState(!1),[w,M]=ie.useState(Hy()),[k,T]=ie.useState([]),[N,j]=ie.useState(!1);ie.useEffect(()=>{const I=b3(P=>{M(P)});return()=>I()},[]),ie.useEffect(()=>{const I=Rn.channel("global_presence");return I.on("presence",{event:"sync"},()=>{const P=I.presenceState(),z=Object.values(P).flat(),G=Array.from(new Map(z.map(U=>[U.user_id,U])).values());T(G)}).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},P=>{}).subscribe(async P=>{P==="SUBSCRIBED"&&await I.track({user_id:i.id,full_name:i.full_name,avatar_url:i.avatar_url,role:i.role,online_at:new Date().toISOString()})}),()=>{Rn.removeChannel(I)}},[i.id,i.full_name,i.avatar_url,i.role,i.notifications_enabled]);const R=I=>!i.membership_level||i.membership_level<=2?!["general","video"].includes(I):!1,D=Pv.find(I=>I.id===a)||Pv[0];return l.jsxs("div",{className:"flex h-full bg-slate-950/80 backdrop-blur-3xl animate-in fade-in zoom-in-95 duration-700",children:[l.jsxs("div",{className:"hidden md:flex w-24 bg-slate-900/80 border-r border-white/5 flex-col items-center py-10 justify-between shrink-0 h-full",children:[l.jsxs("div",{className:"flex flex-col items-center gap-10 w-full",children:[l.jsxs("div",{className:"relative group cursor-pointer mb-4 overflow-hidden rounded-2.5rem p-0.5 bg-gradient-to-tr from-white/10 to-transparent",children:[l.jsx("div",{className:`w-14 h-14 rounded-2.5rem flex items-center justify-center text-xl font-black text-white shadow-2xl group-hover:scale-105 transition-transform duration-500 overflow-hidden ${i.email==="billy.ljungberg90@gmail.com"?"bg-slate-950 p-2":"bg-gradient-to-br from-orange-400 to-red-600"}`,children:i.email==="billy.ljungberg90@gmail.com"?l.jsx("img",{src:"/assets/logo2.png",alt:"Admin",className:"w-full h-full object-contain"}):i.avatar_url?l.jsx("img",{src:i.avatar_url,alt:i.full_name,className:"w-full h-full object-cover"}):i.full_name.charAt(0)}),l.jsx("div",{className:"absolute bottom-1 right-1 w-4 h-4 bg-green-500 border-4 border-slate-900 rounded-full shadow-lg z-10"}),l.jsx("div",{className:"absolute inset-0 bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"})]}),l.jsx("div",{className:"flex flex-col gap-6 w-full px-4",children:[{id:"discussions",icon:l.jsx(Xv,{size:26}),label:"Chatt"},{id:"members",icon:l.jsx(ws,{size:26}),label:"Medlemmar"},{id:"notifications",icon:l.jsx(ng,{size:26}),label:"Notiser",badge:w.length>0}].map(I=>l.jsxs("button",{onClick:()=>p(I.id),className:`
                                    relative p-4 rounded-3xl transition-all duration-500 flex items-center justify-center group
                                    ${h===I.id?"bg-orange-500 text-slate-950 shadow-[0_10px_30px_rgba(249,115,22,0.3)] scale-110":"text-slate-500 hover:text-white hover:bg-white/5"}
                                `,children:[I.icon,I.badge&&h!==I.id&&l.jsx("div",{className:"absolute top-3 right-3 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-slate-950 group-hover:scale-125 transition-transform"}),l.jsx("span",{className:"absolute left-full ml-4 px-3 py-1 bg-white text-slate-950 text-[10px] font-black uppercase rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none shadow-xl",children:I.label})]},I.id))})]}),l.jsx("div",{className:"flex flex-col items-center gap-6 w-full px-4",children:l.jsxs("button",{onClick:()=>v(!m),className:"p-4 rounded-3xl text-slate-500 hover:text-orange-400 hover:bg-orange-500/10 transition-all duration-300 group relative",children:[m?l.jsx(G1,{size:24}):l.jsx($v,{size:24}),l.jsx("span",{className:"absolute left-full ml-4 px-3 py-1 bg-white text-slate-950 text-[10px] font-black uppercase rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none shadow-xl",children:m?"Ljust lge":"Mrkt lge"})]})})]}),l.jsxs("div",{className:"hidden lg:flex w-80 bg-slate-900/40 border-r border-white/5 flex-col shrink-0 h-full",children:[h==="discussions"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"p-8 pb-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-8",children:[l.jsx("h2",{className:"text-3xl font-black text-white tracking-tighter",children:"Diskussioner"}),l.jsx("button",{onClick:()=>y(!0),className:"w-12 h-12 bg-orange-500 hover:bg-orange-400 text-slate-950 rounded-2xl flex items-center justify-center transition-all shadow-[0_10px_20px_rgba(249,115,22,0.2)] active:scale-95 group",children:l.jsx(H1,{size:24,className:"group-hover:rotate-90 transition-transform duration-500"})})]}),l.jsxs("div",{className:"relative group",children:[l.jsx(IM,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-600 group-focus-within:text-orange-500 transition-colors",size:18}),l.jsx("input",{type:"text",placeholder:"Sk i gemenskapen...",className:"w-full bg-slate-950/40 border border-white/10 rounded-[1.25rem] py-4 pl-12 pr-4 text-sm text-white placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500/40 transition-all font-medium"})]})]}),l.jsxs("div",{className:"flex-grow overflow-y-auto px-2 pb-8 space-y-8 no-scrollbar scroll-smooth",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"px-4 flex items-center justify-between",children:[l.jsx("span",{className:"text-[11px] font-black uppercase tracking-[0.25em] text-slate-500",children:"Offentliga Rum"}),l.jsx("div",{className:"h-[1px] flex-grow ml-4 bg-gradient-to-r from-white/10 to-transparent"})]}),l.jsx("div",{className:"space-y-1",children:Pv.filter(I=>I.category==="public").map(I=>{const P=R(I.id);return l.jsxs("button",{onClick:()=>!P&&u(I.id),disabled:P,className:`w-[calc(100%-1rem)] mx-2 flex items-center gap-4 px-4 py-5 rounded-[2rem] transition-all duration-500 group relative 
                                                ${a===I.id?"bg-white/10 shadow-2xl border border-white/5":P?"opacity-50 cursor-not-allowed":"text-slate-500 hover:bg-white/5 hover:text-white"}
                                            `,children:[l.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center transition-all duration-500 
                                                ${a===I.id?"bg-orange-500 text-slate-950 shadow-xl scale-110":P?"bg-slate-800/20 text-slate-600":"bg-slate-800/50 border border-white/5"}
                                            `,children:P?l.jsx(qd,{size:18}):I.icon}),l.jsxs("div",{className:"flex-grow text-left",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:`font-bold transition-colors ${a===I.id?"text-white":P?"text-slate-600":"group-hover:text-orange-400"}`,children:I.name}),!P&&l.jsx("span",{className:"text-[10px] font-medium opacity-40",children:"12:45"})]}),l.jsx("p",{className:"text-[11px] opacity-60 line-clamp-1 font-medium leading-relaxed",children:I.description})]}),a===I.id&&l.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1.5 h-8 bg-orange-500 rounded-r-full shadow-[0_0_15px_rgba(249,115,22,1)]"}),I.hasVideo&&!P&&l.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-1.5 px-3 py-1 bg-green-500/10 border border-green-500/20 rounded-full animate-pulse",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),l.jsx("span",{className:"text-[8px] font-black text-green-500 uppercase tracking-widest",children:"Live"})]})]},I.id)})})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"px-4 flex items-center justify-between",children:[l.jsx("span",{className:"text-[11px] font-black uppercase tracking-[0.25em] text-slate-500",children:"Privata Grupper"}),l.jsx("div",{className:"h-[1px] flex-grow ml-4 bg-gradient-to-r from-white/10 to-transparent"})]}),l.jsx("div",{className:"space-y-1",children:Pv.filter(I=>I.category==="private"||I.category==="support").map(I=>{const P=R(I.id);return l.jsxs("button",{onClick:()=>!P&&u(I.id),disabled:P,className:`w-[calc(100%-1rem)] mx-2 flex items-center gap-4 px-4 py-5 rounded-[2rem] transition-all duration-500 group relative 
                                                    ${a===I.id?"bg-white/10 shadow-2xl border border-white/5":P?"opacity-50 cursor-not-allowed":"text-slate-500 hover:bg-white/5 hover:text-white"}
                                                `,children:[l.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center transition-all duration-500 
                                                    ${a===I.id?"bg-orange-500 text-slate-950 shadow-xl scale-110":P?"bg-slate-800/20 text-slate-600":"bg-slate-800/50 border border-white/5"}
                                                `,children:P?l.jsx(qd,{size:18}):I.icon}),l.jsxs("div",{className:"flex-grow text-left",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:`font-bold transition-colors ${a===I.id?"text-white":P?"text-slate-600":"group-hover:text-orange-400"}`,children:I.name}),!P&&l.jsx("span",{className:"text-[10px] font-medium opacity-40",children:"I gr"})]}),l.jsx("p",{className:"text-[11px] opacity-60 line-clamp-1 font-medium leading-relaxed",children:I.description})]}),a===I.id&&l.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1.5 h-8 bg-orange-500 rounded-r-full shadow-[0_0_15px_rgba(249,115,22,1)]"})]},I.id)})})]})]})]}),h==="members"&&l.jsxs("div",{className:"p-8 animate-in fade-in slide-in-from-left-4 duration-500 h-full flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between mb-8",children:[l.jsx("h2",{className:"text-3xl font-black text-white tracking-tighter",children:"Medlemmar"}),l.jsx("button",{className:"w-12 h-12 bg-white/5 hover:bg-white/10 text-white rounded-2xl flex items-center justify-center transition-all border border-white/10 active:scale-95",children:l.jsx(q1,{size:22})})]}),l.jsxs("div",{className:"space-y-2 overflow-y-auto no-scrollbar pb-8",children:[k.map(I=>l.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-[2rem] hover:bg-white/5 transition-all cursor-pointer group border border-transparent hover:border-white/5",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center text-xl bg-gradient-to-br from-indigo-500 to-purple-500 text-white shadow-xl transition-transform group-hover:scale-105 duration-500",children:I.avatar_url?l.jsx("img",{src:I.avatar_url,alt:I.full_name,className:"w-full h-full object-cover rounded-2xl"}):l.jsx("span",{className:"font-bold",children:I.full_name?.charAt(0)||"?"})}),l.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-4 border-slate-900 rounded-full shadow-lg"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-white group-hover:text-orange-400 transition-colors",children:I.full_name||"Anonym"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-[10px] text-zinc-500 font-black uppercase tracking-widest",children:I.role||"Medlem"}),l.jsx("span",{className:"w-1 h-1 bg-zinc-700 rounded-full"}),l.jsx("span",{className:"text-[10px] text-green-500/60 font-bold uppercase",children:"Online"})]})]})]},I.user_id)),k.length===0&&l.jsx("div",{className:"text-center py-10 text-slate-500 italic",children:"Laddar medlemmar..."})]}),l.jsx("div",{className:"mt-auto py-6 border-t border-white/5",children:l.jsxs("button",{onClick:()=>j(!0),className:"w-full py-4 bg-orange-500 text-slate-950 rounded-2xl font-black uppercase tracking-widest text-[10px] flex items-center justify-center gap-3 transition-all hover:shadow-[0_10px_30px_rgba(249,115,22,0.2)] active:scale-95",children:[l.jsx(q1,{size:16})," Bjud in vn"]})})]}),N&&l.jsx(r8,{onClose:()=>j(!1)}),h==="notifications"&&l.jsxs("div",{className:"p-8 animate-in fade-in slide-in-from-left-4 duration-500 h-full flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between mb-8",children:[l.jsx("h2",{className:"text-3xl font-black text-white tracking-tighter",children:"Notiser"}),l.jsx("button",{onClick:v3,className:"text-zinc-500 hover:text-white transition-colors text-[10px] font-black uppercase tracking-widest",children:"Rensa alla"})]}),l.jsx("div",{className:"space-y-4 overflow-y-auto no-scrollbar pb-10",children:w.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center space-y-4",children:[l.jsx("div",{className:"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center text-slate-700",children:l.jsx(ng,{size:32})}),l.jsx("p",{className:"text-slate-500 font-medium italic",children:"Inga nya notiser"})]}):w.map((I,P)=>l.jsxs("div",{className:"flex gap-4 p-5 rounded-[2rem] bg-white/5 border border-white/5 hover:border-white/10 transition-all cursor-pointer group",children:[l.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${I.color} text-white`,children:typeof I.icon=="string"&&I.icon.length<4?l.jsx("span",{className:"text-lg",children:I.icon}):l.jsx(ng,{size:14})}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("h4",{className:"font-bold text-white text-sm group-hover:text-orange-400 transition-colors",children:I.title}),l.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed",children:I.content}),l.jsx("p",{className:"text-[10px] text-zinc-600 font-bold uppercase pt-1",children:new Date(I.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},I.id))})]}),h==="settings"&&l.jsxs("div",{className:"p-8 animate-in fade-in slide-in-from-left-4 duration-500 h-full flex flex-col",children:[l.jsx("h2",{className:"text-3xl font-black text-white tracking-tighter mb-8",children:"Instllningar"}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"p-6 bg-white/5 border border-white/5 rounded-3xl space-y-4",children:[l.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-zinc-500 mb-2",children:"Profil"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-orange-400 to-red-600 flex items-center justify-center text-white font-bold",children:i.full_name.charAt(0)}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-white",children:i.full_name}),l.jsx("p",{className:"text-[10px] text-zinc-600",children:i.email})]})]}),l.jsx("button",{onClick:t,className:"w-full py-3 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-xs font-bold text-white transition-all",children:"Redigera profil"})]}),l.jsx("div",{className:"space-y-2",children:[{icon:l.jsx(ng,{size:18}),label:"Notifikationer"},{icon:l.jsx(la,{size:18}),label:"Privatliv"},{icon:l.jsx($v,{size:18}),label:"Utseende"},{icon:l.jsx(Ha,{size:18}),label:"Visa std"}].map((I,P)=>l.jsxs("button",{className:"w-full flex items-center justify-between p-4 rounded-2xl hover:bg-white/5 text-zinc-400 hover:text-white transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"opacity-50 group-hover:opacity-100 group-hover:text-orange-400 transition-all",children:I.icon}),l.jsx("span",{className:"font-bold text-sm tracking-tight",children:I.label})]}),l.jsx(Gd,{size:14,className:"opacity-0 group-hover:opacity-100 group-hover:translate-x-1 transition-all"})]},P))})]}),l.jsx("div",{className:"mt-auto pt-8 border-t border-white/5",children:l.jsxs("button",{onClick:n,className:"w-full flex items-center gap-3 p-4 text-red-500 hover:bg-red-500/10 rounded-2xl transition-all group",children:[l.jsx(zC,{size:20,className:"group-hover:rotate-12 transition-transform"}),l.jsx("span",{className:"font-black uppercase tracking-widest text-[10px]",children:"Logga ut"})]})})]})]}),l.jsxs("div",{className:"flex-1 flex flex-col bg-slate-950/20 min-w-0 max-w-full overflow-hidden",children:[l.jsxs("div",{className:"px-4 md:px-12 py-6 md:py-8 border-b border-white/5 flex items-center justify-between bg-slate-900/60 backdrop-blur-3xl relative z-20 shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-4 md:gap-8",children:[l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"w-20 h-20 bg-gradient-to-br from-slate-800 to-slate-900 rounded-[2.5rem] flex items-center justify-center text-orange-400 border border-white/10 shadow-2xl relative group cursor-pointer overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-orange-500/10 opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"scale-125 transition-transform duration-500 group-hover:scale-110",children:D.icon})]}),l.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-4 border-slate-950 shadow-lg"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[l.jsx("h3",{className:"text-3xl font-black text-white tracking-tighter decoration-orange-500/30 decoration-4",children:D.name}),l.jsx("div",{className:"px-3 py-1 bg-orange-500/10 border border-orange-500/20 rounded-full",children:l.jsx("span",{className:"text-[10px] font-black text-orange-500 uppercase tracking-widest",children:"Aktiv"})})]}),l.jsxs("div",{className:"flex items-center gap-2 md:gap-4 text-xs font-semibold text-slate-500",children:[l.jsxs("span",{className:"flex items-center gap-2 hover:text-white transition-colors cursor-pointer",children:[l.jsx(ws,{size:14,className:"text-orange-500"})," ",l.jsx("span",{className:"hidden sm:inline",children:"24 medlemmar online"}),l.jsx("span",{className:"sm:hidden",children:"24"})]}),l.jsx("span",{className:"w-1.5 h-1.5 bg-slate-800 rounded-full"}),l.jsxs("span",{className:"italic opacity-80 font-medium line-clamp-1 max-w-[150px] md:max-w-none",children:['"',D.description,'"']})]})]})]}),l.jsxs("div",{className:"flex items-center gap-10",children:[l.jsxs("div",{className:"hidden xl:flex -space-x-4 items-center",children:[Pa.slice(0,4).map(I=>l.jsxs("div",{className:`w-12 h-12 rounded-[1.25rem] border-4 border-slate-950 flex items-center justify-center text-lg ${I.color} text-white shadow-2xl hover:translate-y-[-6px] transition-all cursor-pointer relative group`,title:I.name,children:[I.avatar,l.jsx("div",{className:"absolute inset-0 bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity rounded-[1.25rem]"})]},I.id)),l.jsx("div",{className:"w-12 h-12 rounded-[1.25rem] border-4 border-slate-950 bg-slate-800 flex items-center justify-center text-xs font-black text-slate-400 shadow-2xl hover:bg-slate-700 transition-colors cursor-pointer",children:"+12"})]}),l.jsx("div",{className:"flex items-center gap-3",children:[{icon:l.jsx(IM,{size:22}),label:"Sk"},{icon:l.jsx(_g,{size:22}),label:"Favorit"},{icon:l.jsx(Xg,{size:22}),label:"Info"},{icon:l.jsx(EC,{size:22}),label:"Mer"}].map((I,P)=>l.jsx("button",{className:"p-4 bg-white/5 hover:bg-orange-500/10 hover:text-orange-400 border border-white/5 rounded-2xl transition-all shadow-xl group active:scale-95",title:I.label,children:I.icon},P))})]})]}),l.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col min-h-0",children:[D.hasVideo?l.jsx(a8,{roomId:D.name,user:i,onEndCall:()=>u("general")}):l.jsx(LS,{user:i,threadId:D.id,showHeader:!1}),!D.hasVideo&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute top-0 inset-x-0 h-8 bg-gradient-to-b from-slate-950/40 to-transparent pointer-events-none"}),l.jsx("div",{className:"absolute bottom-0 inset-x-0 h-8 bg-gradient-to-t from-slate-950/40 to-transparent pointer-events-none"})]})]})]}),b&&l.jsx(s8,{onClose:()=>y(!1)})]})},c8=()=>l.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12 space-y-16 animate-in fade-in slide-in-from-bottom-8 duration-1000",children:[l.jsxs("div",{className:"text-center space-y-6",children:[l.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-orange-500/10 rounded-full border border-orange-500/20 mb-4",children:l.jsx(Ha,{className:"text-orange-500 animate-pulse",size:32})}),l.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white tracking-tighter leading-tight",children:["Vlkommen hem till ",l.jsx("br",{}),l.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-orange-400 via-amber-200 to-white",children:"Horizonten Gemenskap"})]}),l.jsx("p",{className:"text-xl md:text-2xl text-slate-300 font-medium italic",children:"Vad fint att du hittat hit."})]}),l.jsxs("div",{className:"glass bg-slate-900/50 backdrop-blur-2xl border border-white/10 rounded-[2.5rem] p-8 md:p-12 shadow-2xl relative overflow-hidden group",children:[l.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-orange-500/5 rounded-full blur-[80px] -mr-32 -mt-32 group-hover:bg-orange-500/10 transition-colors duration-700"}),l.jsxs("div",{className:"relative z-10 space-y-8 text-slate-300 leading-relaxed text-lg font-light",children:[l.jsxs("p",{children:["Du har just klivit in i ett digitalt rum som r byggt med en enda avsikt: ",l.jsx("span",{className:"text-white font-semibold",children:"Att minska avstndet mellan mnniskor"}),". Vi vet, utifrn bde erfarenhet och neurobiologi, att ensamhet r farligt fr oss, medan kontakt r frutsttningen fr all lkning och utveckling."]}),l.jsxs("p",{children:["Horizonten Gemenskap r hjrtat i samarbetet mellan ",l.jsx("span",{className:"text-orange-400 font-bold",children:"Klttertrdet, Socialkraft och Twisted-stacks"}),". Vi har gtt samman fr att vi delar en vision: Psykisk hlsa och mnskligt std ska vara tillgngligt fr alla. Det ska inte vara krngligt, det ska inte kosta en frmgenhet, och du ska inte behva vnta i en telefonk fr att knna att ngon lyssnar."]})]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[l.jsx(ws,{className:"text-orange-500",size:28}),"Vad r det hr fr plats?"]}),l.jsx("p",{className:"text-slate-400 leading-relaxed",children:"Det hr r din digitala flock. Hr mts vi  oavsett om du r hr fr att du kmpar med myndighetsstress, bearbetar trauma, r nyfiken p din egen utveckling eller arbetar professionellt med mnniskor."}),l.jsxs("p",{className:"text-slate-400 leading-relaxed",children:["Hr var vi p ",l.jsx("span",{className:"text-white font-medium",children:"Self-care tillsammans"}),". Inte som ett prestationskrav, utan som ett stt att vara snlla mot vra nervsystem."]})]}),l.jsxs("div",{className:"bg-gradient-to-br from-orange-500/20 to-transparent p-8 rounded-[2rem] border border-orange-500/20",children:[l.jsx("h3",{className:"text-orange-400 font-black uppercase tracking-widest text-xs mb-6",children:"Tre pelare"}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex gap-4",children:[l.jsx("div",{className:"shrink-0 w-10 h-10 bg-white/5 rounded-xl flex items-center justify-center text-white font-bold",children:"1"}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-white font-bold mb-1 text-sm",children:"Tillgnglighet"}),l.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:"Stdet finns i fickan. Dygnet runt. Du behver inte prestera hr, du kan bara vara."})]})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("div",{className:"shrink-0 w-10 h-10 bg-white/5 rounded-xl flex items-center justify-center text-white font-bold",children:"2"}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-white font-bold mb-1 text-sm",children:"Gratis std"}),l.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:"Vi tror p kraften i att dela erfarenheter. I de ppna forumen hjlps vi t, stttar och speglar varandra."})]})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("div",{className:"shrink-0 w-10 h-10 bg-white/5 rounded-xl flex items-center justify-center text-white font-bold",children:"3"}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-white font-bold mb-1 text-sm",children:"Kontakt"}),l.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:'Lkning sker "bottom up"  frn kroppen, via knslan och in i relationen. Hr fr du utrymme att dela din berttelse.'})]})]})]})]})]}),l.jsxs("div",{className:"glass bg-white/5 border border-white/10 p-10 rounded-[3rem] text-center space-y-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-white",children:"Till dig som r ny"}),l.jsxs("p",{className:"text-slate-400 max-w-2xl mx-auto leading-relaxed",children:['Knn in rummet. Du behver inte skriva ngot direkt om du inte vill. Det r okej att bara "vara med" och observera. Det kallas att ',l.jsx("span",{className:"text-orange-400",children:"samreglera"}),", och det r frsta steget till trygghet."]}),l.jsx("p",{className:"text-slate-400 max-w-2xl mx-auto leading-relaxed",children:"Nr du knner dig redo  skriv grna en rad i presentationstrden. Vi vill grna veta vem du r, men p dina villkor."}),l.jsx("div",{className:"pt-6",children:l.jsx("p",{className:"text-xl font-bold text-white italic",children:"Varmt vlkommen"})})]}),l.jsx("div",{className:"h-20"})]}),zv=({onBackToSite:i,onSettingsClick:e})=>l.jsx("footer",{className:"border-t border-white/10 bg-black/40 backdrop-blur-xl py-8 mt-auto",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center justify-between gap-4 text-xs text-slate-500 uppercase tracking-wider font-medium",children:[l.jsx("div",{children:" Horizonten gemenskap"}),l.jsxs("div",{className:"flex flex-wrap justify-center gap-6",children:[l.jsx("button",{onClick:e,className:"hover:text-orange-400 transition-colors",children:"Kontoinstllningar"}),l.jsx("button",{onClick:()=>i(Se.TERMS),className:"hover:text-orange-400 transition-colors",children:"Medlemsvillkor"}),l.jsx("button",{onClick:()=>i(Se.PRIVACY),className:"hover:text-orange-400 transition-colors",children:"Integritets- & Sekretesspolicy"}),l.jsx("button",{onClick:()=>i(Se.COOKIE_POLICY),className:"hover:text-orange-400 transition-colors",children:"Cookie-instllningar"}),l.jsx("button",{onClick:()=>i(Se.CONTACT),className:"hover:text-orange-400 transition-colors",children:"Kontakt"})]})]})}),u8=({user:i,onBack:e})=>{const[t,n]=ie.useState("overview");return i.role!=="admin"?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx(la,{className:"w-16 h-16 text-red-500 mx-auto animate-pulse"}),l.jsx("h2",{className:"text-2xl font-bold text-white",children:"tkomst nekad"}),l.jsx("p",{className:"text-slate-400",children:"Du har inte behrighet att se denna sida."}),l.jsx("button",{onClick:e,className:"px-6 py-2 bg-orange-500 rounded-xl font-bold text-slate-950",children:"G tillbaka"})]})}):l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8 animate-in fade-in duration-700",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 bg-slate-900/40 backdrop-blur-xl border border-white/5 p-8 rounded-[2.5rem] shadow-2xl relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-orange-500/10 rounded-full blur-3xl -mr-32 -mt-32"}),l.jsxs("div",{className:"relative z-10 flex items-center gap-6",children:[l.jsx("div",{className:"w-16 h-16 bg-orange-500 rounded-2xl flex items-center justify-center shadow-lg shadow-orange-500/20",children:l.jsx(la,{size:32,className:"text-slate-950"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-black text-white tracking-tight",children:"Admin Dashboard"}),l.jsxs("p",{className:"text-orange-500 font-bold tracking-widest uppercase text-xs flex items-center gap-2 mt-1",children:[l.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full animate-ping"})," Sker anslutning upprttad"]})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{onClick:()=>n("blog"),className:"px-5 py-2.5 bg-white/5 hover:bg-white/10 rounded-xl text-slate-300 font-bold transition-all border border-white/10 flex items-center gap-2",children:[l.jsx(vT,{size:18})," Blogg"]}),l.jsxs("button",{onClick:()=>n("threads"),className:"px-5 py-2.5 bg-white/5 hover:bg-white/10 rounded-xl text-slate-300 font-bold transition-all border border-white/10 flex items-center gap-2",children:[l.jsx(H1,{size:18})," Ny trd"]})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{label:"Aktiva medlemmar",value:"142",icon:ws,color:"text-blue-400"},{label:"Nya trdar (7 dagar)",value:"12",icon:Aw,color:"text-orange-400"},{label:"Olsta rapporter",value:"3",icon:la,color:"text-red-400"},{label:"Blogginlgg",value:"28",icon:V1,color:"text-green-400"}].map((s,a)=>l.jsxs("div",{className:"bg-slate-900/40 backdrop-blur-xl border border-white/5 p-6 rounded-3xl hover:border-white/10 transition-all cursor-pointer group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:`p-2 rounded-lg bg-white/5 ${s.color} group-hover:scale-110 transition-transform`,children:l.jsx(s.icon,{size:20})}),l.jsx("span",{className:"text-2xl font-black text-white",children:s.value})]}),l.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:s.label})]},a))}),l.jsxs("div",{className:"bg-slate-900/40 backdrop-blur-xl border border-white/5 rounded-[2.5rem] p-8",children:[t==="overview"&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Senaste aktivitet"}),l.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map((s,a)=>l.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/5 hover:bg-white/10 transition-all cursor-pointer",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center font-bold text-slate-400",children:String.fromCharCode(65+a)}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm font-bold text-white",children:["Anvndare ",a+1," skrev i #allmnt"]}),l.jsx("p",{className:"text-xs text-slate-500",children:"2 minuter sedan"})]})]}),l.jsx("button",{className:"p-2 hover:bg-white/10 rounded-lg text-slate-400 transition-colors",children:l.jsx(bT,{size:16})})]},a))})]}),t!=="overview"&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center space-y-6",children:[l.jsx("div",{className:"w-20 h-20 bg-orange-500/10 rounded-3xl flex items-center justify-center animate-pulse",children:l.jsx(H1,{size:40,className:"text-orange-500"})}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h3",{className:"text-2xl font-bold text-white",children:["Hantering av ",t]}),l.jsxs("p",{className:"text-slate-400 max-w-md mx-auto",children:["Hr kommer du kunna skapa, redigera och ta bort ",t==="blog"?"blogginlgg":t==="threads"?"trdar":"innehll",". Denna funktion byggs ut i nsta steg."]})]}),l.jsxs("button",{onClick:()=>n("overview"),className:"px-8 py-3 bg-white/5 hover:bg-white/10 border border-white/10 rounded-2xl text-white font-bold transition-all flex items-center gap-2",children:[l.jsx(So,{size:18})," Tillbaka till verblick"]})]})]})]})},d8=({user:i,onClose:e,onUpdate:t})=>{const[n,s]=ie.useState(i.full_name||""),[a,u]=ie.useState(i.notifications_enabled??!0),[h,p]=ie.useState(!1),[m,v]=ie.useState(null),b=async w=>{if(u(w),w&&Notification.permission!=="granted")try{await Notification.requestPermission()!=="granted"&&v("Notiser avvisades av anvndaren.")}catch{v("Kunde inte begra notistillstnd.")}},y=async()=>{p(!0),v(null);try{const{error:w}=await Rn.auth.updateUser({data:{full_name:n,notifications_enabled:a}});if(w)throw w;const{error:M}=await Rn.from("profiles").update({full_name:n,notifications_enabled:a}).eq("id",i.id);if(M)throw M;const k={...i,full_name:n,notifications_enabled:a};t(k),e()}catch(w){v(w.message??"Ett fel intrffade vid sparning.")}finally{p(!1)}};return l.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[l.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-xl",onClick:e}),l.jsxs("div",{className:"relative bg-white/10 backdrop-blur-2xl border border-white/20 rounded-2xl p-6 w-full max-w-md shadow-xl",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-xl font-semibold text-white",children:"Instllningar"}),l.jsx("button",{onClick:e,className:"text-white hover:text-gray-300",children:l.jsx(Mu,{size:20})})]}),m&&l.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-200 p-2 rounded mb-4",children:m}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-1",children:"Visningsnamn"}),l.jsx("input",{type:"text",value:n,onChange:w=>s(w.target.value),className:"w-full bg-white/5 border border-white/20 rounded px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500/50"})]}),l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("span",{className:"text-sm font-medium text-gray-200",children:"Notiser p"}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:a,onChange:w=>b(w.target.checked),className:"sr-only peer"}),l.jsx("div",{className:"w-11 h-6 bg-white/20 border border-white/30 rounded-full peer peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-orange-500 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-500/80 peer-checked:border-orange-500 peer-checked:after:bg-white"})]})]}),l.jsx("button",{onClick:y,disabled:h,className:"w-full bg-orange-500 hover:bg-orange-400 text-white font-bold py-2 rounded disabled:opacity-50",children:h?"Sparar...":"Spara"})]})]})},h8=()=>{const[i,e]=ie.useState(null),[t,n]=ie.useState(!1);ie.useEffect(()=>{const a=h=>{h.preventDefault(),e(h),n(!0)},u=()=>{n(!1),e(null)};return window.addEventListener("beforeinstallprompt",a),window.addEventListener("appinstalled",u),window.matchMedia("(display-mode: standalone)").matches&&n(!1),()=>{window.removeEventListener("beforeinstallprompt",a),window.removeEventListener("appinstalled",u)}},[]);const s=async()=>{if(!i)return;i.prompt();const{outcome:a}=await i.userChoice;a==="accepted"?(console.log("User accepted the install prompt"),e(null),n(!1)):console.log("User dismissed the install prompt")};return t?l.jsx("button",{onClick:s,className:"fixed bottom-6 right-6 z-50 group animate-in fade-in slide-in-from-bottom-5 duration-700",children:l.jsxs("div",{className:"relative overflow-hidden bg-white/10 backdrop-blur-xl border border-white/20 shadow-[0_8px_32px_rgba(31,38,135,0.37)] rounded-2xl p-4 transition-all duration-300 group-hover:bg-white/15 group-hover:scale-105 group-hover:shadow-[0_8px_32px_rgba(249,115,22,0.2)]",children:[l.jsx("div",{className:"absolute top-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-white/50 to-transparent opacity-50"}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-orange-500/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-gradient-to-br from-orange-400 to-red-500 rounded-lg p-2 shadow-inner text-white",children:l.jsx(kw,{size:20,className:"drop-shadow-sm"})}),l.jsxs("div",{className:"text-left",children:[l.jsx("span",{className:"block text-[10px] font-bold text-white/60 uppercase tracking-widest",children:"Community"}),l.jsx("span",{className:"block text-sm font-bold text-white leading-none group-hover:text-orange-200 transition-colors",children:"Installera App"})]})]}),l.jsx("div",{className:"absolute -top-10 -right-10 w-20 h-20 bg-orange-500/20 rounded-full blur-2xl group-hover:bg-orange-500/30 transition-all duration-500"})]})}):null},f8=({onBackToSite:i})=>{const[e,t]=ie.useState(du.IDLE),[n,s]=ie.useState(null),[a,u]=ie.useState("welcome"),[h,p]=ie.useState(null),[m,v]=ie.useState(!1),[b,y]=ie.useState(!1),[w,M]=ie.useState(!1),[k,T]=ie.useState(!1),[N,j]=ie.useState("login"),[R,D]=ie.useState(!1),[I,P]=ie.useState([]);ie.useEffect(()=>{const ne=()=>{const X=window.location.hash;if(X==="#login")y(!0),M(!1),T(!1),j("login");else if(X==="#premium-login")M(!0),y(!1),T(!0),j("login");else if(X==="#signup")y(!0),M(!1),T(!1),j("signup");else if(X.includes("#chat")){y(!1),M(!1),u("chat");const q=new URLSearchParams(X.split("?")[1]).get("topic");q&&p(q)}else X.includes("#welcome")?(y(!1),M(!1),u("welcome")):X.includes("#experts")?(y(!1),M(!1),u("experts")):X.includes("#dashboard")?(y(!1),M(!1),u("dashboard")):(y(!1),M(!1));const Z=X.split("?")[0].replace("#","")||"welcome",re=X.includes("?")?new URLSearchParams(X.split("?")[1]):null,pe=re?re.get("topic"):null;P(we=>{const q=we[we.length-1];return q&&q.tab===Z&&q.topic===pe?we:[...we,{tab:Z,topic:pe}]})};return ne(),window.addEventListener("hashchange",ne),()=>window.removeEventListener("hashchange",ne)},[]),ie.useEffect(()=>{Bm(()=>Promise.resolve().then(()=>aT),void 0).then(re=>{re.requestNotificationPermission(),re.registerServiceWorker()});const ne=Rn.channel("global_messages_notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},async re=>{const pe=re.new;if(n&&pe.user_id!==n.id&&n.notifications_enabled!==!1){const{sendNotification:we}=await Bm(async()=>{const{sendNotification:Fe}=await Promise.resolve().then(()=>aT);return{sendNotification:Fe}},void 0),{addNotification:q}=await Bm(async()=>{const{addNotification:Fe}=await Promise.resolve().then(()=>oT);return{addNotification:Fe}},void 0),{PERSONAS:ce}=await Bm(async()=>{const{PERSONAS:Fe}=await Promise.resolve().then(()=>QB);return{PERSONAS:Fe}},void 0);let Ee="Ngon",Pe="",rt="bg-blue-500";if(pe.is_ai){const Fe=ce.find(nt=>nt.id===pe.persona_id);Ee=Fe?Fe.name:"AI",Pe=Fe?Fe.avatar:"",rt=Fe?Fe.color:"bg-slate-800"}else{const{data:Fe}=await Rn.from("profiles").select("full_name").eq("id",pe.user_id).single();Fe&&(Ee=Fe.full_name)}const me=pe.content.split(" ").slice(0,3).join(" ")+(pe.content.split(" ").length>3?"...":"");we(`Nytt frn ${Ee}`,me);const{addGroupedNotification:Ce}=await Bm(async()=>{const{addGroupedNotification:Fe}=await Promise.resolve().then(()=>oT);return{addGroupedNotification:Fe}},void 0);Ce({title:`Nytt meddelande frn ${Ee}`,content:me,senderName:Ee,icon:Pe,color:rt,groupId:"chat_messages"})}}).subscribe(),X=re=>{const pe=re.state;if(!pe){e===du.AUTHENTICATED?u("welcome"):y(!1);return}pe.view==="login"||pe.view==="premium-login"?y(!0):pe.view==="landing"&&y(!1),pe.tab&&u(pe.tab),p(pe.topic||null)};window.addEventListener("popstate",X);const{data:{subscription:Z}}=Rn.auth.onAuthStateChange(async(re,pe)=>{if(pe){t(du.AUTHENTICATED),y(!1);const{data:we}=await Rn.from("profiles").select("*").eq("id",pe.user.id).single();s({id:pe.user.id,email:pe.user.email||"",full_name:we?.full_name||pe.user.user_metadata.full_name||"Medlem",role:we?.role||"medlem",avatar_url:we?.avatar_url||pe.user.user_metadata.avatar_url,membership_level:we?.membership_level??2,membership_active:we?.membership_active??!0,notifications_enabled:we?.notifications_enabled??!0}),(k||window.location.hash==="#premium-login")&&u("chat")}else t(du.IDLE),s(null)});return()=>{window.removeEventListener("popstate",X),Z.unsubscribe(),Rn.removeChannel(ne)}},[e,k]),ie.useEffect(()=>{n&&(async()=>{if(n?.email==="billy.ljungberg90@gmail.com"&&n.role!=="admin"){console.log("Attempting to grant admin role...");const{error:X}=await Rn.from("profiles").update({role:"admin"}).eq("id",n.id);X?(console.error("Failed to grant admin:",X),alert("Kunde inte uppdatera rollen automatiskt (RLS stoppade det). Du mste kra SQL-skriptet i Supabase.")):(console.log("Admin role granted! Refreshing user data..."),s(Z=>Z?{...Z,role:"admin"}:null),alert("Admin-rttigheter har aktiverats fr ditt konto! Du har nu tillgng till Admin-panelen."))}})()},[n]);const z=()=>{i()},G=ne=>{s(ne),t(du.AUTHENTICATED);const X=k||window.location.hash==="#premium-login"?"chat":"welcome";u(X),window.history.pushState({tab:X,view:X},"",`#${X}`)},U=()=>{Rn.auth.signOut(),s(null),t(du.UNAUTHENTICATED),u("welcome"),p(null),y(!1),i(Se.LOGIN)},L=(ne,X=null,Z=!1)=>{u(ne),p(X),v(!1),Z||P(pe=>{const we=pe[pe.length-1];return we&&we.tab===ne&&we.topic===X?pe:[...pe,{tab:ne,topic:X}]});const re=X?`#${ne}?topic=${encodeURIComponent(X)}`:`#${ne}`;window.history.pushState({tab:ne,topic:X},"",re)},W=()=>{if(I.length>1){const ne=[...I];ne.pop();const X=ne[ne.length-1];P(ne),L(X.tab,X.topic,!0)}else a!=="dashboard"&&L("dashboard")},J=ne=>{L("chat",ne)},Q=ne=>{s(ne)},ue=({children:ne})=>l.jsxs("div",{className:"min-h-screen relative flex flex-col font-sans text-slate-100 selection:bg-orange-500/30",children:[l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-slate-950 via-slate-900 to-black animate-bg-shift z-0"}),l.jsx("div",{className:"fixed top-[-10%] left-[-10%] w-[800px] h-[800px] bg-orange-500/5 rounded-full blur-[150px] animate-pulse duration-[15000ms] z-0 pointer-events-none"}),l.jsx("div",{className:"fixed bottom-[-10%] right-[-10%] w-[800px] h-[800px] bg-amber-600/5 rounded-full blur-[150px] animate-pulse duration-[20000ms] z-0 pointer-events-none"}),l.jsx("div",{className:"fixed top-[20%] right-[10%] w-[400px] h-[400px] bg-white/2 rounded-full blur-[100px] pointer-events-none z-0"}),l.jsx("div",{className:"fixed inset-0 opacity-[0.02] bg-[url('https://www.transparenttextures.com/patterns/p6.png')] pointer-events-none z-0"}),l.jsx("div",{className:"relative z-10 flex flex-col flex-grow",children:ne})]});return w?l.jsx(l.Fragment,{children:l.jsx(YB,{onLoginClick:()=>{M(!1),n||y(!0)}})}):e===du.AUTHENTICATED&&n?l.jsxs(ue,{children:[l.jsxs("header",{className:"md:hidden border-b border-white/10 bg-black/20 backdrop-blur-xl sticky top-0 z-50",children:[l.jsxs("div",{className:"px-4 h-16 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:W,className:"group flex items-center justify-center w-10 h-10 rounded-xl bg-white/5 backdrop-blur-md border border-white/10 hover:border-orange-500/50 hover:bg-white/10 transition-all duration-300 shadow-lg active:scale-95",title:"G bakt","aria-label":"G bakt",children:l.jsx(Wv,{size:20,className:"text-slate-400 group-hover:text-orange-400 transition-colors"})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:l.jsx("img",{src:"/assets/logo2.png",alt:"Klttertrdet Logo",className:"w-full h-full object-contain"})}),l.jsx("h1",{className:"text-lg font-bold tracking-tight text-white",children:"Horizonten"})]})]}),l.jsx("button",{onClick:()=>v(!m),className:"p-2 text-slate-400 hover:text-white transition-colors",children:m?l.jsx(Mu,{size:24}):l.jsx(xT,{size:24})})]}),m&&l.jsx("div",{className:"md:hidden border-t border-white/10 bg-black/60 backdrop-blur-xl absolute w-full animate-in slide-in-from-top-2 duration-200 shadow-2xl",children:l.jsxs("div",{className:"px-4 py-4 space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-3 px-2 mb-6",children:[l.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gradient-to-br from-orange-400 to-red-600 flex items-center justify-center text-xs font-bold text-white border border-white/10",children:n.email==="billy.ljungberg90@gmail.com"?l.jsx("img",{src:"/assets/logo2.png",alt:"Admin",className:"w-full h-full object-cover p-1.5 bg-slate-900"}):n.avatar_url?l.jsx("img",{src:n.avatar_url,alt:n.full_name,className:"w-full h-full object-cover"}):n.full_name.charAt(0)}),l.jsx("span",{className:"font-semibold text-white",children:n.full_name})]}),l.jsxs("button",{onClick:()=>L("welcome"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${a==="welcome"?"bg-orange-500/10 text-orange-400 border border-orange-500/20":"text-slate-400 hover:bg-white/5"}`,children:[l.jsx(RM,{size:20})," ",l.jsx("span",{className:"font-medium",children:"Vlkommen hem"})]}),l.jsxs("button",{onClick:()=>L("dashboard"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${a==="dashboard"?"bg-orange-500/10 text-orange-400 border border-orange-500/20":"text-slate-400 hover:bg-white/5"}`,children:[l.jsx(V1,{size:20})," ",l.jsx("span",{className:"font-medium",children:"verblick"})]}),l.jsxs("button",{onClick:()=>L("chat"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${a==="chat"?"bg-orange-500/10 text-orange-400 border border-orange-500/20":"text-slate-400 hover:bg-white/5"}`,children:[l.jsx(Xv,{size:20})," ",l.jsx("span",{className:"font-medium",children:"Gemenskapen"})]}),l.jsxs("button",{onClick:()=>L("experts"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${a==="experts"?"bg-orange-500/10 text-orange-400 border border-orange-500/20":"text-slate-400 hover:bg-white/5"}`,children:[l.jsx(ws,{size:20})," ",l.jsx("span",{className:"font-medium",children:"Kontakt & Bokning"})]}),n.role==="admin"&&l.jsxs("button",{onClick:()=>L("admin"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${a==="admin"?"bg-orange-500/20 text-orange-400 border border-orange-500/30":"text-slate-400 hover:bg-white/5"}`,children:[l.jsx(la,{size:20})," ",l.jsx("span",{className:"font-medium",children:"Admin Panel"})]}),l.jsxs("div",{className:"border-t border-white/10 my-2 pt-2",children:[l.jsxs("button",{onClick:()=>i(),className:"w-full flex items-center gap-3 px-4 py-3 text-slate-400 hover:text-orange-400 hover:bg-white/5 rounded-xl transition-colors",children:[l.jsx(So,{size:20})," ",l.jsx("span",{className:"font-medium",children:"Klttertrdet.se"})]}),l.jsxs("button",{onClick:U,className:"w-full flex items-center gap-3 px-4 py-3 text-slate-400 hover:text-white hover:bg-white/5 rounded-xl transition-colors",children:[l.jsx(DM,{size:20})," ",l.jsx("span",{className:"font-medium",children:"Logga ut"})]})]})]})})]}),l.jsxs("div",{className:"flex h-[calc(100vh-64px)] md:h-screen overflow-hidden",children:[l.jsxs("aside",{className:"hidden md:flex flex-col w-72 bg-slate-950/50 backdrop-blur-2xl border-r border-white/5 p-6 relative z-50",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-12 px-2 cursor-pointer group",onClick:()=>L("dashboard"),children:[l.jsx("div",{className:"w-10 h-10 flex items-center justify-center transition-transform group-hover:scale-110 duration-300",children:l.jsx("img",{src:"/assets/logo2.png",alt:"Logo",className:"w-full h-full object-contain"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-bold tracking-tight text-white group-hover:text-orange-400 transition-colors",children:"Horizonten"}),l.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-bold",children:"Gemenskap"})]})]}),l.jsx("div",{className:"mb-8 px-2",children:l.jsxs("button",{onClick:W,className:"flex items-center gap-3 text-slate-400 hover:text-white transition-colors text-sm font-bold group",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center border border-white/5 group-hover:border-orange-500/30 group-hover:bg-white/10 transition-all",children:l.jsx(Wv,{size:16})}),"G bakt"]})}),l.jsx("nav",{className:"flex-1 space-y-2",children:[{id:"welcome",label:"Vlkommen hem",icon:RM},{id:"dashboard",label:"verblick",icon:V1},{id:"chat",label:"Gemenskapen",icon:Xv},{id:"experts",label:"Kontakt & Bokning",icon:ws},...n.role==="admin"?[{id:"admin",label:"Admin Panel",icon:la}]:[]].map(ne=>l.jsxs("button",{onClick:()=>L(ne.id),className:`
                    w-full flex items-center justify-between px-4 py-3.5 rounded-2xl transition-all duration-300 group relative overflow-hidden
                    ${a===ne.id?"bg-white/10 text-white shadow-lg shadow-black/20":"text-slate-400 hover:text-white hover:bg-white/5"}
                  `,children:[l.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[l.jsx(ne.icon,{size:20,className:a===ne.id?"text-orange-400":"group-hover:text-orange-400 transition-colors"}),l.jsx("span",{className:"font-medium text-[15px]",children:ne.label})]}),l.jsx("div",{className:`
                    w-1 h-8 bg-gradient-to-b from-transparent via-white to-transparent rounded-full shadow-[0_0_10px_white]
                    absolute right-4 transition-all duration-500 ease-out transform
                    ${a===ne.id?"opacity-100 scale-100 translate-x-0":"opacity-0 scale-50 translate-x-4 group-hover:opacity-60 group-hover:translate-x-0 group-hover:scale-75"}
                  `})]},ne.id))}),l.jsxs("div",{className:"pt-6 border-t border-white/5 space-y-4",children:[l.jsxs("button",{onClick:()=>D(!0),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-white/5 transition-colors text-slate-400 hover:text-white group",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-slate-800",children:n.avatar_url?l.jsx("img",{src:n.avatar_url,alt:"",className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs font-bold",children:n.full_name?.[0]})}),l.jsx("div",{className:"absolute -bottom-1 -right-1 bg-green-500 w-3 h-3 rounded-full border-2 border-slate-950"})]}),l.jsxs("div",{className:"text-left flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-bold text-white truncate",children:n.full_name.split(" ")[0]}),l.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:"Instllningar"})]}),l.jsx(VC,{size:16,className:"opacity-0 group-hover:opacity-100 transition-opacity"})]}),l.jsxs("button",{onClick:U,className:"w-full flex items-center gap-3 px-4 py-2 text-xs font-bold text-slate-500 hover:text-red-400 transition-colors uppercase tracking-widest pl-6",children:[l.jsx(DM,{size:14})," Logga ut"]})]})]}),l.jsx("main",{className:`flex-1 flex flex-col relative z-20 min-h-0 ${a==="chat"?"overflow-hidden":"overflow-y-auto custom-scrollbar"}`,children:a==="welcome"?l.jsxs("div",{className:"flex-1 animate-in fade-in slide-in-from-bottom-4 duration-500 overflow-y-auto",children:[l.jsx(c8,{}),l.jsx("div",{className:"p-4 md:px-12 md:pb-12",children:l.jsx(zv,{onBackToSite:i,onSettingsClick:()=>D(!0)})})]}):a==="dashboard"?l.jsxs("div",{className:"flex-1 animate-in fade-in slide-in-from-bottom-4 duration-500 overflow-y-auto",children:[l.jsx(i8,{user:n,onThreadClick:J,onBackToSite:i}),l.jsx("div",{className:"p-4 md:px-12 md:pb-12",children:l.jsx(zv,{onBackToSite:i,onSettingsClick:()=>D(!0)})})]}):a==="chat"?l.jsx("div",{className:"flex-1 h-full w-full animate-in fade-in slide-in-from-bottom-4 duration-500 overflow-hidden",children:l.jsx(l8,{user:n,initialThread:h,onOpenSettings:()=>D(!0),onLogout:U,onBackToSite:i})}):a==="experts"?l.jsxs("div",{className:"flex-1 animate-in fade-in slide-in-from-bottom-4 duration-500 overflow-y-auto",children:[l.jsx(PT,{}),l.jsx("div",{className:"p-4 md:px-12 md:pb-12",children:l.jsx(zv,{onBackToSite:i,onSettingsClick:()=>D(!0)})})]}):a==="admin"&&n.role==="admin"?l.jsxs("div",{className:"flex-1 animate-in fade-in slide-in-from-bottom-4 duration-500 overflow-y-auto",children:[l.jsx(u8,{user:n,onBack:()=>L("dashboard")}),l.jsx("div",{className:"p-4 md:px-12 md:pb-12",children:l.jsx(zv,{onBackToSite:i,onSettingsClick:()=>D(!0)})})]}):null})]}),R&&n&&l.jsx(d8,{user:n,onClose:()=>D(!1),onUpdate:Q}),l.jsx(h8,{})]}):l.jsx(ue,{children:l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 relative animate-in fade-in zoom-in-95 duration-700 overflow-hidden",children:[l.jsx("div",{className:"fixed inset-0 z-0 opacity-50 bg-black",children:l.jsx(Xk,{hovering:!0})}),l.jsxs("button",{onClick:z,className:"absolute top-8 left-8 text-slate-400 hover:text-white flex items-center gap-2 transition-colors z-50 group px-4 py-2 rounded-full hover:bg-white/5",children:[l.jsx(So,{size:20,className:"group-hover:-translate-x-1 transition-transform"}),"Tillbaka"]}),l.jsxs("div",{className:"relative z-10 w-full max-w-md bg-black/40 backdrop-blur-3xl p-8 rounded-[2.5rem] border border-white/5 shadow-2xl",children:[l.jsx("div",{className:"mb-8 flex justify-center"}),k?l.jsx(Z4,{onLoginSuccess:G,onBack:()=>{M(!0),y(!1),i(Se.LOGIN)}}):l.jsx(K4,{onLoginSuccess:G,initialView:N,onNavigateToPremium:()=>i(Se.PREMIUM_APPLICATION),onNavigateToTerms:()=>i(Se.TERMS),onNavigateToPrivacy:()=>i(Se.PRIVACY),onNavigateToCookies:()=>i(Se.COOKIE_POLICY),onNavigateToContact:()=>i(Se.CONTACT)})]})]})})},p8=({setPage:i})=>{const[e,t]=ie.useState(!1),[n,s]=ie.useState({name:"",email:"",phone:"",reason:"",paymentInterval:"monthly",paymentMethod:"swish"}),a=h=>{h.preventDefault();const p=encodeURIComponent(`Anskan om Premium Medlemskap: ${n.name}`),m=encodeURIComponent(`Namn: ${n.name}
E-post: ${n.email}
Telefon: ${n.phone}
Betalningsintervall: ${n.paymentInterval==="monthly"?"Mnadsvis (250 kr/mn)":"rsvis (2500 kr/r)"}

Motivering/Bakgrund:
${n.reason}`);window.location.href=`mailto:billy@klattertradet.se?subject=${p}&body=${m}`,t(!0)},u=h=>{const{name:p,value:m}=h.target;s(v=>({...v,[p]:m}))};return e?l.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:l.jsxs("div",{className:"max-w-xl w-full glass-card p-10 md:p-14 text-center animate-in fade-in zoom-in duration-500 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-amber-500 to-orange-600"}),l.jsx("div",{className:"w-20 h-20 bg-amber-500/20 rounded-full flex items-center justify-center mx-auto mb-8 shadow-[0_0_40px_rgba(245,158,11,0.2)]",children:l.jsx(bg,{className:"w-10 h-10 text-amber-500"})}),l.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Anskan mottagen!"}),l.jsxs("p",{className:"text-zinc-400 mb-10 leading-relaxed text-lg",children:["Fr att slutfra din anskan och f tillgng till gemenskapen behver vi din betalning. (Under testperioden r detta steg ",l.jsx("span",{className:"text-orange-500 font-bold uppercase tracking-widest",children:"valfritt"}),")."]}),l.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-8 mb-10 text-left space-y-6",children:[l.jsx("h3",{className:"text-white font-black uppercase tracking-widest text-xs text-center border-b border-white/10 pb-4",children:"Betalningsinstruktioner"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center group",children:[l.jsx("span",{className:"text-zinc-500 text-sm",children:"Belopp att betala:"}),l.jsx("span",{className:"text-white font-bold text-xl",children:n.paymentInterval==="monthly"?"250 kr":"2500 kr"})]}),l.jsxs("div",{className:"space-y-4 pt-2",children:[l.jsxs("div",{className:"p-4 bg-orange-500/10 border border-orange-500/30 rounded-xl flex items-center justify-between",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-orange-500 text-[10px] font-black uppercase tracking-wider mb-1",children:"Swish"}),l.jsx("span",{className:"text-white font-mono font-bold text-lg tracking-wider",children:"123 456 78 90"})]}),l.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/Swish_Logo.svg/1200px-Swish_Logo.svg.png",alt:"Swish",className:"w-10 h-10 object-contain"})]}),l.jsxs("div",{className:"p-4 bg-white/5 border border-white/10 rounded-xl flex items-center justify-between",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-zinc-500 text-[10px] font-black uppercase tracking-wider mb-1",children:"Bankgiro"}),l.jsx("span",{className:"text-white font-mono font-bold text-lg tracking-wider",children:"XXXX-XXXX"})]}),l.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:l.jsx(R_,{className:"text-zinc-500"})})]})]}),l.jsx("div",{className:"pt-4 border-t border-white/10",children:l.jsxs("p",{className:"text-zinc-500 text-[11px] leading-relaxed",children:[l.jsx("span",{className:"text-white font-bold",children:"Viktigt:"})," Ange ditt fullstndiga namn (",n.name,") som meddelande vid betalning s att vi kan koppla den till din anskan."]})})]})]}),l.jsxs("p",{className:"text-zinc-500 text-sm mb-10",children:["Ett bekrftelsemejl har skickats till ",l.jsx("span",{className:"text-white",children:n.email}),". Nr betalningen registrerats (vanligtvis inom 24h) skickas dina inloggningsuppgifter."]}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx("button",{onClick:()=>{window.location.hash="#login",i(Se.GEMENSKAP_APP)},className:"w-full py-4 bg-orange-500 hover:bg-orange-400 text-black font-bold rounded-xl transition-all active:scale-[0.98] shadow-lg shadow-orange-500/20",children:"Logga in direkt (Testlge - ingen betalning krvs)"}),l.jsx("button",{onClick:()=>i(Se.HOME),className:"w-full py-4 bg-white/5 hover:bg-white/10 border border-white/10 text-white font-bold rounded-xl transition-all active:scale-[0.98]",children:"Tillbaka till startsidan"})]}),l.jsx("p",{className:"text-[10px] text-zinc-600 mt-6 italic",children:"Frgor? Kontakta oss p billy@klattertradet.se"})]})}):l.jsx("div",{className:"flex-1 py-24 px-6",children:l.jsxs("div",{className:"max-w-3xl mx-auto",children:[l.jsxs("button",{onClick:()=>i(Se.LOGIN),className:"flex items-center gap-2 text-zinc-500 hover:text-amber-500 transition-colors mb-8 group",children:[l.jsx(So,{className:"w-4 h-4 transition-transform group-hover:-translate-x-1"}),"Tillbaka"]}),l.jsxs("div",{className:"glass-card p-8 md:p-12",children:[l.jsxs("div",{className:"mb-12",children:[l.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Ansk om Premium Medlemskap"}),l.jsx("p",{className:"text-zinc-400 text-lg",children:"Fyll i formulret nedan fr att pbrja din anskan. Vi granskar alla medlemskap manuellt fr att skerstlla kvaliteten i vr community."})]}),l.jsxs("form",{onSubmit:a,className:"space-y-6",children:[l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-zinc-300 ml-1",children:"Fullstndigt namn"}),l.jsxs("div",{className:"relative",children:[l.jsx(yT,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),l.jsx("input",{required:!0,type:"text",name:"name",value:n.name,onChange:u,placeholder:"Ditt namn",className:"w-full bg-white/5 border border-white/10 rounded-xl py-4 pl-12 pr-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-amber-500/50 transition-all font-medium"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-zinc-300 ml-1",children:"E-postadress"}),l.jsxs("div",{className:"relative",children:[l.jsx(ap,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),l.jsx("input",{required:!0,type:"email",name:"email",value:n.email,onChange:u,placeholder:"din.epost@exempel.se",className:"w-full bg-white/5 border border-white/10 rounded-xl py-4 pl-12 pr-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-amber-500/50 transition-all font-medium"})]})]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-zinc-300 ml-1",children:"Telefonnummer"}),l.jsxs("div",{className:"relative",children:[l.jsx(PC,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),l.jsx("input",{required:!0,type:"tel",name:"phone",value:n.phone,onChange:u,placeholder:"070-000 00 00",className:"w-full bg-white/5 border border-white/10 rounded-xl py-4 pl-12 pr-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-amber-500/50 transition-all font-medium"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-zinc-300 ml-1",children:"nskad betalningsplan"}),l.jsxs("div",{className:"relative",children:[l.jsx(R_,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),l.jsxs("select",{name:"paymentInterval",value:n.paymentInterval,onChange:u,className:"w-full bg-white/5 border border-white/10 rounded-xl py-4 pl-12 pr-4 text-white appearance-none focus:outline-none focus:ring-2 focus:ring-amber-500/50 transition-all font-medium cursor-pointer",children:[l.jsx("option",{value:"monthly",children:"250 kr / mnad"}),l.jsx("option",{value:"yearly",children:"2500 kr / r (Spara 500 kr)"})]})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-zinc-300 ml-1",children:"Varfr vill du g med i Premium?"}),l.jsx("textarea",{required:!0,name:"reason",value:n.reason,onChange:u,placeholder:"Bertta lite kort om dig sjlv och vad du hoppas f ut av gemenskapen...",rows:5,className:"w-full bg-white/5 border border-white/10 rounded-xl p-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-amber-500/50 transition-all font-medium resize-none"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("label",{className:"text-sm font-medium text-zinc-300 ml-1",children:"Vlj betalstt"}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("label",{className:`flex items-center gap-4 p-4 rounded-xl border transition-all cursor-pointer ${n.paymentMethod==="swish"?"bg-orange-500/10 border-orange-500":"bg-white/5 border-white/10 hover:border-white/20"}`,children:[l.jsx("input",{type:"radio",name:"paymentMethod",value:"swish",checked:n.paymentMethod==="swish",onChange:u,className:"hidden"}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${n.paymentMethod==="swish"?"border-orange-500":"border-zinc-600"}`,children:n.paymentMethod==="swish"&&l.jsx("div",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full"})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-bold text-white text-sm",children:"Swish"}),l.jsx("span",{className:"text-[10px] text-zinc-500 uppercase font-black",children:"Direktbetalning"})]}),l.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/Swish_Logo.svg/1200px-Swish_Logo.svg.png",alt:"Swish",className:"w-8 h-8 ml-auto object-contain"})]}),l.jsxs("label",{className:`flex items-center gap-4 p-4 rounded-xl border transition-all cursor-pointer ${n.paymentMethod==="card"?"bg-orange-500/10 border-orange-500":"bg-white/5 border-white/10 hover:border-white/20"}`,children:[l.jsx("input",{type:"radio",name:"paymentMethod",value:"card",checked:n.paymentMethod==="card",onChange:u,className:"hidden"}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${n.paymentMethod==="card"?"border-orange-500":"border-zinc-600"}`,children:n.paymentMethod==="card"&&l.jsx("div",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full"})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-bold text-white text-sm",children:"Kort"}),l.jsx("span",{className:"text-[10px] text-zinc-500 uppercase font-black",children:"Visa / Mastercard"})]}),l.jsx("div",{className:"flex gap-1 ml-auto",children:l.jsx(R_,{size:20,className:"text-zinc-400"})})]})]})]}),l.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 space-y-4",children:[l.jsx("h3",{className:"text-white font-bold text-sm",children:"Betalnings- och medlemsvillkor"}),l.jsxs("div",{className:"text-xs text-zinc-400 leading-relaxed space-y-2 max-h-32 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-white/10",children:[l.jsx("p",{children:"Genom att slutfra anskan och betalning godknner du fljande villkor:"}),l.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[l.jsx("li",{children:"Medlemskapet aktiveras s snart betalningen har registrerats och din profil har verifierats manuellt."}),l.jsx("li",{children:"Betalning sker i frskott och frnyas automatiskt enligt valt intervall (mnad/r)."}),l.jsx("li",{children:"Du kan nr som helst sga upp ditt medlemskap via dina instllningar. Ingen terbetalning sker fr pbrjad period."}),l.jsx("li",{children:"Innehll i gemenskapen r skyddat och fr inte spridas utanfr plattformen."}),l.jsx("li",{children:"Respektfullt bemtande r ett krav fr fortsatt medlemskap."})]})]}),l.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group pt-2",children:[l.jsx("input",{required:!0,type:"checkbox",className:"mt-1 w-4 h-4 rounded border-white/20 bg-white/5 text-orange-500 focus:ring-orange-500 focus:ring-offset-0"}),l.jsx("span",{className:"text-xs text-zinc-500 group-hover:text-zinc-300 transition-colors",children:"Jag godknner betalningsvillkoren och bekrftar att jag frstr att tillgng till gemenskapen krver genomfrd betalning."})]})]}),l.jsxs("button",{type:"submit",className:"w-full py-5 bg-amber-500 hover:bg-amber-400 text-black font-bold rounded-xl transition-all flex items-center justify-center gap-3 text-lg group active:scale-95 shadow-[0_10px_30px_rgba(245,158,11,0.2)]",children:[l.jsx(ml,{className:"w-5 h-5 transition-transform group-hover:translate-x-1 group-hover:-translate-y-1"}),"G vidare till betalning"]})]})]})]})})},m8=({setPage:i})=>{const[e,t]=ie.useState(!1),[n,s]=ie.useState(!1),[a,u]=ie.useState(null),[h,p]=ie.useState({name:"",email:"",password:""}),[m,v]=ie.useState(!1),b=async w=>{w.preventDefault(),s(!0),u(null);try{const{data:M,error:k}=await Rn.auth.signUp({email:h.email,password:h.password,options:{emailRedirectTo:window.location.origin,data:{full_name:h.name,avatar_url:""}}});k?(u(k.message),s(!1)):M.user&&(await Rn.from("profiles").upsert({id:M.user.id,email:h.email,full_name:h.name,membership_level:1,membership_active:!0,updated_at:new Date().toISOString()}),t(!0),s(!1))}catch{u("Ett ovntat fel uppstod."),s(!1)}},y=w=>{const{name:M,value:k}=w.target;p(T=>({...T,[M]:k}))};return e?l.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:l.jsxs("div",{className:"max-w-xl w-full glass-card p-10 md:p-14 text-center animate-in fade-in zoom-in duration-500 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-green-500 to-emerald-600"}),l.jsx("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-8 shadow-[0_0_40px_rgba(34,197,94,0.2)]",children:l.jsx(bg,{className:"w-10 h-10 text-green-500"})}),l.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Vlkommen till gemenskapen!"}),l.jsx("p",{className:"text-zinc-400 mb-10 leading-relaxed text-lg",children:"Ditt konto har skapats. Vi har skickat ett bekrftelsemail till din e-postadress. Vnligen klicka p lnken i mailet fr att verifiera ditt konto och logga in."}),l.jsx("button",{onClick:()=>{window.location.hash="#login",i(Se.GEMENSKAP_APP)},className:"w-full py-4 bg-white/5 hover:bg-white/10 border border-white/10 text-white font-bold rounded-xl transition-all active:scale-[0.98]",children:"G till inloggning"})]})}):l.jsx("div",{className:"flex-1 py-24 px-6",children:l.jsxs("div",{className:"max-w-3xl mx-auto",children:[l.jsxs("button",{onClick:()=>i(Se.LOGIN),className:"flex items-center gap-2 text-zinc-500 hover:text-white transition-colors mb-8 group",children:[l.jsx(So,{className:"w-4 h-4 transition-transform group-hover:-translate-x-1"}),"Tillbaka"]}),l.jsxs("div",{className:"glass-card p-8 md:p-12",children:[l.jsxs("div",{className:"mb-12",children:[l.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Registrera Gratis Medlemskap"}),l.jsx("p",{className:"text-zinc-400 text-lg",children:"Fyll i formulret nedan fr att skapa ditt konto. Det r helt kostnadsfritt och du fr direkt tillgng till vr ppna gemenskap."})]}),l.jsxs("form",{onSubmit:b,className:"space-y-6",children:[a&&l.jsx("div",{className:"bg-red-500/10 border border-red-500/20 p-4 rounded-xl text-red-200 text-sm",children:a}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-zinc-300 ml-1",children:"Fullstndigt namn"}),l.jsxs("div",{className:"relative",children:[l.jsx(yT,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),l.jsx("input",{required:!0,type:"text",name:"name",value:h.name,onChange:y,placeholder:"Ditt namn",className:"w-full bg-white/5 border border-white/10 rounded-xl py-4 pl-12 pr-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-amber-500/50 transition-all font-medium"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-zinc-300 ml-1",children:"E-postadress"}),l.jsxs("div",{className:"relative",children:[l.jsx(ap,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),l.jsx("input",{required:!0,type:"email",name:"email",value:h.email,onChange:y,placeholder:"din.epost@exempel.se",className:"w-full bg-white/5 border border-white/10 rounded-xl py-4 pl-12 pr-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-amber-500/50 transition-all font-medium"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-zinc-300 ml-1",children:"Lsenord"}),l.jsxs("div",{className:"relative",children:[l.jsx(qd,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),l.jsx("input",{required:!0,type:"password",name:"password",value:h.password,onChange:y,placeholder:"Vlj ett skert lsenord",minLength:6,className:"w-full bg-white/5 border border-white/10 rounded-xl py-4 pl-12 pr-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-amber-500/50 transition-all font-medium"})]})]}),l.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 space-y-4",children:[l.jsx("h3",{className:"text-white font-bold text-sm",children:"Medlemsvillkor"}),l.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group pt-2",children:[l.jsx("input",{required:!0,type:"checkbox",checked:m,onChange:w=>v(w.target.checked),className:"mt-1 w-4 h-4 rounded border-white/20 bg-white/5 text-orange-500 focus:ring-orange-500 focus:ring-offset-0"}),l.jsxs("span",{className:"text-xs text-zinc-500 group-hover:text-zinc-300 transition-colors",children:["Jag godknner"," ",l.jsx("button",{type:"button",onClick:w=>{w.preventDefault(),i(Se.TERMS)},className:"text-blue-400 hover:text-blue-300 underline font-bold",children:"medlemsvillkoren"})," ","och bekrftar att jag frstr att detta r en trygg plats dr vi behandlar varandra med respekt."]})]})]}),l.jsx("button",{type:"submit",disabled:n||!m,className:"w-full py-5 bg-white hover:bg-slate-200 text-black font-bold rounded-xl transition-all flex items-center justify-center gap-3 text-lg group active:scale-95 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:n?l.jsx(Tw,{className:"animate-spin",size:20}):l.jsxs(l.Fragment,{children:["Skapa konto",l.jsx(us,{className:"w-5 h-5 transition-transform group-hover:translate-x-1"})]})}),l.jsx("button",{type:"button",onClick:()=>i(Se.PREMIUM_APPLICATION),className:"w-full py-4 bg-transparent hover:bg-white/5 border border-white/10 text-orange-400 font-bold rounded-xl transition-all flex items-center justify-center gap-2 text-sm uppercase tracking-wider",children:"Till premium medlemskapet"})]})]})]})})},g8=()=>{const[i,e]=ie.useState(Se.HOME),[t,n]=ie.useState(!1);ie.useEffect(()=>{const u=m=>{m.state&&m.state.page?e(m.state.page):window.location.hash.includes("#login")||window.location.hash.includes("#premium-login")?e(Se.GEMENSKAP_APP):e(Se.HOME)};window.addEventListener("popstate",u);const h=window.location.hash,p=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone;return h.includes("#login")||h.includes("#premium-login")||h.includes("#signup")?(e(Se.GEMENSKAP_APP),window.history.replaceState({page:Se.GEMENSKAP_APP},"")):p&&(i===Se.HOME||!h)?(e(Se.GEMENSKAP_APP),window.location.hash="#premium-login",window.history.replaceState({page:Se.GEMENSKAP_APP},"")):window.history.state||window.history.replaceState({page:i},""),()=>window.removeEventListener("popstate",u)},[]);const s=(u,h)=>{u!==i&&(window.history.pushState({page:u,...h},""),e(u))};ie.useEffect(()=>{if(window.scrollTo({top:0,behavior:"auto"}),i===Se.HOME)document.title="Klttertrdet";else if(i===Se.GEMENSKAP_APP)document.title="Horizonten gemenskap";else{const u=i.charAt(0)+i.slice(1).toLowerCase().replace("_"," ");document.title=`${u} | Horizonten`}},[i]);const a=()=>{n(!t)};return l.jsxs("div",{className:`relative min-h-screen flex flex-col transition-all duration-700 ease-in-out ${t?"bg-glossy-gradient-dark":"bg-glossy-gradient"}`,children:[l.jsx(YC,{}),l.jsx(C4,{setPage:s}),i!==Se.GEMENSKAP_APP&&l.jsx($C,{currentPage:i,setPage:s,isDarkMode:t,toggleTheme:a}),l.jsx("main",{className:"flex-1 w-full flex flex-col",children:(()=>{switch(i){case Se.HOME:return l.jsx(aE,{setPage:s});case Se.ABOUT:return l.jsx(j4,{});case Se.CHAT:return l.jsx(D4,{});case Se.THERAPY:return l.jsx(I4,{setPage:s});case Se.GROUP_THERAPY:return l.jsx(O4,{setPage:s});case Se.GESTALT_TRAINING:return l.jsx(L4,{setPage:s});case Se.BEHANDLINGS_ASSISTENT:return l.jsx(U4,{setPage:s});case Se.BLOG:return l.jsx(P4,{setPage:s});case Se.COMMUNITY:return l.jsx(z4,{});case Se.CONTACT:return l.jsx(B4,{});case Se.SURVEY:return l.jsx(F4,{});case Se.DOWNLOADS:return l.jsx(V4,{});case Se.LOGIN:return l.jsx(H4,{setPage:s});case Se.BOOK:return l.jsx(G4,{setPage:s});case Se.CHECKOUT:return l.jsxs("div",{className:"container mx-auto px-6 py-24 text-center",children:[l.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Kassa"}),l.jsx("p",{className:"text-zinc-400",children:"Betalningslsning kommer snart..."}),l.jsx("button",{onClick:()=>s(Se.BOOK),className:"mt-8 text-amber-500 font-bold underline",children:"Tillbaka"})]});case Se.PRIVACY:return l.jsx(q4,{setPage:s});case Se.COOKIE_POLICY:return l.jsx(W4,{setPage:s});case Se.TERMS:return l.jsx(X4,{setPage:s});case Se.PREMIUM_APPLICATION:return l.jsx(p8,{setPage:s});case Se.FREE_REGISTRATION:return l.jsx(m8,{setPage:s});case Se.GEMENSKAP_APP:return l.jsx(f8,{onBackToSite:u=>s(u||Se.HOME)});default:return l.jsx(aE,{setPage:s})}})()}),i!==Se.GEMENSKAP_APP&&l.jsx("footer",{className:"py-12 mt-auto border-t border-white/10",children:l.jsxs("div",{className:"max-w-[1600px] mx-auto px-6 flex flex-col items-center gap-6",children:[l.jsxs("div",{className:"flex flex-wrap justify-center gap-x-8 gap-y-3 text-[10px] md:text-xs font-bold text-white/30 tracking-widest uppercase",children:[l.jsx("button",{onClick:()=>s(Se.COOKIE_POLICY),className:"hover:text-amber-500 transition-colors whitespace-nowrap",children:"Cookies"}),l.jsx("button",{onClick:()=>s(Se.TERMS),className:"hover:text-amber-500 transition-colors whitespace-nowrap",children:"Medlemsvillkor"}),l.jsx("button",{onClick:()=>s(Se.PRIVACY),className:"hover:text-amber-500 transition-colors whitespace-nowrap",children:"Integritet & Sekretess"})]}),l.jsx("div",{className:"text-white/50 text-[10px] md:text-xs tracking-tight",children:l.jsx("p",{children:" 2025 Klttertrdet & Horizonten."})})]})})]})},y3=document.getElementById("root");if(!y3)throw new Error("Could not find root element to mount to");const x8=hC.createRoot(y3);x8.render(l.jsx(Zb.StrictMode,{children:l.jsx(g8,{})}));
